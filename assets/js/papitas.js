!function(){var t,e;(function(){e={}}).call(this),function(){(function(){var t=this,i=t._,n={},r=Array.prototype,o=Object.prototype,s=Function.prototype,a=r.push,l=r.slice,u=r.concat,h=o.toString,c=o.hasOwnProperty,d=r.forEach,p=r.map,f=r.reduce,m=r.reduceRight,g=r.filter,_=r.every,y=r.some,v=r.indexOf,b=r.lastIndexOf,w=Array.isArray,x=Object.keys,T=s.bind,M=function(t){return t instanceof M?t:this instanceof M?void(this._wrapped=t):new M(t)};"undefined"!=typeof e?("undefined"!=typeof module&&module.exports&&(e=module.exports=M),e._=M):t._=M,M.VERSION="1.5.2";var k=function(t){return"[object Arguments]"===h.call(t)};k(arguments)||(k=function(t){return!(!t||!c.call(t,"callee")||"function"!=typeof t.callee)});var S=function(t){return t.length===+t.length&&(k(t)||t.constructor!==Object)},L=M.each=M.forEach=function(t,e,i){if(null!=t)if(d&&t.forEach===d)t.forEach(e,i);else if(S(t)){for(var r=0,o=t.length;o>r;r++)if(e.call(i,t[r],r,t)===n)return}else for(var s=M.keys(t),r=0,o=s.length;o>r;r++)if(e.call(i,t[s[r]],s[r],t)===n)return};M.map=M.collect=function(t,e,i){var n=[];return null==t?n:p&&t.map===p?t.map(e,i):(L(t,function(t,r,o){n.push(e.call(i,t,r,o))}),n)};var C="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return n&&(e=M.bind(e,n)),r?t.reduce(e,i):t.reduce(e);if(L(t,function(t,o,s){r?i=e.call(n,i,t,o,s):(i=t,r=!0)}),!r)throw new TypeError(C);return i},M.reduceRight=M.foldr=function(t,e,i,n){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return n&&(e=M.bind(e,n)),r?t.reduceRight(e,i):t.reduceRight(e);var o=t.length;if(!S(t)){var s=M.keys(t);o=s.length}if(L(t,function(a,l,u){l=s?s[--o]:--o,r?i=e.call(n,i,t[l],l,u):(i=t[l],r=!0)}),!r)throw new TypeError(C);return i},M.find=M.detect=function(t,e,i){var n;return P(t,function(t,r,o){return e.call(i,t,r,o)?(n=t,!0):void 0}),n},M.filter=M.select=function(t,e,i){var n=[];return null==t?n:g&&t.filter===g?t.filter(e,i):(L(t,function(t,r,o){e.call(i,t,r,o)&&n.push(t)}),n)},M.reject=function(t,e,i){return M.filter(t,function(t,n,r){return!e.call(i,t,n,r)},i)},M.every=M.all=function(t,e,i){e||(e=M.identity);var r=!0;return null==t?r:_&&t.every===_?t.every(e,i):(L(t,function(t,o,s){return(r=r&&e.call(i,t,o,s))?void 0:n}),!!r)};var P=M.some=M.any=function(t,e,i){e||(e=M.identity);var r=!1;return null==t?r:y&&t.some===y?t.some(e,i):(L(t,function(t,o,s){return r||(r=e.call(i,t,o,s))?n:void 0}),!!r)};M.contains=M.include=function(t,e){return null==t?!1:v&&t.indexOf===v?-1!=t.indexOf(e):P(t,function(t){return t===e})},M.invoke=function(t,e){var i=l.call(arguments,2),n=M.isFunction(e);return M.map(t,function(t){return(n?e:t[e]).apply(t,i)})},M.pluck=function(t,e){return M.map(t,function(t){return t[e]})},M.where=function(t,e,i){return M.isEmpty(e)?i?void 0:[]:M[i?"find":"filter"](t,function(t){for(var i in e)if(e[i]!==t[i])return!1;return!0})},M.findWhere=function(t,e){return M.where(t,e,!0)},M.max=function(t,e,i){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&M.isEmpty(t))return-1/0;var n={computed:-1/0,value:-1/0};return L(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;s>n.computed&&(n={value:t,computed:s})}),n.value},M.min=function(t,e,i){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&M.isEmpty(t))return 1/0;var n={computed:1/0,value:1/0};return L(t,function(t,r,o){var s=e?e.call(i,t,r,o):t;s<n.computed&&(n={value:t,computed:s})}),n.value},M.shuffle=function(t){var e,i=0,n=[];return L(t,function(t){e=M.random(i++),n[i-1]=n[e],n[e]=t}),n},M.sample=function(t,e,i){return arguments.length<2||i?t[M.random(t.length-1)]:M.shuffle(t).slice(0,Math.max(0,e))};var D=function(t){return M.isFunction(t)?t:function(e){return e[t]}};M.sortBy=function(t,e,i){var n=D(e);return M.pluck(M.map(t,function(t,e,r){return{value:t,index:e,criteria:n.call(i,t,e,r)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(n>i||void 0===n)return-1}return t.index-e.index}),"value")};var E=function(t){return function(e,i,n){var r={},o=null==i?M.identity:D(i);return L(e,function(i,s){var a=o.call(n,i,s,e);t(r,a,i)}),r}};M.groupBy=E(function(t,e,i){(M.has(t,e)?t[e]:t[e]=[]).push(i)}),M.indexBy=E(function(t,e,i){t[e]=i}),M.countBy=E(function(t,e){M.has(t,e)?t[e]++:t[e]=1}),M.sortedIndex=function(t,e,i,n){i=null==i?M.identity:D(i);for(var r=i.call(n,e),o=0,s=t.length;s>o;){var a=o+s>>>1;i.call(n,t[a])<r?o=a+1:s=a}return o},M.toArray=function(t){return t?M.isArray(t)?l.call(t):S(t)?M.map(t,M.identity):M.values(t):[]},M.size=function(t){return null==t?0:S(t)?t.length:M.keys(t).length},M.first=M.head=M.take=function(t,e,i){return null==t?void 0:null==e||i?t[0]:l.call(t,0,e)},M.initial=function(t,e,i){return l.call(t,0,t.length-(null==e||i?1:e))},M.last=function(t,e,i){return null==t?void 0:null==e||i?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},M.rest=M.tail=M.drop=function(t,e,i){return l.call(t,null==e||i?1:e)},M.compact=function(t){return M.filter(t,M.identity)};var A=function(t,e,i){return e&&M.every(t,M.isArray)?u.apply(i,t):(L(t,function(t){M.isArray(t)||M.isArguments(t)?e?a.apply(i,t):A(t,e,i):i.push(t)}),i)};M.flatten=function(t,e){return A(t,e,[])},M.without=function(t){return M.difference(t,l.call(arguments,1))},M.uniq=M.unique=function(t,e,i,n){M.isFunction(e)&&(n=i,i=e,e=!1);var r=i?M.map(t,i,n):t,o=[],s=[];return L(r,function(i,n){(e?n&&s[s.length-1]===i:M.contains(s,i))||(s.push(i),o.push(t[n]))}),o},M.union=function(){return M.uniq(M.flatten(arguments,!0))},M.intersection=function(t){var e=l.call(arguments,1);return M.filter(M.uniq(t),function(t){return M.every(e,function(e){return M.indexOf(e,t)>=0})})},M.difference=function(t){var e=u.apply(r,l.call(arguments,1));return M.filter(t,function(t){return!M.contains(e,t)})},M.zip=function(){for(var t=M.max(M.pluck(arguments,"length").concat(0)),e=new Array(t),i=0;t>i;i++)e[i]=M.pluck(arguments,""+i);return e},M.object=function(t,e){if(null==t)return{};for(var i={},n=0,r=t.length;r>n;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i},M.indexOf=function(t,e,i){if(null==t)return-1;var n=0,r=t.length;if(i){if("number"!=typeof i)return n=M.sortedIndex(t,e),t[n]===e?n:-1;n=0>i?Math.max(0,r+i):i}if(v&&t.indexOf===v)return t.indexOf(e,i);for(;r>n;n++)if(t[n]===e)return n;return-1},M.lastIndexOf=function(t,e,i){if(null==t)return-1;var n=null!=i;if(b&&t.lastIndexOf===b)return n?t.lastIndexOf(e,i):t.lastIndexOf(e);for(var r=n?i:t.length;r--;)if(t[r]===e)return r;return-1},M.range=function(t,e,i){arguments.length<=1&&(e=t||0,t=0),i=arguments[2]||1;for(var n=Math.max(Math.ceil((e-t)/i),0),r=0,o=new Array(n);n>r;)o[r++]=t,t+=i;return o};var O=function(){};M.bind=function(t,e){var i,n;if(T&&t.bind===T)return T.apply(t,l.call(arguments,1));if(!M.isFunction(t))throw new TypeError;return i=l.call(arguments,2),n=function(){if(!(this instanceof n))return t.apply(e,i.concat(l.call(arguments)));O.prototype=t.prototype;var r=new O;O.prototype=null;var o=t.apply(r,i.concat(l.call(arguments)));return Object(o)===o?o:r}},M.partial=function(t){var e=l.call(arguments,1);return function(){return t.apply(this,e.concat(l.call(arguments)))}},M.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return L(e,function(e){t[e]=M.bind(t[e],t)}),t},M.memoize=function(t,e){var i={};return e||(e=M.identity),function(){var n=e.apply(this,arguments);return M.has(i,n)?i[n]:i[n]=t.apply(this,arguments)}},M.delay=function(t,e){var i=l.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},M.defer=function(t){return M.delay.apply(M,[t,1].concat(l.call(arguments,1)))},M.throttle=function(t,e,i){var n,r,o,s=null,a=0;i||(i={});var l=function(){a=i.leading===!1?0:new Date,s=null,o=t.apply(n,r)};return function(){var u=new Date;a||i.leading!==!1||(a=u);var h=e-(u-a);return n=this,r=arguments,0>=h?(clearTimeout(s),s=null,a=u,o=t.apply(n,r)):s||i.trailing===!1||(s=setTimeout(l,h)),o}},M.debounce=function(t,e,i){var n,r,o,s,a;return function(){o=this,r=arguments,s=new Date;var l=function(){var u=new Date-s;e>u?n=setTimeout(l,e-u):(n=null,i||(a=t.apply(o,r)))},u=i&&!n;return n||(n=setTimeout(l,e)),u&&(a=t.apply(o,r)),a}},M.once=function(t){var e,i=!1;return function(){return i?e:(i=!0,e=t.apply(this,arguments),t=null,e)}},M.wrap=function(t,e){return function(){var i=[t];return a.apply(i,arguments),e.apply(this,i)}},M.compose=function(){var t=arguments;return function(){for(var e=arguments,i=t.length-1;i>=0;i--)e=[t[i].apply(this,e)];return e[0]}},M.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},M.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var i in t)M.has(t,i)&&e.push(i);return e},M.values=function(t){for(var e=M.keys(t),i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=t[e[r]];return n},M.pairs=function(t){for(var e=M.keys(t),i=e.length,n=new Array(i),r=0;i>r;r++)n[r]=[e[r],t[e[r]]];return n},M.invert=function(t){for(var e={},i=M.keys(t),n=0,r=i.length;r>n;n++)e[t[i[n]]]=i[n];return e},M.functions=M.methods=function(t){var e=[];for(var i in t)M.isFunction(t[i])&&e.push(i);return e.sort()},M.extend=function(t){return L(l.call(arguments,1),function(e){if(e)for(var i in e)t[i]=e[i]}),t},M.pick=function(t){var e={},i=u.apply(r,l.call(arguments,1));return L(i,function(i){i in t&&(e[i]=t[i])}),e},M.omit=function(t){var e={},i=u.apply(r,l.call(arguments,1));for(var n in t)M.contains(i,n)||(e[n]=t[n]);return e},M.defaults=function(t){return L(l.call(arguments,1),function(e){if(e)for(var i in e)void 0===t[i]&&(t[i]=e[i])}),t},M.clone=function(t){return M.isObject(t)?M.isArray(t)?t.slice():M.extend({},t):t},M.tap=function(t,e){return e(t),t};var I=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof M&&(t=t._wrapped),e instanceof M&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=i.length;o--;)if(i[o]==t)return n[o]==e;var s=t.constructor,a=e.constructor;if(s!==a&&!(M.isFunction(s)&&s instanceof s&&M.isFunction(a)&&a instanceof a))return!1;i.push(t),n.push(e);var l=0,u=!0;if("[object Array]"==r){if(l=t.length,u=l==e.length)for(;l--&&(u=I(t[l],e[l],i,n)););}else{for(var c in t)if(M.has(t,c)&&(l++,!(u=M.has(e,c)&&I(t[c],e[c],i,n))))break;if(u){for(c in e)if(M.has(e,c)&&!l--)break;u=!l}}return i.pop(),n.pop(),u};M.isEqual=function(t,e){return I(t,e,[],[])},M.isEmpty=function(t){if(null==t)return!0;if(M.isArray(t)||M.isString(t))return 0===t.length;for(var e in t)if(M.has(t,e))return!1;return!0},M.isElement=function(t){return!(!t||1!==t.nodeType)},M.isArray=w||function(t){return"[object Array]"==h.call(t)},M.isObject=function(t){return t===Object(t)},L(["Arguments","Function","String","Number","Date","RegExp"],function(t){M["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),M.isArguments(arguments)||(M.isArguments=function(t){return!(!t||!M.has(t,"callee"))}),"function"!=typeof/./&&(M.isFunction=function(t){return"function"==typeof t}),M.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},M.isNaN=function(t){return M.isNumber(t)&&t!=+t},M.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.has=function(t,e){return c.call(t,e)},M.noConflict=function(){return t._=i,this},M.identity=function(t){return t},M.times=function(t,e,i){for(var n=Array(Math.max(0,t)),r=0;t>r;r++)n[r]=e.call(i,r);return n},M.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};R.unescape=M.invert(R.escape);var Y={escape:new RegExp("["+M.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(R.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(t){M[t]=function(e){return null==e?"":(""+e).replace(Y[t],function(e){return R[t][e]})}}),M.result=function(t,e){if(null==t)return void 0;var i=t[e];return M.isFunction(i)?i.call(t):i},M.mixin=function(t){L(M.functions(t),function(e){var i=M[e]=t[e];M.prototype[e]=function(){var t=[this._wrapped];return a.apply(t,arguments),U.call(this,i.apply(M,t))}})};var N=0;M.uniqueId=function(t){var e=++N+"";return t?t+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var j=/(.)^/,F={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(t,e,i){var n;i=M.defaults({},i,M.templateSettings);var r=new RegExp([(i.escape||j).source,(i.interpolate||j).source,(i.evaluate||j).source].join("|")+"|$","g"),o=0,s="__p+='";t.replace(r,function(e,i,n,r,a){return s+=t.slice(o,a).replace(B,function(t){return"\\"+F[t]}),i&&(s+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'"),n&&(s+="'+\n((__t=("+n+"))==null?'':__t)+\n'"),r&&(s+="';\n"+r+"\n__p+='"),o=a+e.length,e}),s+="';\n",i.variable||(s="with(obj||{}){\n"+s+"}\n"),s="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+s+"return __p;\n";try{n=new Function(i.variable||"obj","_",s)}catch(a){throw a.source=s,a}if(e)return n(e,M);var l=function(t){return n.call(this,t,M)};return l.source="function("+(i.variable||"obj")+"){\n"+s+"}",l},M.chain=function(t){return M(t).chain()};var U=function(t){return this._chain?M(t).chain():t};M.mixin(M),L(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];M.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!=t&&"splice"!=t||0!==i.length||delete i[0],U.call(this,i)}}),L(["concat","join","slice"],function(t){var e=r[t];M.prototype[t]=function(){return U.call(this,e.apply(this._wrapped,arguments))}}),M.extend(M.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){t=e._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:t}}(),function(){var t,e=Package.underscore._;(function(){t={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(t.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(t.isServer)var i=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(t.release=__meteor_runtime_config__.meteorRelease),e.extend(t,{_get:function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return void 0;t=t[arguments[e]]}return t},_ensure:function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];i in t||(t[i]={}),t=t[i]}return t},_delete:function(t){for(var e=[t],i=!0,n=1;n<arguments.length-1;n++){var r=arguments[n];if(!(r in t)){i=!1;break}if(t=t[r],"object"!=typeof t)break;e.push(t)}for(var n=e.length-1;n>=0;n--){var r=arguments[n+1];if(i)i=!1;else for(var o in e[n][r])return;delete e[n][r]}},_wrapAsync:function(n){return function(){for(var r,o,s=this,a=e.toArray(arguments),l=function(e){return e?t._debug("Exception in callback of async function",e.stack?e.stack:e):void 0};a.length>0&&"undefined"==typeof a[a.length-1];)a.pop();a.length>0&&a[a.length-1]instanceof Function?r=a.pop():t.isClient?r=l:(o=new i,r=o.resolver()),a.push(t.bindEnvironment(r));var u=n.apply(s,a);return o?o.wait():u}},_inherits:function(t,i){for(var n in i)e.has(i,n)&&(t[n]=i[n]);var r=function(){this.constructor=t};return r.prototype=i.prototype,t.prototype=new r,t.__super__=i.prototype,t}})}.call(this),function(){"use strict";function e(){if(r.setImmediate){var t=function(t){r.setImmediate(t)};return t.implementation="setImmediate",t}return null}function i(){function t(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function e(e){if(e.source===r&&t(e.data,a)){var i=e.data.substring(a.length);try{s[i]&&s[i]()}finally{delete s[i]}}}if(!r.postMessage||r.importScripts)return null;var i=!0,n=r.onmessage;if(r.onmessage=function(){i=!1},r.postMessage("","*"),r.onmessage=n,!i)return null;var o=0,s={},a="Meteor._setImmediate."+Math.random()+".";r.addEventListener?r.addEventListener("message",e,!1):r.attachEvent("onmessage",e);var l=function(t){++o,s[o]=t,r.postMessage(a+o,"*")};return l.implementation="postMessage",l}function n(){var t=function(t){r.setTimeout(t,0)};return t.implementation="setTimeout",t}var r=this;t._setImmediate=e()||i()||n()}.call(this),function(){var i=function(t){if(Package.livedata){var e=Package.livedata.DDP._CurrentInvocation;if(e.get()&&e.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){e.withValue(null,t)}}return t},n=function(e,n){return t.bindEnvironment(i(n),e)};e.extend(t,{setTimeout:function(t,e){return setTimeout(n("setTimeout callback",t),e)},setInterval:function(t,e){return setInterval(n("setInterval callback",t),e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},defer:function(e){t._setImmediate(n("defer callback",e))}})}.call(this),function(){t.makeErrorType=function(e,i){var n=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,n);else{var r=new Error;r.__proto__=n.prototype,r instanceof n&&(t=r)}return i.apply(t,arguments),t.errorType=e,t};return t._inherits(n,Error),n},t.Error=t.makeErrorType("Meteor.Error",function(t,e,i){var n=this;n.error=t,n.reason=e,n.details=i,n.message=n.reason?n.reason+" ["+n.error+"]":"["+n.error+"]"}),t.Error.prototype.clone=function(){var e=this;return new t.Error(e.error,e.reason,e.details)}}.call(this),function(){t._noYieldsAllowed=function(t){return t()},t._SynchronousQueue=function(){var t=this;t._tasks=[],t._running=!1},e.extend(t._SynchronousQueue.prototype,{runTask:function(i){var n=this;if(!n.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");n._tasks.push(i);var r=n._tasks;n._tasks=[],n._running=!0;try{for(;!e.isEmpty(r);){var o=r.shift();try{o()}catch(s){if(e.isEmpty(r))throw s;t._debug("Exception in queued task: "+s.stack)}}}finally{n._running=!1}},queueTask:function(t){var i=this,n=e.isEmpty(i._tasks);i._tasks.push(t),n&&setTimeout(e.bind(i.flush,i),0)},flush:function(){var t=this;t.runTask(function(){})},drain:function(){var t=this;if(t.safeToRunTask())for(;!e.isEmpty(t._tasks);)t.flush()},safeToRunTask:function(){var t=this;return!t._running}})}.call(this),function(){var e=[],i="loaded"===document.readyState||"complete"==document.readyState,n=function(){for(i=!0;e.length;)e.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("load",n)),t.startup=function(n){var r=!document.addEventListener&&document.documentElement.doScroll;if(r&&window===top){try{r("left")}catch(o){return void setTimeout(function(){t.startup(n)},50)}n()}else i?n():e.push(n)}}.call(this),function(){var e=0;t._debug=function(){if(e)return void e--;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var t=!0,i=0;i<arguments.length;i++)"string"!=typeof arguments[i]&&(t=!1);t?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var n=Function.prototype.bind.call(console.log,console);n.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},t._suppress_log=function(t){e+=t}}.call(this),function(){var i=0,n=[];t.EnvironmentVariable=function(){this.slot=i++},e.extend(t.EnvironmentVariable.prototype,{get:function(){return n[this.slot]},getOrNullIfOutsideFiber:function(){return this.get()},withValue:function(t,e){var i=n[this.slot];try{n[this.slot]=t;var r=e()}finally{n[this.slot]=i}return r}}),t.bindEnvironment=function(i,r,o){var s=e.clone(n);if(!r||"string"==typeof r){var a=r||"callback of async function";r=function(e){t._debug("Exception in "+a+":",e&&e.stack||e)}}return function(){var t=n;try{n=s;var a=i.apply(o,e.toArray(arguments))}catch(l){r(l)}finally{n=t}return a}},t._nodeCodeMustBeInFiber=function(){}}.call(this),function(){t.absoluteUrl=function(i,n){n||"object"!=typeof i||(n=i,i=void 0),n=e.extend({},t.absoluteUrl.defaultOptions,n||{});var r=n.rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(r)||(r="http://"+r),/\/$/.test(r)||(r+="/"),i&&(r+=i),n.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),n.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r},t.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(t.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),t._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:t}}(),function(){var t=Package.meteor.Meteor;(function(){t.startup(function(){t.disconnect()})}).call(this),"undefined"==typeof Package&&(Package={}),Package["no-server"]={}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var i,n,r,o,s,a=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,i=0;o>i;i+=1)s[i]=str(i,l)||"null";return r=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,r}if(rep&&"object"==typeof rep)for(o=rep.length,i=0;o>i;i+=1)"string"==typeof rep[i]&&(n=rep[i],r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(r=str(n,l),r&&s.push(quote(n)+(gap?": ":":")+r));return r=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,i){var n;if(gap="",indent="","number"==typeof i)for(n=0;i>n;n+=1)indent+=" ";else"string"==typeof i&&(indent=i);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var i,n,r=t[e];if(r&&"object"==typeof r)for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(n=walk(r,i),void 0!==n?r[i]=n:delete r[i]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var t,e,i,n,r=Package.meteor.Meteor,o=Package.json.JSON,s=Package.underscore._;(function(){t={},e={};var a={};t.addType=function(t,e){if(s.has(a,t))throw new Error("Type "+t+" already present");a[t]=e};var l=function(t){return s.isNaN(t)||1/0===t||t===-1/0},u=[{matchJSONValue:function(t){return s.has(t,"$date")&&1===s.size(t)},matchObject:function(t){return t instanceof Date},toJSONValue:function(t){return{$date:t.getTime()}},fromJSONValue:function(t){return new Date(t.$date)}},{matchJSONValue:function(t){return s.has(t,"$InfNaN")&&1===s.size(t)},matchObject:l,toJSONValue:function(t){var e;return e=s.isNaN(t)?0:1/0===t?1:-1,{$InfNaN:e}},fromJSONValue:function(t){return t.$InfNaN/0}},{matchJSONValue:function(t){return s.has(t,"$binary")&&1===s.size(t)},matchObject:function(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&s.has(t,"$Uint8ArrayPolyfill")},toJSONValue:function(t){return{$binary:i(t)}},fromJSONValue:function(t){return n(t.$binary)}},{matchJSONValue:function(t){return s.has(t,"$escape")&&1===s.size(t)},matchObject:function(t){return s.isEmpty(t)||s.size(t)>2?!1:s.any(u,function(e){return e.matchJSONValue(t)})},toJSONValue:function(e){var i={};return s.each(e,function(e,n){i[n]=t.toJSONValue(e)}),{$escape:i}},fromJSONValue:function(e){var i={};return s.each(e.$escape,function(e,n){i[n]=t.fromJSONValue(e)}),i}},{matchJSONValue:function(t){return s.has(t,"$type")&&s.has(t,"$value")&&2===s.size(t)},matchObject:function(e){return t._isCustomType(e)},toJSONValue:function(t){var e=r._noYieldsAllowed(function(){return t.toJSONValue()});return{$type:t.typeName(),$value:e}},fromJSONValue:function(t){var e=t.$type;if(!s.has(a,e))throw new Error("Custom EJSON type "+e+" is not defined");var i=a[e];return r._noYieldsAllowed(function(){return i(t.$value)})}}];t._isCustomType=function(t){return t&&"function"==typeof t.toJSONValue&&"function"==typeof t.typeName&&s.has(a,t.typeName())};var h=t._adjustTypesToJSONValue=function(t){if(null===t)return null;var e=c(t);return void 0!==e?e:"object"!=typeof t?t:(s.each(t,function(e,i){if("object"==typeof e||void 0===e||l(e)){var n=c(e);return n?void(t[i]=n):void h(e)}}),t)},c=function(t){for(var e=0;e<u.length;e++){var i=u[e];if(i.matchObject(t))return i.toJSONValue(t)}return void 0};t.toJSONValue=function(e){var i=c(e);return void 0!==i?i:("object"==typeof e&&(e=t.clone(e),h(e)),e)};var d=t._adjustTypesFromJSONValue=function(t){if(null===t)return null;var e=p(t);return e!==t?e:"object"!=typeof t?t:(s.each(t,function(e,i){if("object"==typeof e){var n=p(e);if(e!==n)return void(t[i]=n);d(e)}}),t)},p=function(t){if("object"==typeof t&&null!==t&&s.size(t)<=2&&s.all(t,function(t,e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var e=0;e<u.length;e++){var i=u[e];if(i.matchJSONValue(t))return i.fromJSONValue(t)}return t};t.fromJSONValue=function(e){var i=p(e);return i===e&&"object"==typeof e?(e=t.clone(e),d(e),e):i},t.stringify=function(e,i){var n=t.toJSONValue(e);return i&&(i.canonical||i.indent)?t._canonicalStringify(n,i):o.stringify(n)},t.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return t.fromJSONValue(o.parse(e))},t.isBinary=function(t){return!!("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&t.$Uint8ArrayPolyfill)},t.equals=function(e,i,n){var r,o=!(!n||!n.keyOrderSensitive);if(e===i)return!0;if(s.isNaN(e)&&s.isNaN(i))return!0;if(!e||!i)return!1;if("object"!=typeof e||"object"!=typeof i)return!1;if(e instanceof Date&&i instanceof Date)return e.valueOf()===i.valueOf();if(t.isBinary(e)&&t.isBinary(i)){if(e.length!==i.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==i[r])return!1;return!0}if("function"==typeof e.equals)return e.equals(i,n);if("function"==typeof i.equals)return i.equals(e,n);if(e instanceof Array){if(!(i instanceof Array))return!1;if(e.length!==i.length)return!1;for(r=0;r<e.length;r++)if(!t.equals(e[r],i[r],n))return!1;return!0}switch(t._isCustomType(e)+t._isCustomType(i)){case 1:return!1;case 2:return t.equals(t.toJSONValue(e),t.toJSONValue(i))}var a;if(o){var l=[];return s.each(i,function(t,e){l.push(e)}),r=0,a=s.all(e,function(e,o){return r>=l.length?!1:o!==l[r]?!1:t.equals(e,i[l[r]],n)?(r++,!0):!1}),a&&r===l.length}return r=0,a=s.all(e,function(e,o){return s.has(i,o)&&t.equals(e,i[o],n)?(r++,!0):!1}),a&&s.size(i)===r},t.clone=function(e){var i;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(t.isBinary(e)){i=t.newBinary(e.length);for(var n=0;n<e.length;n++)i[n]=e[n];return i}if(s.isArray(e)||s.isArguments(e)){for(i=[],n=0;n<e.length;n++)i[n]=t.clone(e[n]);return i}return"function"==typeof e.clone?e.clone():t._isCustomType(e)?t.fromJSONValue(t.clone(t.toJSONValue(e)),!0):(i={},s.each(e,function(e,n){i[n]=t.clone(e)}),i)}}).call(this),function(){function e(t){return o.stringify(t)}var i=function(t,n,r,o,a){var l,u,h,c,d=o,p=n[t];switch(typeof p){case"string":return e(p);case"number":return isFinite(p)?String(p):"null";case"boolean":return String(p);case"object":if(!p)return"null";if(d=o+r,c=[],s.isArray(p)||s.isArguments(p)){for(h=p.length,l=0;h>l;l+=1)c[l]=i(l,p,r,d,a)||"null";return u=0===c.length?"[]":d?"[\n"+d+c.join(",\n"+d)+"\n"+o+"]":"["+c.join(",")+"]"}var f=s.keys(p);return a&&(f=f.sort()),s.each(f,function(t){u=i(t,p,r,d,a),u&&c.push(e(t)+(d?": ":":")+u)}),u=0===c.length?"{}":d?"{\n"+d+c.join(",\n"+d)+"\n"+o+"}":"{"+c.join(",")+"}"}};t._canonicalStringify=function(t,e){if(e=s.extend({indent:"",canonical:!1},e),e.indent===!0)e.indent="  ";else if("number"==typeof e.indent){for(var n="",r=0;r<e.indent;r++)n+=" ";e.indent=n}return i("",{"":t},e.indent,"",e.canonical)}}.call(this),function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},s=0;s<r.length;s++)o[r.charAt(s)]=s;i=function(t){for(var e=[],i=null,n=null,r=null,o=null,s=0;s<t.length;s++)switch(s%3){case 0:i=t[s]>>2&63,n=(3&t[s])<<4;break;case 1:n|=t[s]>>4&15,r=(15&t[s])<<2;break;case 2:r|=t[s]>>6&3,o=63&t[s],e.push(a(i)),e.push(a(n)),e.push(a(r)),e.push(a(o)),i=null,n=null,r=null,o=null}return null!=i&&(e.push(a(i)),e.push(a(n)),e.push(null==r?"=":a(r)),null==o&&e.push("=")),e.join("")};var a=function(t){return r.charAt(t)},l=function(t){return"="===t?-1:o[t]};t.newBinary=function(t){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var e=[],i=0;t>i;i++)e.push(0);return e.$Uint8ArrayPolyfill=!0,e}return new Uint8Array(new ArrayBuffer(t))},n=function(e){var i=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(i--,"="==e.charAt(e.length-2)&&i--);for(var n=t.newBinary(i),r=null,o=null,s=null,a=0,u=0;u<e.length;u++){var h=e.charAt(u),c=l(h);switch(u%4){case 0:if(0>c)throw new Error("invalid base64 string");r=c<<2;break;case 1:if(0>c)throw new Error("invalid base64 string");r|=c>>4,n[a++]=r,o=(15&c)<<4;break;case 2:c>=0&&(o|=c>>2,n[a++]=o,s=(3&c)<<6);break;case 3:c>=0&&(n[a++]=s|c)
}}return n},e.base64Encode=i,e.base64Decode=n}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:t,EJSONTest:e}}(),function(){var t,e=Package.meteor.Meteor,i=Package.underscore._,n=Package.ejson.EJSON;(function(){t=function(){return t.info.apply(this,arguments)};var r=0,o=[],s=0;t._intercept=function(t){r+=t},t._suppress=function(t){s+=t},t._intercepted=function(){var t=o;return o=[],r=0,t},t.outputFormat="json";var a={debug:"green",warn:"magenta",error:"red"},l="blue",u=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],h=u.concat(["app","message"]),c=function(i){var n=t.format(i),r=i.level;"undefined"!=typeof console&&console[r]?console[r](n):e._debug(n)};t._getCallerDetails=function(){var t=function(){var t=new Error,e=t.stack;return e},e=t();if(!e)return{};for(var i,n=e.split("\n"),r=1;r<n.length;++r){if(i=n[r],i.match(/^\s*at eval \(eval/))return{file:"eval"};if(!i.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var o={},s=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(i);return s?(o.line=s[2].split(":")[0],o.file=s[1].split("/").slice(-1)[0].split("?")[0],o):o},i.each(["debug","info","warn","error"],function(a){t[a]=function(l){if(s)return void s--;var h=!1;r&&(r--,h=!0);var d=!i.isObject(l)||i.isRegExp(l)||i.isDate(l)?{message:new String(l).toString()}:l;if(i.each(u,function(t){if(d[t])throw new Error("Can't set '"+t+"' in log message")}),i.has(d,"message")&&!i.isString(d.message))throw new Error("The 'message' field in log objects must be a string");if(d.omitCallerDetails||(d=i.extend(t._getCallerDetails(),d)),d.time=new Date,d.level=a,"debug"!==a)if(h)o.push(n.stringify(d));else if(e.isServer)if("colored-text"===t.outputFormat)console.log(t.format(d,{color:!0}));else{if("json"!==t.outputFormat)throw new Error("Unknown logging output format: "+t.outputFormat);console.log(n.stringify(d))}else c(d)}}),t.parse=function(t){var e=null;if(t&&"{"===t.charAt(0))try{e=n.parse(t)}catch(i){}return e&&e.time&&e.time instanceof Date?e:null},t.format=function(t,r){t=n.clone(t),r=r||{};var o=t.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var s=t.timeInexact,u=t.level||"info",c=t.file,d=t.line,p=t.app||"",f=t.originApp,m=t.message||"",g=t.program||"",_=t.satellite,y=t.stderr||"";i.each(h,function(e){delete t[e]}),i.isEmpty(t)||(m&&(m+=" "),m+=n.stringify(t));var v=function(t){return 10>t?"0"+t:t.toString()},b=function(t){return 100>t?"0"+v(t):t.toString()},w=o.getFullYear().toString()+v(o.getMonth()+1)+v(o.getDate()),x=v(o.getHours())+":"+v(o.getMinutes())+":"+v(o.getSeconds())+"."+b(o.getMilliseconds()),T="("+-((new Date).getTimezoneOffset()/60)+")",M="";p&&(M+=p),f&&f!==p&&(M+=" via "+f),M&&(M="["+M+"] ");var k=c&&d?["(",g?g+":":"",c,":",d,") "].join(""):"";_&&(k+=["[",_,"]"].join(""));var S=y?"(STDERR) ":"",L=[u.charAt(0).toUpperCase(),w,"-",x,T,s?"? ":" ",M,k,S].join(""),C=function(t,i){return r.color&&e.isServer&&i?Npm.require("cli-color")[i](t):t};return C(L,l)+C(m,a[u])},t.objFromText=function(t,e){var n={message:t,level:"info",time:new Date,timeInexact:!0};return i.extend(n,e)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:t}}(),function(){var t,e=Package.meteor.Meteor;(function(){t={},t.active=!1,t.currentComputation=null;var i=function(e){t.currentComputation=e,t.active=!!e},n=function(){return"undefined"!=typeof e?e._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},r=function(t,e){if(c)throw e;n()("Exception from Deps "+t+" function:",e.stack||e.message)},o=function(t){return"undefined"==typeof e||e.isClient?t:function(){var i=arguments;e._noYieldsAllowed(function(){t.apply(null,i)})}},s=1,a=[],l=!1,u=!1,h=!1,c=!1,d=[],p=function(){l||(setTimeout(t.flush,0),l=!0)},f=!1;t.Computation=function(t,e){if(!f)throw new Error("Deps.Computation constructor is private; use Deps.autorun");f=!1;var i=this;i.stopped=!1,i.invalidated=!1,i.firstRun=!0,i._id=s++,i._onInvalidateCallbacks=[],i._parent=e,i._func=t,i._recomputing=!1;var n=!0;try{i._compute(),n=!1}finally{i.firstRun=!1,n&&i.stop()}},t.Computation.prototype.onInvalidate=function(e){var i=this;if("function"!=typeof e)throw new Error("onInvalidate requires a function");i.invalidated?t.nonreactive(function(){o(e)(i)}):i._onInvalidateCallbacks.push(e)},t.Computation.prototype.invalidate=function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(p(),a.push(this)),e.invalidated=!0;for(var i,n=0;i=e._onInvalidateCallbacks[n];n++)t.nonreactive(function(){o(i)(e)});e._onInvalidateCallbacks=[]}},t.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},t.Computation.prototype._compute=function(){var e=this;e.invalidated=!1;var n=t.currentComputation;i(e);h=!0;try{o(e._func)(e)}finally{i(n),h=!1}},t.Computation.prototype._recompute=function(){var t=this;t._recomputing=!0;try{for(;t.invalidated&&!t.stopped;)try{t._compute()}catch(e){r("recompute",e)}}finally{t._recomputing=!1}},t.Dependency=function(){this._dependentsById={}},t.Dependency.prototype.depend=function(e){if(!e){if(!t.active)return!1;e=t.currentComputation}var i=this,n=e._id;return n in i._dependentsById?!1:(i._dependentsById[n]=e,e.onInvalidate(function(){delete i._dependentsById[n]}),!0)},t.Dependency.prototype.changed=function(){var t=this;for(var e in t._dependentsById)t._dependentsById[e].invalidate()},t.Dependency.prototype.hasDependents=function(){var t=this;for(var e in t._dependentsById)return!0;return!1},t.flush=function(e){if(u)throw new Error("Can't call Deps.flush while flushing");if(h)throw new Error("Can't flush inside Deps.autorun");u=!0,l=!0,c=!(!e||!e._throwFirstError);var i=!1;try{for(;a.length||d.length;){for(;a.length;){var n=a.shift();n._recompute()}if(d.length){var o=d.shift();try{o()}catch(s){r("afterFlush function",s)}}}i=!0}finally{i||(u=!1,t.flush({_throwFirstError:!1})),l=!1,u=!1}},t.autorun=function(e){if("function"!=typeof e)throw new Error("Deps.autorun requires a function argument");f=!0;var i=new t.Computation(e,t.currentComputation);return t.active&&t.onInvalidate(function(){i.stop()}),i},t.nonreactive=function(e){var n=t.currentComputation;i(null);try{return e()}finally{i(n)}},t.onInvalidate=function(e){if(!t.active)throw new Error("Deps.onInvalidate requires a currentComputation");t.currentComputation.onInvalidate(e)},t.afterFlush=function(t){d.push(t),p()}}).call(this),function(){e.flush=t.flush,e.autorun=t.autorun,e.autosubscribe=t.autorun,t.depend=function(t){return t.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:t}}(),function(){{var t,e=Package.meteor.Meteor;Package.underscore._}(function(){if(e.isServer)var i=Npm.require("crypto");var n=function(){function t(){var t=4022871197,e=function(e){e=e.toString();for(var i=0;i<e.length;i++){t+=e.charCodeAt(i);var n=.02519603282416938*t;t=n>>>0,n-=t,n*=t,t=n>>>0,n-=t,t+=4294967296*n}return 2.3283064365386963e-10*(t>>>0)};return e.version="Mash 0.9",e}return function(e){var i=0,n=0,r=0,o=1;0==e.length&&(e=[+new Date]);var s=t();i=s(" "),n=s(" "),r=s(" ");for(var a=0;a<e.length;a++)i-=s(e[a]),0>i&&(i+=1),n-=s(e[a]),0>n&&(n+=1),r-=s(e[a]),0>r&&(r+=1);s=null;var l=function(){var t=2091639*i+2.3283064365386963e-10*o;return i=n,n=r,r=t-(o=0|t)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+1.1102230246251565e-16*(2097152*l()|0)},l.version="Alea 0.9",l.args=e,l}(Array.prototype.slice.call(arguments))},r="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_",s=function(t){var e=this;void 0!==t&&(e.alea=n.apply(null,t))};s.prototype.fraction=function(){var t=this;if(t.alea)return t.alea();if(i){var e=parseInt(t.hexString(8),16);return 2.3283064365386963e-10*e}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var n=new Uint32Array(1);return window.crypto.getRandomValues(n),2.3283064365386963e-10*n[0]}throw new Error("No random generator available")},s.prototype.hexString=function(t){var e=this;if(i&&!e.alea){var n,r=Math.ceil(t/2);try{n=i.randomBytes(r)}catch(o){n=i.pseudoRandomBytes(r)}var s=n.toString("hex");return s.substring(0,t)}for(var a=[],l=0;t>l;++l)a.push(e.choice("0123456789abcdef"));return a.join("")},s.prototype._randomString=function(t,e){for(var i=this,n=[],r=0;t>r;r++)n[r]=i.choice(e);return n.join("")},s.prototype.id=function(t){var e=this;return void 0===t&&(t=17),e._randomString(t,r)},s.prototype.secret=function(t){var e=this;return void 0===t&&(t=43),e._randomString(t,o)},s.prototype.choice=function(t){var e=Math.floor(this.fraction()*t.length);return"string"==typeof t?t.substr(e,1):t[e]};var a="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,l="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,u="undefined"!=typeof navigator&&navigator.userAgent||"";t=i||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new s:new s([new Date,a,l,u,Math.random()]),t.createWithSeeds=function(){if(0===arguments.length)throw new Error("No seeds were provided");return new s(arguments)}}).call(this),function(){e.uuid=function(){for(var e="0123456789abcdef",i=[],n=0;36>n;n++)i[n]=t.choice(e);i[14]="4",i[19]=e.substr(3&parseInt(i[19],16)|8,1),i[8]=i[13]=i[18]=i[23]="-";var r=i.join("");return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._),i=Package.json.JSON,n=Package.ejson.EJSON;(function(){t=function(t,e){var n=this;n._map={},n._idStringify=t||i.stringify,n._idParse=e||i.parse},e.extend(t.prototype,{get:function(t){var e=this,i=e._idStringify(t);return e._map[i]},set:function(t,e){var i=this,n=i._idStringify(t);i._map[n]=e},remove:function(t){var e=this,i=e._idStringify(t);delete e._map[i]},has:function(t){var i=this,n=i._idStringify(t);return e.has(i._map,n)},empty:function(){var t=this;return e.isEmpty(t._map)},clear:function(){var t=this;t._map={}},forEach:function(t){for(var i=this,n=e.keys(i._map),r=0;r<n.length;r++){var o=t.call(null,i._map[n[r]],i._idParse(n[r]));if(o===!1)return}},size:function(){var t=this;return e.size(t._map)},setDefault:function(t,i){var n=this,r=n._idStringify(t);return e.has(n._map,r)?n._map[r]:(n._map[r]=i,i)},clone:function(){var e=this,i=new t(e._idStringify,e._idParse);return e.forEach(function(t,e){i.set(e,n.clone(t))}),i}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["id-map"]={IdMap:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._);(function(){var i=function(t,e,i,n){return{key:t,value:e,next:i,prev:n}};t=function(){var t=this;t._dict={},t._first=null,t._last=null,t._size=0;var i=e.toArray(arguments);t._stringify=function(t){return t},"function"==typeof i[0]&&(t._stringify=i.shift()),e.each(i,function(e){t.putBefore(e[0],e[1],null)})},e.extend(t.prototype,{_k:function(t){return" "+this._stringify(t)},empty:function(){var t=this;return!t._first},size:function(){var t=this;return t._size},_linkEltIn:function(t){var e=this;t.next?(t.prev=t.next.prev,t.next.prev=t,t.prev&&(t.prev.next=t)):(t.prev=e._last,e._last&&(e._last.next=t),e._last=t),(null===e._first||e._first===t.next)&&(e._first=t)},_linkEltOut:function(t){var e=this;t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===e._last&&(e._last=t.prev),t===e._first&&(e._first=t.next)},putBefore:function(t,e,n){var r=this;if(r._dict[r._k(t)])throw new Error("Item "+t+" already present in OrderedDict");var o=n?i(t,e,r._dict[r._k(n)]):i(t,e,null);if(void 0===o.next)throw new Error("could not find item to put this one before");r._linkEltIn(o),r._dict[r._k(t)]=o,r._size++},append:function(t,e){var i=this;i.putBefore(t,e,null)},remove:function(t){var e=this,i=e._dict[e._k(t)];if(void 0===i)throw new Error("Item "+t+" not present in OrderedDict");return e._linkEltOut(i),e._size--,delete e._dict[e._k(t)],i.value},get:function(t){var e=this;return e.has(t)?e._dict[e._k(t)].value:void 0},has:function(t){var i=this;return e.has(i._dict,i._k(t))},forEach:function(e){for(var i=this,n=0,r=i._first;null!==r;){var o=e(r.value,r.key,n);if(o===t.BREAK)return;r=r.next,n++}},first:function(){var t=this;return t.empty()?void 0:t._first.key},firstValue:function(){var t=this;return t.empty()?void 0:t._first.value},last:function(){var t=this;return t.empty()?void 0:t._last.key},lastValue:function(){var t=this;return t.empty()?void 0:t._last.value},prev:function(t){var e=this;if(e.has(t)){var i=e._dict[e._k(t)];if(i.prev)return i.prev.key}return null},next:function(t){var e=this;if(e.has(t)){var i=e._dict[e._k(t)];if(i.next)return i.next.key}return null},moveBefore:function(t,e){var i=this,n=i._dict[i._k(t)],r=e?i._dict[i._k(e)]:null;if(void 0===n)throw new Error("Item to move is not present");if(void 0===r)throw new Error("Could not find element to move this one before");r!==n.next&&(i._linkEltOut(n),n.next=r,i._linkEltIn(n))},indexOf:function(e){var i=this,n=null;return i.forEach(function(r,o,s){return i._k(o)===i._k(e)?(n=s,t.BREAK):void 0}),n},_checkRep:function(){var t=this;e.each(t._dict,function(t,e){if(e.next===e)throw new Error("Next is a loop");if(e.prev===e)throw new Error("Prev is a loop")})}}),t.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:t}}(),function(){{var t,e;Package.meteor.Meteor}(function(){e={exports:{}}}).call(this),function(){!function(){function t(t){for(var e=[],i=[],n=0;n<t[0].length;n++)e.push(t[0][n][1]),i.push(t[0][n][0]);return e=e.sort(function(t,e){return t-e}),i=i.sort(function(t,e){return t-e}),[[e[0],i[0]],[e[e.length-1],i[i.length-1]]]}function i(t,e,i){for(var n=[[0,0]],r=0;r<i.length;r++){for(var o=0;o<i[r].length;o++)n.push(i[r][o]);n.push([0,0])}for(var s=!1,r=0,o=n.length-1;r<n.length;o=r++)n[r][0]>e!=n[o][0]>e&&t<(n[o][1]-n[r][1])*(e-n[r][0])/(n[o][0]-n[r][0])+n[r][1]&&(s=!s);return s}var n={};"undefined"!=typeof e&&e.exports&&(e.exports=n),n.lineStringsIntersect=function(t,e){for(var i=[],n=0;n<=t.coordinates.length-2;++n)for(var r=0;r<=e.coordinates.length-2;++r){var o={x:t.coordinates[n][1],y:t.coordinates[n][0]},s={x:t.coordinates[n+1][1],y:t.coordinates[n+1][0]},a={x:e.coordinates[r][1],y:e.coordinates[r][0]},l={x:e.coordinates[r+1][1],y:e.coordinates[r+1][0]},u=(l.x-a.x)*(o.y-a.y)-(l.y-a.y)*(o.x-a.x),h=(s.x-o.x)*(o.y-a.y)-(s.y-o.y)*(o.x-a.x),c=(l.y-a.y)*(s.x-o.x)-(l.x-a.x)*(s.y-o.y);if(0!=c){var d=u/c,p=h/c;d>=0&&1>=d&&p>=0&&1>=p&&i.push({type:"Point",coordinates:[o.x+d*(s.x-o.x),o.y+d*(s.y-o.y)]})}}return 0==i.length&&(i=!1),i},n.pointInBoundingBox=function(t,e){return!(t.coordinates[1]<e[0][0]||t.coordinates[1]>e[1][0]||t.coordinates[0]<e[0][1]||t.coordinates[0]>e[1][1])},n.pointInPolygon=function(e,r){for(var o="Polygon"==r.type?[r.coordinates]:r.coordinates,s=!1,a=0;a<o.length;a++)n.pointInBoundingBox(e,t(o[a]))&&(s=!0);if(!s)return!1;for(var l=!1,a=0;a<o.length;a++)i(e.coordinates[1],e.coordinates[0],o[a])&&(l=!0);return l},n.numberToRadius=function(t){return t*Math.PI/180},n.numberToDegree=function(t){return 180*t/Math.PI},n.drawCircle=function(t,e,i){for(var r=[e.coordinates[1],e.coordinates[0]],o=t/1e3/6371,s=[n.numberToRadius(r[0]),n.numberToRadius(r[1])],i=i||15,a=[[r[0],r[1]]],l=0;i>l;l++){var u=2*Math.PI*l/i,h=Math.asin(Math.sin(s[0])*Math.cos(o)+Math.cos(s[0])*Math.sin(o)*Math.cos(u)),c=s[1]+Math.atan2(Math.sin(u)*Math.sin(o)*Math.cos(s[0]),Math.cos(o)-Math.sin(s[0])*Math.sin(h));a[l]=[],a[l][1]=n.numberToDegree(h),a[l][0]=n.numberToDegree(c)}return{type:"Polygon",coordinates:[a]}},n.rectangleCentroid=function(t){var e=t.coordinates[0],i=e[0][0],n=e[0][1],r=e[2][0],o=e[2][1],s=r-i,a=o-n;return{type:"Point",coordinates:[i+s/2,n+a/2]}},n.pointDistance=function(t,e){var i=t.coordinates[0],r=t.coordinates[1],o=e.coordinates[0],s=e.coordinates[1],a=n.numberToRadius(s-r),l=n.numberToRadius(o-i),u=Math.pow(Math.sin(a/2),2)+Math.cos(n.numberToRadius(r))*Math.cos(n.numberToRadius(s))*Math.pow(Math.sin(l/2),2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*h*1e3},n.geometryWithinRadius=function(t,e,i){if("Point"==t.type)return n.pointDistance(t,e)<=i;if("LineString"==t.type||"Polygon"==t.type){var r,o={};r="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var s in r)if(o.coordinates=r[s],n.pointDistance(o,e)>i)return!1}return!0},n.area=function(t){for(var e,i,n=0,r=t.coordinates[0],o=r.length-1,s=0;s<r.length;o=s++){var e={x:r[s][1],y:r[s][0]},i={x:r[o][1],y:r[o][0]};n+=e.x*i.y,n-=e.y*i.x}return n/=2},n.centroid=function(t){for(var e,i,r,o=0,s=0,a=t.coordinates[0],l=a.length-1,u=0;u<a.length;l=u++){var i={x:a[u][1],y:a[u][0]},r={x:a[l][1],y:a[l][0]};e=i.x*r.y-r.x*i.y,o+=(i.x+r.x)*e,s+=(i.y+r.y)*e}return e=6*n.area(t),{type:"Point",coordinates:[s/e,o/e]}},n.simplify=function(t,e){e=e||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var i,n,r,o,s,a,l,u,h,c,d,p,f,m,g,_,y,v,b,w=Math.PI/180*.5,x=new Array,T=new Array,M=new Array;if(t.length<3)return t;for(i=t.length,c=360*e/(2*Math.PI*6378137),c*=c,r=0,T[0]=0,M[0]=i-1,n=1;n>0;)if(o=T[n-1],s=M[n-1],n--,s-o>1){for(d=t[s].lng()-t[o].lng(),p=t[s].lat()-t[o].lat(),Math.abs(d)>180&&(d=360-Math.abs(d)),d*=Math.cos(w*(t[s].lat()+t[o].lat())),f=d*d+p*p,a=o+1,l=o,h=-1;s>a;a++)m=t[a].lng()-t[o].lng(),g=t[a].lat()-t[o].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),m*=Math.cos(w*(t[a].lat()+t[o].lat())),_=m*m+g*g,y=t[a].lng()-t[s].lng(),v=t[a].lat()-t[s].lat(),Math.abs(y)>180&&(y=360-Math.abs(y)),y*=Math.cos(w*(t[a].lat()+t[s].lat())),b=y*y+v*v,u=_>=f+b?b:b>=f+_?_:(m*p-g*d)*(m*p-g*d)/f,u>h&&(l=a,h=u);c>h?(x[r]=o,r++):(n++,T[n-1]=l,M[n-1]=s,n++,T[n-1]=o,M[n-1]=l)}else x[r]=o,r++;x[r]=i-1,r++;for(var k=new Array,a=0;r>a;a++)k.push(t[x[a]]);return k.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},n.destinationPoint=function(t,e,i){i/=6371,e=n.numberToRadius(e);var r=n.numberToRadius(t.coordinates[0]),o=n.numberToRadius(t.coordinates[1]),s=Math.asin(Math.sin(r)*Math.cos(i)+Math.cos(r)*Math.sin(i)*Math.cos(e)),a=o+Math.atan2(Math.sin(e)*Math.sin(i)*Math.cos(r),Math.cos(i)-Math.sin(r)*Math.sin(s));return a=(a+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[n.numberToDegree(s),n.numberToDegree(a)]}}}()}.call(this),function(){t=e.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:t}}(),function(){var t,e,i,n,r,o,s,a,l,u,h,c,d,p,f,m,g=Package.meteor.Meteor,_=Package.underscore._,y=Package.json.JSON,v=Package.ejson.EJSON,b=Package["id-map"].IdMap,w=Package["ordered-dict"].OrderedDict,x=Package.deps.Deps,T=Package.random.Random,M=Package["geojson-utils"].GeoJSON;(function(){t=function(e){var i=this;i.name=e,i._docs=new t._IdMap,i._observeQueue=new g._SynchronousQueue,i.next_qid=1,i.queries={},i._savedOriginals=null,i.paused=!1},e={},i={},t._applyChanges=function(t,e){_.each(e,function(e,i){void 0===e?delete t[i]:t[i]=e})},n=function(t){var e=new Error(t);return e.name="MinimongoError",e},t.prototype.find=function(e,i){return 0===arguments.length&&(e={}),new t.Cursor(this,e,i)},t.Cursor=function(i,n,r){var o=this;r||(r={}),o.collection=i,o.sorter=null,t._selectorIsId(n)?(o._selectorId=n,o.matcher=new e.Matcher(n,o)):(o._selectorId=void 0,o.matcher=new e.Matcher(n,o),(o.matcher.hasGeoQuery()||r.sort)&&(o.sorter=new e.Sorter(r.sort||[],{matcher:o.matcher}))),o.skip=r.skip,o.limit=r.limit,o.fields=r.fields,o.fields&&(o.projectionFn=t._compileProjection(o.fields)),o._transform=t.wrapTransform(r.transform),"undefined"!=typeof x&&(o.reactive=void 0===r.reactive?!0:r.reactive)},t.Cursor.prototype.rewind=function(){},t.prototype.findOne=function(t,e){return 0===arguments.length&&(t={}),e=e||{},e.limit=1,this.find(t,e).fetch()[0]},t.Cursor.prototype.forEach=function(t,e){var i=this,n=i._getRawObjects({ordered:!0});i.reactive&&i._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0}),_.each(n,function(n,r){n=i.projectionFn?i.projectionFn(n):v.clone(n),i._transform&&(n=i._transform(n)),t.call(e,n,r,i)})},t.Cursor.prototype.getTransform=function(){return this._transform},t.Cursor.prototype.map=function(t,e){var i=this,n=[];return i.forEach(function(r,o){n.push(t.call(e,r,o,i))}),n},t.Cursor.prototype.fetch=function(){var t=this,e=[];return t.forEach(function(t){e.push(t)}),e},t.Cursor.prototype.count=function(){var t=this;return t.reactive&&t._depend({added:!0,removed:!0},!0),t._getRawObjects({ordered:!0}).length},t.Cursor.prototype._publishCursor=function(t){var e=this;if(!e.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var i=e.collection.name;return g.Collection._publishCursor(e,t,i)},t.Cursor.prototype._getCollectionName=function(){var t=this;return t.collection.name},t._observeChangesCallbacksAreOrdered=function(t){if(t.added&&t.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!t.addedBefore&&!t.movedBefore)},t._observeCallbacksAreOrdered=function(t){if(t.addedAt&&t.added)throw new Error("Please specify only one of added() and addedAt()");if(t.changedAt&&t.changed)throw new Error("Please specify only one of changed() and changedAt()");if(t.removed&&t.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(t.addedAt||t.movedTo||t.changedAt||t.removedAt)},t.ObserveHandle=function(){},_.extend(t.Cursor.prototype,{observe:function(e){var i=this;return t._observeFromObserveChanges(i,e)},observeChanges:function(e){var i=this,n=t._observeChangesCallbacksAreOrdered(e);if(!e._allow_unordered&&!n&&(i.skip||i.limit))throw new Error("must use ordered observe with skip or limit");if(i.fields&&(0===i.fields._id||i.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var r,o={matcher:i.matcher,sorter:n&&i.sorter,distances:i.matcher.hasGeoQuery()&&n&&new t._IdMap,resultsSnapshot:null,ordered:n,cursor:i,projectionFn:i.projectionFn};i.reactive&&(r=i.collection.next_qid++,i.collection.queries[r]=o),o.results=i._getRawObjects({ordered:n,distances:o.distances}),i.collection.paused&&(o.resultsSnapshot=n?[]:new t._IdMap);var s=function(t,e,n){return t?function(){var r=this,o=arguments;i.collection.paused||void 0!==e&&i.projectionFn&&(o[e]=i.projectionFn(o[e]),n&&_.isEmpty(o[e]))||i.collection._observeQueue.queueTask(function(){t.apply(r,o)})}:function(){}};if(o.added=s(e.added,1),o.changed=s(e.changed,1,!0),o.removed=s(e.removed),n&&(o.addedBefore=s(e.addedBefore,1),o.movedBefore=s(e.movedBefore)),!e._suppress_initial&&!i.collection.paused){var a=n?_.bind(_.each,null,o.results):_.bind(o.results.forEach,o.results);a(function(t){var e=v.clone(t);delete e._id,n&&o.addedBefore(t._id,e,null),o.added(t._id,e)})}var l=new t.ObserveHandle;return _.extend(l,{collection:i.collection,stop:function(){i.reactive&&delete i.collection.queries[r]}}),i.reactive&&x.active&&x.onInvalidate(function(){l.stop()}),i.collection._observeQueue.drain(),l}}),t.Cursor.prototype._getRawObjects=function(e){var i=this;e=e||{};var n=e.ordered?[]:new t._IdMap;if(void 0!==i._selectorId){if(i.skip)return n;var r=i.collection._docs.get(i._selectorId);return r&&(e.ordered?n.push(r):n.set(i._selectorId,r)),n}var o;if(i.matcher.hasGeoQuery()&&e.ordered&&(e.distances?(o=e.distances,o.clear()):o=new t._IdMap),i.collection._docs.forEach(function(t,r){var s=i.matcher.documentMatches(t);return s.result&&(e.ordered?(n.push(t),o&&void 0!==s.distance&&o.set(r,s.distance)):n.set(r,t)),!i.limit||i.skip||i.sorter||n.length!==i.limit?!0:!1}),!e.ordered)return n;if(i.sorter){var s=i.sorter.getComparator({distances:o});n.sort(s)}var a=i.skip||0,l=i.limit?i.limit+a:n.length;return n.slice(a,l)},t.Cursor.prototype._depend=function(t,e){var i=this;if(x.active){var n=new x.Dependency;n.depend();var r=_.bind(n.changed,n),o={_suppress_initial:!0,_allow_unordered:e};_.each(["added","changed","removed","addedBefore","movedBefore"],function(e){t[e]&&(o[e]=r)}),i.observeChanges(o)}},t.prototype.insert=function(e,i){var r=this;e=v.clone(e),_.has(e,"_id")||(e._id=t._useOID?new t._ObjectID:T.id());var o=e._id;if(r._docs.has(o))throw n("Duplicate _id '"+o+"'");r._saveOriginal(o,void 0),r._docs.set(o,e);var s=[];for(var a in r.queries){var l=r.queries[a],u=l.matcher.documentMatches(e);u.result&&(l.distances&&void 0!==u.distance&&l.distances.set(o,u.distance),l.cursor.skip||l.cursor.limit?s.push(a):t._insertInResults(l,e))}return _.each(s,function(e){r.queries[e]&&t._recomputeResults(r.queries[e])}),r._observeQueue.drain(),i&&g.defer(function(){i(null,o)}),o},t.prototype._eachPossiblyMatchingDoc=function(e,i){var n=this,r=t._idsMatchedBySelector(e);if(r)for(var o=0;o<r.length;++o){var s=r[o],a=n._docs.get(s);if(a){var l=i(a,s);if(l===!1)break}}else n._docs.forEach(i)},t.prototype.remove=function(i,n){var r=this;if(r.paused&&!r._savedOriginals&&v.equals(i,{})){var o=r._docs.size();return r._docs.clear(),_.each(r.queries,function(t){t.ordered?t.results=[]:t.results.clear()}),n&&g.defer(function(){n(null,o)}),o}var s=new e.Matcher(i,r),a=[];r._eachPossiblyMatchingDoc(i,function(t,e){s.documentMatches(t).result&&a.push(e)});for(var l=[],u=[],h=0;h<a.length;h++){var c=a[h],d=r._docs.get(c);_.each(r.queries,function(t,e){t.matcher.documentMatches(d).result&&(t.cursor.skip||t.cursor.limit?l.push(e):u.push({qid:e,doc:d}))}),r._saveOriginal(c,d),r._docs.remove(c)}return _.each(u,function(e){var i=r.queries[e.qid];i&&(i.distances&&i.distances.remove(e.doc._id),t._removeFromResults(i,e.doc))}),_.each(l,function(e){var i=r.queries[e];i&&t._recomputeResults(i)}),r._observeQueue.drain(),o=a.length,n&&g.defer(function(){n(null,o)}),o},t.prototype.update=function(i,n,r,o){var s=this;!o&&r instanceof Function&&(o=r,r=null),r||(r={});var a=new e.Matcher(i,s),l={};_.each(s.queries,function(t,e){!t.cursor.skip&&!t.cursor.limit||t.paused||(l[e]=v.clone(t.results))});var u={},h=0;s._eachPossiblyMatchingDoc(i,function(t,e){var i=a.documentMatches(t);return i.result&&(s._saveOriginal(e,t),s._modifyAndNotify(t,n,u,i.arrayIndices),++h,!r.multi)?!1:!0}),_.each(u,function(e,i){var n=s.queries[i];n&&t._recomputeResults(n,l[i])}),s._observeQueue.drain();var c;if(0===h&&r.upsert){var d=t._removeDollarOperators(i);t._modify(d,n,{isInsert:!0}),!d._id&&r.insertedId&&(d._id=r.insertedId),c=s.insert(d),h=1}var p;return r._returnObject?(p={numberAffected:h},void 0!==c&&(p.insertedId=c)):p=h,o&&g.defer(function(){o(null,p)}),p},t.prototype.upsert=function(t,e,i,n){var r=this;return n||"function"!=typeof i||(n=i,i={}),r.update(t,e,_.extend({},i,{upsert:!0,_returnObject:!0}),n)},t.prototype._modifyAndNotify=function(e,i,n,r){var o=this,s={};for(var a in o.queries){var l=o.queries[a];s[a]=l.ordered?l.matcher.documentMatches(e).result:l.results.has(e._id)}var u=v.clone(e);t._modify(e,i,{arrayIndices:r});for(a in o.queries){l=o.queries[a];var h=s[a],c=l.matcher.documentMatches(e),d=c.result;d&&l.distances&&void 0!==c.distance&&l.distances.set(e._id,c.distance),l.cursor.skip||l.cursor.limit?(h||d)&&(n[a]=!0):h&&!d?t._removeFromResults(l,e):!h&&d?t._insertInResults(l,e):h&&d&&t._updateInResults(l,e,u)}},t._insertInResults=function(e,i){var n=v.clone(i);if(delete n._id,e.ordered){if(e.sorter){var r=t._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,i),o=e.results[r+1];o=o?o._id:null,e.addedBefore(i._id,n,o)}else e.addedBefore(i._id,n,null),e.results.push(i);e.added(i._id,n)}else e.added(i._id,n),e.results.set(i._id,i)},t._removeFromResults=function(e,i){if(e.ordered){var n=t._findInOrderedResults(e,i);e.removed(i._id),e.results.splice(n,1)}else{var r=i._id;e.removed(i._id),e.results.remove(r)}},t._updateInResults=function(e,i,n){if(!v.equals(i._id,n._id))throw new Error("Can't change a doc's _id while updating");var r=t._makeChangedFields(i,n);if(!e.ordered)return void(_.isEmpty(r)||(e.changed(i._id,r),e.results.set(i._id,i)));var o=t._findInOrderedResults(e,i);if(_.isEmpty(r)||e.changed(i._id,r),e.sorter){e.results.splice(o,1);var s=t._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,i);if(o!==s){var a=e.results[s+1];a=a?a._id:null,e.movedBefore&&e.movedBefore(i._id,a)}}},t._recomputeResults=function(e,i){i||(i=e.results),e.distances&&e.distances.clear(),e.results=e.cursor._getRawObjects({ordered:e.ordered,distances:e.distances}),e.paused||t._diffQueryChanges(e.ordered,i,e.results,e)},t._findInOrderedResults=function(t,e){if(!t.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var i=0;i<t.results.length;i++)if(t.results[i]===e)return i;throw Error("object missing from query")},t._binarySearch=function(t,e,i){for(var n=0,r=e.length;r>0;){var o=Math.floor(r/2);t(i,e[n+o])>=0?(n+=o+1,r-=o+1):r=o}return n},t._insertInSortedList=function(e,i,n){if(0===i.length)return i.push(n),0;var r=t._binarySearch(e,i,n);return i.splice(r,0,n),r},t.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals=new t._IdMap},t.prototype.retrieveOriginals=function(){var t=this;if(!t._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var e=t._savedOriginals;return t._savedOriginals=null,e},t.prototype._saveOriginal=function(t,e){var i=this;i._savedOriginals&&(i._savedOriginals.has(t)||i._savedOriginals.set(t,v.clone(e)))},t.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var t in this.queries){var e=this.queries[t];e.resultsSnapshot=v.clone(e.results)}}},t.prototype.resumeObservers=function(){var e=this;if(this.paused){this.paused=!1;for(var i in this.queries){var n=e.queries[i];t._diffQueryChanges(n.ordered,n.resultsSnapshot,n.results,n),n.resultsSnapshot=null}e._observeQueue.drain()}},t._idStringify=function(e){if(e instanceof t._ObjectID)return e.valueOf();if("string"==typeof e)return""===e?e:"-"===e.substr(0,1)||"~"===e.substr(0,1)||t._looksLikeObjectID(e)||"{"===e.substr(0,1)?"-"+e:e;if(void 0===e)return"-";if("object"==typeof e&&null!==e)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+y.stringify(e)},t._idParse=function(e){return""===e?e:"-"===e?void 0:"-"===e.substr(0,1)?e.substr(1):"~"===e.substr(0,1)?y.parse(e.substr(1)):t._looksLikeObjectID(e)?new t._ObjectID(e):e},t._makeChangedFields=function(e,i){var n={};return t._diffObjects(i,e,{leftOnly:function(t){n[t]=void 0},rightOnly:function(t,e){n[t]=e},both:function(t,e,i){v.equals(e,i)||(n[t]=i)}}),n}}).call(this),function(){t.wrapTransform=function(t){return t?function(e){if(!_.has(e,"_id"))throw new Error("can only transform documents with _id");var i=e._id,n=x.nonreactive(function(){return t(e)});if(!o(n))throw new Error("transform must return object");if(_.has(n,"_id")){if(!v.equals(n._id,i))throw new Error("transformed document can't have different _id")}else n._id=i;return n}:null}}.call(this),function(){r=function(t){return _.isArray(t)&&!v.isBinary(t)},o=t._isPlainObject=function(e){return e&&3===t._f._type(e)},s=function(t){return r(t)||o(t)},a=function(t,e){if(!o(t))return!1;var i=void 0;return _.each(t,function(n,r){var o="$"===r.substr(0,1);if(void 0===i)i=o;else if(i!==o){if(!e)throw new Error("Inconsistent operator: "+y.stringify(t));i=!1}}),!!i},l=function(t){return/^[0-9]+$/.test(t)}}.call(this),function(){e.Matcher=function(t){var e=this;e._paths={},e._hasGeoQuery=!1,e._hasWhere=!1,e._isSimple=!0,e._matchingDocument=void 0,e._selector=null,e._docMatcher=e._compileSelector(t)},_.extend(e.Matcher.prototype,{documentMatches:function(t){if(!t||"object"!=typeof t)throw Error("documentMatches needs a document");return this._docMatcher(t)},hasGeoQuery:function(){return this._hasGeoQuery
},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(e){var i=this;if(e instanceof Function)return i._isSimple=!1,i._selector=e,i._recordPathUsed(""),function(t){return{result:!!e.call(t)}};if(t._selectorIsId(e))return i._selector={_id:e},i._recordPathUsed("_id"),function(t){return{result:v.equals(t._id,e)}};if(!e||"_id"in e&&!e._id)return i._isSimple=!1,L;if("boolean"==typeof e||r(e)||v.isBinary(e))throw new Error("Invalid selector: "+e);return i._selector=v.clone(e),n(e,i,{isRoot:!0})},_recordPathUsed:function(t){this._paths[t]=!0},_getPaths:function(){return _.keys(this._paths)}});var n=function(t,e,i){i=i||{};var n=[];return _.each(t,function(t,r){if("$"===r.substr(0,1)){if(!_.has(b,r))throw new Error("Unrecognized logical operator: "+r);e._isSimple=!1,n.push(b[r](t,e,i.inElemMatch))}else{i.inElemMatch||e._recordPathUsed(r);var o=d(r),s=f(t,e,i.isRoot);n.push(function(t){var e=o(t);return s(e)})}}),D(n)},f=function(t,e,i){return t instanceof RegExp?(e._isSimple=!1,m(u(t))):a(t)?g(t,e,i):m(h(t))},m=function(t,e){return e=e||{},function(i){var n=i;e.dontExpandLeafArrays||(n=p(i,e.dontIncludeLeafArrays));var r={};return r.result=_.any(n,function(e){var i=t(e.value);return"number"==typeof i&&(e.arrayIndices||(e.arrayIndices=[i]),i=!0),i&&e.arrayIndices&&(r.arrayIndices=e.arrayIndices),i}),r}};u=function(t){return function(e){return e instanceof RegExp?_.isEqual(e,t):"string"!=typeof e?!1:t.test(e)}},h=function(e){if(a(e))throw Error("Can't create equalityValueSelector for operator object");return null==e?function(t){return null==t}:function(i){return t._f._equal(e,i)}};var g=function(t,e,i){var n=[];return _.each(t,function(r,o){var s=_.contains(["$lt","$lte","$gt","$gte"],o)&&_.isNumber(r),a="$ne"===o&&!_.isObject(r),l=_.contains(["$in","$nin"],o)&&_.isArray(r)&&!_.any(r,_.isObject);if("$eq"===o||s||l||a||(e._isSimple=!1),_.has(x,o))n.push(x[o](r,t,e,i));else{if(!_.has(c,o))throw new Error("Unrecognized operator: "+o);var u=c[o];n.push(m(u.compileElementSelector(r,t,e),u))}}),E(n)},y=function(t,e,i){if(!r(t)||_.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");return _.map(t,function(t){if(!o(t))throw Error("$or/$and/$nor entries need to be full objects");return n(t,e,{inElemMatch:i})})},b={$and:function(t,e,i){var n=y(t,e,i);return D(n)},$or:function(t,e,i){var n=y(t,e,i);return 1===n.length?n[0]:function(t){var e=_.any(n,function(e){return e(t).result});return{result:e}}},$nor:function(t,e,i){var n=y(t,e,i);return function(t){var e=_.all(n,function(e){return!e(t).result});return{result:e}}},$where:function(t,e){return e._recordPathUsed(""),e._hasWhere=!0,t instanceof Function||(t=Function("obj","return "+t)),function(e){return{result:t.call(e,e)}}},$comment:function(){return function(){return{result:!0}}}},w=function(t){return function(e){var i=t(e);return{result:!i.result}}},x={$not:function(t,e,i){return w(f(t,i))},$ne:function(t){return w(m(h(t)))},$nin:function(t){return w(m(c.$in.compileElementSelector(t)))},$exists:function(t){var e=m(function(t){return void 0!==t});return t?e:w(e)},$options:function(t,e){if(!_.has(e,"$regex"))throw Error("$options needs a $regex");return C},$maxDistance:function(t,e){if(!e.$near)throw Error("$maxDistance needs a $near");return C},$all:function(t,e,i){if(!r(t))throw Error("$all requires array");if(_.isEmpty(t))return L;var n=[];return _.each(t,function(t){if(a(t))throw Error("no $ expressions in $all");n.push(f(t,i))}),E(n)},$near:function(t,e,i,n){if(!n)throw Error("$near can't be inside another $ operator");i._hasGeoQuery=!0;var s,a,l;if(o(t)&&_.has(t,"$geometry"))s=t.$maxDistance,a=t.$geometry,l=function(t){return t&&t.type?"Point"===t.type?M.pointDistance(a,t):M.geometryWithinRadius(t,a,s)?0:s+1:null};else{if(s=e.$maxDistance,!r(t)&&!o(t))throw Error("$near argument must be coordinate pair or GeoJSON");a=k(t),l=function(t){return r(t)||o(t)?T(a,t):null}}return function(t){t=p(t);var e={result:!1};return _.each(t,function(t){var i=l(t.value);null===i||i>s||void 0!==e.distance&&e.distance<=i||(e.result=!0,e.distance=i,t.arrayIndices?e.arrayIndices=t.arrayIndices:delete e.arrayIndices)}),e}}},T=function(t,e){t=k(t),e=k(e);var i=t[0]-e[0],n=t[1]-e[1];return _.isNaN(i)||_.isNaN(n)?null:Math.sqrt(i*i+n*n)},k=function(t){return _.map(t,_.identity)},S=function(e){return{compileElementSelector:function(i){if(r(i))return function(){return!1};void 0===i&&(i=null);var n=t._f._type(i);return function(r){return void 0===r&&(r=null),t._f._type(r)!==n?!1:e(t._f._cmp(r,i))}}}};c={$lt:S(function(t){return 0>t}),$gt:S(function(t){return t>0}),$lte:S(function(t){return 0>=t}),$gte:S(function(t){return t>=0}),$mod:{compileElementSelector:function(t){if(!r(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1])throw Error("argument to $mod must be an array of two numbers");var e=t[0],i=t[1];return function(t){return"number"==typeof t&&t%e===i}}},$in:{compileElementSelector:function(t){if(!r(t))throw Error("$in needs an array");var e=[];return _.each(t,function(t){if(t instanceof RegExp)e.push(u(t));else{if(a(t))throw Error("cannot nest $ under $in");e.push(h(t))}}),function(t){return void 0===t&&(t=null),_.any(e,function(e){return e(t)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(t){if("string"==typeof t)t=0;else if("number"!=typeof t)throw Error("$size needs a number");return function(e){return r(e)&&e.length===t}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(e){if("number"!=typeof e)throw Error("$type needs a number");return function(i){return void 0!==i&&t._f._type(i)===e}}},$regex:{compileElementSelector:function(t,e){if(!("string"==typeof t||t instanceof RegExp))throw Error("$regex has to be a string or RegExp");var i;if(void 0!==e.$options){if(/[^gim]/.test(e.$options))throw new Error("Only the i, m, and g regexp options are supported");var n=t instanceof RegExp?t.source:t;i=new RegExp(n,e.$options)}else i=t instanceof RegExp?t:new RegExp(t);return u(i)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(t,e,i){if(!o(t))throw Error("$elemMatch need an object");var s,l;return a(t,!0)?(s=f(t,i),l=!1):(s=n(t,i,{inElemMatch:!0}),l=!0),function(t){if(!r(t))return!1;for(var e=0;e<t.length;++e){var i,n=t[e];if(l){if(!o(n)&&!r(n))return!1;i=n}else i=[{value:n,dontIterate:!0}];if(s(i).result)return e}return!1}}}},d=function(t){var e,i=t.split("."),n=i.length?i[0]:"",a=l(n);i.length>1&&(e=d(i.slice(1).join(".")));var u=function(t){return t.dontIterate||delete t.dontIterate,t.arrayIndices&&!t.arrayIndices.length&&delete t.arrayIndices,t};return function(t,i){if(i||(i=[]),r(t)){if(!(a&&n<t.length))return[];i=i.concat(+n,"x")}var l=t[n];if(!e)return[u({value:l,dontIterate:r(t)&&r(l),arrayIndices:i})];if(!s(l))return r(t)?[]:[u({value:void 0,arrayIndices:i})];var h=[],c=function(t){Array.prototype.push.apply(h,t)};return c(e(l,i)),r(l)&&_.each(l,function(t,n){o(t)&&c(e(t,i.concat(n)))}),h}},i.makeLookupFunction=d,p=function(t,e){var i=[];return _.each(t,function(t){var n=r(t.value);e&&n&&!t.dontIterate||i.push({value:t.value,arrayIndices:t.arrayIndices}),n&&!t.dontIterate&&_.each(t.value,function(e,n){i.push({value:e,arrayIndices:(t.arrayIndices||[]).concat(n)})})}),i};var L=function(){return{result:!1}},C=function(){return{result:!0}},P=function(t){return 0===t.length?C:1===t.length?t[0]:function(e){var i={};return i.result=_.all(t,function(t){var n=t(e);return n.result&&void 0!==n.distance&&void 0===i.distance&&(i.distance=n.distance),n.result&&n.arrayIndices&&(i.arrayIndices=n.arrayIndices),n.result}),i.result||(delete i.distance,delete i.arrayIndices),i}},D=P,E=P;t._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:r(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:v.isBinary(e)?5:e instanceof t._ObjectID?7:3},_equal:function(t,e){return v.equals(t,e,{keyOrderSensitive:!0})},_typeorder:function(t){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][t]},_cmp:function(e,i){if(void 0===e)return void 0===i?0:-1;if(void 0===i)return 1;var n=t._f._type(e),r=t._f._type(i),o=t._f._typeorder(n),s=t._f._typeorder(r);if(o!==s)return s>o?-1:1;if(n!==r)throw Error("Missing type coercion logic in _cmp");if(7===n&&(n=r=2,e=e.toHexString(),i=i.toHexString()),9===n&&(n=r=1,e=e.getTime(),i=i.getTime()),1===n)return e-i;if(2===r)return i>e?-1:e===i?0:1;if(3===n){var a=function(t){var e=[];for(var i in t)e.push(i),e.push(t[i]);return e};return t._f._cmp(a(e),a(i))}if(4===n)for(var l=0;;l++){if(l===e.length)return l===i.length?0:-1;if(l===i.length)return 1;var u=t._f._cmp(e[l],i[l]);if(0!==u)return u}if(5===n){if(e.length!==i.length)return e.length-i.length;for(l=0;l<e.length;l++){if(e[l]<i[l])return-1;if(e[l]>i[l])return 1}return 0}if(8===n)return e?i?0:1:i?-1:0;if(10===n)return 0;if(11===n)throw Error("Sorting not supported on regular expression");if(13===n)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},t._removeDollarOperators=function(t){var e={};for(var i in t)"$"!==i.substr(0,1)&&(e[i]=t[i]);return e}}.call(this),function(){e.Sorter=function(t,n){var r=this;n=n||{},r._sortSpecParts=[];var o=function(t,e){if(!t)throw Error("sort keys must be non-empty");if("$"===t.charAt(0))throw Error("unsupported sort key: "+t);r._sortSpecParts.push({path:t,lookup:d(t),ascending:e})};if(t instanceof Array)for(var s=0;s<t.length;s++)"string"==typeof t[s]?o(t[s],!0):o(t[s][0],"desc"!==t[s][1]);else{if("object"!=typeof t)throw Error("Bad sort specification: "+y.stringify(t));_.each(t,function(t,e){o(e,t>=0)})}if(r.affectedByModifier){var a={};_.each(r._sortSpecParts,function(t){a[t.path]=1}),r._selectorForAffectedByModifier=new e.Matcher(a)}r._keyComparator=i(_.map(r._sortSpecParts,function(t,e){return r._keyFieldComparator(e)})),r._keyFilter=null,n.matcher&&r._useWithMatcher(n.matcher)},_.extend(e.Sorter.prototype,{getComparator:function(t){var e=this;if(!t||!t.distances)return e._getBaseComparator();var n=t.distances;return i([e._getBaseComparator(),function(t,e){if(!n.has(t._id))throw Error("Missing distance for "+t._id);if(!n.has(e._id))throw Error("Missing distance for "+e._id);return n.get(t._id)-n.get(e._id)}])},_getPaths:function(){var t=this;return _.pluck(t._sortSpecParts,"path")},_getMinKeyFromDoc:function(t){var e=this,i=null;if(e._generateKeysFromDoc(t,function(t){return e._keyCompatibleWithSelector(t)?null===i?void(i=t):void(e._compareKeys(t,i)<0&&(i=t)):void 0}),null===i)throw Error("sort selector found no keys in doc?");return i},_keyCompatibleWithSelector:function(t){var e=this;return!e._keyFilter||e._keyFilter(t)},_generateKeysFromDoc:function(t,e){var i=this;if(0===i._sortSpecParts.length)throw new Error("can't generate keys without a spec");var n=[],r=function(t){return t.join(",")+","},o=null;if(_.each(i._sortSpecParts,function(e,i){var s=p(e.lookup(t),!0);s.length||(s=[{value:null}]);var a=!1;if(n[i]={},_.each(s,function(t){if(!t.arrayIndices){if(s.length>1)throw Error("multiple branches but no array used?");return void(n[i][""]=t.value)}a=!0;var e=r(t.arrayIndices);if(_.has(n[i],e))throw Error("duplicate path: "+e);if(n[i][e]=t.value,o&&!_.has(o,e))throw Error("cannot index parallel arrays")}),o){if(!_.has(n[i],"")&&_.size(o)!==_.size(n[i]))throw Error("cannot index parallel arrays!")}else a&&(o={},_.each(n[i],function(t,e){o[e]=!0}))}),!o){var s=_.map(n,function(t){if(!_.has(t,""))throw Error("no value in sole key case?");return t[""]});return void e(s)}_.each(o,function(t,i){var r=_.map(n,function(t){if(_.has(t,""))return t[""];if(!_.has(t,i))throw Error("missing path?");return t[i]});e(r)})},_compareKeys:function(t,e){var i=this;if(t.length!==i._sortSpecParts.length||e.length!==i._sortSpecParts.length)throw Error("Key has wrong length");return i._keyComparator(t,e)},_keyFieldComparator:function(e){var i=this,n=!i._sortSpecParts[e].ascending;return function(i,r){var o=t._f._cmp(i[e],r[e]);return n&&(o=-o),o}},_getBaseComparator:function(){var t=this;return t._sortSpecParts.length?function(e,i){var n=t._getMinKeyFromDoc(e),r=t._getMinKeyFromDoc(i);return t._compareKeys(n,r)}:function(){return 0}},_useWithMatcher:function(t){var e=this;if(e._keyFilter)throw Error("called _useWithMatcher twice?");if(!_.isEmpty(e._sortSpecParts)){var i=t._selector;if(!(i instanceof Function)){var n={};_.each(e._sortSpecParts,function(t){n[t.path]=[]}),_.each(i,function(t,e){var i=n[e];if(i){if(t instanceof RegExp){if(t.ignoreCase||t.multiline)return;return void i.push(u(t))}return a(t)?void _.each(t,function(e,n){_.contains(["$lt","$lte","$gt","$gte"],n)&&i.push(c[n].compileElementSelector(e)),"$regex"!==n||t.$options||i.push(c.$regex.compileElementSelector(e,t))}):void i.push(h(t))}}),_.isEmpty(n[e._sortSpecParts[0].path])||(e._keyFilter=function(t){return _.all(e._sortSpecParts,function(e,i){return _.all(n[e.path],function(e){return e(t[i])})})})}}}});var i=function(t){return function(e,i){for(var n=0;n<t.length;++n){var r=t[n](e,i);if(0!==r)return r}return 0}}}.call(this),function(){t._compileProjection=function(e){t._checkSupportedProjection(e);var i=_.isUndefined(e._id)?!0:e._id,n=f(e),r=function(t,e){if(_.isArray(t))return _.map(t,function(t){return r(t,e)});var i=n.including?{}:v.clone(t);return _.each(e,function(e,o){_.has(t,o)&&(_.isObject(e)?_.isObject(t[o])&&(i[o]=r(t[o],e)):n.including?i[o]=v.clone(t[o]):delete i[o])}),i};return function(t){var e=r(t,n.tree);return i&&_.has(t,"_id")&&(e._id=t._id),!i&&_.has(e,"_id")&&delete e._id,e}},f=function(t){var e=_.keys(t).sort();e.length>0&&(1!==e.length||"_id"!==e[0])&&(e=_.reject(e,function(t){return"_id"===t}));var i=null;_.each(e,function(e){var r=!!t[e];if(null===i&&(i=r),i!==r)throw n("You cannot currently mix including and excluding fields.")});var r=m(e,function(){return i},function(t,e,i){var r=i,o=e;throw n("both "+r+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:r,including:i}},m=function(t,e,i,n){return n=n||{},_.each(t,function(t){var r=n,o=t.split("."),s=_.all(o.slice(0,-1),function(e,n){if(_.has(r,e)){if(!_.isObject(r[e])&&(r[e]=i(r[e],o.slice(0,n+1).join("."),t),!_.isObject(r[e])))return!1}else r[e]={};return r=r[e],!0});if(s){var a=_.last(o);r[a]=_.has(r,a)?i(r[a],t,t):e(t)}}),n},t._checkSupportedProjection=function(t){if(!_.isObject(t)||_.isArray(t))throw n("fields option must be an object");_.each(t,function(t,e){if(_.contains(e.split("."),"$"))throw n("Minimongo doesn't support $ operator in projections yet.");if(-1===_.indexOf([1,0,!0,!1],t))throw n("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){t._modify=function(t,e,s){if(s=s||{},!o(e))throw n("Modifier must be an object");var l,h=a(e);if(h)l=v.clone(t),_.each(e,function(t,e){var o=u[e];if(s.isInsert&&"$setOnInsert"===e&&(o=u.$set),!o)throw n("Invalid modifier specified "+e);_.each(t,function(t,a){if(a.length&&"."===a[a.length-1])throw n("Invalid mod field name, may not end in a period");if("_id"===a)throw n("Mod on _id not allowed");var u=a.split("."),h=(_.has(r,e),i(l,u,{noCreate:r[e],forbidArray:"$rename"===e,arrayIndices:s.arrayIndices})),c=u.pop();o(h,c,t,a,l)})});else{if(e._id&&!v.equals(t._id,e._id))throw n("Cannot change the _id of a document");for(var c in e)if(/\./.test(c))throw n("When replacing document, field name may not contain '.'");l=e}_.each(_.keys(t),function(e){("_id"!==e||s.isInsert)&&delete t[e]}),_.each(l,function(e,i){t[i]=e})};var i=function(t,e,i){i=i||{};for(var r=!1,o=0;o<e.length;o++){var a=o===e.length-1,u=e[o],h=s(t);if(!h){if(i.noCreate)return void 0;var c=n("cannot use the part '"+u+"' to traverse "+t);throw c.setPropertyError=!0,c}if(t instanceof Array){if(i.forbidArray)return null;if("$"===u){if(r)throw n("Too many positional (i.e. '$') elements");if(!i.arrayIndices||!i.arrayIndices.length)throw n("The positional operator did not find the match needed from the query");u=i.arrayIndices[0],r=!0}else{if(!l(u)){if(i.noCreate)return void 0;throw n("can't append to array using string field name ["+u+"]")}u=parseInt(u)}if(a&&(e[o]=u),i.noCreate&&u>=t.length)return void 0;for(;t.length<u;)t.push(null);if(!a)if(t.length===u)t.push({});else if("object"!=typeof t[u])throw n("can't modify field '"+e[o+1]+"' of list value "+y.stringify(t[u]))}else{if(u.length&&"$"===u.substr(0,1))throw n("can't set field named "+u);if(!(u in t)){if(i.noCreate)return void 0;a||(t[u]={})}}if(a)return t;t=t[u]}},r={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},u={$inc:function(t,e,i){if("number"!=typeof i)throw n("Modifier $inc allowed for numbers only");if(e in t){if("number"!=typeof t[e])throw n("Cannot apply $inc modifier to non-number");t[e]+=i}else t[e]=i},$set:function(t,e,i){if(!_.isObject(t)){var r=n("Cannot set property on non-object field");throw r.setPropertyError=!0,r}if(null===t){var r=n("Cannot set property on null");throw r.setPropertyError=!0,r}t[e]=v.clone(i)},$setOnInsert:function(){},$unset:function(t,e){void 0!==t&&(t instanceof Array?e in t&&(t[e]=null):delete t[e])},$push:function(i,r,o){if(void 0===i[r]&&(i[r]=[]),!(i[r]instanceof Array))throw n("Cannot apply $push modifier to non-array");if(!o||!o.$each)return void i[r].push(v.clone(o));var s=o.$each;if(!(s instanceof Array))throw n("$each must be an array");var a=void 0;if("$slice"in o){if("number"!=typeof o.$slice)throw n("$slice must be a numeric value");if(o.$slice>0)throw n("$slice in $push must be zero or negative");a=o.$slice}var l=void 0;if(o.$sort){if(void 0===a)throw n("$sort requires $slice to be present");l=new e.Sorter(o.$sort).getComparator();for(var u=0;u<s.length;u++)if(3!==t._f._type(s[u]))throw n("$push like modifiers using $sort require all elements to be objects")}for(var h=0;h<s.length;h++)i[r].push(v.clone(s[h]));l&&i[r].sort(l),void 0!==a&&(i[r]=0===a?[]:i[r].slice(a))},$pushAll:function(t,e,i){if(!("object"==typeof i&&i instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");var r=t[e];if(void 0===r)t[e]=i;else{if(!(r instanceof Array))throw n("Cannot apply $pushAll modifier to non-array");for(var o=0;o<i.length;o++)r.push(i[o])}},$addToSet:function(e,i,r){var o=e[i];if(void 0===o)e[i]=[r];else{if(!(o instanceof Array))throw n("Cannot apply $addToSet modifier to non-array");var s=!1;if("object"==typeof r)for(var a in r){"$each"===a&&(s=!0);break}var l=s?r.$each:[r];_.each(l,function(e){for(var i=0;i<o.length;i++)if(t._f._equal(e,o[i]))return;o.push(v.clone(e))})}},$pop:function(t,e,i){if(void 0!==t){var r=t[e];if(void 0!==r){if(!(r instanceof Array))throw n("Cannot apply $pop modifier to non-array");"number"==typeof i&&0>i?r.splice(0,1):r.pop()}}},$pull:function(i,r,o){if(void 0!==i){var s=i[r];if(void 0!==s){if(!(s instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");var a=[];if("object"!=typeof o||o instanceof Array)for(var l=0;l<s.length;l++)t._f._equal(s[l],o)||a.push(s[l]);else for(var u=new e.Matcher(o),l=0;l<s.length;l++)u.documentMatches(s[l]).result||a.push(s[l]);i[r]=a}}},$pullAll:function(e,i,r){if(!("object"==typeof r&&r instanceof Array))throw n("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var o=e[i];if(void 0!==o){if(!(o instanceof Array))throw n("Cannot apply $pull/pullAll modifier to non-array");for(var s=[],a=0;a<o.length;a++){for(var l=!1,u=0;u<r.length;u++)if(t._f._equal(o[a],r[u])){l=!0;break}l||s.push(o[a])}e[i]=s}}},$rename:function(t,e,r,o,s){if(o===r)throw n("$rename source must differ from target");if(null===t)throw n("$rename source field invalid");if("string"!=typeof r)throw n("$rename target must be a string");if(void 0!==t){var a=t[e];delete t[e];var l=r.split("."),u=i(s,l,{forbidArray:!0});if(null===u)throw n("$rename target field invalid");var h=l.pop();u[h]=a}},$bit:function(){throw n("$bit is not supported")}}}.call(this),function(){t._diffQueryChanges=function(e,i,n,r){e?t._diffQueryOrderedChanges(i,n,r):t._diffQueryUnorderedChanges(i,n,r)},t._diffQueryUnorderedChanges=function(e,i,n){if(n.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");i.forEach(function(i,r){var o=e.get(r);if(o)n.changed&&!v.equals(o,i)&&n.changed(r,t._makeChangedFields(i,o));else if(n.added){var s=v.clone(i);delete s._id,n.added(i._id,s)}}),n.removed&&e.forEach(function(t,e){i.has(e)||n.removed(e)})},t._diffQueryOrderedChanges=function(e,i,n){var r={};_.each(i,function(t){r[t._id]&&g._debug("Duplicate _id in new_results"),r[t._id]=!0});var o={};_.each(e,function(t,e){t._id in o&&g._debug("Duplicate _id in old_results"),o[t._id]=e});for(var s=[],a=0,l=i.length,u=new Array(l),h=new Array(l),c=function(t){return o[i[t]._id]},d=0;l>d;d++)if(void 0!==o[i[d]._id]){for(var p=a;p>0&&!(c(u[p-1])<c(d));)p--;h[d]=0===p?-1:u[p-1],u[p]=d,p+1>a&&(a=p+1)}for(var f=0===a?-1:u[a-1];f>=0;)s.push(f),f=h[f];s.reverse(),s.push(i.length),_.each(e,function(t){r[t._id]||n.removed&&n.removed(t._id)});var m=0;_.each(s,function(r){for(var s,a,l,u=i[r]?i[r]._id:null,h=m;r>h;h++)a=i[h],_.has(o,a._id)?(s=e[o[a._id]],l=t._makeChangedFields(a,s),_.isEmpty(l)||n.changed&&n.changed(a._id,l),n.movedBefore&&n.movedBefore(a._id,u)):(l=v.clone(a),delete l._id,n.addedBefore&&n.addedBefore(a._id,l,u),n.added&&n.added(a._id,l));u&&(a=i[r],s=e[o[a._id]],l=t._makeChangedFields(a,s),_.isEmpty(l)||n.changed&&n.changed(a._id,l)),m=r+1})},t._diffObjects=function(t,e,i){_.each(t,function(t,n){_.has(e,n)?i.both&&i.both(n,t,e[n]):i.leftOnly&&i.leftOnly(n,t)}),i.rightOnly&&_.each(e,function(e,n){_.has(t,n)||i.rightOnly(n,e)})}}.call(this),function(){t._IdMap=function(){var e=this;b.call(e,t._idStringify,t._idParse)},g._inherits(t._IdMap,b)}.call(this),function(){t._CachingChangeObserver=function(e){var i=this;e=e||{};var n=e.callbacks&&t._observeChangesCallbacksAreOrdered(e.callbacks);if(_.has(e,"ordered")){if(i.ordered=e.ordered,e.callbacks&&e.ordered!==n)throw Error("ordered option doesn't match callbacks")}else{if(!e.callbacks)throw Error("must provide ordered or callbacks");i.ordered=n}var r=e.callbacks||{};i.ordered?(i.docs=new w(t._idStringify),i.applyChange={addedBefore:function(t,e,n){var o=v.clone(e);o._id=t,r.addedBefore&&r.addedBefore.call(i,t,e,n),r.added&&r.added.call(i,t,e),i.docs.putBefore(t,o,n||null)},movedBefore:function(t,e){i.docs.get(t);r.movedBefore&&r.movedBefore.call(i,t,e),i.docs.moveBefore(t,e||null)}}):(i.docs=new t._IdMap,i.applyChange={added:function(t,e){var n=v.clone(e);r.added&&r.added.call(i,t,e),n._id=t,i.docs.set(t,n)}}),i.applyChange.changed=function(e,n){var o=i.docs.get(e);if(!o)throw new Error("Unknown id for changed: "+e);r.changed&&r.changed.call(i,e,v.clone(n)),t._applyChanges(o,n)},i.applyChange.removed=function(t){r.removed&&r.removed.call(i,t),i.docs.remove(t)}},t._observeFromObserveChanges=function(e,i){var n,r=e.getTransform()||function(t){return t},o=!!i._suppress_initial;if(t._observeCallbacksAreOrdered(i)){var s=!i._no_indices;n={addedBefore:function(t,e,n){var a=this;if(!o&&(i.addedAt||i.added)){var l=r(_.extend(e,{_id:t}));if(i.addedAt){var u=s?n?a.docs.indexOf(n):a.docs.size():-1;i.addedAt(l,u,n)}else i.added(l)}},changed:function(e,n){var o=this;if(i.changedAt||i.changed){var a=v.clone(o.docs.get(e));if(!a)throw new Error("Unknown id for changed: "+e);var l=r(v.clone(a));if(t._applyChanges(a,n),a=r(a),i.changedAt){var u=s?o.docs.indexOf(e):-1;i.changedAt(a,l,u)}else i.changed(a,l)}},movedBefore:function(t,e){var n=this;if(i.movedTo){var o=s?n.docs.indexOf(t):-1,a=s?e?n.docs.indexOf(e):n.docs.size():-1;a>o&&--a,i.movedTo(r(v.clone(n.docs.get(t))),o,a,e||null)}},removed:function(t){var e=this;if(i.removedAt||i.removed){var n=r(e.docs.get(t));if(i.removedAt){var o=s?e.docs.indexOf(t):-1;i.removedAt(n,o)}else i.removed(n)}}}}else n={added:function(t,e){if(!o&&i.added){var n=_.extend(e,{_id:t});i.added(r(n))}},changed:function(e,n){var o=this;if(i.changed){var s=o.docs.get(e),a=v.clone(s);t._applyChanges(a,n),i.changed(r(a),r(s))}},removed:function(t){var e=this;i.removed&&i.removed(r(e.docs.get(t)))}};var a=new t._CachingChangeObserver({callbacks:n}),l=e.observeChanges(a.applyChange);return o=!1,a.ordered&&(l._fetch=function(){var t=[];return a.docs.forEach(function(e){t.push(r(v.clone(e)))}),t}),l}}.call(this),function(){t._looksLikeObjectID=function(t){return 24===t.length&&t.match(/^[0-9a-f]*$/)},t._ObjectID=function(e){var i=this;if(e){if(e=e.toLowerCase(),!t._looksLikeObjectID(e))throw new Error("Invalid hexadecimal string for creating an ObjectID");i._str=e}else i._str=T.hexString(24)},t._ObjectID.prototype.toString=function(){var t=this;return'ObjectID("'+t._str+'")'},t._ObjectID.prototype.equals=function(e){var i=this;return e instanceof t._ObjectID&&i.valueOf()===e.valueOf()},t._ObjectID.prototype.clone=function(){var e=this;return new t._ObjectID(e._str)},t._ObjectID.prototype.typeName=function(){return"oid"},t._ObjectID.prototype.getTimestamp=function(){var t=this;return parseInt(t._str.substr(0,8),16)},t._ObjectID.prototype.valueOf=t._ObjectID.prototype.toJSONValue=t._ObjectID.prototype.toHexString=function(){return this._str},t._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof t._ObjectID},t._selectorIsIdPerhapsAsObject=function(e){return t._selectorIsId(e)||e&&"object"==typeof e&&e._id&&t._selectorIsId(e._id)&&1===_.size(e)},t._idsMatchedBySelector=function(e){if(t._selectorIsId(e))return[e];if(!e)return null;if(_.has(e,"_id"))return t._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&_.isArray(e._id.$in)&&!_.isEmpty(e._id.$in)&&_.all(e._id.$in,t._selectorIsId)?e._id.$in:null;if(e.$and&&_.isArray(e.$and))for(var i=0;i<e.$and.length;++i){var n=t._idsMatchedBySelector(e.$and[i]);if(n)return n}return null},v.addType("oid",function(e){return new t._ObjectID(e)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:t,Minimongo:e,MinimongoTest:i}}(),function(){var t,e,i=Package.meteor.Meteor,n=Package.underscore._,r=Package.ejson.EJSON;(function(){var o=new i.EnvironmentVariable;t=function(t,i){var n=o.getOrNullIfOutsideFiber();n&&n.checking(t);try{c(t,i)}catch(r){throw r instanceof e.Error&&r.path&&(r.message+=" in field "+r.path),r}},e={Optional:function(t){return new s(t)},OneOf:function(){return new a(n.toArray(arguments))},Any:["__any__"],Where:function(t){return new l(t)},ObjectIncluding:function(t){return new u(t)},Integer:["__integer__"],Error:i.makeErrorType("Match.Error",function(t){this.message="Match error: "+t,this.path="",this.sanitizedError=new i.Error(400,"Match failed")}),test:function(t,i){try{return c(t,i),!0}catch(n){if(n instanceof e.Error)return!1;throw n}},_failIfArgumentsAreNotAllChecked:function(t,e,i,n){var r=new d(i,n),s=o.withValue(r,function(){return t.apply(e,i)});return r.throwUnlessAllArgumentsHaveBeenChecked(),s}};var s=function(t){this.pattern=t},a=function(t){if(n.isEmpty(t))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=t},l=function(t){this.condition=t},u=function(t){this.pattern=t},h=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],c=function(t,i){if(i!==e.Any){for(var o=0;o<h.length;++o)if(i===h[o][0]){if(typeof t===h[o][1])return;throw new e.Error("Expected "+h[o][1]+", got "+typeof t)}if(null===i){if(null===t)return;throw new e.Error("Expected null, got "+r.stringify(t))}if(i===e.Integer){if("number"==typeof t&&(0|t)===t)return;throw new e.Error("Expected Integer, got "+(t instanceof Object?r.stringify(t):t))}if(i===Object&&(i=e.ObjectIncluding({})),i instanceof Array){if(1!==i.length)throw Error("Bad pattern: arrays must have one type element"+r.stringify(i));if(!n.isArray(t)&&!n.isArguments(t))throw new e.Error("Expected array, got "+r.stringify(t));return void n.each(t,function(t,n){try{c(t,i[0])}catch(r){throw r instanceof e.Error&&(r.path=f(n,r.path)),r}})}if(i instanceof l){if(i.condition(t))return;throw new e.Error("Failed Match.Where validation")}if(i instanceof s&&(i=e.OneOf(void 0,i.pattern)),i instanceof a){for(var o=0;o<i.choices.length;++o)try{return void c(t,i.choices[o])}catch(d){if(!(d instanceof e.Error))throw d}throw new e.Error("Failed Match.OneOf or Match.Optional validation")}if(i instanceof Function){if(t instanceof i)return;throw new e.Error("Expected "+i.name)}var p=!1;if(i instanceof u&&(p=!0,i=i.pattern),"object"!=typeof i)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof t)throw new e.Error("Expected object, got "+typeof t);if(null===t)throw new e.Error("Expected object, got null");if(t.constructor!==Object)throw new e.Error("Expected plain object");var m={},g={};n.each(i,function(t,e){t instanceof s?g[e]=t.pattern:m[e]=t}),n.each(t,function(t,i){try{if(n.has(m,i))c(t,m[i]),delete m[i];else if(n.has(g,i))c(t,g[i]);else if(!p)throw new e.Error("Unknown key")}catch(r){throw r instanceof e.Error&&(r.path=f(i,r.path)),r}}),n.each(m,function(t,i){throw new e.Error("Missing key '"+i+"'")})}},d=function(t,e){var i=this;i.args=n.clone(t),i.args.reverse(),i.description=e};n.extend(d.prototype,{checking:function(t){var e=this;e._checkingOneValue(t)||(n.isArray(t)||n.isArguments(t))&&n.each(t,n.bind(e._checkingOneValue,e))},_checkingOneValue:function(t){for(var e=this,i=0;i<e.args.length;++i)if(t===e.args[i])return e.args.splice(i,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var t=this;if(!n.isEmpty(t.args))throw new Error("Did not check() all arguments during "+t.description)}});var p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],f=function(t,e){return"number"==typeof t||t.match(/^[0-9]+$/)?t="["+t+"]":(!t.match(/^[a-z_$][0-9a-z_$]*$/i)||n.contains(p,t))&&(t=JSON.stringify([t])),e&&"["!==e[0]?t+"."+e:t+e}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:t,Match:e}}(),function(){var t,e=Package.meteor.Meteor,i=Package.underscore._,n=Package.random.Random;(function(){t=function(t){var e=this;i.extend(e,i.defaults(i.clone(t||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),e.retryTimer=null},i.extend(t.prototype,{clear:function(){var t=this;t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null},_timeout:function(t){var e=this;if(t<e.minCount)return e.minTimeout;var i=Math.min(e.maxTimeout,e.baseTimeout*Math.pow(e.exponent,t));return i*=n.fraction()*e.fuzz+(1-e.fuzz/2)},retryLater:function(t,i){var n=this,r=n._timeout(t);return n.retryTimer&&clearTimeout(n.retryTimer),n.retryTimer=e.setTimeout(i,r),r}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:t}}(),function(){var t,e=Package.meteor.Meteor,i=Package.underscore._,n=(Package.logging.Log,Package.json.JSON);(function(){var r,o="Meteor_Reload",s=3e4,a={};"undefined"!=typeof sessionStorage&&sessionStorage&&(r=sessionStorage.getItem(o),sessionStorage.removeItem(o)),r||(r="{}");var l={};try{l=n.parse(r),"object"!=typeof l&&(e._debug("Got bad data on reload. Ignoring."),l={})}catch(u){e._debug("Got invalid JSON on reload. Ignoring.")}l.reload&&"object"==typeof l.data&&l.time+s>(new Date).getTime()&&(a=l.data);var h=[];t={},t._onMigrate=function(t,e){e||(e=t,t=void 0),h.push({name:t,callback:e})},t._migrationData=function(t){return a[t]};var c=!1;t._reload=function(){if(!c){c=!0;var t=function(){i.defer(function(){for(var r={},s=i.clone(h);s.length;){var a=s.shift(),l=a.callback(t);if(!l[0])return;l.length>1&&a.name&&(r[a.name]=l[1])}try{var u=n.stringify({time:(new Date).getTime(),data:r,reload:!0})}catch(c){throw e._debug("Couldn't serialize data for migration",r),c}if("undefined"!=typeof sessionStorage&&sessionStorage)try{sessionStorage.setItem(o,u)
}catch(c){e._debug("Couldn't save data for migration to sessionStorage",c)}else e._debug("Browser does not support sessionStorage. Not saving migration state.");window.location.reload()})};t()}}}).call(this),function(){e._reload={onMigrate:t._onMigrate,migrationData:t._migrationData,reload:t._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:t}}(),function(){{var t,e,i,n,r,o,s,a,l,u,h,c,d,p=Package.meteor.Meteor,f=(Package.check.check,Package.check.Match,Package.random.Random),m=Package.ejson.EJSON,g=Package.json.JSON,_=Package.underscore._,y=Package.deps.Deps,v=(Package.logging.Log,Package.retry.Retry),b=Package.minimongo.LocalCollection;Package.minimongo.Minimongo}(function(){e={}}).call(this),function(){i=function(){var t=document,e=window,i={},n=function(){};n.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var n=this._listeners[t];-1===i.arrIndexOf(n,e)&&n.push(e)},n.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var n=this._listeners[t],r=i.arrIndexOf(n,e);return-1!==r?void(n.length>1?this._listeners[t]=n.slice(0,r).concat(n.slice(r+1)):delete this._listeners[t]):void 0}},n.prototype.dispatchEvent=function(t){var e=t.type,i=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,i),this._listeners&&e in this._listeners)for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].apply(this,i)};var r=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var i in e)e.hasOwnProperty(i)&&(this[i]=e[i])};r.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var i=this[e];"function"==typeof i&&(i="[function]"),t.push(e+"="+i)}return"SimpleEvent("+t.join(", ")+")"};var o=function(t){var e=this;e._events=t||[],e._listeners={}};o.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var i=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,i),t in e._listeners)for(var n=0;n<e._listeners[t].length;n++)e._listeners[t][n].apply(e,i)}},o.prototype.on=function(t,e){var i=this;i._verifyType(t),i._nuked||(t in i._listeners||(i._listeners[t]=[]),i._listeners[t].push(e))},o.prototype._verifyType=function(t){var e=this;-1===i.arrIndexOf(e._events,t)&&i.log("Event "+g.stringify(t)+" not listed "+g.stringify(e._events)+" in "+e)},o.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var s="abcdefghijklmnopqrstuvwxyz0123456789_";i.random_string=function(t,e){e=e||s.length;var i,n=[];for(i=0;t>i;i++)n.push(s.substr(Math.floor(Math.random()*e),1));return n.join("")},i.random_number=function(t){return Math.floor(Math.random()*t)},i.random_number_string=function(t){var e=(""+(t-1)).length,n=Array(e+1).join("0");return(n+i.random_number(t)).slice(-e)},i.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},i.isSameOriginUrl=function(t,i){return i||(i=e.location.href),t.split("/").slice(0,3).join("/")===i.split("/").slice(0,3).join("/")},i.isSameOriginScheme=function(t,i){return i||(i=e.location.href),t.split(":")[0]===i.split(":")[0]},i.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},i.objectExtend=function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t};var a="_jp";i.polluteGlobalNamespace=function(){a in e||(e[a]={})},i.closeFrame=function(t,e){return"c"+g.stringify([t,e])},i.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},i.countRTO=function(t){var e;return e=t>100?3*t:t+200},i.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},i.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},i.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},i.amendUrl=function(e,n){var r;if(void 0===n)r=t.location;else{var o=/^([a-z0-9.+-]+:)/i.exec(n);if(o){var s=o[0].toLowerCase(),a=n.substring(s.length),l=/[a-z0-9\.-]+(:[0-9]+)?/.exec(a);if(l)var u=l[0]}if(!s||!u)throw new Error("relativeTo must be an absolute url");r={protocol:s,host:u}}if(!e)throw new Error("Wrong url for SockJS");if(!i.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");0===e.indexOf("//")&&(e=r.protocol+e),0===e.indexOf("/")&&(e=r.protocol+"//"+r.host+e),e=e.replace(/[/]+$/,"");var h=e.split("/");return("http:"===h[0]&&/:80$/.test(h[2])||"https:"===h[0]&&/:443$/.test(h[2]))&&(h[2]=h[2].replace(/:(80|443)$/,"")),e=h.join("/")},i.arrIndexOf=function(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},i.arrSkip=function(t,e){var n=i.arrIndexOf(t,e);if(-1===n)return t.slice();var r=t.slice(0,n);return r.concat(t.slice(n+1))},i.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},i.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var l,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","­":"\\u00ad","؀":"\\u0600","؁":"\\u0601","؂":"\\u0602","؃":"\\u0603","؄":"\\u0604","܏":"\\u070f","឴":"\\u17b4","឵":"\\u17b5","‌":"\\u200c","‍":"\\u200d","‎":"\\u200e","‏":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","‪":"\\u202a","‫":"\\u202b","‬":"\\u202c","‭":"\\u202d","‮":"\\u202e"," ":"\\u202f","⁠":"\\u2060","⁡":"\\u2061","⁢":"\\u2062","⁣":"\\u2063","⁤":"\\u2064","⁥":"\\u2065","⁦":"\\u2066","⁧":"\\u2067","⁨":"\\u2068","⁩":"\\u2069","⁪":"\\u206a","⁫":"\\u206b","⁬":"\\u206c","⁭":"\\u206d","⁮":"\\u206e","⁯":"\\u206f","﻿":"\\ufeff","￰":"\\ufff0","￱":"\\ufff1","￲":"\\ufff2","￳":"\\ufff3","￴":"\\ufff4","￵":"\\ufff5","￶":"\\ufff6","￷":"\\ufff7","￸":"\\ufff8","￹":"\\ufff9","￺":"\\ufffa","￻":"\\ufffb","￼":"\\ufffc","�":"\\ufffd","￾":"\\ufffe","￿":"\\uffff"},c=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=g&&g.stringify||function(t){return u.lastIndex=0,u.test(t)&&(t=t.replace(u,function(t){return h[t]})),'"'+t+'"'},p=function(t){var e,i={},n=[];for(e=0;65536>e;e++)n.push(String.fromCharCode(e));return t.lastIndex=0,n.join("").replace(t,function(t){return i[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,i};i.quote=function(t){var e=d(t);return c.lastIndex=0,c.test(e)?(l||(l=p(c)),e.replace(c,function(t){return l[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];i.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var i=f[e];t[i]=k[i]&&k[i].enabled()}return t},i.detectProtocols=function(t,e,i){var n={},r=[];e||(e=f);for(var o=0;o<e.length;o++){var s=e[o];n[s]=t[s]}var a=function(t){var e=t.shift();n[e]?r.push(e):t.length>0&&a(t)};return i.websocket!==!1&&a(["websocket"]),n["xhr-streaming"]&&!i.null_origin?r.push("xhr-streaming"):!n["xdr-streaming"]||i.cookie_needed||i.null_origin?a(["iframe-eventsource","iframe-htmlfile"]):r.push("xdr-streaming"),n["xhr-polling"]&&!i.null_origin?r.push("xhr-polling"):!n["xdr-polling"]||i.cookie_needed||i.null_origin?a(["iframe-xhr-polling","jsonp-polling"]):r.push("xdr-polling"),r};var m="_sockjs_global";i.createHook=function(){var t="a"+i.random_string(8);if(!(m in e)){var n={};e[m]=function(t){return t in n||(n[t]={id:t,del:function(){delete n[t]}}),n[t]}}return e[m](t)},i.attachMessage=function(t){i.attachEvent("message",t)},i.attachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.addEventListener(i,n,!1):(t.attachEvent("on"+i,n),e.attachEvent("on"+i,n))},i.detachMessage=function(t){i.detachEvent("message",t)},i.detachEvent=function(i,n){"undefined"!=typeof e.addEventListener?e.removeEventListener(i,n,!1):(t.detachEvent("on"+i,n),e.detachEvent("on"+i,n))};var _={},y=!1,v=function(){for(var t in _)_[t](),delete _[t]},b=function(){y||(y=!0,v())};i.attachEvent("unload",b),i.unload_add=function(t){var e=i.random_string(8);return _[e]=t,y&&i.delay(v),e},i.unload_del=function(t){t in _&&delete _[t]},i.createIframe=function(e,n){var r,o,s=t.createElement("iframe"),a=function(){clearTimeout(r);try{s.onload=null}catch(t){}s.onerror=null},l=function(){s&&(a(),setTimeout(function(){s&&s.parentNode.removeChild(s),s=null},0),i.unload_del(o))},u=function(t){s&&(l(),n(t))},h=function(t,e){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(i){}};return s.src=e,s.style.display="none",s.style.position="absolute",s.onerror=function(){u("onerror")},s.onload=function(){clearTimeout(r),r=setTimeout(function(){u("onload timeout")},2e3)},t.body.appendChild(s),r=setTimeout(function(){u("timeout")},15e3),o=i.unload_add(l),{post:h,cleanup:l,loaded:a}},i.createHtmlfile=function(t,n){var r,o,s,l=new ActiveXObject("htmlfile"),u=function(){clearTimeout(r)},h=function(){l&&(u(),i.unload_del(o),s.parentNode.removeChild(s),s=l=null,CollectGarbage())},c=function(t){l&&(h(),n(t))},d=function(t,e){try{s&&s.contentWindow&&s.contentWindow.postMessage(t,e)}catch(i){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";</script></html>'),l.close(),l.parentWindow[a]=e[a];var p=l.createElement("div");return l.body.appendChild(p),s=l.createElement("iframe"),p.appendChild(s),s.src=t,r=setTimeout(function(){c("timeout")},15e3),o=i.unload_add(h),{post:d,cleanup:h,loaded:u}};var w=function(){};w.prototype=new o(["chunk","finish"]),w.prototype._start=function(t,n,r,o){var s=this;try{s.xhr=new XMLHttpRequest}catch(a){}if(!s.xhr)try{s.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(a){}(e.ActiveXObject||e.XDomainRequest)&&(n+=(-1===n.indexOf("?")?"?":"&")+"t="+ +new Date),s.unload_ref=i.unload_add(function(){s._cleanup(!0)});try{s.xhr.open(t,n,!0)}catch(l){return s.emit("finish",0,""),void s._cleanup()}if(o&&o.no_credentials||(s.xhr.withCredentials="true"),o&&o.headers)for(var u in o.headers)s.xhr.setRequestHeader(u,o.headers[u]);s.xhr.onreadystatechange=function(){if(s.xhr){var t=s.xhr;switch(t.readyState){case 3:try{var e=t.status,i=t.responseText}catch(t){}1223===e&&(e=204),i&&i.length>0&&s.emit("chunk",e,i);break;case 4:var e=t.status;1223===e&&(e=204),s.emit("finish",e,t.responseText),s._cleanup(!1)}}},s.xhr.send(r)},w.prototype._cleanup=function(t){var e=this;if(e.xhr){if(i.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(n){}e.unload_ref=e.xhr=null}},w.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var x=i.XHRCorsObject=function(){var t=this,e=arguments;i.delay(function(){t._start.apply(t,e)})};x.prototype=new w;var T=i.XHRLocalObject=function(t,e,n){var r=this;i.delay(function(){r._start(t,e,n,{no_credentials:!0})})};T.prototype=new w;var M=i.XDRObject=function(t,e,n){var r=this;i.delay(function(){r._start(t,e,n)})};M.prototype=new o(["chunk","finish"]),M.prototype._start=function(t,e,n){var r=this,o=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var s=o.ontimeout=o.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},r.xdr=o,r.unload_ref=i.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(t,e),r.xdr.send(n)}catch(a){s()}},M.prototype._cleanup=function(t){var e=this;if(e.xdr){if(i.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(n){}e.unload_ref=e.xdr=null}},M.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},i.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:j.enabled()?3:4};var k=function(t,e,n){if(!(this instanceof k))return new k(t,e,n);var r,o=this;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},n&&i.objectExtend(o._options,n),o._base_url=i.amendUrl(t),o._server=o._options.server||i.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?r=o._options.protocols_whitelist:(r="string"==typeof e&&e.length>0?[e]:i.isArray(e)?e:null,r&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=k.CONNECTING,o._ir=z(o._base_url),o._ir.onfinish=function(t,e){o._ir=null,t?(o._options.info&&(t=i.objectExtend(t,o._options.info)),o._options.rtt&&(e=o._options.rtt),o._applyInfo(t,e,r),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};k.prototype=new n,k.version="0.3.4",k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._debug=function(){this._options.debug&&i.log.apply(i,arguments)},k.prototype._dispatchOpen=function(){var t=this;t.readyState===k.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=k.OPEN,t.dispatchEvent(new r("open"))):t._didClose(1006,"Server lost session")},k.prototype._dispatchMessage=function(t){var e=this;e.readyState===k.OPEN&&e.dispatchEvent(new r("message",{data:t}))},k.prototype._dispatchHeartbeat=function(){var t=this;t.readyState===k.OPEN&&t.dispatchEvent(new r("heartbeat",{}))},k.prototype._didClose=function(t,e,n){var o=this;if(o.readyState!==k.CONNECTING&&o.readyState!==k.OPEN&&o.readyState!==k.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var s=new r("close",{code:t,reason:e,wasClean:i.userSetCode(t)});if(!i.userSetCode(t)&&o.readyState===k.CONNECTING&&!n){if(o._try_next_protocol(s))return;s=new r("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:s})}o.readyState=k.CLOSED,i.delay(function(){o.dispatchEvent(s)})},k.prototype._didMessage=function(t){var e=this,i=t.slice(0,1);switch(i){case"o":e._dispatchOpen();break;case"a":for(var n=g.parse(t.slice(1)||"[]"),r=0;r<n.length;r++)e._dispatchMessage(n[r]);break;case"m":var n=g.parse(t.slice(1)||"null");e._dispatchMessage(n);break;case"c":var n=g.parse(t.slice(1)||"[]");e._didClose(n[0],n[1]);break;case"h":e._dispatchHeartbeat()}},k.prototype._try_next_protocol=function(e){var n=this;for(n.protocol&&(n._debug("Closed transport:",n.protocol,""+e),n.protocol=null),n._transport_tref&&(clearTimeout(n._transport_tref),n._transport_tref=null);;){var r=n.protocol=n._protocols.shift();if(!r)return!1;if(k[r]&&k[r].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return n._protocols.unshift(r),n.protocol="waiting-for-load",i.attachEvent("load",function(){n._try_next_protocol()}),!0;if(k[r]&&k[r].enabled(n._options)){var o=k[r].roundTrips||1,s=(n._options.rto||0)*o||5e3;n._transport_tref=i.delay(s,function(){n.readyState===k.CONNECTING&&n._didClose(2007,"Transport timeouted")});var a=i.random_string(8),l=n._base_url+"/"+n._server+"/"+a;return n._debug("Opening transport:",r," url:"+l," RTO:"+n._options.rto),n._transport=new k[r](n,l,n._base_url),!0}n._debug("Skipping transport:",r)}},k.prototype.close=function(t,e){var n=this;if(t&&!i.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return n.readyState!==k.CONNECTING&&n.readyState!==k.OPEN?!1:(n.readyState=k.CLOSING,n._didClose(t||1e3,e||"Normal closure"),!0)},k.prototype.send=function(t){var e=this;if(e.readyState===k.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===k.OPEN&&e._transport.doSend(i.quote(""+t)),!0},k.prototype._applyInfo=function(e,n,r){var o=this;o._options.info=e,o._options.rtt=n,o._options.rto=i.countRTO(n),o._options.info.null_origin=!t.domain,e.base_url&&(o._base_url=i.amendUrl(e.base_url,o._base_url));var s=i.probeProtocols();o._protocols=i.detectProtocols(s,r,e),i.isSameOriginScheme(o._base_url)||2!==i.isXHRCorsCapable()||(o._protocols=["jsonp-polling"])};var S=k.websocket=function(t,n){var r=this,o=n+"/websocket";o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),r.ri=t,r.url=o;var s=e.WebSocket||e.MozWebSocket;r.ws=new s(r.url),r.ws.onmessage=function(t){r.ri._didMessage(t.data)},r.unload_ref=i.unload_add(function(){r.ws.close()}),r.ws.onclose=function(){r.ri._didMessage(i.closeFrame(1006,"WebSocket connection broken"))}};S.prototype.doSend=function(t){this.ws.send("["+t+"]")},S.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),i.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},S.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},S.roundTrips=2;var L=function(){};L.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},L.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},L.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=i.delay(25,function(){e.send_stop=null,e.send_schedule()})},L.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,i){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+i):t.send_schedule_wait()}),t.send_buffer=[]}},L.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var C=function(e,n,r){var o=this;if(!("_send_form"in o)){var s=o._send_form=t.createElement("form"),a=o._send_area=t.createElement("textarea");a.name="d",s.style.display="none",s.style.position="absolute",s.method="POST",s.enctype="application/x-www-form-urlencoded",s.acceptCharset="UTF-8",s.appendChild(a),t.body.appendChild(s)}var s=o._send_form,a=o._send_area,l="a"+i.random_string(8);s.target=l,s.action=e+"/jsonp_send?i="+l;var u;try{u=t.createElement('<iframe name="'+l+'">')}catch(h){u=t.createElement("iframe"),u.name=l}u.id=l,s.appendChild(u),u.style.display="none";try{a.value=n}catch(c){i.log("Your browser is seriously broken. Go home! "+c.message)}s.submit();var d=function(){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,i.delay(500,function(){u.parentNode.removeChild(u),u=null}),a.value="",r(!0))};return u.onerror=u.onload=d,u.onreadystatechange=function(){"complete"==u.readyState&&d()},d},P=function(t){return function(e,i,n){var r=new t("POST",e+"/xhr_send",i);return r.onfinish=function(t){n(200===t||204===t,"http status "+t)},function(t){n(!1,t)}}},D=function(e,n){var r,o,s=t.createElement("script"),a=function(t){o&&(o.parentNode.removeChild(o),o=null),s&&(clearTimeout(r),s.parentNode.removeChild(s),s.onreadystatechange=s.onerror=s.onload=s.onclick=null,s=null,n(t),n=null)},l=!1,u=null;if(s.id="a"+i.random_string(8),s.src=e,s.type="text/javascript",s.charset="UTF-8",s.onerror=function(){u||(u=setTimeout(function(){l||a(i.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},s.onload=function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},s.onreadystatechange=function(){if(/loaded|closed/.test(s.readyState)){if(s&&s.htmlFor&&s.onclick){l=!0;try{s.onclick()}catch(t){}}s&&a(i.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof s.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))o=t.createElement("script"),o.text="try{var a = document.getElementById('"+s.id+"'); if(a)a.onerror();}catch(x){};",s.async=o.async=!1;else{try{s.htmlFor=s.id,s.event="onclick"}catch(h){}s.async=!0}"undefined"!=typeof s.async&&(s.async=!0),r=setTimeout(function(){a(i.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var c=t.getElementsByTagName("head")[0];return c.insertBefore(s,c.firstChild),o&&c.insertBefore(o,c.firstChild),a},E=k["jsonp-polling"]=function(t,e){i.polluteGlobalNamespace();var n=this;n.ri=t,n.trans_url=e,n.send_constructor(C),n._schedule_recv()};E.prototype=new L,E.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=A(t.trans_url+"/jsonp",D,e)},E.enabled=function(){return!0},E.need_body=!0,E.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var A=function(t,n,r){var o="a"+i.random_string(6),s=t+"?c="+escape(a+"."+o),l=0,u=function(t){switch(l){case 0:delete e[a][o],r(t);break;case 1:r(t),l=2;break;case 2:delete e[a][o]}},h=n(s,u);e[a][o]=h;var c=function(){e[a][o]&&(l=1,e[a][o](i.closeFrame(1e3,"JSONP user aborted read")))};return c},O=function(){};O.prototype=new L,O.prototype.run=function(t,e,i,n,r){var o=this;o.ri=t,o.trans_url=e,o.send_constructor(P(r)),o.poll=new Z(t,n,e+i,r)},O.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var I=k["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",re,i.XHRCorsObject)};I.prototype=new O,I.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},I.roundTrips=2,I.need_body=!0;var R=k["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",re,i.XDRObject)};R.prototype=new O,R.enabled=function(){return!!e.XDomainRequest},R.roundTrips=2;var Y=k["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",re,i.XHRCorsObject)};Y.prototype=new O,Y.enabled=I.enabled,Y.roundTrips=2;var N=k["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",re,i.XDRObject)};N.prototype=new O,N.enabled=R.enabled,N.roundTrips=2;var j=function(){};j.prototype.i_constructor=function(t,e,n){var r=this;r.ri=t,r.origin=i.getOrigin(n),r.base_url=n,r.trans_url=e;var o=n+"/iframe.html";r.ri._options.devel&&(o+="?t="+ +new Date),r.window_id=i.random_string(8),o+="#"+r.window_id,r.iframeObj=i.createIframe(o,function(t){r.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),r.onmessage_cb=i.bind(r.onmessage,r),i.attachMessage(r.onmessage_cb)},j.prototype.doCleanup=function(){var t=this;if(t.iframeObj){i.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},j.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var i=t.data.slice(0,8),n=t.data.slice(8,9),r=t.data.slice(9);if(i===e.window_id)switch(n){case"s":e.iframeObj.loaded(),e.postMessage("s",g.stringify([k.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(r)}}},j.prototype.postMessage=function(t,e){var i=this;i.iframeObj.post(i.window_id+t+(e||""),i.origin)},j.prototype.doSend=function(t){this.postMessage("m",t)},j.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var F,B=function(t,n){parent!==e?parent.postMessage(F+t+(n||""),"*"):i.log("Can't postMessage, no parent window.",t,n)},U=function(){};U.prototype._didClose=function(t,e){B("t",i.closeFrame(t,e))},U.prototype._didMessage=function(t){B("t",t)},U.prototype._doSend=function(t){this._transport.doSend(t)},U.prototype._doCleanup=function(){this._transport.doCleanup()},i.parent_origin=void 0,k.bootstrap_iframe=function(){var n;F=t.location.hash.slice(1);var r=function(t){if(t.source===parent&&("undefined"==typeof i.parent_origin&&(i.parent_origin=t.origin),t.origin===i.parent_origin)){var r=t.data.slice(0,8),o=t.data.slice(8,9),s=t.data.slice(9);if(r===F)switch(o){case"s":var a=g.parse(s),l=a[0],u=a[1],h=a[2],c=a[3];if(l!==k.version&&i.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe: "'+k.version+'".'),!i.flatUrl(h)||!i.flatUrl(c))return void i.log("Only basic urls are supported in SockJS");if(!i.isSameOriginUrl(h)||!i.isSameOriginUrl(c))return void i.log("Can't connect to different domain from within an iframe. ("+g.stringify([e.location.href,h,c])+")");n=new U,n._transport=new U[u](n,h,c);break;case"m":n._doSend(s);break;case"c":n&&n._doCleanup(),n=null}}};i.attachMessage(r),B("s")};var H=function(t,e){var n=this;i.delay(function(){n.doXhr(t,e)})};H.prototype=new o(["finish"]),H.prototype.doXhr=function(t,e){var n=this,r=(new Date).getTime(),o=new e("GET",t+"/info?cb="+i.random_string(10)),s=i.delay(8e3,function(){o.ontimeout()});o.onfinish=function(t,e){if(clearTimeout(s),s=null,200===t){var i=(new Date).getTime()-r,o=g.parse(e);"object"!=typeof o&&(o={}),n.emit("finish",o,i)}else n.emit("finish")},o.ontimeout=function(){o.close(),n.emit("finish")}};var G=function(e){var n=this,r=function(){var t=new j;t.protocol="w-iframe-info-receiver";var i=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var i=g.parse(e.substr(1)),r=i[0],o=i[1];n.emit("finish",r,o)}else n.emit("finish");t.doCleanup(),t=null},r={_options:{},_didClose:i,_didMessage:i};t.i_constructor(r,e,e)};t.body?r():i.attachEvent("load",r)};G.prototype=new o(["finish"]);var W=function(){var t=this;i.delay(function(){t.emit("finish",{},2e3)})};W.prototype=new o(["finish"]);var z=function(t){if(i.isSameOriginUrl(t))return new H(t,i.XHRLocalObject);switch(i.isXHRCorsCapable()){case 1:return new H(t,i.XHRLocalObject);case 2:return i.isSameOriginScheme(t)?new H(t,i.XDRObject):new W;case 3:return new G(t);default:return new W}},V=U["w-iframe-info-receiver"]=function(t,e,n){var r=new H(n,i.XHRLocalObject);r.onfinish=function(e,i){t._didMessage("m"+g.stringify([e,i])),t._didClose()}};V.prototype.doCleanup=function(){};var $=k["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};$.prototype=new j,$.enabled=function(){return"EventSource"in e&&j.enabled()},$.need_body=!0,$.roundTrips=3;var X=U["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",te,i.XHRLocalObject)};X.prototype=new O;var q=k["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};q.prototype=new j,q.enabled=function(){return e.XMLHttpRequest&&j.enabled()},q.need_body=!0,q.roundTrips=3;var K=U["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",re,i.XHRLocalObject)};K.prototype=new O;var J=k["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};J.prototype=new j,J.enabled=function(){return j.enabled()},J.need_body=!0,J.roundTrips=3;var Q=U["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",ne,i.XHRLocalObject)};Q.prototype=new O;var Z=function(t,e,i,n){var r=this;r.ri=t,r.Receiver=e,r.recv_url=i,r.AjaxObject=n,r._scheduleRecv()};Z.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),i=0;e.onmessage=function(e){i+=1,t.ri._didMessage(e.data)},e.onclose=function(i){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===i.reason?t.ri._didClose(1006,"Polling error ("+i.reason+")"):t._scheduleRecv())}},Z.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var te=function(t){var e=this,n=new EventSource(t);n.onmessage=function(t){e.dispatchEvent(new r("message",{data:unescape(t.data)}))},e.es_close=n.onerror=function(t,o){var s=o?"user":2!==n.readyState?"network":"permanent";e.es_close=n.onmessage=n.onerror=null,n.close(),n=null,i.delay(200,function(){e.dispatchEvent(new r("close",{reason:s}))})}};te.prototype=new n,te.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var ee,ie=function(){if(void 0===ee)if("ActiveXObject"in e)try{ee=!!new ActiveXObject("htmlfile")}catch(t){}else ee=!1;return ee},ne=function(t){var n=this;i.polluteGlobalNamespace(),n.id="a"+i.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(a+"."+n.id);var o,s=ie()?i.createHtmlfile:i.createIframe;e[a][n.id]={start:function(){o.loaded()},message:function(t){n.dispatchEvent(new r("message",{data:t}))},stop:function(){n.iframe_close({},"network")}},n.iframe_close=function(t,i){o.cleanup(),n.iframe_close=o=null,delete e[a][n.id],n.dispatchEvent(new r("close",{reason:i}))},o=s(t,function(){n.iframe_close({},"permanent")})};ne.prototype=new n,ne.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var re=function(t,e){var i=this,n=0;i.xo=new e("POST",t,null),i.xo.onchunk=function(t,e){if(200===t)for(;;){var o=e.slice(n),s=o.indexOf("\n");if(-1===s)break;n+=s+1;var a=o.slice(0,s);i.dispatchEvent(new r("message",{data:a}))}},i.xo.onfinish=function(t,e){i.xo.onchunk(t,e),i.xo=null;var n=200===t?"network":"permanent";i.dispatchEvent(new r("close",{reason:n}))}};return re.prototype=new n,re.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new r("close",{reason:"user"})),t.xo=null)},k.getUtils=function(){return i},k.getIframeTransport=function(){return j},k}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return i})}.call(this),function(){e.ClientStream=function(t,e){var i=this;i.options=_.extend({retry:!0},e),i._initCommon(),i.HEARTBEAT_TIMEOUT=1e5,i.rawUrl=t,i.socket=null,i.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",_.bind(i._online,i),!1),i._launchConnection()},_.extend(e.ClientStream.prototype,{send:function(t){var e=this;e.currentStatus.connected&&e.socket.send(t)},_changeUrl:function(t){var e=this;e.rawUrl=t},_connected:function(){var t=this;t.connectionTimer&&(clearTimeout(t.connectionTimer),t.connectionTimer=null),t.currentStatus.connected||(t.currentStatus.status="connected",t.currentStatus.connected=!0,t.currentStatus.retryCount=0,t.statusChanged(),_.each(t.eventCallbacks.reset,function(t){t()}))},_cleanup:function(){var t=this;t._clearConnectionAndHeartbeatTimers(),t.socket&&(t.socket.onmessage=t.socket.onclose=t.socket.onerror=t.socket.onheartbeat=function(){},t.socket.close(),t.socket=null),_.each(t.eventCallbacks.disconnect,function(t){t()})},_clearConnectionAndHeartbeatTimers:function(){var t=this;t.connectionTimer&&(clearTimeout(t.connectionTimer),t.connectionTimer=null),t.heartbeatTimer&&(clearTimeout(t.heartbeatTimer),t.heartbeatTimer=null)},_heartbeat_timeout:function(){var t=this;p._debug("Connection timeout. No sockjs heartbeat received."),t._lostConnection()},_heartbeat_received:function(){var t=this;t._forcedToDisconnect||(t.heartbeatTimer&&clearTimeout(t.heartbeatTimer),t.heartbeatTimer=setTimeout(_.bind(t._heartbeat_timeout,t),t.HEARTBEAT_TIMEOUT))
},_sockjsProtocolsWhitelist:function(){var t=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],e=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return e||(t=["websocket"].concat(t)),t},_launchConnection:function(){var t=this;t._cleanup();var e=_.extend({protocols_whitelist:t._sockjsProtocolsWhitelist()},t.options._sockjsOptions);t.socket=new i(n(t.rawUrl),void 0,e),t.socket.onopen=function(){t._connected()},t.socket.onmessage=function(e){t._heartbeat_received(),t.currentStatus.connected&&_.each(t.eventCallbacks.message,function(t){t(e.data)})},t.socket.onclose=function(){t._lostConnection()},t.socket.onerror=function(){p._debug("stream error",_.toArray(arguments),(new Date).toDateString())},t.socket.onheartbeat=function(){t._heartbeat_received()},t.connectionTimer&&clearTimeout(t.connectionTimer),t.connectionTimer=setTimeout(_.bind(t._lostConnection,t),t.CONNECT_TIMEOUT)}})}.call(this),function(){var t=function(t,e){return t.length>=e.length&&t.substring(0,e.length)===e},i=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e},o=function(e,n,r){n||(n="http");var o,s=e.match(/^ddp(i?)\+sockjs:\/\//),a=e.match(/^http(s?):\/\//);if(s){var l=e.substr(s[0].length);o="i"===s[1]?n:n+"s";var u=l.indexOf("/"),h=-1===u?l:l.substr(0,u),c=-1===u?"":l.substr(u);return h=h.replace(/\*/g,function(){return Math.floor(10*f.fraction())}),o+"://"+h+c}if(a){o=a[1]?n+"s":n;var d=e.substr(a[0].length);e=o+"://"+d}return-1!==e.indexOf("://")||t(e,"/")||(e=n+"://"+e),e=p._relativeToSiteRootUrl(e),i(e,"/")?e+r:e+"/"+r};n=function(t){return o(t,"http","sockjs")},r=function(t){var e=o(t,"ws","websocket");return e},e.toSockjsUrl=n,_.extend(e.ClientStream.prototype,{on:function(t,e){var i=this;if("message"!==t&&"reset"!==t&&"disconnect"!==t)throw new Error("unknown event type: "+t);i.eventCallbacks[t]||(i.eventCallbacks[t]=[]),i.eventCallbacks[t].push(e)},_initCommon:function(){var t=this;t.CONNECT_TIMEOUT=1e4,t.eventCallbacks={},t._forcedToDisconnect=!1,t.currentStatus={status:"connecting",connected:!1,retryCount:0},t.statusListeners="undefined"!=typeof y&&new y.Dependency,t.statusChanged=function(){t.statusListeners&&t.statusListeners.changed()},t._retry=new v,t.connectionTimer=null},reconnect:function(t){var e=this;return t=t||{},t.url&&e._changeUrl(t.url),t._sockjsOptions&&(e.options._sockjsOptions=t._sockjsOptions),e.currentStatus.connected?void((t._force||t.url)&&e._lostConnection()):("connecting"===e.currentStatus.status&&e._lostConnection(),e._retry.clear(),e.currentStatus.retryCount-=1,void e._retryNow())},disconnect:function(t){var e=this;t=t||{},e._forcedToDisconnect||(t._permanent&&(e._forcedToDisconnect=!0),e._cleanup(),e._retry.clear(),e.currentStatus={status:t._permanent?"failed":"offline",connected:!1,retryCount:0},t._permanent&&t._error&&(e.currentStatus.reason=t._error),e.statusChanged())},_lostConnection:function(){var t=this;t._cleanup(),t._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var t=this,e=0;t.options.retry&&(e=t._retry.retryLater(t.currentStatus.retryCount,_.bind(t._retryNow,t))),t.currentStatus.status="waiting",t.currentStatus.connected=!1,t.currentStatus.retryTime=(new Date).getTime()+e,t.statusChanged()},_retryNow:function(){var t=this;t._forcedToDisconnect||(t.currentStatus.retryCount+=1,t.currentStatus.status="connecting",t.currentStatus.connected=!1,delete t.currentStatus.retryTime,t.statusChanged(),t._launchConnection())},status:function(){var t=this;return t.statusListeners&&t.statusListeners.depend(),t.currentStatus}})}.call(this),function(){o=function(t){var e=this;e.heartbeatInterval=t.heartbeatInterval,e.heartbeatTimeout=t.heartbeatTimeout,e._sendPing=t.sendPing,e._onTimeout=t.onTimeout,e._heartbeatIntervalHandle=null,e._heartbeatTimeoutHandle=null},_.extend(o.prototype,{stop:function(){var t=this;t._clearHeartbeatIntervalTimer(),t._clearHeartbeatTimeoutTimer()},start:function(){var t=this;t.stop(),t._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle=p.setTimeout(_.bind(t._heartbeatIntervalFired,t),t.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle=p.setTimeout(_.bind(t._heartbeatTimeoutFired,t),t.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle&&(p.clearTimeout(t._heartbeatIntervalHandle),t._heartbeatIntervalHandle=null)},_clearHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle&&(p.clearTimeout(t._heartbeatTimeoutHandle),t._heartbeatTimeoutHandle=null)},_heartbeatIntervalFired:function(){var t=this;t._heartbeatIntervalHandle=null,t._sendPing(),t._startHeartbeatTimeoutTimer()},_heartbeatTimeoutFired:function(){var t=this;t._heartbeatTimeoutHandle=null,t._onTimeout()},pingReceived:function(){var t=this;t._heartbeatIntervalHandle&&(t._clearHeartbeatIntervalTimer(),t._startHeartbeatIntervalTimer())},pongReceived:function(){var t=this;t._heartbeatTimeoutHandle&&(t._clearHeartbeatTimeoutTimer(),t._startHeartbeatIntervalTimer())}})}.call(this),function(){t={},s=["pre2","pre1"],e.SUPPORTED_DDP_VERSIONS=s,a=function(t){this.isSimulation=t.isSimulation,this._unblock=t.unblock||function(){},this._calledUnblock=!1,this.userId=t.userId,this._setUserId=t.setUserId||function(){},this.connection=t.connection,this.randomSeed=t.randomSeed,this.randomStream=null},_.extend(a.prototype,{unblock:function(){var t=this;t._calledUnblock=!0,t._unblock()},setUserId:function(t){var e=this;if(e._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");e.userId=t,e._setUserId(t)}}),l=function(t){try{var e=g.parse(t)}catch(i){return p._debug("Discarding message with invalid JSON",t),null}return null===e||"object"!=typeof e?(p._debug("Discarding non-object DDP message",t),null):(_.has(e,"cleared")&&(_.has(e,"fields")||(e.fields={}),_.each(e.cleared,function(t){e.fields[t]=void 0}),delete e.cleared),_.each(["fields","params","result"],function(t){_.has(e,t)&&(e[t]=m._adjustTypesFromJSONValue(e[t]))}),e)},u=function(t){var e=m.clone(t);if(_.has(t,"fields")){var i=[];_.each(t.fields,function(t,n){void 0===t&&(i.push(n),delete e.fields[n])}),_.isEmpty(i)||(e.cleared=i),_.isEmpty(e.fields)&&delete e.fields}if(_.each(["fields","params","result"],function(t){_.has(e,t)&&(e[t]=m._adjustTypesToJSONValue(e[t]))}),t.id&&"string"!=typeof t.id)throw new Error("Message id is not a string");return g.stringify(e)},t._CurrentInvocation=new p.EnvironmentVariable}.call(this),function(){function e(){return f.hexString(20)}h=function(t){this.seed=[].concat(t.seed||e()),this.sequences={}},h.get=function(t,e){if(e||(e="default"),!t)return f;var i=t.randomStream;return i||(t.randomStream=i=new h({seed:t.randomSeed})),i._sequence(e)},t.randomStream=function(e){var i=t._CurrentInvocation.get();return h.get(i,e)},c=function(t,e){var i=h.get(t,"/rpc/"+e);return i.hexString(20)},_.extend(h.prototype,{_sequence:function(t){var e=this,i=e.sequences[t]||null;if(null===i){for(var n=e.seed.concat(t),r=0;r<n.length;r++)_.isFunction(n[r])&&(n[r]=n[r]());e.sequences[t]=i=f.createWithSeeds.apply(null,n)}return i}})}.call(this),function(){if(p.isServer)var i=Npm.require("path"),n=(Npm.require("fibers"),Npm.require(i.join("fibers","future")));var r=function(t,i){var n=this;i=_.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(t){p._debug(t)},heartbeatInterval:35e3,heartbeatTimeout:15e3,reloadWithOutstanding:!1,supportedDDPVersions:s,retry:!0,respondToPings:!0},i),n.onReconnect=null,n._stream="object"==typeof t?t:new e.ClientStream(t,{retry:i.retry,headers:i.headers,_sockjsOptions:i._sockjsOptions,_dontPrintErrors:i._dontPrintErrors}),n._lastSessionId=null,n._versionSuggestion=null,n._version=null,n._stores={},n._methodHandlers={},n._nextMethodId=1,n._supportedDDPVersions=i.supportedDDPVersions,n._heartbeatInterval=i.heartbeatInterval,n._heartbeatTimeout=i.heartbeatTimeout,n._methodInvokers={},n._outstandingMethodBlocks=[],n._documentsWrittenByStub={},n._serverDocuments={},n._afterUpdateCallbacks=[],n._messagesBufferedUntilQuiescence=[],n._methodsBlockingQuiescence={},n._subsBeingRevived={},n._resetStores=!1,n._updatesForUnknownStores={},n._retryMigrate=null,n._subscriptions={},n._userId=null,n._userIdDeps=new y.Dependency,p.isClient&&Package.reload&&!i.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(t){if(n._readyToMigrate())return[!0];if(n._retryMigrate)throw new Error("Two migrations in progress?");return n._retryMigrate=t,!1});var r=function(t){try{var e=l(t)}catch(r){return void p._debug("Exception while parsing DDP",r)}if(null===e||!e.msg)return void(e&&e.server_id||p._debug("discarding invalid livedata message",e));if("connected"===e.msg)n._version=n._versionSuggestion,n._livedata_connected(e),i.onConnected();else if("failed"==e.msg)if(_.contains(n._supportedDDPVersions,e.version))n._versionSuggestion=e.version,n._stream.reconnect({_force:!0});else{var o="DDP version negotiation failed; server requested version "+e.version;n._stream.disconnect({_permanent:!0,_error:o}),i.onDDPVersionNegotiationFailure(o)}else"ping"===e.msg?(i.respondToPings&&n._send({msg:"pong",id:e.id}),n._heartbeat&&n._heartbeat.pingReceived()):"pong"===e.msg?n._heartbeat&&n._heartbeat.pongReceived():_.include(["added","changed","removed","ready","updated"],e.msg)?n._livedata_data(e):"nosub"===e.msg?n._livedata_nosub(e):"result"===e.msg?n._livedata_result(e):"error"===e.msg?n._livedata_error(e):p._debug("discarding unknown livedata message type",e)},o=function(){var t={msg:"connect"};n._lastSessionId&&(t.session=n._lastSessionId),t.version=n._versionSuggestion||n._supportedDDPVersions[0],n._versionSuggestion=t.version,t.support=n._supportedDDPVersions,n._send(t),!_.isEmpty(n._outstandingMethodBlocks)&&_.isEmpty(n._outstandingMethodBlocks[0].methods)&&n._outstandingMethodBlocks.shift(),_.each(n._methodInvokers,function(t){t.sentMessage=!1}),n.onReconnect?n._callOnReconnectAndSendAppropriateOutstandingMethods():n._sendOutstandingMethods(),_.each(n._subscriptions,function(t,e){n._send({msg:"sub",id:e,name:t.name,params:t.params})})},a=function(){n._heartbeat&&(n._heartbeat.stop(),n._heartbeat=null)};p.isServer?(n._stream.on("message",p.bindEnvironment(r,p._debug)),n._stream.on("reset",p.bindEnvironment(o,p._debug)),n._stream.on("disconnect",p.bindEnvironment(a,p._debug))):(n._stream.on("message",r),n._stream.on("reset",o),n._stream.on("disconnect",a))},h=function(t){var e=this;e.methodId=t.methodId,e.sentMessage=!1,e._callback=t.callback,e._connection=t.connection,e._message=t.message,e._onResultReceived=t.onResultReceived||function(){},e._wait=t.wait,e._methodResult=null,e._dataVisible=!1,e._connection._methodInvokers[e.methodId]=e};_.extend(h.prototype,{sendMessage:function(){var t=this;if(t.gotResult())throw new Error("sendingMethod is called on method with result");t._dataVisible=!1,t.sentMessage=!0,t._wait&&(t._connection._methodsBlockingQuiescence[t.methodId]=!0),t._connection._send(t._message)},_maybeInvokeCallback:function(){var t=this;t._methodResult&&t._dataVisible&&(t._callback(t._methodResult[0],t._methodResult[1]),delete t._connection._methodInvokers[t.methodId],t._connection._outstandingMethodFinished())},receiveResult:function(t,e){var i=this;if(i.gotResult())throw new Error("Methods should only receive results once");i._methodResult=[t,e],i._onResultReceived(t,e),i._maybeInvokeCallback()},dataVisible:function(){var t=this;t._dataVisible=!0,t._maybeInvokeCallback()},gotResult:function(){var t=this;return!!t._methodResult}}),_.extend(r.prototype,{registerStore:function(t,e){var i=this;if(t in i._stores)return!1;var n={};_.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(t){n[t]=function(){return e[t]?e[t].apply(e,arguments):void 0}}),i._stores[t]=n;var r=i._updatesForUnknownStores[t];return r&&(n.beginUpdate(r.length,!1),_.each(r,function(t){n.update(t)}),n.endUpdate(),delete i._updatesForUnknownStores[t]),!0},subscribe:function(t){var e=this,i=Array.prototype.slice.call(arguments,1),n={};if(i.length){var r=i[i.length-1];"function"==typeof r?n.onReady=i.pop():!r||"function"!=typeof r.onReady&&"function"!=typeof r.onError||(n=i.pop())}var o,s=_.find(e._subscriptions,function(e){return e.inactive&&e.name===t&&m.equals(e.params,i)});s?(o=s.id,s.inactive=!1,n.onReady&&(s.ready||(s.readyCallback=n.onReady)),n.onError&&(s.errorCallback=n.onError)):(o=f.id(),e._subscriptions[o]={id:o,name:t,params:m.clone(i),inactive:!1,ready:!1,readyDeps:new y.Dependency,readyCallback:n.onReady,errorCallback:n.onError,connection:e,remove:function(){delete this.connection._subscriptions[this.id],this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:o}),this.remove()}},e._send({msg:"sub",id:o,name:t,params:i}));var a={stop:function(){_.has(e._subscriptions,o)&&e._subscriptions[o].stop()},ready:function(){if(!_.has(e._subscriptions,o))return!1;var t=e._subscriptions[o];return t.readyDeps.depend(),t.ready}};return y.active&&y.onInvalidate(function(){_.has(e._subscriptions,o)&&(e._subscriptions[o].inactive=!0),y.afterFlush(function(){_.has(e._subscriptions,o)&&e._subscriptions[o].inactive&&a.stop()})}),a},_subscribeAndWait:function(t,e,i){var r,o=this,s=new n,a=!1;return e=e||[],e.push({onReady:function(){a=!0,s["return"]()},onError:function(t){a?i&&i.onLateError&&i.onLateError(t):s["throw"](t)}}),r=o.subscribe.apply(o,[t].concat(e)),s.wait(),r},methods:function(t){var e=this;_.each(t,function(t,i){if(e._methodHandlers[i])throw new Error("A method named '"+i+"' is already defined");e._methodHandlers[i]=t})},call:function(t){var e=Array.prototype.slice.call(arguments,1);if(e.length&&"function"==typeof e[e.length-1])var i=e.pop();return this.apply(t,e,i)},apply:function(e,i,r,o){var s=this;o||"function"!=typeof r||(o=r,r={}),r=r||{},o&&(o=p.bindEnvironment(o,"delivering result of invoking '"+e+"'")),i=m.clone(i);var l=function(){var t;return function(){return void 0===t&&(t=""+s._nextMethodId++),t}}(),u=t._CurrentInvocation.get(),d=u&&u.isSimulation,f=null,g=function(){return null===f&&(f=c(u,e)),f},y=s._methodHandlers[e];if(y){var v=function(t){s.setUserId(t)},b=new a({isSimulation:!0,userId:s.userId(),setUserId:v,randomSeed:function(){return g()}});d||s._saveOriginals();try{var w=t._CurrentInvocation.withValue(b,function(){return p.isServer?p._noYieldsAllowed(function(){return y.apply(b,m.clone(i))}):y.apply(b,m.clone(i))})}catch(x){var T=x}d||s._retrieveAndStoreOriginals(l())}if(d){if(o)return void o(T,w);if(T)throw T;return w}if(T&&!T.expected&&p._debug("Exception while simulating the effect of invoking '"+e+"'",T,T.stack),!o)if(p.isClient)o=function(t){t&&p._debug("Error invoking Method '"+e+"':",t.message)};else{var M=new n;o=M.resolver()}var k={msg:"method",method:e,params:i,id:l()};null!==f&&(k.randomSeed=f);var S=new h({methodId:l(),callback:o,connection:s,onResultReceived:r.onResultReceived,wait:!!r.wait,message:k});return r.wait?s._outstandingMethodBlocks.push({wait:!0,methods:[S]}):((_.isEmpty(s._outstandingMethodBlocks)||_.last(s._outstandingMethodBlocks).wait)&&s._outstandingMethodBlocks.push({wait:!1,methods:[]}),_.last(s._outstandingMethodBlocks).methods.push(S)),1===s._outstandingMethodBlocks.length&&S.sendMessage(),M?M.wait():r.returnStubValue?w:void 0},_saveOriginals:function(){var t=this;_.each(t._stores,function(t){t.saveOriginals()})},_retrieveAndStoreOriginals:function(t){var e=this;if(e._documentsWrittenByStub[t])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var i=[];_.each(e._stores,function(n,r){var o=n.retrieveOriginals();o&&o.forEach(function(n,o){i.push({collection:r,id:o}),_.has(e._serverDocuments,r)||(e._serverDocuments[r]=new b._IdMap);var s=e._serverDocuments[r].setDefault(o,{});s.writtenByStubs?s.writtenByStubs[t]=!0:(s.document=n,s.flushCallbacks=[],s.writtenByStubs={},s.writtenByStubs[t]=!0)})}),_.isEmpty(i)||(e._documentsWrittenByStub[t]=i)},_unsubscribeAll:function(){var t=this;_.each(_.clone(t._subscriptions),function(e,i){"meteor_autoupdate_clientVersions"!==e.name&&t._subscriptions[i].stop()})},_send:function(t){var e=this;e._stream.send(u(t))},_lostConnection:function(){var t=this;t._stream._lostConnection()},status:function(){var t=this;return t._stream.status.apply(t._stream,arguments)},reconnect:function(){var t=this;return t._stream.reconnect.apply(t._stream,arguments)},disconnect:function(){var t=this;return t._stream.disconnect.apply(t._stream,arguments)},close:function(){var t=this;return t._stream.disconnect({_permanent:!0})},userId:function(){var t=this;return t._userIdDeps&&t._userIdDeps.depend(),t._userId},setUserId:function(t){var e=this;e._userId!==t&&(e._userId=t,e._userIdDeps&&e._userIdDeps.changed())},_waitingForQuiescence:function(){var t=this;return!_.isEmpty(t._subsBeingRevived)||!_.isEmpty(t._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var t=this;return _.any(_.pluck(t._methodInvokers,"sentMessage"))},_livedata_connected:function(t){var e=this;if("pre1"!==e._version&&0!==e._heartbeatInterval&&(e._heartbeat=new o({heartbeatInterval:e._heartbeatInterval,heartbeatTimeout:e._heartbeatTimeout,onTimeout:function(){p.isClient&&!e._stream._isStub&&p._debug("Connection timeout. No DDP heartbeat received."),e._lostConnection()},sendPing:function(){e._send({msg:"ping"})}}),e._heartbeat.start()),e._lastSessionId&&(e._resetStores=!0),"string"==typeof t.session){var i=e._lastSessionId===t.session;e._lastSessionId=t.session}i||(e._updatesForUnknownStores={},e._resetStores&&(e._documentsWrittenByStub={},e._serverDocuments={}),e._afterUpdateCallbacks=[],e._subsBeingRevived={},_.each(e._subscriptions,function(t,i){t.ready&&(e._subsBeingRevived[i]=!0)}),e._methodsBlockingQuiescence={},e._resetStores&&_.each(e._methodInvokers,function(t){t.gotResult()?e._afterUpdateCallbacks.push(_.bind(t.dataVisible,t)):t.sentMessage&&(e._methodsBlockingQuiescence[t.methodId]=!0)}),e._messagesBufferedUntilQuiescence=[],e._waitingForQuiescence()||(e._resetStores&&(_.each(e._stores,function(t){t.beginUpdate(0,!0),t.endUpdate()}),e._resetStores=!1),e._runAfterUpdateCallbacks()))},_processOneDataMessage:function(t,e){var i=this;i["_process_"+t.msg](t,e)},_livedata_data:function(t){var e=this,i={};if(e._waitingForQuiescence()){if(e._messagesBufferedUntilQuiescence.push(t),"nosub"===t.msg&&delete e._subsBeingRevived[t.id],_.each(t.subs||[],function(t){delete e._subsBeingRevived[t]}),_.each(t.methods||[],function(t){delete e._methodsBlockingQuiescence[t]}),e._waitingForQuiescence())return;_.each(e._messagesBufferedUntilQuiescence,function(t){e._processOneDataMessage(t,i)}),e._messagesBufferedUntilQuiescence=[]}else e._processOneDataMessage(t,i);(e._resetStores||!_.isEmpty(i))&&(_.each(e._stores,function(t,n){t.beginUpdate(_.has(i,n)?i[n].length:0,e._resetStores)}),e._resetStores=!1,_.each(i,function(t,i){var n=e._stores[i];n?_.each(t,function(t){n.update(t)}):(_.has(e._updatesForUnknownStores,i)||(e._updatesForUnknownStores[i]=[]),Array.prototype.push.apply(e._updatesForUnknownStores[i],t))}),_.each(e._stores,function(t){t.endUpdate()})),e._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var t=this,e=t._afterUpdateCallbacks;t._afterUpdateCallbacks=[],_.each(e,function(t){t()})},_pushUpdate:function(t,e,i){_.has(t,e)||(t[e]=[]),t[e].push(i)},_getServerDoc:function(t,e){var i=this;if(!_.has(i._serverDocuments,t))return null;var n=i._serverDocuments[t];return n.get(e)||null},_process_added:function(t,e){var i=this,n=b._idParse(t.id),r=i._getServerDoc(t.collection,n);if(r){if(void 0!==r.document)throw new Error("Server sent add for existing id: "+t.id);r.document=t.fields||{},r.document._id=n}else i._pushUpdate(e,t.collection,t)},_process_changed:function(t,e){var i=this,n=i._getServerDoc(t.collection,b._idParse(t.id));if(n){if(void 0===n.document)throw new Error("Server sent changed for nonexisting id: "+t.id);b._applyChanges(n.document,t.fields)}else i._pushUpdate(e,t.collection,t)},_process_removed:function(t,e){var i=this,n=i._getServerDoc(t.collection,b._idParse(t.id));if(n){if(void 0===n.document)throw new Error("Server sent removed for nonexisting id:"+t.id);n.document=void 0}else i._pushUpdate(e,t.collection,{msg:"removed",collection:t.collection,id:t.id})},_process_updated:function(t,e){var i=this;_.each(t.methods,function(t){_.each(i._documentsWrittenByStub[t],function(n){var r=i._getServerDoc(n.collection,n.id);if(!r)throw new Error("Lost serverDoc for "+g.stringify(n));if(!r.writtenByStubs[t])throw new Error("Doc "+g.stringify(n)+" not written by  method "+t);delete r.writtenByStubs[t],_.isEmpty(r.writtenByStubs)&&(i._pushUpdate(e,n.collection,{msg:"replace",id:b._idStringify(n.id),replace:r.document}),_.each(r.flushCallbacks,function(t){t()}),i._serverDocuments[n.collection].remove(n.id))}),delete i._documentsWrittenByStub[t];var n=i._methodInvokers[t];if(!n)throw new Error("No callback invoker for method "+t);i._runWhenAllServerDocsAreFlushed(_.bind(n.dataVisible,n))})},_process_ready:function(t){var e=this;_.each(t.subs,function(t){e._runWhenAllServerDocsAreFlushed(function(){var i=e._subscriptions[t];i&&(i.ready||(i.readyCallback&&i.readyCallback(),i.ready=!0,i.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(t){var e=this,i=function(){e._afterUpdateCallbacks.push(t)},n=0,r=function(){--n,0===n&&i()};_.each(e._serverDocuments,function(t){t.forEach(function(t){var i=_.any(t.writtenByStubs,function(t,i){var n=e._methodInvokers[i];return n&&n.sentMessage});i&&(++n,t.flushCallbacks.push(r))})}),0===n&&i()},_livedata_nosub:function(t){var e=this;if(e._livedata_data(t),_.has(e._subscriptions,t.id)){var i=e._subscriptions[t.id].errorCallback;e._subscriptions[t.id].remove(),i&&t.error&&i(new p.Error(t.error.error,t.error.reason,t.error.details))}},_process_nosub:function(){},_livedata_result:function(t){var e=this;if(_.isEmpty(e._outstandingMethodBlocks))return void p._debug("Received method result but no methods outstanding");for(var i,n=e._outstandingMethodBlocks[0].methods,r=0;r<n.length&&(i=n[r],i.methodId!==t.id);r++);return i?(n.splice(r,1),void(_.has(t,"error")?i.receiveResult(new p.Error(t.error.error,t.error.reason,t.error.details)):i.receiveResult(void 0,t.result))):void p._debug("Can't match method response to original method call",t)},_outstandingMethodFinished:function(){var t=this;if(!t._anyMethodsAreOutstanding()){if(!_.isEmpty(t._outstandingMethodBlocks)){var e=t._outstandingMethodBlocks.shift();if(!_.isEmpty(e.methods))throw new Error("No methods outstanding but nonempty block: "+g.stringify(e));_.isEmpty(t._outstandingMethodBlocks)||t._sendOutstandingMethods()}t._maybeMigrate()}},_sendOutstandingMethods:function(){var t=this;_.isEmpty(t._outstandingMethodBlocks)||_.each(t._outstandingMethodBlocks[0].methods,function(t){t.sendMessage()})},_livedata_error:function(t){p._debug("Received error from server: ",t.reason),t.offendingMessage&&p._debug("For: ",t.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var t=this,e=t._outstandingMethodBlocks;if(t._outstandingMethodBlocks=[],t.onReconnect(),!_.isEmpty(e)){if(_.isEmpty(t._outstandingMethodBlocks))return t._outstandingMethodBlocks=e,void t._sendOutstandingMethods();_.last(t._outstandingMethodBlocks).wait||e[0].wait||(_.each(e[0].methods,function(e){_.last(t._outstandingMethodBlocks).methods.push(e),1===t._outstandingMethodBlocks.length&&e.sendMessage()}),e.shift()),_.each(e,function(e){t._outstandingMethodBlocks.push(e)})}},_readyToMigrate:function(){var t=this;return _.isEmpty(t._methodInvokers)},_maybeMigrate:function(){var t=this;t._retryMigrate&&t._readyToMigrate()&&(t._retryMigrate(),t._retryMigrate=null)}}),e.Connection=r,t.connect=function(t,e){var i=new r(t,e);return d.push(i),i},d=[],t._allSubscriptionsReady=function(){return _.all(d,function(t){return _.all(t._subscriptions,function(t){return t.ready})})}}.call(this),function(){if(p.refresh=function(){},p.isClient){var e="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(e=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var i=new v,n=function(t){if(p._debug(t),Package.reload){var e=Package.reload.Reload._migrationData("livedata")||{},n=e.DDPVersionNegotiationFailures||0;++n,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:n}]}),i.retryLater(n,function(){Package.reload.Reload._reload()})}};p.connection=t.connect(e,{onDDPVersionNegotiationFailure:n}),_.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(t){p[t]=_.bind(p.connection[t],p.connection)})}else p.connection=null;p.default_connection=p.connection,p.connect=t.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:t,LivedataTest:e}}(),function(){{var t;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:t}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){var t,e=Package.meteor.Meteor,i=Package.random.Random,n=Package.ejson.EJSON,r=(Package.json.JSON,Package.underscore._),o=Package.minimongo.LocalCollection,s=(Package.minimongo.Minimongo,Package.logging.Log,Package.livedata.DDP),a=(Package.deps.Deps,Package.check.check),l=Package.check.Match;(function(){t=function(){var t=this;t.noConnCollections={}};var e=function(t,e){return t in e||(e[t]=new o(t)),e[t]};r.extend(t.prototype,{open:function(t,i){var n=this;return t?i?(i._mongo_livedata_collections||(i._mongo_livedata_collections={}),e(t,i._mongo_livedata_collections)):e(t,n.noConnCollections):new o}}),t=new t}).call(this),function(){e.Collection=function(n,a){var l=this;if(!(l instanceof e.Collection))throw new Error('use "new" to construct a Meteor.Collection');if(n||null===n||(e._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),n=null),null!==n&&"string"!=typeof n)throw new Error("First argument to new Meteor.Collection must be a string or null");switch(a&&a.methods&&(a={connection:a}),a&&a.manager&&!a.connection&&(a.connection=a.manager),a=r.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},a),a.idGeneration){case"MONGO":l._makeNewID=function(){var t=n?s.randomStream("/collection/"+n):i;return new e.Collection.ObjectID(t.hexString(24))};break;case"STRING":default:l._makeNewID=function(){var t=n?s.randomStream("/collection/"+n):i;return t.id()}}if(l._transform=o.wrapTransform(a.transform),l._connection=n&&null!==a.connection?a.connection?a.connection:e.isClient?e.connection:e.server:null,a._driver||(a._driver=n&&l._connection===e.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():t),l._collection=a._driver.open(n,l._connection),l._name=n,l._connection&&l._connection.registerStore){var u=l._connection.registerStore(n,{beginUpdate:function(t,e){(t>1||e)&&l._collection.pauseObservers(),e&&l._collection.remove({})},update:function(t){var e=o._idParse(t.id),i=l._collection.findOne(e);if("replace"===t.msg){var n=t.replace;return void(n?i?l._collection.update(e,n):l._collection.insert(n):i&&l._collection.remove(e))}if("added"===t.msg){if(i)throw new Error("Expected not to find a document already present for an add");l._collection.insert(r.extend({_id:e},t.fields))}else if("removed"===t.msg){if(!i)throw new Error("Expected to find a document already present for removed");l._collection.remove(e)}else{if("changed"!==t.msg)throw new Error("I don't know how to deal with this message");if(!i)throw new Error("Expected to find a document to change");if(!r.isEmpty(t.fields)){var s={};r.each(t.fields,function(t,e){void 0===t?(s.$unset||(s.$unset={}),s.$unset[e]=1):(s.$set||(s.$set={}),s.$set[e]=t)}),l._collection.update(e,s)}}},endUpdate:function(){l._collection.resumeObservers()},saveOriginals:function(){l._collection.saveOriginals()},retrieveOriginals:function(){return l._collection.retrieveOriginals()}});if(!u)throw new Error("There is already a collection named '"+n+"'")}l._defineMutationMethods(),Package.autopublish&&!a._preventAutopublish&&l._connection&&l._connection.publish&&l._connection.publish(null,function(){return l.find()},{is_auto:!0})},r.extend(e.Collection.prototype,{_getFindSelector:function(t){return 0==t.length?{}:t[0]},_getFindOptions:function(t){var e=this;return t.length<2?{transform:e._transform}:(a(t[1],l.Optional(l.ObjectIncluding({fields:l.Optional(l.OneOf(Object,void 0)),sort:l.Optional(l.OneOf(Object,Array,void 0)),limit:l.Optional(l.OneOf(Number,void 0)),skip:l.Optional(l.OneOf(Number,void 0))}))),r.extend({transform:e._transform},t[1]))},find:function(){var t=this,e=r.toArray(arguments);return t._collection.find(t._getFindSelector(e),t._getFindOptions(e))},findOne:function(){var t=this,e=r.toArray(arguments);return t._collection.findOne(t._getFindSelector(e),t._getFindOptions(e))}}),e.Collection._publishCursor=function(t,e,i){var n=t.observeChanges({added:function(t,n){e.added(i,t,n)},changed:function(t,n){e.changed(i,t,n)},removed:function(t){e.removed(i,t)}});e.onStop(function(){n.stop()})},e.Collection._rewriteSelector=function(t){if(o._selectorIsId(t)&&(t={_id:t}),!t||"_id"in t&&!t._id)return{_id:i.id()};var n={};return r.each(t,function(t,i){t instanceof RegExp?n[i]=u(t):t&&t.$regex instanceof RegExp?(n[i]=u(t.$regex),void 0!==t.$options&&(n[i].$options=t.$options)):n[i]=r.contains(["$or","$and","$nor"],i)?r.map(t,function(t){return e.Collection._rewriteSelector(t)}):t}),n};var u=function(t){a(t,RegExp);var e={$regex:t.source},i="";return t.ignoreCase&&(i+="i"),t.multiline&&(i+="m"),i&&(e.$options=i),e},h=function(t,i){if(!o._selectorIsIdPerhapsAsObject(t))throw new e.Error(403,"Not permitted. Untrusted code may only "+i+" documents by ID.")};r.each(["insert","update","remove"],function(t){e.Collection.prototype[t]=function(){var i,n,o,a=this,l=r.toArray(arguments);if(l.length&&l[l.length-1]instanceof Function&&(i=l.pop()),"insert"===t){if(!l.length)throw new Error("insert requires an argument");if(l[0]=r.extend({},l[0]),"_id"in l[0]){if(n=l[0]._id,!n||!("string"==typeof n||n instanceof e.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else{var u=!0;if(a._connection&&a._connection!==e.server){var c=s._CurrentInvocation.get();c||(u=!1)}u&&(n=l[0]._id=a._makeNewID())}}else if(l[0]=e.Collection._rewriteSelector(l[0]),"update"===t){var d=l[2]=r.clone(l[2])||{};if(d&&"function"!=typeof d&&d.upsert)if(d.insertedId){if(!("string"==typeof d.insertedId||d.insertedId instanceof e.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else d.insertedId=a._makeNewID()}var p,f=function(e){return"insert"===t?(!n&&e&&(n=e),n):e};if(i&&(p=function(t,e){i(t,!t&&f(e))}),a._connection&&a._connection!==e.server){var c=s._CurrentInvocation.get(),m=c&&c.isSimulation;!e.isClient||p||m||(p=function(i){i&&e._debug(t+" failed: "+(i.reason||i.stack))}),m||"insert"===t||h(l[0],t),o=f(a._connection.apply(a._prefix+t,l,{returnStubValue:!0},p))}else{l.push(p);try{var g=a._collection[t].apply(a._collection,l);o=f(g)}catch(_){if(i)return i(_),null;throw _}}return o}}),e.Collection.prototype.upsert=function(t,e,i,n){var o=this;return n||"function"!=typeof i||(n=i,i={}),o.update(t,e,r.extend({},i,{_returnObject:!0,upsert:!0}),n)},e.Collection.prototype._ensureIndex=function(t,e){var i=this;if(!i._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");
i._collection._ensureIndex(t,e)},e.Collection.prototype._dropIndex=function(t){var e=this;if(!e._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");e._collection._dropIndex(t)},e.Collection.prototype._dropCollection=function(){var t=this;if(!t._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");t._collection.dropCollection()},e.Collection.prototype._createCappedCollection=function(t){var e=this;if(!e._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");e._collection._createCappedCollection(t)},e.Collection.ObjectID=o._ObjectID,function(){var t=function(t,e){var i=["insert","update","remove","fetch","transform"];r.each(r.keys(e),function(e){if(!r.contains(i,e))throw new Error(t+": Invalid key: "+e)});var n=this;if(n._restricted=!0,r.each(["insert","update","remove"],function(i){if(e[i]){if(!(e[i]instanceof Function))throw new Error(t+": Value for `"+i+"` must be a function");e[i].transform=void 0===e.transform?n._transform:o.wrapTransform(e.transform),n._validators[i][t].push(e[i])}}),e.update||e.remove||e.fetch){if(e.fetch&&!(e.fetch instanceof Array))throw new Error(t+": Value for `fetch` must be an array");n._updateFetch(e.fetch)}};e.Collection.prototype.allow=function(e){t.call(this,"allow",e)},e.Collection.prototype.deny=function(e){t.call(this,"deny",e)}}(),e.Collection.prototype._defineMutationMethods=function(){var t=this;if(t._restricted=!1,t._insecure=void 0,t._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},t._name&&(t._prefix="/"+t._name+"/",t._connection)){var i={};r.each(["insert","update","remove"],function(n){i[t._prefix+n]=function(){a(arguments,[l.Any]);var i=r.toArray(arguments);try{var o=null;if("insert"!==n||r.has(i[0],"_id")||(o=t._makeNewID()),this.isSimulation)return null!==o&&(i[0]._id=o),t._collection[n].apply(t._collection,i);if("insert"!==n&&h(i[0],n),t._restricted){if(0===t._validators[n].allow.length)throw new e.Error(403,"Access denied. No allow validators set on restricted collection for method '"+n+"'.");var s="_validated"+n.charAt(0).toUpperCase()+n.slice(1);return i.unshift(this.userId),"insert"===n&&i.push(o),t[s].apply(t,i)}if(t._isInsecure())return null!==o&&(i[0]._id=o),t._collection[n].apply(t._collection,i);throw new e.Error(403,"Access denied")}catch(u){throw"MongoError"===u.name||"MinimongoError"===u.name?new e.Error(409,u.toString()):u}}}),(e.isClient||t._connection===e.server)&&t._connection.methods(i)}},e.Collection.prototype._updateFetch=function(t){var e=this;e._validators.fetchAllFields||(t?e._validators.fetch=r.union(e._validators.fetch,t):(e._validators.fetchAllFields=!0,e._validators.fetch=null))},e.Collection.prototype._isInsecure=function(){var t=this;return void 0===t._insecure?!!Package.insecure:t._insecure};var c=function(t,e,i){var r=e;return t.transform&&(r=n.clone(e),null!==i&&(r._id=i),r=t.transform(r)),r};e.Collection.prototype._validatedInsert=function(t,i,n){var o=this;if(r.any(o._validators.insert.deny,function(e){return e(t,c(e,i,n))}))throw new e.Error(403,"Access denied");if(r.all(o._validators.insert.allow,function(e){return!e(t,c(e,i,n))}))throw new e.Error(403,"Access denied");null!==n&&(i._id=n),o._collection.insert.call(o._collection,i)};var d=function(t,e){return t.transform?t.transform(e):e};e.Collection.prototype._validatedUpdate=function(t,i,n,s){var a=this;if(s=s||{},!o._selectorIsIdPerhapsAsObject(i))throw new Error("validated update should be of a single ID");if(s.upsert)throw new e.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var l=[];r.each(n,function(t,i){if("$"!==i.charAt(0))throw new e.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!r.has(p,i))throw new e.Error(403,"Access denied. Operator "+i+" not allowed in a restricted collection.");r.each(r.keys(t),function(t){-1!==t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),r.contains(l,t)||l.push(t)})});var u={transform:null};a._validators.fetchAllFields||(u.fields={},r.each(a._validators.fetch,function(t){u.fields[t]=1}));var h=a._collection.findOne(i,u);if(!h)return 0;var c;if(r.any(a._validators.update.deny,function(e){return c||(c=d(e,h)),e(t,c,l,n)}))throw new e.Error(403,"Access denied");if(r.all(a._validators.update.allow,function(e){return c||(c=d(e,h)),!e(t,c,l,n)}))throw new e.Error(403,"Access denied");return a._collection.update.call(a._collection,i,n,s)};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};e.Collection.prototype._validatedRemove=function(t,i){var n=this,o={transform:null};n._validators.fetchAllFields||(o.fields={},r.each(n._validators.fetch,function(t){o.fields[t]=1}));var s=n._collection.findOne(i,o);if(!s)return 0;if(r.any(n._validators.remove.deny,function(e){return e(t,d(e,s))}))throw new e.Error(403,"Access denied");if(r.all(n._validators.remove.allow,function(e){return!e(t,d(e,s))}))throw new e.Error(403,"Access denied");return n._collection.remove.call(n._collection,i)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){var t,e=Package.meteor.Meteor,i=Package.underscore._,n=Package.deps.Deps,r=Package.ejson.EJSON;(function(){var o=function(t){return void 0===t?"undefined":r.stringify(t)},s=function(t){return void 0===t||"undefined"===t?void 0:r.parse(t)};t=function(t){this.keys=t||{},this.keyDeps={},this.keyValueDeps={}},i.extend(t.prototype,{set:function(t,e){var n=this;e=o(e);var r="undefined";if(i.has(n.keys,t)&&(r=n.keys[t]),e!==r){n.keys[t]=e;var s=function(t){t&&t.changed()};s(n.keyDeps[t]),n.keyValueDeps[t]&&(s(n.keyValueDeps[t][r]),s(n.keyValueDeps[t][e]))}},setDefault:function(t,e){var i=this;void 0===i.keys[t]&&i.set(t,e)},get:function(t){var e=this;return e._ensureKey(t),e.keyDeps[t].depend(),s(e.keys[t])},equals:function(t,a){var l=this,u=Package["mongo-livedata"]&&e.Collection.ObjectID;if(!("string"==typeof a||"number"==typeof a||"boolean"==typeof a||"undefined"==typeof a||a instanceof Date||u&&a instanceof u||null===a))throw new Error("ReactiveDict.equals: value must be scalar");var h=o(a);if(n.active){l._ensureKey(t),i.has(l.keyValueDeps[t],h)||(l.keyValueDeps[t][h]=new n.Dependency);var c=l.keyValueDeps[t][h].depend();c&&n.onInvalidate(function(){l.keyValueDeps[t][h].hasDependents()||delete l.keyValueDeps[t][h]})}var d=void 0;return i.has(l.keys,t)&&(d=s(l.keys[t])),r.equals(d,a)},_ensureKey:function(t){var e=this;t in e.keyDeps||(e.keyDeps[t]=new n.Dependency,e.keyValueDeps[t]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:t}}(),function(){{var t,e=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var i={};if(Package.reload){var n=Package.reload.Reload._migrationData("session");n&&n.keys&&(i=n.keys)}t=new e(i),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:t.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:t}}(),function(){{var t,e;Package.meteor.Meteor}(function(){!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=oe.type(t);return"function"===i||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(oe.isFunction(e))return oe.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return oe.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(pe.test(e))return oe.filter(e,t,i);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==i})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=we[t]={};return oe.each(t.match(be)||[],function(t,i){e[i]=!0}),e}function s(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1)):(me.detachEvent("onreadystatechange",a),t.detachEvent("onload",a))}function a(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(s(),oe.ready())}function l(t,e,i){if(void 0===i&&1===t.nodeType){var n="data-"+e.replace(Se,"-$1").toLowerCase();if(i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:ke.test(i)?oe.parseJSON(i):i}catch(r){}oe.data(t,e,i)}else i=void 0}return i}function u(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,i,n){if(oe.acceptData(t)){var r,o,s=oe.expando,a=t.nodeType,l=a?oe.cache:t,u=a?t[s]:t[s]&&s;if(u&&l[u]&&(n||l[u].data)||void 0!==i||"string"!=typeof e)return u||(u=a?t[s]=X.pop()||oe.guid++:s),l[u]||(l[u]=a?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(n?l[u]=oe.extend(l[u],e):l[u].data=oe.extend(l[u].data,e)),o=l[u],n||(o.data||(o.data={}),o=o.data),void 0!==i&&(o[oe.camelCase(e)]=i),"string"==typeof e?(r=o[e],null==r&&(r=o[oe.camelCase(e)])):r=o,r}}function c(t,e,i){if(oe.acceptData(t)){var n,r,o=t.nodeType,s=o?oe.cache:t,a=o?t[oe.expando]:oe.expando;if(s[a]){if(e&&(n=i?s[a]:s[a].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in n?e=[e]:(e=oe.camelCase(e),e=e in n?[e]:e.split(" ")),r=e.length;for(;r--;)delete n[e[r]];if(i?!u(n):!oe.isEmptyObject(n))return}(i||(delete s[a].data,u(s[a])))&&(o?oe.cleanData([t],!0):ne.deleteExpando||s!=s.window?delete s[a]:s[a]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return me.activeElement}catch(t){}}function m(t){var e=Ne.split("|"),i=t.createDocumentFragment();if(i.createElement)for(;e.length;)i.createElement(e.pop());return i}function g(t,e){var i,n,r=0,o=typeof t.getElementsByTagName!==Me?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Me?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],i=t.childNodes||t;null!=(n=i[r]);r++)!e||oe.nodeName(n,e)?o.push(n):oe.merge(o,g(n,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],o):o}function _(t){Ee.test(t.type)&&(t.defaultChecked=t.checked)}function y(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Xe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var i,n=0;null!=(i=t[n]);n++)oe._data(i,"globalEval",!e||oe._data(e[n],"globalEval"))}function x(t,e){if(1===e.nodeType&&oe.hasData(t)){var i,n,r,o=oe._data(t),s=oe._data(e,o),a=o.events;if(a){delete s.handle,s.events={};for(i in a)for(n=0,r=a[i].length;r>n;n++)oe.event.add(e,i,a[i][n])}s.data&&(s.data=oe.extend({},s.data))}}function T(t,e){var i,n,r;if(1===e.nodeType){if(i=e.nodeName.toLowerCase(),!ne.noCloneEvent&&e[oe.expando]){r=oe._data(e);for(n in r.events)oe.removeEvent(e,n,r.handle);e.removeAttribute(oe.expando)}"script"===i&&e.text!==t.text?(v(e).text=t.text,b(e)):"object"===i?(e.parentNode&&(e.outerHTML=t.outerHTML),ne.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===i&&Ee.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===i?e.defaultSelected=e.selected=t.defaultSelected:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}}function M(e,i){var n=oe(i.createElement(e)).appendTo(i.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(n[0]).display:oe.css(n[0],"display");return n.detach(),r}function k(t){var e=me,i=ti[t];return i||(i=M(t,e),"none"!==i&&i||(Ze=(Ze||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ze[0].contentWindow||Ze[0].contentDocument).document,e.write(),e.close(),i=M(t,e),Ze.detach()),ti[t]=i),i}function S(t,e){return{get:function(){var i=t();if(null!=i)return i?void delete this.get:(this.get=e).apply(this,arguments)}}}function L(t,e){if(e in t)return e;for(var i=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=pi.length;r--;)if(e=pi[r]+i,e in t)return e;return n}function C(t,e){for(var i,n,r,o=[],s=0,a=t.length;a>s;s++)n=t[s],n.style&&(o[s]=oe._data(n,"olddisplay"),i=n.style.display,e?(o[s]||"none"!==i||(n.style.display=""),""===n.style.display&&Pe(n)&&(o[s]=oe._data(n,"olddisplay",k(n.nodeName)))):o[s]||(r=Pe(n),(i&&"none"!==i||!r)&&oe._data(n,"olddisplay",r?i:oe.css(n,"display"))));for(s=0;a>s;s++)n=t[s],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[s]||"":"none"));return t}function P(t,e,i){var n=ui.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function D(t,e,i,n,r){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,s=0;4>o;o+=2)"margin"===i&&(s+=oe.css(t,i+Ce[o],!0,r)),n?("content"===i&&(s-=oe.css(t,"padding"+Ce[o],!0,r)),"margin"!==i&&(s-=oe.css(t,"border"+Ce[o]+"Width",!0,r))):(s+=oe.css(t,"padding"+Ce[o],!0,r),"padding"!==i&&(s+=oe.css(t,"border"+Ce[o]+"Width",!0,r)));return s}function E(t,e,i){var n=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=ei(t),s=ne.boxSizing()&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=ii(t,e,o),(0>r||null==r)&&(r=t.style[e]),ri.test(r))return r;n=s&&(ne.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+D(t,e,i||(s?"border":"content"),n,o)+"px"}function A(t,e,i,n,r){return new A.prototype.init(t,e,i,n,r)}function O(){return setTimeout(function(){fi=void 0}),fi=oe.now()}function I(t,e){var i,n={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)i=Ce[r],n["margin"+i]=n["padding"+i]=t;return e&&(n.opacity=n.width=t),n}function R(t,e,i){for(var n,r=(bi[e]||[]).concat(bi["*"]),o=0,s=r.length;s>o;o++)if(n=r[o].call(i,e,t))return n}function Y(t,e,i){var n,r,o,s,a,l,u,h,c=this,d={},p=t.style,f=t.nodeType&&Pe(t),m=oe._data(t,"fxshow");i.queue||(a=oe._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,l=a.empty.fire,a.empty.fire=function(){a.unqueued||l()}),a.unqueued++,c.always(function(){c.always(function(){a.unqueued--,oe.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],u=oe.css(t,"display"),h=k(t.nodeName),"none"===u&&(u=h),"inline"===u&&"none"===oe.css(t,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==h?p.zoom=1:p.display="inline-block")),i.overflow&&(p.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(r=e[n],gi.exec(r)){if(delete e[n],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[n])continue;f=!0}d[n]=m&&m[n]||oe.style(t,n)}if(!oe.isEmptyObject(d)){m?"hidden"in m&&(f=m.hidden):m=oe._data(t,"fxshow",{}),o&&(m.hidden=!f),f?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;oe._removeData(t,"fxshow");for(e in d)oe.style(t,e,d[e])});for(n in d)s=R(f?m[n]:0,n,c),n in m||(m[n]=s.start,f&&(s.end=s.start,s.start="width"===n||"height"===n?1:0))}}function N(t,e){var i,n,r,o,s;for(i in t)if(n=oe.camelCase(i),r=e[n],o=t[i],oe.isArray(o)&&(r=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),s=oe.cssHooks[n],s&&"expand"in s){o=s.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=r)}else e[n]=r}function j(t,e,i){var n,r,o=0,s=vi.length,a=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=fi||O(),i=Math.max(0,u.startTime+u.duration-e),n=i/u.duration||0,o=1-n,s=0,l=u.tweens.length;l>s;s++)u.tweens[s].run(o);return a.notifyWith(t,[u,o,i]),1>o&&l?i:(a.resolveWith(t,[u]),!1)},u=a.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:fi||O(),duration:i.duration,tweens:[],createTween:function(e,i){var n=oe.Tween(t,u.opts,e,i,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(n),n},stop:function(e){var i=0,n=e?u.tweens.length:0;if(r)return this;for(r=!0;n>i;i++)u.tweens[i].run(1);return e?a.resolveWith(t,[u,e]):a.rejectWith(t,[u,e]),this}}),h=u.props;for(N(h,u.opts.specialEasing);s>o;o++)if(n=vi[o].call(u,t,h,u.opts))return n;return oe.map(h,R,u),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function F(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,r=0,o=e.toLowerCase().match(be)||[];if(oe.isFunction(i))for(;n=o[r++];)"+"===n.charAt(0)?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function B(t,e,i,n){function r(a){var l;return o[a]=!0,oe.each(t[a]||[],function(t,a){var u=a(e,i,n);return"string"!=typeof u||s||o[u]?s?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},s=t===Wi;return r(e.dataTypes[0])||!o["*"]&&r("*")}function U(t,e){var i,n,r=oe.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&oe.extend(!0,t,i),t}function H(t,e,i){for(var n,r,o,s,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(s in a)if(a[s]&&a[s].test(r)){l.unshift(s);break}if(l[0]in i)o=l[0];else{for(s in i){if(!l[0]||t.converters[s+" "+l[0]]){o=s;break}n||(n=s)}o=o||n}return o?(o!==l[0]&&l.unshift(o),i[o]):void 0}function G(t,e,i,n){var r,o,s,a,l,u={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)u[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!l&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(s=u[l+" "+o]||u["* "+o],!s)for(r in u)if(a=r.split(" "),a[1]===o&&(s=u[l+" "+a[0]]||u["* "+a[0]])){s===!0?s=u[r]:u[r]!==!0&&(o=a[0],h.unshift(a[1]));break}if(s!==!0)if(s&&t["throws"])e=s(e);else try{e=s(e)}catch(c){return{state:"parsererror",error:s?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function W(t,e,i,n){var r;if(oe.isArray(e))oe.each(e,function(e,r){i||Xi.test(t)?n(t,r):W(t+"["+("object"==typeof r?e:"")+"]",r,i,n)});else if(i||"object"!==oe.type(e))n(t,e);else for(r in e)W(t+"["+r+"]",e[r],i,n)}function z(){try{return new t.XMLHttpRequest}catch(e){}}function V(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function $(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],q=X.slice,K=X.concat,J=X.push,Q=X.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ie="".trim,ne={},re="1.11.0",oe=function(t,e){return new oe.fn.init(t,e)},se=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,le=/-([\da-z])/gi,ue=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return q.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:q.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var t,e,i,n,r,o,s=arguments[0]||{},a=1,l=arguments.length,u=!1;for("boolean"==typeof s&&(u=s,s=arguments[a]||{},a++),"object"==typeof s||oe.isFunction(s)||(s={}),a===l&&(s=this,a--);l>a;a++)if(null!=(r=arguments[a]))for(n in r)t=s[n],i=r[n],s!==i&&(u&&i&&(oe.isPlainObject(i)||(e=oe.isArray(i)))?(e?(e=!1,o=t&&oe.isArray(t)?t:[]):o=t&&oe.isPlainObject(t)?t:{},s[n]=oe.extend(u,o,i)):void 0!==i&&(s[n]=i));return s},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}if(ne.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(ae,"ms-").replace(le,ue)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var r,o=0,s=t.length,a=i(t);if(n){if(a)for(;s>o&&(r=e.apply(t[o],n),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],n),r===!1)break}else if(a)for(;s>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:ie&&!ie.call("﻿ ")?function(t){return null==t?"":ie.call(t)}:function(t){return null==t?"":(t+"").replace(se,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?oe.merge(n,"string"==typeof t?[t]:t):J.call(n,t)),n},inArray:function(t,e,i){var n;if(e){if(Q)return Q.call(e,t,i);for(n=e.length,i=i?0>i?Math.max(0,n+i):i:0;n>i;i++)if(i in e&&e[i]===t)return i}return-1},merge:function(t,e){for(var i=+e.length,n=0,r=t.length;i>n;)t[r++]=e[n++];if(i!==i)for(;void 0!==e[n];)t[r++]=e[n++];return t.length=r,t},grep:function(t,e,i){for(var n,r=[],o=0,s=t.length,a=!i;s>o;o++)n=!e(t[o],o),n!==a&&r.push(t[o]);return r},map:function(t,e,n){var r,o=0,s=t.length,a=i(t),l=[];if(a)for(;s>o;o++)r=e(t[o],o,n),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,n),null!=r&&l.push(r);return K.apply([],l)},guid:1,proxy:function(t,e){var i,n,r;return"string"==typeof e&&(r=t[e],e=t,t=r),oe.isFunction(t)?(i=q.call(arguments,2),n=function(){return t.apply(e||this,i.concat(q.call(arguments)))},n.guid=t.guid=t.guid||oe.guid++,n):void 0},now:function(){return+new Date},support:ne}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var he=function(t){function e(t,e,i,n){var r,o,s,a,l,u,c,f,m,g;if((e?e.ownerDocument||e:B)!==A&&E(e),e=e||A,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(I&&!n){if(r=ye.exec(t))if(s=r[1]){if(9===a){if(o=e.getElementById(s),!o||!o.parentNode)return i;if(o.id===s)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(s))&&j(e,o)&&o.id===s)return i.push(o),i}else{if(r[2])return Z.apply(i,e.getElementsByTagName(t)),i;if((s=r[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Z.apply(i,e.getElementsByClassName(s)),i}if(T.qsa&&(!R||!R.test(t))){if(f=c=F,m=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(u=d(t),(c=e.getAttribute("id"))?f=c.replace(be,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+p(u[l]);m=ve.test(t)&&h(e.parentNode)||e,g=u.join(",")}if(g)try{return Z.apply(i,m.querySelectorAll(g)),i}catch(_){}finally{c||e.removeAttribute("id")}}}return w(t.replace(le,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>M.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[F]=!0,t}function r(t){var e=A.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)M.attrHandle[i[n]]=e}function s(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function l(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function u(t){return n(function(e){return e=+e,n(function(i,n){for(var r,o=t([],i.length,e),s=o.length;s--;)i[r=o[s]]&&(i[r]=!(n[r]=i[r]))})})}function h(t){return t&&typeof t.getElementsByTagName!==$&&t}function c(){}function d(t,i){var n,r,o,s,a,l,u,h=W[t+" "];if(h)return i?0:h.slice(0);for(a=t,l=[],u=M.preFilter;a;){(!n||(r=ue.exec(a)))&&(r&&(a=a.slice(r[0].length)||a),l.push(o=[])),n=!1,(r=he.exec(a))&&(n=r.shift(),o.push({value:n,type:r[0].replace(le," ")}),a=a.slice(n.length));for(s in M.filter)!(r=fe[s].exec(a))||u[s]&&!(r=u[s](r))||(n=r.shift(),o.push({value:n,type:s,matches:r}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):W(t,l).slice(0)}function p(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function f(t,e,i){var n=e.dir,r=i&&"parentNode"===n,o=H++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||r)return t(e,i,o)}:function(e,i,s){var a,l,u=[U,o];if(s){for(;e=e[n];)if((1===e.nodeType||r)&&t(e,i,s))return!0}else for(;e=e[n];)if(1===e.nodeType||r){if(l=e[F]||(e[F]={}),(a=l[n])&&a[0]===U&&a[1]===o)return u[2]=a[2];if(l[n]=u,u[2]=t(e,i,s))return!0}}}function m(t){return t.length>1?function(e,i,n){for(var r=t.length;r--;)if(!t[r](e,i,n))return!1;return!0}:t[0]}function g(t,e,i,n,r){for(var o,s=[],a=0,l=t.length,u=null!=e;l>a;a++)(o=t[a])&&(!i||i(o,n,r))&&(s.push(o),u&&e.push(a));return s}function _(t,e,i,r,o,s){return r&&!r[F]&&(r=_(r)),o&&!o[F]&&(o=_(o,s)),n(function(n,s,a,l){var u,h,c,d=[],p=[],f=s.length,m=n||b(e||"*",a.nodeType?[a]:a,[]),_=!t||!n&&e?m:g(m,d,t,a,l),y=i?o||(n?t:f||r)?[]:s:_;if(i&&i(_,y,a,l),r)for(u=g(y,p),r(u,[],a,l),h=u.length;h--;)(c=u[h])&&(y[p[h]]=!(_[p[h]]=c));if(n){if(o||t){if(o){for(u=[],h=y.length;h--;)(c=y[h])&&u.push(_[h]=c);o(null,y=[],u,l)}for(h=y.length;h--;)(c=y[h])&&(u=o?ee.call(n,c):d[h])>-1&&(n[u]=!(s[u]=c))}}else y=g(y===s?y.splice(f,y.length):y),o?o(null,s,y,l):Z.apply(s,y)})}function y(t){for(var e,i,n,r=t.length,o=M.relative[t[0].type],s=o||M.relative[" "],a=o?1:0,l=f(function(t){return t===e},s,!0),u=f(function(t){return ee.call(e,t)>-1},s,!0),h=[function(t,i,n){return!o&&(n||i!==C)||((e=i).nodeType?l(t,i,n):u(t,i,n))}];r>a;a++)if(i=M.relative[t[a].type])h=[f(m(h),i)];else{if(i=M.filter[t[a].type].apply(null,t[a].matches),i[F]){for(n=++a;r>n&&!M.relative[t[n].type];n++);return _(a>1&&m(h),a>1&&p(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(le,"$1"),i,n>a&&y(t.slice(a,n)),r>n&&y(t=t.slice(n)),r>n&&p(t))}h.push(i)}return m(h)}function v(t,i){var r=i.length>0,o=t.length>0,s=function(n,s,a,l,u){var h,c,d,p=0,f="0",m=n&&[],_=[],y=C,v=n||o&&M.find.TAG("*",u),b=U+=null==y?1:Math.random()||.1,w=v.length;for(u&&(C=s!==A&&s);f!==w&&null!=(h=v[f]);f++){if(o&&h){for(c=0;d=t[c++];)if(d(h,s,a)){l.push(h);break}u&&(U=b)}r&&((h=!d&&h)&&p--,n&&m.push(h))}if(p+=f,r&&f!==p){for(c=0;d=i[c++];)d(m,_,s,a);if(n){if(p>0)for(;f--;)m[f]||_[f]||(_[f]=J.call(l));_=g(_)}Z.apply(l,_),u&&!n&&_.length>0&&p+i.length>1&&e.uniqueSort(l)}return u&&(U=b,C=y),m};return r?n(s):s}function b(t,i,n){for(var r=0,o=i.length;o>r;r++)e(t,i[r],n);return n}function w(t,e,i,n){var r,o,s,a,l,u=d(t);if(!n&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(s=o[0]).type&&T.getById&&9===e.nodeType&&I&&M.relative[o[1].type]){if(e=(M.find.ID(s.matches[0].replace(we,xe),e)||[])[0],!e)return i;t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(s=o[r],!M.relative[a=s.type]);)if((l=M.find[a])&&(n=l(s.matches[0].replace(we,xe),ve.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=n.length&&p(o),!t)return Z.apply(i,n),i;break}}return L(t,u)(n,e,!I,i,ve.test(t)&&h(e.parentNode)||e),i}var x,T,M,k,S,L,C,P,D,E,A,O,I,R,Y,N,j,F="sizzle"+-new Date,B=t.document,U=0,H=0,G=i(),W=i(),z=i(),V=function(t,e){return t===e&&(D=!0),0},$="undefined",X=1<<31,q={}.hasOwnProperty,K=[],J=K.pop,Q=K.push,Z=K.push,te=K.slice,ee=K.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ie="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),se="\\["+ne+"*("+re+")"+ne+"*(?:([*^$|!~]?=)"+ne+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+oe+")|)|)"+ne+"*\\]",ae=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+se.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),he=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(ae),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+se),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+ie+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,_e=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),xe=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{Z.apply(K=te.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(Te){Z={apply:K.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}T=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},E=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:B,n=i.defaultView;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,O=i.documentElement,I=!S(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){E()},!1):n.attachEvent&&n.attachEvent("onunload",function(){E()})),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=_e.test(i.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=r(function(t){return O.appendChild(t).id=F,!i.getElementsByName||!i.getElementsByName(F).length}),T.getById?(M.find.ID=function(t,e){if(typeof e.getElementById!==$&&I){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},M.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(delete M.find.ID,M.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var i=typeof t.getAttributeNode!==$&&t.getAttributeNode("id");return i&&i.value===e}}),M.find.TAG=T.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==$?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[r++];)1===i.nodeType&&n.push(i);return n}return o},M.find.CLASS=T.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==$&&I?e.getElementsByClassName(t):void 0},Y=[],R=[],(T.qsa=_e.test(i.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&R.push("[*^$]="+ne+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+ne+"*(?:value|"+ie+")"),t.querySelectorAll(":checked").length||R.push(":checked")
}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+ne+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(T.matchesSelector=_e.test(N=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){T.disconnectedMatch=N.call(t,"div"),N.call(t,"[s!='']:x"),Y.push("!=",ae)}),R=R.length&&new RegExp(R.join("|")),Y=Y.length&&new RegExp(Y.join("|")),e=_e.test(O.compareDocumentPosition),j=e||_e.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return D=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!T.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===B&&j(B,t)?-1:e===i||e.ownerDocument===B&&j(B,e)?1:P?ee.call(P,t)-ee.call(P,e):0:4&n?-1:1)}:function(t,e){if(t===e)return D=!0,0;var n,r=0,o=t.parentNode,a=e.parentNode,l=[t],u=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:P?ee.call(P,t)-ee.call(P,e):0;if(o===a)return s(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)u.unshift(n);for(;l[r]===u[r];)r++;return r?s(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},i):A},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==A&&E(t),i=i.replace(ce,"='$1']"),!(!T.matchesSelector||!I||Y&&Y.test(i)||R&&R.test(i)))try{var n=N.call(t,i);if(n||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(r){}return e(i,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&E(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&E(t);var i=M.attrHandle[e.toLowerCase()],n=i&&q.call(M.attrHandle,e.toLowerCase())?i(t,e,!I):void 0;return void 0!==n?n:T.attributes||!I?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,r=0;if(D=!T.detectDuplicates,P=!T.sortStable&&t.slice(0),t.sort(V),D){for(;e=t[r++];)e===t[r]&&(n=i.push(r));for(;n--;)t.splice(i[n],1)}return P=null,t},k=e.getText=function(t){var e,i="",n=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[n++];)i+=k(e);return i},M=e.selectors={cacheLength:50,createPseudo:n,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[5]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:i&&de.test(i)&&(e=d(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+ne+")"+t+"("+ne+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==$&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(r){var o=e.attr(r,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,r){var o="nth"!==t.slice(0,3),s="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,i,l){var u,h,c,d,p,f,m=o!==s?"nextSibling":"previousSibling",g=e.parentNode,_=a&&e.nodeName.toLowerCase(),y=!l&&!a;if(g){if(o){for(;m;){for(c=e;c=c[m];)if(a?c.nodeName.toLowerCase()===_:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[s?g.firstChild:g.lastChild],s&&y){for(h=g[F]||(g[F]={}),u=h[t]||[],p=u[0]===U&&u[1],d=u[0]===U&&u[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){h[t]=[U,p,d];break}}else if(y&&(u=(e[F]||(e[F]={}))[t])&&u[0]===U)d=u[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((a?c.nodeName.toLowerCase()!==_:1!==c.nodeType)||!++d||(y&&((c[F]||(c[F]={}))[t]=[U,d]),c!==e)););return d-=r,d===n||d%n===0&&d/n>=0}}},PSEUDO:function(t,i){var r,o=M.pseudos[t]||M.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[F]?o(i):o.length>1?(r=[t,t,"",i],M.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,r=o(t,i),s=r.length;s--;)n=ee.call(t,r[s]),t[n]=!(e[n]=r[s])}):function(t){return o(t,0,r)}):o}},pseudos:{not:n(function(t){var e=[],i=[],r=L(t.replace(le,"$1"));return r[F]?n(function(t,e,i,n){for(var o,s=r(t,null,n,[]),a=t.length;a--;)(o=s[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,r(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:n(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var i;do if(i=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!M.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,i){return[0>i?i+e:i]}),even:u(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:u(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:u(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:u(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},M.pseudos.nth=M.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})M.pseudos[x]=l(x);return c.prototype=M.filters=M.pseudos,M.setFilters=new c,L=e.compile=function(t,e){var i,n=[],r=[],o=z[t+" "];if(!o){for(e||(e=d(t)),i=e.length;i--;)o=y(e[i]),o[F]?n.push(o):r.push(o);o=z(t,v(r,n))}return o},T.sortStable=F.split("").sort(V).join("")===F,T.detectDuplicates=!!D,E(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ie,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);oe.find=he,oe.expr=he.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=he.uniqueSort,oe.text=he.getText,oe.isXMLDoc=he.isXML,oe.contains=he.contains;var ce=oe.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?oe.find.matchesSelector(n,t)?[n]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,i=[],n=this,r=n.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;r>e;e++)if(oe.contains(n[e],this))return!0}));for(e=0;r>e;e++)oe.find(t,n[e],i);return i=this.pushStack(r>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&ce.test(t)?oe(t):t||[],!1).length}});var fe,me=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,_e=oe.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:me,!0)),de.test(i[1])&&oe.isPlainObject(e))for(i in e)oe.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}if(n=me.getElementById(i[2]),n&&n.parentNode){if(n.id!==i[2])return fe.find(t);this.length=1,this[0]=n}return this.context=me,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};_e.prototype=oe.fn,fe=oe(me);var ye=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,i){for(var n=[],r=t[e];r&&9!==r.nodeType&&(void 0===i||1!==r.nodeType||!oe(r).is(i));)1===r.nodeType&&n.push(r),r=r[e];return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),oe.fn.extend({has:function(t){var e,i=oe(t,this),n=i.length;return this.filter(function(){for(e=0;n>e;e++)if(oe.contains(this,i[e]))return!0})},closest:function(t,e){for(var i,n=0,r=this.length,o=[],s=ce.test(t)||"string"!=typeof t?oe(t,e||this.context):0;r>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(s?s.index(i)>-1:1===i.nodeType&&oe.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,i){return oe.dir(t,"parentNode",i)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,i){return oe.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return oe.dir(t,"previousSibling",i)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(i,n){var r=oe.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(r=oe.filter(n,r)),this.length>1&&(ve[t]||(r=oe.unique(r)),ye.test(t)&&(r=r.reverse())),this.pushStack(r)}});var be=/\S+/g,we={};oe.Callbacks=function(t){t="string"==typeof t?we[t]||o(t):oe.extend({},t);var e,i,n,r,s,a,l=[],u=!t.once&&[],h=function(o){for(i=t.memory&&o,n=!0,s=a||0,a=0,r=l.length,e=!0;l&&r>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){i=!1;break}e=!1,l&&(u?u.length&&h(u.shift()):i?l=[]:c.disable())},c={add:function(){if(l){var n=l.length;!function o(e){oe.each(e,function(e,i){var n=oe.type(i);"function"===n?t.unique&&c.has(i)||l.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),e?r=l.length:i&&(a=n,h(i))}return this},remove:function(){return l&&oe.each(arguments,function(t,i){for(var n;(n=oe.inArray(i,l,n))>-1;)l.splice(n,1),e&&(r>=n&&r--,s>=n&&s--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=i=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,i||c.disable(),this},locked:function(){return!u},fireWith:function(t,i){return!l||n&&!u||(i=i||[],i=[t,i.slice?i.slice():i],e?u.push(i):h(i)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!n}};return c},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(i){oe.each(e,function(e,o){var s=oe.isFunction(t[e])&&t[e];r[o[1]](function(){var t=s&&s.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,s?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,n):n}},r={};return n.pipe=n.then,oe.each(e,function(t,o){var s=o[2],a=o[3];n[o[1]]=s.add,a&&s.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?n:this,arguments),this},r[o[0]+"With"]=s.fireWith}),n.promise(r),t&&t.call(r,r),r},when:function(t){var e,i,n,r=0,o=q.call(arguments),s=o.length,a=1!==s||t&&oe.isFunction(t.promise)?s:0,l=1===a?t:oe.Deferred(),u=function(t,i,n){return function(r){i[t]=this,n[t]=arguments.length>1?q.call(arguments):r,n===e?l.notifyWith(i,n):--a||l.resolveWith(i,n)}};if(s>1)for(e=new Array(s),i=new Array(s),n=new Array(s);s>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(l.reject).progress(u(r,i,e)):--a;return a||l.resolveWith(n,o),l.promise()}});var xe;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!me.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(xe.resolveWith(me,[oe]),oe.fn.trigger&&oe(me).trigger("ready").off("ready"))}}}),oe.ready.promise=function(e){if(!xe)if(xe=oe.Deferred(),"complete"===me.readyState)setTimeout(oe.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1);else{me.attachEvent("onreadystatechange",a),t.attachEvent("onload",a);var i=!1;try{i=null==t.frameElement&&me.documentElement}catch(n){}i&&i.doScroll&&!function r(){if(!oe.isReady){try{i.doScroll("left")}catch(t){return setTimeout(r,50)}s(),oe.ready()}}()}return xe.promise(e)};var Te,Me="undefined";for(Te in oe(ne))break;ne.ownLast="0"!==Te,ne.inlineBlockNeedsLayout=!1,oe(function(){var t,e,i=me.getElementsByTagName("body")[0];i&&(t=me.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=me.createElement("div"),i.appendChild(t).appendChild(e),typeof e.style.zoom!==Me&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(ne.inlineBlockNeedsLayout=3===e.offsetWidth)&&(i.style.zoom=1)),i.removeChild(t),t=e=null)}),function(){var t=me.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],i=+t.nodeType||1;return 1!==i&&9!==i?!1:!e||e!==!0&&t.getAttribute("classid")===e};var ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!u(t)},data:function(t,e,i){return h(t,e,i)},removeData:function(t,e){return c(t,e)},_data:function(t,e,i){return h(t,e,i,!0)},_removeData:function(t,e){return c(t,e,!0)}}),oe.fn.extend({data:function(t,e){var i,n,r,o=this[0],s=o&&o.attributes;if(void 0===t){if(this.length&&(r=oe.data(o),1===o.nodeType&&!oe._data(o,"parsedAttrs"))){for(i=s.length;i--;)n=s[i].name,0===n.indexOf("data-")&&(n=oe.camelCase(n.slice(5)),l(o,n,r[n]));oe._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):o?l(o,t,oe.data(o,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=oe._data(t,e),i&&(!n||oe.isArray(i)?n=oe._data(t,e,oe.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=oe.queue(t,e),n=i.length,r=i.shift(),o=oe._queueHooks(t,e),s=function(){oe.dequeue(t,e)};"inprogress"===r&&(r=i.shift(),n--),r&&("fx"===e&&i.unshift("inprogress"),delete o.stop,r.call(t,s,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return oe._data(t,i)||oe._data(t,i,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,i)})})}}),oe.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?oe.queue(this[0],t):void 0===e?this:this.each(function(){var i=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,r=oe.Deferred(),o=this,s=this.length,a=function(){--n||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";s--;)i=oe._data(o[s],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),r.promise(e)}});var Le=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=["Top","Right","Bottom","Left"],Pe=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},De=oe.access=function(t,e,i,n,r,o,s){var a=0,l=t.length,u=null==i;if("object"===oe.type(i)){r=!0;for(a in i)oe.access(t,e,a,i[a],!0,o,s)}else if(void 0!==n&&(r=!0,oe.isFunction(n)||(s=!0),u&&(s?(e.call(t,n),e=null):(u=e,e=function(t,e,i){return u.call(oe(t),i)})),e))for(;l>a;a++)e(t[a],i,s?n:n.call(t[a],a,e(t[a],i)));return r?t:u?e.call(t):l?e(t[0],i):o},Ee=/^(?:checkbox|radio)$/i;!function(){var t=me.createDocumentFragment(),e=me.createElement("div"),i=me.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",ne.leadingWhitespace=3===e.firstChild.nodeType,ne.tbody=!e.getElementsByTagName("tbody").length,ne.htmlSerialize=!!e.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,i.type="checkbox",i.checked=!0,t.appendChild(i),ne.appendChecked=i.checked,e.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ne.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(n){ne.deleteExpando=!1}}t=e=i=null}(),function(){var e,i,n=me.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})i="on"+e,(ne[e+"Bubbles"]=i in t)||(n.setAttribute(i,"t"),ne[e+"Bubbles"]=n.attributes[i].expando===!1);n=null}();var Ae=/^(?:input|select|textarea)$/i,Oe=/^key/,Ie=/^(?:mouse|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,Ye=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,i,n,r){var o,s,a,l,u,h,c,d,p,f,m,g=oe._data(t);if(g){for(i.handler&&(l=i,i=l.handler,r=l.selector),i.guid||(i.guid=oe.guid++),(s=g.events)||(s=g.events={}),(h=g.handle)||(h=g.handle=function(t){return typeof oe===Me||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(be)||[""],a=e.length;a--;)o=Ye.exec(e[a])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(u=oe.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=oe.event.special[p]||{},c=oe.extend({type:p,origType:m,data:n,handler:i,guid:i.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=s[p])||(d=s[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,n,f,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=i.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),oe.event.global[p]=!0);t=null}},remove:function(t,e,i,n,r){var o,s,a,l,u,h,c,d,p,f,m,g=oe.hasData(t)&&oe._data(t);if(g&&(h=g.events)){for(e=(e||"").match(be)||[""],u=e.length;u--;)if(a=Ye.exec(e[u])||[],p=m=a[1],f=(a[2]||"").split(".").sort(),p){for(c=oe.event.special[p]||{},p=(n?c.delegateType:c.bindType)||p,d=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)s=d[o],!r&&m!==s.origType||i&&i.guid!==s.guid||a&&!a.test(s.namespace)||n&&n!==s.selector&&("**"!==n||!s.selector)||(d.splice(o,1),s.selector&&d.delegateCount--,c.remove&&c.remove.call(t,s));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||oe.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)oe.event.remove(t,p+e[u],i,n,!0);oe.isEmptyObject(h)&&(delete g.handle,oe._removeData(t,"events"))}},trigger:function(e,i,n,r){var o,s,a,l,u,h,c,d=[n||me],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(a=h=n=n||me,3!==n.nodeType&&8!==n.nodeType&&!Re.test(p+oe.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),s=p.indexOf(":")<0&&"on"+p,e=e[oe.expando]?e:new oe.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:oe.makeArray(i,[e]),u=oe.event.special[p]||{},r||!u.trigger||u.trigger.apply(n,i)!==!1)){if(!r&&!u.noBubble&&!oe.isWindow(n)){for(l=u.delegateType||p,Re.test(l+p)||(a=a.parentNode);a;a=a.parentNode)d.push(a),h=a;h===(n.ownerDocument||me)&&d.push(h.defaultView||h.parentWindow||t)}for(c=0;(a=d[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||p,o=(oe._data(a,"events")||{})[e.type]&&oe._data(a,"handle"),o&&o.apply(a,i),o=s&&a[s],o&&o.apply&&oe.acceptData(a)&&(e.result=o.apply(a,i),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),i)===!1)&&oe.acceptData(n)&&s&&n[p]&&!oe.isWindow(n)){h=n[s],h&&(n[s]=null),oe.event.triggered=p;try{n[p]()}catch(m){}oe.event.triggered=void 0,h&&(n[s]=h)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,i,n,r,o,s=[],a=q.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(s=oe.event.handlers.call(this,t,l),e=0;(r=s[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(n=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(n.namespace))&&(t.handleObj=n,t.data=n.data,i=((oe.event.special[n.origType]||{}).handle||n.handler).apply(r.elem,a),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,r,o,s=[],a=e.delegateCount,l=t.target;if(a&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;a>o;o++)n=e[o],i=n.selector+" ",void 0===r[i]&&(r[i]=n.needsContext?oe(i,this).index(l)>=0:oe.find(i,this,null,[l]).length),r[i]&&r.push(n);r.length&&s.push({elem:l,handlers:r})}return a<e.length&&s.push({elem:this,handlers:e.slice(a)}),s},fix:function(t){if(t[oe.expando])return t;var e,i,n,r=t.type,o=t,s=this.fixHooks[r];for(s||(this.fixHooks[r]=s=Ie.test(r)?this.mouseHooks:Oe.test(r)?this.keyHooks:{}),n=s.props?this.props.concat(s.props):this.props,t=new oe.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=o.srcElement||me),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,s.filter?s.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,r,o=e.button,s=e.fromElement;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||me,r=n.documentElement,i=n.body,t.pageX=e.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!t.relatedTarget&&s&&(t.relatedTarget=s===t.target?e.toElement:s),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var r=oe.extend(new oe.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?oe.event.trigger(r,null,e):oe.event.dispatch.call(e,r),r.isDefaultPrevented()&&i.preventDefault()}},oe.removeEvent=me.removeEventListener?function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)}:function(t,e,i){var n="on"+e;t.detachEvent&&(typeof t[n]===Me&&(t[n]=null),t.detachEvent(n,i))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?d:p):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==n&&!oe.contains(n,r))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),ne.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,i=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;i&&!oe._data(i,"submitBubbles")&&(oe.event.add(i,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(i,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ne.changeBubbles||(oe.event.special.change={setup:function(){return Ae.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ae.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Ae.test(this.nodeName)}}),ne.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var n=this.ownerDocument||this,r=oe._data(n,e);r||n.addEventListener(t,i,!0),oe._data(n,e,(r||0)+1)},teardown:function(){var n=this.ownerDocument||this,r=oe._data(n,e)-1;r?oe._data(n,e,r):(n.removeEventListener(t,i,!0),oe._removeData(n,e))}}}),oe.fn.extend({on:function(t,e,i,n,r){var o,s;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(o in t)this.on(o,e,i,t[o],r);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=p;else if(!n)return this;return 1===r&&(s=n,n=function(t){return oe().off(t),s.apply(this,arguments)},n.guid=s.guid||(s.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,r;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,oe(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=p),this.each(function(){oe.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?oe.event.trigger(t,e,i,!0):void 0}});var Ne="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",je=/ jQuery\d+="(?:null|\d+)"/g,Fe=new RegExp("<(?:"+Ne+")[\\s/>]","i"),Be=/^\s+/,Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Ge=/<tbody/i,We=/<|&#?\w+;/,ze=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=m(me),Qe=Je.appendChild(me.createElement("div"));
Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,oe.extend({clone:function(t,e,i){var n,r,o,s,a,l=oe.contains(t.ownerDocument,t);if(ne.html5Clone||oe.isXMLDoc(t)||!Fe.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Qe.innerHTML=t.outerHTML,Qe.removeChild(o=Qe.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(n=g(o),a=g(t),s=0;null!=(r=a[s]);++s)n[s]&&T(r,n[s]);if(e)if(i)for(a=a||g(t),n=n||g(o),s=0;null!=(r=a[s]);s++)x(r,n[s]);else x(t,o);return n=g(o,"script"),n.length>0&&w(n,!l&&g(t,"script")),n=a=r=null,o},buildFragment:function(t,e,i,n){for(var r,o,s,a,l,u,h,c=t.length,d=m(e),p=[],f=0;c>f;f++)if(o=t[f],o||0===o)if("object"===oe.type(o))oe.merge(p,o.nodeType?[o]:o);else if(We.test(o)){for(a=a||d.appendChild(e.createElement("div")),l=(He.exec(o)||["",""])[1].toLowerCase(),h=Ke[l]||Ke._default,a.innerHTML=h[1]+o.replace(Ue,"<$1></$2>")+h[2],r=h[0];r--;)a=a.lastChild;if(!ne.leadingWhitespace&&Be.test(o)&&p.push(e.createTextNode(Be.exec(o)[0])),!ne.tbody)for(o="table"!==l||Ge.test(o)?"<table>"!==h[1]||Ge.test(o)?0:a:a.firstChild,r=o&&o.childNodes.length;r--;)oe.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(oe.merge(p,a.childNodes),a.textContent="";a.firstChild;)a.removeChild(a.firstChild);a=d.lastChild}else p.push(e.createTextNode(o));for(a&&d.removeChild(a),ne.appendChecked||oe.grep(g(p,"input"),_),f=0;o=p[f++];)if((!n||-1===oe.inArray(o,n))&&(s=oe.contains(o.ownerDocument,o),a=g(d.appendChild(o),"script"),s&&w(a),i))for(r=0;o=a[r++];)$e.test(o.type||"")&&i.push(o);return a=null,d},cleanData:function(t,e){for(var i,n,r,o,s=0,a=oe.expando,l=oe.cache,u=ne.deleteExpando,h=oe.event.special;null!=(i=t[s]);s++)if((e||oe.acceptData(i))&&(r=i[a],o=r&&l[r])){if(o.events)for(n in o.events)h[n]?oe.event.remove(i,n):oe.removeEvent(i,n,o.handle);l[r]&&(delete l[r],u?delete i[a]:typeof i.removeAttribute!==Me?i.removeAttribute(a):i[a]=null,X.push(r))}}}),oe.fn.extend({text:function(t){return De(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=y(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?oe.filter(t,this):this,r=0;null!=(i=n[r]);r++)e||1!==i.nodeType||oe.cleanData(g(i)),i.parentNode&&(e&&oe.contains(i.ownerDocument,i)&&w(g(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return De(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(je,""):void 0;if(!("string"!=typeof t||ze.test(t)||!ne.htmlSerialize&&Fe.test(t)||!ne.leadingWhitespace&&Be.test(t)||Ke[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ue,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(oe.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=K.apply([],t);var i,n,r,o,s,a,l=0,u=this.length,h=this,c=u-1,d=t[0],p=oe.isFunction(d);if(p||u>1&&"string"==typeof d&&!ne.checkClone&&Ve.test(d))return this.each(function(i){var n=h.eq(i);p&&(t[0]=d.call(this,i,n.html())),n.domManip(t,e)});if(u&&(a=oe.buildFragment(t,this[0].ownerDocument,!1,this),i=a.firstChild,1===a.childNodes.length&&(a=i),i)){for(o=oe.map(g(a,"script"),v),r=o.length;u>l;l++)n=a,l!==c&&(n=oe.clone(n,!0,!0),r&&oe.merge(o,g(n,"script"))),e.call(this[l],n,l);if(r)for(s=o[o.length-1].ownerDocument,oe.map(o,b),l=0;r>l;l++)n=o[l],$e.test(n.type||"")&&!oe._data(n,"globalEval")&&oe.contains(s,n)&&(n.src?oe._evalUrl&&oe._evalUrl(n.src):oe.globalEval((n.text||n.textContent||n.innerHTML||"").replace(qe,"")));a=i=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var i,n=0,r=[],o=oe(t),s=o.length-1;s>=n;n++)i=n===s?this:this.clone(!0),oe(o[n])[e](i),J.apply(r,i.get());return this.pushStack(r)}});var Ze,ti={};!function(){var t,e,i=me.createElement("div"),n="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=i.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",ne.opacity=/^0.5/.test(t.style.opacity),ne.cssFloat=!!t.style.cssFloat,i.style.backgroundClip="content-box",i.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===i.style.backgroundClip,t=i=null,ne.shrinkWrapBlocks=function(){var t,i,r,o;if(null==e){if(t=me.getElementsByTagName("body")[0],!t)return;o="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",i=me.createElement("div"),r=me.createElement("div"),t.appendChild(i).appendChild(r),e=!1,typeof r.style.zoom!==Me&&(r.style.cssText=n+";width:1px;padding:1px;zoom:1",r.innerHTML="<div></div>",r.firstChild.style.width="5px",e=3!==r.offsetWidth),t.removeChild(i),t=i=r=null}return e}}();var ei,ii,ni=/^margin/,ri=new RegExp("^("+Le+")(?!px)[a-z%]+$","i"),oi=/^(top|right|bottom|left)$/;t.getComputedStyle?(ei=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},ii=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ei(t),s=i?i.getPropertyValue(e)||i[e]:void 0,i&&(""!==s||oe.contains(t.ownerDocument,t)||(s=oe.style(t,e)),ri.test(s)&&ni.test(e)&&(n=a.width,r=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=i.width,a.width=n,a.minWidth=r,a.maxWidth=o)),void 0===s?s:s+""}):me.documentElement.currentStyle&&(ei=function(t){return t.currentStyle},ii=function(t,e,i){var n,r,o,s,a=t.style;return i=i||ei(t),s=i?i[e]:void 0,null==s&&a&&a[e]&&(s=a[e]),ri.test(s)&&!oi.test(e)&&(n=a.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),a.left="fontSize"===e?"1em":s,s=a.pixelLeft+"px",a.left=n,o&&(r.left=o)),void 0===s?s:s+""||"auto"}),function(){function e(){var e,i,n=me.getElementsByTagName("body")[0];n&&(e=me.createElement("div"),i=me.createElement("div"),e.style.cssText=u,n.appendChild(e).appendChild(i),i.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",oe.swap(n,null!=n.style.zoom?{zoom:1}:{},function(){r=4===i.offsetWidth}),o=!0,s=!1,a=!0,t.getComputedStyle&&(s="1%"!==(t.getComputedStyle(i,null)||{}).top,o="4px"===(t.getComputedStyle(i,null)||{width:"4px"}).width),n.removeChild(e),i=n=null)}var i,n,r,o,s,a,l=me.createElement("div"),u="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",h="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=l.getElementsByTagName("a")[0],i.style.cssText="float:left;opacity:.5",ne.opacity=/^0.5/.test(i.style.opacity),ne.cssFloat=!!i.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===l.style.backgroundClip,i=l=null,oe.extend(ne,{reliableHiddenOffsets:function(){if(null!=n)return n;var t,e,i,r=me.createElement("div"),o=me.getElementsByTagName("body")[0];if(o)return r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=me.createElement("div"),t.style.cssText=u,o.appendChild(t).appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=r.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",i=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",n=i&&0===e[0].offsetHeight,o.removeChild(t),r=o=null,n},boxSizing:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==o&&e(),o},pixelPosition:function(){return null==s&&e(),s},reliableMarginRight:function(){var e,i,n,r;if(null==a&&t.getComputedStyle){if(e=me.getElementsByTagName("body")[0],!e)return;i=me.createElement("div"),n=me.createElement("div"),i.style.cssText=u,e.appendChild(i).appendChild(n),r=n.appendChild(me.createElement("div")),r.style.cssText=n.style.cssText=h,r.style.marginRight=r.style.width="0",n.style.width="1px",a=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(i)}return a}})}(),oe.swap=function(t,e,i,n){var r,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];r=i.apply(t,n||[]);for(o in e)t.style[o]=s[o];return r};var si=/alpha\([^)]*\)/i,ai=/opacity\s*=\s*([^)]*)/,li=/^(none|table(?!-c[ea]).+)/,ui=new RegExp("^("+Le+")(.*)$","i"),hi=new RegExp("^([+-])=("+Le+")","i"),ci={position:"absolute",visibility:"hidden",display:"block"},di={letterSpacing:0,fontWeight:400},pi=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=ii(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,s,a=oe.camelCase(e),l=t.style;if(e=oe.cssProps[a]||(oe.cssProps[a]=L(l,a)),s=oe.cssHooks[e]||oe.cssHooks[a],void 0===i)return s&&"get"in s&&void 0!==(r=s.get(t,!1,n))?r:l[e];if(o=typeof i,"string"===o&&(r=hi.exec(i))&&(i=(r[1]+1)*r[2]+parseFloat(oe.css(t,e)),o="number"),null!=i&&i===i&&("number"!==o||oe.cssNumber[a]||(i+="px"),ne.clearCloneStyle||""!==i||0!==e.indexOf("background")||(l[e]="inherit"),!(s&&"set"in s&&void 0===(i=s.set(t,i,n)))))try{l[e]="",l[e]=i}catch(u){}}},css:function(t,e,i,n){var r,o,s,a=oe.camelCase(e);return e=oe.cssProps[a]||(oe.cssProps[a]=L(t.style,a)),s=oe.cssHooks[e]||oe.cssHooks[a],s&&"get"in s&&(o=s.get(t,!0,i)),void 0===o&&(o=ii(t,e,n)),"normal"===o&&e in di&&(o=di[e]),""===i||i?(r=parseFloat(o),i===!0||oe.isNumeric(r)?r||0:o):o}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,i,n){return i?0===t.offsetWidth&&li.test(oe.css(t,"display"))?oe.swap(t,ci,function(){return E(t,e,n)}):E(t,e,n):void 0},set:function(t,i,n){var r=n&&ei(t);return P(t,i,n?D(t,e,n,ne.boxSizing()&&"border-box"===oe.css(t,"boxSizing",!1,r),r):0)}}}),ne.opacity||(oe.cssHooks.opacity={get:function(t,e){return ai.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var i=t.style,n=t.currentStyle,r=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=n&&n.filter||i.filter||"";i.zoom=1,(e>=1||""===e)&&""===oe.trim(o.replace(si,""))&&i.removeAttribute&&(i.removeAttribute("filter"),""===e||n&&!n.filter)||(i.filter=si.test(o)?o.replace(si,r):o+" "+r)}}),oe.cssHooks.marginRight=S(ne.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},ii,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(i){for(var n=0,r={},o="string"==typeof i?i.split(" "):[i];4>n;n++)r[t+Ce[n]+e]=o[n]||o[n-2]||o[0];return r}},ni.test(t)||(oe.cssHooks[t+e].set=P)}),oe.fn.extend({css:function(t,e){return De(this,function(t,e,i){var n,r,o={},s=0;if(oe.isArray(e)){for(n=ei(t),r=e.length;r>s;s++)o[e[s]]=oe.css(t,e[s],!1,n);return o}return void 0!==i?oe.style(t,e,i):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return C(this,!0)},hide:function(){return C(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=A,A.prototype={constructor:A,init:function(t,e,i,n,r,o){this.elem=t,this.prop=i,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(oe.cssNumber[i]?"":"px")},cur:function(){var t=A.propHooks[this.prop];return t&&t.get?t.get(this):A.propHooks._default.get(this)},run:function(t){var e,i=A.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):A.propHooks._default.set(this),this}},A.prototype.init.prototype=A.prototype,A.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},A.propHooks.scrollTop=A.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=A.prototype.init,oe.fx.step={};var fi,mi,gi=/^(?:toggle|show|hide)$/,_i=new RegExp("^(?:([+-])=|)("+Le+")([a-z%]*)$","i"),yi=/queueHooks$/,vi=[Y],bi={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),r=_i.exec(e),o=r&&r[3]||(oe.cssNumber[t]?"":"px"),s=(oe.cssNumber[t]||"px"!==o&&+n)&&_i.exec(oe.css(i.elem,t)),a=1,l=20;if(s&&s[3]!==o){o=o||s[3],r=r||[],s=+n||1;do a=a||".5",s/=a,oe.style(i.elem,t,s+o);while(a!==(a=i.cur()/n)&&1!==a&&--l)}return r&&(s=i.start=+s||+n||0,i.unit=o,i.end=r[1]?s+(r[1]+1)*r[2]:+r[2]),i}]};oe.Animation=oe.extend(j,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,r=t.length;r>n;n++)i=t[n],bi[i]=bi[i]||[],bi[i].unshift(e)},prefilter:function(t,e){e?vi.unshift(t):vi.push(t)}}),oe.speed=function(t,e,i){var n=t&&"object"==typeof t?oe.extend({},t):{complete:i||!i&&e||oe.isFunction(t)&&t,duration:t,easing:i&&e||e&&!oe.isFunction(e)&&e};return n.duration=oe.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in oe.fx.speeds?oe.fx.speeds[n.duration]:oe.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){oe.isFunction(n.old)&&n.old.call(this),n.queue&&oe.dequeue(this,n.queue)},n},oe.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var r=oe.isEmptyObject(t),o=oe.speed(e,i,n),s=function(){var e=j(this,oe.extend({},t),o);(r||oe._data(this,"finish"))&&e.stop(!0)};return s.finish=s,r||o.queue===!1?this.each(s):this.queue(o.queue,s)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=oe.timers,s=oe._data(this);if(r)s[r]&&s[r].stop&&n(s[r]);else for(r in s)s[r]&&s[r].stop&&yi.test(r)&&n(s[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(i),e=!1,o.splice(r,1));(e||!i)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=oe._data(this),n=i[t+"queue"],r=i[t+"queueHooks"],o=oe.timers,s=n?n.length:0;for(i.finish=!0,oe.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;s>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var i=oe.fn[e];oe.fn[e]=function(t,n,r){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(I(e,!0),t,n,r)}}),oe.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,i=0;for(fi=oe.now();i<e.length;i++)t=e[i],t()||e[i]!==t||e.splice(i--,1);e.length||oe.fx.stop(),fi=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){mi||(mi=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(mi),mi=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t,e,i,n,r=me.createElement("div");r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=r.getElementsByTagName("a")[0],i=me.createElement("select"),n=i.appendChild(me.createElement("option")),e=r.getElementsByTagName("input")[0],t.style.cssText="top:1px",ne.getSetAttribute="t"!==r.className,ne.style=/top/.test(t.getAttribute("style")),ne.hrefNormalized="/a"===t.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=n.selected,ne.enctype=!!me.createElement("form").enctype,i.disabled=!0,ne.optDisabled=!n.disabled,e=me.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value,t=e=i=n=r=null}();var wi=/\r/g;oe.fn.extend({val:function(t){var e,i,n,r=this[0];{if(arguments.length)return n=oe.isFunction(t),this.each(function(i){var r;1===this.nodeType&&(r=n?t.call(this,i,oe(this).val()):t,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(r,"value"))?i:(i=r.value,"string"==typeof i?i.replace(wi,""):null==i?"":i)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.text(t)}},select:{get:function(t){for(var e,i,n=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,s=o?null:[],a=o?r+1:n.length,l=0>r?a:o?r:0;a>l;l++)if(i=n[l],!(!i.selected&&l!==r||(ne.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&oe.nodeName(i.parentNode,"optgroup"))){if(e=oe(i).val(),o)return e;s.push(e)}return s},set:function(t,e){for(var i,n,r=t.options,o=oe.makeArray(e),s=r.length;s--;)if(n=r[s],oe.inArray(oe.valHooks.option.get(n),o)>=0)try{n.selected=i=!0}catch(a){n.scrollHeight}else n.selected=!1;return i||(t.selectedIndex=-1),r}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ne.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var xi,Ti,Mi=oe.expr.attrHandle,ki=/^(?:checked|selected)$/i,Si=ne.getSetAttribute,Li=ne.input;oe.fn.extend({attr:function(t,e){return De(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,i){var n,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Me?oe.prop(t,e,i):(1===o&&oe.isXMLDoc(t)||(e=e.toLowerCase(),n=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?Ti:xi)),void 0===i?n&&"get"in n&&null!==(r=n.get(t,e))?r:(r=oe.find.attr(t,e),null==r?void 0:r):null!==i?n&&"set"in n&&void 0!==(r=n.set(t,i,e))?r:(t.setAttribute(e,i+""),i):void oe.removeAttr(t,e))},removeAttr:function(t,e){var i,n,r=0,o=e&&e.match(be);if(o&&1===t.nodeType)for(;i=o[r++];)n=oe.propFix[i]||i,oe.expr.match.bool.test(i)?Li&&Si||!ki.test(i)?t[n]=!1:t[oe.camelCase("default-"+i)]=t[n]=!1:oe.attr(t,i,""),t.removeAttribute(Si?i:n)},attrHooks:{type:{set:function(t,e){if(!ne.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),Ti={set:function(t,e,i){return e===!1?oe.removeAttr(t,i):Li&&Si||!ki.test(i)?t.setAttribute(!Si&&oe.propFix[i]||i,i):t[oe.camelCase("default-"+i)]=t[i]=!0,i}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var i=Mi[e]||oe.find.attr;Mi[e]=Li&&Si||!ki.test(e)?function(t,e,n){var r,o;return n||(o=Mi[e],Mi[e]=r,r=null!=i(t,e,n)?e.toLowerCase():null,Mi[e]=o),r}:function(t,e,i){return i?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),Li&&Si||(oe.attrHooks.value={set:function(t,e,i){return oe.nodeName(t,"input")?void(t.defaultValue=e):xi&&xi.set(t,e,i)}}),Si||(xi={set:function(t,e,i){var n=t.getAttributeNode(i);return n||t.setAttributeNode(n=t.ownerDocument.createAttribute(i)),n.value=e+="","value"===i||e===t.getAttribute(i)?e:void 0}},Mi.id=Mi.name=Mi.coords=function(t,e,i){var n;return i?void 0:(n=t.getAttributeNode(e))&&""!==n.value?n.value:null},oe.valHooks.button={get:function(t,e){var i=t.getAttributeNode(e);return i&&i.specified?i.value:void 0},set:xi.set},oe.attrHooks.contenteditable={set:function(t,e,i){xi.set(t,""===e?!1:e,i)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,i){return""===i?(t.setAttribute(e,"auto"),i):void 0}}})),ne.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Ci=/^(?:input|select|textarea|button|object)$/i,Pi=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return De(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,r,o,s=t.nodeType;if(t&&3!==s&&8!==s&&2!==s)return o=1!==s||!oe.isXMLDoc(t),o&&(e=oe.propFix[e]||e,r=oe.propHooks[e]),void 0!==i?r&&"set"in r&&void 0!==(n=r.set(t,i,e))?n:t[e]=i:r&&"get"in r&&null!==(n=r.get(t,e))?n:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):Ci.test(t.nodeName)||Pi.test(t.nodeName)&&t.href?0:-1}}}}),ne.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ne.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ne.enctype||(oe.propFix.enctype="encoding");var Di=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Di," "):" ")){for(o=0;r=e[o++];)n.indexOf(" "+r+" ")<0&&(n+=r+" ");s=oe.trim(n),i.className!==s&&(i.className=s)}return this},removeClass:function(t){var e,i,n,r,o,s,a=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>a;a++)if(i=this[a],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(Di," "):"")){for(o=0;r=e[o++];)for(;n.indexOf(" "+r+" ")>=0;)n=n.replace(" "+r+" "," ");s=t?oe.trim(n):"",i.className!==s&&(i.className=s)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(i){oe(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,r=oe(this),o=t.match(be)||[];e=o[n++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(i===Me||"boolean"===i)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(Di," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var Ei=oe.now(),Ai=/\?/,Oi=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var i,n=null,r=oe.trim(e+"");return r&&!oe.trim(r.replace(Oi,function(t,e,r,o){return i&&e&&(n=0),0===n?t:(i=r||e,n+=!o-!r,"")}))?Function("return "+r)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var i,n;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(n=new DOMParser,i=n.parseFromString(e,"text/xml")):(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(e))}catch(r){i=void 0}return i&&i.documentElement&&!i.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),i};var Ii,Ri,Yi=/#.*$/,Ni=/([?&])_=[^&]*/,ji=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Fi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bi=/^(?:GET|HEAD)$/,Ui=/^\/\//,Hi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Gi={},Wi={},zi="*/".concat("*");try{Ri=location.href}catch(Vi){Ri=me.createElement("a"),Ri.href="",Ri=Ri.href}Ii=Hi.exec(Ri.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Ri,type:"GET",isLocal:Fi.test(Ii[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zi,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?U(U(t,oe.ajaxSettings),e):U(oe.ajaxSettings,t)},ajaxPrefilter:F(Gi),ajaxTransport:F(Wi),ajax:function(t,e){function i(t,e,i,n){var r,h,_,y,b,x=e;2!==v&&(v=2,a&&clearTimeout(a),u=void 0,s=n||"",w.readyState=t>0?4:0,r=t>=200&&300>t||304===t,i&&(y=H(c,w,i)),y=G(c,y,w,r),r?(c.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(oe.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(oe.etag[o]=b)),204===t||"HEAD"===c.type?x="nocontent":304===t?x="notmodified":(x=y.state,h=y.data,_=y.error,r=!_)):(_=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",r?f.resolveWith(d,[h,x,w]):f.rejectWith(d,[w,x,_]),w.statusCode(g),g=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,c,r?h:_]),m.fireWith(d,[w,x]),l&&(p.trigger("ajaxComplete",[w,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,o,s,a,l,u,h,c=oe.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?oe(d):oe.event,f=oe.Deferred(),m=oe.Callbacks("once memory"),g=c.statusCode||{},_={},y={},v=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!h)for(h={};e=ji.exec(s);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?s:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return v||(t=y[i]=y[i]||t,_[t]=e),this},overrideMimeType:function(t){return v||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>v)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return u&&u.abort(e),i(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,c.url=((t||c.url||Ri)+"").replace(Yi,"").replace(Ui,Ii[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(be)||[""],null==c.crossDomain&&(n=Hi.exec(c.url.toLowerCase()),c.crossDomain=!(!n||n[1]===Ii[1]&&n[2]===Ii[2]&&(n[3]||("http:"===n[1]?"80":"443"))===(Ii[3]||("http:"===Ii[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),B(Gi,c,e,w),2===v)return w;l=c.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Bi.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(Ai.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Ni.test(o)?o.replace(Ni,"$1_="+Ei++):o+(Ai.test(o)?"&":"?")+"_="+Ei++)),c.ifModified&&(oe.lastModified[o]&&w.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&w.setRequestHeader("If-None-Match",oe.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+zi+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)w.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(c.beforeSend.call(d,w,c)===!1||2===v))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](c[r]);if(u=B(Wi,c,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},c.timeout));try{v=1,u.send(_,i)}catch(x){if(!(2>v))throw x;i(-1,x)}}else i(-1,"No Transport");return w},getJSON:function(t,e,i){return oe.get(t,e,i,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,i,n,r){return oe.isFunction(i)&&(r=r||n,n=i,i=void 0),oe.ajax({url:t,type:e,dataType:r,data:i,success:n})}}),oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(i){oe(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var $i=/%20/g,Xi=/\[\]$/,qi=/\r?\n/g,Ki=/^(?:submit|button|image|reset|file)$/i,Ji=/^(?:input|select|textarea|keygen)/i;
oe.param=function(t,e){var i,n=[],r=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){r(this.name,this.value)});else for(i in t)W(i,t[i],e,r);return n.join("&").replace($i,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Ji.test(this.nodeName)&&!Ki.test(t)&&(this.checked||!Ee.test(t))}).map(function(t,e){var i=oe(this).val();return null==i?null:oe.isArray(i)?oe.map(i,function(t){return{name:e.name,value:t.replace(qi,"\r\n")}}):{name:e.name,value:i.replace(qi,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&z()||V()}:z;var Qi=0,Zi={},tn=oe.ajaxSettings.xhr();t.ActiveXObject&&oe(t).on("unload",function(){for(var t in Zi)Zi[t](void 0,!0)}),ne.cors=!!tn&&"withCredentials"in tn,tn=ne.ajax=!!tn,tn&&oe.ajaxTransport(function(t){if(!t.crossDomain||ne.cors){var e;return{send:function(i,n){var r,o=t.xhr(),s=++Qi;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(r in i)void 0!==i[r]&&o.setRequestHeader(r,i[r]+"");o.send(t.hasContent&&t.data||null),e=function(i,r){var a,l,u;if(e&&(r||4===o.readyState))if(delete Zi[s],e=void 0,o.onreadystatechange=oe.noop,r)4!==o.readyState&&o.abort();else{u={},a=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(h){l=""}a||!t.isLocal||t.crossDomain?1223===a&&(a=204):a=u.text?200:404}u&&n(a,l,u,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=Zi[s]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,i=me.head||oe("head")[0]||me.documentElement;return{send:function(n,r){e=me.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,i){(i||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,i||r(200,"success"))},i.insertBefore(e,i.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var en=[],nn=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||oe.expando+"_"+Ei++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,i,n){var r,o,s,a=e.jsonp!==!1&&(nn.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(nn,"$1"+r):e.jsonp!==!1&&(e.url+=(Ai.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return s||oe.error(r+" was not called"),s[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){s=arguments},n.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=i.jsonpCallback,en.push(r)),s&&oe.isFunction(o)&&o(s[0]),s=o=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||me;var n=de.exec(t),r=!i&&[];return n?[e.createElement(n[1])]:(n=oe.buildFragment([t],e,r),r&&r.length&&oe(r).remove(),oe.merge([],n.childNodes))};var rn=oe.fn.load;oe.fn.load=function(t,e,i){if("string"!=typeof t&&rn)return rn.apply(this,arguments);var n,r,o,s=this,a=t.indexOf(" ");return a>=0&&(n=t.slice(a,t.length),t=t.slice(0,a)),oe.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(o="POST"),s.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,s.html(n?oe("<div>").append(oe.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){s.each(i,r||[t.responseText,e,t])}),this},oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var on=t.document.documentElement;oe.offset={setOffset:function(t,e,i){var n,r,o,s,a,l,u,h=oe.css(t,"position"),c=oe(t),d={};"static"===h&&(t.style.position="relative"),a=c.offset(),o=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===h||"fixed"===h)&&oe.inArray("auto",[o,l])>-1,u?(n=c.position(),s=n.top,r=n.left):(s=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(d.top=e.top-a.top+s),null!=e.left&&(d.left=e.left-a.left+r),"using"in e?e.using.call(t,d):c.css(d)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,i,n={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,oe.contains(e,r)?(typeof r.getBoundingClientRect!==Me&&(n=r.getBoundingClientRect()),i=$(o),{top:n.top+(i.pageYOffset||e.scrollTop)-(e.clientTop||0),left:n.left+(i.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):n},position:function(){if(this[0]){var t,e,i={top:0,left:0},n=this[0];return"fixed"===oe.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(i=t.offset()),i.top+=oe.css(t[0],"borderTopWidth",!0),i.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-oe.css(n,"marginTop",!0),left:e.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||on;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||on})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var i=/Y/.test(e);oe.fn[t]=function(n){return De(this,function(t,n,r){var o=$(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[n]:t[n]:void(o?o.scrollTo(i?oe(o).scrollLeft():r,i?r:oe(o).scrollTop()):t[n]=r)},t,n,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=S(ne.pixelPosition,function(t,i){return i?(i=ii(t,e),ri.test(i)?oe(t).position()[e]+"px":i):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){oe.fn[n]=function(n,r){var o=arguments.length&&(i||"boolean"!=typeof n),s=i||(n===!0||r===!0?"margin":"border");return De(this,function(e,i,n){var r;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===n?oe.css(e,i,s):oe.style(e,i,n,s)},e,o?n:void 0,o,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var sn=t.jQuery,an=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=an),e&&t.jQuery===oe&&(t.jQuery=sn),oe},typeof e===Me&&(t.jQuery=t.$=oe),oe})}).call(this),function(){t=e=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:t,jQuery:e}}(),function(){var t,e=(Package.meteor.Meteor,Package.deps.Deps),i=Package.minimongo.LocalCollection,n=(Package.minimongo.Minimongo,Package.underscore._),r=Package.random.Random;(function(){var o=function(){t._suppressWarnings?t._suppressWarnings--:("undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments),t._loggedWarnings++)},s=i._idStringify,a=i._idParse;t={_suppressWarnings:0,_loggedWarnings:0,observe:function(t,i){var a=null,c=null,d=[],p=e.autorun(function(){var p=t();e.nonreactive(function(){var t;if(c&&(d=n.map(c._fetch(),function(t){return{_id:t._id,item:t}}),c.stop(),c=null),p)if(p instanceof Array){var e={};t=n.map(p,function(t,i){var n;if("string"==typeof t)n="-"+t;else if("number"==typeof t||"boolean"==typeof t||void 0===t)n=t;else{if("object"!=typeof t)throw new Error("{{#each}} doesn't support arrays with elements of type "+typeof t);n=t&&t._id||i}var a=s(n);return e[a]?("object"==typeof t&&"_id"in t&&o("duplicate id "+n+" in",p),n=r.id()):e[a]=!0,{_id:n,item:t}}),h(d,t,i)}else{if(!u(p))throw l();var f=p;t=[];var m=!0;c=f.observe({addedAt:function(e,n,r){if(m){if(null!==r)throw new Error("Expected initial data from observe in order");t.push({_id:e._id,item:e})}else i.addedAt(e._id,e,n,r)},changedAt:function(t,e,n){i.changedAt(t._id,t,e,n)},removedAt:function(t,e){i.removedAt(t._id,t,e)},movedTo:function(t,e,n,r){i.movedTo(t._id,t,e,n,r)}}),m=!1,h(d,t,i)}else t=[],h(d,t,i);a=p,d=t})});return{stop:function(){p.stop(),c&&c.stop()}}},fetch:function(t){if(t){if(t instanceof Array)return t;if(u(t))return t.fetch();throw l()}return[]}};var l=function(){return new Error("{{#each}} currently only accepts arrays, cursors or falsey values.")},u=function(t){return t&&n.isObject(t)&&n.isFunction(t.observe)&&n.isFunction(t.fetch)},h=function(t,e,i){var r=Package.minimongo.LocalCollection._diffQueryOrderedChanges,o=[],l=[],u={},h={},c={},d=t.length;n.each(e,function(t,e){l.push({_id:t._id}),h[s(t._id)]=e}),n.each(t,function(t,e){o.push({_id:t._id}),u[s(t._id)]=e,c[s(t._id)]=e}),r(o,l,{addedBefore:function(t,r,o){var a=o?c[s(o)]:d;n.each(c,function(t,e){t>=a&&c[e]++}),d++,c[s(t)]=a,i.addedAt(t,e[h[s(t)]].item,a,o)},movedBefore:function(t,r){var o=c[s(t)],a=r?c[s(r)]:d-1;n.each(c,function(t,e){t>=o&&a>=t?c[e]--:o>=t&&t>=a&&c[e]++}),c[s(t)]=a,i.movedTo(t,e[h[s(t)]].item,o,a,r)},removed:function(e){var r=c[s(e)];n.each(c,function(t,e){t>=r&&c[e]--}),delete c[s(e)],d--,i.removedAt(e,t[u[s(e)]].item,r)}}),n.each(h,function(r,o){var s=a(o);if(n.has(u,o)){var l=e[r].item,h=t[u[o]].item;("object"==typeof l||l!==h)&&i.changedAt(s,l,h,r)}})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["observe-sequence"]={ObserveSequence:t}}(),function(){{var t,e,i;Package.meteor.Meteor}(function(){t={},e=function(t){return t},i=Array.prototype.slice}).call(this),function(){var n=Object.prototype.hasOwnProperty,r=function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);return t};t.Visitor=function(t){r(this,t)},t.Visitor.def=function(t){r(this.prototype,t)},t.Visitor.extend=function(e){var i=this,n=function(){t.Visitor.apply(this,arguments)};return n.prototype=new i,n.extend=i.extend,n.def=i.def,e&&r(n.prototype,e),n},t.Visitor.def({visit:function(e){if(null==e)return this.visitNull.apply(this,arguments);if("object"==typeof e){if(e.htmljsType)switch(e.htmljsType){case t.Tag.htmljsType:return this.visitTag.apply(this,arguments);case t.CharRef.htmljsType:return this.visitCharRef.apply(this,arguments);case t.Comment.htmljsType:return this.visitComment.apply(this,arguments);case t.Raw.htmljsType:return this.visitRaw.apply(this,arguments);default:throw new Error("Unknown htmljs type: "+e.htmljsType)}return t.isArray(e)?this.visitArray.apply(this,arguments):this.visitObject.apply(this,arguments)}if("string"==typeof e||"boolean"==typeof e||"number"==typeof e)return this.visitPrimitive.apply(this,arguments);if("function"==typeof e)return this.visitFunction.apply(this,arguments);throw new Error("Unexpected object in htmljs: "+e)},visitNull:function(){},visitPrimitive:function(){},visitArray:function(){},visitComment:function(){},visitCharRef:function(){},visitRaw:function(){},visitTag:function(){},visitObject:function(t){throw new Error("Unexpected object in htmljs: "+t)},visitFunction:function(t){throw new Error("Unexpected function in htmljs: "+t)}}),t.TransformingVisitor=t.Visitor.extend(),t.TransformingVisitor.def({visitNull:e,visitPrimitive:e,visitArray:function(t){for(var e=i.call(arguments),n=t,r=0;r<t.length;r++){var o=t[r];e[0]=o;var s=this.visit.apply(this,e);s!==o&&(n===t&&(n=t.slice()),n[r]=s)}return n},visitComment:e,visitCharRef:e,visitRaw:e,visitObject:e,visitFunction:e,visitTag:function(e){var n=e.children,r=i.call(arguments);r[0]=n;var o=this.visitChildren.apply(this,r),s=e.attrs;r[0]=s;var a=this.visitAttributes.apply(this,r);if(a===s&&o===n)return e;var l=t.getTag(e.tagName).apply(null,o);return l.attrs=a,l},visitChildren:function(){return this.visitArray.apply(this,arguments)},visitAttributes:function(e){if(t.isArray(e)){for(var n=i.call(arguments),o=e,s=0;s<e.length;s++){var a=e[s];n[0]=a;var l=this.visitAttributes.apply(this,n);l!==a&&(o===e&&(o=e.slice()),o[s]=l)}return o}if(e&&t.isConstructedObject(e))throw new Error("The basic HTML.TransformingVisitor does not support foreign objects in attributes.  Define a custom visitAttributes for this case.");var u=e,h=u;if(u){var c=[null,null];c.push.apply(c,arguments);for(var d in u){var p=u[d];c[0]=d,c[1]=p;var f=this.visitAttribute.apply(this,c);f!==p&&(h===u&&(h=r({},u)),h[d]=f)}}return h},visitAttribute:function(t,e){var n=i.call(arguments,2);return n[0]=e,this.visit.apply(this,n)}}),t.ToTextVisitor=t.Visitor.extend(),t.ToTextVisitor.def({visitNull:function(){return""},visitPrimitive:function(e){var i=String(e);return this.textMode===t.TEXTMODE.RCDATA?i.replace(/&/g,"&amp;").replace(/</g,"&lt;"):this.textMode===t.TEXTMODE.ATTRIBUTE?i.replace(/&/g,"&amp;").replace(/"/g,"&quot;"):i},visitArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.visit(t[i]));return e.join("")},visitComment:function(){throw new Error("Can't have a comment here")},visitCharRef:function(e){return this.textMode===t.TEXTMODE.RCDATA||this.textMode===t.TEXTMODE.ATTRIBUTE?e.html:e.str},visitRaw:function(t){return t.value},visitTag:function(t){return this.visit(this.toHTML(t))},visitObject:function(t){throw new Error("Unexpected object in htmljs in toText: "+t)},toHTML:function(e){return t.toHTML(e)}}),t.ToHTMLVisitor=t.Visitor.extend(),t.ToHTMLVisitor.def({visitNull:function(){return""},visitPrimitive:function(t){var e=String(t);return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},visitArray:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.visit(t[i]));return e.join("")},visitComment:function(t){return"<!--"+t.sanitizedValue+"-->"},visitCharRef:function(t){return t.html},visitRaw:function(t){return t.value},visitTag:function(e){var i=[],n=e.tagName,r=e.children,o=e.attrs;if(o){o=t.flattenAttributes(o);for(var s in o)if("value"===s&&"textarea"===n)r=[o[s],r];else{var a=this.toText(o[s],t.TEXTMODE.ATTRIBUTE);i.push(" "+s+'="'+a+'"')}}var l,u="<"+n+i.join("")+">",h=[];if("textarea"===n){for(var c=0;c<r.length;c++)h.push(this.toText(r[c],t.TEXTMODE.RCDATA));l=h.join(""),"\n"===l.slice(0,1)&&(l="\n"+l)}else{for(var c=0;c<r.length;c++)h.push(this.visit(r[c]));l=h.join("")}var d=u+l;return(r.length||!t.isVoidElement(n))&&(d+="</"+n+">"),d},visitObject:function(t){throw new Error("Unexpected object in htmljs in toHTML: "+t)},toText:function(e,i){return t.toText(e,i)}})}.call(this),function(){t.Tag=function(){},t.Tag.prototype.tagName="",t.Tag.prototype.attrs=null,t.Tag.prototype.children=Object.freeze?Object.freeze([]):[],t.Tag.prototype.htmljsType=t.Tag.htmljsType=["Tag"];var e=function(e){var n=function(){var e=this instanceof t.Tag?this:new n,r=0,o=arguments.length&&arguments[0];if(o&&"object"==typeof o)if(t.isConstructedObject(o)){if(o instanceof t.Attrs){var s=o.value;1===s.length?e.attrs=s[0]:s.length>1&&(e.attrs=s),r++}}else e.attrs=o,r++;return r<arguments.length&&(e.children=i.call(arguments,r)),e};return n.prototype=new t.Tag,n.prototype.constructor=n,n.prototype.tagName=e,n},n=t.Attrs=function(){var t=this instanceof n?this:new n;return t.value=i.call(arguments),t};t.getTag=function(i){var n=t.getSymbolName(i);if(n===i)throw new Error("Use the lowercase or camelCase form of '"+i+"' here");return t[n]||(t[n]=e(i)),t[n]},t.ensureTag=function(e){t.getTag(e)},t.isTagEnsured=function(e){return t.isKnownElement(e)},t.getSymbolName=function(t){return t.toUpperCase().replace(/-/g,"_")},t.knownElementNames="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),t.knownSVGElementNames="altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect script set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" "),t.knownElementNames=t.knownElementNames.concat(t.knownSVGElementNames),t.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");var r={yes:!0},o=function(t){for(var e={},i=0;i<t.length;i++)e[t[i]]=r;return e},s=o(t.voidElementNames),a=o(t.knownElementNames),l=o(t.knownSVGElementNames);t.isKnownElement=function(t){return a[t]===r},t.isKnownSVGElement=function(t){return l[t]===r},t.isVoidElement=function(t){return s[t]===r};for(var u=0;u<t.knownElementNames.length;u++)t.ensureTag(t.knownElementNames[u]);var h=t.CharRef=function(t){if(!(this instanceof h))return new h(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str};h.prototype.htmljsType=h.htmljsType=["CharRef"];var c=t.Comment=function(t){if(!(this instanceof c))return new c(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")};c.prototype.htmljsType=c.htmljsType=["Comment"];var d=t.Raw=function(t){if(!(this instanceof d))return new d(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t};d.prototype.htmljsType=d.htmljsType=["Raw"],t.isArray=function(t){return t instanceof Array},t.isConstructedObject=function(t){return t&&"object"==typeof t&&t.constructor!==Object&&!Object.prototype.hasOwnProperty.call(t,"constructor")},t.isNully=function(e){if(null==e)return!0;if(t.isArray(e)){for(var i=0;i<e.length;i++)if(!t.isNully(e[i]))return!1;return!0}return!1},t.isValidAttributeName=function(t){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(t)},t.flattenAttributes=function(e){if(!e)return e;var i=t.isArray(e);if(i&&0===e.length)return null;for(var n={},r=0,o=i?e.length:1;o>r;r++){var s=i?e[r]:e;if("object"!=typeof s||t.isConstructedObject(s))throw new Error("Expected plain JS object as attrs, found: "+s);for(var a in s){if(!t.isValidAttributeName(a))throw new Error("Illegal HTML attribute name: "+a);var l=s[a];t.isNully(l)||(n[a]=l)}}return n},t.toHTML=function(e){return(new t.ToHTMLVisitor).visit(e)},t.TEXTMODE={STRING:1,RCDATA:2,ATTRIBUTE:3},t.toText=function(e,i){if(!i)throw new Error("textMode required for HTML.toText");if(i!==t.TEXTMODE.STRING&&i!==t.TEXTMODE.RCDATA&&i!==t.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+i);var n=new t.ToTextVisitor({textMode:i});return n.visit(e)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.htmljs={HTML:t}}(),function(){var t,e,i,n,r=Package.meteor.Meteor,o=Package.jquery.$,s=Package.jquery.jQuery,a=Package.deps.Deps,l=Package.underscore._,u=Package.htmljs.HTML,h=Package["observe-sequence"].ObserveSequence;(function(){t={}}).call(this),function(){var e={};t.DOMBackend=e;var i="undefined"!=typeof s?s:"undefined"!=typeof Package?Package.jquery&&Package.jquery.jQuery:null;if(!i)throw new Error("jQuery not found");e._$jq=i,e.parseHTML=function(t){return i.parseHTML(t)||[]},e.Events={delegateEvents:function(t,e,n,r){i(t).on(e,n,r)},undelegateEvents:function(t,e,n){i(t).off(e,"**",n)},bindEventCapturer:function(t,n,r,o){var s=i(t),a=function(e){e=i.event.fix(e),e.currentTarget=e.target;var n=i(e.currentTarget);n.is(s.find(r))&&o.call(t,e)};o._meteorui_wrapper=a,n=e.Events.parseEventType(n),t.addEventListener(n,a,!0)},unbindEventCapturer:function(t,i,n){i=e.Events.parseEventType(i),t.removeEventListener(i,n._meteorui_wrapper,!0)},parseEventType:function(t){var e=t.indexOf(".");return e>=0?t.slice(0,e):t}};var n=function(){},r=function(t){this.next=this,this.prev=this,this.func=t};r.prototype.linkBefore=function(t){this.prev=t.prev,this.next=t,t.prev.next=this,t.prev=this},r.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},r.prototype.go=function(){var t=this.func;t&&t()},r.prototype.stop=r.prototype.unlink,e.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(t,o){var s=new r(o),a=e.Teardown._CB_PROP;return t[a]||(t[a]=new r,i(t).on(e.Teardown._JQUERY_EVENT_NAME,n)),s.linkBefore(t[a]),s},tearDownElement:function(t){for(var e=[],n=t.getElementsByTagName("*"),r=0;r<n.length;r++)e.push(n[r]);e.push(t),i.cleanData(e)}},i.event.special[e.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var t=this,i=t[e.Teardown._CB_PROP];if(i){for(var n=i.next;n!==i;)n.go(),n=n.next;i.go(),t[e.Teardown._CB_PROP]=null}}},e.findBySelector=function(t,e){return i(t,e)}}.call(this),function(){var e=Object.freeze?Object.freeze([]):[];t.DOMRange=function(t){if(!(this instanceof i))return new i(t);var n=t||e;if(!n||"number"!=typeof n.length)throw new Error("Expected array");for(var r=0;r<n.length;r++)this._memberIn(n[r]);this.members=n,this.emptyRangePlaceholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null,this.attachedCallbacks=e};var i=t.DOMRange;i._USE_COMMENT_PLACEHOLDERS=function(){var t=!1,e=document.createTextNode("");try{e.someProp=!0}catch(i){t=!0}return t}(),i._insert=function(t,e,n,r){var o=t;o instanceof i?o.attach(e,n,r):r?i._moveNodeWithHooks(o,e,n):i._insertNodeWithHooks(o,e,n)},i._remove=function(t){var e=t;e instanceof i?e.detach():i._removeNodeWithHooks(e)},i._removeNodeWithHooks=function(t){t.parentNode&&(1===t.nodeType&&t.parentNode._uihooks&&t.parentNode._uihooks.removeElement?t.parentNode._uihooks.removeElement(t):t.parentNode.removeChild(t))},i._insertNodeWithHooks=function(t,e,i){i=i||null,1===t.nodeType&&e._uihooks&&e._uihooks.insertElement?e._uihooks.insertElement(t,i):e.insertBefore(t,i)},i._moveNodeWithHooks=function(t,e,i){t.parentNode===e&&(i=i||null,1===t.nodeType&&e._uihooks&&e._uihooks.moveElement?e._uihooks.moveElement(t,i):e.insertBefore(t,i))},i.forElement=function(t){if(1!==t.nodeType)throw new Error("Expected element, found: "+t);for(var e=null;t&&!e;)e=t.$blaze_range||null,e||(t=t.parentNode);return e},i.prototype.attach=function(t,e,n){if(n&&(this.parentElement!==t||!this.attached))throw new Error("Can only move an attached DOMRange, and only under the same parent element");var r=this.members;if(r.length){this.emptyRangePlaceholder=null;for(var o=0;o<r.length;o++)i._insert(r[o],t,e,n)}else{var s=i._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=s,t.insertBefore(s,e||null)}if(this.attached=!0,this.parentElement=t,!n)for(var o=0;o<this.attachedCallbacks.length;o++){var a=this.attachedCallbacks[o];a.attached&&a.attached(this,t)}},i.prototype.setMembers=function(t){var e=t;if(!e||"number"!=typeof e.length)throw new Error("Expected array");for(var i=this.members,n=0;n<i.length;n++)this._memberOut(i[n]);for(var n=0;n<e.length;n++)this._memberIn(e[n]);if(this.attached){if(e.length||i.length){var r=this.lastNode().nextSibling,o=this.parentElement;this.detach(),this.members=e,this.attach(o,r)}}else this.members=e},i.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var t=this.members[0];return t instanceof i?t.firstNode():t},i.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var t=this.members[this.members.length-1];return t instanceof i?t.lastNode():t},i.prototype.detach=function(){if(!this.attached)throw new Error("Must be attached");var t=this.parentElement,e=this.members;if(e.length)for(var n=0;n<e.length;n++)i._remove(e[n]);else{var r=this.emptyRangePlaceholder;this.parentElement.removeChild(r),this.emptyRangePlaceholder=null}this.attached=!1,this.parentElement=null;for(var n=0;n<this.attachedCallbacks.length;n++){var o=this.attachedCallbacks[n];o.detached&&o.detached(this,t)}},i.prototype.addMember=function(t,e,n){var r=this.members;if(!(e>=0&&e<=r.length))throw new Error("Bad index in range.addMember: "+e);if(n||this._memberIn(t),this.attached)if(0===r.length)this.setMembers([t]);else{var o;if(e===r.length)o=this.lastNode().nextSibling;else{var s=r[e];o=s instanceof i?s.firstNode():s}r.splice(e,0,t),i._insert(t,this.parentElement,o,n)}else r.splice(e,0,t)},i.prototype.removeMember=function(t,n){var r=this.members;if(!(t>=0&&t<r.length))throw new Error("Bad index in range.removeMember: "+t);if(n)r.splice(t,1);else{var o=r[t];this._memberOut(o),1===r.length?this.setMembers(e):(r.splice(t,1),this.attached&&i._remove(o))}},i.prototype.moveMember=function(t,e){var i=this.members[t];this.removeMember(t,!0),this.addMember(i,e,!0)},i.prototype.getMember=function(t){var e=this.members;if(!(t>=0&&t<e.length))throw new Error("Bad index in range.getMember: "+t);return this.members[t]},i.prototype._memberIn=function(t){t instanceof i?t.parentRange=this:1===t.nodeType&&(t.$blaze_range=this)},i._destroy=function(e,n){e instanceof i?(e.view&&t.destroyView(e.view,n),e.parentRange=null):n||1!==e.nodeType||e.$blaze_range&&(t.destroyNode(e),e.$blaze_range=null)},i.prototype._memberOut=i._destroy,i.prototype.destroyMembers=function(t){for(var e=this.members,i=0;i<e.length;i++)this._memberOut(e[i],t)},i.prototype.destroy=function(t){i._destroy(this,t)},i.prototype.containsElement=function(e){if(!this.attached)throw new Error("Must be attached");if(!t._elementContains(this.parentElement,e))return!1;for(;e.parentNode!==this.parentElement;)e=e.parentNode;for(var i=e.$blaze_range;i&&i!==this;)i=i.parentRange;return i===this},i.prototype.containsRange=function(t){if(!this.attached)throw new Error("Must be attached");if(!t.attached)return!1;if(t.parentElement!==this.parentElement)return this.containsElement(t.parentElement);if(t===this)return!1;for(;t&&t!==this;)t=t.parentRange;return t===this},i.prototype.onAttached=function(t){this.onAttachedDetached({attached:t})},i.prototype.onAttachedDetached=function(t){this.attachedCallbacks===e&&(this.attachedCallbacks=[]),this.attachedCallbacks.push(t)},i.prototype.$=function(e){var i=this,n=this.parentElement;if(!n)throw new Error("Can't select in removed DomRange");if(11===n.nodeType)throw new Error("Can't use $ on an offscreen range");var r=t.DOMBackend.findBySelector(e,n),o=function(t){return"number"==typeof t&&(t=this),i.containsElement(t)};if(r.filter)r=r.filter(o);else{for(var s=[],a=0;a<r.length;a++){var l=r[a];o(l)&&s.push(l)}r=s}return r},t._elementContains=function(t,e){return 1!==t.nodeType?!1:t===e?!1:t.compareDocumentPosition?16&t.compareDocumentPosition(e):(e=e.parentNode,e&&1===e.nodeType?t===e?!0:t.contains(e):!1)}}.call(this),function(){var e=t.EventSupport={},i=t.DOMBackend,n=e.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},r=e.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2},o=1,s=function(t,e,s,a,u){this.elem=t,this.type=e,this.selector=s,this.handler=a,this.recipient=u,this.id=o++,this.mode=r.TBD,this.delegatedHandler=function(t){return function(e){return t.selector||e.currentTarget===e.target?t.handler.apply(t.recipient,arguments):void 0}}(this);var h=t.addEventListener&&!l.has(n,i.Events.parseEventType(e));h?this.capturingHandler=function(t){return function(e){if(t.mode===r.TBD){if(e.bubbles)return t.mode=r.BUBBLING,void i.Events.unbindEventCapturer(t.elem,t.type,t.capturingHandler);t.mode=r.CAPTURING,i.Events.undelegateEvents(t.elem,t.type,t.delegatedHandler)}t.delegatedHandler(e)}}(this):this.mode=r.BUBBLING};e.HandlerRec=s,s.prototype.bind=function(){this.mode!==r.BUBBLING&&i.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler),this.mode!==r.CAPTURING&&i.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},s.prototype.unbind=function(){this.mode!==r.BUBBLING&&i.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==r.CAPTURING&&i.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)},e.listen=function(t,e,i,n,r,o){var a=[];e.replace(/[^ /]+/g,function(t){a.push(t)});for(var l=[],u=0,h=a.length;h>u;u++){var c=a[u],d=t.$blaze_events;d||(d=t.$blaze_events={});var p=d[c];p||(p=d[c]={},p.handlers=[]);var f=p.handlers,m=new s(t,c,i,n,r);if(l.push(m),m.bind(),f.push(m),o)for(var g=o(r);g;g=o(g))for(var _=0,y=f.length;y>_;_++){var v=f[_];v.recipient===g&&(v.unbind(),v.bind(),f.splice(_,1),f.push(v),_--,y--)}}return{stop:function(){var e=t.$blaze_events;if(e){for(var i=0;i<l.length;i++){var n=l[i],r=e[n.type];if(r)for(var o=r.handlers,s=o.length-1;s>=0;s--)o[s]===n&&(n.unbind(),o.splice(s,1))}l.length=0}}}}}.call(this),function(){e=function(t,e){this.name=t,this.value=e},e.prototype.update=function(t,e,i){null===i?null!==e&&t.removeAttribute(this.name):t.setAttribute(this.name,i)},e.extend=function(t){var i=this,n=function(){e.apply(this,arguments)};return n.prototype=new i,n.extend=i.extend,t&&l.extend(n.prototype,t),n};var t=e.extend({update:function(t,e,i){if(!this.getCurrentValue||!this.setValue||!this.parseValue)throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var n=e?this.parseValue(e):{},r=i?this.parseValue(i):{},o=this.getCurrentValue(t),s=o?this.parseValue(o):{};l.each(l.keys(n),function(t){t in r||delete s[t]}),l.each(l.keys(r),function(t){s[t]=r[t]}),this.setValue(t,l.values(s).join(" "))}}),s=t.extend({getCurrentValue:function(t){return t.className},setValue:function(t,e){t.className=e},parseValue:function(t){var e={};return l.each(t.split(" "),function(t){t&&(e[t]=t)}),e}}),a=s.extend({getCurrentValue:function(t){return t.className.baseVal},setValue:function(t,e){t.setAttribute("class",e)}}),u=t.extend({getCurrentValue:function(t){return t.getAttribute("style")},setValue:function(t,e){""===e?t.removeAttribute("style"):t.setAttribute("style",e)},parseValue:function(t){for(var e={},i=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g,n=i.exec(t);n;)e[" "+n[1]]=n[0].trim?n[0].trim():o.trim(n[0]),n=i.exec(t);return e}}),h=e.extend({update:function(t,e,i){var n=this.name;null==i?null!=e&&(t[n]=!1):t[n]=!0}}),c=e.extend({update:function(t,e,i){t.value=i}}),d=e.extend({update:function(t,e,i){var n="http://www.w3.org/1999/xlink";null===i?null!==e&&t.removeAttributeNS(n,this.name):t.setAttributeNS(n,this.name,this.value)}}),p=function(t){return"ownerSVGElement"in t},f=function(t,e){var i={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};
if("itemid"===e)return!0;var n=i[t]||[];return l.contains(n,e)};if(r.isClient)var m=document.createElement("A");var g=function(t){if(r.isClient)return m.href=t,(m.protocol||"").toLowerCase();throw new Error("getUrlProtocol not implemented on the server")},_=e.prototype.update,y=e.extend({update:function(t,e,i){var n=this,o=arguments;if(UI._javascriptUrlsAllowed())_.apply(n,o);else{var s="javascript:"===g(i);s?(r._debug("URLs that use the 'javascript:' protocol are not allowed in URL attribute values. Call UI._allowJavascriptUrls() to enable them."),_.apply(n,[t,e,null])):_.apply(n,o)}}});i=function(t,i,n){return"class"===i?p(t)?new a(i,n):new s(i,n):"style"===i?new u(i,n):"OPTION"===t.tagName&&"selected"===i||"INPUT"===t.tagName&&"checked"===i?new h(i,n):"TEXTAREA"!==t.tagName&&"INPUT"!==t.tagName||"value"!==i?"xlink:"===i.substring(0,6)?new d(i.substring(6),n):f(t.tagName,i)?new y(i,n):new e(i,n):new c(i,n)},n=function(t){this.elem=t,this.handlers={}},n.prototype.update=function(t){var e=this.elem,n=this.handlers;for(var r in n)if(!l.has(t,r)){var o=n[r],s=o.value;o.value=null,o.update(e,s,null),delete n[r]}for(var r in t){var s,o=null,a=t[r];l.has(n,r)?(o=n[r],s=o.value):null!==a&&(o=i(e,r,a),n[r]=o,s=null),s!==a&&(o.value=a,o.update(e,s,a),null===a&&delete n[r])}}}.call(this),function(){t.DOMMaterializer=u.Visitor.extend(),t.DOMMaterializer.def({visitNull:function(t,e){return e},visitPrimitive:function(t,e){var i=String(t);return e.push(document.createTextNode(i)),e},visitCharRef:function(t,e){return this.visitPrimitive(t.str,e)},visitArray:function(t,e){for(var i=0;i<t.length;i++)this.visit(t[i],e);return e},visitComment:function(t,e){return e.push(document.createComment(t.sanitizedValue)),e},visitRaw:function(e,i){for(var n=t.DOMBackend.parseHTML(e.value),r=0;r<n.length;r++)i.push(n[r]);return i},visitTag:function(i,r){var o,s=this,h=i.tagName;o=(u.isKnownSVGElement(h)||e(i))&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h);var c=i.attrs,d=i.children;if("textarea"===h&&i.children.length&&!(c&&"value"in c)){if("function"==typeof c||u.isArray(c))throw new Error("Can't have reactive children of TEXTAREA node; use the 'value' attribute instead.");c=l.extend({},c||null),c.value=t._expand(d,s.parentView),d=[]}if(c){var p,f=new n(o),m=function(){var e=s.parentView,i=t._expandAttributes(c,e),n=u.flattenAttributes(i),r={};for(var o in n)r[o]=t.toText(n[o],e,u.TEXTMODE.STRING);f.update(r)};p=s.parentView?s.parentView.autorun(m):a.nonreactive(function(){return a.autorun(function(){a.withCurrentView(s.parentView,m)})}),t.DOMBackend.Teardown.onElementTeardown(o,function(){p.stop()})}for(var g=s.visit(d,[]),_=0;_<g.length;_++){var y=g[_];y instanceof t.DOMRange?y.attach(o):o.appendChild(y)}return r.push(o),r},visitObject:function(e,i){return t.isTemplate(e)&&(e=t.runTemplate(e)),e instanceof t.View?(i.push(t.materializeView(e,this.parentView)),i):u.Visitor.prototype.visitObject.call(this,e)}});var e=function(t){return"a"===t.tagName&&t.attrs&&void 0!==t.attrs["xlink:href"]}}.call(this),function(){var e;t._throwNextException=!1,t.reportException=function(i,n){if(t._throwNextException)throw t._throwNextException=!1,i;e||(e=function(){return"undefined"!=typeof r?r._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),e()(n||"Exception caught in template:",i.stack||i.message)},t.wrapCatchingExceptions=function(e,i){return"function"!=typeof e?e:function(){try{return e.apply(this,arguments)}catch(n){t.reportException(n,"Exception in "+i+":")}}}}.call(this),function(){t.ReactiveVar=function(e,i){return this instanceof t.ReactiveVar?(this.curValue=e,this.equalsFunc=i,void(this.dep=new a.Dependency)):new t.ReactiveVar(e,i)},t.ReactiveVar._isEqual=function(t,e){var i=t,n=e;return i!==n?!1:!i||"number"==typeof i||"boolean"==typeof i||"string"==typeof i},t.ReactiveVar.prototype.get=function(){return a.active&&this.dep.depend(),this.curValue},t.ReactiveVar.prototype.set=function(e){var i=this.curValue;(this.equalsFunc||t.ReactiveVar._isEqual)(i,e)||(this.curValue=e,this.dep.changed())},t.ReactiveVar.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"}}.call(this),function(){t.View=function(e,i){return this instanceof t.View?("function"==typeof e&&(i=e,e=""),this.kind=e,this.render=i,this._callbacks={created:null,materialized:null,rendered:null,destroyed:null},this.isCreated=!1,this.isCreatedForExpansion=!1,this.isDestroyed=!1,this.isInRender=!1,this.parentView=null,this.domrange=null,void(this.renderCount=0)):new t.View(e,i)},t.View.prototype.render=function(){return null},t.View.prototype.onCreated=function(t){this._callbacks.created=this._callbacks.created||[],this._callbacks.created.push(t)},t.View.prototype.onMaterialized=function(t){this._callbacks.materialized=this._callbacks.materialized||[],this._callbacks.materialized.push(t)},t.View.prototype.onRendered=function(t){this._callbacks.rendered=this._callbacks.rendered||[],this._callbacks.rendered.push(t)},t.View.prototype.onDestroyed=function(t){this._callbacks.destroyed=this._callbacks.destroyed||[],this._callbacks.destroyed.push(t)},t.View.prototype.autorun=function(e,i){var n=this;if(!n.isCreated)throw new Error("View#autorun must be called from the created callback at the earliest");if(this.isInRender)throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback");if(a.active)throw new Error("Can't call View#autorun from a Deps Computation; try calling it from the created or rendered callback");var r=a.autorun(function(r){return t.withCurrentView(i||n,function(){return e.call(n,r)})});return n.onDestroyed(function(){r.stop()}),r},t._fireCallbacks=function(e,i){t.withCurrentView(e,function(){a.nonreactive(function(){for(var t=e._callbacks[i],n=0,r=t&&t.length;r>n;n++)t[n].call(e)})})},t.materializeView=function(e,i){if(e.parentView=i||null,e.isCreated)throw new Error("Can't render the same View twice");e.isCreated=!0,t._fireCallbacks(e,"created");var n,r,o=!1,s=function(){o&&!e.isDestroyed&&e._callbacks.rendered&&e._callbacks.rendered.length&&a.afterFlush(function(){o&&!e.isDestroyed&&(o=!1,t._fireCallbacks(e,"rendered"))})};return a.nonreactive(function(){e.autorun(function(i){e.renderCount++,e.isInRender=!0;var l=e.render();e.isInRender=!1,a.nonreactive(function(){var a=new t.DOMMaterializer({parentView:e}),u=a.visit(l,[]);(i.firstRun||!t._isContentEqual(r,l))&&(i.firstRun?(n=new t.DOMRange(u),e.domrange=n,n.view=e):n.setMembers(u),t._fireCallbacks(e,"materialized"),o=!0,i.firstRun||s())}),r=l,a.onInvalidate(function(){n.destroyMembers()})});var i=null;n.onAttached(function(n,r){i=t.DOMBackend.Teardown.onElementTeardown(r,function(){t.destroyView(e,!0)}),s()}),e.onDestroyed(function(){i&&i.stop(),i=null})}),n},t._expandView=function(e,i){if(e.parentView=i||null,e.isCreated)throw new Error("Can't render the same View twice");e.isCreated=!0,e.isCreatedForExpansion=!0,t._fireCallbacks(e,"created"),e.isInRender=!0;var n=t.withCurrentView(e,function(){return e.render()});e.isInRender=!1;var r=t._expand(n,e);return a.active?a.onInvalidate(function(){t.destroyView(e)}):t.destroyView(e),r},t.HTMLJSExpander=u.TransformingVisitor.extend(),t.HTMLJSExpander.def({visitObject:function(e){return t.isTemplate(e)&&(e=t.runTemplate(e)),e instanceof t.View?t._expandView(e,this.parentView):u.TransformingVisitor.prototype.visitObject.call(this,e)},visitAttributes:function(e){return"function"==typeof e&&(e=t.withCurrentView(this.parentView,e)),u.TransformingVisitor.prototype.visitAttributes.call(this,e)},visitAttribute:function(e,i,n){return"function"==typeof i&&(i=t.withCurrentView(this.parentView,i)),u.TransformingVisitor.prototype.visitAttribute.call(this,e,i,n)}});var e=function(){var e=t.currentView;return e&&e.isInRender?e:null};t._expand=function(i,n){return n=n||e(),new t.HTMLJSExpander({parentView:n}).visit(i)},t._expandAttributes=function(i,n){return n=n||e(),new t.HTMLJSExpander({parentView:n}).visitAttributes(i)},t.destroyView=function(e){e.isDestroyed||(e.isDestroyed=!0,t._fireCallbacks(e,"destroyed"),e.domrange&&e.domrange.destroyMembers())},t.destroyNode=function(e){1===e.nodeType&&t.DOMBackend.Teardown.tearDownElement(e)},t._isContentEqual=function(t,e){return t instanceof u.Raw?e instanceof u.Raw&&t.value===e.value:null==t?null==e:t===e&&("number"==typeof t||"boolean"==typeof t||"string"==typeof t)},t.currentView=null,t.withCurrentView=function(e,i){var n=t.currentView;try{return t.currentView=e,i()}finally{t.currentView=n}},t.isTemplate=function(t){return t&&"function"==typeof t.__makeView},t.runTemplate=function(e){if(!t.isTemplate(e))throw new Error("Not a template: "+e);var i=Array.prototype.slice.call(arguments,1);return e.__makeView.apply(e,i)},t.render=function(i,n){n=n||e();var r;if("function"==typeof i)r=t.View("render",i);else if(t.isTemplate(i))r=t.runTemplate(i);else{if(!(i instanceof t.View))throw new Error("Expected a function, template, or View in Blaze.render");r=i}return t.materializeView(r,n)},t.toHTML=function(i,n){if("function"==typeof i)throw new Error("Blaze.toHTML doesn't take a function, just HTMLjs");return n=n||e(),u.toHTML(t._expand(i,n))},t.toText=function(i,n,r){if("function"==typeof i)throw new Error("Blaze.toText doesn't take a function, just HTMLjs");if(null==n||n instanceof t.View||(r=n,n=null),n=n||e(),!r)throw new Error("textMode required");if(r!==u.TEXTMODE.STRING&&r!==u.TEXTMODE.RCDATA&&r!==u.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+r);return u.toText(t._expand(i,n),r)},t.getCurrentData=function(){var e=t.getCurrentView("with");return e?e.dataVar.get():null},t.getCurrentView=function(e){var i=t.currentView;if(!i)throw new Error("There is no current view");if(e){for(;i&&i.kind!==e;)i=i.parentView;return i||null}return i},t.getCurrentTemplateView=function(){for(var e=t.getCurrentView();e&&!e.template;)e=e.parentView;return e||null},t.getParentView=function(t,e){var i=t.parentView;if(e)for(;i&&i.kind!==e;)i=i.parentView;return i||null},t.getElementView=function(e,i){for(var n=t.DOMRange.forElement(e),r=null;n&&!r;)r=n.view||null,r||(n=n.parentRange?n.parentRange:t.DOMRange.forElement(n.parentElement));if(i){for(;r&&r.kind!==i;)r=r.parentView;return r||null}return r},t.getElementData=function(e){var i=t.getElementView(e,"with");return i?i.dataVar.get():null},t.getViewData=function(e){var i=t.getParentView(e,"with");return i?i.dataVar.get():null},t._addEventMap=function(e,i,n){n=n||null;var r=[];if(!e.domrange)throw new Error("View must have a DOMRange");e.domrange.onAttached(function(o,s){l.each(i,function(i,a){var u=a.split(/,\s+/);l.each(u,function(a){var l=a.split(/\s+/);if(0!==l.length){var u=l.shift(),h=l.join(" ");r.push(t.EventSupport.listen(s,u,h,function(r){if(!o.containsElement(r.currentTarget))return null;var s=n||this,a=arguments;return t.withCurrentView(e,function(){return i.apply(s,a)})},o,function(t){return t.parentRange}))}})})}),e.onDestroyed(function(){l.each(r,function(t){t.stop()}),r.length=0})}}.call(this),function(){t._calculateCondition=function(t){return t instanceof Array&&0===t.length&&(t=!1),!!t},t.With=function(e,i){var n=t.View("with",i);return n.dataVar=new t.ReactiveVar,n.onCreated(function(){"function"==typeof e?n.autorun(function(){n.dataVar.set(e())},n.parentView):n.dataVar.set(e)}),n},t.If=function(e,i,n,r){var o=new t.ReactiveVar,s=t.View(r?"unless":"if",function(){return o.get()?i():n?n():null});return s.__conditionVar=o,s.onCreated(function(){this.autorun(function(){var i=t._calculateCondition(e());o.set(r?!i:i)},this.parentView)}),s},t.Unless=function(e,i,n){return t.If(e,i,n,!0)},t.Each=function(e,i,n){var r=t.View("each",function(){var t=this.initialSubviews;return this.initialSubviews=null,this.isCreatedForExpansion&&(this.expandedValueDep=new a.Dependency,this.expandedValueDep.depend()),t});return r.initialSubviews=[],r.numItems=0,r.inElseMode=!1,r.stopHandle=null,r.contentFunc=i,r.elseFunc=n,r.argVar=new t.ReactiveVar,r.onCreated(function(){r.autorun(function(){r.argVar.set(e())},r.parentView),r.stopHandle=h.observe(function(){return r.argVar.get()},{addedAt:function(e,i,n){a.nonreactive(function(){var e=t.With(i,r.contentFunc);if(r.numItems++,r.expandedValueDep)r.expandedValueDep.changed();else if(r.domrange){r.inElseMode&&(r.domrange.removeMember(0),r.inElseMode=!1);var o=t.materializeView(e,r);r.domrange.addMember(o,n)}else r.initialSubviews.splice(n,0,e)})},removedAt:function(e,i,n){a.nonreactive(function(){r.numItems--,r.expandedValueDep?r.expandedValueDep.changed():r.domrange?(r.domrange.removeMember(n),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r.domrange.addMember(t.materializeView(t.View("each_else",r.elseFunc),r),0))):r.initialSubviews.splice(n,1)})},changedAt:function(t,e,i,n){a.nonreactive(function(){var t;r.expandedValueDep?r.expandedValueDep.changed():t=r.domrange?r.domrange.getMember(n).view:r.initialSubviews[n],t.dataVar.set(e)})},movedTo:function(t,e,i,n){a.nonreactive(function(){if(r.expandedValueDep)r.expandedValueDep.changed();else if(r.domrange)r.domrange.moveMember(i,n);else{var t=r.initialSubviews,e=t[i];t.splice(i,1),t.splice(n,0,e)}})}}),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r.initialSubviews[0]=t.View("each_else",r.elseFunc))}),r.onDestroyed(function(){r.stopHandle&&r.stopHandle.stop()}),r},t.InOuterTemplateScope=function(e,i){var n=t.View("InOuterTemplateScope",i),r=e.parentView;return r.__isTemplateWith&&(r=r.parentView),n.onCreated(function(){this.originalParentView=this.parentView,this.parentView=r}),n}}.call(this),function(){var e=function(e){return"function"==typeof e?function(){var i=t.getCurrentData();return null==i&&(i={}),e.apply(i,arguments)}:e},i=function(e){return t.wrapCatchingExceptions(e,"template helper")};t.View.prototype.lookup=function(n,r){var o=this.template,s=r&&r.template;if(/^\./.test(n)){if(!/^(\.)+$/.test(n))throw new Error("id starting with dot must be a series of dots");return t._parentData(n.length-1,!0)}return o&&n in o?i(e(o[n])):s&&Template.__lookup__(n)?Template.__lookup__(n):UI._globalHelpers[n]?i(e(UI._globalHelpers[n])):function(){var e=arguments.length>0,i=t.getCurrentData();if(s&&(!i||!i[n]))throw new Error("No such template: "+n);if(e&&(!i||!i[n]))throw new Error("No such function: "+n);if(!i)return null;var r=i[n];if("function"!=typeof r){if(e)throw new Error("Can't call non-function: "+r);return r}return r.apply(i,arguments)}},t._parentData=function(e,i){for(var n=t.getCurrentView("with"),r=0;e>r&&n;r++)n=t.getParentView(n,"with");return n?i?function(){return n.dataVar.get()}:n.dataVar.get():null},t.View.prototype.lookupTemplate=function(t){return this.lookup(t,{template:!0})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.blaze={Blaze:t}}(),function(){var t,e,i=(Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery,Package.deps.Deps,Package.random.Random,Package.ejson.EJSON,Package.underscore._,Package["ordered-dict"].OrderedDict,Package.minimongo.LocalCollection,Package.minimongo.Minimongo,Package["observe-sequence"].ObserveSequence,Package.htmljs.HTML,Package.blaze.Blaze);(function(){t={},t._globalHelpers={},t.registerHelper=function(e,i){t._globalHelpers[e]=i},t._escape=function(){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},e=function(e){return t[e]};return function(t){return t.replace(/[&<>"'`]/g,e)}}();var e=!1;t._allowJavascriptUrls=function(){e=!0},t._javascriptUrlsAllowed=function(){return e},t._parentData=i._parentData,t.getElementData=i.getElementData}).call(this),function(){e={},e.registerHelper=t.registerHelper,e._escape=t._escape,e.SafeString=function(t){this.string=t},e.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.ui={UI:t,Handlebars:e}}(),function(){var t,e=(Package.meteor.Meteor,Package.ui.UI),i=(Package.ui.Handlebars,Package.htmljs.HTML,Package.blaze.Blaze);(function(){t={},t.prototype=function(){return function(){}.prototype}(),t.prototype.helpers=function(t){for(var e in t)this[e]=t[e]},t.__updateTemplateInstance=function(t){var e=t._templateInstance;return e||(e=t._templateInstance={$:function(e){if(!t.domrange)throw new Error("Can't use $ on component with no DOM");return t.domrange.$(e)},findAll:function(t){return Array.prototype.slice.call(this.$(t))},find:function(t){var e=this.$(t);return e[0]||null},data:null,firstNode:null,lastNode:null,autorun:function(e){return t.autorun(e)},__view__:t}),e.data=i.getViewData(t),t.domrange&&!t.isDestroyed?(e.firstNode=t.domrange.firstNode(),e.lastNode=t.domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},e._templateInstance=function(){var e=i.getCurrentTemplateView();if(!e)throw new Error("No current template");return t.__updateTemplateInstance(e)},t.prototype.events=function(e){var n=this;n.__eventMaps=n.__eventMaps||[];var r={};for(var o in e)r[o]=function(e,n){return function(e){var r=this,o=i.getElementData(e.currentTarget);null==o&&(o={});var s=Array.prototype.slice.call(arguments),a=t.__updateTemplateInstance(r);return s.splice(1,0,a),n.apply(o,s)}}(o,e[o]);n.__eventMaps.push(r)},t.prototype.__makeView=function(e,n){var r=this,o=i.View(this.__viewName,this.__render);return o.template=r,o.templateContentBlock=e?t.__create__("(contentBlock)",e):null,o.templateElseBlock=n?t.__create__("(elseBlock)",n):null,(r.__eventMaps||"object"==typeof r.events)&&o.onMaterialized(function(){r.__eventMaps||"object"!=typeof r.events||t.prototype.events.call(r,r.events),_.each(r.__eventMaps,function(t){i._addEventMap(o,t,o)})}),r.__initView&&r.__initView(o),r.created&&o.onCreated(function(){var e=t.__updateTemplateInstance(o);r.created.call(e)}),r.rendered&&o.onRendered(function(){var e=t.__updateTemplateInstance(o);r.rendered.call(e)}),r.destroyed&&o.onDestroyed(function(){var e=t.__updateTemplateInstance(o);r.destroyed.call(e)}),o};var n=Object.prototype.hasOwnProperty;t.__lookup__=function(e){if(!n.call(t,e))return null;var i=t[e];return t.__isTemplate__(i)?i:null},t.__create__=function(e,i,n){var r=new t.prototype.constructor;return r.__viewName=e,r.__render=i,n&&(r.__initView=n),r},t.__define__=function(e,i){if(n.call(t,e)){if(t[e].__makeView)throw new Error("There are multiple templates named '"+e+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+e)}var r=t.__create__("Template."+e,i);return r.__templateName=e,t[e]=r,r},t.__isTemplate__=function(t){return t&&t.__makeView},t.__define__("__body__",function(){for(var e=t.__body__.__contentParts,i=0;i<e.length;i++)e[i].template=t.__body__;return e}),t.__body__.__contentParts=[],t.__body__.__isInstantiated=!1;var r=function(){if(!t.__body__.__isInstantiated){t.__body__.__isInstantiated=!0;var e=i.render(t.__body__);t.__body__.__view=e.view,e.attach(document.body)}};t.__body__.__instantiate=r,e.render=function(e){if(!t.__isTemplate__(e))throw new Error("Template required here");return i.render(e)},e.renderWithData=function(e,n){if(!t.__isTemplate__(e))throw new Error("Template required here");if("function"==typeof n)throw new Error("Data argument can't be a function");return i.render(i.With(n,function(){return e}))},e.insert=function(t,e,n){if(!e||"number"!=typeof e.nodeType)throw new Error("'parentElement' must be a DOM node");if(n&&"number"!=typeof n.nodeType)throw new Error("'nextNode' must be a DOM node");if(!t instanceof i.DOMRange)throw new Error("Expected template rendered with UI.render");t.attach(e,n)},e.remove=function(t){if(!t instanceof i.DOMRange)throw new Error("Expected template rendered with UI.render");t.attached&&t.detach(),t.destroy()},e.body=t.__body__}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.htmljs.HTML),i=(Package.ui.UI,Package.ui.Handlebars),n=(Package["observe-sequence"].ObserveSequence,Package.templating.Template),r=Package.blaze.Blaze;(function(){t={};var o=function(t,e){return t===e};t.include=function(t,e,i){if(!t)return null;if("function"!=typeof t){var s=t;if(!r.isTemplate(s))throw new Error("Expected template or null, found: "+s);return r.runTemplate(t,e,i)}var a=r.ReactiveVar(null,o),l=r.View("Spacebars.include",function(){var t=a.get();if(null===t)return null;if(!n.__isTemplate__(t))throw new Error("Expected template or null, found: "+t);return r.runTemplate(t,e,i)});return l.__templateVar=a,l.onCreated(function(){this.autorun(function(){a.set(t())})}),l},t.mustacheImpl=function(){var e=arguments;if(e.length>1){var i=e[e.length-1];if(i instanceof t.kw){var n={};for(var r in i.hash){var o=i.hash[r];n[r]="function"==typeof o?o():o}e[e.length-1]=t.kw(n)}else i=t.kw(),e=Array.prototype.slice.call(arguments),e.push(i)}return t.call.apply(null,e)},t.mustache=function(){var i=t.mustacheImpl.apply(null,arguments);return i instanceof t.SafeString?e.Raw(i.toString()):null==i||i===!1?null:String(i)},t.attrMustache=function(){var i=t.mustacheImpl.apply(null,arguments);if(null==i||""===i)return null;if("object"==typeof i)return i;if("string"==typeof i&&e.isValidAttributeName(i)){var n={};return n[i]="",n}throw new Error("Expected valid attribute name, '', null, or object")},t.dataMustache=function(){var e=t.mustacheImpl.apply(null,arguments);return e},t.makeRaw=function(t){return null==t?null:t instanceof e.Raw?t:e.Raw(t)},t.call=function(t){if("function"==typeof t){for(var e=[],i=1;i<arguments.length;i++){var n=arguments[i];e[i-1]="function"==typeof n?n():n}return t.apply(null,e)}if(arguments.length>1)throw new Error("Can't call non-function: "+t);return t},t.kw=function(e){return this instanceof t.kw?void(this.hash=e||{}):new t.kw(e)},t.SafeString=function(e){return this instanceof t.SafeString?new i.SafeString(e):new t.SafeString(e)},t.SafeString.prototype=i.SafeString.prototype,t.dot=function(e,i){if(arguments.length>2){var n=[];return n.push(t.dot(e,i)),n.push.apply(n,Array.prototype.slice.call(arguments,2)),t.dot.apply(null,n)}if("function"==typeof e&&(e=e()),!e)return e;var r=e[i];return"function"!=typeof r?r:function(){return r.apply(e,arguments)}},t.TemplateWith=function(t,e){var i,n=function(){var e=null;return i.parentView&&"InOuterTemplateScope"===i.parentView.kind&&(e=i.parentView.originalParentView),e?r.withCurrentView(e,t):t()};return i=r.With(n,e),i.__isTemplateWith=!0,i},t.With=function(t,e,i){var n=new r.ReactiveVar,o=r.View("Spacebars_with",function(){return r.If(function(){return n.get()},function(){return r.With(function(){return n.get()},e)},i)});return o.onCreated(function(){this.autorun(function(){n.set(t()),Deps.onInvalidate(function(){n.dep.changed()})})}),o}}).call(this),function(){n.__define__("__dynamic",function(){var e=this;return[r.View(function(){return t.mustache(e.lookup("checkContext"))}),"\n  ",r.If(function(){return t.call(e.lookup("dataContextPresent"))},function(){return["\n    ",t.include(e.lookupTemplate("__dynamicWithDataContext")),"\n  "]},function(){return["\n    \n    ",t.TemplateWith(function(){return{template:t.call(e.lookup("template")),data:t.call(e.lookup(".."))}},function(){return t.include(e.lookupTemplate("__dynamicWithDataContext"))}),"\n  "]})]}),n.__define__("__dynamicWithDataContext",function(){var e=this;return t.With(function(){return t.dataMustache(e.lookup("chooseTemplate"),e.lookup("template"))},function(){return["\n    ",t.TemplateWith(function(){return t.call(t.dot(e.lookup(".."),"data"))},function(){return t.include(e.lookupTemplate(".."))}),"    \n  "]})})}.call(this),function(){n.__dynamicWithDataContext.chooseTemplate=function(t){return n[t]||null},n.__dynamic.dataContextPresent=function(){return _.has(this,"data")},n.__dynamic.checkContext=function(){if(!_.has(this,"template"))throw new Error("Must specify name in the 'template' argument to {{> UI.dynamic}}.");_.each(this,function(t,e){if("template"!==e&&"data"!==e)throw new Error("Invalid argument to {{> UI.dynamic}}: "+e)})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spacebars={Spacebars:t}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){var t=(Package.meteor.Meteor,Package.underscore._),e=Package.ejson.EJSON;(function(){e.minify=function(i){var n={"false":0,"true":1,"null":2},r=[!1,!0,null],o=[0],s=function(t){return"undefined"==typeof n[t]&&(n[t]=r.push(t)-1),n[t]},a=function(t){var e=String(t);return"undefined"!=typeof n[e]?n[e]:null},l=function(t){for(var e=null,i=1;i<o.length;i++){for(var n=o[i],r=Math.min(n.length,t.length),s=!0,a=0;r>a;a++)if(n[a]!==t[a]){s=!1;break}if(s&&(e=i,t.length>r&&(o[i]=t)),null!==e)break}return null===e&&(e=o.push(t)-1),e},u=function(e){var i=!t.isArray(e),n=[],r=[];if(t.each(e,function(t,e){var o=i?s(e):0;if(null!==t&&"object"==typeof t)i&&r.push(o),n.push(u(t));else{var l=a(t);null===l?(r.push(o),n.push(t)):(r.push(-o),n.push(l))}}),i){var o=l(r);n.unshift(o)}else n.unshift(0);return n};if("object"!=typeof i)return e.stringify(i);var h=u(e.toJSONValue(i));return r.shift(),r.shift(),r.shift(),JSON.stringify([r,o,h])},e.maxify=function(i){var n=JSON.parse(String(i));if(null===n||3!==n.length)return e.fromJSONValue(n);var r=n[0],o=n[1],s=n[2];r.unshift(!1,!0,null);var a=function(e){var i=e.shift(),n=i?o[i]:null,s=null===n?[]:{};if(null===n)for(var l=0;l<e.length;l++)s.push(t.isArray(e[l])?a(e[l]):e[l]);else for(var l=0;l<e.length;l++){var u=n[l],h=r[Math.abs(u)];if(t.isArray(e[l]))s[h]=a(e[l]);else{var c=e[l];0>u&&(c=r[c]),s[h]=c}}return s};return e.fromJSONValue(a(s))}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ejson-minimax"]={}}(),function(){{var t,e=Package.meteor.Meteor,i=Package.deps.Deps,n=Package.retry.Retry;Package.livedata.DDP}(function(){var r=__meteor_runtime_config__.autoupdateVersion||"unknown",o=new e.Collection("meteor_autoupdate_clientVersions");t={},t.newClientAvailable=function(){return!!o.findOne({$and:[{current:!0},{_id:{$ne:r}}]})};var s=new n({minCount:0,baseTimeout:3e4}),a=0;t._retrySubscription=function(){e.subscribe("meteor_autoupdate_clientVersions",{onError:function(i){e._debug("autoupdate subscription failed:",i),a++,s.retryLater(a,function(){t._retrySubscription()})},onReady:function(){Package.reload&&i.autorun(function(t){o.findOne({current:!0})&&!o.findOne({_id:r})&&(t.stop(),Package.reload.Reload._reload())})}})},t._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:t}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._);(function(){t={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:e.find(document.styleSheets,function(t){return t.cssText&&!t.cssRules?!t.cssText.match(/meteor-css-not-found-error/):!e.find(t.cssRules,function(t){return".meteor-css-not-found-error"===t.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:t}}(),function(){{var t,e,i=Package.meteor.Meteor,n=Package.underscore._,r=Package.random.Random,o=Package.minimongo.LocalCollection,s=(Package.minimongo.Minimongo,Package.ejson.EJSON),a=Package.deps.Deps;Package.webapp.WebApp,Package.logging.Log,Package.session.Session,Package.livedata.DDP,Package.ui.UI,Package.ui.Handlebars,Package.spacebars.Spacebars,Package.templating.Template,Package.check.check,Package.check.Match,Package.jquery.$,Package.jquery.jQuery,Package.htmljs.HTML,Package.blaze.Blaze}(function(){"use strict";e={},e.connection=i.connection||i.default_connection,e.idParse=o&&o._idParse||i.idParse,e.subscriptionsReady=!1,e.subscriptionsReadyDeps=new a.Dependency,window.Meteor=i,window.console=window&&window.console&&window.console.log?window.console:{log:function(){}},e._isReloading=!1,e._storage=function(){var t,e,i;try{i=r.id(),(t=window.localStorage).setItem(i,i),e=t.getItem(i)!==i,t.removeItem(i),e&&(t=!1)}catch(n){}return t},e.storage=e._storage(),e._prefix="groundDB.",e._getGroundDBPrefix=function(t){return e._prefix+t},e._saveObject=function(i,n){if(e.storage&&e._isReloading===!1){var r=n&&s.minify(n);try{e.storage.setItem(e._getGroundDBPrefix(i),r)}catch(o){t.onQuotaExceeded()}}},e._loadObject=function(t){if(e.storage){var i=e.storage.getItem(e._getGroundDBPrefix(t));return i?s.maxify(i):null}return null},e.minify=function(t){return s.stringify(t)},e.maxify=function(t){return s.parse(t)},e.OneTimeout=function(){var t=this;t._id=null,t.oneTimeout=function(e,n){t._count++,null!==t._id&&i.clearTimeout(t._id),t._id=i.setTimeout(function(){t._id=null,e()},n)}},e._serverTimeDiff=0,e.storage&&(e._serverTimeDiff=1*e.storage.getItem(e._prefix+"timeDiff")||0,i.startup(function(){i.call("getServerTime",function(t,i){t||(e._serverTimeDiff=i-Date.now(),e.storage.setItem(e._prefix+"timeDiff",e._serverTimeDiff))})})),e._groundDatabases={},t=function(r,o){var s;s=r instanceof i.Collection?r:new i.Collection(r,o),s.offlineDatabase=!(null!==s._connection),s.name=s._name?s._name:"null",e._groundDatabases[s.name]=s,s.gdbSuper={},s._connection&&s._connection._stores[s.name]&&(s.gdbSuper.storeUpdate=s._connection._stores[s.name].update,s._connection._stores[s.name].update=function(t){var i=t.id&&e.idParse(t.id),n=t.id&&s._collection.findOne(i);"added"===t.msg&&n&&(delete s._localOnly[i],s._collection.remove(i)),"removed"!==t.msg||n||s._collection.insert({_id:i}),s.gdbSuper.storeUpdate(t)}),s._databaseLoaded=!1,s._localOnly={},s.removeLocalOnly=function(){n.each(s._localOnly,function(t,e){t&&(s._collection.remove({_id:e}),delete s._localOnly[e])})},s.isCleanedUp=!1,a.autorun(function(){t.ready()&&!s.isCleanedUp&&(s.isCleanedUp=!0,s.removeLocalOnly())}),s._checkDocs=function(t){var e={};return n.each(t,function(t,i){e[i]=t}),e},s._loadDatabase=function(){t.onResumeDatabase(s.name);var i=e._loadObject("db."+s.name);n.each(s._checkDocs(i?i._map:{}),function(t){var e=s._collection.findOne({_id:t._id});e||(s.offlineDatabase||(s._localOnly[t._id]=!0),s._collection.insert(t))}),s._databaseLoaded=!0};var l=new e.OneTimeout,u=new a.Dependency,h=function(){u.changed()};return s._saveDatabase=function(){s._databaseLoaded&&l.oneTimeout(function(){t.onCacheDatabase(s.name),e._saveObject("db."+s.name,s._collection._docs)},200)},s.find().observe({added:h,changed:h,removed:h}),i.autorun(function(){u.depend(),s._saveDatabase()}),s._loadDatabase(),s},window.GroundDB=t,t.onQuotaExceeded=function(){throw new Error("Quota exceeded!")},t.onResumeDatabase=function(){},t.onResumeMethods=function(){},t.onMethodCall=function(){},t.onCacheDatabase=function(){},t.onCacheMethods=function(){},t.onTabSync=function(){},t.onFlushInMemoryMethods=function(){},t.ready=function(){return e.subscriptionsReadyDeps.depend(),e.subscriptionsReady},t.saveObject=e._saveObject,t.loadObject=e._loadObject,t.now=function(){return Date.now()+e._serverTimeDiff},e.skipThisMethod={login:!0,getServerTime:!0},t.skipMethods=function(t){if("object"!=typeof t)throw new Error("skipMethods expects parametre as object of method names to skip when caching methods");for(var i in t)t.hasOwnProperty(i)&&(e.skipThisMethod[i]=!!t[i])},t.OneTimeout=e.OneTimeout,e._methodsResumed=!1,e._getMethodsList=function(){var t=[];return n.each(e.connection._methodInvokers,function(i){e.skipThisMethod[i._message.method]||t.push({method:i._message.method,args:i._message.params,options:{wait:i._wait}})}),t},e._flushInMemoryMethods=function(){var i=!1;if(e.connection&&e.connection._outstandingMethodBlocks&&e.connection._outstandingMethodBlocks.length){for(var n=0;n<e.connection._outstandingMethodBlocks.length;n++){var r=e.connection._outstandingMethodBlocks[n];r&&r._message&&!e.skipThisMethod[r._message.method]&&(delete e.connection._outstandingMethodBlocks[n],delete e.connection._methodInvokers[n],i=!0)}i&&t.onFlushInMemoryMethods()}},e._getMethodUpdates=function(i){var n=[];if(i&&i.length>0){var r=e._getMethodsList();r.length&&s.stringify(r[0])!==s.stringify(i[0])&&(e._flushInMemoryMethods(),r=[]);
for(var o=0;o<i.length;o++)if(o<r.length){if(s.stringify(r[o])!==s.stringify(i[o]))throw new Error("The method database is corrupted or out of sync at position: "+o)}else n.push(i[o]),t.onMethodCall(i[o])}else e._flushInMemoryMethods();return n},e._loadMethods=function(){var i=e._loadObject("methods");if(i=e._getMethodUpdates(i))for(;i.length>0;){var n=i.shift(),r=n.method.split("/"),o=r[1],s=r[2];if(o&&s&&e._groundDatabases[o]){var a=e.idParse(n.args&&n.args[0]?n.args[0]._id||n.args[0]:""),l=e._groundDatabases[o]._collection.findOne(a);l&&"insert"===s&&(e._groundDatabases[o]._collection.remove(a),delete e._groundDatabases[o]._localOnly[a])}e.connection.apply(n.method,n.args,n.options)}e._methodsResumed=!0,t.onResumeMethods()},e._saveMethods=function(){e._methodsResumed&&(t.onCacheMethods(),e._saveObject("methods",e._getMethodsList()))},i.setInterval(function(){var t=!0;for(var n in i.connection._subscriptions){var r=i.connection._subscriptions[n];if(!r.ready){t=!1;break}}t!==e.subscriptionsReady&&(e.subscriptionsReady=t,e.subscriptionsReadyDeps.changed())},5e3),i.startup(function(){i.setTimeout(function(){e._loadMethods()},500)});var l=new e.OneTimeout;e._syncDatabase=function(i){l.oneTimeout(function(){var r=e._groundDatabases[i];if(r){t.onTabSync("database",i);var o=e._loadObject("db."+i);r.find().forEach(function(t){r._collection.remove(t._id),"undefined"!=typeof o[t._id]&&(r._collection.insert(o[t._id]),delete o[t._id])}),n.each(o,function(t){r._collection.insert(t)})}},150)};var u=new e.OneTimeout;e._syncMethods=function(){e._isReloading=!0,u.oneTimeout(function(){t.onTabSync("methods"),e._loadMethods(),e._isReloading=!1},500)},n.extend(e.connection,{_gdbSuper:{apply:e.connection.apply,_outstandingMethodFinished:e.connection._outstandingMethodFinished},apply:function(){var t=this;t._gdbSuper.apply.apply(t,arguments),e._saveMethods()},_outstandingMethodFinished:function(){var t=this;t._gdbSuper._outstandingMethodFinished.apply(t),e._saveMethods()}}),"undefined"!=typeof window.addEventListener&&window.addEventListener("storage",function(t){var i=new RegExp("^"+e._prefix+"db.");t.key===e._prefix+"methods"&&e._syncMethods("mehods"),i.test(t.key)&&e._syncDatabase(t.key.replace(i,""))},!1)}).call(this),"undefined"==typeof Package&&(Package={}),Package.grounddb={GroundDB:t,_gDB:e}}(),function(){{var t,e=(Package.meteor.Meteor,Package.templating.Template,Package.spacebars.Spacebars,Package.session.Session),i=Package.jquery.$,n=Package.jquery.jQuery,r=Package.ui.UI;Package.ui.Handlebars,Package.htmljs.HTML,Package.blaze.Blaze}(function(){r.registerHelper("Session",function(){return e}),r.registerHelper("timer",function(t){return moment.utc(moment.duration(t,"seconds").asMilliseconds()).format("HH:mm:ss")})}).call(this),function(){(function(){var e=this,i=i||{};i.WEBGL_RENDERER=0,i.CANVAS_RENDERER=1,i.VERSION="v1.5.2",i.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},i.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},i.INTERACTION_FREQUENCY=30,i.AUTO_PREVENT_DEFAULT=!0,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.Point=function(t,e){this.x=t||0,this.y=e||0},i.Point.prototype.clone=function(){return new i.Point(this.x,this.y)},i.Point.prototype.constructor=i.Point,i.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},i.Rectangle=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},i.Rectangle.prototype.clone=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=this.x;if(t>=i&&t<=i+this.width){var n=this.y;if(e>=n&&e<=n+this.height)return!0}return!1},i.Rectangle.prototype.constructor=i.Rectangle,i.EmptyRectangle=new i.Rectangle(0,0,0,0),i.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],n=0,r=t.length;r>n;n+=2)e.push(new i.Point(t[n],t[n+1]));t=e}this.points=t},i.Polygon.prototype.clone=function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new i.Polygon(t)},i.Polygon.prototype.contains=function(t,e){for(var i=!1,n=0,r=this.points.length-1;n<this.points.length;r=n++){var o=this.points[n].x,s=this.points[n].y,a=this.points[r].x,l=this.points[r].y,u=s>e!=l>e&&(a-o)*(e-s)/(l-s)+o>t;u&&(i=!i)}return i},i.Polygon.prototype.constructor=i.Polygon,i.Circle=function(t,e,i){this.x=t||0,this.y=e||0,this.radius=i||0},i.Circle.prototype.clone=function(){return new i.Circle(this.x,this.y,this.radius)},i.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.x-t,n=this.y-e,r=this.radius*this.radius;return i*=i,n*=n,r>=i+n},i.Circle.prototype.constructor=i.Circle,i.Ellipse=function(t,e,i,n){this.x=t||0,this.y=e||0,this.width=i||0,this.height=n||0},i.Ellipse.prototype.clone=function(){return new i.Ellipse(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,n=(e-this.y)/this.height;return i*=i,n*=n,1>=i+n},i.Ellipse.prototype.getBounds=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},i.Ellipse.prototype.constructor=i.Ellipse,i.determineMatrixArrayType=function(){return"undefined"!=typeof Float32Array?Float32Array:Array},i.Matrix2=i.determineMatrixArrayType(),i.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},i.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},i.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(this.array[0]=this.a,this.array[1]=this.c,this.array[2]=0,this.array[3]=this.b,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty,this.array[8]=1):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0,this.array[8]=1),e},i.identityMatrix=new i.Matrix,i.DisplayObject=function(){this.position=new i.Point,this.scale=new i.Point(1,1),this.pivot=new i.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new i.Matrix,this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new i.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},i.DisplayObject.prototype.constructor=i.DisplayObject,i.DisplayObject.prototype.setInteractive=function(t){this.interactive=t},Object.defineProperty(i.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(i.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(i.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],i=0;i<t.length;i++)for(var n=t[i].passes,r=0;r<n.length;r++)e.push(n[r]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(i.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),i.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.parent.worldTransform,e=this.worldTransform,i=this.pivot.x,n=this.pivot.y,r=this._cr*this.scale.x,o=-this._sr*this.scale.y,s=this._sr*this.scale.x,a=this._cr*this.scale.y,l=this.position.x-r*i-n*o,u=this.position.y-a*n-i*s,h=t.a,c=t.b,d=t.c,p=t.d;e.a=h*r+c*s,e.b=h*o+c*a,e.tx=h*l+c*u+t.tx,e.c=d*r+p*s,e.d=d*o+p*a,e.ty=d*l+p*u+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha},i.DisplayObject.prototype.getBounds=function(t){return t=t,i.EmptyRectangle},i.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(i.identityMatrix)},i.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},i.DisplayObject.prototype.generateTexture=function(t){var e=this.getLocalBounds(),n=new i.RenderTexture(0|e.width,0|e.height,t);return n.render(this,new i.Point(-e.x,-e.y)),n},i.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},i.DisplayObject.prototype._renderCachedSprite=function(t){t.gl?i.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):i.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},i.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new i.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new i.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var n=this._filters;this._filters=null,this._cachedSprite.filters=n,this._cachedSprite.texture.render(this,new i.Point(-t.x,-t.y)),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=n,this._cacheAsBitmap=!0},i.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},i.DisplayObject.prototype._renderWebGL=function(t){t=t},i.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(i.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(i.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),i.DisplayObjectContainer=function(){i.DisplayObject.call(this),this.children=[]},i.DisplayObjectContainer.prototype=Object.create(i.DisplayObject.prototype),i.DisplayObjectContainer.prototype.constructor=i.DisplayObjectContainer,i.DisplayObjectContainer.prototype.addChild=function(t){this.addChildAt(t,this.children.length)},i.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(!(e>=0&&e<=this.children.length))throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length);t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage)},i.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var i=this.children.indexOf(t),n=this.children.indexOf(e);if(0>i||0>n)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[i]=e,this.children[n]=t}},i.DisplayObjectContainer.prototype.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller")},i.DisplayObjectContainer.prototype.removeChild=function(t){return this.removeChildAt(this.children.indexOf(t))},i.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},i.DisplayObjectContainer.prototype.removeChildren=function(t,e){var i=t||0,n="number"==typeof e?e:this.children.length,r=n-i;if(r>0&&n>=r){for(var o=this.children.splice(i,r),s=0;s<o.length;s++){var a=o[s];this.stage&&a.removeStageReference(),a.parent=void 0}return o}throw new Error("Range Error, numeric values are outside the acceptable range")},i.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(i.DisplayObject.prototype.updateTransform.call(this),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},i.DisplayObjectContainer.prototype.getBounds=function(t){if(0===this.children.length)return i.EmptyRectangle;if(t){var e=this.worldTransform;this.worldTransform=t,this.updateTransform(),this.worldTransform=e}for(var n,r,o,s=1/0,a=1/0,l=-1/0,u=-1/0,h=!1,c=0,d=this.children.length;d>c;c++){var p=this.children[c];p.visible&&(h=!0,n=this.children[c].getBounds(t),s=s<n.x?s:n.x,a=a<n.y?a:n.y,r=n.width+n.x,o=n.height+n.y,l=l>r?l:r,u=u>o?u:o)}if(!h)return i.EmptyRectangle;var f=this._bounds;return f.x=s,f.y=a,f.width=l-s,f.height=u-a,f},i.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=i.identityMatrix;for(var e=0,n=this.children.length;n>e;e++)this.children[e].updateTransform();var r=this.getBounds();return this.worldTransform=t,r},i.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,i=this.children.length;i>e;e++){var n=this.children[e];n.setStageReference(t)}},i.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var i=this.children[t];i.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},i.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,i;if(this._mask||this._filters){for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.spriteBatch.start()}else for(e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},i.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t.context);for(var e=0,i=this.children.length;i>e;e++){var n=this.children[e];n._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},i.Sprite=function(t){i.DisplayObjectContainer.call(this),this.anchor=new i.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL,t.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},i.Sprite.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Sprite.prototype.constructor=i.Sprite,Object.defineProperty(i.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(i.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),i.Sprite.prototype.setTexture=function(t){this.texture.baseTexture!==t.baseTexture?(this.textureChange=!0,this.texture=t):this.texture=t,this.cachedTint=16777215,this.updateFrame=!0},i.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},i.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,i=this.texture.frame.height,n=e*(1-this.anchor.x),r=e*-this.anchor.x,o=i*(1-this.anchor.y),s=i*-this.anchor.y,a=t||this.worldTransform,l=a.a,u=a.c,h=a.b,c=a.d,d=a.tx,p=a.ty,f=l*r+h*s+d,m=c*s+u*r+p,g=l*n+h*s+d,_=c*s+u*n+p,y=l*n+h*o+d,v=c*o+u*n+p,b=l*r+h*o+d,w=c*o+u*r+p,x=-1/0,T=-1/0,M=1/0,k=1/0;M=M>f?f:M,M=M>g?g:M,M=M>y?y:M,M=M>b?b:M,k=k>m?m:k,k=k>_?_:k,k=k>v?v:k,k=k>w?w:k,x=f>x?f:x,x=g>x?g:x,x=y>x?y:x,x=b>x?b:x,T=m>T?m:T,T=_>T?_:T,T=v>T?v:T,T=w>T?w:T;var S=this._bounds;return S.x=M,S.width=x-M,S.y=k,S.height=T-k,this._currentBounds=S,S},i.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,i;if(this._mask||this._filters){var n=t.spriteBatch;for(this._mask&&(n.stop(),t.maskManager.pushMask(this.mask,t),n.start()),this._filters&&(n.flush(),t.filterManager.pushFilter(this._filterBlock)),n.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);n.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),n.start()}else for(t.spriteBatch.render(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t)}},i.Sprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=this.texture.frame,n=t.context,r=this.texture;if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,n.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),e&&e.width&&e.height&&r.baseTexture.source){n.globalAlpha=this.worldAlpha;var o=this.worldTransform;if(t.roundPixels?n.setTransform(o.a,o.c,o.b,o.d,0|o.tx,0|o.ty):n.setTransform(o.a,o.c,o.b,o.d,o.tx,o.ty),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,n[t.smoothProperty]=t.scaleMode===i.scaleModes.LINEAR),16777215!==this.tint){if(this.cachedTint!==this.tint){if(!r.baseTexture.hasLoaded)return;this.cachedTint=this.tint,this.tintedTexture=i.CanvasTinter.getTintedTexture(this,this.tint)}n.drawImage(this.tintedTexture,0,0,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}else if(r.trim){var s=r.trim;n.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,s.x-this.anchor.x*s.width,s.y-this.anchor.y*s.height,e.width,e.height)}else n.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}for(var a=0,l=this.children.length;l>a;a++){var u=this.children[a];u._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},i.Sprite.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new i.Sprite(e)},i.Sprite.fromImage=function(t,e,n){var r=i.Texture.fromImage(t,e,n);return new i.Sprite(r)},i.SpriteBatch=function(t){i.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},i.SpriteBatch.prototype=Object.create(i.DisplayObjectContainer.prototype),i.SpriteBatch.constructor=i.SpriteBatch,i.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new i.WebGLFastSpriteBatch(t),this.ready=!0},i.SpriteBatch.prototype.updateTransform=function(){i.DisplayObject.prototype.updateTransform.call(this)},i.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.activateShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.shaderManager.activateShader(t.shaderManager.defaultShader),t.spriteBatch.start())},i.SpriteBatch.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,i.DisplayObject.prototype.updateTransform.call(this);for(var n=this.worldTransform,r=!0,o=0;o<this.children.length;o++){var s=this.children[o];if(s.visible){var a=s.texture,l=a.frame;if(e.globalAlpha=this.worldAlpha*s.alpha,s.rotation%(2*Math.PI)===0)r&&(e.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),r=!1),e.drawImage(a.baseTexture.source,l.x,l.y,l.width,l.height,s.anchor.x*-l.width*s.scale.x+s.position.x+.5|0,s.anchor.y*-l.height*s.scale.y+s.position.y+.5|0,l.width*s.scale.x,l.height*s.scale.y);else{r||(r=!0),i.DisplayObject.prototype.updateTransform.call(s);var u=s.worldTransform;t.roundPixels?e.setTransform(u.a,u.c,u.b,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.c,u.b,u.d,u.tx,u.ty),e.drawImage(a.baseTexture.source,l.x,l.y,l.width,l.height,s.anchor.x*-l.width+.5|0,s.anchor.y*-l.height+.5|0,l.width,l.height)}}}},i.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},i.FilterBlock=function(){this.visible=!0,this.renderable=!0},i.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),i.Sprite.call(this,i.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},i.Text.prototype=Object.create(i.Sprite.prototype),i.Text.prototype.constructor=i.Text,i.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},i.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},i.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],n=0,r=0;r<e.length;r++){var o=this.context.measureText(e[r]).width;i[r]=o,n=Math.max(n,o)}var s=n+this.style.strokeThickness;this.style.dropShadow&&(s+=this.style.dropShadowDistance),this.canvas.width=s+this.context.lineWidth;var a=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness,l=a*e.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top";var u,h;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var c=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(r=0;r<e.length;r++)u=this.style.strokeThickness/2,h=this.style.strokeThickness/2+r*a,"right"===this.style.align?u+=n-i[r]:"center"===this.style.align&&(u+=(n-i[r])/2),this.style.fill&&this.context.fillText(e[r],u+c,h+d)}for(this.context.fillStyle=this.style.fill,r=0;r<e.length;r++)u=this.style.strokeThickness/2,h=this.style.strokeThickness/2+r*a,"right"===this.style.align?u+=n-i[r]:"center"===this.style.align&&(u+=(n-i[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[r],u,h),this.style.fill&&this.context.fillText(e[r],u,h);this.updateTexture()},i.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},i.Text.prototype._renderWebGL=function(t){this.requiresUpdate&&(this.requiresUpdate=!1,i.updateWebGLTexture(this.texture.baseTexture,t.gl)),i.Sprite.prototype._renderWebGL.call(this,t)},i.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.Sprite.prototype.updateTransform.call(this)},i.Text.prototype.determineFontHeight=function(t){var e=i.Text.heightCache[t];if(!e){var n=document.getElementsByTagName("body")[0],r=document.createElement("div"),o=document.createTextNode("M");r.appendChild(o),r.setAttribute("style",t+";position:absolute;top:0;left:0"),n.appendChild(r),e=r.offsetHeight,i.Text.heightCache[t]=e,n.removeChild(r)}return e},i.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,o=i[n].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,l=a+this.context.measureText(" ").width;0===s||l>r?(s>0&&(e+="\n"),e+=o[s],r=this.style.wordWrapWidth-a):(r-=l,e+=" "+o[s])}n<i.length-1&&(e+="\n")}return e},i.Text.prototype.destroy=function(t){t&&this.texture.destroy()},i.Text.heightCache={},i.BitmapText=function(t,e){i.DisplayObjectContainer.call(this),this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},i.BitmapText.prototype=Object.create(i.DisplayObjectContainer.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},i.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):i.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},i.BitmapText.prototype.updateText=function(){for(var t=i.BitmapText.fonts[this.fontName],e=new i.Point,n=null,r=[],o=0,s=[],a=0,l=this.fontSize/t.size,u=0;u<this.text.length;u++){var h=this.text.charCodeAt(u);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(u)))s.push(e.x),o=Math.max(o,e.x),a++,e.x=0,e.y+=t.lineHeight,n=null;else{var c=t.chars[h];c&&(n&&c[n]&&(e.x+=c.kerning[n]),r.push({texture:c.texture,line:a,charCode:h,position:new i.Point(e.x+c.xOffset,e.y+c.yOffset)}),e.x+=c.xAdvance,n=h)}}s.push(e.x),o=Math.max(o,e.x);var d=[];for(u=0;a>=u;u++){var p=0;"right"===this.style.align?p=o-s[u]:"center"===this.style.align&&(p=(o-s[u])/2),d.push(p)}var f=this.children.length,m=r.length,g=this.tint||16777215;for(u=0;m>u;u++){var _=f>u?this.children[u]:this._pool.pop();_?_.setTexture(r[u].texture):_=new i.Sprite(r[u].texture),_.position.x=(r[u].position.x+d[r[u].line])*l,_.position.y=r[u].position.y*l,_.scale.x=_.scale.y=l,_.tint=g,_.parent||this.addChild(_)}for(;this.children.length>m;){var y=this.getChildAt(this.children.length-1);this._pool.push(y),this.removeChild(y)}this.textWidth=o*l,this.textHeight=(e.y+t.lineHeight)*l},i.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),i.DisplayObjectContainer.prototype.updateTransform.call(this)},i.BitmapText.fonts={},i.Stage=function(t){i.DisplayObjectContainer.call(this),this.worldTransform=new i.Matrix,this.interactive=!0,this.interactionManager=new i.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new i.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},i.Stage.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},i.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},i.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=i.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},i.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var n=0,r=["ms","moz","webkit","o"],o=0;o<r.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[r[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[o]+"CancelAnimationFrame"]||window[r[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),i=Math.max(0,16-(e-n)),r=window.setTimeout(function(){t(e+i)},i);return n=e+i,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestAnimFrame=window.requestAnimationFrame,i.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function i(){var o=r.concat(t.call(arguments));n.apply(this instanceof i?this:e,o)}var n=this,r=t.call(arguments,1);if("function"!=typeof n)throw new TypeError;return i.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(n.prototype),i}}()),i.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(i){}},i.canUseNewCanvasBlendModes=function(){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},i.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},i.EventTarget=function(){var t={};this.addEventListener=this.on=function(e,i){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(i)&&t[e].push(i)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var i=0,n=t[e.type].length;n>i;i++)t[e.type][i](e)},this.removeEventListener=this.off=function(e,i){var n=t[e].indexOf(i);-1!==n&&t[e].splice(n,1)},this.removeAllEventListeners=function(e){var i=t[e];i&&(i.length=0)}},i.PolyK={},i.PolyK.Triangulate=function(t){var e=!0,n=t.length>>1;if(3>n)return[];for(var r=[],o=[],s=0;n>s;s++)o.push(s);s=0;for(var a=n;a>3;){var l=o[(s+0)%a],u=o[(s+1)%a],h=o[(s+2)%a],c=t[2*l],d=t[2*l+1],p=t[2*u],f=t[2*u+1],m=t[2*h],g=t[2*h+1],_=!1;if(i.PolyK._convex(c,d,p,f,m,g,e)){_=!0;for(var y=0;a>y;y++){var v=o[y];if(v!==l&&v!==u&&v!==h&&i.PolyK._PointInTriangle(t[2*v],t[2*v+1],c,d,p,f,m,g)){_=!1;break}}}if(_)r.push(l,u,h),o.splice((s+1)%a,1),a--,s=0;else if(s++>3*a){if(!e)return window.console.log("PIXI Warning: shape too complex to fill"),[];for(r=[],o=[],s=0;n>s;s++)o.push(s);s=0,a=n,e=!1}}return r.push(o[0],o[1],o[2]),r},i.PolyK._PointInTriangle=function(t,e,i,n,r,o,s,a){var l=s-i,u=a-n,h=r-i,c=o-n,d=t-i,p=e-n,f=l*l+u*u,m=l*h+u*c,g=l*d+u*p,_=h*h+c*c,y=h*d+c*p,v=1/(f*_-m*m),b=(_*g-m*y)*v,w=(f*y-m*g)*v;return b>=0&&w>=0&&1>b+w},i.PolyK._convex=function(t,e,i,n,r,o,s){return(e-n)*(r-i)+(i-t)*(o-n)>=0===s},i.initDefaultShaders=function(){},i.CompileVertexShader=function(t,e){return i._CompileShader(t,e,t.VERTEX_SHADER)},i.CompileFragmentShader=function(t,e){return i._CompileShader(t,e,t.FRAGMENT_SHADER)},i._CompileShader=function(t,e,i){var n=e.join("\n"),r=t.createShader(i);return t.shaderSource(r,n),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(window.console.log(t.getShaderInfoLog(r)),null)},i.compileProgram=function(t,e,n){var r=i.CompileFragmentShader(t,n),o=i.CompileVertexShader(t,e),s=t.createProgram();return t.attachShader(s,o),t.attachShader(s,r),t.linkProgram(s),t.getProgramParameter(s,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),s},i.PixiShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},i.PixiShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc||i.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];
for(var n in this.uniforms)this.uniforms[n].uniformLocation=t.getUniformLocation(e,n);this.initUniforms(),this.program=e},i.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms){t=this.uniforms[i];var n=t.type;"sampler2D"===n?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===n||"mat3"===n||"mat4"===n?(t.glMatrix=!0,t.glValueLength=1,"mat2"===n?t.glFunc=e.uniformMatrix2fv:"mat3"===n?t.glFunc=e.uniformMatrix3fv:"mat4"===n&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+n],t.glValueLength="2f"===n||"2i"===n?2:"3f"===n||"3i"===n?3:"4f"===n||"4i"===n?4:1)}},i.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var i=t.textureData,n=i.magFilter?i.magFilter:e.LINEAR,r=i.minFilter?i.minFilter:e.LINEAR,o=i.wrapS?i.wrapS:e.CLAMP_TO_EDGE,s=i.wrapT?i.wrapT:e.CLAMP_TO_EDGE,a=i.luminance?e.LUMINANCE:e.RGBA;if(i.repeat&&(o=e.REPEAT,s=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!i.flipY),i.width){var l=i.width?i.width:512,u=i.height?i.height:2,h=i.border?i.border:0;e.texImage2D(e.TEXTURE_2D,0,a,l,u,h,a,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,a,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,s)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},i.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var n in this.uniforms)t=this.uniforms[n],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]||i.createWebGLTexture(t.value.baseTexture,e)),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},i.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],i.PixiFastShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},i.PixiFastShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},i.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},i.StripShader=function(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","uniform vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]},i.StripShader.prototype.init=function(){var t=i.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},i.PrimitiveShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},i.PrimitiveShader.prototype.init=function(){var t=this.gl,e=i.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},i.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},i.WebGLGraphics=function(){},i.WebGLGraphics.renderGraphics=function(t,e){var n=e.gl,r=e.projection,o=e.offset,s=e.shaderManager.primitiveShader;t._webGL[n.id]||(t._webGL[n.id]={points:[],indices:[],lastIndex:0,buffer:n.createBuffer(),indexBuffer:n.createBuffer()});var a=t._webGL[n.id];t.dirty&&(t.dirty=!1,t.clearDirty&&(t.clearDirty=!1,a.lastIndex=0,a.points=[],a.indices=[]),i.WebGLGraphics.updateGraphics(t,n)),e.shaderManager.activatePrimitiveShader(),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.uniformMatrix3fv(s.translationMatrix,!1,t.worldTransform.toArray(!0)),n.uniform2f(s.projectionVector,r.x,-r.y),n.uniform2f(s.offsetVector,-o.x,-o.y),n.uniform3fv(s.tintColor,i.hex2rgb(t.tint)),n.uniform1f(s.alpha,t.worldAlpha),n.bindBuffer(n.ARRAY_BUFFER,a.buffer),n.vertexAttribPointer(s.aVertexPosition,2,n.FLOAT,!1,24,0),n.vertexAttribPointer(s.colorAttribute,4,n.FLOAT,!1,24,8),n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,a.indexBuffer),n.drawElements(n.TRIANGLE_STRIP,a.indices.length,n.UNSIGNED_SHORT,0),e.shaderManager.deactivatePrimitiveShader()},i.WebGLGraphics.updateGraphics=function(t,e){for(var n=t._webGL[e.id],r=n.lastIndex;r<t.graphicsData.length;r++){var o=t.graphicsData[r];o.type===i.Graphics.POLY?(o.fill&&o.points.length>3&&i.WebGLGraphics.buildPoly(o,n),o.lineWidth>0&&i.WebGLGraphics.buildLine(o,n)):o.type===i.Graphics.RECT?i.WebGLGraphics.buildRectangle(o,n):(o.type===i.Graphics.CIRC||o.type===i.Graphics.ELIP)&&i.WebGLGraphics.buildCircle(o,n)}n.lastIndex=t.graphicsData.length,n.glPoints=new Float32Array(n.points),e.bindBuffer(e.ARRAY_BUFFER,n.buffer),e.bufferData(e.ARRAY_BUFFER,n.glPoints,e.STATIC_DRAW),n.glIndicies=new Uint16Array(n.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,n.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,n.glIndicies,e.STATIC_DRAW)},i.WebGLGraphics.buildRectangle=function(t,e){var n=t.points,r=n[0],o=n[1],s=n[2],a=n[3];if(t.fill){var l=i.hex2rgb(t.fillColor),u=t.fillAlpha,h=l[0]*u,c=l[1]*u,d=l[2]*u,p=e.points,f=e.indices,m=p.length/6;p.push(r,o),p.push(h,c,d,u),p.push(r+s,o),p.push(h,c,d,u),p.push(r,o+a),p.push(h,c,d,u),p.push(r+s,o+a),p.push(h,c,d,u),f.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[r,o,r+s,o,r+s,o+a,r,o+a,r,o],i.WebGLGraphics.buildLine(t,e),t.points=g}},i.WebGLGraphics.buildCircle=function(t,e){var n=t.points,r=n[0],o=n[1],s=n[2],a=n[3],l=40,u=2*Math.PI/l,h=0;if(t.fill){var c=i.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,m=c[2]*d,g=e.points,_=e.indices,y=g.length/6;for(_.push(y),h=0;l+1>h;h++)g.push(r,o,p,f,m,d),g.push(r+Math.sin(u*h)*s,o+Math.cos(u*h)*a,p,f,m,d),_.push(y++,y++);_.push(y-1)}if(t.lineWidth){var v=t.points;for(t.points=[],h=0;l+1>h;h++)t.points.push(r+Math.sin(u*h)*s,o+Math.cos(u*h)*a);i.WebGLGraphics.buildLine(t,e),t.points=v}},i.WebGLGraphics.buildLine=function(t,e){var n=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(n=0;n<r.length;n++)r[n]+=.5;var o=new i.Point(r[0],r[1]),s=new i.Point(r[r.length-2],r[r.length-1]);if(o.x===s.x&&o.y===s.y){r.pop(),r.pop(),s=new i.Point(r[r.length-2],r[r.length-1]);var a=s.x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);r.unshift(a,l),r.push(a,l)}var u,h,c,d,p,f,m,g,_,y,v,b,w,x,T,M,k,S,L,C,P,D,E,A=e.points,O=e.indices,I=r.length/2,R=r.length,Y=A.length/6,N=t.lineWidth/2,j=i.hex2rgb(t.lineColor),F=t.lineAlpha,B=j[0]*F,U=j[1]*F,H=j[2]*F;for(c=r[0],d=r[1],p=r[2],f=r[3],_=-(d-f),y=c-p,E=Math.sqrt(_*_+y*y),_/=E,y/=E,_*=N,y*=N,A.push(c-_,d-y,B,U,H,F),A.push(c+_,d+y,B,U,H,F),n=1;I-1>n;n++)c=r[2*(n-1)],d=r[2*(n-1)+1],p=r[2*n],f=r[2*n+1],m=r[2*(n+1)],g=r[2*(n+1)+1],_=-(d-f),y=c-p,E=Math.sqrt(_*_+y*y),_/=E,y/=E,_*=N,y*=N,v=-(f-g),b=p-m,E=Math.sqrt(v*v+b*b),v/=E,b/=E,v*=N,b*=N,T=-y+d-(-y+f),M=-_+p-(-_+c),k=(-_+c)*(-y+f)-(-_+p)*(-y+d),S=-b+g-(-b+f),L=-v+p-(-v+m),C=(-v+m)*(-b+f)-(-v+p)*(-b+g),P=T*L-S*M,Math.abs(P)<.1?(P+=10.1,A.push(p-_,f-y,B,U,H,F),A.push(p+_,f+y,B,U,H,F)):(u=(M*C-L*k)/P,h=(S*k-T*C)/P,D=(u-p)*(u-p)+(h-f)+(h-f),D>19600?(w=_-v,x=y-b,E=Math.sqrt(w*w+x*x),w/=E,x/=E,w*=N,x*=N,A.push(p-w,f-x),A.push(B,U,H,F),A.push(p+w,f+x),A.push(B,U,H,F),A.push(p-w,f-x),A.push(B,U,H,F),R++):(A.push(u,h),A.push(B,U,H,F),A.push(p-(u-p),f-(h-f)),A.push(B,U,H,F)));for(c=r[2*(I-2)],d=r[2*(I-2)+1],p=r[2*(I-1)],f=r[2*(I-1)+1],_=-(d-f),y=c-p,E=Math.sqrt(_*_+y*y),_/=E,y/=E,_*=N,y*=N,A.push(p-_,f-y),A.push(B,U,H,F),A.push(p+_,f+y),A.push(B,U,H,F),O.push(Y),n=0;R>n;n++)O.push(Y++);O.push(Y-1)}},i.WebGLGraphics.buildPoly=function(t,e){var n=t.points;if(!(n.length<6)){var r=e.points,o=e.indices,s=n.length/2,a=i.hex2rgb(t.fillColor),l=t.fillAlpha,u=a[0]*l,h=a[1]*l,c=a[2]*l,d=i.PolyK.Triangulate(n),p=r.length/6,f=0;for(f=0;f<d.length;f+=3)o.push(d[f]+p),o.push(d[f]+p),o.push(d[f+1]+p),o.push(d[f+2]+p),o.push(d[f+2]+p);for(f=0;s>f;f++)r.push(n[2*f],n[2*f+1],u,h,c,l)}},i.glContexts=[],i.WebGLRenderer=function(t,e,n,r,o){i.defaultRenderer||(i.defaultRenderer=this),this.type=i.WEBGL_RENDERER,this.transparent=!!r,this.width=t||800,this.height=e||600,this.view=n||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.contextLost=this.handleContextLost.bind(this),this.contextRestoredLost=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLost,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1),this.options={alpha:this.transparent,antialias:!!o,premultipliedAlpha:!!r,stencil:!0};try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(s){try{this.gl=this.view.getContext("webgl",this.options)}catch(a){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var l=this.gl;this.glContextId=l.id=i.WebGLRenderer.glContextId++,i.glContexts[this.glContextId]=l,i.blendModesWebGL||(i.blendModesWebGL=[],i.blendModesWebGL[i.blendModes.NORMAL]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.ADD]=[l.SRC_ALPHA,l.DST_ALPHA],i.blendModesWebGL[i.blendModes.MULTIPLY]=[l.DST_COLOR,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SCREEN]=[l.SRC_ALPHA,l.ONE],i.blendModesWebGL[i.blendModes.OVERLAY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DARKEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LIGHTEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_DODGE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR_BURN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HARD_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SOFT_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.DIFFERENCE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.EXCLUSION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.HUE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.SATURATION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.COLOR]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],i.blendModesWebGL[i.blendModes.LUMINOSITY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA]),this.projection=new i.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new i.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new i.WebGLShaderManager(l),this.spriteBatch=new i.WebGLSpriteBatch(l),this.maskManager=new i.WebGLMaskManager(l),this.filterManager=new i.WebGLFilterManager(l,this.transparent),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.renderer=this,l.useProgram(this.shaderManager.defaultShader.program),l.disable(l.DEPTH_TEST),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.colorMask(!0,!0,!0,this.transparent)},i.WebGLRenderer.prototype.constructor=i.WebGLRenderer,i.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),i.WebGLRenderer.updateTextures(),t.updateTransform(),t._interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)));var e=this.gl;e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT),this.renderDisplayObject(t,this.projection),t.interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this))}},i.WebGLRenderer.prototype.renderDisplayObject=function(t,e,i){this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,i),t._renderWebGL(this.renderSession),this.spriteBatch.end()},i.WebGLRenderer.updateTextures=function(){var t=0;for(t=0;t<i.Texture.frameUpdates.length;t++)i.WebGLRenderer.updateTextureFrame(i.Texture.frameUpdates[t]);for(t=0;t<i.texturesToDestroy.length;t++)i.WebGLRenderer.destroyTexture(i.texturesToDestroy[t]);i.texturesToUpdate.length=0,i.texturesToDestroy.length=0,i.Texture.frameUpdates.length=0},i.WebGLRenderer.destroyTexture=function(t){for(var e=t._glTextures.length-1;e>=0;e--){var n=t._glTextures[e],r=i.glContexts[e];r&&n&&r.deleteTexture(n)}t._glTextures.length=0},i.WebGLRenderer.updateTextureFrame=function(t){t.updateFrame=!1,t._updateWebGLuvs()},i.WebGLRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},i.createWebGLTexture=function(t,e){return t.hasLoaded&&(t._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null)),t._glTextures[e.id]},i.updateWebGLTexture=function(t,e){t._glTextures[e.id]&&(e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===i.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))},i.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},i.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(t){try{this.gl=this.view.getContext("webgl",this.options)}catch(e){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var n=this.gl;n.id=i.WebGLRenderer.glContextId++,this.shaderManager.setContext(n),this.spriteBatch.setContext(n),this.maskManager.setContext(n),this.filterManager.setContext(n),this.renderSession.gl=this.gl,n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE),n.enable(n.BLEND),n.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height);for(var r in i.TextureCache){var o=i.TextureCache[r].baseTexture;o._glTextures=[]}this.contextLost=!1},i.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost),this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost),i.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},i.WebGLRenderer.glContextId=0,i.WebGLMaskManager=function(t){this.maskStack=[],this.maskPosition=0,this.setContext(t)},i.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},i.WebGLMaskManager.prototype.pushMask=function(t,e){var n=this.gl;0===this.maskStack.length&&(n.enable(n.STENCIL_TEST),n.stencilFunc(n.ALWAYS,1,1)),this.maskStack.push(t),n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.WebGLGraphics.renderGraphics(t,e),n.colorMask(!0,!0,!0,!0),n.stencilFunc(n.NOTEQUAL,0,this.maskStack.length),n.stencilOp(n.KEEP,n.KEEP,n.KEEP)},i.WebGLMaskManager.prototype.popMask=function(t){var e=this.gl,n=this.maskStack.pop();n&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),i.WebGLGraphics.renderGraphics(n,t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskStack.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)),0===this.maskStack.length&&e.disable(e.STENCIL_TEST)},i.WebGLMaskManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},i.WebGLShaderManager=function(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)},i.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new i.PrimitiveShader(t),this.defaultShader=new i.PixiShader(t),this.fastShader=new i.PixiFastShader(t),this.activateShader(this.defaultShader)},i.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var i=t[e];this.tempAttribState[i]=!0}var n=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?n.enableVertexAttribArray(e):n.disableVertexAttribArray(e))},i.WebGLShaderManager.prototype.activateShader=function(t){this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes)},i.WebGLShaderManager.prototype.activatePrimitiveShader=function(){var t=this.gl;t.useProgram(this.primitiveShader.program),this.setAttribs(this.primitiveShader.attributes)},i.WebGLShaderManager.prototype.deactivatePrimitiveShader=function(){var t=this.gl;t.useProgram(this.defaultShader.program),this.setAttribs(this.defaultShader.attributes)},i.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.gl=null},i.WebGLSpriteBatch=function(t){this.vertSize=6,this.size=2e3;var e=4*this.size*this.vertSize,i=6*this.size;this.vertices=new Float32Array(e),this.indices=new Uint16Array(i),this.lastIndexCount=0;for(var n=0,r=0;i>n;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(t)},i.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},i.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},i.WebGLSpriteBatch.prototype.end=function(){this.flush()},i.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=e.baseTexture),t.blendMode!==this.currentBlendMode&&this.setBlendMode(t.blendMode);var i=t._uvs||t.texture._uvs;if(i){var n,r,o,s,a=t.worldAlpha,l=t.tint,u=this.vertices,h=t.anchor.x,c=t.anchor.y;if(t.texture.trim){var d=t.texture.trim;r=d.x-h*d.width,n=r+e.frame.width,s=d.y-c*d.height,o=s+e.frame.height}else n=e.frame.width*(1-h),r=e.frame.width*-h,o=e.frame.height*(1-c),s=e.frame.height*-c;var p=4*this.currentBatchSize*this.vertSize,f=t.worldTransform,m=f.a,g=f.c,_=f.b,y=f.d,v=f.tx,b=f.ty;u[p++]=m*r+_*s+v,u[p++]=y*s+g*r+b,u[p++]=i.x0,u[p++]=i.y0,u[p++]=a,u[p++]=l,u[p++]=m*n+_*s+v,u[p++]=y*s+g*n+b,u[p++]=i.x1,u[p++]=i.y1,u[p++]=a,u[p++]=l,u[p++]=m*n+_*o+v,u[p++]=y*o+g*n+b,u[p++]=i.x2,u[p++]=i.y2,u[p++]=a,u[p++]=l,u[p++]=m*r+_*o+v,u[p++]=y*o+g*r+b,u[p++]=i.x3,u[p++]=i.y3,u[p++]=a,u[p++]=l,this.currentBatchSize++}},i.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=e.baseTexture),t.blendMode!==this.currentBlendMode&&this.setBlendMode(t.blendMode),t._uvs||(t._uvs=new i.TextureUvs);var n=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var r=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),s=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),a=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);n.x0=0-r,n.y0=0-o,n.x1=1*s-r,n.y1=0-o,n.x2=1*s-r,n.y2=1*a-o,n.x3=0-r,n.y3=1*a-o;var l=t.worldAlpha,u=t.tint,h=this.vertices,c=t.width,d=t.height,p=t.anchor.x,f=t.anchor.y,m=c*(1-p),g=c*-p,_=d*(1-f),y=d*-f,v=4*this.currentBatchSize*this.vertSize,b=t.worldTransform,w=b.a,x=b.c,T=b.b,M=b.d,k=b.tx,S=b.ty;h[v++]=w*g+T*y+k,h[v++]=M*y+x*g+S,h[v++]=n.x0,h[v++]=n.y0,h[v++]=l,h[v++]=u,h[v++]=w*m+T*y+k,h[v++]=M*y+x*m+S,h[v++]=n.x1,h[v++]=n.y1,h[v++]=l,h[v++]=u,h[v++]=w*m+T*_+k,h[v++]=M*_+x*m+S,h[v++]=n.x2,h[v++]=n.y2,h[v++]=l,h[v++]=u,h[v++]=w*g+T*_+k,h[v++]=M*_+x*g+S,h[v++]=n.x3,h[v++]=n.y3,h[v++]=l,h[v++]=u,this.currentBatchSize++},i.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]||i.createWebGLTexture(this.currentBaseTexture,t)),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y);var n=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,n,0),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,n,8),t.vertexAttribPointer(this.shader.colorAttribute,2,t.FLOAT,!1,n,16),this.currentBlendMode!==i.blendModes.NORMAL&&this.setBlendMode(i.blendModes.NORMAL)},i.WebGLSpriteBatch.prototype.setBlendMode=function(t){this.flush(),this.currentBlendMode=t;var e=i.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(e[0],e[1])},i.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},i.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,i=6*this.maxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(i),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var n=0,r=0;i>n;n+=6,r+=4)this.indices[n+0]=r+0,this.indices[n+1]=r+1,this.indices[n+2]=r+2,this.indices[n+3]=r+0,this.indices[n+4]=r+2,this.indices[n+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},i.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},i.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},i.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,i=e[0];if(i.texture._uvs){this.currentBaseTexture=i.texture.baseTexture,i.blendMode!==this.currentBlendMode&&this.setBlendMode(i.blendMode);for(var n=0,r=e.length;r>n;n++)this.renderSprite(e[n]);this.flush()}},i.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,i,n,r,o,s,a,l,u=this.vertices;if(e=t.texture._uvs,i=t.texture.frame.width,n=t.texture.frame.height,t.texture.trim){var h=t.texture.trim;o=h.x-t.anchor.x*h.width,r=o+t.texture.frame.width,a=h.y-t.anchor.y*h.height,s=a+t.texture.frame.height}else r=t.texture.frame.width*(1-t.anchor.x),o=t.texture.frame.width*-t.anchor.x,s=t.texture.frame.height*(1-t.anchor.y),a=t.texture.frame.height*-t.anchor.y;l=4*this.currentBatchSize*this.vertSize,u[l++]=o,u[l++]=a,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x0,u[l++]=e.y1,u[l++]=t.alpha,u[l++]=r,u[l++]=a,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x1,u[l++]=e.y1,u[l++]=t.alpha,u[l++]=r,u[l++]=s,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x2,u[l++]=e.y2,u[l++]=t.alpha,u[l++]=o,u[l++]=s,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x3,u[l++]=e.y3,u[l++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},i.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||i.createWebGLTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},i.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},i.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;
t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var n=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,n,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,n,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,n,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,n,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,n,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,n,36),this.currentBlendMode!==i.blendModes.NORMAL&&this.setBlendMode(i.blendModes.NORMAL)},i.WebGLFastSpriteBatch.prototype.setBlendMode=function(t){this.flush(),this.currentBlendMode=t;var e=i.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(e[0],e[1])},i.WebGLFilterManager=function(t,e){this.transparent=e,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(t)},i.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},i.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var i=this.renderSession.projection;this.width=2*i.x,this.height=2*-i.y,this.buffer=e},i.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,n=this.renderSession.projection,r=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var s=this.texturePool.pop();s?s.resize(this.width,this.height):s=new i.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,s.texture);var a=t._filterArea,l=o.padding;a.x-=l,a.y-=l,a.width+=2*l,a.height+=2*l,a.x<0&&(a.x=0),a.width>this.width&&(a.width=this.width),a.y<0&&(a.y=0),a.height>this.height&&(a.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,s.frameBuffer),e.viewport(0,0,a.width,a.height),n.x=a.width/2,n.y=-a.height/2,r.x=-a.x,r.y=-a.y,e.uniform2f(this.defaultShader.projectionVector,a.width/2,-a.height/2),e.uniform2f(this.defaultShader.offsetVector,-a.x,-a.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=s},i.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),n=e._filterArea,r=e._glFilterTexture,o=this.renderSession.projection,s=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,n.width,n.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=n.height,this.vertexArray[2]=n.width,this.vertexArray[3]=n.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=n.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var a=r,l=this.texturePool.pop();l||(l=new i.FilterTexture(this.gl,this.width,this.height)),l.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var u=0;u<e.filterPasses.length-1;u++){var h=e.filterPasses[u];t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,a.texture),this.applyFilterPass(h,n,n.width,n.height);var c=a;a=l,l=c}t.enable(t.BLEND),r=a,this.texturePool.push(l)}var d=e.filterPasses[e.filterPasses.length-1];this.offsetX-=n.x,this.offsetY-=n.y;var p=this.width,f=this.height,m=0,g=0,_=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var y=this.filterStack[this.filterStack.length-1];n=y._filterArea,p=n.width,f=n.height,m=n.x,g=n.y,_=y._glFilterTexture.frameBuffer}o.x=p/2,o.y=-f/2,s.x=m,s.y=g,n=e._filterArea;var v=n.x-m,b=n.y-g;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=v,this.vertexArray[1]=b+n.height,this.vertexArray[2]=v+n.width,this.vertexArray[3]=b+n.height,this.vertexArray[4]=v,this.vertexArray[5]=b,this.vertexArray[6]=v+n.width,this.vertexArray[7]=b,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=n.width/this.width,this.uvArray[5]=n.height/this.height,this.uvArray[6]=n.width/this.width,this.uvArray[7]=n.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p,f),t.bindFramebuffer(t.FRAMEBUFFER,_),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),this.applyFilterPass(d,n,p,f),t.useProgram(this.defaultShader.program),t.uniform2f(this.defaultShader.projectionVector,p/2,-f/2),t.uniform2f(this.defaultShader.offsetVector,-m,-g),this.texturePool.push(r),e._glFilterTexture=null},i.WebGLFilterManager.prototype.applyFilterPass=function(t,e,n,r){var o=this.gl,s=t.shaders[o.id];s||(s=new i.PixiShader(o),s.fragmentSrc=t.fragmentSrc,s.uniforms=t.uniforms,s.init(),t.shaders[o.id]=s),o.useProgram(s.program),o.uniform2f(s.projectionVector,n/2,-r/2),o.uniform2f(s.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),s.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(s.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(s.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(s.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},i.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},i.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool.destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},i.FilterTexture=function(t,e,n,r){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),r=r||i.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r===i.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,n)},i.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},i.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var i=this.gl;i.bindTexture(i.TEXTURE_2D,this.texture),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,t,e,0,i.RGBA,i.UNSIGNED_BYTE,null),i.bindRenderbuffer(i.RENDERBUFFER,this.renderBuffer),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e)}},i.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},i.CanvasMaskManager=function(){},i.CanvasMaskManager.prototype.pushMask=function(t,e){e.save();var n=t.alpha,r=t.worldTransform;e.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),i.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},i.CanvasMaskManager.prototype.popMask=function(t){t.restore()},i.CanvasTinter=function(){},i.CanvasTinter.getTintedTexture=function(t,e){var n=t.texture;e=i.CanvasTinter.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);if(n.tintCache=n.tintCache||{},n.tintCache[r])return n.tintCache[r];var o=i.CanvasTinter.canvas||document.createElement("canvas");if(i.CanvasTinter.tintMethod(n,e,o),i.CanvasTinter.convertTintToImage){var s=new Image;s.src=o.toDataURL(),n.tintCache[r]=s}else n.tintCache[r]=o,i.CanvasTinter.canvas=null;return o},i.CanvasTinter.tintWithMultiply=function(t,e,i){var n=i.getContext("2d"),r=t.frame;i.width=r.width,i.height=r.height,n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},i.CanvasTinter.tintWithOverlay=function(t,e,i){var n=i.getContext("2d"),r=t.frame;i.width=r.width,i.height=r.height,n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},i.CanvasTinter.tintWithPerPixel=function(t,e,n){var r=n.getContext("2d"),o=t.frame;n.width=o.width,n.height=o.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var s=i.hex2rgb(e),a=s[0],l=s[1],u=s[2],h=r.getImageData(0,0,o.width,o.height),c=h.data,d=0;d<c.length;d+=4)c[d+0]*=a,c[d+1]*=l,c[d+2]*=u;r.putImageData(h,0,0)},i.CanvasTinter.roundColor=function(t){var e=i.CanvasTinter.cacheStepsPerColorChannel,n=i.hex2rgb(t);return n[0]=Math.min(255,n[0]/e*e),n[1]=Math.min(255,n[1]/e*e),n[2]=Math.min(255,n[2]/e*e),i.rgb2hex(n)},i.CanvasTinter.cacheStepsPerColorChannel=8,i.CanvasTinter.convertTintToImage=!1,i.CanvasTinter.canUseMultiply=i.canUseNewCanvasBlendModes(),i.CanvasTinter.tintMethod=i.CanvasTinter.canUseMultiply?i.CanvasTinter.tintWithMultiply:i.CanvasTinter.tintWithPerPixel,i.CanvasRenderer=function(t,e,n,r){i.defaultRenderer=i.defaultRenderer||this,this.type=i.CANVAS_RENDERER,this.clearBeforeRender=!0,this.roundPixels=!1,this.transparent=!!r,i.blendModesCanvas||(i.blendModesCanvas=[],i.canUseNewCanvasBlendModes()?(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="multiply",i.blendModesCanvas[i.blendModes.SCREEN]="screen",i.blendModesCanvas[i.blendModes.OVERLAY]="overlay",i.blendModesCanvas[i.blendModes.DARKEN]="darken",i.blendModesCanvas[i.blendModes.LIGHTEN]="lighten",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="color-dodge",i.blendModesCanvas[i.blendModes.COLOR_BURN]="color-burn",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="hard-light",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="soft-light",i.blendModesCanvas[i.blendModes.DIFFERENCE]="difference",i.blendModesCanvas[i.blendModes.EXCLUSION]="exclusion",i.blendModesCanvas[i.blendModes.HUE]="hue",i.blendModesCanvas[i.blendModes.SATURATION]="saturation",i.blendModesCanvas[i.blendModes.COLOR]="color",i.blendModesCanvas[i.blendModes.LUMINOSITY]="luminosity"):(i.blendModesCanvas[i.blendModes.NORMAL]="source-over",i.blendModesCanvas[i.blendModes.ADD]="lighter",i.blendModesCanvas[i.blendModes.MULTIPLY]="source-over",i.blendModesCanvas[i.blendModes.SCREEN]="source-over",i.blendModesCanvas[i.blendModes.OVERLAY]="source-over",i.blendModesCanvas[i.blendModes.DARKEN]="source-over",i.blendModesCanvas[i.blendModes.LIGHTEN]="source-over",i.blendModesCanvas[i.blendModes.COLOR_DODGE]="source-over",i.blendModesCanvas[i.blendModes.COLOR_BURN]="source-over",i.blendModesCanvas[i.blendModes.HARD_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.SOFT_LIGHT]="source-over",i.blendModesCanvas[i.blendModes.DIFFERENCE]="source-over",i.blendModesCanvas[i.blendModes.EXCLUSION]="source-over",i.blendModesCanvas[i.blendModes.HUE]="source-over",i.blendModesCanvas[i.blendModes.SATURATION]="source-over",i.blendModesCanvas[i.blendModes.COLOR]="source-over",i.blendModesCanvas[i.blendModes.LUMINOSITY]="source-over")),this.width=t||800,this.height=e||600,this.view=n||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new i.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")},i.CanvasRenderer.prototype.constructor=i.CanvasRenderer,i.CanvasRenderer.prototype.render=function(t){i.texturesToUpdate.length=0,i.texturesToDestroy.length=0,t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),i.Texture.frameUpdates.length>0&&(i.Texture.frameUpdates.length=0)},i.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},i.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,t._renderCanvas(this.renderSession)},i.CanvasRenderer.prototype.renderStripFlat=function(t){var e=this.context,i=t.verticies,n=i.length/2;this.count++,e.beginPath();for(var r=1;n-2>r;r++){var o=2*r,s=i[o],a=i[o+2],l=i[o+4],u=i[o+1],h=i[o+3],c=i[o+5];e.moveTo(s,u),e.lineTo(a,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},i.CanvasRenderer.prototype.renderStrip=function(t){var e=this.context,i=t.verticies,n=t.uvs,r=i.length/2;this.count++;for(var o=1;r-2>o;o++){var s=2*o,a=i[s],l=i[s+2],u=i[s+4],h=i[s+1],c=i[s+3],d=i[s+5],p=n[s]*t.texture.width,f=n[s+2]*t.texture.width,m=n[s+4]*t.texture.width,g=n[s+1]*t.texture.height,_=n[s+3]*t.texture.height,y=n[s+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(a,h),e.lineTo(l,c),e.lineTo(u,d),e.closePath(),e.clip();var v=p*_+g*m+f*y-_*m-g*f-p*y,b=a*_+g*u+l*y-_*u-g*l-a*y,w=p*l+a*m+f*u-l*m-a*f-p*u,x=p*_*u+g*l*m+a*f*y-a*_*m-g*f*u-p*l*y,T=h*_+g*d+c*y-_*d-g*c-h*y,M=p*c+h*m+f*d-c*m-h*f-p*d,k=p*_*d+g*c*m+h*f*y-h*_*m-g*f*d-p*c*y;e.transform(b/v,T/v,w/v,M/v,x/v,k/v),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},i.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},i.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},i.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},i.CanvasGraphics=function(){},i.CanvasGraphics.renderGraphics=function(t,e){for(var n=t.worldAlpha,r="",o=0;o<t.graphicsData.length;o++){var s=t.graphicsData[o],a=s.points;if(e.strokeStyle=r="#"+("00000"+(0|s.lineColor).toString(16)).substr(-6),e.lineWidth=s.lineWidth,s.type===i.Graphics.POLY){e.beginPath(),e.moveTo(a[0],a[1]);for(var l=1;l<a.length/2;l++)e.lineTo(a[2*l],a[2*l+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=r="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke())}else if(s.type===i.Graphics.RECT)(s.fillColor||0===s.fillColor)&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=r="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fillRect(a[0],a[1],a[2],a[3])),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.strokeRect(a[0],a[1],a[2],a[3]));else if(s.type===i.Graphics.CIRC)e.beginPath(),e.arc(a[0],a[1],a[2],0,2*Math.PI),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=r="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke());else if(s.type===i.Graphics.ELIP){var u=s.points,h=2*u[2],c=2*u[3],d=u[0]-h/2,p=u[1]-c/2;e.beginPath();var f=.5522848,m=h/2*f,g=c/2*f,_=d+h,y=p+c,v=d+h/2,b=p+c/2;e.moveTo(d,b),e.bezierCurveTo(d,b-g,v-m,p,v,p),e.bezierCurveTo(v+m,p,_,b-g,_,b),e.bezierCurveTo(_,b+g,v+m,y,v,y),e.bezierCurveTo(v-m,y,d,b+g,d,b),e.closePath(),s.fill&&(e.globalAlpha=s.fillAlpha*n,e.fillStyle=r="#"+("00000"+(0|s.fillColor).toString(16)).substr(-6),e.fill()),s.lineWidth&&(e.globalAlpha=s.lineAlpha*n,e.stroke())}}},i.CanvasGraphics.renderGraphicsMask=function(t,e){var n=t.graphicsData.length;if(0!==n){n>1&&(n=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var r=0;1>r;r++){var o=t.graphicsData[r],s=o.points;if(o.type===i.Graphics.POLY){e.beginPath(),e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(o.type===i.Graphics.RECT)e.beginPath(),e.rect(s[0],s[1],s[2],s[3]),e.closePath();else if(o.type===i.Graphics.CIRC)e.beginPath(),e.arc(s[0],s[1],s[2],0,2*Math.PI),e.closePath();else if(o.type===i.Graphics.ELIP){var l=o.points,u=2*l[2],h=2*l[3],c=l[0]-u/2,d=l[1]-h/2;e.beginPath();var p=.5522848,f=u/2*p,m=h/2*p,g=c+u,_=d+h,y=c+u/2,v=d+h/2;e.moveTo(c,v),e.bezierCurveTo(c,v-m,y-f,d,y,d),e.bezierCurveTo(y+f,d,g,v-m,g,v),e.bezierCurveTo(g,v+m,y+f,_,y,_),e.bezierCurveTo(y-f,_,c,v+m,c,v),e.closePath()}}}},i.Graphics=function(){i.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=i.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10},i.Graphics.prototype=Object.create(i.DisplayObjectContainer.prototype),i.Graphics.prototype.constructor=i.Graphics,Object.defineProperty(i.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),i.Graphics.prototype.lineStyle=function(t,e,n){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:n,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.graphicsData.push(this.currentPath),this},i.Graphics.prototype.moveTo=function(t,e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:i.Graphics.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath),this},i.Graphics.prototype.lineTo=function(t,e){return this.currentPath.points.push(t,e),this.dirty=!0,this},i.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e,this},i.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},i.Graphics.prototype.drawRect=function(t,e,n,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,r],type:i.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this},i.Graphics.prototype.drawCircle=function(t,e,n){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,n],type:i.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},i.Graphics.prototype.drawEllipse=function(t,e,n,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,n,r],type:i.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this},i.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this},i.Graphics.prototype.generateTexture=function(){var t=this.getBounds(),e=new i.CanvasBuffer(t.width,t.height),n=i.Texture.fromCanvas(e.canvas);return e.context.translate(-t.x,-t.y),i.CanvasGraphics.renderGraphics(this,e.context),n},i.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),i.updateWebGLTexture(this._cachedSprite.texture.baseTexture,t.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,void i.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),this._mask&&t.maskManager.pushMask(this.mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=i.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(i.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var n=0,r=this.children.length;r>n;n++)this.children[n]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.drawCount++,t.spriteBatch.start()}},i.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){var e=t.context,n=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]),e.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),i.CanvasGraphics.renderGraphics(this,e);for(var r=0,o=this.children.length;o>r;r++)this.children[r]._renderCanvas(t)}},i.Graphics.prototype.getBounds=function(t){this.bounds||this.updateBounds();var e=this.bounds.x,i=this.bounds.width+this.bounds.x,n=this.bounds.y,r=this.bounds.height+this.bounds.y,o=t||this.worldTransform,s=o.a,a=o.c,l=o.b,u=o.d,h=o.tx,c=o.ty,d=s*i+l*r+h,p=u*r+a*i+c,f=s*e+l*r+h,m=u*r+a*e+c,g=s*e+l*n+h,_=u*n+a*e+c,y=s*i+l*n+h,v=u*n+a*i+c,b=d,w=p,x=d,T=p;x=x>f?f:x,x=x>g?g:x,x=x>y?y:x,T=T>m?m:T,T=T>_?_:T,T=T>v?v:T,b=f>b?f:b,b=g>b?g:b,b=y>b?y:b,w=m>w?m:w,w=_>w?_:w,w=v>w?v:w;var M=this._bounds;return M.x=x,M.width=b-x,M.y=T,M.height=w-T,M},i.Graphics.prototype.updateBounds=function(){for(var t,e,n,r,o,s=1/0,a=-1/0,l=1/0,u=-1/0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],d=c.type,p=c.lineWidth;if(t=c.points,d===i.Graphics.RECT)e=t[0]-p/2,n=t[1]-p/2,r=t[2]+p,o=t[3]+p,s=s>e?e:s,a=e+r>a?e+r:a,l=l>n?e:l,u=n+o>u?n+o:u;else if(d===i.Graphics.CIRC||d===i.Graphics.ELIP)e=t[0],n=t[1],r=t[2]+p/2,o=t[3]+p/2,s=s>e-r?e-r:s,a=e+r>a?e+r:a,l=l>n-o?n-o:l,u=n+o>u?n+o:u;else for(var f=0;f<t.length;f+=2)e=t[f],n=t[f+1],s=s>e-p?e-p:s,a=e+p>a?e+p:a,l=l>n-p?n-p:l,u=n+p>u?n+p:u}var m=this.boundsPadding;this.bounds=new i.Rectangle(s-m,l-m,a-s+2*m,u-l+2*m)},i.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new i.CanvasBuffer(t.width,t.height),n=i.Texture.fromCanvas(e.canvas);this._cachedSprite=new i.Sprite(n),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),i.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},i.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},i.Graphics.POLY=0,i.Graphics.RECT=1,i.Graphics.CIRC=2,i.Graphics.ELIP=3,i.TilingSprite=function(t,e,n){i.Sprite.call(this,t),this.width=e||100,this.height=n||100,this.tileScale=new i.Point(1,1),this.tileScaleOffset=new i.Point(1,1),this.tilePosition=new i.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=i.blendModes.NORMAL},i.TilingSprite.prototype=Object.create(i.Sprite.prototype),i.TilingSprite.prototype.constructor=i.TilingSprite,Object.defineProperty(i.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(i.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),i.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0},i.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},i.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,n;for(this.mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this.filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(i.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this.filters&&t.filterManager.popFilter(),this.mask&&t.maskManager.popMask(t),t.spriteBatch.start()}},i.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,e),e.globalAlpha=this.worldAlpha;var n=this.worldTransform;if(e.setTransform(n.a,n.c,n.b,n.d,n.tx,n.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=i.blendModesCanvas[t.currentBlendMode]),e.beginPath();var r=this.tilePosition,o=this.tileScale;r.x%=this.tilingTexture.baseTexture.width,r.y%=this.tilingTexture.baseTexture.height,e.scale(o.x,o.y),e.translate(r.x,r.y),e.fillStyle=this.__tilePattern,e.fillRect(-r.x+this.anchor.x*-this._width,-r.y+this.anchor.y*-this._height,this._width/o.x,this._height/o.y),e.scale(1/o.x,1/o.y),e.translate(-r.x,-r.y),e.closePath(),this._mask&&t.maskManager.popMask(t.context)}},i.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,i=t*(1-this.anchor.x),n=t*-this.anchor.x,r=e*(1-this.anchor.y),o=e*-this.anchor.y,s=this.worldTransform,a=s.a,l=s.c,u=s.b,h=s.d,c=s.tx,d=s.ty,p=a*n+u*o+c,f=h*o+l*n+d,m=a*i+u*o+c,g=h*o+l*i+d,_=a*i+u*r+c,y=h*r+l*i+d,v=a*n+u*r+c,b=h*r+l*n+d,w=-1/0,x=-1/0,T=1/0,M=1/0;T=T>p?p:T,T=T>m?m:T,T=T>_?_:T,T=T>v?v:T,M=M>f?f:M,M=M>g?g:M,M=M>y?y:M,M=M>b?b:M,w=p>w?p:w,w=m>w?m:w,w=_>w?_:w,w=v>w?v:w,x=f>x?f:x,x=g>x?g:x,x=y>x?y:x,x=b>x?b:x;var k=this._bounds;return k.x=T,k.width=w-T,k.y=M,k.height=x-M,this._currentBounds=k,k},i.TilingSprite.prototype.generateTilingTexture=function(t){var e=this.texture;if(e.baseTexture.hasLoaded){var n,r,o=e.baseTexture,s=e.frame,a=s.width!==o.width||s.height!==o.height,l=!1;if(t?(n=i.getNextPowerOfTwo(s.width),r=i.getNextPowerOfTwo(s.height),s.width!==n&&s.height!==r&&(l=!0)):a&&(n=s.width,r=s.height,l=!0),l){var u;this.tilingTexture&&this.tilingTexture.isTiling?(u=this.tilingTexture.canvasBuffer,u.resize(n,r),this.tilingTexture.baseTexture.width=n,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(u=new i.CanvasBuffer(n,r),this.tilingTexture=i.Texture.fromCanvas(u.canvas),this.tilingTexture.canvasBuffer=u,this.tilingTexture.isTiling=!0),u.context.drawImage(e.baseTexture.source,s.x,s.y,s.width,s.height,0,0,n,r),this.tileScaleOffset.x=s.width/n,this.tileScaleOffset.y=s.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}},i.BaseTextureCache={},i.texturesToUpdate=[],i.texturesToDestroy=[],i.BaseTextureCacheIdGenerator=0,i.BaseTexture=function(t,e){if(i.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=e||i.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this.id=i.BaseTextureCacheIdGenerator++,this._glTextures=[],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,i.texturesToUpdate.push(this);else{var n=this;this.source.onload=function(){n.hasLoaded=!0,n.width=n.source.width,n.height=n.source.height,i.texturesToUpdate.push(n),n.dispatchEvent({type:"loaded",content:n})}}this.imageUrl=null,this._powerOf2=!1}},i.BaseTexture.prototype.constructor=i.BaseTexture,i.BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete i.BaseTextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,i.texturesToDestroy.push(this)},i.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},i.BaseTexture.fromImage=function(t,e,n){var r=i.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!r){var o=new Image;e&&(o.crossOrigin=""),o.src=t,r=new i.BaseTexture(o,n),r.imageUrl=t,i.BaseTextureCache[t]=r}return r},i.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+i.TextureCacheIdGenerator++);var n=i.BaseTextureCache[t._pixiId];return n||(n=new i.BaseTexture(t,e),i.BaseTextureCache[t._pixiId]=n),n},i.TextureCache={},i.FrameCache={},i.TextureCacheIdGenerator=0,i.Texture=function(t,e){if(i.EventTarget.call(this),e||(this.noFrame=!0,e=new i.Rectangle(0,0,1,1)),t instanceof i.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=null,this.scope=this,this._uvs=null,t.hasLoaded)this.noFrame&&(e=new i.Rectangle(0,0,t.width,t.height)),this.setFrame(e);else{var n=this;t.addEventListener("loaded",function(){n.onBaseTextureLoaded()})}},i.Texture.prototype.constructor=i.Texture,i.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new i.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},i.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy()
},i.Texture.prototype.setFrame=function(t){if(this.frame=t,this.width=t.width,this.height=t.height,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,i.Texture.frameUpdates.push(this)},i.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new i.TextureUvs);var t=this.frame,e=this.baseTexture.width,n=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/n,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/n,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/n,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/n},i.Texture.fromImage=function(t,e,n){var r=i.TextureCache[t];return r||(r=new i.Texture(i.BaseTexture.fromImage(t,e,n)),i.TextureCache[t]=r),r},i.Texture.fromFrame=function(t){var e=i.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},i.Texture.fromCanvas=function(t,e){var n=i.BaseTexture.fromCanvas(t,e);return new i.Texture(n)},i.Texture.addTextureToCache=function(t,e){i.TextureCache[e]=t},i.Texture.removeTextureFromCache=function(t){var e=i.TextureCache[t];return delete i.TextureCache[t],delete i.BaseTextureCache[t],e},i.Texture.frameUpdates=[],i.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y4=0},i.RenderTexture=function(t,e,n,r){if(i.EventTarget.call(this),this.width=t||100,this.height=e||100,this.frame=new i.Rectangle(0,0,this.width,this.height),this.baseTexture=new i.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=r||i.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=n||i.defaultRenderer,this.renderer.type===i.WEBGL_RENDERER){var o=this.renderer.gl;this.textureBuffer=new i.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new i.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new i.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;i.Texture.frameUpdates.push(this)},i.RenderTexture.prototype=Object.create(i.Texture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.resize=function(t,e,n){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.frame.width=this.width,this.frame.height=this.height,n&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===i.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height))},i.RenderTexture.prototype.clear=function(){this.renderer.type===i.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear()},i.RenderTexture.prototype.renderWebGL=function(t,e,n){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),n&&this.textureBuffer.clear();var o=t.children,s=t.worldTransform;t.worldTransform=i.RenderTexture.tempMatrix,t.worldTransform.d=-1,t.worldTransform.ty=-2*this.projection.y,e&&(t.worldTransform.tx=e.x,t.worldTransform.ty-=e.y);for(var a=0,l=o.length;l>a;a++)o[a].updateTransform();i.WebGLRenderer.updateTextures(),this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),t.worldTransform=s},i.RenderTexture.prototype.renderCanvas=function(t,e,n){var r=t.children,o=t.worldTransform;t.worldTransform=i.RenderTexture.tempMatrix,e&&(t.worldTransform.tx=e.x,t.worldTransform.ty=e.y);for(var s=0,a=r.length;a>s;s++)r[s].updateTransform();n&&this.textureBuffer.clear();var l=this.textureBuffer.context;this.renderer.renderDisplayObject(t,l),l.setTransform(1,0,0,1,0,0),t.worldTransform=o},i.RenderTexture.tempMatrix=new i.Matrix,"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=i),t.PIXI=i):"undefined"!=typeof define&&define.amd?define("PIXI",function(){return e.PIXI=i}()):e.PIXI=i}).call(this),function(){var e=this,i=i||{VERSION:"2.0.5",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1}};if(PIXI.InteractionManager=PIXI.InteractionManager||function(){},i.Utils={transposeArray:function(t){for(var e=new Array(t[0].length),i=0;i<t[0].length;i++){e[i]=new Array(t.length-1);for(var n=t.length-1;n>-1;n--)e[i][n]=t[n][i]}return e},rotateArray:function(t,e){if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)t=i.Utils.transposeArray(t),t=t.reverse();else if(-90===e||270===e||"rotateRight"===e)t=t.reverse(),t=i.Utils.transposeArray(t);else if(180===Math.abs(e)||"rotate180"===e){for(var n=0;n<t.length;n++)t[n].reverse();t=t.reverse()}return t},parseDimension:function(t,e){var i=0,n=0;return"string"==typeof t?"%"===t.substr(-1)?(i=parseInt(t,10)/100,n=0===e?window.innerWidth*i:window.innerHeight*i):n=parseInt(t,10):n=t,n},shuffle:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},pad:function(t,e,i,n){if("undefined"==typeof e)var e=0;if("undefined"==typeof i)var i=" ";if("undefined"==typeof n)var n=3;var r=0;if(e+1>=t.length)switch(n){case 1:t=new Array(e+1-t.length).join(i)+t;break;case 3:var o=Math.ceil((r=e-t.length)/2),s=r-o;t=new Array(s+1).join(i)+t+new Array(o+1).join(i);break;default:t+=new Array(e+1-t.length).join(i)}return t},isPlainObject:function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var t,e,n,r,o,s,a=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof a&&(h=a,a=arguments[1]||{},l=2),u===l&&(a=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(e in t)n=a[e],r=t[e],a!==r&&(h&&r&&(i.Utils.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,s=n&&Array.isArray(n)?n:[]):s=n&&i.Utils.isPlainObject(n)?n:{},a[e]=i.Utils.extend(h,s,r)):void 0!==r&&(a[e]=r));return a}},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function i(){var o=r.concat(t.call(arguments));n.apply(this instanceof i?this:e,o)}var n=this,r=t.call(arguments,1);if("function"!=typeof n)throw new TypeError;return i.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(n.prototype),i}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),i=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var n=arguments.length>=2?arguments[1]:void 0,r=0;i>r;r++)r in e&&t.call(n,e[r],r,e)}),"function"!=typeof window.Uint32Array){var n=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else{Array.call(this,t.length),this.length=t.length;for(var e=0;e<this.length;e++)this[e]=t[e]}},window[t].prototype=e,window[t].constructor=window[t]};n("Uint32Array"),n("Int16Array")}window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),i.Circle=function(t,e,i){t=t||0,e=e||0,i=i||0,this.x=t,this.y=e,this._diameter=i,this._radius=i>0?.5*i:0},i.Circle.prototype={circumference:function(){return 2*Math.PI*this._radius},setTo:function(t,e,i){return this.x=t,this.y=e,this._diameter=i,this._radius=.5*i,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,e){return"undefined"==typeof e&&(e=!1),e?i.Math.distanceRounded(this.x,this.y,t.x,t.y):i.Math.distance(this.x,this.y,t.x,t.y)},clone:function(t){return"undefined"==typeof t?t=new i.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,e){return i.Circle.contains(this,t,e)},circumferencePoint:function(t,e,n){return i.Circle.circumferencePoint(this,t,e,n)},offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},i.Circle.prototype.constructor=i.Circle,Object.defineProperty(i.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(i.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(i.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(i.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(i.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(i.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(i.Circle.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(i.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){t===!0&&this.setTo(0,0,0)}}),i.Circle.contains=function(t,e,i){if(t.radius>0&&e>=t.left&&e<=t.right&&i>=t.top&&i<=t.bottom){var n=(t.x-e)*(t.x-e),r=(t.y-i)*(t.y-i);return n+r<=t.radius*t.radius}return!1},i.Circle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.diameter==e.diameter},i.Circle.intersects=function(t,e){return i.Math.distance(t.x,t.y,e.x,e.y)<=t.radius+e.radius},i.Circle.circumferencePoint=function(t,e,n,r){return"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=new i.Point),n===!0&&(e=i.Math.degToRad(e)),r.x=t.x+t.radius*Math.cos(e),r.y=t.y+t.radius*Math.sin(e),r},i.Circle.intersectsRectangle=function(t,e){var i=Math.abs(t.x-e.x-e.halfWidth),n=e.halfWidth+t.radius;if(i>n)return!1;var r=Math.abs(t.y-e.y-e.halfHeight),o=e.halfHeight+t.radius;if(r>o)return!1;if(i<=e.halfWidth||r<=e.halfHeight)return!0;var s=i-e.halfWidth,a=r-e.halfHeight,l=s*s,u=a*a,h=t.radius*t.radius;return h>=l+u},PIXI.Circle=i.Circle,i.Point=function(t,e){t=t||0,e=e||0,this.x=t,this.y=e},i.Point.prototype={copyFrom:function(t){return this.setTo(t.x,t.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},set:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},add:function(t,e){return this.x+=t,this.y+=e,this},subtract:function(t,e){return this.x-=t,this.y-=e,this},multiply:function(t,e){return this.x*=t,this.y*=e,this},divide:function(t,e){return this.x/=t,this.y/=e,this},clampX:function(t,e){return this.x=i.Math.clamp(this.x,t,e),this},clampY:function(t,e){return this.y=i.Math.clamp(this.y,t,e),this},clamp:function(t,e){return this.x=i.Math.clamp(this.x,t,e),this.y=i.Math.clamp(this.y,t,e),this},clone:function(t){return"undefined"==typeof t?t=new i.Point(this.x,this.y):t.setTo(this.x,this.y),t},copyTo:function(t){return t.x=this.x,t.y=this.y,t},distance:function(t,e){return i.Point.distance(this,t,e)},equals:function(t){return t.x===this.x&&t.y===this.y},angle:function(t,e){return"undefined"==typeof e&&(e=!1),e?i.Math.radToDeg(Math.atan2(t.y-this.y,t.x-this.x)):Math.atan2(t.y-this.y,t.x-this.x)},angleSq:function(t){return this.subtract(t).angle(t.subtract(this))},rotate:function(t,e,n,r,o){return i.Point.rotate(this,t,e,n,r,o)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(t){return this.normalize().multiply(t,t)},normalize:function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},i.Point.prototype.constructor=i.Point,i.Point.add=function(t,e,n){return"undefined"==typeof n&&(n=new i.Point),n.x=t.x+e.x,n.y=t.y+e.y,n},i.Point.subtract=function(t,e,n){return"undefined"==typeof n&&(n=new i.Point),n.x=t.x-e.x,n.y=t.y-e.y,n},i.Point.multiply=function(t,e,n){return"undefined"==typeof n&&(n=new i.Point),n.x=t.x*e.x,n.y=t.y*e.y,n},i.Point.divide=function(t,e,n){return"undefined"==typeof n&&(n=new i.Point),n.x=t.x/e.x,n.y=t.y/e.y,n},i.Point.equals=function(t,e){return t.x===e.x&&t.y===e.y},i.Point.angle=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x)},i.Point.angleSq=function(t,e){return t.subtract(e).angle(e.subtract(t))},i.Point.negative=function(t,e){return"undefined"==typeof e&&(e=new i.Point),e.setTo(-t.x,-t.y)},i.Point.multiplyAdd=function(t,e,n,r){return"undefined"==typeof r&&(r=new i.Point),r.setTo(t.x+e.x*n,t.y+e.y*n)},i.Point.interpolate=function(t,e,n,r){return"undefined"==typeof r&&(r=new i.Point),r.setTo(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},i.Point.perp=function(t,e){return"undefined"==typeof e&&(e=new i.Point),e.setTo(-t.y,t.x)},i.Point.rperp=function(t,e){return"undefined"==typeof e&&(e=new i.Point),e.setTo(t.y,-t.x)},i.Point.distance=function(t,e,n){return"undefined"==typeof n&&(n=!1),n?i.Math.distanceRounded(t.x,t.y,e.x,e.y):i.Math.distance(t.x,t.y,e.x,e.y)},i.Point.project=function(t,e,n){"undefined"==typeof n&&(n=new i.Point);var r=t.dot(e)/e.getMagnitudeSq();return 0!==r&&n.setTo(r*e.x,r*e.y),n},i.Point.projectUnit=function(t,e,n){"undefined"==typeof n&&(n=new i.Point);var r=t.dot(e);return 0!==r&&n.setTo(r*e.x,r*e.y),n},i.Point.normalRightHand=function(t,e){return"undefined"==typeof e&&(e=new i.Point),e.setTo(-1*t.y,t.x)},i.Point.normalize=function(t,e){"undefined"==typeof e&&(e=new i.Point);var n=t.getMagnitude();return 0!==n&&e.setTo(t.x/n,t.y/n),e},i.Point.rotate=function(t,e,n,r,o,s){return o=o||!1,s=s||null,o&&(r=i.Math.degToRad(r)),null===s&&(s=Math.sqrt((e-t.x)*(e-t.x)+(n-t.y)*(n-t.y))),t.setTo(e+s*Math.cos(r),n+s*Math.sin(r))},i.Point.centroid=function(t,e){if("undefined"==typeof e&&(e=new i.Point),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("Phaser.Point. Parameter 'points' must be an array");var n=t.length;if(1>n)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===n)return e.copyFrom(t[0]),e;for(var r=0;n>r;r++)i.Point.add(e,t[r],e);return e.divide(n,n),e},PIXI.Point=i.Point,i.Rectangle=function(t,e,i,n){t=t||0,e=e||0,i=i||0,n=n||0,this.x=t,this.y=e,this.width=i,this.height=n},i.Rectangle.prototype={offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,e){return i.Rectangle.inflate(this,t,e)},size:function(t){return i.Rectangle.size(this,t)},clone:function(t){return i.Rectangle.clone(this,t)},contains:function(t,e){return i.Rectangle.contains(this,t,e)},containsRect:function(t){return i.Rectangle.containsRect(this,t)},equals:function(t){return i.Rectangle.equals(this,t)},intersection:function(t,e){return i.Rectangle.intersection(this,t,e)},intersects:function(t,e){return i.Rectangle.intersects(this,t,e)},intersectsRaw:function(t,e,n,r,o){return i.Rectangle.intersectsRaw(this,t,e,n,r,o)},union:function(t,e){return i.Rectangle.union(this,t,e)},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(i.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(i.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(i.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<=this.y?0:this.y-t}}),Object.defineProperty(i.Rectangle.prototype,"bottomRight",{get:function(){return new i.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(i.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){this.width=t>=this.right?0:this.right-t,this.x=t}}),Object.defineProperty(i.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<=this.x?0:this.x+t}}),Object.defineProperty(i.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(i.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(i.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(i.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(i.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(i.Rectangle.prototype,"topLeft",{get:function(){return new i.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(i.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){t===!0&&this.setTo(0,0,0,0)}}),i.Rectangle.prototype.constructor=i.Rectangle,i.Rectangle.inflate=function(t,e,i){return t.x-=e,t.width+=2*e,t.y-=i,t.height+=2*i,t},i.Rectangle.inflatePoint=function(t,e){return i.Rectangle.inflate(t,e.x,e.y)},i.Rectangle.size=function(t,e){return"undefined"==typeof e?e=new i.Point(t.width,t.height):e.setTo(t.width,t.height),e},i.Rectangle.clone=function(t,e){return"undefined"==typeof e?e=new i.Rectangle(t.x,t.y,t.width,t.height):e.setTo(t.x,t.y,t.width,t.height),e},i.Rectangle.contains=function(t,e,i){return t.width<=0||t.height<=0?!1:e>=t.x&&e<=t.right&&i>=t.y&&i<=t.bottom},i.Rectangle.containsRaw=function(t,e,i,n,r,o){return r>=t&&t+i>=r&&o>=e&&e+n>=o},i.Rectangle.containsPoint=function(t,e){return i.Rectangle.contains(t,e.x,e.y)},i.Rectangle.containsRect=function(t,e){return t.volume>e.volume?!1:t.x>=e.x&&t.y>=e.y&&t.right<=e.right&&t.bottom<=e.bottom},i.Rectangle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},i.Rectangle.intersection=function(t,e,n){return"undefined"==typeof n&&(n=new i.Rectangle),i.Rectangle.intersects(t,e)&&(n.x=Math.max(t.x,e.x),n.y=Math.max(t.y,e.y),n.width=Math.min(t.right,e.right)-n.x,n.height=Math.min(t.bottom,e.bottom)-n.y),n},i.Rectangle.intersects=function(t,e){return t.width<=0||t.height<=0||e.width<=0||e.height<=0?!1:!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)},i.Rectangle.intersectsRaw=function(t,e,i,n,r,o){return"undefined"==typeof o&&(o=0),!(e>t.right+o||i<t.left-o||n>t.bottom+o||r<t.top-o)},i.Rectangle.union=function(t,e,n){return"undefined"==typeof n&&(n=new i.Rectangle),n.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top))},PIXI.Rectangle=i.Rectangle,PIXI.EmptyRectangle=new i.Rectangle(0,0,0,0),i.Line=function(t,e,n,r){t=t||0,e=e||0,n=n||0,r=r||0,this.start=new i.Point(t,e),this.end=new i.Point(n,r)},i.Line.prototype={setTo:function(t,e,i,n){return this.start.setTo(t,e),this.end.setTo(i,n),this},fromSprite:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.setTo(t.center.x,t.center.y,e.center.x,e.center.y):this.setTo(t.x,t.y,e.x,e.y)},intersects:function(t,e,n){return i.Line.intersectsPoints(this.start,this.end,t.start,t.end,e,n)},pointOnLine:function(t,e){return(t-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(e-this.start.y)},pointOnSegment:function(t,e){var i=Math.min(this.start.x,this.end.x),n=Math.max(this.start.x,this.end.x),r=Math.min(this.start.y,this.end.y),o=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e)&&t>=i&&n>=t&&e>=r&&o>=e},coordinatesOnLine:function(t,e){"undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=[]);var i=Math.round(this.start.x),n=Math.round(this.start.y),r=Math.round(this.end.x),o=Math.round(this.end.y),s=Math.abs(r-i),a=Math.abs(o-n),l=r>i?1:-1,u=o>n?1:-1,h=s-a;e.push([i,n]);for(var c=1;i!=r||n!=o;){var d=h<<1;d>-a&&(h-=a,i+=l),s>d&&(h+=s,n+=u),c%t===0&&e.push([i,n]),c++}return e}},Object.defineProperty(i.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(i.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(i.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(i.Line.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))}}),Object.defineProperty(i.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(i.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(i.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(i.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(i.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(i.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(i.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(i.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),i.Line.intersectsPoints=function(t,e,n,r,o,s){"undefined"==typeof o&&(o=!0),"undefined"==typeof s&&(s=new i.Point);var a=e.y-t.y,l=r.y-n.y,u=t.x-e.x,h=n.x-r.x,c=e.x*t.y-t.x*e.y,d=r.x*n.y-n.x*r.y,p=a*h-l*u;return 0===p?null:(s.x=(u*d-h*c)/p,s.y=(l*c-a*d)/p,o&&(s.x<Math.min(t.x,e.x)||s.x>Math.max(t.x,e.x)||s.y<Math.min(t.y,e.y)||s.y>Math.max(t.y,e.y)||s.x<Math.min(n.x,r.x)||s.x>Math.max(n.x,r.x)||s.y<Math.min(n.y,r.y)||s.y>Math.max(n.y,r.y))?null:s)},i.Line.intersects=function(t,e,n,r){return i.Line.intersectsPoints(t.start,t.end,e.start,e.end,n,r)},i.Ellipse=function(t,e,n,r){this.type=i.ELLIPSE,t=t||0,e=e||0,n=n||0,r=r||0,this.x=t,this.y=e,this.width=n,this.height=r},i.Ellipse.prototype={setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},clone:function(t){return"undefined"==typeof t?t=new i.Ellipse(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t},contains:function(t,e){return i.Ellipse.contains(this,t,e)},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},i.Ellipse.prototype.constructor=i.Ellipse,Object.defineProperty(i.Ellipse.prototype,"left",{get:function(){return this.x},set:function(t){this.x=t}}),Object.defineProperty(i.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<this.x?0:this.x+t}}),Object.defineProperty(i.Ellipse.prototype,"top",{get:function(){return this.y},set:function(t){this.y=t}}),Object.defineProperty(i.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<this.y?0:this.y+t}}),Object.defineProperty(i.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(t){t===!0&&this.setTo(0,0,0,0)}}),i.Ellipse.contains=function(t,e,i){if(t.width<=0||t.height<=0)return!1;var n=(e-t.x)/t.width-.5,r=(i-t.y)/t.height-.5;return n*=n,r*=r,.25>n+r},i.Ellipse.prototype.getBounds=function(){return new i.Rectangle(this.x,this.y,this.width,this.height)},PIXI.Ellipse=i.Ellipse,i.Polygon=function(t){if(this.type=i.POLYGON,t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],n=0,r=t.length;r>n;n+=2)e.push(new i.Point(t[n],t[n+1]));t=e}this._points=t},i.Polygon.prototype={clone:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new i.Polygon(t)},contains:function(t,e){for(var i=!1,n=0,r=this.points.length-1;n<this.points.length;r=n++){var o=this.points[n].x,s=this.points[n].y,a=this.points[r].x,l=this.points[r].y,u=s>e!=l>e&&(a-o)*(e-s)/(l-s)+o>t;u&&(i=!i)}return i}},i.Polygon.prototype.constructor=i.Polygon,Object.defineProperty(i.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],n=0,r=t.length;r>n;n+=2)e.push(new i.Point(t[n],t[n+1]));t=e}this._points=t}}),Object.defineProperty(i.Polygon.prototype,"area",{get:function(){var t,e,i,n,r,o=Number.MAX_VALUE,s=0;for(r=0;r<this.points.length;r++)this.points[r].y<o&&(o=this.points[r].y);for(r=0;r<this.points.length;r++)t=this.points[r],e=r===this.points.length-1?this.points[0]:this.points[r+1],i=(t.y-o+(e.y-o))/2,n=t.x-e.x,s+=i*n;return s}}),PIXI.Polygon=i.Polygon,i.Camera=function(t,e,n,r,o,s){this.game=t,this.world=t.world,this.id=0,this.view=new i.Rectangle(n,r,o,s),this.screenView=new i.Rectangle(n,r,o,s),this.bounds=new i.Rectangle(n,r,o,s),this.deadzone=null,this.visible=!0,this.atLimit={x:!1,y:!1},this.target=null,this._edge=0,this.displayObject=null,this.scale=null},i.Camera.FOLLOW_LOCKON=0,i.Camera.FOLLOW_PLATFORMER=1,i.Camera.FOLLOW_TOPDOWN=2,i.Camera.FOLLOW_TOPDOWN_TIGHT=3,i.Camera.prototype={follow:function(t,e){"undefined"==typeof e&&(e=i.Camera.FOLLOW_LOCKON),this.target=t;var n;switch(e){case i.Camera.FOLLOW_PLATFORMER:var r=this.width/8,o=this.height/3;this.deadzone=new i.Rectangle((this.width-r)/2,(this.height-o)/2-.25*o,r,o);break;case i.Camera.FOLLOW_TOPDOWN:n=Math.max(this.width,this.height)/4,this.deadzone=new i.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case i.Camera.FOLLOW_TOPDOWN_TIGHT:n=Math.max(this.width,this.height)/8,this.deadzone=new i.Rectangle((this.width-n)/2,(this.height-n)/2,n,n);break;case i.Camera.FOLLOW_LOCKON:this.deadzone=null;break;default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(t){this.setPosition(Math.round(t.x-this.view.halfWidth),Math.round(t.y-this.view.halfHeight))},focusOnXY:function(t,e){this.setPosition(Math.round(t-this.view.halfWidth),Math.round(e-this.view.halfHeight))},update:function(){this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateTarget:function(){this.deadzone?(this._edge=this.target.x-this.deadzone.x,this.view.x>this._edge&&(this.view.x=this._edge),this._edge=this.target.x+this.target.width-this.deadzone.x-this.deadzone.width,this.view.x<this._edge&&(this.view.x=this._edge),this._edge=this.target.y-this.deadzone.y,this.view.y>this._edge&&(this.view.y=this._edge),this._edge=this.target.y+this.target.height-this.deadzone.y-this.deadzone.height,this.view.y<this._edge&&(this.view.y=this._edge)):this.focusOnXY(this.target.x,this.target.y)},setBoundsToWorld:function(){this.bounds.setTo(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x),this.view.right>=this.bounds.right&&(this.atLimit.x=!0,this.view.x=this.bounds.right-this.width),this.view.y<=this.bounds.top&&(this.atLimit.y=!0,this.view.y=this.bounds.top),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom-this.height),this.view.floor()},setPosition:function(t,e){this.view.x=t,this.view.y=e,this.bounds&&this.checkBounds()},setSize:function(t,e){this.view.width=t,this.view.height=e},reset:function(){this.target=null,this.view.x=0,this.view.y=0}},i.Camera.prototype.constructor=i.Camera,Object.defineProperty(i.Camera.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(i.Camera.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(i.Camera.prototype,"width",{get:function(){return this.view.width},set:function(t){this.view.width=t}}),Object.defineProperty(i.Camera.prototype,"height",{get:function(){return this.view.height},set:function(t){this.view.height=t}}),i.State=function(){this.game=null,this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},i.State.prototype={preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},render:function(){},paused:function(){},pauseUpdate:function(){},shutdown:function(){}},i.State.prototype.constructor=i.State,i.StateManager=function(t,e){this.game=t,this.states={},this._pendingState=null,"undefined"!=typeof e&&null!==e&&(this._pendingState=e),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},i.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),this.game.load.onLoadComplete.add(this.loadComplete,this),null!==this._pendingState&&("string"==typeof this._pendingState?this.start(this._pendingState,!1,!1):this.add("default",this._pendingState,!0))},add:function(t,e,n){"undefined"==typeof n&&(n=!1);var r;return e instanceof i.State?r=e:"object"==typeof e?(r=e,r.game=this.game):"function"==typeof e&&(r=new e(this.game)),this.states[t]=r,n&&(this.game.isBooted?this.start(t):this._pendingState=t),r},remove:function(t){this.current===t&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[t]
},start:function(t,e,i){"undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!1),this.checkState(t)&&(this._pendingState=t,this._clearWorld=e,this._clearCache=i,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!1),this._pendingState=this.current,this._clearWorld=t,this._clearCache=e,arguments.length>2&&(this._args=Array.prototype.splice.call(arguments,2))},dummy:function(){},preUpdate:function(){this._pendingState&&this.game.isBooted&&(this.current&&(this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy())),this.setCurrentState(this._pendingState),this.onPreloadCallback?(this.game.load.reset(),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()?this.loadComplete():this.game.load.start()):this.loadComplete(),this.current===this._pendingState&&(this._pendingState=null))},checkState:function(t){if(this.states[t]){var e=!1;return this.states[t].preload&&(e=!0),this.states[t].create&&(e=!0),this.states[t].update&&(e=!0),this.states[t].render&&(e=!0),e===!1?(console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render"),!1):!0}return console.warn("Phaser.StateManager - No state found with the key: "+t),!1},link:function(t){this.states[t].game=this.game,this.states[t].add=this.game.add,this.states[t].make=this.game.make,this.states[t].camera=this.game.camera,this.states[t].cache=this.game.cache,this.states[t].input=this.game.input,this.states[t].load=this.game.load,this.states[t].math=this.game.math,this.states[t].sound=this.game.sound,this.states[t].scale=this.game.scale,this.states[t].state=this,this.states[t].stage=this.game.stage,this.states[t].time=this.game.time,this.states[t].tweens=this.game.tweens,this.states[t].world=this.game.world,this.states[t].particles=this.game.particles,this.states[t].rnd=this.game.rnd,this.states[t].physics=this.game.physics},setCurrentState:function(t){this.callbackContext=this.states[t],this.link(t),this.onInitCallback=this.states[t].init||this.dummy,this.onPreloadCallback=this.states[t].preload||null,this.onLoadRenderCallback=this.states[t].loadRender||null,this.onLoadUpdateCallback=this.states[t].loadUpdate||null,this.onCreateCallback=this.states[t].create||null,this.onUpdateCallback=this.states[t].update||null,this.onPreRenderCallback=this.states[t].preRender||null,this.onRenderCallback=this.states[t].render||null,this.onPausedCallback=this.states[t].paused||null,this.onResumedCallback=this.states[t].resumed||null,this.onPauseUpdateCallback=this.states[t].pauseUpdate||null,this.onShutDownCallback=this.states[t].shutdown||this.dummy,this.current=t,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),this._args=[]},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){this._created===!1&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created&&this.onUpdateCallback?this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created&&this.onPauseUpdateCallback?this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(){this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game)},render:function(){this._created&&this.onRenderCallback?(this.game.renderType===i.CANVAS&&(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0)),this.onRenderCallback.call(this.callbackContext,this.game),this.game.renderType===i.CANVAS&&this.game.context.restore()):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null}},i.StateManager.prototype.constructor=i.StateManager,i.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},i.LinkedList.prototype={add:function(t){return 0===this.total&&null===this.first&&null===this.last?(this.first=t,this.last=t,this.next=t,t.prev=this,this.total++,t):(this.last.next=t,t.prev=this.last,this.last=t,this.total++,t)},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(t){return 1===this.total?(this.reset(),void(t.next=t.prev=null)):(t===this.first?this.first=this.first.next:t===this.last&&(this.last=this.last.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.next=t.prev=null,null===this.first&&(this.last=null),void this.total--)},callAll:function(t){if(this.first&&this.last){var e=this.first;do e&&e[t]&&e[t].call(e),e=e.next;while(e!=this.last.next)}}},i.LinkedList.prototype.constructor=i.LinkedList,i.ArrayList=function(){this.total=0,this.position=0,this.list=[]},i.ArrayList.prototype={add:function(t){return this.exists(t)||(this.list.push(t),this.total++),t},getIndex:function(t){return this.list.indexOf(t)},exists:function(t){return this.list.indexOf(t)>-1},reset:function(){this.list.length=0,this.total=0},remove:function(t){var e=this.list.indexOf(t);return e>-1?(this.list.splice(e,1),this.total--,t):void 0},callAll:function(t){for(var e=Array.prototype.splice.call(arguments,1),i=this.list.length;i--;)this.list[i]&&this.list[i][t]&&this.list[i][t].apply(this.list[i],e)}},Object.defineProperty(i.ArrayList.prototype,"first",{get:function(){return this.position=0,this.total>0?this.list[0]:null}}),Object.defineProperty(i.ArrayList.prototype,"next",{get:function(){return this.position<this.total?(this.position++,this.list[this.position]):null}}),i.ArrayList.prototype.constructor=i.ArrayList,i.Signal=function(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){i.Signal.prototype.dispatch.apply(t,arguments)}},i.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},_registerListener:function(t,e,n,r){var o,s=this._indexOfListener(t,n);if(-1!==s){if(o=this._bindings[s],o.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else o=new i.SignalBinding(this,t,e,n,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var i,n=this._bindings.length;n--;)if(i=this._bindings[n],i._listener===t&&i.context===e)return n;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,i){return this.validateListener(t,"add"),this._registerListener(t,!1,e,i)},addOnce:function(t,e,i){return this.validateListener(t,"addOnce"),this._registerListener(t,!0,e,i)},remove:function(t,e){this.validateListener(t,"remove");var i=this._indexOfListener(t,e);return-1!==i&&(this._bindings[i]._destroy(),this._bindings.splice(i,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=e),i){t=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(t[i]&&this._shouldPropagate&&t[i].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},i.Signal.prototype.constructor=i.Signal,i.SignalBinding=function(t,e,i,n,r){this._listener=e,this._isOnce=i,this.context=n,this._signal=t,this._priority=r||0},i.SignalBinding.prototype={active:!0,params:null,execute:function(t){var e,i;return this.active&&this._listener&&(i=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,i),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},i.SignalBinding.prototype.constructor=i.SignalBinding,i.Filter=function(t,e,n){this.game=t,this.type=i.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms={time:{type:"1f",value:0},resolution:{type:"2f",value:{x:256,y:256}},mouse:{type:"2f",value:{x:0,y:0}}},this.fragmentSrc=n||[]},i.Filter.prototype={init:function(){},setResolution:function(t,e){this.uniforms.resolution.value.x=t,this.uniforms.resolution.value.y=e},update:function(t){"undefined"!=typeof t&&(t.x>0&&(this.uniforms.mouse.x=t.x.toFixed(2)),t.y>0&&(this.uniforms.mouse.y=t.y.toFixed(2))),this.uniforms.time.value=this.game.time.totalElapsedSeconds()},destroy:function(){this.game=null}},i.Filter.prototype.constructor=i.Filter,Object.defineProperty(i.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(t){this.uniforms.resolution.value.x=t}}),Object.defineProperty(i.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(t){this.uniforms.resolution.value.y=t}}),i.Plugin=function(t,e){"undefined"==typeof e&&(e=null),this.game=t,this.parent=e,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},i.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},i.Plugin.prototype.constructor=i.Plugin,i.PluginManager=function(t){this.game=t,this.plugins=[],this._len=0,this._i=0},i.PluginManager.prototype={add:function(t){var e=Array.prototype.splice.call(arguments,1),i=!1;return"function"==typeof t?t=new t(this.game,this):(t.game=this.game,t.parent=this),"function"==typeof t.preUpdate&&(t.hasPreUpdate=!0,i=!0),"function"==typeof t.update&&(t.hasUpdate=!0,i=!0),"function"==typeof t.postUpdate&&(t.hasPostUpdate=!0,i=!0),"function"==typeof t.render&&(t.hasRender=!0,i=!0),"function"==typeof t.postRender&&(t.hasPostRender=!0,i=!0),i?((t.hasPreUpdate||t.hasUpdate||t.hasPostUpdate)&&(t.active=!0),(t.hasRender||t.hasPostRender)&&(t.visible=!0),this._len=this.plugins.push(t),"function"==typeof t.init&&t.init.apply(t,e),t):null},remove:function(t){for(this._i=this._len;this._i--;)if(this.plugins[this._i]===t)return t.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},i.PluginManager.prototype.constructor=i.PluginManager,i.Stage=function(t,e,n){this.game=t,this.offset=new i.Point,this.bounds=new i.Rectangle(0,0,e,n),PIXI.Stage.call(this,0,!1),this.name="_stage_root",this.interactive=!1,this.disableVisibilityChange=!1,this.checkOffsetInterval=2500,this.exists=!0,this.currentRenderOrderID=0,this._hiddenVar="hidden",this._nextOffsetCheck=0,this._backgroundColor=0,t.config?this.parseConfig(t.config):(this.game.canvas=i.Canvas.create(e,n),this.game.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%")},i.Stage.prototype=Object.create(PIXI.Stage.prototype),i.Stage.prototype.constructor=i.Stage,i.Stage.prototype.preUpdate=function(){this.currentRenderOrderID=0;for(var t=this.children.length,e=0;t>e;e++)this.children[e].preUpdate()},i.Stage.prototype.update=function(){for(var t=this.children.length;t--;)this.children[t].update()},i.Stage.prototype.postUpdate=function(){if(this.game.world.camera.target){this.game.world.camera.target.postUpdate(),this.game.world.camera.update();for(var t=this.children.length;t--;)this.children[t]!==this.game.world.camera.target&&this.children[t].postUpdate()}else{this.game.world.camera.update();for(var t=this.children.length;t--;)this.children[t].postUpdate()}this.checkOffsetInterval!==!1&&this.game.time.now>this._nextOffsetCheck&&(i.Canvas.getOffset(this.game.canvas,this.offset),this.bounds.x=this.offset.x,this.bounds.y=this.offset.y,this._nextOffsetCheck=this.game.time.now+this.checkOffsetInterval)},i.Stage.prototype.parseConfig=function(t){this.game.canvas=t.canvasID?i.Canvas.create(this.game.width,this.game.height,t.canvasID):i.Canvas.create(this.game.width,this.game.height),t.canvasStyle?this.game.canvas.stlye=t.canvasStyle:this.game.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",t.checkOffsetInterval&&(this.checkOffsetInterval=t.checkOffsetInterval),t.disableVisibilityChange&&(this.disableVisibilityChange=t.disableVisibilityChange),t.fullScreenScaleMode&&(this.fullScreenScaleMode=t.fullScreenScaleMode),t.scaleMode&&(this.scaleMode=t.scaleMode),t.backgroundColor&&(this.backgroundColor=t.backgroundColor)},i.Stage.prototype.boot=function(){i.Canvas.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.game.width,this.game.height);var t=this;this._onChange=function(e){return t.visibilityChange(e)},i.Canvas.setUserSelect(this.game.canvas,"none"),i.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},i.Stage.prototype.checkVisibility=function(){this._hiddenVar=void 0!==document.webkitHidden?"webkitvisibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.hidden?"visibilitychange":null,this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=this._onChange,window.onpageshow=this._onChange,window.onblur=this._onChange,window.onfocus=this._onChange},i.Stage.prototype.visibilityChange=function(t){return this.disableVisibilityChange?void 0:"pagehide"===t.type||"blur"===t.type||"pageshow"===t.type||"focus"===t.type?void("pagehide"===t.type||"blur"===t.type?this.game.focusLoss(t):("pageshow"===t.type||"focus"===t.type)&&this.game.focusGain(t)):void(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden?this.game.gamePaused(t):this.game.gameResumed(t))},i.Stage.prototype.setBackgroundColor=function(t){if("string"==typeof t){var e=i.Color.hexToColor(t);this._backgroundColor=i.Color.getColor(e.r,e.g,e.b)}else{var e=i.Color.getRGB(t);this._backgroundColor=t}this.backgroundColorSplit=[e.r/255,e.g/255,e.b/255],this.backgroundColorString=i.Color.RGBtoString(e.r,e.g,e.b,255,"#")},Object.defineProperty(i.Stage.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this.game.transparent||this.setBackgroundColor(t)}}),Object.defineProperty(i.Stage.prototype,"smoothed",{get:function(){return!PIXI.scaleModes.LINEAR},set:function(t){PIXI.scaleModes.LINEAR=t?0:1}}),i.Group=function(t,e,n,r,o,s){"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=!1),"undefined"==typeof s&&(s=i.Physics.ARCADE),this.game=t,"undefined"==typeof e&&(e=t.world),this.name=n||"group",PIXI.DisplayObjectContainer.call(this),r?this.game.stage.addChild(this):e&&e.addChild(this),this.z=0,this.type=i.GROUP,this.alive=!0,this.exists=!0,this.classType=i.Sprite,this.scale=new i.Point(1,1),this.cursor=null,this.cameraOffset=new i.Point,this.enableBody=o,this.enableBodyDebug=!1,this.physicsBodyType=s,this._sortProperty="z",this._cache=[0,0,0,0,1,0,1,0,0,0]},i.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),i.Group.prototype.constructor=i.Group,i.Group.RETURN_NONE=0,i.Group.RETURN_TOTAL=1,i.Group.RETURN_CHILD=2,i.Group.SORT_ASCENDING=-1,i.Group.SORT_DESCENDING=1,i.Group.prototype.add=function(t){return t.parent!==this&&(this.enableBody&&this.game.physics.enable(t,this.physicsBodyType),this.addChild(t),t.z=this.children.length,t.events&&t.events.onAddedToGroup.dispatch(t,this),null===this.cursor&&(this.cursor=t)),t},i.Group.prototype.addAt=function(t,e){return t.parent!==this&&(this.enableBody&&this.game.physics.enable(t,this.physicsBodyType),this.addChildAt(t,e),this.updateZ(),t.events&&t.events.onAddedToGroup.dispatch(t,this),null===this.cursor&&(this.cursor=t)),t},i.Group.prototype.getAt=function(t){return 0>t||t>=this.children.length?-1:this.getChildAt(t)},i.Group.prototype.create=function(t,e,i,n,r){"undefined"==typeof r&&(r=!0);var o=new this.classType(this.game,t,e,i,n);return this.enableBody&&this.game.physics.enable(o,this.physicsBodyType),o.exists=r,o.visible=r,o.alive=r,this.addChild(o),o.z=this.children.length,o.events&&o.events.onAddedToGroup.dispatch(o,this),null===this.cursor&&(this.cursor=o),o},i.Group.prototype.createMultiple=function(t,e,i,n){"undefined"==typeof n&&(n=!1);for(var r=0;t>r;r++)this.create(0,0,e,i,n)},i.Group.prototype.updateZ=function(){for(var t=this.children.length;t--;)this.children[t].z=t},i.Group.prototype.resetCursor=function(t){return"undefined"==typeof t&&(t=0),t>this.children.length-1&&(t=0),this.cursor?(this._cache[8]=t,this.cursor=this.children[this._cache[8]],this.cursor):void 0},i.Group.prototype.next=function(){return this.cursor?(this._cache[8]>=this.children.length-1?this._cache[8]=0:this._cache[8]++,this.cursor=this.children[this._cache[8]],this.cursor):void 0},i.Group.prototype.previous=function(){return this.cursor?(0===this._cache[8]?this._cache[8]=this.children.length-1:this._cache[8]--,this.cursor=this.children[this._cache[8]],this.cursor):void 0},i.Group.prototype.swap=function(t,e){var i=this.swapChildren(t,e);return i&&this.updateZ(),i},i.Group.prototype.bringToTop=function(t){return t.parent===this&&this.getIndex(t)<this.children.length&&(this.remove(t),this.add(t)),t},i.Group.prototype.sendToBack=function(t){return t.parent===this&&this.getIndex(t)>0&&(this.remove(t),this.addAt(t,0)),t},i.Group.prototype.moveUp=function(t){if(t.parent===this&&this.getIndex(t)<this.children.length-1){var e=this.getIndex(t),i=this.getAt(e+1);i&&this.swap(t,i)}return t},i.Group.prototype.moveDown=function(t){if(t.parent===this&&this.getIndex(t)>0){var e=this.getIndex(t),i=this.getAt(e-1);i&&this.swap(t,i)}return t},i.Group.prototype.xy=function(t,e,i){return 0>t||t>this.children.length?-1:(this.getChildAt(t).x=e,void(this.getChildAt(t).y=i))},i.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},i.Group.prototype.getIndex=function(t){return this.children.indexOf(t)},i.Group.prototype.replace=function(t,e){var n=this.getIndex(t);if(-1!==n){void 0!==e.parent&&(e.events.onRemovedFromGroup.dispatch(e,this),e.parent.removeChild(e),e.parent instanceof i.Group&&e.parent.updateZ());var r=t;return this.remove(r),this.addAt(e,n),r}},i.Group.prototype.hasProperty=function(t,e){var i=e.length;return 1===i&&e[0]in t?!0:2===i&&e[0]in t&&e[1]in t[e[0]]?!0:3===i&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]?!0:4===i&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]&&e[3]in t[e[0]][e[1]][e[2]]?!0:!1},i.Group.prototype.setProperty=function(t,e,i,n,r){if("undefined"==typeof r&&(r=!1),n=n||0,!this.hasProperty(t,e)&&(!r||n>0))return!1;var o=e.length;return 1===o?0===n?t[e[0]]=i:1==n?t[e[0]]+=i:2==n?t[e[0]]-=i:3==n?t[e[0]]*=i:4==n&&(t[e[0]]/=i):2===o?0===n?t[e[0]][e[1]]=i:1==n?t[e[0]][e[1]]+=i:2==n?t[e[0]][e[1]]-=i:3==n?t[e[0]][e[1]]*=i:4==n&&(t[e[0]][e[1]]/=i):3===o?0===n?t[e[0]][e[1]][e[2]]=i:1==n?t[e[0]][e[1]][e[2]]+=i:2==n?t[e[0]][e[1]][e[2]]-=i:3==n?t[e[0]][e[1]][e[2]]*=i:4==n&&(t[e[0]][e[1]][e[2]]/=i):4===o&&(0===n?t[e[0]][e[1]][e[2]][e[3]]=i:1==n?t[e[0]][e[1]][e[2]][e[3]]+=i:2==n?t[e[0]][e[1]][e[2]][e[3]]-=i:3==n?t[e[0]][e[1]][e[2]][e[3]]*=i:4==n&&(t[e[0]][e[1]][e[2]][e[3]]/=i)),!0},i.Group.prototype.set=function(t,e,i,n,r,o,s){return"undefined"==typeof s&&(s=!1),e=e.split("."),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!1),(n===!1||n&&t.alive)&&(r===!1||r&&t.visible)?this.setProperty(t,e,i,o,s):void 0},i.Group.prototype.setAll=function(t,e,i,n,r,o){"undefined"==typeof i&&(i=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof o&&(o=!1),t=t.split("."),r=r||0;for(var s=0,a=this.children.length;a>s;s++)(!i||i&&this.children[s].alive)&&(!n||n&&this.children[s].visible)&&this.setProperty(this.children[s],t,e,r,o)},i.Group.prototype.setAllChildren=function(t,e,n,r,o,s){"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!1),"undefined"==typeof s&&(s=!1),o=o||0;for(var a=0,l=this.children.length;l>a;a++)(!n||n&&this.children[a].alive)&&(!r||r&&this.children[a].visible)&&(this.children[a]instanceof i.Group?this.children[a].setAllChildren(t,e,n,r,o,s):this.setProperty(this.children[a],t.split("."),e,o,s))},i.Group.prototype.addAll=function(t,e,i,n){this.setAll(t,e,i,n,1)},i.Group.prototype.subAll=function(t,e,i,n){this.setAll(t,e,i,n,2)},i.Group.prototype.multiplyAll=function(t,e,i,n){this.setAll(t,e,i,n,3)},i.Group.prototype.divideAll=function(t,e,i,n){this.setAll(t,e,i,n,4)},i.Group.prototype.callAllExists=function(t,e){for(var i=Array.prototype.splice.call(arguments,2),n=0,r=this.children.length;r>n;n++)this.children[n].exists===e&&this.children[n][t]&&this.children[n][t].apply(this.children[n],i)},i.Group.prototype.callbackFromArray=function(t,e,i){if(1==i){if(t[e[0]])return t[e[0]]}else if(2==i){if(t[e[0]][e[1]])return t[e[0]][e[1]]}else if(3==i){if(t[e[0]][e[1]][e[2]])return t[e[0]][e[1]][e[2]]}else if(4==i){if(t[e[0]][e[1]][e[2]][e[3]])return t[e[0]][e[1]][e[2]][e[3]]}else if(t[e])return t[e];return!1},i.Group.prototype.callAll=function(t,e){if("undefined"!=typeof t){t=t.split(".");var i=t.length;if("undefined"==typeof e||null===e||""===e)e=null;else if("string"==typeof e){e=e.split(".");var n=e.length}for(var r=Array.prototype.splice.call(arguments,2),o=null,s=null,a=0,l=this.children.length;l>a;a++)o=this.callbackFromArray(this.children[a],t,i),e&&o?(s=this.callbackFromArray(this.children[a],e,n),o&&o.apply(s,r)):o&&o.apply(this.children[a],r)}},i.Group.prototype.preUpdate=function(){if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var t=this.children.length;t--;)this.children[t].preUpdate();return!0},i.Group.prototype.update=function(){for(var t=this.children.length;t--;)this.children[t].update()},i.Group.prototype.postUpdate=function(){1===this._cache[7]&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y);for(var t=this.children.length;t--;)this.children[t].postUpdate()},i.Group.prototype.forEach=function(t,e,i){"undefined"==typeof i&&(i=!1);var n=Array.prototype.splice.call(arguments,3);n.unshift(null);for(var r=0,o=this.children.length;o>r;r++)(!i||i&&this.children[r].exists)&&(n[0]=this.children[r],t.apply(e,n))},i.Group.prototype.forEachExists=function(t,e){var n=Array.prototype.splice.call(arguments,2);n.unshift(null),this.iterate("exists",!0,i.Group.RETURN_TOTAL,t,e,n)},i.Group.prototype.forEachAlive=function(t,e){var n=Array.prototype.splice.call(arguments,2);n.unshift(null),this.iterate("alive",!0,i.Group.RETURN_TOTAL,t,e,n)},i.Group.prototype.forEachDead=function(t,e){var n=Array.prototype.splice.call(arguments,2);n.unshift(null),this.iterate("alive",!1,i.Group.RETURN_TOTAL,t,e,n)},i.Group.prototype.sort=function(t,e){this.children.length<2||("undefined"==typeof t&&(t="z"),"undefined"==typeof e&&(e=i.Group.SORT_ASCENDING),this._sortProperty=t,this.children.sort(e===i.Group.SORT_ASCENDING?this.ascendingSortHandler.bind(this):this.descendingSortHandler.bind(this)),this.updateZ())},i.Group.prototype.customSort=function(t,e){this.children.length<2||(this.children.sort(t.bind(e)),this.updateZ())},i.Group.prototype.ascendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?-1:t[this._sortProperty]>e[this._sortProperty]?1:t.z<e.z?-1:1},i.Group.prototype.descendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?1:t[this._sortProperty]>e[this._sortProperty]?-1:0},i.Group.prototype.iterate=function(t,e,n,r,o,s){if(n===i.Group.RETURN_TOTAL&&0===this.children.length)return 0;"undefined"==typeof r&&(r=!1);for(var a=0,l=0,u=this.children.length;u>l;l++)if(this.children[l][t]===e&&(a++,r&&(s[0]=this.children[l],r.apply(o,s)),n===i.Group.RETURN_CHILD))return this.children[l];return n===i.Group.RETURN_TOTAL?a:n===i.Group.RETURN_CHILD?null:void 0},i.Group.prototype.getFirstExists=function(t){return"boolean"!=typeof t&&(t=!0),this.iterate("exists",t,i.Group.RETURN_CHILD)},i.Group.prototype.getFirstAlive=function(){return this.iterate("alive",!0,i.Group.RETURN_CHILD)},i.Group.prototype.getFirstDead=function(){return this.iterate("alive",!1,i.Group.RETURN_CHILD)},i.Group.prototype.getTop=function(){return this.children.length>0?this.children[this.children.length-1]:void 0},i.Group.prototype.getBottom=function(){return this.children.length>0?this.children[0]:void 0},i.Group.prototype.countLiving=function(){return this.iterate("alive",!0,i.Group.RETURN_TOTAL)},i.Group.prototype.countDead=function(){return this.iterate("alive",!1,i.Group.RETURN_TOTAL)},i.Group.prototype.getRandom=function(t,e){return 0===this.children.length?null:(t=t||0,e=e||this.children.length,this.game.math.getRandom(this.children,t,e))},i.Group.prototype.remove=function(t,e){if("undefined"==typeof e&&(e=!1),0===this.children.length||-1===this.children.indexOf(t))return!1;t.events&&!t.destroyPhase&&t.events.onRemovedFromGroup.dispatch(t,this);var i=this.removeChild(t);return this.updateZ(),this.cursor===t&&this.next(),e&&i&&i.destroy(!0),!0},i.Group.prototype.removeAll=function(t){if("undefined"==typeof t&&(t=!1),0!==this.children.length){do{this.children[0].events&&this.children[0].events.onRemovedFromGroup.dispatch(this.children[0],this);var e=this.removeChild(this.children[0]);t&&e&&e.destroy(!0)}while(this.children.length>0);this.cursor=null}},i.Group.prototype.removeBetween=function(t,e,i){if("undefined"==typeof e&&(e=this.children.length),"undefined"==typeof i&&(i=!1),0!==this.children.length){if(t>e||0>t||e>this.children.length)return!1;for(var n=e;n>=t;){this.children[n].events&&this.children[n].events.onRemovedFromGroup.dispatch(this.children[n],this);var r=this.removeChild(this.children[n]);i&&r&&r.destroy(!0),this.cursor===this.children[n]&&(this.cursor=null),n--}this.updateZ()}},i.Group.prototype.destroy=function(t,e){null!==this.game&&("undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!1),this.removeAll(t),this.cursor=null,e||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(i.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,i.Group.RETURN_TOTAL)}}),Object.defineProperty(i.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(i.Group.prototype,"angle",{get:function(){return i.Math.radToDeg(this.rotation)},set:function(t){this.rotation=i.Math.degToRad(t)}}),Object.defineProperty(i.Group.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),i.World=function(t){i.Group.call(this,t,null,"__world",!1),this.bounds=new i.Rectangle(0,0,t.width,t.height),this.camera=null},i.World.prototype=Object.create(i.Group.prototype),i.World.prototype.constructor=i.World,i.World.prototype.boot=function(){this.camera=new i.Camera(this.game,0,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.camera.scale=this.scale,this.game.camera=this.camera,this.game.stage.addChild(this)},i.World.prototype.setBounds=function(t,e,i,n){i<this.game.width&&(i=this.game.width),n<this.game.height&&(n=this.game.height),this.bounds.setTo(t,e,i,n),this.camera.bounds&&this.camera.bounds.setTo(t,e,i,n),this.game.physics.setBoundsToWorld()},i.World.prototype.shutdown=function(){this.destroy(!0,!0)},i.World.prototype.wrap=function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=!1),i?(t.getBounds(),t._currentBounds.right<this.bounds.x?t.x=this.bounds.right:t._currentBounds.x>this.bounds.right&&(t.x=this.bounds.left),t._currentBounds.bottom<this.bounds.top?t.y=this.bounds.bottom:t._currentBounds.top>this.bounds.bottom&&(t.y=this.bounds.top)):(t.x+e<this.bounds.x?t.x=this.bounds.right+e:t.x-e>this.bounds.right&&(t.x=this.bounds.left-e),t.y+e<this.bounds.top?t.y=this.bounds.bottom+e:t.y-e>this.bounds.bottom&&(t.y=this.bounds.top-e))},Object.defineProperty(i.World.prototype,"width",{get:function(){return this.bounds.width},set:function(t){this.bounds.width=t}}),Object.defineProperty(i.World.prototype,"height",{get:function(){return this.bounds.height},set:function(t){this.bounds.height=t}}),Object.defineProperty(i.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth}}),Object.defineProperty(i.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight}}),Object.defineProperty(i.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.integerInRange(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.integerInRange(this.bounds.x,this.bounds.width)}}),Object.defineProperty(i.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.integerInRange(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.integerInRange(this.bounds.y,this.bounds.height)}}),i.ScaleManager=function(t,e,n){this.game=t,this.width=e,this.height=n,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this.pageAlignHorizontally=!1,this.pageAlignVertically=!1,this.maxIterations=5,this.orientationSprite=null,this.enterLandscape=new i.Signal,this.enterPortrait=new i.Signal,this.enterIncorrectOrientation=new i.Signal,this.leaveIncorrectOrientation=new i.Signal,this.hasResized=new i.Signal,this.fullScreenTarget=this.game.canvas,this.enterFullScreen=new i.Signal,this.leaveFullScreen=new i.Signal,this.orientation=0,window.orientation?this.orientation=window.orientation:window.outerWidth>window.outerHeight&&(this.orientation=90),this.scaleFactor=new i.Point(1,1),this.scaleFactorInversed=new i.Point(1,1),this.margin=new i.Point(0,0),this.bounds=new i.Rectangle(0,0,e,n),this.aspectRatio=0,this.sourceAspectRatio=e/n,this.event=null,this.scaleMode=i.ScaleManager.NO_SCALE,this.fullScreenScaleMode=i.ScaleManager.NO_SCALE,this._startHeight=0,this._width=0,this._height=0,this._check=null;
var r=this;window.addEventListener("orientationchange",function(t){return r.checkOrientation(t)},!1),window.addEventListener("resize",function(t){return r.checkResize(t)},!1),document.addEventListener("webkitfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("mozfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("fullscreenchange",function(t){return r.fullScreenChange(t)},!1)},i.ScaleManager.EXACT_FIT=0,i.ScaleManager.NO_SCALE=1,i.ScaleManager.SHOW_ALL=2,i.ScaleManager.prototype={startFullScreen:function(t){!this.isFullScreen&&this.game.device.fullscreen&&("undefined"!=typeof t&&this.game.renderType===i.CANVAS&&(this.game.stage.smoothed=t),this._width=this.width,this._height=this.height,this.game.device.fullscreenKeyboard?this.fullScreenTarget[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):this.fullScreenTarget[this.game.device.requestFullscreen]())},stopFullScreen:function(){this.fullScreenTarget[this.game.device.cancelFullscreen]()},fullScreenChange:function(t){this.event=t,this.isFullScreen?(this.fullScreenScaleMode===i.ScaleManager.EXACT_FIT?(this.fullScreenTarget.style.width="100%",this.fullScreenTarget.style.height="100%",this.width=window.outerWidth,this.height=window.outerHeight,this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.checkResize()):this.fullScreenScaleMode===i.ScaleManager.SHOW_ALL&&(this.setShowAll(),this.refresh()),this.enterFullScreen.dispatch(this.width,this.height)):(this.fullScreenTarget.style.width=this.game.width+"px",this.fullScreenTarget.style.height=this.game.height+"px",this.width=this._width,this.height=this._height,this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.leaveFullScreen.dispatch(this.width,this.height))},forceOrientation:function(t,e,n){"undefined"==typeof e&&(e=!1),this.forceLandscape=t,this.forcePortrait=e,"undefined"!=typeof n&&((null===n||this.game.cache.checkImageKey(n)===!1)&&(n="__default"),this.orientationSprite=new i.Image(this.game,this.game.width/2,this.game.height/2,PIXI.TextureCache[n]),this.orientationSprite.anchor.set(.5),this.checkOrientationState(),this.incorrectOrientation?(this.orientationSprite.visible=!0,this.game.world.visible=!1):(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.game.stage.addChild(this.orientationSprite))},checkOrientationState:function(){this.incorrectOrientation?(this.forceLandscape&&window.innerWidth>window.innerHeight||this.forcePortrait&&window.innerHeight>window.innerWidth)&&(this.incorrectOrientation=!1,this.leaveIncorrectOrientation.dispatch(),this.orientationSprite&&(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.scaleMode!==i.ScaleManager.NO_SCALE&&this.refresh()):(this.forceLandscape&&window.innerWidth<window.innerHeight||this.forcePortrait&&window.innerHeight<window.innerWidth)&&(this.incorrectOrientation=!0,this.enterIncorrectOrientation.dispatch(),this.orientationSprite&&this.orientationSprite.visible===!1&&(this.orientationSprite.visible=!0,this.game.world.visible=!1),this.scaleMode!==i.ScaleManager.NO_SCALE&&this.refresh())},checkOrientation:function(t){this.event=t,this.orientation=window.orientation,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.scaleMode!==i.ScaleManager.NO_SCALE&&this.refresh()},checkResize:function(t){this.event=t,this.orientation=window.outerWidth>window.outerHeight?90:0,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.scaleMode!==i.ScaleManager.NO_SCALE&&this.refresh(),this.checkOrientationState()},refresh:function(){if(this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),null===this._check&&this.maxIterations>0){this._iterations=this.maxIterations;var t=this;this._check=window.setInterval(function(){return t.setScreenSize()},10),this.setScreenSize()}},setScreenSize:function(t){"undefined"==typeof t&&(t=!1),this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),this._iterations--,(t||window.innerHeight>this._startHeight||this._iterations<0)&&(document.documentElement.style.minHeight=window.innerHeight+"px",this.incorrectOrientation?this.setMaximum():this.isFullScreen?this.fullScreenScaleMode===i.ScaleManager.EXACT_FIT?this.setExactFit():this.fullScreenScaleMode===i.ScaleManager.SHOW_ALL&&this.setShowAll():this.scaleMode===i.ScaleManager.EXACT_FIT?this.setExactFit():this.scaleMode===i.ScaleManager.SHOW_ALL&&this.setShowAll(),this.setSize(),clearInterval(this._check),this._check=null)},setSize:function(){this.incorrectOrientation||(this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.maxHeight&&this.height>this.maxHeight&&(this.height=this.maxHeight),this.minWidth&&this.width<this.minWidth&&(this.width=this.minWidth),this.minHeight&&this.height<this.minHeight&&(this.height=this.minHeight)),this.game.canvas.style.width=this.width+"px",this.game.canvas.style.height=this.height+"px",this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.pageAlignHorizontally&&(this.width<window.innerWidth&&!this.incorrectOrientation?(this.margin.x=Math.round((window.innerWidth-this.width)/2),this.game.canvas.style.marginLeft=this.margin.x+"px"):(this.margin.x=0,this.game.canvas.style.marginLeft="0px")),this.pageAlignVertically&&(this.height<window.innerHeight&&!this.incorrectOrientation?(this.margin.y=Math.round((window.innerHeight-this.height)/2),this.game.canvas.style.marginTop=this.margin.y+"px"):(this.margin.y=0,this.game.canvas.style.marginTop="0px")),i.Canvas.getOffset(this.game.canvas,this.game.stage.offset),this.bounds.setTo(this.game.stage.offset.x,this.game.stage.offset.y,this.width,this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.hasResized.dispatch(this.width,this.height),this.checkOrientationState()},setMaximum:function(){this.width=window.innerWidth,this.height=window.innerHeight},setShowAll:function(){var t=Math.min(window.innerHeight/this.game.height,window.innerWidth/this.game.width);this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var t=window.innerWidth,e=window.innerHeight;this.width=this.maxWidth&&t>this.maxWidth?this.maxWidth:t,this.height=this.maxHeight&&e>this.maxHeight?this.maxHeight:e}},i.ScaleManager.prototype.constructor=i.ScaleManager,Object.defineProperty(i.ScaleManager.prototype,"isFullScreen",{get:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(i.ScaleManager.prototype,"isPortrait",{get:function(){return 0===this.orientation||180===this.orientation}}),Object.defineProperty(i.ScaleManager.prototype,"isLandscape",{get:function(){return 90===this.orientation||-90===this.orientation}}),i.Game=function(t,e,n,r,o,s,a,l){this.id=i.GAMES.push(this)-1,this.config=null,this.physicsConfig=l,this.parent="",this.width=800,this.height=600,this.transparent=!1,this.antialias=!0,this.renderer=null,this.renderType=i.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.rnd=null,this.device=null,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,1===arguments.length&&"object"==typeof arguments[0]?this.parseConfig(arguments[0]):("undefined"!=typeof t&&(this.width=t),"undefined"!=typeof e&&(this.height=e),"undefined"!=typeof n&&(this.renderer=n,this.renderType=n),"undefined"!=typeof r&&(this.parent=r),"undefined"!=typeof s&&(this.transparent=s),"undefined"!=typeof a&&(this.antialias=a),this.rnd=new i.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new i.StateManager(this,o));var u=this;return this._onBoot=function(){return u.boot()},"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(this._onBoot,0):(document.addEventListener("DOMContentLoaded",this._onBoot,!1),window.addEventListener("load",this._onBoot,!1)),this},i.Game.prototype={parseConfig:function(t){this.config=t,t.width&&(this.width=i.Utils.parseDimension(t.width,0)),t.height&&(this.height=i.Utils.parseDimension(t.height,1)),t.renderer&&(this.renderer=t.renderer,this.renderType=t.renderer),t.parent&&(this.parent=t.parent),t.transparent&&(this.transparent=t.transparent),t.antialias&&(this.antialias=t.antialias),t.physicsConfig&&(this.physicsConfig=t.physicsConfig);var e=[(Date.now()*Math.random()).toString()];t.seed&&(e=t.seed),this.rnd=new i.RandomDataGenerator(e);var n=null;t.state&&(n=t.state),this.state=new i.StateManager(this,n)},boot:function(){this.isBooted||(document.body?(document.removeEventListener("DOMContentLoaded",this._onBoot),window.removeEventListener("load",this._onBoot),this.onPause=new i.Signal,this.onResume=new i.Signal,this.onBlur=new i.Signal,this.onFocus=new i.Signal,this.isBooted=!0,this.device=new i.Device(this),this.math=i.Math,this.stage=new i.Stage(this,this.width,this.height),this.scale=new i.ScaleManager(this,this.width,this.height),this.setUpRenderer(),this.device.checkFullScreenSupport(),this.world=new i.World(this),this.add=new i.GameObjectFactory(this),this.make=new i.GameObjectCreator(this),this.cache=new i.Cache(this),this.load=new i.Loader(this),this.time=new i.Time(this),this.tweens=new i.TweenManager(this),this.input=new i.Input(this),this.sound=new i.SoundManager(this),this.physics=new i.Physics(this,this.physicsConfig),this.particles=new i.Particles(this),this.plugins=new i.PluginManager(this),this.net=new i.Net(this),this.debug=new i.Utils.Debug(this),this.scratch=new i.BitmapData(this,"__root",1024,1024),this.time.boot(),this.stage.boot(),this.world.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.debug.boot(),this.showDebugHeader(),this.isRunning=!0,this.raf=this.config&&this.config.forceSetTimeOut?new i.RequestAnimationFrame(this,this.config.forceSetTimeOut):new i.RequestAnimationFrame(this,!1),this.raf.start()):window.setTimeout(this._onBoot,20))},showDebugHeader:function(){var t=i.VERSION,e="Canvas",n="HTML Audio",r=1;if(this.renderType===i.WEBGL?(e="WebGL",r++):this.renderType==i.HEADLESS&&(e="Headless"),this.device.webAudio&&(n="WebAudio",r++),this.device.chrome){for(var o=["%c %c %c Phaser v"+t+" - "+e+" - "+n+"  %c %c  http://phaser.io  %c %c ♥%c♥%c♥ ","background: #0cf300","background: #00bc17","color: #ffffff; background: #00711f;","background: #00bc17","background: #0cf300","background: #00bc17"],s=0;3>s;s++)o.push(r>s?"color: #ff2424; background: #fff":"color: #959595; background: #fff");console.log.apply(console,o)}else window.console&&console.log("Phaser v"+t+" - Renderer: "+e+" - Audio: "+n+" - http://phaser.io")},setUpRenderer:function(){if(this.device.trident&&(this.renderType=i.CANVAS),this.renderType===i.HEADLESS||this.renderType===i.CANVAS||this.renderType===i.AUTO&&this.device.webGL===!1){if(!this.device.canvas)throw new Error("Phaser.Game - cannot create Canvas or WebGL context, aborting.");this.renderType===i.AUTO&&(this.renderType=i.CANVAS),this.renderer=new PIXI.CanvasRenderer(this.width,this.height,this.canvas,this.transparent),this.context=this.renderer.context}else this.renderType=i.WEBGL,this.renderer=new PIXI.WebGLRenderer(this.width,this.height,this.canvas,this.transparent,this.antialias),this.context=null;this.renderType!==i.HEADLESS&&(this.stage.smoothed=this.antialias,i.Canvas.addToDOM(this.canvas,this.parent,!0),i.Canvas.setTouchAction(this.canvas))},update:function(t){this.time.update(t),this._paused||this.pendingStep?(this.state.pauseUpdate(),this.debug.preUpdate()):(this.stepping&&(this.pendingStep=!0),this.debug.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(),this.plugins.preUpdate(),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.particles.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.renderType!=i.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(),this.state.render(),this.plugins.postRender())},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.input.destroy(),this.state.destroy(),this.physics.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.time=null,this.world=null,this.isBooted=!1},gamePaused:function(t){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.setMute(),this.onPause.dispatch(t))},gameResumed:function(t){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.unsetMute(),this.onResume.dispatch(t))},focusLoss:function(t){this.onBlur.dispatch(t),this.gamePaused(t)},focusGain:function(t){this.onFocus.dispatch(t),this.gameResumed(t)}},i.Game.prototype.constructor=i.Game,Object.defineProperty(i.Game.prototype,"paused",{get:function(){return this._paused},set:function(t){t===!0?this._paused===!1&&(this._paused=!0,this._codePaused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)):this._paused&&(this._paused=!1,this._codePaused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this))}}),i.Input=function(t){this.game=t,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.moveCallback=null,this.moveCallbackContext=this,this.pollRate=0,this.disabled=!1,this.multiInputOverride=i.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=10,this.currentPointers=0,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new i.ArrayList,this._localPoint=new i.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},i.Input.MOUSE_OVERRIDES_TOUCH=0,i.Input.TOUCH_OVERRIDES_MOUSE=1,i.Input.MOUSE_TOUCH_COMBINE=2,i.Input.prototype={boot:function(){this.mousePointer=new i.Pointer(this.game,0),this.pointer1=new i.Pointer(this.game,1),this.pointer2=new i.Pointer(this.game,2),this.mouse=new i.Mouse(this.game),this.keyboard=new i.Keyboard(this.game),this.touch=new i.Touch(this.game),this.mspointer=new i.MSPointer(this.game),this.gamepad=new i.Gamepad(this.game),this.onDown=new i.Signal,this.onUp=new i.Signal,this.onTap=new i.Signal,this.onHold=new i.Signal,this.scale=new i.Point(1,1),this.speed=new i.Point,this.position=new i.Point,this._oldPosition=new i.Point,this.circle=new i.Circle(0,0,44),this.activePointer=this.mousePointer,this.currentPointers=0,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.keyboard.start(),this.touch.start(),this.mspointer.start(),this.mousePointer.active=!0},destroy:function(){this.mouse.stop(),this.keyboard.stop(),this.touch.stop(),this.mspointer.stop(),this.gamepad.stop(),this.moveCallbacks=[],this.moveCallback=null},setMoveCallback:function(t,e){this.moveCallback=t,this.moveCallbackContext=e},addMoveCallback:function(t,e){return this.moveCallbacks.push({callback:t,context:e})-1},deleteMoveCallback:function(t){this.moveCallbacks[t]&&this.moveCallbacks.splice(t,1)},addPointer:function(){for(var t=0,e=10;e>0;e--)null===this["pointer"+e]&&(t=e);return 0===t?(console.warn("You can only have 10 Pointer objects"),null):(this["pointer"+t]=new i.Pointer(this.game,t),this["pointer"+t])},update:function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad.active&&this.gamepad.update(),this.pointer1.update(),this.pointer2.update(),this.pointer3&&this.pointer3.update(),this.pointer4&&this.pointer4.update(),this.pointer5&&this.pointer5.update(),this.pointer6&&this.pointer6.update(),this.pointer7&&this.pointer7.update(),this.pointer8&&this.pointer8.update(),this.pointer9&&this.pointer9.update(),this.pointer10&&this.pointer10.update(),void(this._pollCounter=0))},reset:function(t){if(this.game.isBooted&&!this.resetLocked){"undefined"==typeof t&&(t=!1),this.keyboard.reset(t),this.mousePointer.reset(),this.gamepad.reset();for(var e=1;10>=e;e++)this["pointer"+e]&&this["pointer"+e].reset();this.currentPointers=0,"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),t&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new i.Signal,this.onUp=new i.Signal,this.onTap=new i.Signal,this.onHold=new i.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(t,e){this._oldPosition.setTo(t,e),this.speed.setTo(0,0)},startPointer:function(t){if(this.maxPointers<10&&this.totalActivePointers==this.maxPointers)return null;if(this.pointer1.active===!1)return this.pointer1.start(t);if(this.pointer2.active===!1)return this.pointer2.start(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active===!1)return this["pointer"+e].start(t);return null},updatePointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.move(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.move(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].move(t);return null},stopPointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.stop(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.stop(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].stop(t);return null},getPointer:function(t){if(t=t||!1,this.pointer1.active==t)return this.pointer1;if(this.pointer2.active==t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active==t)return this["pointer"+e];return null},getPointerFromIdentifier:function(t){if(this.pointer1.identifier===t)return this.pointer1;if(this.pointer2.identifier===t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].identifier===t)return this["pointer"+e];return null},getPointerFromId:function(t){if(this.pointer1.pointerId===t)return this.pointer1;if(this.pointer2.pointerId===t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].pointerId===t)return this["pointer"+e];return null},getLocalPosition:function(t,e,n){"undefined"==typeof n&&(n=new i.Point);var r=t.worldTransform,o=1/(r.a*r.d+r.b*-r.c);return n.setTo(r.d*o*e.x+-r.b*o*e.y+(r.ty*r.b-r.tx*r.d)*o,r.a*o*e.y+-r.c*o*e.x+(-r.ty*r.a+r.tx*r.c)*o)},hitTest:function(t,e,n){if(!t.worldVisible)return!1;if(this.getLocalPosition(t,e,this._localPoint),n.copyFrom(this._localPoint),t.hitArea&&t.hitArea.contains)return t.hitArea.contains(this._localPoint.x,this._localPoint.y)?!0:!1;if(t instanceof i.TileSprite){var r=t.width,o=t.height,s=-r*t.anchor.x;if(this._localPoint.x>s&&this._localPoint.x<s+r){var a=-o*t.anchor.y;if(this._localPoint.y>a&&this._localPoint.y<a+o)return!0}}else if(t instanceof PIXI.Sprite){var r=t.texture.frame.width,o=t.texture.frame.height,s=-r*t.anchor.x;if(this._localPoint.x>s&&this._localPoint.x<s+r){var a=-o*t.anchor.y;if(this._localPoint.y>a&&this._localPoint.y<a+o)return!0}}for(var l=0,u=t.children.length;u>l;l++)if(this.hitTest(t.children[l],e,n))return!0;return!1}},i.Input.prototype.constructor=i.Input,Object.defineProperty(i.Input.prototype,"x",{get:function(){return this._x},set:function(t){this._x=Math.floor(t)}}),Object.defineProperty(i.Input.prototype,"y",{get:function(){return this._y},set:function(t){this._y=Math.floor(t)}}),Object.defineProperty(i.Input.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(i.Input.prototype,"totalInactivePointers",{get:function(){return 10-this.currentPointers}}),Object.defineProperty(i.Input.prototype,"totalActivePointers",{get:function(){this.currentPointers=0;for(var t=1;10>=t;t++)this["pointer"+t]&&this["pointer"+t].active&&this.currentPointers++;return this.currentPointers}}),Object.defineProperty(i.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(i.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),i.Key=function(t,e){this.game=t,this.enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=e,this.onDown=new i.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new i.Signal},i.Key.prototype={update:function(){this.enabled&&this.isDown&&(this.duration=this.game.time.now-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(t){this.enabled&&(this.event=t,this.isDown||(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.now,this.duration=0,this.repeats=0,this.onDown.dispatch(this)))},processKeyUp:function(t){this.enabled&&(this.event=t,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.duration=this.game.time.now-this.timeDown,this.onUp.dispatch(this)))},reset:function(t){"undefined"==typeof t&&(t=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.duration=this.game.time.now-this.timeDown,this.enabled=!0,t&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},justPressed:function(t){return"undefined"==typeof t&&(t=50),this.isDown&&this.duration<t},justReleased:function(t){return"undefined"==typeof t&&(t=50),!this.isDown&&this.game.time.now-this.timeUp<t}},i.Key.prototype.constructor=i.Key,i.Keyboard=function(t){this.game=t,this.disabled=!1,this.event=null,this.callbackContext=this,this.onDownCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyUp=null,this._i=0},i.Keyboard.prototype={addCallbacks:function(t,e,i){this.callbackContext=t,this.onDownCallback=e,"undefined"!=typeof i&&(this.onUpCallback=i)},addKey:function(t){return this._keys[t]||(this._keys[t]=new i.Key(this.game,t),this.addKeyCapture(t)),this._keys[t]},removeKey:function(t){this._keys[t]&&(this._keys[t]=null,this.removeKeyCapture(t))},createCursorKeys:function(){return{up:this.addKey(i.Keyboard.UP),down:this.addKey(i.Keyboard.DOWN),left:this.addKey(i.Keyboard.LEFT),right:this.addKey(i.Keyboard.RIGHT)}},start:function(){if(null===this._onKeyDown){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this._onKeyDown=null,this._onKeyUp=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(t){if("object"==typeof t)for(var e in t)this._capture[t[e]]=!0;else this._capture[t]=!0},removeKeyCapture:function(t){delete this._capture[t]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(t){this.event=t,this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t),this._keys[t.keyCode]||(this._keys[t.keyCode]=new i.Key(this.game,t.keyCode)),this._keys[t.keyCode].processKeyDown(t))},processKeyUp:function(t){this.event=t,this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t),this._keys[t.keyCode]||(this._keys[t.keyCode]=new i.Key(this.game,t.keyCode)),this._keys[t.keyCode].processKeyUp(t))},reset:function(t){"undefined"==typeof t&&(t=!0),this.event=null;for(var e=this._keys.length;e--;)this._keys[e]&&this._keys[e].reset(t)},justPressed:function(t,e){return"undefined"==typeof e&&(e=50),this._keys[t]?this._keys[t].justPressed(e):!1},justReleased:function(t,e){return"undefined"==typeof e&&(e=50),this._keys[t]?this._keys[t].justReleased(e):!1},isDown:function(t){return this._keys[t]?this._keys[t].isDown:!1}},i.Keyboard.prototype.constructor=i.Keyboard,i.Keyboard.A="A".charCodeAt(0),i.Keyboard.B="B".charCodeAt(0),i.Keyboard.C="C".charCodeAt(0),i.Keyboard.D="D".charCodeAt(0),i.Keyboard.E="E".charCodeAt(0),i.Keyboard.F="F".charCodeAt(0),i.Keyboard.G="G".charCodeAt(0),i.Keyboard.H="H".charCodeAt(0),i.Keyboard.I="I".charCodeAt(0),i.Keyboard.J="J".charCodeAt(0),i.Keyboard.K="K".charCodeAt(0),i.Keyboard.L="L".charCodeAt(0),i.Keyboard.M="M".charCodeAt(0),i.Keyboard.N="N".charCodeAt(0),i.Keyboard.O="O".charCodeAt(0),i.Keyboard.P="P".charCodeAt(0),i.Keyboard.Q="Q".charCodeAt(0),i.Keyboard.R="R".charCodeAt(0),i.Keyboard.S="S".charCodeAt(0),i.Keyboard.T="T".charCodeAt(0),i.Keyboard.U="U".charCodeAt(0),i.Keyboard.V="V".charCodeAt(0),i.Keyboard.W="W".charCodeAt(0),i.Keyboard.X="X".charCodeAt(0),i.Keyboard.Y="Y".charCodeAt(0),i.Keyboard.Z="Z".charCodeAt(0),i.Keyboard.ZERO="0".charCodeAt(0),i.Keyboard.ONE="1".charCodeAt(0),i.Keyboard.TWO="2".charCodeAt(0),i.Keyboard.THREE="3".charCodeAt(0),i.Keyboard.FOUR="4".charCodeAt(0),i.Keyboard.FIVE="5".charCodeAt(0),i.Keyboard.SIX="6".charCodeAt(0),i.Keyboard.SEVEN="7".charCodeAt(0),i.Keyboard.EIGHT="8".charCodeAt(0),i.Keyboard.NINE="9".charCodeAt(0),i.Keyboard.NUMPAD_0=96,i.Keyboard.NUMPAD_1=97,i.Keyboard.NUMPAD_2=98,i.Keyboard.NUMPAD_3=99,i.Keyboard.NUMPAD_4=100,i.Keyboard.NUMPAD_5=101,i.Keyboard.NUMPAD_6=102,i.Keyboard.NUMPAD_7=103,i.Keyboard.NUMPAD_8=104,i.Keyboard.NUMPAD_9=105,i.Keyboard.NUMPAD_MULTIPLY=106,i.Keyboard.NUMPAD_ADD=107,i.Keyboard.NUMPAD_ENTER=108,i.Keyboard.NUMPAD_SUBTRACT=109,i.Keyboard.NUMPAD_DECIMAL=110,i.Keyboard.NUMPAD_DIVIDE=111,i.Keyboard.F1=112,i.Keyboard.F2=113,i.Keyboard.F3=114,i.Keyboard.F4=115,i.Keyboard.F5=116,i.Keyboard.F6=117,i.Keyboard.F7=118,i.Keyboard.F8=119,i.Keyboard.F9=120,i.Keyboard.F10=121,i.Keyboard.F11=122,i.Keyboard.F12=123,i.Keyboard.F13=124,i.Keyboard.F14=125,i.Keyboard.F15=126,i.Keyboard.COLON=186,i.Keyboard.EQUALS=187,i.Keyboard.UNDERSCORE=189,i.Keyboard.QUESTION_MARK=191,i.Keyboard.TILDE=192,i.Keyboard.OPEN_BRACKET=219,i.Keyboard.BACKWARD_SLASH=220,i.Keyboard.CLOSED_BRACKET=221,i.Keyboard.QUOTES=222,i.Keyboard.BACKSPACE=8,i.Keyboard.TAB=9,i.Keyboard.CLEAR=12,i.Keyboard.ENTER=13,i.Keyboard.SHIFT=16,i.Keyboard.CONTROL=17,i.Keyboard.ALT=18,i.Keyboard.CAPS_LOCK=20,i.Keyboard.ESC=27,i.Keyboard.SPACEBAR=32,i.Keyboard.PAGE_UP=33,i.Keyboard.PAGE_DOWN=34,i.Keyboard.END=35,i.Keyboard.HOME=36,i.Keyboard.LEFT=37,i.Keyboard.UP=38,i.Keyboard.RIGHT=39,i.Keyboard.DOWN=40,i.Keyboard.INSERT=45,i.Keyboard.DELETE=46,i.Keyboard.HELP=47,i.Keyboard.NUM_LOCK=144,i.Mouse=function(t){this.game=t,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseMoveCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.capture=!1,this.button=-1,this.disabled=!1,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new i.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null},i.Mouse.NO_BUTTON=-1,i.Mouse.LEFT_BUTTON=0,i.Mouse.MIDDLE_BUTTON=1,i.Mouse.RIGHT_BUTTON=2,i.Mouse.prototype={start:function(){if((!this.game.device.android||this.game.device.chrome!==!1)&&null===this._onMouseDown){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseOut=function(e){return t.onMouseOut(e)},this._onMouseOver=function(e){return t.onMouseOver(e)},this.game.canvas.addEventListener("mousedown",this._onMouseDown,!0),this.game.canvas.addEventListener("mousemove",this._onMouseMove,!0),this.game.canvas.addEventListener("mouseup",this._onMouseUp,!0),this.game.canvas.addEventListener("mouseover",this._onMouseOver,!0),this.game.canvas.addEventListener("mouseout",this._onMouseOut,!0)}},onMouseDown:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=t.button,this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.start(t))},onMouseMove:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.move(t))},onMouseUp:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=i.Mouse.NO_BUTTON,this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.stop(t))},onMouseOut:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(this.game.input.mousePointer.withinGame=!1,this.stopOnGameOut&&(t.identifier=0,this.game.input.mousePointer.stop(t)))},onMouseOver:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(this.game.input.mousePointer.withinGame=!0)},requestPointerLock:function(){if(this.game.device.pointerLock){var t=this.game.canvas;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock();var e=this;this._pointerLockChange=function(t){return e.pointerLockChange(t)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)
}},pointerLockChange:function(t){var e=this.game.canvas;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e?(this.locked=!0,this.pointerLock.dispatch(!0,t)):(this.locked=!1,this.pointerLock.dispatch(!1,t))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){this.game.canvas.removeEventListener("mousedown",this._onMouseDown,!0),this.game.canvas.removeEventListener("mousemove",this._onMouseMove,!0),this.game.canvas.removeEventListener("mouseup",this._onMouseUp,!0),this.game.canvas.removeEventListener("mouseover",this._onMouseOver,!0),this.game.canvas.removeEventListener("mouseout",this._onMouseOut,!0)}},i.Mouse.prototype.constructor=i.Mouse,i.MSPointer=function(t){this.game=t,this.callbackContext=this.game,this.disabled=!1,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null},i.MSPointer.prototype={start:function(){if(null===this._onMSPointerDown){var t=this;this.game.device.mspointer===!0&&(this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this.game.renderer.view.addEventListener("MSPointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("MSPointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("MSPointerUp",this._onMSPointerUp,!1),this.game.renderer.view.addEventListener("pointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("pointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("pointerUp",this._onMSPointerUp,!1),this.game.renderer.view.style["-ms-content-zooming"]="none",this.game.renderer.view.style["-ms-touch-action"]="none")}},onPointerDown:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.startPointer(t))},onPointerMove:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.updatePointer(t))},onPointerUp:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.stopPointer(t))},stop:function(){this.game.canvas.removeEventListener("MSPointerDown",this._onMSPointerDown),this.game.canvas.removeEventListener("MSPointerMove",this._onMSPointerMove),this.game.canvas.removeEventListener("MSPointerUp",this._onMSPointerUp),this.game.canvas.removeEventListener("pointerDown",this._onMSPointerDown),this.game.canvas.removeEventListener("pointerMove",this._onMSPointerMove),this.game.canvas.removeEventListener("pointerUp",this._onMSPointerUp)}},i.MSPointer.prototype.constructor=i.MSPointer,i.Pointer=function(t,e){this.game=t,this.id=e,this.type=i.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=!1,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.position=new i.Point,this.positionDown=new i.Point,this.positionUp=new i.Point,this.circle=new i.Circle(0,0,44),0===e&&(this.isMouse=!0)},i.Pointer.prototype={start:function(t){return t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,"undefined"!=typeof t.button&&(this.button=t.button),this._history=[],this.active=!0,this.withinGame=!0,this.isDown=!0,this.isUp=!1,this.msSinceLastClick=this.game.time.now-this.timeDown,this.timeDown=this.game.time.now,this._holdSent=!1,this.move(t,!0),this.positionDown.setTo(this.x,this.y),(this.game.input.multiInputOverride===i.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===i.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===i.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.x,this.y),this.game.input.onDown.dispatch(this,t),this.game.input.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,this.isMouse||this.game.input.currentPointers++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){this.active&&(this._holdSent===!1&&this.duration>=this.game.input.holdRate&&((this.game.input.multiInputOverride==i.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==i.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==i.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&this.game.input.onHold.dispatch(this),this._holdSent=!0),this.game.input.recordPointerHistory&&this.game.time.now>=this._nextDrop&&(this._nextDrop=this.game.time.now+this.game.input.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>this.game.input.recordLimit&&this._history.shift()))},move:function(t,e){if(!this.game.input.pollLocked){if("undefined"==typeof e&&(e=!1),"undefined"!=typeof t.button&&(this.button=t.button),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.isMouse&&this.game.input.mouse.locked&&!e&&(this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.stage.offset.x)*this.game.input.scale.x,this.y=(this.pageY-this.game.stage.offset.y)*this.game.input.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(this.game.input.multiInputOverride===i.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===i.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===i.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.activePointer=this,this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.game.input.x,this.game.input.y),this.game.input.circle.x=this.game.input.x,this.game.input.circle.y=this.game.input.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY),this.game.paused)return this;this.game.input.moveCallback&&this.game.input.moveCallback.call(this.game.input.moveCallbackContext,this,this.x,this.y);for(var n=this.game.input.moveCallbacks.length;n--;)this.game.input.moveCallbacks[n].callback.call(this.game.input.moveCallbacks[n].context,this,this.x,this.y);if(null!==this.targetObject&&this.targetObject.isDragged===!0)return this.targetObject.update(this)===!1&&(this.targetObject=null),this;if(this._highestRenderOrderID=Number.MAX_SAFE_INTEGER,this._highestRenderObject=null,this._highestInputPriorityID=-1,this.game.input.interactiveItems.total>0){var r=this.game.input.interactiveItems.first;do r&&r.validForInput(this._highestInputPriorityID,this._highestRenderOrderID)&&(!e&&r.checkPointerOver(this)||e&&r.checkPointerDown(this))&&(this._highestRenderOrderID=r.sprite._cache[3],this._highestInputPriorityID=r.priorityID,this._highestRenderObject=r),r=this.game.input.interactiveItems.next;while(null!==r)}return null===this._highestRenderObject?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=this._highestRenderObject,this._highestRenderObject._pointerOverHandler(this)):this.targetObject===this._highestRenderObject?this._highestRenderObject.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=this._highestRenderObject,this.targetObject._pointerOverHandler(this)),this}},leave:function(t){this.withinGame=!1,this.move(t,!1)},stop:function(t){return this._stateReset?void t.preventDefault():(this.timeUp=this.game.time.now,(this.game.input.multiInputOverride===i.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===i.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===i.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.onUp.dispatch(this,t),this.duration>=0&&this.duration<=this.game.input.tapRate&&(this.timeUp-this.previousTapTime<this.game.input.doubleTapRate?this.game.input.onTap.dispatch(this,!0):this.game.input.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.id>0&&(this.active=!1),this.withinGame=!1,this.isDown=!1,this.isUp=!0,this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&this.game.input.currentPointers--,this.game.input.interactiveItems.callAll("_releasedHandler",this),this.targetObject=null,this)},justPressed:function(t){return t=t||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+t>this.game.time.now},justReleased:function(t){return t=t||this.game.input.justReleasedRate,this.isUp===!0&&this.timeUp+t>this.game.time.now},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.isDown=!1,this.isUp=!0,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},i.Pointer.prototype.constructor=i.Pointer,Object.defineProperty(i.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.now-this.timeDown}}),Object.defineProperty(i.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(i.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),i.Touch=function(t){this.game=t,this.disabled=!1,this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},i.Touch.prototype={start:function(){if(null===this._onTouchStart){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1))}},consumeDocumentTouches:function(){this._documentTouchMove=function(t){t.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},onTouchStart:function(t){if(this.event=t,this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.startPointer(t.changedTouches[e])}},onTouchCancel:function(t){if(this.event=t,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])}},onTouchEnter:function(t){console.log("touch enter",t),this.event=t,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||this.preventDefault&&t.preventDefault()},onTouchLeave:function(t){this.event=t,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault()},onTouchMove:function(t){this.event=t,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.updatePointer(t.changedTouches[e])},onTouchEnd:function(t){this.event=t,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},i.Touch.prototype.constructor=i.Touch,i.Gamepad=function(t){this.game=t,this._gamepads=[new i.SinglePad(t,this),new i.SinglePad(t,this),new i.SinglePad(t,this),new i.SinglePad(t,this)],this._gamepadIndexMap={},this._rawPads=[],this._active=!1,this.disabled=!1,this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||-1!=navigator.userAgent.indexOf("Firefox/")||!!navigator.getGamepads,this._prevRawGamepadTypes=[],this._prevTimestamps=[],this.callbackContext=this,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this._ongamepadconnected=null,this._gamepaddisconnected=null},i.Gamepad.prototype={addCallbacks:function(t,e){"undefined"!=typeof e&&(this.onConnectCallback="function"==typeof e.onConnect?e.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof e.onDisconnect?e.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof e.onDown?e.onDown:this.onDownCallback,this.onUpCallback="function"==typeof e.onUp?e.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof e.onAxis?e.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof e.onFloat?e.onFloat:this.onFloatCallback)},start:function(){if(!this._active){this._active=!0;var t=this;this._ongamepadconnected=function(e){var i=e.gamepad;t._rawPads.push(i),t._gamepads[i.index].connect(i)},window.addEventListener("gamepadconnected",this._ongamepadconnected,!1),this._ongamepaddisconnected=function(e){var i=e.gamepad;for(var n in t._rawPads)t._rawPads[n].index===i.index&&t._rawPads.splice(n,1);t._gamepads[i.index].disconnect()},window.addEventListener("gamepaddisconnected",this._ongamepaddisconnected,!1)}},update:function(){this._pollGamepads();for(var t=0;t<this._gamepads.length;t++)this._gamepads[t]._connected&&this._gamepads[t].pollStatus()},_pollGamepads:function(){var t=navigator.getGamepads||navigator.webkitGetGamepads&&navigator.webkitGetGamepads()||navigator.webkitGamepads;if(t){this._rawPads=[];for(var e=!1,i=0;i<t.length&&(typeof t[i]!==this._prevRawGamepadTypes[i]&&(e=!0,this._prevRawGamepadTypes[i]=typeof t[i]),t[i]&&this._rawPads.push(t[i]),3!==i);i++);if(e){for(var n,r={rawIndices:{},padIndices:{}},o=0;o<this._gamepads.length;o++)if(n=this._gamepads[o],n.connected)for(var s=0;s<this._rawPads.length;s++)this._rawPads[s].index===n.index&&(r.rawIndices[n.index]=!0,r.padIndices[o]=!0);for(var a=0;a<this._gamepads.length;a++)if(n=this._gamepads[a],!r.padIndices[a]){this._rawPads.length<1&&n.disconnect();for(var l=0;l<this._rawPads.length&&!r.padIndices[a];l++){var u=this._rawPads[l];if(u){if(r.rawIndices[u.index]){n.disconnect();continue}n.connect(u),r.rawIndices[u.index]=!0,r.padIndices[a]=!0}else n.disconnect()}}}}},setDeadZones:function(t){for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].deadZone=t},stop:function(){this._active=!1,window.removeEventListener("gamepadconnected",this._ongamepadconnected),window.removeEventListener("gamepaddisconnected",this._ongamepaddisconnected)},reset:function(){this.update();for(var t=0;t<this._gamepads.length;t++)this._gamepads[t].reset()},justPressed:function(t,e){for(var i=0;i<this._gamepads.length;i++)if(this._gamepads[i].justPressed(t,e)===!0)return!0;return!1},justReleased:function(t,e){for(var i=0;i<this._gamepads.length;i++)if(this._gamepads[i].justReleased(t,e)===!0)return!0;return!1},isDown:function(t){for(var e=0;e<this._gamepads.length;e++)if(this._gamepads[e].isDown(t)===!0)return!0;return!1}},i.Gamepad.prototype.constructor=i.Gamepad,Object.defineProperty(i.Gamepad.prototype,"active",{get:function(){return this._active}}),Object.defineProperty(i.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}}),Object.defineProperty(i.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}}),Object.defineProperty(i.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}}),Object.defineProperty(i.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}}),Object.defineProperty(i.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}}),Object.defineProperty(i.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}}),i.Gamepad.BUTTON_0=0,i.Gamepad.BUTTON_1=1,i.Gamepad.BUTTON_2=2,i.Gamepad.BUTTON_3=3,i.Gamepad.BUTTON_4=4,i.Gamepad.BUTTON_5=5,i.Gamepad.BUTTON_6=6,i.Gamepad.BUTTON_7=7,i.Gamepad.BUTTON_8=8,i.Gamepad.BUTTON_9=9,i.Gamepad.BUTTON_10=10,i.Gamepad.BUTTON_11=11,i.Gamepad.BUTTON_12=12,i.Gamepad.BUTTON_13=13,i.Gamepad.BUTTON_14=14,i.Gamepad.BUTTON_15=15,i.Gamepad.AXIS_0=0,i.Gamepad.AXIS_1=1,i.Gamepad.AXIS_2=2,i.Gamepad.AXIS_3=3,i.Gamepad.AXIS_4=4,i.Gamepad.AXIS_5=5,i.Gamepad.AXIS_6=6,i.Gamepad.AXIS_7=7,i.Gamepad.AXIS_8=8,i.Gamepad.AXIS_9=9,i.Gamepad.XBOX360_A=0,i.Gamepad.XBOX360_B=1,i.Gamepad.XBOX360_X=2,i.Gamepad.XBOX360_Y=3,i.Gamepad.XBOX360_LEFT_BUMPER=4,i.Gamepad.XBOX360_RIGHT_BUMPER=5,i.Gamepad.XBOX360_LEFT_TRIGGER=6,i.Gamepad.XBOX360_RIGHT_TRIGGER=7,i.Gamepad.XBOX360_BACK=8,i.Gamepad.XBOX360_START=9,i.Gamepad.XBOX360_STICK_LEFT_BUTTON=10,i.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11,i.Gamepad.XBOX360_DPAD_LEFT=14,i.Gamepad.XBOX360_DPAD_RIGHT=15,i.Gamepad.XBOX360_DPAD_UP=12,i.Gamepad.XBOX360_DPAD_DOWN=13,i.Gamepad.XBOX360_STICK_LEFT_X=0,i.Gamepad.XBOX360_STICK_LEFT_Y=1,i.Gamepad.XBOX360_STICK_RIGHT_X=2,i.Gamepad.XBOX360_STICK_RIGHT_Y=3,i.SinglePad=function(t,e){this.game=t,this._padParent=e,this._index=null,this._rawPad=null,this._connected=!1,this._prevTimestamp=null,this._rawButtons=[],this._buttons=[],this._axes=[],this._hotkeys=[],this.callbackContext=this,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this.deadZone=.26},i.SinglePad.prototype={addCallbacks:function(t,e){"undefined"!=typeof e&&(this.onConnectCallback="function"==typeof e.onConnect?e.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof e.onDisconnect?e.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof e.onDown?e.onDown:this.onDownCallback,this.onUpCallback="function"==typeof e.onUp?e.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof e.onAxis?e.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof e.onFloat?e.onFloat:this.onFloatCallback)},addButton:function(t){return this._hotkeys[t]=new i.GamepadButton(this.game,t),this._hotkeys[t]},pollStatus:function(){if(!this._rawPad.timestamp||this._rawPad.timestamp!=this._prevTimestamp){for(var t=0;t<this._rawPad.buttons.length;t+=1){var e=this._rawPad.buttons[t];this._rawButtons[t]!==e&&(1===e?this.processButtonDown(t,e):0===e?this.processButtonUp(t,e):this.processButtonFloat(t,e),this._rawButtons[t]=e)}for(var i=this._rawPad.axes,n=0;n<i.length;n+=1){var r=i[n];this.processAxisChange(r>0&&r>this.deadZone||0>r&&r<-this.deadZone?{axis:n,value:r}:{axis:n,value:0})}this._prevTimestamp=this._rawPad.timestamp}},connect:function(t){var e=!this._connected;this._index=t.index,this._connected=!0,this._rawPad=t,this._rawButtons=t.buttons,this._axes=t.axes,e&&this._padParent.onConnectCallback&&this._padParent.onConnectCallback.call(this._padParent.callbackContext,this._index),e&&this.onConnectCallback&&this.onConnectCallback.call(this.callbackContext)},disconnect:function(){var t=this._connected;this._connected=!1,this._rawPad=void 0,this._rawButtons=[],this._buttons=[];var e=this._index;this._index=null,t&&this._padParent.onDisconnectCallback&&this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,e),t&&this.onDisconnectCallback&&this.onDisconnectCallback.call(this.callbackContext)},processAxisChange:function(t){this.game.input.disabled||this.game.input.gamepad.disabled||this._axes[t.axis]!==t.value&&(this._axes[t.axis]=t.value,this._padParent.onAxisCallback&&this._padParent.onAxisCallback.call(this._padParent.callbackContext,t,this._index),this.onAxisCallback&&this.onAxisCallback.call(this.callbackContext,t))},processButtonDown:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onDownCallback&&this._padParent.onDownCallback.call(this._padParent.callbackContext,t,e,this._index),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t,e),this._buttons[t]&&this._buttons[t].isDown?this._buttons[t].duration=this.game.time.now-this._buttons[t].timeDown:this._buttons[t]?(this._buttons[t].isDown=!0,this._buttons[t].timeDown=this.game.time.now,this._buttons[t].duration=0,this._buttons[t].value=e):this._buttons[t]={isDown:!0,timeDown:this.game.time.now,timeUp:0,duration:0,value:e},this._hotkeys[t]&&this._hotkeys[t].processButtonDown(e))},processButtonUp:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onUpCallback&&this._padParent.onUpCallback.call(this._padParent.callbackContext,t,e,this._index),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t,e),this._hotkeys[t]&&this._hotkeys[t].processButtonUp(e),this._buttons[t]?(this._buttons[t].isDown=!1,this._buttons[t].timeUp=this.game.time.now,this._buttons[t].value=e):this._buttons[t]={isDown:!1,timeDown:this.game.time.now,timeUp:this.game.time.now,duration:0,value:e})},processButtonFloat:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onFloatCallback&&this._padParent.onFloatCallback.call(this._padParent.callbackContext,t,e,this._index),this.onFloatCallback&&this.onFloatCallback.call(this.callbackContext,t,e),this._buttons[t]?this._buttons[t].value=e:this._buttons[t]={value:e},this._hotkeys[t]&&this._hotkeys[t].processButtonFloat(e))},axis:function(t){return this._axes[t]?this._axes[t]:!1},isDown:function(t){return this._buttons[t]?this._buttons[t].isDown:!1},justReleased:function(t,e){return"undefined"==typeof e&&(e=250),this._buttons[t]&&this._buttons[t].isDown===!1&&this.game.time.now-this._buttons[t].timeUp<e},justPressed:function(t,e){return"undefined"==typeof e&&(e=250),this._buttons[t]&&this._buttons[t].isDown&&this._buttons[t].duration<e},buttonValue:function(t){return this._buttons[t]?this._buttons[t].value:!1},reset:function(){for(var t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(var e=0;e<this._axes.length;e++)this._axes[e]=0}},i.SinglePad.prototype.constructor=i.SinglePad,Object.defineProperty(i.SinglePad.prototype,"connected",{get:function(){return this._connected}}),Object.defineProperty(i.SinglePad.prototype,"index",{get:function(){return this._index}}),i.GamepadButton=function(t,e){this.game=t,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this.value=0,this.buttonCode=e,this.onDown=new i.Signal,this.onUp=new i.Signal,this.onFloat=new i.Signal},i.GamepadButton.prototype={processButtonDown:function(t){this.isDown?(this.duration=this.game.time.now-this.timeDown,this.repeats++):(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.now,this.duration=0,this.repeats=0,this.value=t,this.onDown.dispatch(this,t))},processButtonUp:function(t){this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.value=t,this.onUp.dispatch(this,t)},processButtonFloat:function(t){this.value=t,this.onFloat.dispatch(this,t)},justPressed:function(t){return"undefined"==typeof t&&(t=250),this.isDown&&this.duration<t},justReleased:function(t){return"undefined"==typeof t&&(t=250),this.isDown===!1&&this.game.time.now-this.timeUp<t}},i.GamepadButton.prototype.constructor=i.GamepadButton,i.InputHandler=function(t){this.sprite=t,this.game=t.game,this.enabled=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.consumePointerEvent=!1,this._dragPhase=!1,this._wasEnabled=!1,this._tempPoint=new i.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},i.InputHandler.prototype={start:function(t,e){if(t=t||0,"undefined"==typeof e&&(e=!1),this.enabled===!1){this.game.input.interactiveItems.add(this),this.useHandCursor=e,this.priorityID=t;for(var n=0;10>n;n++)this._pointerData[n]={id:n,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new i.Point,this.enabled=!0,this._wasEnabled=!0,this.sprite.events&&null===this.sprite.events.onInputOver&&(this.sprite.events.onInputOver=new i.Signal,this.sprite.events.onInputOut=new i.Signal,this.sprite.events.onInputDown=new i.Signal,this.sprite.events.onInputUp=new i.Signal,this.sprite.events.onDragStart=new i.Signal,this.sprite.events.onDragStop=new i.Signal)}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var t=0;10>t;t++)this._pointerData[t]={id:t,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(t,e){return 0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID?!1:this.pixelPerfectClick||this.pixelPerfectOver?!0:this.priorityID>t||this.priorityID===t&&this.sprite._cache[3]<e?!0:!1},pointerX:function(t){return t=t||0,this._pointerData[t].x},pointerY:function(t){return t=t||0,this._pointerData[t].y},pointerDown:function(t){return t=t||0,this._pointerData[t].isDown},pointerUp:function(t){return t=t||0,this._pointerData[t].isUp},pointerTimeDown:function(t){return t=t||0,this._pointerData[t].timeDown},pointerTimeUp:function(t){return t=t||0,this._pointerData[t].timeUp},pointerOver:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOver;for(var e=0;10>e;e++)if(this._pointerData[e].isOver)return!0}return!1},pointerOut:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOut;for(var e=0;10>e;e++)if(this._pointerData[e].isOut)return!0}return!1},pointerTimeOver:function(t){return t=t||0,this._pointerData[t].timeOver},pointerTimeOut:function(t){return t=t||0,this._pointerData[t].timeOut},pointerDragged:function(t){return t=t||0,this._pointerData[t].isDragged},checkPointerDown:function(t){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,t,this._tempPoint)?this.pixelPerfectClick?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0:!1},checkPointerOver:function(t){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,t,this._tempPoint)?this.pixelPerfectOver?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0:!1},checkPixel:function(t,e,i){if(this.sprite.texture.baseTexture.source){if(this.game.input.hitContext.clearRect(0,0,1,1),null===t&&null===e){this.game.input.getLocalPosition(this.sprite,i,this._tempPoint);var t=this._tempPoint.x,e=this._tempPoint.y}0!==this.sprite.anchor.x&&(t-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(e-=-this.sprite.texture.frame.height*this.sprite.anchor.y),t+=this.sprite.texture.frame.x,e+=this.sprite.texture.frame.y,this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,t,e,1,1,0,0,1,1);var n=this.game.input.hitContext.getImageData(0,0,1,1);if(n.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(t){return null!==this.sprite&&void 0!==this.sprite.parent?this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID==t.id?this.updateDrag(t):this._pointerData[t.id].isOver===!0?this.checkPointerOver(t)?(this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,!0):(this._pointerOutHandler(t),!1):void 0:(this._pointerOutHandler(t),!1):void 0},_pointerOverHandler:function(t){null!==this.sprite&&this._pointerData[t.id].isOver===!1&&(this._pointerData[t.id].isOver=!0,this._pointerData[t.id].isOut=!1,this._pointerData[t.id].timeOver=this.game.time.now,this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),this.sprite&&this.sprite.events&&this.sprite.events.onInputOver.dispatch(this.sprite,t))},_pointerOutHandler:function(t){null!==this.sprite&&(this._pointerData[t.id].isOver=!1,this._pointerData[t.id].isOut=!0,this._pointerData[t.id].timeOut=this.game.time.now,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.sprite&&this.sprite.events&&this.sprite.events.onInputOut.dispatch(this.sprite,t))},_touchedHandler:function(t){if(null!==this.sprite){if(this._pointerData[t.id].isDown===!1&&this._pointerData[t.id].isOver===!0){if(this.pixelPerfectClick&&!this.checkPixel(null,null,t))return;this._pointerData[t.id].isDown=!0,this._pointerData[t.id].isUp=!1,this._pointerData[t.id].timeDown=this.game.time.now,this.sprite&&this.sprite.events&&this.sprite.events.onInputDown.dispatch(this.sprite,t),this.draggable&&this.isDragged===!1&&this.startDrag(t),this.bringToTop&&this.sprite.bringToTop()}return this.consumePointerEvent}},_releasedHandler:function(t){null!==this.sprite&&this._pointerData[t.id].isDown&&t.isUp&&(this._pointerData[t.id].isDown=!1,this._pointerData[t.id].isUp=!0,this._pointerData[t.id].timeUp=this.game.time.now,this._pointerData[t.id].downDuration=this._pointerData[t.id].timeUp-this._pointerData[t.id].timeDown,this.checkPointerOver(t)?this.sprite&&this.sprite.events&&this.sprite.events.onInputUp.dispatch(this.sprite,t,!0):(this.sprite&&this.sprite.events&&this.sprite.events.onInputUp.dispatch(this.sprite,t,!1),this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1)),this.draggable&&this.isDragged&&this._draggedPointerID===t.id&&this.stopDrag(t))
},updateDrag:function(t){return t.isUp?(this.stopDrag(t),!1):(this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=t.x+this._dragPoint.x+this.dragOffset.x),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=t.y+this._dragPoint.y+this.dragOffset.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)):(this.allowHorizontalDrag&&(this.sprite.x=t.x+this._dragPoint.x+this.dragOffset.x),this.allowVerticalDrag&&(this.sprite.y=t.y+this._dragPoint.y+this.dragOffset.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),!0)},justOver:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOver&&this.overDuration(t)<e},justOut:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOut&&this.game.time.now-this._pointerData[t].timeOut<e},justPressed:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isDown&&this.downDuration(t)<e},justReleased:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isUp&&this.game.time.now-this._pointerData[t].timeUp<e},overDuration:function(t){return t=t||0,this._pointerData[t].isOver?this.game.time.now-this._pointerData[t].timeOver:-1},downDuration:function(t){return t=t||0,this._pointerData[t].isDown?this.game.time.now-this._pointerData[t].timeDown:-1},enableDrag:function(t,e,n,r,o,s){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=255),"undefined"==typeof o&&(o=null),"undefined"==typeof s&&(s=null),this._dragPoint=new i.Point,this.draggable=!0,this.bringToTop=e,this.dragOffset=new i.Point,this.dragFromCenter=t,this.pixelPerfect=n,this.pixelPerfectAlpha=r,o&&(this.boundsRect=o),s&&(this.boundsSprite=s)},disableDrag:function(){if(this._pointerData)for(var t=0;10>t;t++)this._pointerData[t].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(t){if(this.isDragged=!0,this._draggedPointerID=t.id,this._pointerData[t.id].isDragged=!0,this.sprite.fixedToCamera)this.dragFromCenter?(this.sprite.centerOn(t.x,t.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y);else if(this.dragFromCenter){var e=this.sprite.getBounds();this.sprite.x=t.x+(this.sprite.x-e.centerX),this.sprite.y=t.y+(this.sprite.y-e.centerY),this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y)}else this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y);this.updateDrag(t),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.sprite.events.onDragStart.dispatch(this.sprite,t)},stopDrag:function(t){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[t.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop.dispatch(this.sprite,t),this.checkPointerOver(t)===!1&&this._pointerOutHandler(t)},setDragLock:function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0),this.allowHorizontalDrag=t,this.allowVerticalDrag=e},enableSnap:function(t,e,i,n,r,o){"undefined"==typeof i&&(i=!0),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),this.snapX=t,this.snapY=e,this.snapOffsetX=r,this.snapOffsetY=o,this.snapOnDrag=i,this.snapOnRelease=n},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.x<this.boundsRect.left?this.sprite.x=this.boundsRect.x:this.sprite.x+this.sprite.width>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-this.sprite.width),this.sprite.y<this.boundsRect.top?this.sprite.y=this.boundsRect.top:this.sprite.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-this.sprite.height))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.camerOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.camerOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.camerOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.camerOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.camerOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.camerOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.camerOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.camerOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.x<this.boundsSprite.x?this.sprite.x=this.boundsSprite.x:this.sprite.x+this.sprite.width>this.boundsSprite.x+this.boundsSprite.width&&(this.sprite.x=this.boundsSprite.x+this.boundsSprite.width-this.sprite.width),this.sprite.y<this.boundsSprite.y?this.sprite.y=this.boundsSprite.y:this.sprite.y+this.sprite.height>this.boundsSprite.y+this.boundsSprite.height&&(this.sprite.y=this.boundsSprite.y+this.boundsSprite.height-this.sprite.height))}},i.InputHandler.prototype.constructor=i.InputHandler,i.Events=function(t){this.parent=t,this.onAddedToGroup=new i.Signal,this.onRemovedFromGroup=new i.Signal,this.onKilled=new i.Signal,this.onRevived=new i.Signal,this.onOutOfBounds=new i.Signal,this.onEnterBounds=new i.Signal,this.onInputOver=null,this.onInputOut=null,this.onInputDown=null,this.onInputUp=null,this.onDragStart=null,this.onDragStop=null,this.onAnimationStart=null,this.onAnimationComplete=null,this.onAnimationLoop=null},i.Events.prototype={destroy:function(){this.parent=null,this.onAddedToGroup.dispose(),this.onRemovedFromGroup.dispose(),this.onKilled.dispose(),this.onRevived.dispose(),this.onOutOfBounds.dispose(),this.onInputOver&&(this.onInputOver.dispose(),this.onInputOut.dispose(),this.onInputDown.dispose(),this.onInputUp.dispose(),this.onDragStart.dispose(),this.onDragStop.dispose()),this.onAnimationStart&&(this.onAnimationStart.dispose(),this.onAnimationComplete.dispose(),this.onAnimationLoop.dispose())}},i.Events.prototype.constructor=i.Events,i.GameObjectFactory=function(t){this.game=t,this.world=this.game.world},i.GameObjectFactory.prototype={existing:function(t){return this.world.add(t)},image:function(t,e,n,r,o){return"undefined"==typeof o&&(o=this.world),o.add(new i.Image(this.game,t,e,n,r))},sprite:function(t,e,i,n,r){return"undefined"==typeof r&&(r=this.world),r.create(t,e,i,n)},tween:function(t){return this.game.tweens.create(t)},group:function(t,e,n,r,o){return new i.Group(this.game,t,e,n,r,o)},physicsGroup:function(t,e,n,r){return new i.Group(this.game,e,n,r,!0,t)},spriteBatch:function(t,e,n){return"undefined"==typeof e&&(e="group"),"undefined"==typeof n&&(n=!1),new i.SpriteBatch(this.game,t,e,n)},audio:function(t,e,i,n){return this.game.sound.add(t,e,i,n)},sound:function(t,e,i,n){return this.game.sound.add(t,e,i,n)},tileSprite:function(t,e,n,r,o,s,a){return"undefined"==typeof a&&(a=this.world),a.add(new i.TileSprite(this.game,t,e,n,r,o,s))},text:function(t,e,n,r,o){return"undefined"==typeof o&&(o=this.world),o.add(new i.Text(this.game,t,e,n,r))},button:function(t,e,n,r,o,s,a,l,u,h){return"undefined"==typeof h&&(h=this.world),h.add(new i.Button(this.game,t,e,n,r,o,s,a,l,u))},graphics:function(t,e,n){return"undefined"==typeof n&&(n=this.world),n.add(new i.Graphics(this.game,t,e))},emitter:function(t,e,n){return this.game.particles.add(new i.Particles.Arcade.Emitter(this.game,t,e,n))},retroFont:function(t,e,n,r,o,s,a,l,u){return new i.RetroFont(this.game,t,e,n,r,o,s,a,l,u)},bitmapText:function(t,e,n,r,o,s){return"undefined"==typeof s&&(s=this.world),s.add(new i.BitmapText(this.game,t,e,n,r,o))},tilemap:function(t,e,n,r,o){return new i.Tilemap(this.game,t,e,n,r,o)},renderTexture:function(t,e,n,r){("undefined"==typeof n||""===n)&&(n=this.game.rnd.uuid()),"undefined"==typeof r&&(r=!1);var o=new i.RenderTexture(this.game,t,e,n);return r&&this.game.cache.addRenderTexture(n,o),o},bitmapData:function(t,e,n,r){"undefined"==typeof r&&(r=!1),("undefined"==typeof n||""===n)&&(n=this.game.rnd.uuid());var o=new i.BitmapData(this.game,n,t,e);return r&&this.game.cache.addBitmapData(n,o),o},filter:function(t){var e=Array.prototype.splice.call(arguments,1),t=new i.Filter[t](this.game);return t.init.apply(t,e),t}},i.GameObjectFactory.prototype.constructor=i.GameObjectFactory,i.GameObjectCreator=function(t){this.game=t,this.world=this.game.world},i.GameObjectCreator.prototype={image:function(t,e,n,r){return new i.Image(this.game,t,e,n,r)},sprite:function(t,e,n,r){return new i.Sprite(this.game,t,e,n,r)},tween:function(t){return new i.Tween(t,this.game)},group:function(t,e,n,r,o){return new i.Group(this.game,null,e,n,r,o)},spriteBatch:function(t,e,n){return"undefined"==typeof e&&(e="group"),"undefined"==typeof n&&(n=!1),new i.SpriteBatch(this.game,t,e,n)},audio:function(t,e,i,n){return this.game.sound.add(t,e,i,n)},sound:function(t,e,i,n){return this.game.sound.add(t,e,i,n)},tileSprite:function(t,e,n,r,o,s){return new i.TileSprite(this.game,t,e,n,r,o,s)},text:function(t,e,n,r){return new i.Text(this.game,t,e,n,r)},button:function(t,e,n,r,o,s,a,l,u){return new i.Button(this.game,t,e,n,r,o,s,a,l,u)},graphics:function(t,e){return new i.Graphics(this.game,t,e)},emitter:function(t,e,n){return new i.Particles.Arcade.Emitter(this.game,t,e,n)},retroFont:function(t,e,n,r,o,s,a,l,u){return new i.RetroFont(this.game,t,e,n,r,o,s,a,l,u)},bitmapText:function(t,e,n,r,o){return new i.BitmapText(this.game,t,e,n,r,o)},tilemap:function(t,e,n,r,o){return new i.Tilemap(this.game,t,e,n,r,o)},renderTexture:function(t,e,n,r){("undefined"==typeof n||""===n)&&(n=this.game.rnd.uuid()),"undefined"==typeof r&&(r=!1);var o=new i.RenderTexture(this.game,t,e,n);return r&&this.game.cache.addRenderTexture(n,o),o},bitmapData:function(t,e,n,r){"undefined"==typeof r&&(r=!1),("undefined"==typeof n||""===n)&&(n=this.game.rnd.uuid());var o=new i.BitmapData(this.game,n,t,e);return r&&this.game.cache.addBitmapData(n,o),o},filter:function(t){var e=Array.prototype.splice.call(arguments,1),t=new i.Filter[t](this.game);return t.init.apply(t,e),t}},i.GameObjectCreator.prototype.constructor=i.GameObjectCreator,i.BitmapData=function(t,e,n,r){"undefined"==typeof n&&(n=100),"undefined"==typeof r&&(r=100),this.game=t,this.key=e,this.width=n,this.height=r,this.canvas=i.Canvas.create(n,r,"",!0),this.context=this.canvas.getContext("2d"),this.ctx=this.context,this.imageData=this.context.getImageData(0,0,n,r),this.data=this.imageData.data,this.pixels=null,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new i.Frame(0,0,0,n,r,"bitmapData",t.rnd.uuid()),this.type=i.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this.update=this.refreshBuffer,this._tempR=0,this._tempG=0,this._tempB=0},i.BitmapData.prototype={add:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)t[e].loadTexture&&t[e].loadTexture(this);else t.loadTexture(this)},clear:function(){this.context.clearRect(0,0,this.width,this.height),this.dirty=!0},fill:function(t,e,i,n){"undefined"==typeof n&&(n=1),this.context.fillStyle="rgba("+t+","+e+","+i+","+n+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0},resize:function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.textureFrame.width=t,this.textureFrame.height=e,this.refreshBuffer()),this.dirty=!0},refreshBuffer:function(t,e,i,n){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=this.width),"undefined"==typeof n&&(n=this.height),this.imageData=this.context.getImageData(t,e,i,n),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data},processPixelRGB:function(t,e,n,r,o,s){"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=this.width),"undefined"==typeof s&&(s=this.height);for(var a=n+o,l=r+s,u=i.Color.createColor(),h={r:0,g:0,b:0,a:0},c=!1,d=r;l>d;d++)for(var p=n;a>p;p++)i.Color.unpackPixel(this.getPixel32(p,d),u),h=t.call(e,u,p,d),h!==!1&&null!==h&&void 0!==h&&(this.setPixel32(p,d,h.r,h.g,h.b,h.a,!1),c=!0);c&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)},processPixel:function(t,e,i,n,r,o){"undefined"==typeof i&&(i=0),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=this.width),"undefined"==typeof o&&(o=this.height);for(var s=i+r,a=n+o,l=0,u=0,h=!1,c=n;a>c;c++)for(var d=i;s>d;d++)l=this.getPixel32(d,c),u=t.call(e,l,d,c),u!==l&&(this.pixels[c*this.width+d]=u,h=!0);h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)},replaceRGB:function(t,e,n,r,o,s,a,l,u){var h=0,c=0,d=this.width,p=this.height,f=i.Color.packPixel(t,e,n,r);void 0!==u&&u instanceof i.Rectangle&&(h=u.x,c=u.y,d=u.width,p=u.height);for(var m=0;p>m;m++)for(var g=0;d>g;g++)this.getPixel32(h+g,c+m)===f&&this.setPixel32(h+g,c+m,o,s,a,l,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0},setHSL:function(t,e,n,r){if(("undefined"==typeof t||null===t)&&(t=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof n||null===n)&&(n=!1),t||e||n){"undefined"==typeof r&&(r=new i.Rectangle(0,0,this.width,this.height));for(var o=i.Color.createColor(),s=r.y;s<r.bottom;s++)for(var a=r.x;a<r.right;a++)i.Color.unpackPixel(this.getPixel32(a,s),o,!0),t&&(o.h=t),e&&(o.s=e),n&&(o.l=n),i.Color.HSLtoRGB(o.h,o.s,o.l,o),this.setPixel32(a,s,o.r,o.g,o.b,o.a,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0}},shiftHSL:function(t,e,n,r){if(("undefined"==typeof t||null===t)&&(t=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof n||null===n)&&(n=!1),t||e||n){"undefined"==typeof r&&(r=new i.Rectangle(0,0,this.width,this.height));for(var o=i.Color.createColor(),s=r.y;s<r.bottom;s++)for(var a=r.x;a<r.right;a++)i.Color.unpackPixel(this.getPixel32(a,s),o,!0),t&&(o.h=this.game.math.wrap(o.h+t,0,1)),e&&(o.s=this.game.math.limitValue(o.s+e,0,1)),n&&(o.l=this.game.math.limitValue(o.l+n,0,1)),i.Color.HSLtoRGB(o.h,o.s,o.l,o),this.setPixel32(a,s,o.r,o.g,o.b,o.a,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0}},setPixel32:function(t,e,n,r,o,s,a){"undefined"==typeof a&&(a=!0),t>=0&&t<=this.width&&e>=0&&e<=this.height&&(this.pixels[e*this.width+t]=i.Device.LITTLE_ENDIAN?s<<24|o<<16|r<<8|n:n<<24|r<<16|o<<8|s,a&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0))},setPixel:function(t,e,i,n,r,o){this.setPixel32(t,e,i,n,r,255,o)},getPixel:function(t,e,n){n||(n=i.Color.createColor());var r=~~(t+e*this.width);return r*=4,this.data[r]&&(n.r=this.data[r],n.g=this.data[++r],n.b=this.data[++r],n.a=this.data[++r]),n},getPixel32:function(t,e){return t>=0&&t<=this.width&&e>=0&&e<=this.height?this.pixels[e*this.width+t]:void 0},getPixelRGB:function(t,e,n,r,o){return i.Color.unpackPixel(this.getPixel32(t,e),n,r,o)},getPixels:function(t){return this.context.getImageData(t.x,t.y,t.width,t.height)},copyPixels:function(t,e,i,n){"string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,e.x,e.y,e.width,e.height,i,n,e.width,e.height),this.dirty=!0},draw:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),"string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,0,0,t.width,t.height,e,i,t.width,t.height),this.dirty=!0},drawSprite:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0);var n=t.texture.frame;this.context.drawImage(t.texture.baseTexture.source,n.x,n.y,n.width,n.height,e,i,n.width,n.height),this.dirty=!0},alphaMask:function(t,e){var i=this.context.globalCompositeOperation;"string"==typeof e&&(e=this.game.cache.getImage(e)),e&&this.context.drawImage(e,0,0),this.context.globalCompositeOperation="source-atop","string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,0,0),this.context.globalCompositeOperation=i,this.dirty=!0},extract:function(t,e,i,n,r){return"undefined"==typeof r&&(r=255),this.processPixelRGB(function(o,s,a){return o.r===e&&o.g===i&&o.b===n&&t.setPixel32(s,a,e,i,n,r,!1),!1},this),t.context.putImageData(t.imageData,0,0),t.dirty=!0,t},rect:function(t,e,i,n,r){"undefined"!=typeof r&&(this.context.fillStyle=r),this.context.fillRect(t,e,i,n),this.context.fill()},circle:function(t,e,i,n){"undefined"!=typeof n&&(this.context.fillStyle=n),this.context.beginPath(),this.context.arc(t,e,i,0,2*Math.PI,!1),this.context.closePath(),this.context.fill()},render:function(){!this.disableTextureUpload&&this.game.renderType===i.WEBGL&&this.dirty&&(PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl),this.dirty=!1)}},i.BitmapData.prototype.constructor=i.BitmapData,i.Sprite=function(t,e,n,r,o){e=e||0,n=n||0,r=r||null,o=o||null,this.game=t,this.name="",this.type=i.SPRITE,this.z=0,this.events=new i.Events(this),this.animations=new i.AnimationManager(this),this.key=r,this._frame=0,this._frameName="",PIXI.Sprite.call(this,PIXI.TextureCache.__default),this.loadTexture(r,o),this.position.set(e,n),this.world=new i.Point(e,n),this.autoCull=!1,this.input=null,this.body=null,this.health=1,this.lifespan=0,this.checkWorldBounds=!1,this.outOfBoundsKill=!1,this.debug=!1,this.cameraOffset=new i.Point,this._cache=[0,0,0,0,1,0,1,0,0],this._bounds=new i.Rectangle},i.Sprite.prototype=Object.create(PIXI.Sprite.prototype),i.Sprite.prototype.constructor=i.Sprite,i.Sprite.prototype.preUpdate=function(){if(1===this._cache[4]&&this.exists)return this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.body&&this.body.preUpdate(),this._cache[4]=0,!1;if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;if(this.lifespan>0&&(this.lifespan-=this.game.time.elapsed,this.lifespan<=0))return this.kill(),!1;if((this.autoCull||this.checkWorldBounds)&&this._bounds.copyFrom(this.getBounds()),this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this._bounds)),this.checkWorldBounds)if(1===this._cache[5]&&this.game.world.bounds.intersects(this._bounds))this._cache[5]=0,this.events.onEnterBounds.dispatch(this);else if(0===this._cache[5]&&!this.game.world.bounds.intersects(this._bounds)&&(this._cache[5]=1,this.events.onOutOfBounds.dispatch(this),this.outOfBoundsKill))return this.kill(),!1;this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),this.animations.update(),this.body&&this.body.preUpdate();for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},i.Sprite.prototype.update=function(){},i.Sprite.prototype.postUpdate=function(){this.key instanceof i.BitmapData&&this.key.render(),this.exists&&this.body&&this.body.postUpdate(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},i.Sprite.prototype.loadTexture=function(t,e){return e=e||0,t instanceof i.RenderTexture?(this.key=t.key,void this.setTexture(t)):t instanceof i.BitmapData?(this.key=t,void this.setTexture(t.texture)):t instanceof PIXI.Texture?(this.key=t,void this.setTexture(t)):null===t||"undefined"==typeof t?(this.key="__default",void this.setTexture(PIXI.TextureCache[this.key])):"string"!=typeof t||this.game.cache.checkImageKey(t)?this.game.cache.isSpriteSheet(t)?(this.key=t,this.animations.loadFrameData(this.game.cache.getFrameData(t)),"string"==typeof e?this.frameName=e:this.frame=e,void 0):(this.key=t,void this.setTexture(PIXI.TextureCache[t])):(this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]))},i.Sprite.prototype.crop=function(t){if("undefined"==typeof t||null===t)this.texture.hasOwnProperty("sourceWidth")&&this.texture.setFrame(new i.Rectangle(0,0,this.texture.sourceWidth,this.texture.sourceHeight));else if(this.texture instanceof PIXI.Texture){var e={};i.Utils.extend(!0,e,this.texture),e.sourceWidth=e.width,e.sourceHeight=e.height,e.frame=t,e.width=t.width,e.height=t.height,this.texture=e,this.texture.updateFrame=!0,PIXI.Texture.frameUpdates.push(this.texture)}else this.texture.setFrame(t)},i.Sprite.prototype.revive=function(t){return"undefined"==typeof t&&(t=1),this.alive=!0,this.exists=!0,this.visible=!0,this.health=t,this.events&&this.events.onRevived.dispatch(this),this},i.Sprite.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled.dispatch(this),this},i.Sprite.prototype.destroy=function(t){if(null!==this.game&&1!==this._cache[8]){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},i.Sprite.prototype.damage=function(t){return this.alive&&(this.health-=t,this.health<=0&&this.kill()),this},i.Sprite.prototype.reset=function(t,e,i){return"undefined"==typeof i&&(i=1),this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.health=i,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this},i.Sprite.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},i.Sprite.prototype.play=function(t,e,i,n){return this.animations?this.animations.play(t,e,i,n):void 0},i.Sprite.prototype.overlap=function(t){return i.Rectangle.intersects(this.getBounds(),t.getBounds())},Object.defineProperty(i.Sprite.prototype,"angle",{get:function(){return i.Math.wrapAngle(i.Math.radToDeg(this.rotation))},set:function(t){this.rotation=i.Math.degToRad(i.Math.wrapAngle(t))}}),Object.defineProperty(i.Sprite.prototype,"deltaX",{get:function(){return this.world.x-this._cache[0]}}),Object.defineProperty(i.Sprite.prototype,"deltaY",{get:function(){return this.world.y-this._cache[1]}}),Object.defineProperty(i.Sprite.prototype,"deltaZ",{get:function(){return this.rotation-this._cache[2]}}),Object.defineProperty(i.Sprite.prototype,"inWorld",{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}),Object.defineProperty(i.Sprite.prototype,"inCamera",{get:function(){return this.game.world.camera.screenView.intersects(this.getBounds())}}),Object.defineProperty(i.Sprite.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){this.animations.frame=t}}),Object.defineProperty(i.Sprite.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){this.animations.frameName=t}}),Object.defineProperty(i.Sprite.prototype,"renderOrderID",{get:function(){return this._cache[3]}}),Object.defineProperty(i.Sprite.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new i.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(i.Sprite.prototype,"exists",{get:function(){return!!this._cache[6]},set:function(t){t?(this._cache[6]=1,this.body&&this.body.type===i.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._cache[6]=0,this.body&&this.body.type===i.Physics.P2JS&&this.body.removeFromWorld(),this.visible=!1)}}),Object.defineProperty(i.Sprite.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.Sprite.prototype,"smoothed",{get:function(){return!this.texture.baseTexture.scaleMode},set:function(t){t?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}),Object.defineProperty(i.Sprite.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t,this.body&&this.body.type===i.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(i.Sprite.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t,this.body&&this.body.type===i.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(i.Sprite.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.Image=function(t,e,n,r,o){e=e||0,n=n||0,r=r||null,o=o||null,this.game=t,this.exists=!0,this.name="",this.type=i.IMAGE,this.z=0,this.events=new i.Events(this),this.key=r,this._frame=0,this._frameName="",PIXI.Sprite.call(this,PIXI.TextureCache.__default),this.loadTexture(r,o),this.position.set(e,n),this.world=new i.Point(e,n),this.autoCull=!1,this.input=null,this.cameraOffset=new i.Point,this._cache=[0,0,0,0,1,0,1,0,0]},i.Image.prototype=Object.create(PIXI.Sprite.prototype),i.Image.prototype.constructor=i.Image,i.Image.prototype.preUpdate=function(){if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++);for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},i.Image.prototype.update=function(){},i.Image.prototype.postUpdate=function(){this.key instanceof i.BitmapData&&this.key.render(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},i.Image.prototype.loadTexture=function(t,e){if(e=e||0,t instanceof i.RenderTexture)return this.key=t.key,void this.setTexture(t);if(t instanceof i.BitmapData)return this.key=t,void this.setTexture(t.texture);if(t instanceof PIXI.Texture)return this.key=t,void this.setTexture(t);if(null===t||"undefined"==typeof t)return this.key="__default",void this.setTexture(PIXI.TextureCache[this.key]);if("string"==typeof t&&!this.game.cache.checkImageKey(t))return this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]);if(this.game.cache.isSpriteSheet(t)){this.key=t;var n=this.game.cache.getFrameData(t);return"string"==typeof e?(this._frame=0,this._frameName=e,void this.setTexture(PIXI.TextureCache[n.getFrameByName(e).uuid])):(this._frame=e,this._frameName="",void this.setTexture(PIXI.TextureCache[n.getFrame(e).uuid]))}return this.key=t,void this.setTexture(PIXI.TextureCache[t])},i.Image.prototype.crop=function(t){if("undefined"==typeof t||null===t)this.texture.hasOwnProperty("sourceWidth")&&this.texture.setFrame(new i.Rectangle(0,0,this.texture.sourceWidth,this.texture.sourceHeight));else if(this.texture instanceof PIXI.Texture){var e={};i.Utils.extend(!0,e,this.texture),e.sourceWidth=e.width,e.sourceHeight=e.height,e.frame=t,e.width=t.width,e.height=t.height,this.texture=e,this.texture.updateFrame=!0,PIXI.Texture.frameUpdates.push(this.texture)}else this.texture.setFrame(t)},i.Image.prototype.revive=function(){return this.alive=!0,this.exists=!0,this.visible=!0,this.events&&this.events.onRevived.dispatch(this),this},i.Image.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled.dispatch(this),this},i.Image.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this)),this.events&&this.events.destroy(),this.input&&this.input.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},i.Image.prototype.reset=function(t,e){return this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this},i.Image.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},Object.defineProperty(i.Image.prototype,"angle",{get:function(){return i.Math.wrapAngle(i.Math.radToDeg(this.rotation))},set:function(t){this.rotation=i.Math.degToRad(i.Math.wrapAngle(t))}}),Object.defineProperty(i.Image.prototype,"deltaX",{get:function(){return this.world.x-this._cache[0]}}),Object.defineProperty(i.Image.prototype,"deltaY",{get:function(){return this.world.y-this._cache[1]}}),Object.defineProperty(i.Image.prototype,"deltaZ",{get:function(){return this.rotation-this._cache[2]}}),Object.defineProperty(i.Image.prototype,"inWorld",{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}),Object.defineProperty(i.Image.prototype,"inCamera",{get:function(){return this.game.world.camera.screenView.intersects(this.getBounds())}}),Object.defineProperty(i.Image.prototype,"frame",{get:function(){return this._frame},set:function(t){if(t!==this.frame&&this.game.cache.isSpriteSheet(this.key)){var e=this.game.cache.getFrameData(this.key);e&&t<e.total&&e.getFrame(t)&&(this.setTexture(PIXI.TextureCache[e.getFrame(t).uuid]),this._frame=t)}}}),Object.defineProperty(i.Image.prototype,"frameName",{get:function(){return this._frameName},set:function(t){if(t!==this.frameName&&this.game.cache.isSpriteSheet(this.key)){var e=this.game.cache.getFrameData(this.key);
e&&e.getFrameByName(t)&&(this.setTexture(PIXI.TextureCache[e.getFrameByName(t).uuid]),this._frameName=t)}}}),Object.defineProperty(i.Image.prototype,"renderOrderID",{get:function(){return this._cache[3]}}),Object.defineProperty(i.Image.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new i.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(i.Image.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.Image.prototype,"smoothed",{get:function(){return!this.texture.baseTexture.scaleMode},set:function(t){t?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}),Object.defineProperty(i.Image.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.TileSprite=function(t,e,n,r,o,s,a){e=e||0,n=n||0,r=r||256,o=o||256,s=s||null,a=a||null,this.game=t,this.name="",this.type=i.TILESPRITE,this.z=0,this.events=new i.Events(this),this.animations=new i.AnimationManager(this),this.key=s,this._frame=0,this._frameName="",this._scroll=new i.Point,PIXI.TilingSprite.call(this,PIXI.TextureCache.__default,r,o),this.loadTexture(s,a),this.position.set(e,n),this.input=null,this.world=new i.Point(e,n),this.autoCull=!1,this.checkWorldBounds=!1,this.cameraOffset=new i.Point,this.body=null,this._cache=[0,0,0,0,1,0,1,0,0]},i.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype),i.TileSprite.prototype.constructor=i.TileSprite,i.TileSprite.prototype.preUpdate=function(){if(1===this._cache[4]&&this.exists)return this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.body&&this.body.preUpdate(),this._cache[4]=0,!1;if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;(this.autoCull||this.checkWorldBounds)&&this._bounds.copyFrom(this.getBounds()),this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this._bounds)),this.checkWorldBounds&&(1===this._cache[5]&&this.game.world.bounds.intersects(this._bounds)?(this._cache[5]=0,this.events.onEnterBounds.dispatch(this)):0!==this._cache[5]||this.game.world.bounds.intersects(this._bounds)||(this._cache[5]=1,this.events.onOutOfBounds.dispatch(this))),this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),this.animations.update(),0!==this._scroll.x&&(this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed),0!==this._scroll.y&&(this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed),this.body&&this.body.preUpdate();for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},i.TileSprite.prototype.update=function(){},i.TileSprite.prototype.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate(),1===this._cache[7]&&(this.position.x=this.game.camera.view.x+this.cameraOffset.x,this.position.y=this.game.camera.view.y+this.cameraOffset.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},i.TileSprite.prototype.autoScroll=function(t,e){this._scroll.set(t,e)},i.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)},i.TileSprite.prototype.loadTexture=function(t,e){return e=e||0,t instanceof i.RenderTexture?(this.key=t.key,void this.setTexture(t)):t instanceof i.BitmapData?(this.key=t,void this.setTexture(t.texture)):t instanceof PIXI.Texture?(this.key=t,void this.setTexture(t)):null===t||"undefined"==typeof t?(this.key="__default",void this.setTexture(PIXI.TextureCache[this.key])):"string"!=typeof t||this.game.cache.checkImageKey(t)?this.game.cache.isSpriteSheet(t)?(this.key=t,this.animations.loadFrameData(this.game.cache.getFrameData(t)),"string"==typeof e?this.frameName=e:this.frame=e,void 0):(this.key=t,void this.setTexture(PIXI.TextureCache[t])):(this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]))},i.TileSprite.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.filters&&(this.filters=null),this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this)),this.animations.destroy(),this.events.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},i.TileSprite.prototype.play=function(t,e,i,n){return this.animations.play(t,e,i,n)},i.TileSprite.prototype.reset=function(t,e){return this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.tilePosition.x=0,this.tilePosition.y=0,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this},Object.defineProperty(i.TileSprite.prototype,"angle",{get:function(){return i.Math.wrapAngle(i.Math.radToDeg(this.rotation))},set:function(t){this.rotation=i.Math.degToRad(i.Math.wrapAngle(t))}}),Object.defineProperty(i.TileSprite.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){t!==this.animations.frame&&(this.animations.frame=t)}}),Object.defineProperty(i.TileSprite.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){t!==this.animations.frameName&&(this.animations.frameName=t)}}),Object.defineProperty(i.TileSprite.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.TileSprite.prototype,"exists",{get:function(){return!!this._cache[6]},set:function(t){t?(this._cache[6]=1,this.body&&this.body.type===i.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._cache[6]=0,this.body&&this.body.type===i.Physics.P2JS&&(this.body.safeRemove=!0),this.visible=!1)}}),Object.defineProperty(i.TileSprite.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new i.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(i.TileSprite.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t,this.body&&this.body.type===i.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(i.TileSprite.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t,this.body&&this.body.type===i.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(i.TileSprite.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.Text=function(t,e,n,r,o){e=e||0,n=n||0,r=r||" ",o=o||{},r=0===r.length?" ":r.toString(),this.game=t,this.exists=!0,this.name="",this.type=i.TEXT,this.z=0,this.world=new i.Point(e,n),this._text=r,this._font="",this._fontSize=32,this._fontWeight="normal",this._lineSpacing=0,this.events=new i.Events(this),this.input=null,this.cameraOffset=new i.Point,this.setStyle(o),PIXI.Text.call(this,r,this.style),this.position.set(e,n),this._cache=[0,0,0,0,1,0,1,0,0]},i.Text.prototype=Object.create(PIXI.Text.prototype),i.Text.prototype.constructor=i.Text,i.Text.prototype.preUpdate=function(){if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++);for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},i.Text.prototype.update=function(){},i.Text.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},i.Text.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this)),this.texture.destroy(),this.canvas.parentNode?this.canvas.parentNode.removeChild(this.canvas):(this.canvas=null,this.context=null);var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},i.Text.prototype.setShadow=function(t,e,i,n){this.style.shadowOffsetX=t||0,this.style.shadowOffsetY=e||0,this.style.shadowColor=i||"rgba(0,0,0,0)",this.style.shadowBlur=n||0,this.dirty=!0},i.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.shadowOffsetX=t.shadowOffsetX||0,t.shadowOffsetY=t.shadowOffsetY||0,t.shadowColor=t.shadowColor||"rgba(0,0,0,0)",t.shadowBlur=t.shadowBlur||0,this.style=t,this.dirty=!0},i.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.runWordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],n=0,r=0;r<e.length;r++){var o=this.context.measureText(e[r]).width;i[r]=o,n=Math.max(n,o)}this.canvas.width=n+this.style.strokeThickness;var s=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness+this._lineSpacing+this.style.shadowOffsetY;for(this.canvas.height=s*e.length,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=this.style.shadowBlur,this.context.textBaseline="top",this.context.lineCap="round",this.context.lineJoin="round",r=0;r<e.length;r++){var a=new PIXI.Point(this.style.strokeThickness/2,this.style.strokeThickness/2+r*s);"right"===this.style.align?a.x+=n-i[r]:"center"===this.style.align&&(a.x+=(n-i[r])/2),a.y+=this._lineSpacing,this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[r],a.x,a.y),this.style.fill&&this.context.fillText(e[r],a.x,a.y)}this.updateTexture()},i.Text.prototype.runWordWrap=function(t){for(var e="",i=t.split("\n"),n=0;n<i.length;n++){for(var r=this.style.wordWrapWidth,o=i[n].split(" "),s=0;s<o.length;s++){var a=this.context.measureText(o[s]).width,l=a+this.context.measureText(" ").width;l>r?(s>0&&(e+="\n"),e+=o[s]+" ",r=this.style.wordWrapWidth-a):(r-=l,e+=o[s]+" ")}n<i.length-1&&(e+="\n")}return e},Object.defineProperty(i.Text.prototype,"angle",{get:function(){return i.Math.radToDeg(this.rotation)},set:function(t){this.rotation=i.Math.degToRad(t)}}),Object.defineProperty(i.Text.prototype,"text",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t.toString()||" ",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(i.Text.prototype,"font",{get:function(){return this._font},set:function(t){t!==this._font&&(this._font=t.trim(),this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(i.Text.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t=parseInt(t,10),t!==this._fontSize&&(this._fontSize=t,this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(i.Text.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){t!==this._fontWeight&&(this._fontWeight=t,this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(i.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(t){t!==this.style.fill&&(this.style.fill=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"align",{get:function(){return this.style.align},set:function(t){t!==this.style.align&&(this.style.align=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(t){t!==this.style.stroke&&(this.style.stroke=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(t){t!==this.style.strokeThickness&&(this.style.strokeThickness=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(t){t!==this.style.wordWrap&&(this.style.wordWrap=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(t){t!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){t!==this._lineSpacing&&(this._lineSpacing=parseFloat(t),this.dirty=!0,this.updateTransform())}}),Object.defineProperty(i.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(t){t!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(t){t!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(t){t!==this.style.shadowColor&&(this.style.shadowColor=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(t){t!==this.style.shadowBlur&&(this.style.shadowBlur=t,this.dirty=!0)}}),Object.defineProperty(i.Text.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new i.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(i.Text.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.Text.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.BitmapText=function(t,e,n,r,o,s){e=e||0,n=n||0,r=r||"",o=o||"",s=s||32,this.game=t,this.exists=!0,this.name="",this.type=i.BITMAPTEXT,this.z=0,this.world=new i.Point(e,n),this._text=o,this._font=r,this._fontSize=s,this._align="left",this._tint=16777215,this.events=new i.Events(this),this.input=null,this.cameraOffset=new i.Point,PIXI.BitmapText.call(this,o),this.position.set(e,n),this._cache=[0,0,0,0,1,0,1,0,0]},i.BitmapText.prototype=Object.create(PIXI.BitmapText.prototype),i.BitmapText.prototype.constructor=i.BitmapText,i.BitmapText.prototype.setStyle=function(){this.style={align:this._align},this.fontName=this._font,this.fontSize=this._fontSize,this.dirty=!0},i.BitmapText.prototype.preUpdate=function(){return this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.exists&&this.parent.exists?(this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),!0):(this.renderOrderID=-1,!1)},i.BitmapText.prototype.update=function(){},i.BitmapText.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},i.BitmapText.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this));var e=this.children.length;if(t)for(;e--;)this.children[e].destroy?this.children[e].destroy(t):this.removeChild(this.children[e]);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},Object.defineProperty(i.BitmapText.prototype,"align",{get:function(){return this._align},set:function(t){t!==this._align&&(this._align=t,this.setStyle())}}),Object.defineProperty(i.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this.dirty=!0)}}),Object.defineProperty(i.BitmapText.prototype,"angle",{get:function(){return i.Math.radToDeg(this.rotation)},set:function(t){this.rotation=i.Math.degToRad(t)}}),Object.defineProperty(i.BitmapText.prototype,"font",{get:function(){return this._font},set:function(t){t!==this._font&&(this._font=t.trim(),this.style.font=this._fontSize+"px '"+this._font+"'",this.dirty=!0)}}),Object.defineProperty(i.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t=parseInt(t,10),t!==this._fontSize&&(this._fontSize=t,this.style.font=this._fontSize+"px '"+this._font+"'",this.dirty=!0)}}),Object.defineProperty(i.BitmapText.prototype,"text",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t.toString()||" ",this.dirty=!0)}}),Object.defineProperty(i.BitmapText.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new i.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(i.BitmapText.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.BitmapText.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.Button=function(t,e,n,r,o,s,a,l,u,h){e=e||0,n=n||0,r=r||null,o=o||null,s=s||this,i.Image.call(this,t,e,n,r,l),this.type=i.BUTTON,this._onOverFrameName=null,this._onOutFrameName=null,this._onDownFrameName=null,this._onUpFrameName=null,this._onOverFrameID=null,this._onOutFrameID=null,this._onDownFrameID=null,this._onUpFrameID=null,this.onOverMouseOnly=!1,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new i.Signal,this.onInputOut=new i.Signal,this.onInputDown=new i.Signal,this.onInputUp=new i.Signal,this.freezeFrames=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.setFrames(a,l,u,h),null!==o&&this.onInputUp.add(o,s),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this)},i.Button.prototype=Object.create(i.Image.prototype),i.Button.prototype.constructor=i.Button,i.Button.prototype.clearFrames=function(){this._onOverFrameName=null,this._onOverFrameID=null,this._onOutFrameName=null,this._onOutFrameID=null,this._onDownFrameName=null,this._onDownFrameID=null,this._onUpFrameName=null,this._onUpFrameID=null},i.Button.prototype.setFrames=function(t,e,i,n){this.clearFrames(),null!==t&&("string"==typeof t?(this._onOverFrameName=t,this.input.pointerOver()&&(this.frameName=t)):(this._onOverFrameID=t,this.input.pointerOver()&&(this.frame=t))),null!==e&&("string"==typeof e?(this._onOutFrameName=e,this.input.pointerOver()===!1&&(this.frameName=e)):(this._onOutFrameID=e,this.input.pointerOver()===!1&&(this.frame=e))),null!==i&&("string"==typeof i?(this._onDownFrameName=i,this.input.pointerDown()&&(this.frameName=i)):(this._onDownFrameID=i,this.input.pointerDown()&&(this.frame=i))),null!==n&&("string"==typeof n?(this._onUpFrameName=n,this.input.pointerUp()&&(this.frameName=n)):(this._onUpFrameID=n,this.input.pointerUp()&&(this.frame=n)))},i.Button.prototype.setSounds=function(t,e,i,n,r,o,s,a){this.setOverSound(t,e),this.setOutSound(r,o),this.setDownSound(i,n),this.setUpSound(s,a)},i.Button.prototype.setOverSound=function(t,e){this.onOverSound=null,this.onOverSoundMarker="",t instanceof i.Sound&&(this.onOverSound=t),"string"==typeof e&&(this.onOverSoundMarker=e)},i.Button.prototype.setOutSound=function(t,e){this.onOutSound=null,this.onOutSoundMarker="",t instanceof i.Sound&&(this.onOutSound=t),"string"==typeof e&&(this.onOutSoundMarker=e)},i.Button.prototype.setDownSound=function(t,e){this.onDownSound=null,this.onDownSoundMarker="",t instanceof i.Sound&&(this.onDownSound=t),"string"==typeof e&&(this.onDownSoundMarker=e)},i.Button.prototype.setUpSound=function(t,e){this.onUpSound=null,this.onUpSoundMarker="",t instanceof i.Sound&&(this.onUpSound=t),"string"==typeof e&&(this.onUpSoundMarker=e)},i.Button.prototype.onInputOverHandler=function(t,e){this.freezeFrames===!1&&this.setState(1),(!this.onOverMouseOnly||e.isMouse)&&(this.onOverSound&&this.onOverSound.play(this.onOverSoundMarker),this.onInputOver&&this.onInputOver.dispatch(this,e))},i.Button.prototype.onInputOutHandler=function(t,e){this.freezeFrames===!1&&this.setState(2),this.onOutSound&&this.onOutSound.play(this.onOutSoundMarker),this.onInputOut&&this.onInputOut.dispatch(this,e)},i.Button.prototype.onInputDownHandler=function(t,e){this.freezeFrames===!1&&this.setState(3),this.onDownSound&&this.onDownSound.play(this.onDownSoundMarker),this.onInputDown&&this.onInputDown.dispatch(this,e)},i.Button.prototype.onInputUpHandler=function(t,e,i){this.onUpSound&&this.onUpSound.play(this.onUpSoundMarker),this.onInputUp&&this.onInputUp.dispatch(this,e,i),this.freezeFrames||this.setState(this.forceOut?2:null!==this._onUpFrameName||null!==this._onUpFrameID?4:i?1:2)},i.Button.prototype.setState=function(t){1===t?null!=this._onOverFrameName?this.frameName=this._onOverFrameName:null!=this._onOverFrameID&&(this.frame=this._onOverFrameID):2===t?null!=this._onOutFrameName?this.frameName=this._onOutFrameName:null!=this._onOutFrameID&&(this.frame=this._onOutFrameID):3===t?null!=this._onDownFrameName?this.frameName=this._onDownFrameName:null!=this._onDownFrameID&&(this.frame=this._onDownFrameID):4===t&&(null!=this._onUpFrameName?this.frameName=this._onUpFrameName:null!=this._onUpFrameID&&(this.frame=this._onUpFrameID))},i.Graphics=function(t,e,n){e=e||0,n=n||0,this.game=t,this.exists=!0,this.name="",this.type=i.GRAPHICS,this.z=0,this.world=new i.Point(e,n),this.cameraOffset=new i.Point,PIXI.Graphics.call(this),this.position.set(e,n),this._cache=[0,0,0,0,1,0,1,0,0]},i.Graphics.prototype=Object.create(PIXI.Graphics.prototype),i.Graphics.prototype.constructor=i.Graphics,i.Graphics.prototype.preUpdate=function(){return this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.exists&&this.parent.exists?(this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),!0):(this.renderOrderID=-1,!1)},i.Graphics.prototype.update=function(){},i.Graphics.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},i.Graphics.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.clear(),this.parent&&(this.parent instanceof i.Group?this.parent.remove(this):this.parent.removeChild(this));var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.game=null,this._cache[8]=0}},i.Graphics.prototype.drawPolygon=function(t){this.moveTo(t.points[0].x,t.points[0].y);for(var e=1;e<t.points.length;e+=1)this.lineTo(t.points[e].x,t.points[e].y);this.lineTo(t.points[0].x,t.points[0].y)},i.Graphics.prototype.drawTriangle=function(t,e){"undefined"==typeof e&&(e=!1);var n=new i.Polygon(t);if(e){var r=new i.Point(this.game.camera.x-t[0].x,this.game.camera.y-t[0].y),o=new i.Point(t[1].x-t[0].x,t[1].y-t[0].y),s=new i.Point(t[1].x-t[2].x,t[1].y-t[2].y),a=s.cross(o);r.dot(a)>0&&this.drawPolygon(n)}else this.drawPolygon(n)},i.Graphics.prototype.drawTriangles=function(t,e,n){"undefined"==typeof n&&(n=!1);var r,o=new i.Point,s=new i.Point,a=new i.Point,l=[];if(e)if(t[0]instanceof i.Point)for(r=0;r<e.length/3;r++)l.push(t[e[3*r]]),l.push(t[e[3*r+1]]),l.push(t[e[3*r+2]]),3===l.length&&(this.drawTriangle(l,n),l=[]);else for(r=0;r<e.length;r++)o.x=t[2*e[r]],o.y=t[2*e[r]+1],l.push(o.copyTo({})),3===l.length&&(this.drawTriangle(l,n),l=[]);else if(t[0]instanceof i.Point)for(r=0;r<t.length/3;r++)this.drawTriangle([t[3*r],t[3*r+1],t[3*r+2]],n);else for(r=0;r<t.length/6;r++)o.x=t[6*r+0],o.y=t[6*r+1],s.x=t[6*r+2],s.y=t[6*r+3],a.x=t[6*r+4],a.y=t[6*r+5],this.drawTriangle([o,s,a],n)},Object.defineProperty(i.Graphics.prototype,"angle",{get:function(){return i.Math.radToDeg(this.rotation)},set:function(t){this.rotation=i.Math.degToRad(t)}}),Object.defineProperty(i.Graphics.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(i.Graphics.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),i.RenderTexture=function(t,e,n,r,o){"undefined"==typeof r&&(r=""),"undefined"==typeof o&&(o=i.scaleModes.DEFAULT),this.game=t,this.key=r,this.type=i.RENDERTEXTURE,this._temp=new i.Point,PIXI.RenderTexture.call(this,e,n,o)},i.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype),i.RenderTexture.prototype.constructor=i.RenderTexture,i.RenderTexture.prototype.renderXY=function(t,e,i,n){this._temp.set(e,i),this.render(t,this._temp,n)},i.SpriteBatch=function(t,e,n,r){PIXI.SpriteBatch.call(this),i.Group.call(this,t,e,n,r),this.type=i.SPRITEBATCH},i.SpriteBatch.prototype=i.Utils.extend(!0,i.SpriteBatch.prototype,i.Group.prototype,PIXI.SpriteBatch.prototype),i.SpriteBatch.prototype.constructor=i.SpriteBatch,i.RetroFont=function(t,e,n,r,o,s,a,l,u,h){this.characterWidth=n,this.characterHeight=r,this.characterSpacingX=a||0,this.characterSpacingY=l||0,this.characterPerRow=s,this.offsetX=u||0,this.offsetY=h||0,this.align="left",this.multiLine=!1,this.autoUpperCase=!0,this.customSpacingX=0,this.customSpacingY=0,this.fixedWidth=0,this.fontSet=t.cache.getImage(e),this._text="",this.grabData=[];for(var c=this.offsetX,d=this.offsetY,p=0,f=new i.FrameData,m=0;m<o.length;m++){var g=t.rnd.uuid(),_=f.addFrame(new i.Frame(m,c,d,this.characterWidth,this.characterHeight,"",g));this.grabData[o.charCodeAt(m)]=_.index,PIXI.TextureCache[g]=new PIXI.Texture(PIXI.BaseTextureCache[e],{x:c,y:d,width:this.characterWidth,height:this.characterHeight}),p++,p==this.characterPerRow?(p=0,c=this.offsetX,d+=this.characterHeight+this.characterSpacingY):c+=this.characterWidth+this.characterSpacingX}t.cache.updateFrameData(e,f),this.stamp=new i.Image(t,0,0,e,0),i.RenderTexture.call(this,t),this.type=i.RETROFONT},i.RetroFont.prototype=Object.create(i.RenderTexture.prototype),i.RetroFont.prototype.constructor=i.RetroFont,i.RetroFont.ALIGN_LEFT="left",i.RetroFont.ALIGN_RIGHT="right",i.RetroFont.ALIGN_CENTER="center",i.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",i.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",i.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",i.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",i.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",i.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",i.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",i.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",i.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",i.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",i.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",i.RetroFont.prototype.setFixedWidth=function(t,e){"undefined"==typeof e&&(e="left"),this.fixedWidth=t,this.align=e},i.RetroFont.prototype.setText=function(t,e,i,n,r,o){this.multiLine=e||!1,this.customSpacingX=i||0,this.customSpacingY=n||0,this.align=r||"left",this.autoUpperCase=o?!1:!0,t.length>0&&(this.text=t)},i.RetroFont.prototype.buildRetroFontText=function(){var t=0,e=0;if(this.clear(),this.multiLine){var n=this._text.split("\n");this.fixedWidth>0?this.resize(this.fixedWidth,n.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),n.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0);for(var r=0;r<n.length;r++){switch(this.align){case i.RetroFont.ALIGN_LEFT:t=0;break;case i.RetroFont.ALIGN_RIGHT:t=this.width-n[r].length*(this.characterWidth+this.customSpacingX);break;case i.RetroFont.ALIGN_CENTER:t=this.width/2-n[r].length*(this.characterWidth+this.customSpacingX)/2,t+=this.customSpacingX/2}0>t&&(t=0),this.pasteLine(n[r],t,e,this.customSpacingX),e+=this.characterHeight+this.customSpacingY}}else{switch(this.fixedWidth>0?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),this.align){case i.RetroFont.ALIGN_LEFT:t=0;break;case i.RetroFont.ALIGN_RIGHT:t=this.width-this._text.length*(this.characterWidth+this.customSpacingX);break;case i.RetroFont.ALIGN_CENTER:t=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,t+=this.customSpacingX/2}this.textureBuffer.clear(),this.pasteLine(this._text,t,0,this.customSpacingX)}},i.RetroFont.prototype.pasteLine=function(t,e,n,r){for(var o=new i.Point,s=0;s<t.length;s++)if(" "==t.charAt(s))e+=this.characterWidth+r;else if(this.grabData[t.charCodeAt(s)]>=0&&(this.stamp.frame=this.grabData[t.charCodeAt(s)],o.set(e,n),this.render(this.stamp,o,!1),e+=this.characterWidth+r,e>this.width))break},i.RetroFont.prototype.getLongestLine=function(){var t=0;if(this._text.length>0)for(var e=this._text.split("\n"),i=0;i<e.length;i++)e[i].length>t&&(t=e[i].length);return t},i.RetroFont.prototype.removeUnsupportedCharacters=function(t){for(var e="",i=0;i<this._text.length;i++){var n=this._text[i],r=n.charCodeAt(0);(this.grabData[r]>=0||!t&&"\n"===n)&&(e=e.concat(n))}return e},Object.defineProperty(i.RetroFont.prototype,"text",{get:function(){return this._text},set:function(t){var e;e=this.autoUpperCase?t.toUpperCase():t,e!==this._text&&(this._text=e,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())
}}),i.Particle=function(t,e,n,r,o){i.Sprite.call(this,t,e,n,r,o),this.autoScale=!1,this.scaleData=null,this._s=0,this.autoAlpha=!1,this.alphaData=null,this._a=0},i.Particle.prototype=Object.create(i.Sprite.prototype),i.Particle.prototype.constructor=i.Particle,i.Particle.prototype.update=function(){this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1)},i.Particle.prototype.onEmit=function(){},i.Particle.prototype.setAlphaData=function(t){this.alphaData=t,this._a=t.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},i.Particle.prototype.setScaleData=function(t){this.scaleData=t,this._s=t.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},i.Particle.prototype.reset=function(t,e,i){return"undefined"==typeof i&&(i=1),this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.health=i,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},i.Canvas={create:function(t,e,i,n){if("undefined"==typeof n&&(n=!1),t=t||256,e=e||256,n)var r=document.createElement("canvas");else var r=document.createElement(navigator.isCocoonJS?"screencanvas":"canvas");return"string"==typeof i&&""!==i&&(r.id=i),r.width=t,r.height=e,r.style.display="block",r},getOffset:function(t,e){e=e||new i.Point;var n=t.getBoundingClientRect(),r=t.clientTop||document.body.clientTop||0,o=t.clientLeft||document.body.clientLeft||0,s=0,a=0;return"CSS1Compat"===document.compatMode?(s=window.pageYOffset||document.documentElement.scrollTop||t.scrollTop||0,a=window.pageXOffset||document.documentElement.scrollLeft||t.scrollLeft||0):(s=window.pageYOffset||document.body.scrollTop||t.scrollTop||0,a=window.pageXOffset||document.body.scrollLeft||t.scrollLeft||0),e.x=n.left+a-o,e.y=n.top+s-r,e},getAspectRatio:function(t){return t.width/t.height},setBackgroundColor:function(t,e){return e=e||"rgb(0,0,0)",t.style.backgroundColor=e,t},setTouchAction:function(t,e){return e=e||"none",t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t},setUserSelect:function(t,e){return e=e||"none",t.style["-webkit-touch-callout"]=e,t.style["-webkit-user-select"]=e,t.style["-khtml-user-select"]=e,t.style["-moz-user-select"]=e,t.style["-ms-user-select"]=e,t.style["user-select"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t},addToDOM:function(t,e,i){var n;return"undefined"==typeof i&&(i=!0),e&&("string"==typeof e?n=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(n=e)),n||(n=document.body),i&&n.style&&(n.style.overflow="hidden"),n.appendChild(t),t},setTransform:function(t,e,i,n,r,o,s){return t.setTransform(n,o,s,r,e,i),t},setSmoothingEnabled:function(t,e){return t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e,t},setImageRenderingCrisp:function(t){return t.style["image-rendering"]="optimizeSpeed",t.style["image-rendering"]="crisp-edges",t.style["image-rendering"]="-moz-crisp-edges",t.style["image-rendering"]="-webkit-optimize-contrast",t.style["image-rendering"]="optimize-contrast",t.style.msInterpolationMode="nearest-neighbor",t},setImageRenderingBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}},i.Device=function(t){this.game=t,this.desktop=!1,this.iOS=!1,this.cocoonJS=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.webGL=!1,this.worker=!1,this.touch=!1,this.mspointer=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!1,this.quirksMode=!1,this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1,this._checkAudio(),this._checkBrowser(),this._checkCSS3D(),this._checkDevice(),this._checkFeatures(),this._checkOS()},i.Device.LITTLE_ENDIAN=!1,i.Device.prototype={_checkOS:function(){var t=navigator.userAgent;/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?this.iOS=!0:/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0,/Windows Phone/i.test(t)&&(this.windowsPhone=!0)),(this.windows||this.macOS||this.linux&&this.silk===!1)&&(this.desktop=!0),(this.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(this.desktop=!1)},_checkFeatures:function(){this.canvas=!!window.CanvasRenderingContext2D||this.cocoonJS;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),this.webGL=null===this.webGL||this.webGL===!1?!1:!0,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1)&&(this.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(this.mspointer=!0),this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.quirksMode="CSS1Compat"===document.compatMode?!1:!0,this.getUserMedia=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},checkFullScreenSupport:function(){for(var t=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=0;e<t.length;e++)this.game.canvas[t[e]]&&(this.fullscreen=!0,this.requestFullscreen=t[e]);var i=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(this.fullscreen)for(var e=0;e<i.length;e++)this.game.canvas[i[e]]&&(this.cancelFullscreen=i[e]);window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(this.fullscreenKeyboard=!0)},_checkBrowser:function(){var t=navigator.userAgent;/Arora/.test(t)?this.arora=!0:/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Opera/.test(t)?this.opera=!0:/Safari/.test(t)?this.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(this.silk=!0),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0),"undefined"!=typeof window.ejecta&&(this.ejecta=!0),/Crosswalk/.test(t)&&(this.crosswalk=!0)},_checkAudio:function(){this.audioData=!!window.Audio,this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")&&(this.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0))}catch(i){}},_checkDevice:function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),this.typedArray="undefined"!=typeof Int8Array?!0:!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(this.littleEndian=this._checkIsLittleEndian(),i.Device.LITTLE_ENDIAN=this.littleEndian),this.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==this.littleEndian&&this._checkIsUint8ClampedImageData(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(this.vibration=!0)},_checkIsLittleEndian:function(){var t=new ArrayBuffer(4),e=new Uint8Array(t),i=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041==i[0]?!0:2712847316==i[0]?!1:null},_checkIsUint8ClampedImageData:function(){if("undefined"==typeof Uint8ClampedArray)return!1;var t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return!1;var i=e.createImageData(1,1);return i.data instanceof Uint8ClampedArray},_checkCSS3D:function(){var t,e=document.createElement("p"),i={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var n in i)void 0!==e.style[n]&&(e.style[n]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(i[n]));document.body.removeChild(e),this.css3D=void 0!==t&&t.length>0&&"none"!==t},canPlayAudio:function(t){return"mp3"==t&&this.mp3?!0:"ogg"==t&&(this.ogg||this.opus)?!0:"m4a"==t&&this.m4a?!0:"wav"==t&&this.wav?!0:"webm"==t&&this.webm?!0:!1},isConsoleOpen:function(){return window.console&&window.console.firebug?!0:window.console&&(console.profile(),console.profileEnd(),console.clear&&console.clear(),console.profiles)?console.profiles.length>0:!1}},i.Device.prototype.constructor=i.Device,i.RequestAnimationFrame=function(t,e){"undefined"==typeof e&&(e=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=e;for(var i=["ms","moz","webkit","o"],n=0;n<i.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[i[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[i[n]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},i.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(){this.game.update(Date.now()),this._timeOutID=window.requestAnimationFrame(this._onLoop)},updateSetTimeout:function(){this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall)},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return this._isSetTimeOut===!1}},i.RequestAnimationFrame.prototype.constructor=i.RequestAnimationFrame,i.Math={PI2:2*Math.PI,fuzzyEqual:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),Math.abs(t-e)<i},fuzzyLessThan:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),e+i>t},fuzzyGreaterThan:function(t,e,i){return"undefined"==typeof i&&(i=1e-4),t>e-i},fuzzyCeil:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.ceil(t-e)},fuzzyFloor:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.floor(t+e)},average:function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];for(var i=0,n=0;n<t.length;n++)i+=t[n];return i/t.length},truncate:function(t){return t>0?Math.floor(t):Math.ceil(t)},shear:function(t){return t%1},snapTo:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.round(t/e),i+t)},snapToFloor:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.floor(t/e),i+t)},snapToCeil:function(t,e,i){return"undefined"==typeof i&&(i=0),0===e?t:(t-=i,t=e*Math.ceil(t/e),i+t)},snapToInArray:function(t,e,i){if("undefined"==typeof i&&(i=!0),i&&e.sort(),t<e[0])return e[0];for(var n=1;e[n]<t;)n++;var r=e[n-1],o=n<e.length?e[n]:Number.POSITIVE_INFINITY;return t-r>=o-t?o:r},roundTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.round(t*n)/n},floorTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.floor(t*n)/n},ceilTo:function(t,e,i){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=10);var n=Math.pow(i,-e);return Math.ceil(t*n)/n},interpolateFloat:function(t,e,i){return(e-t)*i+t},angleBetween:function(t,e,i,n){return Math.atan2(n-e,i-t)},angleBetweenPoints:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},reverseAngle:function(t){return this.normalizeAngle(t+Math.PI,!0)},normalizeAngle:function(t){return t%=2*Math.PI,t>=0?t:t+2*Math.PI},normalizeLatitude:function(t){return Math.max(-90,Math.min(90,t))},normalizeLongitude:function(t){return t%360==180?180:(t%=360,-180>t?t+360:t>180?t-360:t)},chanceRoll:function(t){return"undefined"==typeof t&&(t=50),0>=t?!1:t>=100?!0:100*Math.random()>=t?!1:!0},numberArray:function(t,e){for(var i=[],n=t;e>=n;n++)i.push(n);return i},maxAdd:function(t,e,i){return t+=e,t>i&&(t=i),t},minSub:function(t,e,i){return t-=e,i>t&&(t=i),t},wrap:function(t,e,i){var n=i-e;if(0>=n)return 0;var r=(t-e)%n;return 0>r&&(r+=n),r+e},wrapValue:function(t,e,i){var n;return t=Math.abs(t),e=Math.abs(e),i=Math.abs(i),n=(t+e)%i},limitValue:function(t,e,i){return e>t?e:t>i?i:t},randomSign:function(){return Math.random()>.5?1:-1},isOdd:function(t){return 1&t},isEven:function(t){return 1&t?!1:!0},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else var t=arguments;for(var e=1,i=0,n=t.length;n>e;e++)t[e]<t[i]&&(i=e);return t[i]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else var t=arguments;for(var e=1,i=0,n=t.length;n>e;e++)t[e]>t[i]&&(i=e);return t[i]},minProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else var e=arguments.slice(1);for(var i=1,n=0,r=e.length;r>i;i++)e[i][t]<e[n][t]&&(n=i);return e[n][t]},maxProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else var e=arguments.slice(1);for(var i=1,n=0,r=e.length;r>i;i++)e[i][t]>e[n][t]&&(n=i);return e[n][t]},wrapAngle:function(t,e){var i=e?Math.PI/180:1;return this.wrap(t,-180*i,180*i)},angleLimit:function(t,e,i){var n=t;return t>i?n=i:e>t&&(n=e),n},linearInterpolation:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n);return 0>e?this.linear(t[0],t[1],n):e>1?this.linear(t[i],t[i-1],i-n):this.linear(t[r],t[r+1>i?i:r+1],n-r)},bezierInterpolation:function(t,e){for(var i=0,n=t.length-1,r=0;n>=r;r++)i+=Math.pow(1-e,n-r)*Math.pow(e,r)*t[r]*this.bernstein(n,r);return i},catmullRomInterpolation:function(t,e){var i=t.length-1,n=i*e,r=Math.floor(n);return t[0]===t[i]?(0>e&&(r=Math.floor(n=i*(1+e))),this.catmullRom(t[(r-1+i)%i],t[r],t[(r+1)%i],t[(r+2)%i],n-r)):0>e?t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-n)-t[0]):e>1?t[i]-(this.catmullRom(t[i],t[i],t[i-1],t[i-1],n-i)-t[i]):this.catmullRom(t[r?r-1:0],t[r],t[r+1>i?i:r+1],t[r+2>i?i:r+2],n-r)},linear:function(t,e,i){return(e-t)*i+t},bernstein:function(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e)},catmullRom:function(t,e,i,n,r){var o=.5*(i-t),s=.5*(n-e),a=r*r,l=r*a;return(2*e-2*i+o+s)*l+(-3*e+3*i-2*o-s)*a+o*r+e},difference:function(t,e){return Math.abs(t-e)},getRandom:function(t,e,i){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),null!=t){var n=i;if((0===n||n>t.length-e)&&(n=t.length-e),n>0)return t[e+Math.floor(Math.random()*n)]}return null},removeRandom:function(t,e,i){if("undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=0),null!=t){var n=i;if((0===n||n>t.length-e)&&(n=t.length-e),n>0){var r=e+Math.floor(Math.random()*n),o=t.splice(r,1);return o[0]}}return null},floor:function(t){var e=0|t;return t>0?e:e!=t?e-1:e},ceil:function(t){var e=0|t;return t>0&&e!=t?e+1:e},sinCosGenerator:function(t,e,i,n){"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=1),"undefined"==typeof n&&(n=1);for(var r=e,o=i,s=n*Math.PI/t,a=[],l=[],u=0;t>u;u++)o-=r*s,r+=o*s,a[u]=o,l[u]=r;return{sin:l,cos:a,length:t}},shift:function(t){var e=t.shift();return t.push(e),e},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=t[e];t[e]=t[i],t[i]=n}return t},distance:function(t,e,i,n){var r=t-i,o=e-n;return Math.sqrt(r*r+o*o)},distancePow:function(t,e,i,n,r){return"undefined"==typeof r&&(r=2),Math.sqrt(Math.pow(i-t,r)+Math.pow(n-e,r))},distanceRounded:function(t,e,n,r){return Math.round(i.Math.distance(t,e,n,r))},clamp:function(t,e,i){return e>t?e:t>i?i:t},clampBottom:function(t,e){return e>t?e:t},within:function(t,e,i){return Math.abs(t-e)<=i},mapLinear:function(t,e,i,n,r){return n+(t-e)*(r-n)/(i-e)},smoothstep:function(t,e,i){return t=Math.max(0,Math.min(1,(t-e)/(i-e))),t*t*(3-2*t)},smootherstep:function(t,e,i){return t=Math.max(0,Math.min(1,(t-e)/(i-e))),t*t*t*(t*(6*t-15)+10)},sign:function(t){return 0>t?-1:t>0?1:0},percent:function(t,e,i){return"undefined"==typeof i&&(i=0),t>e||i>e?1:i>t||i>t?0:(t-i)/e},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}()},i.RandomDataGenerator=function(t){"undefined"==typeof t&&(t=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(t)},i.RandomDataGenerator.prototype={rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},sow:function(t){"undefined"==typeof t&&(t=[]),this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1;for(var e,i=0;e=t[i++];)this.s0-=this.hash(e),this.s0+=~~(this.s0<0),this.s1-=this.hash(e),this.s1+=~~(this.s1<0),this.s2-=this.hash(e),this.s2+=~~(this.s2<0)},hash:function(t){var e,i,n;for(n=4022871197,t=t.toString(),i=0;i<t.length;i++)n+=t.charCodeAt(i),e=.02519603282416938*n,n=e>>>0,e-=n,e*=n,n=e>>>0,e-=n,n+=4294967296*e;return 2.3283064365386963e-10*(n>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1))]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},i.RandomDataGenerator.prototype.constructor=i.RandomDataGenerator,i.QuadTree=function(t,e,i,n,r,o,s){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(t,e,i,n,r,o,s)},i.QuadTree.prototype={reset:function(t,e,i,n,r,o,s){this.maxObjects=r||10,this.maxLevels=o||4,this.level=s||0,this.bounds={x:Math.round(t),y:Math.round(e),width:i,height:n,subWidth:Math.floor(i/2),subHeight:Math.floor(n/2),right:Math.round(t)+Math.floor(i/2),bottom:Math.round(e)+Math.floor(n/2)},this.objects.length=0,this.nodes.length=0},populate:function(t){t.forEach(this.populateHandler,this,!0)},populateHandler:function(t){t.body&&t.exists&&this.insert(t.body)},split:function(){this.level++,this.nodes[0]=new i.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[1]=new i.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[2]=new i.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[3]=new i.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level)},insert:function(t){var e,i=0;if(null!=this.nodes[0]&&(e=this.getIndex(t),-1!==e))return void this.nodes[e].insert(t);if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();i<this.objects.length;)e=this.getIndex(this.objects[i]),-1!==e?this.nodes[e].insert(this.objects.splice(i,1)[0]):i++},getIndex:function(t){var e=-1;return t.x<this.bounds.right&&t.right<this.bounds.right?t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=1:t.y>this.bounds.bottom&&(e=2):t.x>this.bounds.right&&(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=0:t.y>this.bounds.bottom&&(e=3)),e},retrieve:function(t){if(t instanceof i.Rectangle)var e=this.objects,n=this.getIndex(t);else{if(!t.body)return this._empty;var e=this.objects,n=this.getIndex(t.body)}return this.nodes[0]&&(-1!==n?e=e.concat(this.nodes[n].retrieve(t)):(e=e.concat(this.nodes[0].retrieve(t)),e=e.concat(this.nodes[1].retrieve(t)),e=e.concat(this.nodes[2].retrieve(t)),e=e.concat(this.nodes[3].retrieve(t)))),e},clear:function(){this.objects.length=0;for(var t=this.nodes.length;t--;)this.nodes[t].clear(),this.nodes.splice(t,1);this.nodes.length=0}},i.QuadTree.prototype.constructor=i.QuadTree,i.Net=function(t){this.game=t},i.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(t){return-1!==window.location.hostname.indexOf(t)},updateQueryString:function(t,e,i,n){"undefined"==typeof i&&(i=!1),("undefined"==typeof n||""===n)&&(n=window.location.href);var r="",o=new RegExp("([?|&])"+t+"=.*?(&|#|$)(.*)","gi");if(o.test(n))r="undefined"!=typeof e&&null!==e?n.replace(o,"$1"+t+"="+e+"$2$3"):n.replace(o,"$1$3").replace(/(&|\?)$/,"");else if("undefined"!=typeof e&&null!==e){var s=-1!==n.indexOf("?")?"&":"?",a=n.split("#");n=a[0]+s+t+"="+e,a[1]&&(n+="#"+a[1]),r=n}else r=n;return i?void(window.location.href=r):r},getQueryString:function(t){"undefined"==typeof t&&(t="");var e={},i=location.search.substring(1).split("&");for(var n in i){var r=i[n].split("=");if(r.length>1){if(t&&t==this.decodeURI(r[0]))return this.decodeURI(r[1]);e[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return e},decodeURI:function(t){return decodeURIComponent(t.replace(/\+/g," "))}},i.Net.prototype.constructor=i.Net,i.TweenManager=function(t){this.game=t,this._tweens=[],this._add=[],this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},i.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var t=0;t<this._tweens.length;t++)this._tweens[t].pendingDelete=!0;this._add=[]},add:function(t){t._manager=this,this._add.push(t)},create:function(t){return new i.Tween(t,this.game,this)},remove:function(t){var e=this._tweens.indexOf(t);-1!==e&&(this._tweens[e].pendingDelete=!0)},update:function(){if(0===this._tweens.length&&0===this._add.length)return!1;for(var t=0,e=this._tweens.length;e>t;)this._tweens[t].update(this.game.time.now)?t++:(this._tweens.splice(t,1),e--);return this._add.length>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e._object===t})},_pauseAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t]._pause()},_resumeAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t]._resume()},pauseAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].pause()},resumeAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].resume(!0)}},i.TweenManager.prototype.constructor=i.TweenManager,i.Tween=function(t,e,n){this._object=t,this.game=e,this._manager=n,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._yoyo=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=i.Easing.Linear.None,this._interpolationFunction=i.Math.linearInterpolation,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._paused=!1,this._pausedTime=0,this._codePaused=!1,this.pendingDelete=!1,this.onStart=new i.Signal,this.onLoop=new i.Signal,this.onComplete=new i.Signal,this.isRunning=!1},i.Tween.prototype={to:function(t,e,i,n,r,o,s){e=e||1e3,i=i||null,n=n||!1,r=r||0,o=o||0,s=s||!1,s&&0===o&&(o=1);var a;return this._parent?(a=this._manager.create(this._object),this._lastChild.chain(a),this._lastChild=a):(a=this,this._parent=this,this._lastChild=this),a._repeat=o,a._duration=e,a._valuesEnd=t,null!==i&&(a._easingFunction=i),r>0&&(a._delayTime=r),a._yoyo=s,n?this.start():this},from:function(t,e,i,n,r,o,s){var a={};for(var l in t)t.hasOwnProperty(l)&&(a[l]=this._object[l],this._object[l]=t[l]);this.to(a,e,i,n,r,o,s)},start:function(){if(null!==this.game&&null!==this._object){this._manager.add(this),this.isRunning=!0,this._onStartCallbackFired=!1,this._startTime=this.game.time.now+this._delayTime;for(var t in this._valuesEnd){if(Array.isArray(this._valuesEnd[t])){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}this._valuesStart[t]=this._object[t],Array.isArray(this._valuesStart[t])||(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0}return this}},generateData:function(t,e){if(null===this.game||null===this._object)return null;this._startTime=0;for(var i in this._valuesEnd){if(Array.isArray(this._valuesEnd[i])){if(0===this._valuesEnd[i].length)continue;this._valuesEnd[i]=[this._object[i]].concat(this._valuesEnd[i])}this._valuesStart[i]=this._object[i],Array.isArray(this._valuesStart[i])||(this._valuesStart[i]*=1),this._valuesStartRepeat[i]=this._valuesStart[i]||0}for(var n=0,r=Math.floor(t*(this._duration/1e3)),o=this._duration/r,s=[];r--;){var i,a=(n-this._startTime)/this._duration;a=a>1?1:a;var l=this._easingFunction(a),u={};for(i in this._valuesEnd){var h=this._valuesStart[i]||0,c=this._valuesEnd[i];c instanceof Array?u[i]=this._interpolationFunction(c,l):("string"==typeof c&&(c=h+parseFloat(c,10)),"number"==typeof c&&(u[i]=h+(c-h)*l))}s.push(u),n+=o}if(this._yoyo){var d=s.slice();d.reverse(),s=s.concat(d)}return"undefined"!=typeof e?e=e.concat(s):s},stop:function(){return this.isRunning=!1,this._onUpdateCallback=null,this._manager.remove(this),this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},yoyo:function(t){return this._yoyo=t,t&&0===this._repeat&&(this._repeat=1),this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},loop:function(){return this._lastChild.chain(this),this},onUpdateCallback:function(t,e){return this._onUpdateCallback=t,this._onUpdateCallbackContext=e,this},pause:function(){this._codePaused=!0,this._paused=!0,this._pausedTime=this.game.time.now},_pause:function(){this._codePaused||(this._paused=!0,this._pausedTime=this.game.time.now)},resume:function(){this._paused&&(this._paused=!1,this._codePaused=!1,this._startTime+=this.game.time.now-this._pausedTime)},_resume:function(){this._codePaused||(this._startTime+=this.game.time.pauseDuration,this._paused=!1)},update:function(t){if(this.pendingDelete)return!1;if(this._paused||t<this._startTime)return!0;var e;if(t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this.onStart.dispatch(this._object),this._onStartCallbackFired=!0);var i=(t-this._startTime)/this._duration;i=i>1?1:i;var n=this._easingFunction(i);for(e in this._valuesEnd){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,n):("string"==typeof o&&(o=r+parseFloat(o,10)),"number"==typeof o&&(this._object[e]=r+(o-r)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,n),1==i){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e],10)),this._yoyo){var s=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=s}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=t+this._delayTime,this.onLoop.dispatch(this._object),!0}this.isRunning=!1,this.onComplete.dispatch(this._object);for(var a=0,l=this._chainedTweens.length;l>a;a++)this._chainedTweens[a].start(t);return!1}return!0}},i.Tween.prototype.constructor=i.Tween,i.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)))},Out:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),i*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/n)+1)},InOut:function(t){var e,i=.1,n=.4;return 0===t?0:1===t?1:(!i||1>i?(i=1,e=n/4):e=n*Math.asin(1/i)/(2*Math.PI),(t*=2)<1?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/n)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-i.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*i.Easing.Bounce.In(2*t):.5*i.Easing.Bounce.Out(2*t-1)+.5}}},i.Time=function(t){this.game=t,this.time=0,this.now=0,this.elapsed=0,this.pausedTime=0,this.advancedTiming=!1,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.physicsElapsed=0,this.deltaCap=0,this.timeCap=1e3,this.frames=0,this.pauseDuration=0,this.timeToCall=0,this.lastTime=0,this.events=new i.Timer(this.game,!1),this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[],this._len=0,this._i=0
},i.Time.prototype={boot:function(){this._started=Date.now(),this.events.start()},create:function(t){"undefined"==typeof t&&(t=!0);var e=new i.Timer(this.game,t);return this._timers.push(e),e},removeAll:function(){for(var t=0;t<this._timers.length;t++)this._timers[t].destroy();this._timers=[],this.events.removeAll()},update:function(t){if(this.now=t,this.timeToCall=this.game.math.max(0,16-(t-this.lastTime)),this.elapsed=this.now-this.time,this.elapsed>this.timeCap&&(this.elapsed=1/60),this.physicsElapsed=this.elapsed/1e3||1/60,this.deltaCap>0&&this.physicsElapsed>this.deltaCap&&(this.physicsElapsed=this.deltaCap),this.advancedTiming&&(this.msMin=this.game.math.min(this.msMin,this.elapsed),this.msMax=this.game.math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=this.game.math.min(this.fpsMin,this.fps),this.fpsMax=this.game.math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)),this.time=this.now,this.lastTime=t+this.timeToCall,!this.game.paused)for(this.events.update(this.now),this._i=0,this._len=this._timers.length;this._i<this._len;)this._timers[this._i].update(this.now)?this._i++:(this._timers.splice(this._i,1),this._len--)},gamePaused:function(){this._pauseStarted=this.now,this.events.pause();for(var t=this._timers.length;t--;)this._timers[t]._pause()},gameResumed:function(){this.time=this.now=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var t=this._timers.length;t--;)this._timers[t]._resume()},totalElapsedSeconds:function(){return.001*(this.now-this._started)},elapsedSince:function(t){return this.now-t},elapsedSecondsSince:function(t){return.001*(this.now-t)},reset:function(){this._started=this.now,this.removeAll()}},i.Time.prototype.constructor=i.Time,i.Timer=function(t,e){"undefined"==typeof e&&(e=!0),this.game=t,this.running=!1,this.autoDestroy=e,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new i.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},i.Timer.MINUTE=6e4,i.Timer.SECOND=1e3,i.Timer.HALF=500,i.Timer.QUARTER=250,i.Timer.prototype={create:function(t,e,n,r,o,s){var a=t;a+=0===this._now?this.game.time.now:this._now;var l=new i.TimerEvent(this,t,a,n,e,r,o,s);return this.events.push(l),this.order(),this.expired=!1,l},add:function(t,e,i){return this.create(t,!1,0,e,i,Array.prototype.splice.call(arguments,3))},repeat:function(t,e,i,n){return this.create(t,!1,e,i,n,Array.prototype.splice.call(arguments,4))},loop:function(t,e,i){return this.create(t,!0,0,e,i,Array.prototype.splice.call(arguments,3))},start:function(t){if(!this.running){this._started=this.game.time.now+(t||0),this.running=!0;for(var e=0;e<this.events.length;e++)this.events[e].tick=this.events[e].delay+this._started}},stop:function(t){this.running=!1,"undefined"==typeof t&&(t=!0),t&&(this.events.length=0)},remove:function(t){for(var e=0;e<this.events.length;e++)if(this.events[e]===t)return this.events[e].pendingDelete=!0,!0;return!1},order:function(){this.events.length>0&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(t,e){return t.tick<e.tick?-1:t.tick>e.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(t){if(this.paused)return!0;if(this.elapsed=t-this._now,this._now=t,this.elapsed>this.timeCap&&this.adjustEvents(t-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&this._len>0){for(;this._i<this._len&&this.running&&this._now>=this.events[this._i].tick;)this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick),this._newTick<0&&(this._newTick=this._now+this.events[this._i].delay),this.events[this._i].loop===!0?(this.events[this._i].tick=this._newTick,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)):this.events[this._i].repeatCount>0?(this.events[this._i].repeatCount--,this.events[this._i].tick=this._newTick,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)):(this._marked++,this.events[this._i].pendingDelete=!0,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return this.expired&&this.autoDestroy?!1:!0},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.now,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.now,this.paused=!0)},adjustEvents:function(t){for(var e=0;e<this.events.length;e++)if(!this.events[e].pendingDelete){var i=this.events[e].tick-t;0>i&&(i=0),this.events[e].tick=this._now+i}var n=this.nextTick-t;this.nextTick=0>n?this._now:this._now+n},resume:function(){if(this.paused){var t=this.game.time.now;this._pauseTotal+=t-this._now,this._now=t,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.events=[],this._len=0,this._i=0}},Object.defineProperty(i.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(i.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(i.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(i.Timer.prototype,"ms",{get:function(){return this._now-this._started-this._pauseTotal}}),Object.defineProperty(i.Timer.prototype,"seconds",{get:function(){return.001*this.ms}}),i.Timer.prototype.constructor=i.Timer,i.TimerEvent=function(t,e,i,n,r,o,s,a){this.timer=t,this.delay=e,this.tick=i,this.repeatCount=n-1,this.loop=r,this.callback=o,this.callbackContext=s,this.args=a,this.pendingDelete=!1},i.TimerEvent.prototype.constructor=i.TimerEvent,i.AnimationManager=function(t){this.sprite=t,this.game=t.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},i.AnimationManager.prototype={loadFrameData:function(t){this._frameData=t,this.frame=0,this.isLoaded=!0},add:function(t,e,n,r,o){return null===this._frameData?void console.warn("No FrameData available for Phaser.Animation "+t):(e=e||[],n=n||60,"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=e&&"number"==typeof e[0]?!0:!1),null===this.sprite.events.onAnimationStart&&(this.sprite.events.onAnimationStart=new i.Signal,this.sprite.events.onAnimationComplete=new i.Signal,this.sprite.events.onAnimationLoop=new i.Signal),this._outputFrames.length=0,this._frameData.getFrameIndexes(e,o,this._outputFrames),this._anims[t]=new i.Animation(this.game,this.sprite,t,this._frameData,this._outputFrames,n,r),this.currentAnim=this._anims[t],this.currentFrame=this.currentAnim.currentFrame,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1),this._anims[t])},validateFrames:function(t,e){"undefined"==typeof e&&(e=!0);for(var i=0;i<t.length;i++)if(e===!0){if(t[i]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(t[i])===!1)return!1;return!0},play:function(t,e,i,n){if(this._anims[t]){if(this.currentAnim!==this._anims[t])return this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[t],this.currentAnim.paused=!1,this.currentAnim.play(e,i,n);if(this.currentAnim.isPlaying===!1)return this.currentAnim.paused=!1,this.currentAnim.play(e,i,n)}},stop:function(t,e){"undefined"==typeof e&&(e=!1),"string"==typeof t?this._anims[t]&&(this.currentAnim=this._anims[t],this.currentAnim.stop(e)):this.currentAnim&&this.currentAnim.stop(e)},update:function(){return this.updateIfVisible&&!this.sprite.visible?!1:this.currentAnim&&this.currentAnim.update()===!0?(this.currentFrame=this.currentAnim.currentFrame,!0):!1},getAnimation:function(t){return"string"==typeof t&&this._anims[t]?this._anims[t]:null},refreshFrame:function(){this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1)},destroy:function(){var t=null;for(var t in this._anims)this._anims.hasOwnProperty(t)&&this._anims[t].destroy();this._anims={},this._frameData=null,this._frameIndex=0,this.currentAnim=null,this.currentFrame=null}},i.AnimationManager.prototype.constructor=i.AnimationManager,Object.defineProperty(i.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(i.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData?this._frameData.total:-1}}),Object.defineProperty(i.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(t){this.currentAnim.paused=t}}),Object.defineProperty(i.AnimationManager.prototype,"frame",{get:function(){return this.currentFrame?this._frameIndex:void 0},set:function(t){"number"==typeof t&&this._frameData&&null!==this._frameData.getFrame(t)&&(this.currentFrame=this._frameData.getFrame(t),this.currentFrame&&(this._frameIndex=t,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1)))}}),Object.defineProperty(i.AnimationManager.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(t){"string"==typeof t&&this._frameData&&null!==this._frameData.getFrameByName(t)?(this.currentFrame=this._frameData.getFrameByName(t),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1))):console.warn("Cannot set frameName: "+t)}}),i.Animation=function(t,e,n,r,o,s,a){this.game=t,this._parent=e,this._frameData=r,this.name=n,this._frames=[],this._frames=this._frames.concat(o),this.delay=1e3/s,this.loop=a,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new i.Signal,this.onComplete=new i.Signal,this.onLoop=new i.Signal,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},i.Animation.prototype={play:function(t,e,i){return"number"==typeof t&&(this.delay=1e3/t),"boolean"==typeof e&&(this.loop=e),"undefined"!=typeof i&&(this.killOnComplete=i),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1),this._parent.events.onAnimationStart.dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart.dispatch(this._parent,this)},setFrame:function(t,e){var i;if("undefined"==typeof e&&(e=!1),"string"==typeof t)for(var n=0;n<this._frames.length;n++)this._frameData.getFrame(this._frames[n]).name===t&&(i=n);else if("number"==typeof t)if(e)i=t;else for(var n=0;n<this._frames.length;n++)this.frames[n]===i&&(i=n);i&&(this._frameIndex=i-1,this._timeNextFrame=this.game.time.now,this.update())},stop:function(t,e){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,t&&(this.currentFrame=this._frameData.getFrame(this._frames[0])),e&&(this._parent.events.onAnimationComplete.dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.now)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.now+this._frameDiff)},update:function(){return this.isPaused?!1:this.isPlaying===!0&&this.game.time.now>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.time.now-this._timeNextFrame,this._timeLastFrame=this.game.time.now,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.now+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1)),this.loopCount++,this._parent.events.onAnimationLoop.dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this)):this.complete():(this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1))),!0):!1},destroy:function(){this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose()},complete:function(){this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete.dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},i.Animation.prototype.constructor=i.Animation,Object.defineProperty(i.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(t){this.isPaused=t,t?this._pauseStartTime=this.game.time.now:this.isPlaying&&(this._timeNextFrame=this.game.time.now+this.delay)}}),Object.defineProperty(i.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(i.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(t){this.currentFrame=this._frameData.getFrame(this._frames[t]),null!==this.currentFrame&&(this._frameIndex=t,this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]))}}),Object.defineProperty(i.Animation.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(t){t>=1&&(this.delay=1e3/t)}}),i.Animation.generateFrameNames=function(t,e,n,r,o){"undefined"==typeof r&&(r="");var s=[],a="";if(n>e)for(var l=e;n>=l;l++)a="number"==typeof o?i.Utils.pad(l.toString(),o,"0",1):l.toString(),a=t+a+r,s.push(a);else for(var l=e;l>=n;l--)a="number"==typeof o?i.Utils.pad(l.toString(),o,"0",1):l.toString(),a=t+a+r,s.push(a);return s},i.Frame=function(t,e,n,r,o,s,a){this.index=t,this.x=e,this.y=n,this.width=r,this.height=o,this.name=s,this.uuid=a,this.centerX=Math.floor(r/2),this.centerY=Math.floor(o/2),this.distance=i.Math.distance(0,0,r,o),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=r,this.sourceSizeH=o,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0},i.Frame.prototype={setTrim:function(t,e,i,n,r,o,s){this.trimmed=t,t&&(this.width=e,this.height=i,this.sourceSizeW=e,this.sourceSizeH=i,this.centerX=Math.floor(e/2),this.centerY=Math.floor(i/2),this.spriteSourceSizeX=n,this.spriteSourceSizeY=r,this.spriteSourceSizeW=o,this.spriteSourceSizeH=s)},getRect:function(t){return"undefined"==typeof t?t=new i.Rectangle(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t}},i.Frame.prototype.constructor=i.Frame,i.FrameData=function(){this._frames=[],this._frameNames=[]},i.FrameData.prototype={addFrame:function(t){return t.index=this._frames.length,this._frames.push(t),""!==t.name&&(this._frameNames[t.name]=t.index),t},getFrame:function(t){return t>this._frames.length&&(t=0),this._frames[t]},getFrameByName:function(t){return"number"==typeof this._frameNames[t]?this._frames[this._frameNames[t]]:null},checkFrameName:function(t){return null==this._frameNames[t]?!1:!0},getFrameRange:function(t,e,i){"undefined"==typeof i&&(i=[]);for(var n=t;e>=n;n++)i.push(this._frames[n]);return i},getFrames:function(t,e,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=[]),"undefined"==typeof t||0===t.length)for(var n=0;n<this._frames.length;n++)i.push(this._frames[n]);else for(var n=0,r=t.length;r>n;n++)i.push(e?this.getFrame(t[n]):this.getFrameByName(t[n]));return i},getFrameIndexes:function(t,e,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=[]),"undefined"==typeof t||0===t.length)for(var n=0,r=this._frames.length;r>n;n++)i.push(this._frames[n].index);else for(var n=0,r=t.length;r>n;n++)e?i.push(t[n]):this.getFrameByName(t[n])&&i.push(this.getFrameByName(t[n]).index);return i}},i.FrameData.prototype.constructor=i.FrameData,Object.defineProperty(i.FrameData.prototype,"total",{get:function(){return this._frames.length}}),i.AnimationParser={spriteSheet:function(t,e,n,r,o,s,a){var l=t.cache.getImage(e);if(null==l)return null;var u=l.width,h=l.height;0>=n&&(n=Math.floor(-u/Math.min(-1,n))),0>=r&&(r=Math.floor(-h/Math.min(-1,r)));var c=Math.floor((u-s)/(n+a)),d=Math.floor((h-s)/(r+a)),p=c*d;if(-1!==o&&(p=o),0===u||0===h||n>u||r>h||0===p)return console.warn("Phaser.AnimationParser.spriteSheet: width/height zero or width/height < given frameWidth/frameHeight"),null;for(var f=new i.FrameData,m=s,g=s,_=0;p>_;_++){var y=t.rnd.uuid();f.addFrame(new i.Frame(_,m,g,n,r,"",y)),PIXI.TextureCache[y]=new PIXI.Texture(PIXI.BaseTextureCache[e],{x:m,y:g,width:n,height:r}),m+=n+a,m+n>u&&(m=s,g+=r+a)}return f},JSONData:function(t,e,n){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(e);for(var r,o=new i.FrameData,s=e.frames,a=0;a<s.length;a++){var l=t.rnd.uuid();r=o.addFrame(new i.Frame(a,s[a].frame.x,s[a].frame.y,s[a].frame.w,s[a].frame.h,s[a].filename,l)),PIXI.TextureCache[l]=new PIXI.Texture(PIXI.BaseTextureCache[n],{x:s[a].frame.x,y:s[a].frame.y,width:s[a].frame.w,height:s[a].frame.h}),s[a].trimmed&&(r.setTrim(s[a].trimmed,s[a].sourceSize.w,s[a].sourceSize.h,s[a].spriteSourceSize.x,s[a].spriteSourceSize.y,s[a].spriteSourceSize.w,s[a].spriteSourceSize.h),PIXI.TextureCache[l].trim=new i.Rectangle(s[a].spriteSourceSize.x,s[a].spriteSourceSize.y,s[a].sourceSize.w,s[a].sourceSize.h))}return o},JSONDataHash:function(t,e,n){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(e);var r,o=new i.FrameData,s=e.frames,a=0;for(var l in s){var u=t.rnd.uuid();r=o.addFrame(new i.Frame(a,s[l].frame.x,s[l].frame.y,s[l].frame.w,s[l].frame.h,l,u)),PIXI.TextureCache[u]=new PIXI.Texture(PIXI.BaseTextureCache[n],{x:s[l].frame.x,y:s[l].frame.y,width:s[l].frame.w,height:s[l].frame.h}),s[l].trimmed&&(r.setTrim(s[l].trimmed,s[l].sourceSize.w,s[l].sourceSize.h,s[l].spriteSourceSize.x,s[l].spriteSourceSize.y,s[l].spriteSourceSize.w,s[l].spriteSourceSize.h),PIXI.TextureCache[u].trim=new i.Rectangle(s[l].spriteSourceSize.x,s[l].spriteSourceSize.y,s[l].sourceSize.w,s[l].sourceSize.h)),a++}return o},XMLData:function(t,e,n){if(!e.getElementsByTagName("TextureAtlas"))return void console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");for(var r,o,s,a,l,u,h,c,d,p,f,m,g=new i.FrameData,_=e.getElementsByTagName("SubTexture"),y=0;y<_.length;y++)o=t.rnd.uuid(),a=_[y].attributes,s=a.name.nodeValue,l=parseInt(a.x.nodeValue,10),u=parseInt(a.y.nodeValue,10),h=parseInt(a.width.nodeValue,10),c=parseInt(a.height.nodeValue,10),d=null,p=null,a.frameX&&(d=Math.abs(parseInt(a.frameX.nodeValue,10)),p=Math.abs(parseInt(a.frameY.nodeValue,10)),f=parseInt(a.frameWidth.nodeValue,10),m=parseInt(a.frameHeight.nodeValue,10)),r=g.addFrame(new i.Frame(y,l,u,h,c,s,o)),PIXI.TextureCache[o]=new PIXI.Texture(PIXI.BaseTextureCache[n],{x:l,y:u,width:h,height:c}),(null!==d||null!==p)&&(r.setTrim(!0,h,c,d,p,f,m),PIXI.TextureCache[o].trim=new i.Rectangle(d,p,h,c));return g}},i.Cache=function(t){this.game=t,this._canvases={},this._images={},this._textures={},this._sounds={},this._text={},this._json={},this._physics={},this._tilemaps={},this._binary={},this._bitmapDatas={},this._bitmapFont={},this.addDefaultImage(),this.addMissingImage(),this.onSoundUnlock=new i.Signal,this._cacheMap=[],this._cacheMap[i.Cache.CANVAS]=this._canvases,this._cacheMap[i.Cache.IMAGE]=this._images,this._cacheMap[i.Cache.TEXTURE]=this._textures,this._cacheMap[i.Cache.SOUND]=this._sounds,this._cacheMap[i.Cache.TEXT]=this._text,this._cacheMap[i.Cache.PHYSICS]=this._physics,this._cacheMap[i.Cache.TILEMAP]=this._tilemaps,this._cacheMap[i.Cache.BINARY]=this._binary,this._cacheMap[i.Cache.BITMAPDATA]=this._bitmapDatas,this._cacheMap[i.Cache.BITMAPFONT]=this._bitmapFont,this._cacheMap[i.Cache.JSON]=this._json},i.Cache.CANVAS=1,i.Cache.IMAGE=2,i.Cache.TEXTURE=3,i.Cache.SOUND=4,i.Cache.TEXT=5,i.Cache.PHYSICS=6,i.Cache.TILEMAP=7,i.Cache.BINARY=8,i.Cache.BITMAPDATA=9,i.Cache.BITMAPFONT=10,i.Cache.JSON=11,i.Cache.prototype={addCanvas:function(t,e,i){this._canvases[t]={canvas:e,context:i}},addBinary:function(t,e){this._binary[t]=e},addBitmapData:function(t,e){return this._bitmapDatas[t]=e,e},addRenderTexture:function(t,e){var n=new i.Frame(0,0,0,e.width,e.height,"","");this._textures[t]={texture:e,frame:n}},addSpriteSheet:function(t,e,n,r,o,s,a,l){this._images[t]={url:e,data:n,spriteSheet:!0,frameWidth:r,frameHeight:o,margin:a,spacing:l},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(n),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),this._images[t].frameData=i.AnimationParser.spriteSheet(this.game,t,r,o,s,a,l)},addTilemap:function(t,e,i,n){this._tilemaps[t]={url:e,data:i,format:n}},addTextureAtlas:function(t,e,n,r,o){this._images[t]={url:e,data:n,spriteSheet:!0},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(n),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),o==i.Loader.TEXTURE_ATLAS_JSON_ARRAY?this._images[t].frameData=i.AnimationParser.JSONData(this.game,r,t):o==i.Loader.TEXTURE_ATLAS_JSON_HASH?this._images[t].frameData=i.AnimationParser.JSONDataHash(this.game,r,t):o==i.Loader.TEXTURE_ATLAS_XML_STARLING&&(this._images[t].frameData=i.AnimationParser.XMLData(this.game,r,t))},addBitmapFont:function(t,e,n,r,o,s){this._images[t]={url:e,data:n,spriteSheet:!0},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(n),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),i.LoaderParser.bitmapFont(this.game,r,t,o,s)},addPhysicsData:function(t,e,i,n){this._physics[t]={url:e,data:i,format:n}},addDefaultImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this._images.__default={url:null,data:t,spriteSheet:!1},this._images.__default.frame=new i.Frame(0,0,0,32,32,"",""),PIXI.BaseTextureCache.__default=new PIXI.BaseTexture(t),PIXI.TextureCache.__default=new PIXI.Texture(PIXI.BaseTextureCache.__default)},addMissingImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this._images.__missing={url:null,data:t,spriteSheet:!1},this._images.__missing.frame=new i.Frame(0,0,0,32,32,"",""),PIXI.BaseTextureCache.__missing=new PIXI.BaseTexture(t),PIXI.TextureCache.__missing=new PIXI.Texture(PIXI.BaseTextureCache.__missing)},addText:function(t,e,i){this._text[t]={url:e,data:i}},addJSON:function(t,e,i){this._json[t]={url:e,data:i}},addImage:function(t,e,n){this._images[t]={url:e,data:n,spriteSheet:!1},this._images[t].frame=new i.Frame(0,0,0,n.width,n.height,t,this.game.rnd.uuid()),PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(n),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t])},addSound:function(t,e,i,n,r){n=n||!0,r=r||!1;var o=!1;r&&(o=!0),this._sounds[t]={url:e,data:i,isDecoding:!1,decoded:o,webAudio:n,audioTag:r,locked:this.game.sound.touchLocked}},reloadSound:function(t){var e=this;this._sounds[t]&&(this._sounds[t].data.src=this._sounds[t].url,this._sounds[t].data.addEventListener("canplaythrough",function(){return e.reloadSoundComplete(t)},!1),this._sounds[t].data.load())},reloadSoundComplete:function(t){this._sounds[t]&&(this._sounds[t].locked=!1,this.onSoundUnlock.dispatch(t))},updateSound:function(t,e,i){this._sounds[t]&&(this._sounds[t][e]=i)},decodedSound:function(t,e){this._sounds[t].data=e,this._sounds[t].decoded=!0,this._sounds[t].isDecoding=!1},getCanvas:function(t){return this._canvases[t]?this._canvases[t].canvas:void console.warn('Phaser.Cache.getCanvas: Invalid key: "'+t+'"')},getBitmapData:function(t){return this._bitmapDatas[t]?this._bitmapDatas[t]:void console.warn('Phaser.Cache.getBitmapData: Invalid key: "'+t+'"')},getBitmapFont:function(t){return this._bitmapFont[t]?this._bitmapFont[t]:void console.warn('Phaser.Cache.getBitmapFont: Invalid key: "'+t+'"')},getPhysicsData:function(t,e,i){if("undefined"==typeof e||null===e){if(this._physics[t])return this._physics[t].data;console.warn('Phaser.Cache.getPhysicsData: Invalid key: "'+t+'"')}else if(this._physics[t]&&this._physics[t].data[e]){var n=this._physics[t].data[e];if(!n||!i)return n;for(var r in n)if(r=n[r],r.fixtureKey===i)return r;console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "'+i+" in "+t+'"')}else console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "'+t+" / "+e+'"');return null},checkKey:function(t,e){return this._cacheMap[t][e]?!0:!1},checkCanvasKey:function(t){return this.checkKey(i.Cache.CANVAS,t)},checkImageKey:function(t){return this.checkKey(i.Cache.IMAGE,t)},checkTextureKey:function(t){return this.checkKey(i.Cache.TEXTURE,t)},checkSoundKey:function(t){return this.checkKey(i.Cache.SOUND,t)},checkTextKey:function(t){return this.checkKey(i.Cache.TEXT,t)},checkPhysicsKey:function(t){return this.checkKey(i.Cache.PHYSICS,t)},checkTilemapKey:function(t){return this.checkKey(i.Cache.TILEMAP,t)},checkBinaryKey:function(t){return this.checkKey(i.Cache.BINARY,t)},checkBitmapDataKey:function(t){return this.checkKey(i.Cache.BITMAPDATA,t)},checkBitmapFontKey:function(t){return this.checkKey(i.Cache.BITMAPFONT,t)},checkJSONKey:function(t){return this.checkKey(i.Cache.JSON,t)},getImage:function(t){return this._images[t]?this._images[t].data:void console.warn('Phaser.Cache.getImage: Invalid key: "'+t+'"')},getTilemapData:function(t){return this._tilemaps[t]?this._tilemaps[t]:void console.warn('Phaser.Cache.getTilemapData: Invalid key: "'+t+'"')},getFrameData:function(t){return this._images[t]&&this._images[t].frameData?this._images[t].frameData:null},updateFrameData:function(t,e){this._images[t]&&(this._images[t].spriteSheet=!0,this._images[t].frameData=e)},getFrameByIndex:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrame(e):null},getFrameByName:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrameByName(e):null},getFrame:function(t){return this._images[t]&&this._images[t].spriteSheet===!1?this._images[t].frame:null},getTextureFrame:function(t){return this._textures[t]?this._textures[t].frame:null},getTexture:function(t){return this._textures[t]?this._textures[t]:void console.warn('Phaser.Cache.getTexture: Invalid key: "'+t+'"')},getSound:function(t){return this._sounds[t]?this._sounds[t]:void console.warn('Phaser.Cache.getSound: Invalid key: "'+t+'"')},getSoundData:function(t){return this._sounds[t]?this._sounds[t].data:void console.warn('Phaser.Cache.getSoundData: Invalid key: "'+t+'"')},isSoundDecoded:function(t){return this._sounds[t]?this._sounds[t].decoded:void 0},isSoundReady:function(t){return this._sounds[t]&&this._sounds[t].decoded&&this.game.sound.touchLocked===!1},isSpriteSheet:function(t){return this._images[t]?this._images[t].spriteSheet:!1},getText:function(t){return this._text[t]?this._text[t].data:void console.warn('Phaser.Cache.getText: Invalid key: "'+t+'"')},getJSON:function(t){return this._json[t]?this._json[t].data:void console.warn('Phaser.Cache.getJSON: Invalid key: "'+t+'"')},getBinary:function(t){return this._binary[t]?this._binary[t]:void console.warn('Phaser.Cache.getBinary: Invalid key: "'+t+'"')},getKeys:function(t){var e=null;switch(t){case i.Cache.CANVAS:e=this._canvases;break;case i.Cache.IMAGE:e=this._images;break;case i.Cache.TEXTURE:e=this._textures;break;case i.Cache.SOUND:e=this._sounds;break;case i.Cache.TEXT:e=this._text;break;case i.Cache.PHYSICS:e=this._physics;break;case i.Cache.TILEMAP:e=this._tilemaps;break;case i.Cache.BINARY:e=this._binary;break;case i.Cache.BITMAPDATA:e=this._bitmapDatas;break;case i.Cache.BITMAPFONT:e=this._bitmapFont;break;case i.Cache.JSON:e=this._json}if(e){var n=[];for(var r in e)"__default"!==r&&"__missing"!==r&&n.push(r);return n}},removeCanvas:function(t){delete this._canvases[t]},removeImage:function(t){delete this._images[t]},removeSound:function(t){delete this._sounds[t]},removeText:function(t){delete this._text[t]},removeJSON:function(t){delete this._json[t]},removePhysics:function(t){delete this._physics[t]},removeTilemap:function(t){delete this._tilemaps[t]},removeBinary:function(t){delete this._binary[t]},removeBitmapData:function(t){delete this._bitmapDatas[t]},removeBitmapFont:function(t){delete this._bitmapFont[t]},destroy:function(){for(var t in this._canvases)delete this._canvases[t];for(var t in this._images)"__default"!==t&&"__missing"!==t&&delete this._images[t];for(var t in this._sounds)delete this._sounds[t];for(var t in this._text)delete this._text[t];for(var t in this._json)delete this._json[t];for(var t in this._textures)delete this._textures[t];for(var t in this._physics)delete this._physics[t];for(var t in this._tilemaps)delete this._tilemaps[t];for(var t in this._binary)delete this._binary[t];for(var t in this._bitmapDatas)delete this._bitmapDatas[t];for(var t in this._bitmapFont)delete this._bitmapFont[t]}},i.Cache.prototype.constructor=i.Cache,i.Loader=function(t){this.game=t,this._fileList=[],this._fileIndex=0,this._progressChunk=0,this._xhr=new XMLHttpRequest,this._ajax=null,this.isLoading=!1,this.hasLoaded=!1,this.progress=0,this.progressFloat=0,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.onLoadStart=new i.Signal,this.onFileStart=new i.Signal,this.onFileComplete=new i.Signal,this.onFileError=new i.Signal,this.onLoadComplete=new i.Signal},i.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,i.Loader.TEXTURE_ATLAS_JSON_HASH=1,i.Loader.TEXTURE_ATLAS_XML_STARLING=2,i.Loader.PHYSICS_LIME_CORONA_JSON=3,i.Loader.PHYSICS_PHASER_JSON=4,i.Loader.prototype={setPreloadSprite:function(t,e){e=e||0,this.preloadSprite={sprite:t,direction:e,width:t.width,height:t.height,rect:null},this.preloadSprite.rect=0===e?new i.Rectangle(0,0,1,t.height):new i.Rectangle(0,0,t.width,1),t.crop(this.preloadSprite.rect),t.visible=!0
},checkKeyExists:function(t,e){if(this._fileList.length>0)for(var i=0;i<this._fileList.length;i++)if(this._fileList[i].type===t&&this._fileList[i].key===e)return!0;return!1},getAssetIndex:function(t,e){if(this._fileList.length>0)for(var i=0;i<this._fileList.length;i++)if(this._fileList[i].type===t&&this._fileList[i].key===e)return i;return-1},getAsset:function(t,e){if(this._fileList.length>0)for(var i=0;i<this._fileList.length;i++)if(this._fileList[i].type===t&&this._fileList[i].key===e)return{index:i,file:this._fileList[i]};return!1},reset:function(){this.preloadSprite=null,this.isLoading=!1,this._fileList.length=0,this._fileIndex=0},addToFileList:function(t,e,i,n){var r={type:t,key:e,url:i,data:null,error:!1,loaded:!1};if("undefined"!=typeof n)for(var o in n)r[o]=n[o];this.checkKeyExists(t,e)===!1&&this._fileList.push(r)},replaceInFileList:function(t,e,i,n){var r={type:t,key:e,url:i,data:null,error:!1,loaded:!1};if("undefined"!=typeof n)for(var o in n)r[o]=n[o];var s=this.getAssetIndex(t,e);-1===s?this._fileList.push(r):this._fileList[s]=r},image:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.replaceInFileList("image",t,e):this.addToFileList("image",t,e),this},text:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.replaceInFileList("text",t,e):this.addToFileList("text",t,e),this},json:function(t,e,i){return"undefined"==typeof i&&(i=!1),i?this.replaceInFileList("json",t,e):this.addToFileList("json",t,e),this},script:function(t,e,i,n){return"undefined"==typeof i&&(i=!1),i!==!1&&"undefined"==typeof n&&(n=i),this.addToFileList("script",t,e,{callback:i,callbackContext:n}),this},binary:function(t,e,i,n){return"undefined"==typeof i&&(i=!1),i!==!1&&"undefined"==typeof n&&(n=i),this.addToFileList("binary",t,e,{callback:i,callbackContext:n}),this},spritesheet:function(t,e,i,n,r,o,s){return"undefined"==typeof r&&(r=-1),"undefined"==typeof o&&(o=0),"undefined"==typeof s&&(s=0),this.addToFileList("spritesheet",t,e,{frameWidth:i,frameHeight:n,frameMax:r,margin:o,spacing:s}),this},audio:function(t,e,i){return"undefined"==typeof i&&(i=!0),this.addToFileList("audio",t,e,{buffer:null,autoDecode:i}),this},tilemap:function(t,e,n,r){if("undefined"==typeof e&&(e=null),"undefined"==typeof n&&(n=null),"undefined"==typeof r&&(r=i.Tilemap.CSV),null==e&&null==n)return console.warn("Phaser.Loader.tilemap - Both mapDataURL and mapData are null. One must be set."),this;if(n){switch(r){case i.Tilemap.CSV:break;case i.Tilemap.TILED_JSON:"string"==typeof n&&(n=JSON.parse(n))}this.game.cache.addTilemap(t,null,n,r)}else this.addToFileList("tilemap",t,e,{format:r});return this},physics:function(t,e,n,r){return"undefined"==typeof e&&(e=null),"undefined"==typeof n&&(n=null),"undefined"==typeof r&&(r=i.Physics.LIME_CORONA_JSON),null==e&&null==n?(console.warn("Phaser.Loader.physics - Both dataURL and jsonData are null. One must be set."),this):(n?("string"==typeof n&&(n=JSON.parse(n)),this.game.cache.addPhysicsData(t,null,n,r)):this.addToFileList("physics",t,e,{format:r}),this)},bitmapFont:function(t,e,i,n,r,o){if("undefined"==typeof i&&(i=null),"undefined"==typeof n&&(n=null),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),i)this.addToFileList("bitmapfont",t,e,{xmlURL:i,xSpacing:r,ySpacing:o});else if("string"==typeof n){var s;try{if(window.DOMParser){var a=new DOMParser;s=a.parseFromString(n,"text/xml")}else s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(n)}catch(l){s=void 0}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Bitmap Font XML given");this.addToFileList("bitmapfont",t,e,{xmlURL:null,xmlData:s,xSpacing:r,ySpacing:o})}return this},atlasJSONArray:function(t,e,n,r){return this.atlas(t,e,n,r,i.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(t,e,n,r){return this.atlas(t,e,n,r,i.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(t,e,n,r){return this.atlas(t,e,n,r,i.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(t,e,n,r,o){if("undefined"==typeof n&&(n=null),"undefined"==typeof r&&(r=null),"undefined"==typeof o&&(o=i.Loader.TEXTURE_ATLAS_JSON_ARRAY),n)this.addToFileList("textureatlas",t,e,{atlasURL:n,format:o});else{switch(o){case i.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof r&&(r=JSON.parse(r));break;case i.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof r){var s;try{if(window.DOMParser){var a=new DOMParser;s=a.parseFromString(r,"text/xml")}else s=new ActiveXObject("Microsoft.XMLDOM"),s.async="false",s.loadXML(r)}catch(l){s=void 0}if(!s||!s.documentElement||s.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");r=s}}this.addToFileList("textureatlas",t,e,{atlasURL:null,atlasData:r,format:o})}return this},removeFile:function(t,e){var i=this.getAsset(t,e);i!==!1&&this._fileList.splice(i.index,1)},removeAll:function(){this._fileList.length=0},start:function(){this.isLoading||(this.progress=0,this.progressFloat=0,this.hasLoaded=!1,this.isLoading=!0,this.onLoadStart.dispatch(this._fileList.length),this._fileList.length>0?(this._fileIndex=0,this._progressChunk=100/this._fileList.length,this.loadFile()):(this.progress=100,this.progressFloat=100,this.hasLoaded=!0,this.onLoadComplete.dispatch()))},loadFile:function(){if(!this._fileList[this._fileIndex])return void console.warn("Phaser.Loader loadFile invalid index "+this._fileIndex);var t=this._fileList[this._fileIndex],e=this;switch(this.onFileStart.dispatch(this.progress,t.key),t.type){case"image":case"spritesheet":case"textureatlas":case"bitmapfont":t.data=new Image,t.data.name=t.key,t.data.onload=function(){return e.fileComplete(e._fileIndex)},t.data.onerror=function(){return e.fileError(e._fileIndex)},this.crossOrigin&&(t.data.crossOrigin=this.crossOrigin),t.data.src=this.baseURL+t.url;break;case"audio":t.url=this.getAudioURL(t.url),null!==t.url?this.game.sound.usingWebAudio?(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()):this.game.sound.usingAudioTag&&(this.game.sound.touchLocked?(t.data=new Audio,t.data.name=t.key,t.data.preload="auto",t.data.src=this.baseURL+t.url,this.fileComplete(this._fileIndex)):(t.data=new Audio,t.data.name=t.key,t.data.onerror=function(){return e.fileError(e._fileIndex)},t.data.preload="auto",t.data.src=this.baseURL+t.url,t.data.addEventListener("canplaythrough",i.GAMES[this.game.id].load.fileComplete(this._fileIndex),!1),t.data.load())):this.fileError(this._fileIndex);break;case"json":window.XDomainRequest?(this._ajax=new window.XDomainRequest,this._ajax.timeout=3e3,this._ajax.onerror=function(){return e.dataLoadError(e._fileIndex)},this._ajax.ontimeout=function(){return e.dataLoadError(e._fileIndex)},this._ajax.onprogress=function(){},this._ajax.onload=function(){return e.jsonLoadComplete(e._fileIndex)},this._ajax.open("GET",this.baseURL+t.url,!0),this._ajax.send()):(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.jsonLoadComplete(e._fileIndex)},this._xhr.onerror=function(){return e.dataLoadError(e._fileIndex)},this._xhr.send());break;case"tilemap":if(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",t.format===i.Tilemap.TILED_JSON)this._xhr.onload=function(){return e.jsonLoadComplete(e._fileIndex)};else{if(t.format!==i.Tilemap.CSV)throw new Error("Phaser.Loader. Invalid Tilemap format: "+t.format);this._xhr.onload=function(){return e.csvLoadComplete(e._fileIndex)}}this._xhr.onerror=function(){return e.dataLoadError(e._fileIndex)},this._xhr.send();break;case"text":case"script":case"physics":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send();break;case"binary":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()}},getAudioURL:function(t){var e;"string"==typeof t&&(t=[t]);for(var i=0;i<t.length;i++)if(e=t[i].toLowerCase(),e=e.substr((Math.max(0,e.lastIndexOf("."))||1/0)+1),this.game.device.canPlayAudio(e))return t[i];return null},fileError:function(t){this._fileList[t].loaded=!0,this._fileList[t].error=!0,this.onFileError.dispatch(this._fileList[t].key,this._fileList[t]),console.warn("Phaser.Loader error loading file: "+this._fileList[t].key+" from URL "+this._fileList[t].url),this.nextFile(t,!1)},fileComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader fileComplete invalid index "+t);var e=this._fileList[t];e.loaded=!0;var n=!0,r=this;switch(e.type){case"image":this.game.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.game.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing);break;case"textureatlas":if(null==e.atlasURL)this.game.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else{if(n=!1,this._xhr.open("GET",this.baseURL+e.atlasURL,!0),this._xhr.responseType="text",e.format==i.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format==i.Loader.TEXTURE_ATLAS_JSON_HASH)this._xhr.onload=function(){return r.jsonLoadComplete(t)};else{if(e.format!=i.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this._xhr.onload=function(){return r.xmlLoadComplete(t)}}this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send()}break;case"bitmapfont":null==e.xmlURL?this.game.cache.addBitmapFont(e.key,e.url,e.data,e.xmlData,e.xSpacing,e.ySpacing):(n=!1,this._xhr.open("GET",this.baseURL+e.xmlURL,!0),this._xhr.responseType="text",this._xhr.onload=function(){return r.xmlLoadComplete(t)},this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send());break;case"audio":if(this.game.sound.usingWebAudio){if(e.data=this._xhr.response,this.game.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode){var o=this,s=e.key;this.game.cache.updateSound(s,"isDecoding",!0),this.game.sound.context.decodeAudioData(e.data,function(t){t&&(o.game.cache.decodedSound(s,t),o.game.sound.onSoundDecode.dispatch(s,o.game.cache.getSound(s)))})}}else e.data.removeEventListener("canplaythrough",i.GAMES[this.game.id].load.fileComplete),this.game.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=this._xhr.responseText,this.game.cache.addText(e.key,e.url,e.data);break;case"physics":var a=JSON.parse(this._xhr.responseText);this.game.cache.addPhysicsData(e.key,e.url,a,e.format);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=this._xhr.responseText,document.head.appendChild(e.data),e.callback&&(e.data=e.callback.call(e.callbackContext,e.key,this._xhr.responseText));break;case"binary":e.data=e.callback?e.callback.call(e.callbackContext,e.key,this._xhr.response):this._xhr.response,this.game.cache.addBinary(e.key,e.data)}n&&this.nextFile(t,!0)},jsonLoadComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader jsonLoadComplete invalid index "+t);var e=this._fileList[t],i=JSON.parse(this._xhr.responseText);e.loaded=!0,"tilemap"===e.type?this.game.cache.addTilemap(e.key,e.url,i,e.format):"json"===e.type?this.game.cache.addJSON(e.key,e.url,i):this.game.cache.addTextureAtlas(e.key,e.url,e.data,i,e.format),this.nextFile(t,!0)},csvLoadComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader csvLoadComplete invalid index "+t);var e=this._fileList[t],i=this._xhr.responseText;e.loaded=!0,this.game.cache.addTilemap(e.key,e.url,i,e.format),this.nextFile(t,!0)},dataLoadError:function(t){var e=this._fileList[t];e.loaded=!0,e.error=!0,console.warn("Phaser.Loader dataLoadError: "+e.key),this.nextFile(t,!0)},xmlLoadComplete:function(t){var e,i=this._xhr.responseText;try{if(window.DOMParser){var n=new DOMParser;e=n.parseFromString(i,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(i)}catch(r){e=void 0}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid XML given");var o=this._fileList[t];o.loaded=!0,"bitmapfont"==o.type?this.game.cache.addBitmapFont(o.key,o.url,o.data,e,o.xSpacing,o.ySpacing):"textureatlas"==o.type&&this.game.cache.addTextureAtlas(o.key,o.url,o.data,e,o.format),this.nextFile(t,!0)},nextFile:function(t,e){this.progressFloat+=this._progressChunk,this.progress=Math.round(this.progressFloat),this.progress>100&&(this.progress=100),null!==this.preloadSprite&&(0===this.preloadSprite.direction?(this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress),this.preloadSprite.sprite.crop(this.preloadSprite.rect)):(this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite.crop(this.preloadSprite.rect))),this.onFileComplete.dispatch(this.progress,this._fileList[t].key,e,this.totalLoadedFiles(),this._fileList.length),this.totalQueuedFiles()>0?(this._fileIndex++,this.loadFile()):(this.hasLoaded=!0,this.isLoading=!1,this.removeAll(),this.onLoadComplete.dispatch())},totalLoadedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded&&t++;return t},totalQueuedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded===!1&&t++;return t}},i.Loader.prototype.constructor=i.Loader,i.LoaderParser={bitmapFont:function(t,e,i,n,r){var o={},s=e.getElementsByTagName("info")[0],a=e.getElementsByTagName("common")[0];o.font=s.getAttribute("face"),o.size=parseInt(s.getAttribute("size"),10),o.lineHeight=parseInt(a.getAttribute("lineHeight"),10)+r,o.chars={};for(var l=e.getElementsByTagName("char"),u=PIXI.TextureCache[i],h=0;h<l.length;h++){var c=parseInt(l[h].getAttribute("id"),10),d=new PIXI.Rectangle(parseInt(l[h].getAttribute("x"),10),parseInt(l[h].getAttribute("y"),10),parseInt(l[h].getAttribute("width"),10),parseInt(l[h].getAttribute("height"),10));o.chars[c]={xOffset:parseInt(l[h].getAttribute("xoffset"),10),yOffset:parseInt(l[h].getAttribute("yoffset"),10),xAdvance:parseInt(l[h].getAttribute("xadvance"),10)+n,kerning:{},texture:PIXI.TextureCache[i]=new PIXI.Texture(u,d)}}var p=e.getElementsByTagName("kerning");for(h=0;h<p.length;h++){var f=parseInt(p[h].getAttribute("first"),10),m=parseInt(p[h].getAttribute("second"),10),g=parseInt(p[h].getAttribute("amount"),10);o.chars[m].kerning[f]=g}PIXI.BitmapText.fonts[i]=o}},i.Sound=function(t,e,n,r,o){"undefined"==typeof n&&(n=1),"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=t.sound.connectToMaster),this.game=t,this.name=e,this.key=e,this.loop=r,this.volume=n,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.pendingPlayback=!1,this.override=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,this.gainNode="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.gainNode.gain.value=n*this.game.sound.volume,o&&this.gainNode.connect(this.masterGainNode)):this.game.cache.getSound(e)&&this.game.cache.isSoundReady(e)?(this._sound=this.game.cache.getSoundData(e),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this),this.onDecoded=new i.Signal,this.onPlay=new i.Signal,this.onPause=new i.Signal,this.onResume=new i.Signal,this.onLoop=new i.Signal,this.onStop=new i.Signal,this.onMute=new i.Signal,this.onMarkerComplete=new i.Signal,this._volume=n,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempLoop=0,this._paused=!1},i.Sound.prototype={soundHasUnlocked:function(t){t==this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(t,e,i,n,r){"undefined"==typeof n&&(n=1),"undefined"==typeof r&&(r=!1),this.markers[t]={name:t,start:e,stop:e+i,volume:n,duration:i,durationMS:1e3*i,loop:r}},removeMarker:function(t){delete this.markers[t]},update:function(){this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.now-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.now):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):this.stop():this.loop?(this.onLoop.dispatch(this),this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))},play:function(t,e,i,n,r){if("undefined"==typeof t&&(t=""),"undefined"==typeof r&&(r=!0),this.isPlaying===!0&&r===!1&&this.override===!1)return this;if(this.isPlaying&&this.override&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.currentMarker=t,""!==t){if(!this.markers[t])return console.warn("Phaser.Sound.play: audio marker "+t+" doesn't exist"),this;this.position=this.markers[t].start,this.volume=this.markers[t].volume,this.loop=this.markers[t].loop,this.duration=this.markers[t].duration,this.durationMS=this.markers[t].durationMS,"undefined"!=typeof i&&(this.volume=i),"undefined"!=typeof n&&(this.loop=n),this._tempMarker=t,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else e=e||0,"undefined"==typeof i&&(i=this._volume),"undefined"==typeof n&&(n=this.loop),this.position=e,this.volume=i,this.loop=n,this.duration=0,this.durationMS=0,this._tempMarker=t,this._tempPosition=e,this._tempVolume=i,this._tempLoop=n;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(null==this._buffer&&(this._buffer=this.game.cache.getSoundData(this.key)),this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.externalNode?this.externalNode.input:this.gainNode),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this.loop&&""===t&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._sound.volume=this._muted?0:this._volume,this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this},restart:function(t,e,i,n){t=t||"",e=e||0,i=i||1,"undefined"==typeof n&&(n=!1),this.play(t,e,i,n,!0)},pause:function(){this.isPlaying&&this._sound&&(this.stop(),this.isPlaying=!1,this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.now,this.onPause.dispatch(this))},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var t=this.position+this.pausedPosition/1e3;this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.externalNode?this.externalNode.input:this.gainNode),this.loop&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,t,this.duration):this._sound.start(0,t,this.duration)}else this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.now-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio)if("undefined"==typeof this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(t){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1;var e=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",this.onStop.dispatch(this,e)},destroy:function(t){"undefined"==typeof t&&(t=!0),this.stop(),t&&this.game.sound.remove(this),this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose()}},i.Sound.prototype.constructor=i.Sound,Object.defineProperty(i.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(i.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(i.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(t){t=t||null,t?(this._muted=!0,this.usingWebAudio?(this._muteVolume=this.gainNode.gain.value,this.gainNode.gain.value=0):this.usingAudioTag&&this._sound&&(this._muteVolume=this._sound.volume,this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this)}}),Object.defineProperty(i.Sound.prototype,"volume",{get:function(){return this._volume},set:function(t){this.usingWebAudio?(this._volume=t,this.gainNode.gain.value=t):this.usingAudioTag&&this._sound&&t>=0&&1>=t&&(this._volume=t,this._sound.volume=t)}}),i.SoundManager=function(t){this.game=t,this.onSoundDecode=new i.Signal,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this.context=null,this.usingWebAudio=!0,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32},i.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&this.game.device.webAudio===!1&&(this.channels=1),this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?(this.game.input.touch.callbackContext=this,this.game.input.touch.touchStartCallback=this.unlock,this.game.input.mouse.callbackContext=this,this.game.input.mouse.mouseDownCallback=this.unlock,this.touchLocked=!0):this.touchLocked=!1,window.PhaserGlobal){if(window.PhaserGlobal.disableAudio===!0)return this.usingWebAudio=!1,void(this.noAudio=!0);if(window.PhaserGlobal.disableWebAudio===!0)return this.usingWebAudio=!1,this.usingAudioTag=!0,void(this.noAudio=!1)}if(window.AudioContext)try{this.context=new window.AudioContext}catch(t){this.context=null,this.usingWebAudio=!1,this.noAudio=!0}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(t){this.context=null,this.usingWebAudio=!1,this.noAudio=!0}window.Audio&&null===this.context&&(this.usingWebAudio=!1,this.usingAudioTag=!0,this.noAudio=!1),null!==this.context&&(this.masterGain="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination))},unlock:function(){if(this.touchLocked!==!1)if(this.game.device.webAudio===!1||window.PhaserGlobal&&window.PhaserGlobal.disableWebAudio===!0)this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null,this.game.input.mouse.callbackContext=null,this.game.input.mouse.mouseDownCallback=null;else{var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),this._unlockSource.noteOn(0)}},stopAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].stop()},pauseAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].pause()},resumeAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].resume()},decode:function(t,e){e=e||null;var i=this.game.cache.getSoundData(t);if(i&&this.game.cache.isSoundDecoded(t)===!1){this.game.cache.updateSound(t,"isDecoding",!0);var n=this;this.context.decodeAudioData(i,function(i){n.game.cache.decodedSound(t,i),e&&n.onSoundDecode.dispatch(t,e)})}},update:function(){this.touchLocked&&this.game.device.webAudio&&null!==this._unlockSource&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)&&(this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null);for(var t=0;t<this._sounds.length;t++)this._sounds[t].update()},add:function(t,e,n,r){"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=this.connectToMaster);var o=new i.Sound(this.game,t,e,n,r);return this._sounds.push(o),o},remove:function(t){for(var e=this._sounds.length;e--;)if(this._sounds[e]===t)return this._sounds[e].destroy(!1),this._sounds.splice(e,1),!0;return!1},removeByKey:function(t){for(var e=this._sounds.length,i=0;e--;)this._sounds[e].key===t&&(this._sounds[e].destroy(!1),this._sounds.splice(e,1),i++);return i},play:function(t,e,i){var n=this.add(t,e,i);return n.play(),n},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!0)}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!1)}}},i.SoundManager.prototype.constructor=i.SoundManager,Object.defineProperty(i.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(t){if(t=t||null){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(i.SoundManager.prototype,"volume",{get:function(){return this.usingWebAudio?this.masterGain.gain.value:this._volume},set:function(t){if(this._volume=t,this.usingWebAudio)this.masterGain.gain.value=t;else for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].volume=this._sounds[e].volume*t)}}),i.Utils.Debug=function(t){this.game=t,this.sprite=null,this.canvas=null,this.baseTexture=null,this.texture=null,this.textureFrame=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1},i.Utils.Debug.prototype={boot:function(){this.game.renderType===i.CANVAS?this.context=this.game.context:(this.canvas=i.Canvas.create(this.game.width,this.game.height,"",!0),this.context=this.canvas.getContext("2d"),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new i.Frame(0,0,0,this.game.width,this.game.height,"debug",this.game.rnd.uuid()),this.sprite=this.game.make.image(0,0,this.texture,this.textureFrame),this.game.stage.addChild(this.sprite))},preUpdate:function(){this.dirty&&this.sprite&&(this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},start:function(t,e,i,n){"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0),i=i||"rgb(255,255,255)","undefined"==typeof n&&(n=0),this.currentX=t,this.currentY=e,this.currentColor=i,this.currentAlpha=this.context.globalAlpha,this.columnWidth=n,this.sprite&&(this.dirty=!0),this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=i,this.context.fillStyle=i,this.context.font=this.font,this.context.globalAlpha=1},stop:function(){this.context.restore(),this.context.globalAlpha=this.currentAlpha,this.sprite&&PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl)},line:function(){for(var t=this.currentX,e=0;e<arguments.length;e++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[e],t+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[e],t,this.currentY),t+=this.columnWidth;this.currentY+=this.lineHeight},soundInfo:function(t,e,i,n){this.start(e,i,n),this.line("Sound: "+t.key+" Locked: "+t.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(t.key)+" Pending Playback: "+t.pendingPlayback),this.line("Decoded: "+t.isDecoded+" Decoding: "+t.isDecoding),this.line("Total Duration: "+t.totalDuration+" Playing: "+t.isPlaying),this.line("Time: "+t.currentTime),this.line("Volume: "+t.volume+" Muted: "+t.mute),this.line("WebAudio: "+t.usingWebAudio+" Audio: "+t.usingAudioTag),""!==t.currentMarker&&(this.line("Marker: "+t.currentMarker+" Duration: "+t.duration+" (ms: "+t.durationMS+")"),this.line("Start: "+t.markers[t.currentMarker].start+" Stop: "+t.markers[t.currentMarker].stop),this.line("Position: "+t.position)),this.stop()},cameraInfo:function(t,e,i,n){this.start(e,i,n),this.line("Camera ("+t.width+" x "+t.height+")"),this.line("X: "+t.x+" Y: "+t.y),this.line("Bounds x: "+t.bounds.x+" Y: "+t.bounds.y+" w: "+t.bounds.width+" h: "+t.bounds.height),this.line("View x: "+t.view.x+" Y: "+t.view.y+" w: "+t.view.width+" h: "+t.view.height),this.stop()},timer:function(t,e,i,n){this.start(e,i,n),this.line("Timer (running: "+t.running+" expired: "+t.expired+")"),this.line("Next Tick: "+t.next+" Duration: "+t.duration),this.line("Paused: "+t.paused+" Length: "+t.length),this.stop()},pointer:function(t,e,i,n,r){null!=t&&("undefined"==typeof e&&(e=!1),i=i||"rgba(0,255,0,0.5)",n=n||"rgba(255,0,0,0.5)",(e!==!0||t.isUp!==!0)&&(this.start(t.x,t.y-100,r),this.context.beginPath(),this.context.arc(t.x,t.y,t.circle.radius,0,2*Math.PI),this.context.fillStyle=t.active?i:n,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(t.positionDown.x,t.positionDown.y),this.context.lineTo(t.position.x,t.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+t.id+" Active: "+t.active),this.line("World X: "+t.worldX+" World Y: "+t.worldY),this.line("Screen X: "+t.x+" Screen Y: "+t.y),this.line("Duration: "+t.duration+" ms"),this.line("is Down: "+t.isDown+" is Up: "+t.isUp),this.stop()))},spriteInputInfo:function(t,e,i,n){this.start(e,i,n),this.line("Sprite Input: ("+t.width+" x "+t.height+")"),this.line("x: "+t.input.pointerX().toFixed(1)+" y: "+t.input.pointerY().toFixed(1)),this.line("over: "+t.input.pointerOver()+" duration: "+t.input.overDuration().toFixed(0)),this.line("down: "+t.input.pointerDown()+" duration: "+t.input.downDuration().toFixed(0)),this.line("just over: "+t.input.justOver()+" just out: "+t.input.justOut()),this.stop()},key:function(t,e,i,n){this.start(e,i,n,150),this.line("Key:",t.keyCode,"isDown:",t.isDown),this.line("justPressed:",t.justPressed(),"justReleased:",t.justReleased()),this.line("Time Down:",t.timeDown.toFixed(0),"duration:",t.duration.toFixed(0)),this.stop()
},inputInfo:function(t,e,i){this.start(t,e,i),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(t,e,i){var n=t.getBounds();n.x+=this.game.camera.x,n.y+=this.game.camera.y,this.rectangle(n,e,i)},spriteInfo:function(t,e,i,n){this.start(e,i,n),this.line("Sprite:  ("+t.width+" x "+t.height+") anchor: "+t.anchor.x+" x "+t.anchor.y),this.line("x: "+t.x.toFixed(1)+" y: "+t.y.toFixed(1)),this.line("angle: "+t.angle.toFixed(1)+" rotation: "+t.rotation.toFixed(1)),this.line("visible: "+t.visible+" in camera: "+t.inCamera),this.stop()},spriteCoords:function(t,e,i,n){this.start(e,i,n,100),t.name&&this.line(t.name),this.line("x:",t.x.toFixed(2),"y:",t.y.toFixed(2)),this.line("pos x:",t.position.x.toFixed(2),"pos y:",t.position.y.toFixed(2)),this.line("world x:",t.world.x.toFixed(2),"world y:",t.world.y.toFixed(2)),this.stop()},lineInfo:function(t,e,i,n){this.start(e,i,n,80),this.line("start.x:",t.start.x.toFixed(2),"start.y:",t.start.y.toFixed(2)),this.line("end.x:",t.end.x.toFixed(2),"end.y:",t.end.y.toFixed(2)),this.line("length:",t.length.toFixed(2),"angle:",t.angle),this.stop()},pixel:function(t,e,i,n){n=n||2,this.start(),this.context.fillStyle=i,this.context.fillRect(t,e,n,n),this.stop()},geom:function(t,e,n,r){"undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=0),e=e||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=e,this.context.strokeStyle=e,t instanceof i.Rectangle||1===r?n?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):t instanceof i.Circle||2===r?(this.context.beginPath(),this.context.arc(t.x-this.game.camera.x,t.y-this.game.camera.y,t.radius,0,2*Math.PI,!1),this.context.closePath(),n?this.context.fill():this.context.stroke()):t instanceof i.Point||3===r?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,4,4):(t instanceof i.Line||4===r)&&(this.context.lineWidth=1,this.context.beginPath(),this.context.moveTo(t.start.x+.5-this.game.camera.x,t.start.y+.5-this.game.camera.y),this.context.lineTo(t.end.x+.5-this.game.camera.x,t.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()),this.stop()},rectangle:function(t,e,i){"undefined"==typeof i&&(i=!0),e=e||"rgba(0, 255, 0, 0.4)",this.start(),i?(this.context.fillStyle=e,this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)):(this.context.strokeStyle=e,this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)),this.stop()},text:function(t,e,i,n,r){n=n||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(t,e+1,i+1)),this.context.fillStyle=n,this.context.fillText(t,e,i),this.stop()},quadTree:function(t,e){e=e||"rgba(255,0,0,0.3)",this.start();var i=t.bounds;if(0===t.nodes.length){this.context.strokeStyle=e,this.context.strokeRect(i.x,i.y,i.width,i.height),this.text("size: "+t.objects.length,i.x+4,i.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var n=0;n<t.objects.length;n++)this.context.strokeRect(t.objects[n].x,t.objects[n].y,t.objects[n].width,t.objects[n].height)}else for(var n=0;n<t.nodes.length;n++)this.quadTree(t.nodes[n]);this.stop()},body:function(t,e,n){t.body&&t.body.type===i.Physics.ARCADE&&(this.start(),i.Physics.Arcade.Body.render(this.context,t.body,e,n),this.stop())},bodyInfo:function(t,e,n,r){t.body&&t.body.type===i.Physics.ARCADE&&(this.start(e,n,r,210),i.Physics.Arcade.Body.renderBodyInfo(this,t.body),this.stop())}},i.Utils.Debug.prototype.constructor=i.Utils.Debug,i.Color={packPixel:function(t,e,n,r){return i.Device.LITTLE_ENDIAN?r<<24|n<<16|e<<8|t:t<<24|e<<16|n<<8|r},unpackPixel:function(t,e,n,r){return("undefined"==typeof e||null===e)&&(e=i.Color.createColor()),("undefined"==typeof n||null===n)&&(n=!1),("undefined"==typeof r||null===r)&&(r=!1),i.Device.LITTLE_ENDIAN?(e.a=(4278190080&t)>>>24,e.b=(16711680&t)>>>16,e.g=(65280&t)>>>8,e.r=255&t):(e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t),e.color=t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a/255+")",n&&i.Color.RGBtoHSL(e.r,e.g,e.b,e),r&&i.Color.RGBtoHSV(e.r,e.g,e.b,e),e},fromRGBA:function(t,e){return e||(e=i.Color.createColor()),e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",e},toRGBA:function(t,e,i,n){return t<<24|e<<16|i<<8|n},RGBtoHSL:function(t,e,n,r){r||(r=i.Color.createColor(t,e,n,1)),t/=255,e/=255,n/=255;var o=Math.min(t,e,n),s=Math.max(t,e,n);if(r.h=0,r.s=0,r.l=(s+o)/2,s!==o){var a=s-o;r.s=r.l>.5?a/(2-s-o):a/(s+o),s===t?r.h=(e-n)/a+(n>e?6:0):s===e?r.h=(n-t)/a+2:s===n&&(r.h=(t-e)/a+4),r.h/=6}return r},HSLtoRGB:function(t,e,n,r){if(r?(r.r=n,r.g=n,r.b=n):r=i.Color.createColor(n,n,n),0!==e){var o=.5>n?n*(1+e):n+e-n*e,s=2*n-o;r.r=i.Color.hueToColor(s,o,t+1/3),r.g=i.Color.hueToColor(s,o,t),r.b=i.Color.hueToColor(s,o,t-1/3)}return r.r=Math.floor(255*r.r|0),r.g=Math.floor(255*r.g|0),r.b=Math.floor(255*r.b|0),i.Color.updateColor(r),r},RGBtoHSV:function(t,e,n,r){r||(r=i.Color.createColor(t,e,n,255)),t/=255,e/=255,n/=255;var o=Math.min(t,e,n),s=Math.max(t,e,n),a=s-o;return r.h=0,r.s=0===s?0:a/s,r.v=s,s!==o&&(s===t?r.h=(e-n)/a+(n>e?6:0):s===e?r.h=(n-t)/a+2:s===n&&(r.h=(t-e)/a+4),r.h/=6),r},HSVtoRGB:function(t,e,n,r){"undefined"==typeof r&&(r=i.Color.createColor(0,0,0,1,t,e,0,n));var o,s,a,l=Math.floor(6*t),u=6*t-l,h=n*(1-e),c=n*(1-u*e),d=n*(1-(1-u)*e);switch(l%6){case 0:o=n,s=d,a=h;break;case 1:o=c,s=n,a=h;break;case 2:o=h,s=n,a=d;break;case 3:o=h,s=c,a=n;break;case 4:o=d,s=h,a=n;break;case 5:o=n,s=h,a=c}return r.r=Math.floor(255*o),r.g=Math.floor(255*s),r.b=Math.floor(255*a),i.Color.updateColor(r),r},hueToColor:function(t,e,i){return 0>i&&(i+=1),i>1&&(i-=1),1/6>i?t+6*(e-t)*i:.5>i?e:2/3>i?t+(e-t)*(2/3-i)*6:t},createColor:function(t,e,i,n,r,o,s,a){var l={r:t||0,g:e||0,b:i||0,a:n||1,h:r||0,s:o||0,l:s||0,v:a||0,color:0};return l.rgba="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",l},updateColor:function(t){return t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a+")",t},getColor32:function(t,e,i,n){return t<<24|e<<16|i<<8|n},getColor:function(t,e,i){return t<<16|e<<8|i},RGBtoString:function(t,e,n,r,o){return"undefined"==typeof r&&(r=255),"undefined"==typeof o&&(o="#"),"#"===o?"#"+((1<<24)+(t<<16)+(e<<8)+n).toString(16).slice(1):"0x"+i.Color.componentToHex(r)+i.Color.componentToHex(t)+i.Color.componentToHex(e)+i.Color.componentToHex(n)},hexToRGB:function(t){var e=i.Color.hexToColor(t);return e?i.Color.getColor32(e.a,e.r,e.g,e.b):void 0},hexToColor:function(t,e){e||(e=i.Color.createColor());var n=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(n,function(t,e,i,n){return e+e+i+i+n+n});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r&&(e.r=parseInt(r[1],16),e.g=parseInt(r[2],16),e.b=parseInt(r[3],16)),e},componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},HSVColorWheel:function(t,e){"undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1);for(var n=[],r=0;359>=r;r++)n.push(i.Color.HSVtoRGB(r/359,t,e));return n},HSLColorWheel:function(t,e){"undefined"==typeof t&&(t=.5),"undefined"==typeof e&&(e=.5);for(var n=[],r=0;359>=r;r++)n.push(i.Color.HSLtoRGB(r/359,t,e));return n},interpolateColor:function(t,e,n,r,o){"undefined"==typeof o&&(o=255);var s=i.Color.getRGB(t),a=i.Color.getRGB(e),l=(a.red-s.red)*r/n+s.red,u=(a.green-s.green)*r/n+s.green,h=(a.blue-s.blue)*r/n+s.blue;return i.Color.getColor32(o,l,u,h)},interpolateColorWithRGB:function(t,e,n,r,o,s){var a=i.Color.getRGB(t),l=(e-a.red)*s/o+a.red,u=(n-a.green)*s/o+a.green,h=(r-a.blue)*s/o+a.blue;return i.Color.getColor(l,u,h)},interpolateRGB:function(t,e,n,r,o,s,a,l){var u=(r-t)*l/a+t,h=(o-e)*l/a+e,c=(s-n)*l/a+n;return i.Color.getColor(u,h,c)},getRandomColor:function(t,e,n){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=255),"undefined"==typeof n&&(n=255),e>255||t>e)return i.Color.getColor(255,255,255);var r=t+Math.round(Math.random()*(e-t)),o=t+Math.round(Math.random()*(e-t)),s=t+Math.round(Math.random()*(e-t));return i.Color.getColor32(n,r,o,s)},getRGB:function(t){return t>16777215?{alpha:t>>>24,red:t>>16&255,green:t>>8&255,blue:255&t,a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{alpha:255,red:t>>16&255,green:t>>8&255,blue:255&t,a:255,r:t>>16&255,g:t>>8&255,b:255&t}},getWebRGB:function(t){var e=i.Color.getRGB(t);return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+e.a.toString()+")"},getAlpha:function(t){return t>>>24},getAlphaFloat:function(t){return(t>>>24)/255},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return 255&t},getColorInfo:function(t){var e=i.Color.getRGB(t),n=i.Color.RGBtoHexstring(t)+"\n";return n=n.concat("Alpha: "+e.alpha+" Red: "+e.red+" Green: "+e.green+" Blue: "+e.blue)+"\n"},RGBtoHexstring:function(t){var e=i.Color.getRGB(t);return"0x"+i.Color.colorToHexstring(e.alpha)+i.Color.colorToHexstring(e.red)+i.Color.colorToHexstring(e.green)+i.Color.colorToHexstring(e.blue)},RGBtoWebstring:function(t){var e=i.Color.getRGB(t);return"#"+i.Color.colorToHexstring(e.red)+i.Color.colorToHexstring(e.green)+i.Color.colorToHexstring(e.blue)},colorToHexstring:function(t){var e="0123456789ABCDEF",i=t%16,n=(t-i)/16,r=e.charAt(n)+e.charAt(i);return r}},i.Physics=function(t,e){e=e||{},this.game=t,this.config=e,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.parseConfig()},i.Physics.ARCADE=0,i.Physics.P2JS=1,i.Physics.NINJA=2,i.Physics.BOX2D=3,i.Physics.CHIPMUNK=5,i.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&this.config.arcade!==!0||!i.Physics.hasOwnProperty("Arcade")||(this.arcade=new i.Physics.Arcade(this.game),this.game.time.deltaCap=.2),this.config.hasOwnProperty("ninja")&&this.config.ninja===!0&&i.Physics.hasOwnProperty("Ninja")&&(this.ninja=new i.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&this.config.p2===!0&&i.Physics.hasOwnProperty("P2")&&(this.p2=new i.Physics.P2(this.game,this.config))},startSystem:function(t){if(t===i.Physics.ARCADE?this.arcade=new i.Physics.Arcade(this.game):t===i.Physics.P2JS&&(this.p2=new i.Physics.P2(this.game,this.config)),t===i.Physics.NINJA)this.ninja=new i.Physics.Ninja(this.game);else{if(t===i.Physics.BOX2D&&null===this.box2d)throw new Error("The Box2D physics system has not been implemented yet.");if(t===i.Physics.CHIPMUNK&&null===this.chipmunk)throw new Error("The Chipmunk physics system has not been implemented yet.")}},enable:function(t,e,n){"undefined"==typeof e&&(e=i.Physics.ARCADE),"undefined"==typeof n&&(n=!1),e===i.Physics.ARCADE?this.arcade.enable(t):e===i.Physics.P2JS&&this.p2?this.p2.enable(t,n):e===i.Physics.NINJA&&this.ninja&&this.ninja.enableAABB(t)},preUpdate:function(){this.p2&&this.p2.preUpdate()},update:function(){this.p2&&this.p2.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear()},destroy:function(){this.p2&&this.p2.destroy(),this.arcade=null,this.ninja=null,this.p2=null}},i.Physics.prototype.constructor=i.Physics,i.Physics.Arcade=function(t){this.game=t,this.gravity=new i.Point,this.bounds=new i.Rectangle(0,0,t.world.width,t.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.TILE_BIAS=16,this.forceX=!1,this.quadTree=new i.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._overlap=0,this._maxOverlap=0,this._velocity1=0,this._velocity2=0,this._newVelocity1=0,this._newVelocity2=0,this._average=0,this._mapData=[],this._result=!1,this._total=0,this._angle=0,this._dx=0,this._dy=0},i.Physics.Arcade.prototype.constructor=i.Physics.Arcade,i.Physics.Arcade.prototype={setBounds:function(t,e,i,n){this.bounds.setTo(t,e,i,n)},setBoundsToWorld:function(){this.bounds.setTo(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height)},enable:function(t,e){"undefined"==typeof e&&(e=!0);var n=1;if(Array.isArray(t))for(n=t.length;n--;)t[n]instanceof i.Group?this.enable(t[n].children,e):(this.enableBody(t[n]),e&&t[n].hasOwnProperty("children")&&t[n].children.length>0&&this.enable(t[n],!0));else t instanceof i.Group?this.enable(t.children,e):(this.enableBody(t),e&&t.hasOwnProperty("children")&&t.children.length>0&&this.enable(t.children,!0))},enableBody:function(t){t.hasOwnProperty("body")&&null===t.body&&(t.body=new i.Physics.Arcade.Body(t))},updateMotion:function(t){this._velocityDelta=this.computeVelocity(0,t,t.angularVelocity,t.angularAcceleration,t.angularDrag,t.maxAngular)-t.angularVelocity,t.angularVelocity+=this._velocityDelta,t.rotation+=t.angularVelocity*this.game.time.physicsElapsed,t.velocity.x=this.computeVelocity(1,t,t.velocity.x,t.acceleration.x,t.drag.x,t.maxVelocity.x),t.velocity.y=this.computeVelocity(2,t,t.velocity.y,t.acceleration.y,t.drag.y,t.maxVelocity.y)},computeVelocity:function(t,e,i,n,r,o){return o=o||1e4,1==t&&e.allowGravity?i+=(this.gravity.x+e.gravity.x)*this.game.time.physicsElapsed:2==t&&e.allowGravity&&(i+=(this.gravity.y+e.gravity.y)*this.game.time.physicsElapsed),n?i+=n*this.game.time.physicsElapsed:r&&(this._drag=r*this.game.time.physicsElapsed,i-this._drag>0?i-=this._drag:i+this._drag<0?i+=this._drag:i=0),i>o?i=o:-o>i&&(i=-o),i},overlap:function(t,e,i,n,r){if(i=i||null,n=n||null,r=r||i,this._result=!1,this._total=0,Array.isArray(e))for(var o=0,s=e.length;s>o;o++)this.collideHandler(t,e[o],i,n,r,!0);else this.collideHandler(t,e,i,n,r,!0);return this._total>0},collide:function(t,e,i,n,r){if(i=i||null,n=n||null,r=r||i,this._result=!1,this._total=0,Array.isArray(e))for(var o=0,s=e.length;s>o;o++)this.collideHandler(t,e[o],i,n,r,!1);else this.collideHandler(t,e,i,n,r,!1);return this._total>0},collideHandler:function(t,e,n,r,o,s){return"undefined"!=typeof e||t.type!==i.GROUP&&t.type!==i.EMITTER?void(t&&e&&t.exists&&e.exists&&(t.type==i.SPRITE||t.type==i.TILESPRITE?e.type==i.SPRITE||e.type==i.TILESPRITE?this.collideSpriteVsSprite(t,e,n,r,o,s):e.type==i.GROUP||e.type==i.EMITTER?this.collideSpriteVsGroup(t,e,n,r,o,s):e.type==i.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(t,e,n,r,o):t.type==i.GROUP?e.type==i.SPRITE||e.type==i.TILESPRITE?this.collideSpriteVsGroup(e,t,n,r,o,s):e.type==i.GROUP||e.type==i.EMITTER?this.collideGroupVsGroup(t,e,n,r,o,s):e.type==i.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,n,r,o):t.type==i.TILEMAPLAYER?e.type==i.SPRITE||e.type==i.TILESPRITE?this.collideSpriteVsTilemapLayer(e,t,n,r,o):(e.type==i.GROUP||e.type==i.EMITTER)&&this.collideGroupVsTilemapLayer(e,t,n,r,o):t.type==i.EMITTER&&(e.type==i.SPRITE||e.type==i.TILESPRITE?this.collideSpriteVsGroup(e,t,n,r,o,s):e.type==i.GROUP||e.type==i.EMITTER?this.collideGroupVsGroup(t,e,n,r,o,s):e.type==i.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,n,r,o)))):void this.collideGroupVsSelf(t,n,r,o,s)},collideSpriteVsSprite:function(t,e,i,n,r,o){return t.body&&e.body?(this.separate(t.body,e.body,n,r,o)&&(i&&i.call(r,t,e),this._total++),!0):!1},collideSpriteVsGroup:function(t,e,i,n,r,o){if(0!==e.length&&t.body){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(e),this._potentials=this.quadTree.retrieve(t);for(var s=0,a=this._potentials.length;a>s;s++)this.separate(t.body,this._potentials[s],n,r,o)&&(i&&i.call(r,t,this._potentials[s].sprite),this._total++)}},collideGroupVsSelf:function(t,e,i,n,r){if(0!==t.length)for(var o=t.children.length,s=0;o>s;s++)for(var a=s+1;o>=a;a++)t.children[s]&&t.children[a]&&t.children[s].exists&&t.children[a].exists&&this.collideSpriteVsSprite(t.children[s],t.children[a],e,i,n,r)},collideGroupVsGroup:function(t,e,i,n,r,o){if(0!==t.length&&0!==e.length)for(var s=0,a=t.children.length;a>s;s++)t.children[s].exists&&this.collideSpriteVsGroup(t.children[s],e,i,n,r,o)},collideSpriteVsTilemapLayer:function(t,e,i,n,r){if(t.body&&(this._mapData=e.getTiles(t.body.position.x-t.body.tilePadding.x,t.body.position.y-t.body.tilePadding.y,t.body.width+t.body.tilePadding.x,t.body.height+t.body.tilePadding.y,!1,!1),0!==this._mapData.length))for(var o=0;o<this._mapData.length;o++)this.separateTile(o,t.body,this._mapData[o])&&(n?n.call(r,t,this._mapData[o])&&(this._total++,i&&i.call(r,t,this._mapData[o])):(this._total++,i&&i.call(r,t,this._mapData[o])))},collideGroupVsTilemapLayer:function(t,e,i,n,r){if(0!==t.length)for(var o=0,s=t.children.length;s>o;o++)t.children[o].exists&&this.collideSpriteVsTilemapLayer(t.children[o],e,i,n,r)},separate:function(t,e,i,n,r){return this.intersects(t,e)?i&&i.call(n,t.sprite,e.sprite)===!1?!1:r?!0:(this._result=this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?this.separateX(t,e,r)||this.separateY(t,e,r):this.separateY(t,e,r)||this.separateX(t,e,r),this._result):!1},intersects:function(t,e){return t.right<=e.position.x?!1:t.bottom<=e.position.y?!1:t.position.x>=e.right?!1:t.position.y>=e.bottom?!1:!0},separateX:function(t,e,i){return t.immovable&&e.immovable?!1:(this._overlap=0,this.intersects(t,e)&&(this._maxOverlap=t.deltaAbsX()+e.deltaAbsX()+this.OVERLAP_BIAS,0===t.deltaX()&&0===e.deltaX()?(t.embedded=!0,e.embedded=!0):t.deltaX()>e.deltaX()?(this._overlap=t.right-e.x,this._overlap>this._maxOverlap||t.checkCollision.right===!1||e.checkCollision.left===!1?this._overlap=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0)):t.deltaX()<e.deltaX()&&(this._overlap=t.x-e.width-e.x,-this._overlap>this._maxOverlap||t.checkCollision.left===!1||e.checkCollision.right===!1?this._overlap=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0)),0!==this._overlap)?(t.overlapX=this._overlap,e.overlapX=this._overlap,i||t.customSeparateX||e.customSeparateX?!0:(this._velocity1=t.velocity.x,this._velocity2=e.velocity.x,t.immovable||e.immovable?t.immovable?e.immovable||(e.x+=this._overlap,e.velocity.x=this._velocity1-this._velocity2*e.bounce.x):(t.x=t.x-this._overlap,t.velocity.x=this._velocity2-this._velocity1*t.bounce.x):(this._overlap*=.5,t.x=t.x-this._overlap,e.x+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.x=this._average+this._newVelocity1*t.bounce.x,e.velocity.x=this._average+this._newVelocity2*e.bounce.x),!0)):!1)},separateY:function(t,e,i){return t.immovable&&e.immovable?!1:(this._overlap=0,this.intersects(t,e)&&(this._maxOverlap=t.deltaAbsY()+e.deltaAbsY()+this.OVERLAP_BIAS,0===t.deltaY()&&0===e.deltaY()?(t.embedded=!0,e.embedded=!0):t.deltaY()>e.deltaY()?(this._overlap=t.bottom-e.y,this._overlap>this._maxOverlap||t.checkCollision.down===!1||e.checkCollision.up===!1?this._overlap=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0)):t.deltaY()<e.deltaY()&&(this._overlap=t.y-e.bottom,-this._overlap>this._maxOverlap||t.checkCollision.up===!1||e.checkCollision.down===!1?this._overlap=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0)),0!==this._overlap)?(t.overlapY=this._overlap,e.overlapY=this._overlap,i||t.customSeparateY||e.customSeparateY?!0:(this._velocity1=t.velocity.y,this._velocity2=e.velocity.y,t.immovable||e.immovable?t.immovable?e.immovable||(e.y+=this._overlap,e.velocity.y=this._velocity1-this._velocity2*e.bounce.y,t.moves&&(e.x+=t.x-t.prev.x)):(t.y=t.y-this._overlap,t.velocity.y=this._velocity2-this._velocity1*t.bounce.y,e.moves&&(t.x+=e.x-e.prev.x)):(this._overlap*=.5,t.y=t.y-this._overlap,e.y+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.y=this._average+this._newVelocity1*t.bounce.y,e.velocity.y=this._average+this._newVelocity2*e.bounce.y),!0)):!1)},separateTile:function(t,e,i){if(!i.intersects(e.position.x,e.position.y,e.right,e.bottom))return!1;if(i.collisionCallback&&!i.collisionCallback.call(i.collisionCallbackContext,e.sprite,i))return!1;if(i.layer.callbacks[i.index]&&!i.layer.callbacks[i.index].callback.call(i.layer.callbacks[i.index].callbackContext,e.sprite,i))return!1;if(!(i.faceLeft||i.faceRight||i.faceTop||i.faceBottom))return!1;var n=0,r=0,o=0,s=1;if(e.deltaAbsX()>e.deltaAbsY()?o=-1:e.deltaAbsX()<e.deltaAbsY()&&(s=-1),0!==e.deltaX()&&0!==e.deltaY()&&(i.faceLeft||i.faceRight)&&(i.faceTop||i.faceBottom)&&(o=Math.min(Math.abs(e.position.x-i.right),Math.abs(e.right-i.left)),s=Math.min(Math.abs(e.position.y-i.bottom),Math.abs(e.bottom-i.top))),s>o){if((i.faceLeft||i.faceRight)&&(n=this.tileCheckX(e,i),0!==n&&!i.intersects(e.position.x,e.position.y,e.right,e.bottom)))return!0;(i.faceTop||i.faceBottom)&&(r=this.tileCheckY(e,i))}else{if((i.faceTop||i.faceBottom)&&(r=this.tileCheckY(e,i),0!==r&&!i.intersects(e.position.x,e.position.y,e.right,e.bottom)))return!0;(i.faceLeft||i.faceRight)&&(n=this.tileCheckX(e,i))}return 0!==n||0!==r},tileCheckX:function(t,e){var i=0;return t.deltaX()<0&&!t.blocked.left&&e.collideRight&&t.checkCollision.left?e.faceRight&&t.x<e.right&&(i=t.x-e.right,i<-this.TILE_BIAS&&(i=0)):t.deltaX()>0&&!t.blocked.right&&e.collideLeft&&t.checkCollision.right&&e.faceLeft&&t.right>e.left&&(i=t.right-e.left,i>this.TILE_BIAS&&(i=0)),0!==i&&this.processTileSeparationX(t,i),i},tileCheckY:function(t,e){var i=0;return t.deltaY()<0&&!t.blocked.up&&e.collideDown&&t.checkCollision.up?e.faceBottom&&t.y<e.bottom&&(i=t.y-e.bottom,i<-this.TILE_BIAS&&(i=0)):t.deltaY()>0&&!t.blocked.down&&e.collideUp&&t.checkCollision.down&&e.faceTop&&t.bottom>e.top&&(i=t.bottom-e.top,i>this.TILE_BIAS&&(i=0)),0!==i&&this.processTileSeparationY(t,i),i},processTileSeparationX:function(t,e){0>e?t.blocked.left=!0:e>0&&(t.blocked.right=!0),t.position.x-=e,t.velocity.x=0===t.bounce.x?0:-t.velocity.x*t.bounce.x},processTileSeparationY:function(t,e){0>e?t.blocked.up=!0:e>0&&(t.blocked.down=!0),t.position.y-=e,t.velocity.y=0===t.bounce.y?0:-t.velocity.y*t.bounce.y},getObjectsUnderPointer:function(t,e,n,r){if(0!==e.length&&t.exists){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(e);var o=new i.Rectangle(t.x,t.y,1,1),s=[];this._potentials=this.quadTree.retrieve(o);for(var a=0,l=this._potentials.length;l>a;a++)this._potentials[a].hitTest(t.x,t.y)&&(n&&n.call(r,t,this._potentials[a].sprite),s.push(this._potentials[a].sprite));return s}},moveToObject:function(t,e,i,n){return"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=0),this._angle=Math.atan2(e.y-t.y,e.x-t.x),n>0&&(i=this.distanceBetween(t,e)/(n/1e3)),t.body.velocity.x=Math.cos(this._angle)*i,t.body.velocity.y=Math.sin(this._angle)*i,this._angle},moveToPointer:function(t,e,i,n){return"undefined"==typeof e&&(e=60),i=i||this.game.input.activePointer,"undefined"==typeof n&&(n=0),this._angle=this.angleToPointer(t,i),n>0&&(e=this.distanceToPointer(t,i)/(n/1e3)),t.body.velocity.x=Math.cos(this._angle)*e,t.body.velocity.y=Math.sin(this._angle)*e,this._angle},moveToXY:function(t,e,i,n,r){return"undefined"==typeof n&&(n=60),"undefined"==typeof r&&(r=0),this._angle=Math.atan2(i-t.y,e-t.x),r>0&&(n=this.distanceToXY(t,e,i)/(r/1e3)),t.body.velocity.x=Math.cos(this._angle)*n,t.body.velocity.y=Math.sin(this._angle)*n,this._angle},velocityFromAngle:function(t,e,n){return"undefined"==typeof e&&(e=60),n=n||new i.Point,n.setTo(Math.cos(this.game.math.degToRad(t))*e,Math.sin(this.game.math.degToRad(t))*e)},velocityFromRotation:function(t,e,n){return"undefined"==typeof e&&(e=60),n=n||new i.Point,n.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerationFromRotation:function(t,e,n){return"undefined"==typeof e&&(e=60),n=n||new i.Point,n.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerateToObject:function(t,e,i,n,r){return"undefined"==typeof i&&(i=60),"undefined"==typeof n&&(n=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleBetween(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*i,Math.sin(this._angle)*i),t.body.maxVelocity.setTo(n,r),this._angle},accelerateToPointer:function(t,e,i,n,r){return"undefined"==typeof i&&(i=60),"undefined"==typeof e&&(e=this.game.input.activePointer),"undefined"==typeof n&&(n=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleToPointer(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*i,Math.sin(this._angle)*i),t.body.maxVelocity.setTo(n,r),this._angle},accelerateToXY:function(t,e,i,n,r,o){return"undefined"==typeof n&&(n=60),"undefined"==typeof r&&(r=1e3),"undefined"==typeof o&&(o=1e3),this._angle=this.angleToXY(t,e,i),t.body.acceleration.setTo(Math.cos(this._angle)*n,Math.sin(this._angle)*n),t.body.maxVelocity.setTo(r,o),this._angle},distanceBetween:function(t,e){return this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToXY:function(t,e,i){return this._dx=t.x-e,this._dy=t.y-i,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},angleBetween:function(t,e){return this._dx=e.x-t.x,this._dy=e.y-t.y,Math.atan2(this._dy,this._dx)},angleToXY:function(t,e,i){return this._dx=e-t.x,this._dy=i-t.y,Math.atan2(this._dy,this._dx)},angleToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=e.worldX-t.x,this._dy=e.worldY-t.y,Math.atan2(this._dy,this._dx)}},i.Physics.Arcade.Body=function(t){this.sprite=t,this.game=t.game,this.type=i.Physics.ARCADE,this.offset=new i.Point,this.position=new i.Point(t.x,t.y),this.prev=new i.Point(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=t.rotation,this.preRotation=t.rotation,this.sourceWidth=t.texture.frame.width,this.sourceHeight=t.texture.frame.height,this.width=t.width,this.height=t.height,this.halfWidth=Math.abs(t.width/2),this.halfHeight=Math.abs(t.height/2),this.center=new i.Point(t.x+this.halfWidth,t.y+this.halfHeight),this.velocity=new i.Point,this.newVelocity=new i.Point(0,0),this.deltaMax=new i.Point(0,0),this.acceleration=new i.Point,this.drag=new i.Point,this.allowGravity=!0,this.gravity=new i.Point(0,0),this.bounce=new i.Point,this.maxVelocity=new i.Point(1e4,1e4),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=i.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.tilePadding=new i.Point,this.phase=0,this._reset=!0,this._sx=t.scale.x,this._sy=t.scale.y,this._dx=0,this._dy=0},i.Physics.Arcade.Body.prototype={updateBounds:function(){var t=Math.abs(this.sprite.scale.x),e=Math.abs(this.sprite.scale.y);(t!==this._sx||e!==this._sy)&&(this.width=this.sourceWidth*t,this.height=this.sourceHeight*e,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this._sx=t,this._sy=e,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this._reset=!0)},preUpdate:function(){this.phase=1,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.width+this.offset.x,this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.height+this.offset.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,(this._reset||1===this.sprite._cache[4])&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,(this.position.x!==this.prev.x||this.position.y!==this.prev.y)&&(this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.collideWorldBounds&&this.checkWorldBounds()),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1},postUpdate:function(){2!==this.phase&&(this.phase=2,this.deltaX()<0?this.facing=i.LEFT:this.deltaX()>0&&(this.facing=i.RIGHT),this.deltaY()<0?this.facing=i.UP:this.deltaY()>0&&(this.facing=i.DOWN),this.moves&&(this._dx=this.deltaX(),this._dy=this.deltaY(),0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:this._dx>0&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:this._dy>0&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.sprite.x+=this._dx,this.sprite.y+=this._dy),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},destroy:function(){this.sprite=null},checkWorldBounds:function(){this.position.x<this.game.physics.arcade.bounds.x&&this.game.physics.arcade.checkCollision.left?(this.position.x=this.game.physics.arcade.bounds.x,this.velocity.x*=-this.bounce.x,this.blocked.left=!0):this.right>this.game.physics.arcade.bounds.right&&this.game.physics.arcade.checkCollision.right&&(this.position.x=this.game.physics.arcade.bounds.right-this.width,this.velocity.x*=-this.bounce.x,this.blocked.right=!0),this.position.y<this.game.physics.arcade.bounds.y&&this.game.physics.arcade.checkCollision.up?(this.position.y=this.game.physics.arcade.bounds.y,this.velocity.y*=-this.bounce.y,this.blocked.up=!0):this.bottom>this.game.physics.arcade.bounds.bottom&&this.game.physics.arcade.checkCollision.down&&(this.position.y=this.game.physics.arcade.bounds.bottom-this.height,this.velocity.y*=-this.bounce.y,this.blocked.down=!0)},setSize:function(t,e,i,n){i=i||this.offset.x,n=n||this.offset.y,this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(i,n),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){this.velocity.set(0),this.acceleration.set(0),this.angularVelocity=0,this.angularAcceleration=0,this.position.x=t-this.sprite.anchor.x*this.width+this.offset.x,this.position.y=e-this.sprite.anchor.y*this.height+this.offset.y,this.prev.x=this.position.x,this.prev.y=this.position.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,this._sx=this.sprite.scale.x,this._sy=this.sprite.scale.y,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)
},hitTest:function(t,e){return i.Rectangle.contains(this,t,e)},onFloor:function(){return this.blocked.down},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},deltaAbsY:function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation}},Object.defineProperty(i.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}}),Object.defineProperty(i.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}}),Object.defineProperty(i.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(i.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),i.Physics.Arcade.Body.render=function(t,e,i,n){"undefined"==typeof i&&(i=!0),n=n||"rgba(0,255,0,0.4)",i?(t.fillStyle=n,t.fillRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height)):(t.strokeStyle=n,t.strokeRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height))},i.Physics.Arcade.Body.renderBodyInfo=function(t,e){t.line("x: "+e.x.toFixed(2),"y: "+e.y.toFixed(2),"width: "+e.width,"height: "+e.height),t.line("velocity x: "+e.velocity.x.toFixed(2),"y: "+e.velocity.y.toFixed(2),"deltaX: "+e._dx.toFixed(2),"deltaY: "+e._dy.toFixed(2)),t.line("acceleration x: "+e.acceleration.x.toFixed(2),"y: "+e.acceleration.y.toFixed(2),"speed: "+e.speed.toFixed(2),"angle: "+e.angle.toFixed(2)),t.line("gravity x: "+e.gravity.x,"y: "+e.gravity.y,"bounce x: "+e.bounce.x.toFixed(2),"y: "+e.bounce.y.toFixed(2)),t.line("touching left: "+e.touching.left,"right: "+e.touching.right,"up: "+e.touching.up,"down: "+e.touching.down),t.line("blocked left: "+e.blocked.left,"right: "+e.blocked.right,"up: "+e.blocked.up,"down: "+e.blocked.down)},i.Physics.Arcade.Body.prototype.constructor=i.Physics.Arcade.Body,i.Particles=function(t){this.game=t,this.emitters={},this.ID=0},i.Particles.prototype={add:function(t){return this.emitters[t.name]=t,t},remove:function(t){delete this.emitters[t.name]},update:function(){for(var t in this.emitters)this.emitters[t].exists&&this.emitters[t].update()}},i.Particles.prototype.constructor=i.Particles,i.Particles.Arcade={},i.Particles.Arcade.Emitter=function(t,e,n,r){this.maxParticles=r||50,i.Group.call(this,t),this.name="emitter"+this.game.particles.ID++,this.type=i.EMITTER,this.width=1,this.height=1,this.minParticleSpeed=new i.Point(-100,-100),this.maxParticleSpeed=new i.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.minRotation=-360,this.maxRotation=360,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.gravity=100,this.particleClass=i.Particle,this.particleDrag=new i.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new i.Point,this.on=!1,this.particleAnchor=new i.Point(.5,.5),this.blendMode=i.blendModes.NORMAL,this.emitX=e,this.emitY=n,this.autoScale=!1,this.autoAlpha=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new i.Point(1,1),this._maxParticleScale=new i.Point(1,1),this._quantity=0,this._timer=0,this._counter=0,this._explode=!0,this._frames=null},i.Particles.Arcade.Emitter.prototype=Object.create(i.Group.prototype),i.Particles.Arcade.Emitter.prototype.constructor=i.Particles.Arcade.Emitter,i.Particles.Arcade.Emitter.prototype.update=function(){if(this.on)if(this._explode){this._counter=0;do this.emitParticle(),this._counter++;while(this._counter<this._quantity);this.on=!1}else this.game.time.now>=this._timer&&(this.emitParticle(),this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1),this._timer=this.game.time.now+this.frequency);for(var t=this.children.length;t--;)this.children[t].exists&&this.children[t].update()},i.Particles.Arcade.Emitter.prototype.makeParticles=function(t,e,i,n,r){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=this.maxParticles),"undefined"==typeof n&&(n=!1),"undefined"==typeof r&&(r=!1);var o,s=0,a=t,l=e;for(this._frames=e;i>s;)Array.isArray(t)&&(a=this.game.rnd.pick(t)),Array.isArray(e)&&(l=this.game.rnd.pick(e)),o=new this.particleClass(this.game,0,0,a,l),this.game.physics.arcade.enable(o,!1),n?(o.body.checkCollision.any=!0,o.body.checkCollision.none=!1):o.body.checkCollision.none=!0,o.body.collideWorldBounds=r,o.exists=!1,o.visible=!1,o.anchor.copyFrom(this.particleAnchor),this.add(o),s++;return this},i.Particles.Arcade.Emitter.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},i.Particles.Arcade.Emitter.prototype.revive=function(){this.alive=!0,this.exists=!0},i.Particles.Arcade.Emitter.prototype.start=function(t,e,i,n){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),("undefined"==typeof i||null===i)&&(i=250),"undefined"==typeof n&&(n=0),this.revive(),this.visible=!0,this.on=!0,this._explode=t,this.lifespan=e,this.frequency=i,t?this._quantity=n:this._quantity+=n,this._counter=0,this._timer=this.game.time.now+i},i.Particles.Arcade.Emitter.prototype.emitParticle=function(){var t=this.getFirstExists(!1);null!==t&&(this.width>1||this.height>1?t.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):t.reset(this.emitX,this.emitY),t.angle=0,t.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(t):this.particleSendToBack&&this.sendToBack(t),this.autoScale?t.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?t.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y)&&t.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),t.frame=Array.isArray("object"===this._frames)?this.game.rnd.pick(this._frames):this._frames,this.autoAlpha?t.setAlphaData(this.alphaData):t.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),t.blendMode=this.blendMode,t.body.updateBounds(),t.body.bounce.setTo(this.bounce.x,this.bounce.y),t.body.velocity.x=this.game.rnd.integerInRange(this.minParticleSpeed.x,this.maxParticleSpeed.x),t.body.velocity.y=this.game.rnd.integerInRange(this.minParticleSpeed.y,this.maxParticleSpeed.y),t.body.angularVelocity=this.game.rnd.integerInRange(this.minRotation,this.maxRotation),t.body.gravity.y=this.gravity,t.body.drag.x=this.particleDrag.x,t.body.drag.y=this.particleDrag.y,t.body.angularDrag=this.angularDrag,t.onEmit())},i.Particles.Arcade.Emitter.prototype.setSize=function(t,e){this.width=t,this.height=e},i.Particles.Arcade.Emitter.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.x=t,this.maxParticleSpeed.x=e},i.Particles.Arcade.Emitter.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.y=t,this.maxParticleSpeed.y=e},i.Particles.Arcade.Emitter.prototype.setRotation=function(t,e){t=t||0,e=e||0,this.minRotation=t,this.maxRotation=e},i.Particles.Arcade.Emitter.prototype.setAlpha=function(t,e,n,r,o){if("undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=0),"undefined"==typeof r&&(r=i.Easing.Linear.None),"undefined"==typeof o&&(o=!1),this.minParticleAlpha=t,this.maxParticleAlpha=e,this.autoAlpha=!1,n>0&&t!==e){var s={v:t},a=this.game.make.tween(s).to({v:e},n,r);a.yoyo(o),this.alphaData=a.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}},i.Particles.Arcade.Emitter.prototype.setScale=function(t,e,n,r,o,s,a){if("undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=1),"undefined"==typeof r&&(r=1),"undefined"==typeof o&&(o=0),"undefined"==typeof s&&(s=i.Easing.Linear.None),"undefined"==typeof a&&(a=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(t,n),this._maxParticleScale.set(e,r),this.autoScale=!1,o>0&&t!==e||n!==r){var l={x:t,y:n},u=this.game.make.tween(l).to({x:e,y:r},o,s);u.yoyo(a),this.scaleData=u.generateData(60),this.scaleData.reverse(),this.autoScale=!0}},i.Particles.Arcade.Emitter.prototype.at=function(t){t.center?(this.emitX=t.center.x,this.emitY=t.center.y):(this.emitX=t.world.x+t.anchor.x*t.width,this.emitY=t.world.y+t.anchor.y*t.height)},Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(t){this.emitX=t}}),Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(t){this.emitY=t}}),Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.width/2)}}),Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.width/2)}}),Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.height/2)}}),Object.defineProperty(i.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.height/2)}}),i.Tile=function(t,e,i,n,r,o){this.layer=t,this.index=e,this.x=i,this.y=n,this.worldX=i*r,this.worldY=n*o,this.width=r,this.height=o,this.centerX=Math.abs(r/2),this.centerY=Math.abs(o/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this},i.Tile.prototype={containsPoint:function(t,e){return!(t<this.worldX||e<this.worldY||t>this.right||e>this.bottom)},intersects:function(t,e,i,n){return i<=this.worldX?!1:n<=this.worldY?!1:t>=this.worldX+this.width?!1:e>=this.worldY+this.height?!1:!0},setCollisionCallback:function(t,e){this.collisionCallback=t,this.collisionCallbackContext=e},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(t,e,i,n){this.collideLeft=t,this.collideRight=e,this.collideUp=i,this.collideDown=n},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(t,e){return t&&e?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:t?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:e?this.faceTop||this.faceBottom||this.faceLeft||this.faceRight:!1},copy:function(t){this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext}},i.Tile.prototype.constructor=i.Tile,Object.defineProperty(i.Tile.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(i.Tile.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(i.Tile.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(i.Tile.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(i.Tile.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(i.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}}),i.Tilemap=function(t,e,n,r,o,s){this.game=t,this.key=e;var a=i.TilemapParser.parse(this.game,e,n,r,o,s);null!==a&&(this.width=a.width,this.height=a.height,this.tileWidth=a.tileWidth,this.tileHeight=a.tileHeight,this.orientation=a.orientation,this.format=a.format,this.version=a.version,this.properties=a.properties,this.widthInPixels=a.widthInPixels,this.heightInPixels=a.heightInPixels,this.layers=a.layers,this.tilesets=a.tilesets,this.tiles=a.tiles,this.objects=a.objects,this.collideIndexes=[],this.collision=a.collision,this.images=a.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)},i.Tilemap.CSV=0,i.Tilemap.TILED_JSON=1,i.Tilemap.NORTH=0,i.Tilemap.EAST=1,i.Tilemap.SOUTH=2,i.Tilemap.WEST=3,i.Tilemap.prototype={create:function(t,e,i,n,r,o){return"undefined"==typeof o&&(o=this.game.world),this.width=e,this.height=i,this.setTileSize(n,r),this.layers.length=0,this.createBlankLayer(t,e,i,n,r,o)},setTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e},addTilesetImage:function(t,e,n,r,o,s,a){if("undefined"==typeof n&&(n=this.tileWidth),"undefined"==typeof r&&(r=this.tileHeight),"undefined"==typeof o&&(o=0),"undefined"==typeof s&&(s=0),"undefined"==typeof a&&(a=0),0===n&&(n=32),0===r&&(r=32),"undefined"==typeof e){if("string"!=typeof t)return null;if(e=t,!this.game.cache.checkImageKey(e))return console.warn('Phaser.Tilemap.addTilesetImage: Invalid image key given: "'+e+'"'),null}if("string"==typeof t&&(t=this.getTilesetIndex(t),null===t&&this.format===i.Tilemap.TILED_JSON))return console.warn('Phaser.Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+e+'"'),null;if(this.tilesets[t])return this.tilesets[t].setImage(this.game.cache.getImage(e)),this.tilesets[t];var l=new i.Tileset(e,a,n,r,o,s,{});l.setImage(this.game.cache.getImage(e)),this.tilesets.push(l);for(var u=this.tilesets.length-1,h=o,c=o,d=0,p=0,f=0,m=a;m<a+l.total&&(this.tiles[m]=[h,c,u],h+=n+s,d++,d!==l.total)&&(p++,p!==l.columns||(h=o,c+=r+s,p=0,f++,f!==l.rows));m++);return l},createFromObjects:function(t,e,n,r,o,s,a,l,u){if("undefined"==typeof o&&(o=!0),"undefined"==typeof s&&(s=!1),"undefined"==typeof a&&(a=this.game.world),"undefined"==typeof l&&(l=i.Sprite),"undefined"==typeof u&&(u=!0),!this.objects[t])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+t);for(var h,c=0,d=this.objects[t].length;d>c;c++)if(this.objects[t][c].gid===e){h=new l(this.game,this.objects[t][c].x,this.objects[t][c].y,n,r),h.name=this.objects[t][c].name,h.visible=this.objects[t][c].visible,h.autoCull=s,h.exists=o,u&&(h.y-=h.height),a.add(h);for(var p in this.objects[t][c].properties)a.set(h,p,this.objects[t][c].properties[p],!1,!1,0,!0)}},createLayer:function(t,e,n,r){"undefined"==typeof e&&(e=this.game.width),"undefined"==typeof n&&(n=this.game.height),"undefined"==typeof r&&(r=this.game.world);var o=t;return"string"==typeof t&&(o=this.getLayerIndex(t)),null===o||o>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+o):r.add(new i.TilemapLayer(this.game,this,o,e,n))},createBlankLayer:function(t,e,n,r,o,s){if("undefined"==typeof s&&(s=this.game.world),null!==this.getLayerIndex(t))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(var a,l={name:t,x:0,y:0,width:e,height:n,widthInPixels:e*r,heightInPixels:n*o,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},u=[],h=0;n>h;h++){a=[];for(var c=0;e>c;c++)a.push(new i.Tile(l,-1,c,h,r,o));u.push(a)}l.data=u,this.layers.push(l),this.currentLayer=this.layers.length-1;var d=l.widthInPixels,p=l.heightInPixels;d>this.game.width&&(d=this.game.width),p>this.game.height&&(p=this.game.height);var u=new i.TilemapLayer(this.game,this,this.layers.length-1,d,p);return u.name=t,s.add(u)},getIndex:function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return i;return null},getLayerIndex:function(t){return this.getIndex(this.layers,t)},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},getImageIndex:function(t){return this.getIndex(this.images,t)},getObjectIndex:function(t){return this.getIndex(this.objects,t)},setTileIndexCallback:function(t,e,i,n){if(n=this.getLayer(n),"number"==typeof t)this.layers[n].callbacks[t]={callback:e,callbackContext:i};else for(var r=0,o=t.length;o>r;r++)this.layers[n].callbacks[t[r]]={callback:e,callbackContext:i}},setTileLocationCallback:function(t,e,i,n,r,o,s){if(s=this.getLayer(s),this.copy(t,e,i,n,s),!(this._results.length<2))for(var a=1;a<this._results.length;a++)this._results[a].setCollisionCallback(r,o)},setCollision:function(t,e,i,n){if("undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=!0),i=this.getLayer(i),"number"==typeof t)return this.setCollisionByIndex(t,e,i,!0);for(var r=0,o=t.length;o>r;r++)this.setCollisionByIndex(t[r],e,i,!1);n&&this.calculateFaces(i)},setCollisionBetween:function(t,e,i,n,r){if("undefined"==typeof i&&(i=!0),"undefined"==typeof r&&(r=!0),n=this.getLayer(n),!(t>e)){for(var o=t;e>=o;o++)this.setCollisionByIndex(o,i,n,!1);r&&this.calculateFaces(n)}},setCollisionByExclusion:function(t,e,i,n){"undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=!0),i=this.getLayer(i);for(var r=0,o=this.tiles.length;o>r;r++)-1===t.indexOf(r)&&this.setCollisionByIndex(r,e,i,!1);n&&this.calculateFaces(i)},setCollisionByIndex:function(t,e,i,n){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=this.currentLayer),"undefined"==typeof n&&(n=!0),e)this.collideIndexes.push(t);else{var r=this.collideIndexes.indexOf(t);r>-1&&this.collideIndexes.splice(r,1)}for(var o=0;o<this.layers[i].height;o++)for(var s=0;s<this.layers[i].width;s++){var a=this.layers[i].data[o][s];a&&a.index===t&&(e?a.setCollision(!0,!0,!0,!0):a.resetCollision(),a.faceTop=e,a.faceBottom=e,a.faceLeft=e,a.faceRight=e)}return n&&this.calculateFaces(i),i},getLayer:function(t){return"undefined"==typeof t?t=this.currentLayer:"string"==typeof t?t=this.getLayerIndex(t):t instanceof i.TilemapLayer&&(t=t.index),t},calculateFaces:function(t){for(var e=null,i=null,n=null,r=null,o=0,s=this.layers[t].height;s>o;o++)for(var a=0,l=this.layers[t].width;l>a;a++){var u=this.layers[t].data[o][a];u&&(e=this.getTileAbove(t,a,o),i=this.getTileBelow(t,a,o),n=this.getTileLeft(t,a,o),r=this.getTileRight(t,a,o),u.collides&&(u.faceTop=!0,u.faceBottom=!0,u.faceLeft=!0,u.faceRight=!0),e&&e.collides&&(u.faceTop=!1),i&&i.collides&&(u.faceBottom=!1),n&&n.collides&&(u.faceLeft=!1),r&&r.collides&&(u.faceRight=!1))}},getTileAbove:function(t,e,i){return i>0?this.layers[t].data[i-1][e]:null},getTileBelow:function(t,e,i){return i<this.layers[t].height-1?this.layers[t].data[i+1][e]:null},getTileLeft:function(t,e,i){return e>0?this.layers[t].data[i][e-1]:null},getTileRight:function(t,e,i){return e<this.layers[t].width-1?this.layers[t].data[i][e+1]:null},setLayer:function(t){t=this.getLayer(t),this.layers[t]&&(this.currentLayer=t)},hasTile:function(t,e,i){return i=this.getLayer(i),null!==this.layers[i].data[e]&&null!==this.layers[i].data[e][t]},removeTile:function(t,e,i){if(i=this.getLayer(i),t>=0&&t<this.layers[i].width&&e>=0&&e<this.layers[i].height&&this.hasTile(t,e,i)){var n=this.layers[i].data[e][t];return this.layers[i].data[e][t]=null,this.layers[i].dirty=!0,this.calculateFaces(i),n}},removeTileWorldXY:function(t,e,i,n,r){return r=this.getLayer(r),t=this.game.math.snapToFloor(t,i)/i,e=this.game.math.snapToFloor(e,n)/n,this.removeTile(t,e,r)},putTile:function(t,e,n,r){if(null===t)return this.removeTile(e,n,r);if(r=this.getLayer(r),e>=0&&e<this.layers[r].width&&n>=0&&n<this.layers[r].height){var o;return t instanceof i.Tile?(o=t.index,this.hasTile(e,n,r)?this.layers[r].data[n][e].copy(t):this.layers[r].data[n][e]=new i.Tile(r,o,e,n,t.width,t.height)):(o=t,this.hasTile(e,n,r)?this.layers[r].data[n][e].index=o:this.layers[r].data[n][e]=new i.Tile(this.layers[r],o,e,n,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(o)>-1?this.layers[r].data[n][e].setCollision(!0,!0,!0,!0):this.layers[r].data[n][e].resetCollision(),this.layers[r].dirty=!0,this.calculateFaces(r),this.layers[r].data[n][e]}return null},putTileWorldXY:function(t,e,i,n,r,o){return o=this.getLayer(o),e=this.game.math.snapToFloor(e,n)/n,i=this.game.math.snapToFloor(i,r)/r,this.putTile(t,e,i,o)},searchTileIndex:function(t,e,i,n){"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=!1),n=this.getLayer(n);var r=0;if(i){for(var o=this.layers[n].height-1;o>=0;o--)for(var s=this.layers[n].width-1;s>=0;s--)if(this.layers[n].data[o][s].index===t){if(r===e)return this.layers[n].data[o][s];r++}}else for(var o=0;o<this.layers[n].height;o++)for(var s=0;s<this.layers[n].width;s++)if(this.layers[n].data[o][s].index===t){if(r===e)return this.layers[n].data[o][s];r++}return null},getTile:function(t,e,i,n){return"undefined"==typeof n&&(n=!1),i=this.getLayer(i),t>=0&&t<this.layers[i].width&&e>=0&&e<this.layers[i].height?-1===this.layers[i].data[e][t].index?n?this.layers[i].data[e][t]:null:this.layers[i].data[e][t]:null},getTileWorldXY:function(t,e,i,n,r){return"undefined"==typeof i&&(i=this.tileWidth),"undefined"==typeof n&&(n=this.tileHeight),r=this.getLayer(r),t=this.game.math.snapToFloor(t,i)/i,e=this.game.math.snapToFloor(e,n)/n,this.getTile(t,e,r)},copy:function(t,e,i,n,r){if(r=this.getLayer(r),!this.layers[r])return void(this._results.length=0);"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof i&&(i=this.layers[r].width),"undefined"==typeof n&&(n=this.layers[r].height),0>t&&(t=0),0>e&&(e=0),i>this.layers[r].width&&(i=this.layers[r].width),n>this.layers[r].height&&(n=this.layers[r].height),this._results.length=0,this._results.push({x:t,y:e,width:i,height:n,layer:r});for(var o=e;e+n>o;o++)for(var s=t;t+i>s;s++)this._results.push(this.layers[r].data[o][s]);return this._results},paste:function(t,e,i,n){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),n=this.getLayer(n),i&&!(i.length<2)){for(var r=i[1].x-t,o=i[1].y-e,s=1;s<i.length;s++)this.layers[n].data[o+i[s].y][r+i[s].x].copy(i[s]);this.layers[n].dirty=!0,this.calculateFaces(n)}},swap:function(t,e,i,n,r,o,s){s=this.getLayer(s),this.copy(i,n,r,o,s),this._results.length<2||(this._tempA=t,this._tempB=e,this._results.forEach(this.swapHandler,this),this.paste(i,n,this._results,s))},swapHandler:function(t,e){t.index===this._tempA&&(this._results[e].index=this._tempB),t.index===this._tempB&&(this._results[e].index=this._tempA)},forEach:function(t,e,i,n,r,o,s){s=this.getLayer(s),this.copy(i,n,r,o,s),this._results.length<2||(this._results.forEach(t,e),this.paste(i,n,this._results,s))},replace:function(t,e,i,n,r,o,s){if(s=this.getLayer(s),this.copy(i,n,r,o,s),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index===t&&(this._results[a].index=e);this.paste(i,n,this._results,s)}},random:function(t,e,i,n,r){if(r=this.getLayer(r),this.copy(t,e,i,n,r),!(this._results.length<2)){for(var o=[],s=1;s<this._results.length;s++)if(this._results[s].index){var a=this._results[s].index;-1===o.indexOf(a)&&o.push(a)}for(var l=1;l<this._results.length;l++)this._results[l].index=this.game.rnd.pick(o);this.paste(t,e,this._results,r)}},shuffle:function(t,e,n,r,o){if(o=this.getLayer(o),this.copy(t,e,n,r,o),!(this._results.length<2)){for(var s=[],a=1;a<this._results.length;a++)this._results[a].index&&s.push(this._results[a].index);i.Utils.shuffle(s);for(var l=1;l<this._results.length;l++)this._results[l].index=s[l-1];this.paste(t,e,this._results,o)}},fill:function(t,e,i,n,r,o){if(o=this.getLayer(o),this.copy(e,i,n,r,o),!(this._results.length<2)){for(var s=1;s<this._results.length;s++)this._results[s].index=t;this.paste(e,i,this._results,o)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var t="",e=[""],i=0;i<this.layers[this.currentLayer].height;i++){for(var n=0;n<this.layers[this.currentLayer].width;n++)t+="%c  ",e.push(this.layers[this.currentLayer].data[i][n]>1?this.debugMap[this.layers[this.currentLayer].data[i][n]]?"background: "+this.debugMap[this.layers[this.currentLayer].data[i][n]]:"background: #ffffff":"background: rgb(0, 0, 0)");t+="\n"}e[0]=t,console.log.apply(console,e)},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},i.Tilemap.prototype.constructor=i.Tilemap,Object.defineProperty(i.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(t){t!==this.currentLayer&&this.setLayer(t)}}),i.TilemapLayer=function(t,e,n,r,o){this.game=t,this.map=e,this.index=n,this.layer=e.layers[n],this.canvas=i.Canvas.create(r,o,"",!0),this.context=this.canvas.getContext("2d"),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new i.Frame(0,0,0,r,o,"tilemapLayer",t.rnd.uuid()),i.Image.call(this,this.game,0,0,this.texture,this.textureFrame),this.name="",this.type=i.TILEMAPLAYER,this.fixedToCamera=!0,this.cameraOffset=new i.Point(0,0),this.tileColor="rgb(255, 255, 255)",this.debug=!1,this.debugAlpha=.5,this.debugColor="rgba(0, 255, 0, 1)",this.debugFill=!1,this.debugFillColor="rgba(0, 255, 0, 0.2)",this.debugCallbackColor="rgba(255, 0, 0, 1)",this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._mc={cw:e.tileWidth,ch:e.tileHeight,ga:1,dx:0,dy:0,dw:0,dh:0,tx:0,ty:0,tw:0,th:0,tl:0,maxX:0,maxY:0,startX:0,startY:0,x:0,y:0,prevX:0,prevY:0},this._results=[],this.updateMax()},i.TilemapLayer.prototype=Object.create(i.Image.prototype),i.TilemapLayer.prototype.constructor=i.TilemapLayer,i.TilemapLayer.prototype.postUpdate=function(){i.Image.prototype.postUpdate.call(this),this.scrollX=this.game.camera.x*this.scrollFactorX,this.scrollY=this.game.camera.y*this.scrollFactorY,this.render(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},i.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels,this.layer.heightInPixels)},i.TilemapLayer.prototype._fixX=function(t){return 0>t&&(t=0),1===this.scrollFactorX?t:this._mc.x+(t-this._mc.x/this.scrollFactorX)},i.TilemapLayer.prototype._unfixX=function(t){return 1===this.scrollFactorX?t:this._mc.x/this.scrollFactorX+(t-this._mc.x)},i.TilemapLayer.prototype._fixY=function(t){return 0>t&&(t=0),1===this.scrollFactorY?t:this._mc.y+(t-this._mc.y/this.scrollFactorY)},i.TilemapLayer.prototype._unfixY=function(t){return 1===this.scrollFactorY?t:this._mc.y/this.scrollFactorY+(t-this._mc.y)},i.TilemapLayer.prototype.getTileX=function(t){return this.game.math.snapToFloor(this._fixX(t),this.map.tileWidth)/this.map.tileWidth},i.TilemapLayer.prototype.getTileY=function(t){return this.game.math.snapToFloor(this._fixY(t),this.map.tileHeight)/this.map.tileHeight},i.TilemapLayer.prototype.getTileXY=function(t,e,i){return i.x=this.getTileX(t),i.y=this.getTileY(e),i},i.TilemapLayer.prototype.getRayCastTiles=function(t,e,i,n){("undefined"==typeof e||null===e)&&(e=this.rayStepRate),"undefined"==typeof i&&(i=!1),"undefined"==typeof n&&(n=!1);var r=this.getTiles(t.x,t.y,t.width,t.height,i,n);if(0===r.length)return[];for(var o=t.coordinatesOnLine(e),s=o.length,a=[],l=0;l<r.length;l++)for(var u=0;s>u;u++)if(r[l].containsPoint(o[u][0],o[u][1])){a.push(r[l]);break}return a},i.TilemapLayer.prototype.getTiles=function(t,e,i,n,r,o){"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=!1),t=this._fixX(t),e=this._fixY(e),i>this.layer.widthInPixels&&(i=this.layer.widthInPixels),n>this.layer.heightInPixels&&(n=this.layer.heightInPixels),this._mc.tx=this.game.math.snapToFloor(t,this._mc.cw)/this._mc.cw,this._mc.ty=this.game.math.snapToFloor(e,this._mc.ch)/this._mc.ch,this._mc.tw=(this.game.math.snapToCeil(i,this._mc.cw)+this._mc.cw)/this._mc.cw,this._mc.th=(this.game.math.snapToCeil(n,this._mc.ch)+this._mc.ch)/this._mc.ch,this._results.length=0;for(var s=this._mc.ty;s<this._mc.ty+this._mc.th;s++)for(var a=this._mc.tx;a<this._mc.tx+this._mc.tw;a++)this.layer.data[s]&&this.layer.data[s][a]&&(!r&&!o||this.layer.data[s][a].isInteresting(r,o))&&this._results.push(this.layer.data[s][a]);return this._results},i.TilemapLayer.prototype.updateMax=function(){this._mc.maxX=this.game.math.ceil(this.canvas.width/this.map.tileWidth)+1,this._mc.maxY=this.game.math.ceil(this.canvas.height/this.map.tileHeight)+1,this.layer&&(this._mc.maxX>this.layer.width&&(this._mc.maxX=this.layer.width),this._mc.maxY>this.layer.height&&(this._mc.maxY=this.layer.height)),this.dirty=!0},i.TilemapLayer.prototype.render=function(){if(this.layer.dirty&&(this.dirty=!0),this.dirty&&this.visible){this._mc.prevX=this._mc.dx,this._mc.prevY=this._mc.dy,this._mc.dx=-(this._mc.x-this._mc.startX*this.map.tileWidth),this._mc.dy=-(this._mc.y-this._mc.startY*this.map.tileHeight),this._mc.tx=this._mc.dx,this._mc.ty=this._mc.dy,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.tileColor;var t,e;this.debug&&(this.context.globalAlpha=this.debugAlpha);for(var n=this._mc.startY,r=this._mc.startY+this._mc.maxY;r>n;n++){this._column=this.layer.data[n];for(var o=this._mc.startX,s=this._mc.startX+this._mc.maxX;s>o;o++)this._column[o]&&(t=this._column[o],t.index>-1&&(e=this.map.tilesets[this.map.tiles[t.index][2]],this.debug===!1&&t.alpha!==this.context.globalAlpha&&(this.context.globalAlpha=t.alpha),e.draw(this.context,Math.floor(this._mc.tx),Math.floor(this._mc.ty),t.index),t.debug&&(this.context.fillStyle="rgba(0, 255, 0, 0.4)",this.context.fillRect(Math.floor(this._mc.tx),Math.floor(this._mc.ty),this.map.tileWidth,this.map.tileHeight)))),this._mc.tx+=this.map.tileWidth;this._mc.tx=this._mc.dx,this._mc.ty+=this.map.tileHeight}return this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.game.renderType===i.WEBGL&&PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl),this.dirty=!1,this.layer.dirty=!1,!0}},i.TilemapLayer.prototype.renderDebug=function(){this._mc.tx=this._mc.dx,this._mc.ty=this._mc.dy,this.context.strokeStyle=this.debugColor,this.context.fillStyle=this.debugFillColor;for(var t=this._mc.startY,e=this._mc.startY+this._mc.maxY;e>t;t++){this._column=this.layer.data[t];for(var i=this._mc.startX,n=this._mc.startX+this._mc.maxX;n>i;i++){var r=this._column[i];r&&(r.faceTop||r.faceBottom||r.faceLeft||r.faceRight)&&(this._mc.tx=Math.floor(this._mc.tx),this.debugFill&&this.context.fillRect(this._mc.tx,this._mc.ty,this._mc.cw,this._mc.ch),this.context.beginPath(),r.faceTop&&(this.context.moveTo(this._mc.tx,this._mc.ty),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty)),r.faceBottom&&(this.context.moveTo(this._mc.tx,this._mc.ty+this._mc.ch),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty+this._mc.ch)),r.faceLeft&&(this.context.moveTo(this._mc.tx,this._mc.ty),this.context.lineTo(this._mc.tx,this._mc.ty+this._mc.ch)),r.faceRight&&(this.context.moveTo(this._mc.tx+this._mc.cw,this._mc.ty),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty+this._mc.ch)),this.context.stroke()),this._mc.tx+=this.map.tileWidth}this._mc.tx=this._mc.dx,this._mc.ty+=this.map.tileHeight}},Object.defineProperty(i.TilemapLayer.prototype,"scrollX",{get:function(){return this._mc.x},set:function(t){t!==this._mc.x&&t>=0&&this.layer.widthInPixels>this.width&&(this._mc.x=t,this._mc.x>this.layer.widthInPixels-this.width&&(this._mc.x=this.layer.widthInPixels-this.width),this._mc.startX=this.game.math.floor(this._mc.x/this.map.tileWidth),this._mc.startX<0&&(this._mc.startX=0),this._mc.startX+this._mc.maxX>this.layer.width&&(this._mc.startX=this.layer.width-this._mc.maxX),this.dirty=!0)}}),Object.defineProperty(i.TilemapLayer.prototype,"scrollY",{get:function(){return this._mc.y},set:function(t){t!==this._mc.y&&t>=0&&this.layer.heightInPixels>this.height&&(this._mc.y=t,this._mc.y>this.layer.heightInPixels-this.height&&(this._mc.y=this.layer.heightInPixels-this.height),this._mc.startY=this.game.math.floor(this._mc.y/this.map.tileHeight),this._mc.startY<0&&(this._mc.startY=0),this._mc.startY+this._mc.maxY>this.layer.height&&(this._mc.startY=this.layer.height-this._mc.maxY),this.dirty=!0)
}}),Object.defineProperty(i.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(t){this._mc.cw=t,this.dirty=!0}}),Object.defineProperty(i.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(t){this._mc.ch=t,this.dirty=!0}}),i.TilemapParser={parse:function(t,e,n,r,o,s){if("undefined"==typeof n&&(n=32),"undefined"==typeof r&&(r=32),"undefined"==typeof o&&(o=10),"undefined"==typeof s&&(s=10),"undefined"==typeof e)return this.getEmptyData();if(null===e)return this.getEmptyData(n,r,o,s);var a=t.cache.getTilemapData(e);if(a){if(a.format===i.Tilemap.CSV)return this.parseCSV(e,a.data,n,r);if(!a.format||a.format===i.Tilemap.TILED_JSON)return this.parseTiledJSON(a.data)}else console.warn("Phaser.TilemapParser.parse - No map data found for key "+e)},parseCSV:function(t,e,n,r){var o=this.getEmptyData();e=e.trim();for(var s=[],a=e.split("\n"),l=a.length,u=0,h=0;h<a.length;h++){s[h]=[];for(var c=a[h].split(","),d=0;d<c.length;d++)s[h][d]=new i.Tile(o.layers[0],parseInt(c[d],10),d,h,n,r);0===u&&(u=c.length)}return o.format=i.Tilemap.CSV,o.name=t,o.width=u,o.height=l,o.tileWidth=n,o.tileHeight=r,o.widthInPixels=u*n,o.heightInPixels=l*r,o.layers[0].width=u,o.layers[0].height=l,o.layers[0].widthInPixels=o.widthInPixels,o.layers[0].heightInPixels=o.heightInPixels,o.layers[0].data=s,o},getEmptyData:function(t,e,i,n){var r={};r.width=0,r.height=0,r.tileWidth=0,r.tileHeight=0,"undefined"!=typeof t&&null!==t&&(r.tileWidth=t),"undefined"!=typeof e&&null!==e&&(r.tileHeight=e),"undefined"!=typeof i&&null!==i&&(r.width=i),"undefined"!=typeof n&&null!==n&&(r.height=n),r.orientation="orthogonal",r.version="1",r.properties={},r.widthInPixels=0,r.heightInPixels=0;var o=[],s={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],data:[]};return o.push(s),r.layers=o,r.images=[],r.objects={},r.collision={},r.tilesets=[],r.tiles=[],r},parseTiledJSON:function(t){function e(t,e){var i={};for(var n in e){var r=e[n];i[r]=t[r]}return i}if("orthogonal"!==t.orientation)return console.warn("TilemapParser.parseTiledJSON: Only orthogonal map types are supported in this version of Phaser"),null;var n={};n.width=t.width,n.height=t.height,n.tileWidth=t.tilewidth,n.tileHeight=t.tileheight,n.orientation=t.orientation,n.format=i.Tilemap.TILED_JSON,n.version=t.version,n.properties=t.properties,n.widthInPixels=n.width*n.tileWidth,n.heightInPixels=n.height*n.tileHeight;for(var r=[],o=0;o<t.layers.length;o++)if("tilelayer"===t.layers[o].type){var s={name:t.layers[o].name,x:t.layers[o].x,y:t.layers[o].y,width:t.layers[o].width,height:t.layers[o].height,widthInPixels:t.layers[o].width*t.tilewidth,heightInPixels:t.layers[o].height*t.tileheight,alpha:t.layers[o].opacity,visible:t.layers[o].visible,properties:{},indexes:[],callbacks:[],bodies:[]};t.layers[o].properties&&(s.properties=t.layers[o].properties);for(var a=0,l=[],u=[],h=0,c=t.layers[o].data.length;c>h;h++)l.push(t.layers[o].data[h]>0?new i.Tile(s,t.layers[o].data[h],a,u.length,t.tilewidth,t.tileheight):new i.Tile(s,-1,a,u.length,t.tilewidth,t.tileheight)),a++,a===t.layers[o].width&&(u.push(l),a=0,l=[]);s.data=u,r.push(s)}n.layers=r;for(var d=[],o=0;o<t.layers.length;o++)if("imagelayer"===t.layers[o].type){var p={name:t.layers[o].name,image:t.layers[o].image,x:t.layers[o].x,y:t.layers[o].y,alpha:t.layers[o].opacity,visible:t.layers[o].visible,properties:{}};t.layers[o].properties&&(p.properties=t.layers[o].properties),d.push(p)}n.images=d;for(var f=[],o=0;o<t.tilesets.length;o++){var m=t.tilesets[o],g=new i.Tileset(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,m.properties);m.tileproperties&&(g.tileProperties=m.tileproperties),g.rows=Math.round((m.imageheight-m.margin)/(m.tileheight+m.spacing)),g.columns=Math.round((m.imagewidth-m.margin)/(m.tilewidth+m.spacing)),g.total=g.rows*g.columns,g.rows%1!==0||g.columns%1!==0?console.warn("TileSet image dimensions do not match expected dimensions. Tileset width/height must be evenly divisible by Tilemap tile width/height."):f.push(g)}n.tilesets=f;for(var _={},y={},o=0;o<t.layers.length;o++)if("objectgroup"===t.layers[o].type){_[t.layers[o].name]=[],y[t.layers[o].name]=[];for(var v=0,c=t.layers[o].objects.length;c>v;v++)if(t.layers[o].objects[v].gid){var b={gid:t.layers[o].objects[v].gid,name:t.layers[o].objects[v].name,x:t.layers[o].objects[v].x,y:t.layers[o].objects[v].y,visible:t.layers[o].objects[v].visible,properties:t.layers[o].objects[v].properties};_[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].polyline){var b={name:t.layers[o].objects[v].name,x:t.layers[o].objects[v].x,y:t.layers[o].objects[v].y,width:t.layers[o].objects[v].width,height:t.layers[o].objects[v].height,visible:t.layers[o].objects[v].visible,properties:t.layers[o].objects[v].properties};b.polyline=[];for(var w=0;w<t.layers[o].objects[v].polyline.length;w++)b.polyline.push([t.layers[o].objects[v].polyline[w].x,t.layers[o].objects[v].polyline[w].y]);y[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].polygon){var b=e(t.layers[o].objects[v],["name","x","y","visible","properties"]);b.polygon=[];for(var w=0;w<t.layers[o].objects[v].polygon.length;w++)b.polygon.push([t.layers[o].objects[v].polygon[w].x,t.layers[o].objects[v].polygon[w].y]);_[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].ellipse){var b=e(t.layers[o].objects[v],["name","ellipse","x","y","width","height","visible","properties"]);_[t.layers[o].name].push(b)}else{var b=e(t.layers[o].objects[v],["name","x","y","width","height","visible","properties"]);b.rectangle=!0,_[t.layers[o].name].push(b)}}n.objects=_,n.collision=y,n.tiles=[];for(var o=0;o<n.tilesets.length;o++)for(var m=n.tilesets[o],a=m.tileMargin,x=m.tileMargin,T=0,M=0,k=0,h=m.firstgid;h<m.firstgid+m.total&&(n.tiles[h]=[a,x,o],a+=m.tileWidth+m.tileSpacing,T++,T!==m.total)&&(M++,M!==m.columns||(a=m.tileMargin,x+=m.tileHeight+m.tileSpacing,M=0,k++,k!==m.rows));h++);return n}},i.Tileset=function(t,e,i,n,r,o,s){("undefined"==typeof i||0>=i)&&(i=32),("undefined"==typeof n||0>=n)&&(n=32),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),this.name=t,this.firstgid=e,this.tileWidth=i,this.tileHeight=n,this.tileMargin=r,this.tileSpacing=o,this.properties=s,this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]},i.Tileset.prototype={draw:function(t,e,i,n){this.image&&this.drawCoords[n]&&t.drawImage(this.image,this.drawCoords[n][0],this.drawCoords[n][1],this.tileWidth,this.tileHeight,e,i,this.tileWidth,this.tileHeight)},setImage:function(t){this.image=t,this.rows=Math.round((t.height-this.tileMargin)/(this.tileHeight+this.tileSpacing)),this.columns=Math.round((t.width-this.tileMargin)/(this.tileWidth+this.tileSpacing)),this.total=this.rows*this.columns,this.drawCoords.length=0;for(var e=this.tileMargin,i=this.tileMargin,n=this.firstgid,r=0;r<this.rows;r++){for(var o=0;o<this.columns;o++)this.drawCoords[n]=[e,i],e+=this.tileWidth+this.tileSpacing,n++;e=this.tileMargin,i+=this.tileHeight+this.tileSpacing}},setSpacing:function(t,e){this.tileMargin=t,this.tileSpacing=e,this.setImage(this.image)}},i.Tileset.prototype.constructor=i.Tileset,"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=i),t.Phaser=i):"undefined"!=typeof define&&define.amd?define("Phaser",function(){return e.Phaser=i}()):e.Phaser=i}.call(this)}.call(this),function(){!function(e,i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof t?module.exports=i(require("jquery")):e.bootbox=i(e.jQuery)}(this,function e(t,i){"use strict";function n(t){var e=g[f.locale];return e?e[t]:g.en[t]}function r(e,i,n){e.stopPropagation(),e.preventDefault();var r=t.isFunction(n)&&n(e)===!1;r||i.modal("hide")}function o(t){var e,i=0;for(e in t)i++;return i}function s(e,i){var n=0;t.each(e,function(t,e){i(t,e,n++)})}function a(e){var i,n;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},f,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,i=e.buttons,n=o(i),s(i,function(e,r,o){if(t.isFunction(r)&&(r=i[e]={callback:r}),"object"!==t.type(r))throw new Error("button with key "+e+" must be an object");r.label||(r.label=e),r.className||(r.className=2>=n&&o===n-1?"btn-primary":"btn-default")}),e}function l(t,e){var i=t.length,n={};if(1>i||i>2)throw new Error("Invalid argument length");return 2===i||"string"==typeof t[0]?(n[e[0]]=t[0],n[e[1]]=t[1]):n=t[0],n}function u(e,i,n){return t.extend(!0,{},e,l(i,n))}function h(t,e,i,n){var r={className:"bootbox-"+t,buttons:c.apply(null,e)};return d(u(r,n,i),e)}function c(){for(var t={},e=0,i=arguments.length;i>e;e++){var r=arguments[e],o=r.toLowerCase(),s=r.toUpperCase();t[o]={label:n(s)}}return t}function d(t,e){var n={};return s(e,function(t,e){n[e]=!0}),s(t.buttons,function(t){if(n[t]===i)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var e;if(e=h("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},m.dialog(e)},m.confirm=function(){var e;if(e=h("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return m.dialog(e)},m.prompt=function(){var e,n,r,o,a,l,h;if(o=t(p.form),n={className:"bootbox-prompt",buttons:c("cancel","confirm"),value:"",inputType:"text"},e=d(u(n,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===i?!0:e.show,e.message=o,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var i;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":i=a.val();break;case"checkbox":var n=a.find("input:checked");i=[],s(n,function(e,n){i.push(t(n).val())})}return e.callback(i)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(a=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":a.val(e.value);break;case"select":var f={};if(h=e.inputOptions||[],!h.length)throw new Error("prompt with select requires options");s(h,function(e,n){var r=a;if(n.value===i||n.text===i)throw new Error("given options in wrong format");n.group&&(f[n.group]||(f[n.group]=t("<optgroup/>").attr("label",n.group)),r=f[n.group]),r.append("<option value='"+n.value+"'>"+n.text+"</option>")}),s(f,function(t,e){a.append(e)}),a.val(e.value);break;case"checkbox":var g=t.isArray(e.value)?e.value:[e.value];if(h=e.inputOptions||[],!h.length)throw new Error("prompt with checkbox requires options");if(!h[0].value||!h[0].text)throw new Error("given options in wrong format");a=t("<div/>"),s(h,function(i,n){var r=t(p.inputs[e.inputType]);r.find("input").attr("value",n.value),r.find("label").append(n.text),s(g,function(t,e){e===n.value&&r.find("input").prop("checked",!0)}),a.append(r)})}return e.placeholder&&a.attr("placeholder",e.placeholder),e.pattern&&a.attr("pattern",e.pattern),o.append(a),o.on("submit",function(t){t.preventDefault(),t.stopPropagation(),r.find(".btn-primary").click()}),r=m.dialog(e),r.off("shown.bs.modal"),r.on("shown.bs.modal",function(){a.focus()}),l===!0&&r.modal("show"),r},m.dialog=function(e){e=a(e);var i=t(p.dialog),n=i.find(".modal-dialog"),o=i.find(".modal-body"),l=e.buttons,u="",h={onEscape:e.onEscape};if(s(l,function(t,e){u+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",h[t]=e.callback}),o.find(".bootbox-body").html(e.message),e.animate===!0&&i.addClass("fade"),e.className&&i.addClass(e.className),"large"===e.size&&n.addClass("modal-lg"),"small"===e.size&&n.addClass("modal-sm"),e.title&&o.before(p.header),e.closeButton){var c=t(p.closeButton);e.title?i.find(".modal-header").prepend(c):c.css("margin-top","-10px").prependTo(o)}return e.title&&i.find(".modal-title").html(e.title),u.length&&(o.after(p.footer),i.find(".modal-footer").html(u)),i.on("hidden.bs.modal",function(t){t.target===this&&i.remove()}),i.on("shown.bs.modal",function(){i.find(".btn-primary:first").focus()}),i.on("escape.close.bb",function(t){h.onEscape&&r(t,i,h.onEscape)}),i.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");r(e,i,h[n])}),i.on("click",".bootbox-close-button",function(t){r(t,i,h.onEscape)}),i.on("keyup",function(t){27===t.which&&i.trigger("escape.close.bb")}),t(e.container).append(i),i.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&i.modal("show"),i},m.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},m.hideAll=function(){return t(".bootbox").modal("hide"),m};var g={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return m.init=function(i){return e(i||t)},m})}.call(this),function(){!function(){var e={},i=null,n=!0,r=!1;try{"undefined"!=typeof AudioContext?i=new AudioContext:"undefined"!=typeof webkitAudioContext?i=new webkitAudioContext:n=!1}catch(o){n=!1}if(!n)if("undefined"!=typeof Audio)try{new Audio}catch(o){r=!0}else r=!0;if(n){var s="undefined"==typeof i.createGain?i.createGainNode():i.createGain();s.gain.value=1,s.connect(i.destination)}var a=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=n,this.ctx=i,this.noAudio=r,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};a.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,n&&(s.gain.value=t);for(var i in e._howls)if(e._howls.hasOwnProperty(i)&&e._howls[i]._webAudio===!1)for(var r=0;r<e._howls[i]._audioNode.length;r++)e._howls[i]._audioNode[r].volume=e._howls[i]._volume*e._volume;return e}return n?s.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,n&&(s.gain.value=t?0:e._volume);for(var i in e._howls)if(e._howls.hasOwnProperty(i)&&e._howls[i]._webAudio===!1)for(var r=0;r<e._howls[i]._audioNode.length;r++)e._howls[i]._audioNode[r].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!i||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var e=function(){var n=i.createBuffer(1,1,22050),r=i.createBufferSource();r.buffer=n,r.connect(i.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",e,!1))},0)};return window.addEventListener("touchstart",e,!1),t}}};var l=null,u={};r||(l=new Audio,u={mp3:!!l.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!l.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var h=new a(u),c=function(t){var e=this;e._autoplay=t.autoplay||!1,e._buffer=t.buffer||!1,e._duration=t.duration||0,e._format=t.format||null,e._loop=t.loop||!1,e._loaded=!1,e._sprite=t.sprite||{},e._src=t.src||"",e._pos3d=t.pos3d||[0,0,-.5],e._volume=void 0!==t.volume?t.volume:1,e._urls=t.urls||[],e._rate=t.rate||1,e._model=t.model||null,e._onload=[t.onload||function(){}],e._onloaderror=[t.onloaderror||function(){}],e._onend=[t.onend||function(){}],e._onpause=[t.onpause||function(){}],e._onplay=[t.onplay||function(){}],e._onendTimer=[],e._webAudio=n&&!e._buffer,e._audioNode=[],e._webAudio&&e._setupAudioNode(),"undefined"!=typeof i&&i&&h.iOSAutoEnable&&h._enableiOSAudio(),h._howls.push(e),e.load()};if(c.prototype={load:function(){var t=this,e=null;if(r)return void t.on("loaderror");for(var i=0;i<t._urls.length;i++){var n,o;if(t._format)n=t._format;else{if(o=t._urls[i],n=/^data:audio\/([^;,]+);/i.exec(o),n||(n=/\.([^.]+)$/.exec(o.split("?",1)[0])),!n)return void t.on("loaderror");n=n[1].toLowerCase()}if(u[n]){e=t._urls[i];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)d(t,e);else{var s=new Audio;s.addEventListener("error",function(){s.error&&4===s.error.code&&(a.noAudio=!0),t.on("loaderror",{type:s.error?s.error.code:0})},!1),t._audioNode.push(s),s.src=e,s._pos=0,s.preload="auto",s.volume=h._muted?0:t._volume*h.volume();var l=function(){t._duration=Math.ceil(10*s.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),s.removeEventListener("canplaythrough",l,!1)};s.addEventListener("canplaythrough",l,!1),s.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,e){var n=this;return"function"==typeof t&&(e=t),t&&"function"!=typeof t||(t="_default"),n._loaded?n._sprite[t]?(n._inactiveNode(function(r){r._sprite=t;var o=r._pos>0?r._pos:n._sprite[t][0]/1e3,s=0;n._webAudio?(s=n._sprite[t][1]/1e3-r._pos,r._pos>0&&(o=n._sprite[t][0]/1e3+o)):s=n._sprite[t][1]/1e3-(o-n._sprite[t][0]/1e3);var a,l=!(!n._loop&&!n._sprite[t][2]),u="string"==typeof e?e:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:u,sprite:t,loop:l};a=setTimeout(function(){!n._webAudio&&l&&n.stop(e.id).play(t,e.id),n._webAudio&&!l&&(n._nodeById(e.id).paused=!0,n._nodeById(e.id)._pos=0,n._clearEndTimer(e.id)),n._webAudio||l||n.stop(e.id),n.on("end",u)},1e3*s),n._onendTimer.push({timer:a,id:e.id})}(),n._webAudio){var c=n._sprite[t][0]/1e3,d=n._sprite[t][1]/1e3;r.id=u,r.paused=!1,m(n,[l,c,d],u),n._playStart=i.currentTime,r.gain.value=n._volume,"undefined"==typeof r.bufferSource.start?r.bufferSource.noteGrainOn(0,o,s):r.bufferSource.start(0,o,s)}else{if(4!==r.readyState&&(r.readyState||!navigator.isCocoonJS))return n._clearEndTimer(u),function(){var i=n,o=t,s=e,a=r,l=function(){i.play(o,s),a.removeEventListener("canplaythrough",l,!1)};a.addEventListener("canplaythrough",l,!1)}(),n;r.readyState=4,r.id=u,r.currentTime=o,r.muted=h._muted||r.muted,r.volume=n._volume*h.volume(),setTimeout(function(){r.play()},0)}return n.on("play"),"function"==typeof e&&e(u),n}),n):("function"==typeof e&&e(),n):(n.on("load",function(){n.play(t,e)}),n)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=e.pos(null,t),e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else i.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var i=t?e._nodeById(t):e._activeNode();if(i)if(i._pos=0,e._webAudio){if(!i.bufferSource||i.paused)return e;i.paused=!0,"undefined"==typeof i.bufferSource.stop?i.bufferSource.noteOff(0):i.bufferSource.stop(0)}else isNaN(i.duration)||(i.pause(),i.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=0:i.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var i=t?e._nodeById(t):e._activeNode();return i&&(e._webAudio?i.gain.value=e._volume:i.muted=!1),e},volume:function(t,e){var i=this;if(t=parseFloat(t),t>=0&&1>=t){if(i._volume=t,!i._loaded)return i.on("play",function(){i.volume(t,e)}),i;var n=e?i._nodeById(e):i._activeNode();return n&&(i._webAudio?n.gain.value=t:n.volume=t*h.volume()),i}return i._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,e){var n=this;if(!n._loaded)return n.on("load",function(){n.pos(t)}),"number"==typeof t?n:n._pos||0;t=parseFloat(t);var r=e?n._nodeById(e):n._activeNode();if(r)return t>=0?(n.pause(e),r._pos=t,n.play(r._sprite,e),n):n._webAudio?r._pos+(i.currentTime-n._playStart):r.currentTime;if(t>=0)return n;for(var o=0;o<n._audioNode.length;o++)if(n._audioNode[o].paused&&4===n._audioNode[o].readyState)return n._webAudio?n._audioNode[o]._pos:n._audioNode[o].currentTime},pos3d:function(t,e,i,n){var r=this;if(e="undefined"!=typeof e&&e?e:0,i="undefined"!=typeof i&&i?i:-.5,!r._loaded)return r.on("play",function(){r.pos3d(t,e,i,n)}),r;if(!(t>=0||0>t))return r._pos3d;if(r._webAudio){var o=n?r._nodeById(n):r._activeNode();o&&(r._pos3d=[t,e,i],o.panner.setPosition(t,e,i),o.panner.panningModel=r._model||"HRTF")}return r},fade:function(t,e,i,n,r){var o=this,s=Math.abs(t-e),a=t>e?"down":"up",l=s/.01,u=i/l;if(!o._loaded)return o.on("load",function(){o.fade(t,e,i,n,r)}),o;o.volume(t,r);for(var h=1;l>=h;h++)!function(){var t=o._volume+("up"===a?.01:-.01)*h,i=Math.round(1e3*t)/1e3,s=e;setTimeout(function(){o.volume(i,r),i===s&&n&&n()},u*h)}()},fadeIn:function(t,e,i){return this.volume(0).play().fade(0,t,e,i)},fadeOut:function(t,e,i,n){var r=this;return r.fade(r._volume,t,e,function(){i&&i(),r.pause(n),r.on("end")},n)},_nodeById:function(t){for(var e=this,i=e._audioNode[0],n=0;n<e._audioNode.length;n++)if(e._audioNode[n].id===t){i=e._audioNode[n];break}return i},_activeNode:function(){for(var t=this,e=null,i=0;i<t._audioNode.length;i++)if(!t._audioNode[i].paused){e=t._audioNode[i];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,i=null,n=0;n<e._audioNode.length;n++)if(e._audioNode[n].paused&&4===e._audioNode[n].readyState){t(e._audioNode[n]),i=!0;break}if(e._drainPool(),!i){var r;if(e._webAudio)r=e._setupAudioNode(),t(r);else{e.load(),r=e._audioNode[e._audioNode.length-1];var o=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",s=function(){r.removeEventListener(o,s,!1),t(r)};r.addEventListener(o,s,!1)}}},_drainPool:function(){var t,e=this,i=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&i++;for(t=e._audioNode.length-1;t>=0&&!(5>=i);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),i--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,i=0,n=0;n<e._onendTimer.length;n++)if(e._onendTimer[n].id===t){i=n;break}var r=e._onendTimer[i];r&&(clearTimeout(r.timer),e._onendTimer.splice(i,1))},_setupAudioNode:function(){var t=this,e=t._audioNode,n=t._audioNode.length;return e[n]="undefined"==typeof i.createGain?i.createGainNode():i.createGain(),e[n].gain.value=t._volume,e[n].paused=!0,e[n]._pos=0,e[n].readyState=4,e[n].connect(s),e[n].panner=i.createPanner(),e[n].panner.panningModel=t._model||"equalpower",e[n].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),e[n].panner.connect(e[n]),e[n]},on:function(t,e){var i=this,n=i["_on"+t];if("function"==typeof e)n.push(e);else for(var r=0;r<n.length;r++)e?n[r].call(i,e):n[r].call(i);return i},off:function(t,e){var i=this,n=i["_on"+t],r=e?e.toString():null;if(r){for(var o=0;o<n.length;o++)if(r===n[o].toString()){n.splice(o,1);break}}else i["_on"+t]=[];return i},unload:function(){for(var t=this,i=t._audioNode,n=0;n<t._audioNode.length;n++)i[n].paused||(t.stop(i[n].id),t.on("end",i[n].id)),t._webAudio?i[n].disconnect(0):i[n].src="";for(n=0;n<t._onendTimer.length;n++)clearTimeout(t._onendTimer[n].timer);var r=h._howls.indexOf(t);null!==r&&r>=0&&h._howls.splice(r,1),delete e[t._src],t=null}},n)var d=function(t,i){if(i in e)return t._duration=e[i].duration,void f(t);if(/^data:[^;]+;base64,/.test(i)){for(var n=atob(i.split(",")[1]),r=new Uint8Array(n.length),o=0;o<n.length;++o)r[o]=n.charCodeAt(o);p(r.buffer,t,i)}else{var s=new XMLHttpRequest;s.open("GET",i,!0),s.responseType="arraybuffer",s.onload=function(){p(s.response,t,i)},s.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[i],t.load())};try{s.send()}catch(a){s.onerror()}}},p=function(t,n,r){i.decodeAudioData(t,function(t){t&&(e[r]=t,f(n,t))},function(){n.on("loaderror")})},f=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},m=function(t,n,r){var o=t._nodeById(r);o.bufferSource=i.createBufferSource(),o.bufferSource.buffer=e[t._src],o.bufferSource.connect(o.panner),o.bufferSource.loop=n[0],n[0]&&(o.bufferSource.loopStart=n[1],o.bufferSource.loopEnd=n[1]+n[2]),o.bufferSource.playbackRate.value=t._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:h,Howl:c}}),"undefined"!=typeof t&&(t.Howler=h,t.Howl=c),"undefined"!=typeof window&&(window.Howler=h,window.Howl=c)}()}.call(this),function(){!function(t,e){var i={type:"",text:"",top:0,left:0,angle:45,size:50,distance:50,template:'<div class="grumble" style="display:none;filter:progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\')">&#160;</div>',textTemplate:'<div class="grumble-text" style="display:none;"><div class="outer"><div class="inner">{text}</div></div></div>',context:null};e.GrumbleBubble=function(e){this.options=t.extend({},i,e),this.context=t(this.options.context||t("body")),this.css={},this.create()},e.GrumbleBubble.prototype={create:function(){var i=e.GrumbleBubble.prototype.tmpl;this.bubble=t(i(this.options.template)),this.text=t(i(this.options.textTemplate,{text:this.options.text})),this.prepare()},setBubbleRotation:function(){this.rotateDeg=this.options.angle-45,this.rotateDeg<0&&(this.rotateDeg+=360)},prepare:function(){var t=this.bubble.get(0).parentNode;this.setBubbleRotation(),this.applyStyles(),t!==this.context&&this.append(),this.rotate()},applyStyles:function(){this.setPosition(),this.css.width=this.options.size,this.css.height=this.options.size,this.text.css(this.css).addClass("grumble-text"+this.options.size),this.bubble.css(this.css).addClass(this.options.type+"grumble"+this.options.size),this.realLeft=this.css.left,this.realTop=this.css.top},setPosition:function(){var t=this.options.angle/-360,e=Math.cos(2*t*Math.PI),i=Math.sin(2*t*Math.PI),n=this.options.size/2,r=this.options.size*this.options.size,o=Math.sqrt(r+r)/2,s=this.options.top+n-e*(this.options.distance+o),a=this.options.left-n-i*(this.options.distance+o);this.css.top=s-this.options.size,this.css.left=a},append:function(){var t=this.context;this.bubble.appendTo(t),this.text.appendTo(t)},rotate:function(){"Microsoft Internet Explorer"===navigator.appName&&e.document.documentMode<10?this.ieRotate():this.cssRotate()},cssRotate:function(){this.bubble.css({"-moz-transform":"rotate("+this.rotateDeg+"deg)","-webkit-transform":"rotate("+this.rotateDeg+"deg)","-o-transform":"rotate("+this.rotateDeg+"deg)",transform:"rotate("+this.rotateDeg+"deg)"})},ieRotate:function(){var t,e,i=this.rotateDeg,n=2*Math.PI/360,r=i*n,o=Math.cos(r),s=Math.sin(r),a=this.bubble.get(0);a.filters.item(0).M11=o,a.filters.item(0).M12=-s,a.filters.item(0).M21=s,a.filters.item(0).M22=o,t=this.bubble.width(),e=this.bubble.height(),this.bubble.css({left:this.css.left-(t-this.options.size)/2,top:this.css.top-(e-this.options.size)/2})},adjust:function(e){t.extend(this.options,e),this.prepare()},tmpl:function(t,e,i){for(var n in e)null===e[n]&&(e[n]=""),"object"==typeof e[n]&&e[n].length&&(e[n]=e[n].join(", ")),t=t.replace(new RegExp("{"+n+"}","g"),i?escape(e[n]):e[n]);return t}}}(i,window)}.call(this),function(){!function(t,e){function i(t,e){var i,n;return e?(n=Number(t.css("margin-top").replace("px",""))||0,i=t.position(),i.top+=n+e.scrollTop()+t.height(),i.left+=t.width()/2):(i=t.offset(),i.top+=t.height(),i.left+=t.width()/2),i}function n(e,i,r){var o=t('<div style="position:absolute;visibility:hidden;width:'+e+'px;">'+r+"</div>").appendTo(t(document.body)),s=2*o.outerHeight()+.2*e,a=t.inArray(e,i);return o.remove(),s>=e&&i[++a]?n(i[a],i,r):e}var r={text:"",angle:45,size:50,sizeRange:[50,100,150,200],distance:0,type:"",useRelativePositioning:!1,showAfter:0,hideAfter:!1,hideOnClick:!1,hasHideButton:!1,buttonTemplate:'<div class="grumble-button" style="display:none" title="{hideText}">x</div>',buttonHideText:"Hide",onHide:function(){},onShow:function(){},onBeginHide:function(){}},o=[],s="Microsoft Internet Explorer"===navigator.appName&&window.document.documentMode<10;t.fn.grumble=function(r,a){return"string"==typeof r?(this.trigger({type:r+".bubble",adjustments:a}),this):this.each(function(){var a,l,u,h,c,d=t(this),p=t.extend({},t.fn.grumble.defaults,r,d.data("grumble")||{}),f=n(p.size,p.sizeRange,p.text);return p.useRelativePositioning&&(c=d.offsetParent()),h=i(d,c),p.top=h.top,p.left=h.left,t.data(this,"hazGrumble")?(d.grumble("adjust",r),d.grumble("show"),!0):(t.data(this,"hazGrumble",!0),u={init:function(){a=new e({text:p.text,top:p.top,left:p.left,angle:p.angle,size:f,distance:p.distance,type:p.type,context:c}),p.hasHideButton&&this.addButton(),o.push({grumble:a,button:l,onHide:function(){u.isVisible=!1,t(document.body).unbind("click.bubble"),u.doOnBeginHideCallback(),u.doOnHideCallback()
}}),this.showBubble(),this.prepareEvents()},addButton:function(){var i=e.prototype.tmpl;l=t(i(p.buttonTemplate,{hideText:p.buttonHideText})).css({left:a.realLeft+f-10,top:a.realTop+f-10}).insertAfter(a.text)},rePositionButton:function(){l&&l.css({left:a.realLeft+f-10,top:a.realTop+f-10})},createFxQueue:function(){a.bubble.queue("fx"),a.text.queue("fx"),a.bubble.delay(p.showAfter),a.text.delay(p.showAfter),l&&l.delay(p.showAfter)},showBubble:function(){1!=u.isVisible&&(p.showAfter&&u.createFxQueue(),s?(a.bubble.queue("fx",function(t){a.bubble.show(),t()}),a.text.queue("fx",function(t){a.text.show(),t()}),l&&l.queue("fx",function(t){l.show(),t()})):(a.bubble.fadeTo("fast",1),a.text.fadeTo("fast",1),l&&l.fadeTo("fast",1)),a.bubble.queue("fx",function(t){u.isVisible=!0,(p.hideOnClick||p.hasHideButton)&&u.hideOnClick(),u.doOnShowCallback(),t()}),p.hideAfter&&u.hideBubble())},hideBubble:function(){a.bubble.delay(p.hideAfter),a.text.delay(p.hideAfter),a.bubble.queue("fx",function(t){u.doOnBeginHideCallback(),t()}),s?(a.bubble.queue("fx",function(t){a.bubble.hide(),t()}),a.bubble.queue("fx",function(t){a.text.hide(),t()}),l&&l.queue("fx",function(t){l.hide(),t()})):(a.bubble.fadeOut(),a.text.fadeOut(),l&&l.fadeOut()),a.bubble.queue("fx",function(t){u.isVisible=!1,u.doOnHideCallback(),t()})},doOnBeginHideCallback:function(){p.onBeginHide(a,l)},doOnHideCallback:function(){p.onHide(a,l)},doOnShowCallback:function(){p.onShow(a,l)},hideOnClick:function(){setTimeout(function(){var e=function(){u.hideBubble(a,l),t(document.body).unbind("click.bubble",e)};t(document.body).bind("click.bubble",e)},1e3)},prepareEvents:function(){t(window).bind("resize.bubble",function(){var t;t=i(d,c),a.adjust({top:t.top,left:t.left}),u.rePositionButton()}),d.bind("hide.bubble",function(){u.hideBubble(a,l)}),d.bind("adjust.bubble",function(t){t.adjustments&&"object"==typeof t.adjustments&&a.adjust(t.adjustments)}),d.bind("show.bubble",function(){u.showBubble(a,l)}),d.bind("delete.bubble",function(){a.bubble.hide().remove(),a.text.hide().remove(),l&&l.hide().remove();for(var t=o.length,e=0;t>e;e++)if(a===o[e].grumble){o.splice(e,1);break}d.removeData("hazGrumble")})}},void u.init())})},t.fn.grumble.defaults=r,t(document).bind("keyup.bubble",function(e){27===e.keyCode&&t.each(o,function(t,e){e.grumble.bubble.clearQueue().hide(),e.grumble.text.clearQueue().hide(),e.button&&e.button.clearQueue().hide(),e.onHide()})})}(n,GrumbleBubble)}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-libs"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}(),function(){{var t;Package.meteor.Meteor}(function(){t={extensions:{}};var e=(t.forEach=function(t,e){if("function"==typeof t.forEach)t.forEach(e);else{var i,n=t.length;for(i=0;n>i;i++)e(t[i],i,t)}},function(t){return t.replace(/[_-]||\s/g,"").toLowerCase()});t.converter=function(i){var n,r,o,s=0,a=[],l=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var u=require("fs");if(u){var h=u.readdirSync((__dirname||".")+"/extensions").filter(function(t){return~t.indexOf(".js")}).map(function(t){return t.replace(/\.js$/,"")});t.forEach(h,function(i){var n=e(i);t.extensions[n]=require("./extensions/"+i)})}}if(this.makeHtml=function(e){return n={},r={},o=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=B(e),e=e.replace(/^[ \t]+$/gm,""),t.forEach(a,function(t){e=p(t,e)}),e=L(e),e=m(e),e=f(e),e=_(e),e=j(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),t.forEach(l,function(t){e=p(t,e)}),e},i&&i.extensions){var c=this;t.forEach(i.extensions,function(i){if("string"==typeof i&&(i=t.extensions[e(i)]),"function"!=typeof i)throw"Extension '"+i+"' could not be loaded.  It was either not found or is not a valid extension.";t.forEach(i(c),function(t){t.type?"language"===t.type||"lang"===t.type?a.push(t):("output"===t.type||"html"===t.type)&&l.push(t):l.push(t)})})}var d,p=function(t,e){if(t.regex){var i=new RegExp(t.regex,"g");return e.replace(i,t.replace)}return t.filter?t.filter(e):void 0},f=function(t){return t+="~0",t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(t,e,i,o,s){return e=e.toLowerCase(),n[e]=I(i),o?o+s:(s&&(r[e]=s.replace(/"/g,"&quot;")),"")}),t=t.replace(/~0/,"")},m=function(t){t=t.replace(/\n/g,"\n\n");return t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,g),t=t.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g),t=t.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,g),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g),t=t.replace(/\n\n/g,"\n")},g=function(t,e){var i=e;return i=i.replace(/\n\n/g,"\n"),i=i.replace(/^\n/,""),i=i.replace(/\n+$/g,""),i="\n\n~K"+(o.push(i)-1)+"K\n\n"},_=function(t){t=M(t);var e=C("<hr />");return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,e),t=k(t),t=S(t),t=A(t),t=m(t),t=O(t)},y=function(t){return t=P(t),t=v(t),t=R(t),t=x(t),t=b(t),t=Y(t),t=I(t),t=E(t),t=t.replace(/  +\n/g," <br />\n")},v=function(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=U(e,"\\`*_")})},b=function(t){return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w),t=t.replace(/(\[([^\[\]]+)\])()()()()()/g,w)},w=function(t,e,i,o,s,a,l,u){void 0==u&&(u="");var h=e,c=i,d=o.toLowerCase(),p=s,f=u;if(""==p)if(""==d&&(d=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+d,void 0!=n[d])p=n[d],void 0!=r[d]&&(f=r[d]);else{if(!(h.search(/\(\s*\)$/m)>-1))return h;p=""}p=U(p,"*_");var m='<a href="'+p+'"';return""!=f&&(f=f.replace(/"/g,"&quot;"),f=U(f,"*_"),m+=' title="'+f+'"'),m+=">"+c+"</a>"},x=function(t){return t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T),t=t.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T)},T=function(t,e,i,o,s,a,l,u){var h=e,c=i,d=o.toLowerCase(),p=s,f=u;if(f||(f=""),""==p){if(""==d&&(d=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+d,void 0==n[d])return h;p=n[d],void 0!=r[d]&&(f=r[d])}c=c.replace(/"/g,"&quot;"),p=U(p,"*_");var m='<img src="'+p+'" alt="'+c+'"';return f=f.replace(/"/g,"&quot;"),f=U(f,"*_"),m+=' title="'+f+'"',m+=" />"},M=function(t){function e(t){return t.replace(/[^\w]/g,"").toLowerCase()}return t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,i){return C('<h1 id="'+e(i)+'">'+y(i)+"</h1>")}),t=t.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,i){return C('<h2 id="'+e(i)+'">'+y(i)+"</h2>")}),t=t.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,i,n){var r=i.length;return C("<h"+r+' id="'+e(n)+'">'+y(n)+"</h"+r+">")})},k=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return s?t=t.replace(e,function(t,e,i){var n=e,r=i.search(/[*+-]/g)>-1?"ul":"ol";n=n.replace(/\n{2,}/g,"\n\n\n");var o=d(n);return o=o.replace(/\s+$/,""),o="<"+r+">"+o+"</"+r+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,i,n){var r=e,o=i,s=n.search(/[*+-]/g)>-1?"ul":"ol",o=o.replace(/\n{2,}/g,"\n\n\n"),a=d(o);return a=r+"<"+s+">\n"+a+"</"+s+">\n"})),t=t.replace(/~0/,"")};d=function(t){return s++,t=t.replace(/\n{2,}$/,"\n"),t+="~0",t=t.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,e,i,n,r){var o=r,s=e;return s||o.search(/\n{2,}/)>-1?o=_(F(o)):(o=k(F(o)),o=o.replace(/\n$/,""),o=y(o)),"<li>"+o+"</li>\n"}),t=t.replace(/~0/g,""),s--,t};var S=function(t){return t+="~0",t=t.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,i){var n=e,r=i;return n=D(F(n)),n=B(n),n=n.replace(/^\n+/g,""),n=n.replace(/\n+$/g,""),n="<pre><code>"+n+"\n</code></pre>",C(n)+r}),t=t.replace(/~0/,"")},L=function(t){return t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,e,i){var n=e,r=i;return r=D(r),r=B(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code"+(n?' class="'+n+'"':"")+">"+r+"\n</code></pre>",C(r)}),t=t.replace(/~0/,"")},C=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(o.push(t)-1)+"K\n\n"},P=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,i,n){var r=n;return r=r.replace(/^([ \t]*)/g,""),r=r.replace(/[ \t]*$/g,""),r=D(r),e+"<code>"+r+"</code>"})},D=function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=U(t,"*_{}[]\\",!1)},E=function(t){return t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},A=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var i=e;return i=i.replace(/^[ \t]*>[ \t]?/gm,"~0"),i=i.replace(/~0/g,""),i=i.replace(/^[ \t]+$/gm,""),i=_(i),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var i=e;return i=i.replace(/^  /gm,"~0"),i=i.replace(/~0/g,"")}),C("<blockquote>\n"+i+"\n</blockquote>")})},O=function(t){t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var e=t.split(/\n{2,}/g),i=[],n=e.length,r=0;n>r;r++){var s=e[r];s.search(/~K(\d+)K/g)>=0?i.push(s):s.search(/\S/)>=0&&(s=y(s),s=s.replace(/^([ \t]*)/g,"<p>"),s+="</p>",i.push(s))}n=i.length;for(var r=0;n>r;r++)for(;i[r].search(/~K(\d+)K/)>=0;){var a=o[RegExp.$1];a=a.replace(/\$/g,"$$$$"),i[r]=i[r].replace(/~K\d+K/,a)}return i.join("\n\n")},I=function(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},R=function(t){return t=t.replace(/\\(\\)/g,H),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,H)},Y=function(t){return t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),t=t.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(t,e){return N(j(e))})},N=function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,function(t){if("@"==t)t=e[Math.floor(2*Math.random())](t);else if(":"!=t){var i=Math.random();t=i>.9?e[2](t):i>.45?e[1](t):e[0](t)}return t}),t='<a href="'+t+'">'+t+"</a>",t=t.replace(/">.+:/g,'">')},j=function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var i=parseInt(e);return String.fromCharCode(i)})},F=function(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")},B=function(t){return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,function(t,e){for(var i=e,n=4-i.length%4,r=0;n>r;r++)i+=" ";return i}),t=t.replace(/~A/g,"    "),t=t.replace(/~B/g,"")},U=function(t,e,i){var n="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";i&&(n="\\\\"+n);var r=new RegExp(n,"g");return t=t.replace(r,H)},H=function(t,e){var i=e.charCodeAt(0);return"~E"+i+"E"}},"undefined"!=typeof module&&(module.exports=t),"function"==typeof define&&define.amd&&define("showdown",function(){return t})}).call(this),function(){if(Package.templating){var e=Package.templating.Template,i=Package.ui.UI,n=Package.htmljs.HTML,r=Package.blaze.Blaze;i.registerHelper("markdown",e.__create__("markdown",function(){var e=this,i="";e.templateContentBlock&&(i=r.toText(e.templateContentBlock,n.TEXTMODE.STRING));var o=new t.converter;return n.Raw(o.makeHtml(i))}))}}.call(this),"undefined"==typeof Package&&(Package={}),Package.showdown={Showdown:t}}(),function(){var t,e,i,n,r,o,s,a=Package.meteor.Meteor,l=Package.deps.Deps,u=Package.underscore._,h=(Package.check.check,Package.check.Match),c=Package.random.Random;(function(){!function(){"use strict";function t(t){this.s=null!==t&&void 0!==t?"string"==typeof t?t:t.toString():t,this.orig=t,null!==t&&void 0!==t?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=t.length:this.length=-1}function e(){for(var t in h)!function(t){var e=h[t];u.hasOwnProperty(t)||(c.push(t),u[t]=function(){return String.prototype.s=this,e.apply(this,arguments)})}(t)}function i(){for(var t=0;t<c.length;++t)delete String.prototype[c[t]];c.length=0}function n(){for(var t=r(),e={},i=0;i<t.length;++i){var n=t[i],o=u[n];try{var s=typeof o.apply("teststring",[]);e[n]=s}catch(a){}}return e}function r(){var t=[];if(Object.getOwnPropertyNames)return t=Object.getOwnPropertyNames(u),t.splice(t.indexOf("valueOf"),1),t.splice(t.indexOf("toString"),1),t;var e={};for(var i in String.prototype)e[i]=i;for(var i in Object.prototype)delete e[i];for(var i in e)t.push(i);return t}function o(e){return new t(e)}function s(t,e){var i,n=[];for(i=0;i<t.length;i++)n.push(t[i]),e&&e.call(t,t[i],i);return n}var a="1.5.0",l={},u=String.prototype,h=t.prototype={between:function(e,i){var n=this.s,r=n.indexOf(e),o=n.indexOf(i),s=r+e.length;return new t(o>r?n.slice(s,o):"")},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(t,e,i){return i?i.toUpperCase():""});return new t(e)},capitalize:function(){return new t(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(t){return this.s.charAt(t)},chompLeft:function(e){var i=this.s;return 0===i.indexOf(e)?(i=i.slice(e.length),new t(i)):this},chompRight:function(e){if(this.endsWith(e)){var i=this.s;return i=i.slice(0,i.length-e.length),new t(i)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new t(e)},contains:function(t){return this.s.indexOf(t)>=0},count:function(t){for(var e=0,i=this.s.indexOf(t);i>=0;)e+=1,i=this.s.indexOf(t,i+1);return e},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new t(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(t,e){return String.fromCharCode(e)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(t,e){return String.fromCharCode(parseInt(e,16))}).replace(/&([^;\W]+;?)/g,function(t,e){var i=e.replace(/;$/,""),n=l[e]||e.match(/;$/)&&l[i];return"number"==typeof n?String.fromCharCode(n):"string"==typeof n?n:t}),new t(e)},endsWith:function(t){var e=this.s.length-t.length;return e>=0&&this.s.indexOf(t,e)===e},escapeHTML:function(){return new t(this.s.replace(/[&<>"']/g,function(t){return"&"+m[t]+";"}))},ensureLeft:function(e){var i=this.s;return 0===i.indexOf(e)?this:new t(e+i)},ensureRight:function(e){var i=this.s;return this.endsWith(e)?this:new t(i+e)},humanize:function(){if(null===this.s||void 0===this.s)return new t("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new t(e)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var i=this.s.substr(0,e);return new t(i)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,i){if(i=i||" ",this.s.length>=e)return new t(this.s);e-=this.s.length;var n=Array(Math.ceil(e/2)+1).join(i),r=Array(Math.floor(e/2)+1).join(i);return new t(n+this.s+r)},padLeft:function(e,i){return i=i||" ",new t(this.s.length>=e?this.s:Array(e-this.s.length+1).join(i)+this.s)},padRight:function(e,i){return i=i||" ",new t(this.s.length>=e?this.s:this.s+Array(e-this.s.length+1).join(i))},parseCSV:function(t,e,i,n){t=t||",",i=i||"\\","undefined"==typeof e&&(e='"');var r=0,o=[],s=[],a=this.s.length,l=!1,u=this,h=function(t){return u.s.charAt(t)};if("undefined"!=typeof n)var c=[];for(e||(l=!0);a>r;){var d=h(r);switch(d){case i:if(l&&(i!==e||h(r+1)===e)){r+=1,o.push(h(r));break}if(i!==e)break;case e:l=!l;break;case t:l&&e?o.push(d):(s.push(o.join("")),o.length=0);break;case n:l?o.push(d):c&&(s.push(o.join("")),c.push(s),s=[],o.length=0);break;default:l&&o.push(d)}r+=1}return s.push(o.join("")),c?(c.push(s),c):s},replaceAll:function(e,i){var n=this.s.split(e).join(i);return new t(n)},right:function(e){if(e>=0){var i=this.s.substr(this.s.length-e,e);return new t(i)}return this.left(-e)},slugify:function(){var e=new t(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new t(e)},startsWith:function(t){return 0===this.s.lastIndexOf(t,0)},stripPunctuation:function(){return new t(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,i=arguments.length>0?arguments:[""];return s(i,function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")}),new t(e)},template:function(e,i,n){var r=this.s,i=i||o.TMPL_OPEN,n=n||o.TMPL_CLOSE,s=new RegExp(i+"(.+?)"+n,"g"),a=r.match(s)||[];return a.forEach(function(t){var o=t.substring(i.length,t.length-n.length);e[o]&&(r=r.replace(t,e[o]))}),new t(r)},times:function(e){return new t(new Array(e+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var t=this.s.toLowerCase();return"true"===t||"yes"===t||"on"===t}return this.orig===!0||1===this.orig},toFloat:function(t){var e=parseFloat(this.s);return t?parseFloat(e.toFixed(t)):e},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e="undefined"==typeof u.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new t(e)},trimLeft:function(){var e;return e=u.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new t(e)},trimRight:function(){var e;return e=u.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new t(e)},truncate:function(e,i){var n=this.s;if(e=~~e,i=i||"...",n.length<=e)return new t(n);var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=n.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):new t(o.slice(0,o.length-1)).trimRight().s,new t((o+i).length>n.length?n:n.slice(0,o.length)+i)},toCSV:function(){function e(t){return null!==t&&""!==t}var i=",",n='"',r="\\",o=!0,s=!1,a=[];if("object"==typeof arguments[0]?(i=arguments[0].delimiter||i,i=arguments[0].separator||i,n=arguments[0].qualifier||n,o=!!arguments[0].encloseNumbers,r=arguments[0].escape||r,s=!!arguments[0].keys):"string"==typeof arguments[0]&&(i=arguments[0]),"string"==typeof arguments[1]&&(n=arguments[1]),null===arguments[1]&&(n=null),this.orig instanceof Array)a=this.orig;else for(var l in this.orig)this.orig.hasOwnProperty(l)&&a.push(s?l:this.orig[l]);for(var u=r+n,h=[],c=0;c<a.length;++c){var d=e(n);if("number"==typeof a[c]&&(d&=o),d&&h.push(n),null!==a[c]&&void 0!==a[c]){var p=new t(a[c]).replaceAll(n,u).s;h.push(p)}else h.push("");d&&h.push(n),i&&h.push(i)}return h.length=h.length-1,new t(h.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new t(this.s.charAt(0)).isUpper()&&(e="_"+e),new t(e)},unescapeHTML:function(){return new t(this.s.replace(/\&([^;]+);/g,function(t,e){var i;return e in f?f[e]:(i=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(i[1],16)):(i=e.match(/^#(\d+)$/))?String.fromCharCode(~~i[1]):t}))},valueOf:function(){return this.s.valueOf()}},c=[],d=n();for(var p in d)!function(e){var i=u[e];"function"==typeof i&&(h[e]||(h[e]="string"===d[e]?function(){return new t(i.apply(this,arguments))}:i))}(p);h.repeat=h.times,h.include=h.contains,h.toInteger=h.toInt,h.toBool=h.toBoolean,h.decodeHTMLEntities=h.decodeHtmlEntities,o.extendPrototype=e,o.restorePrototype=i,o.VERSION=a,o.TMPL_OPEN="{{",o.TMPL_CLOSE="}}",o.ENTITIES=l,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):window.S=o;var f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in f)m[f[g]]=g;l={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this)}).call(this),function(){e=function(t,s){function a(t,e,o,l,c,d){!l&&o&&"$"===o.substring(0,1)&&(l=o,o=null);var p,f=!1,m=!1;o&&(c||("$push"===l||"$addToSet"===l||"$pop"===l?(i(t)&&"$each"in t?(t=t.$each,e+="[$each]"):o+=".0",c=!0):"$pull"===l&&(o+=".0",i(t)&&(m=!0),c=!0)),p=n(o),f=u.contains(s,p),e&&(h._affectedKeys[e]=o,h._genericAffectedKeys[e]=p,d&&h._positionsInsideArrays.push(e))),m||(u.isArray(t)&&!u.isEmpty(t)?(e&&h._parentPositions.push(e),u.each(t,function(t,i){a(t,e?e+"["+i+"]":i,o+"."+i,l,c,!0)})):(i(t)&&!f||!e)&&(e&&!u.isEmpty(t)&&(h._parentPositions.push(e),h._objectPositions.push(e)),u.each(t,function(i,n){void 0===i?delete t[n]:"$slice"!==n&&a(i,e?e+"["+n+"]":n,r(o,n),l,c,d)})))}function l(){h._affectedKeys={},h._genericAffectedKeys={},h._parentPositions=[],h._positionsInsideArrays=[],h._objectPositions=[],a(h._obj)}var h=this;h._obj=t,h._affectedKeys={},h._genericAffectedKeys={},h._parentPositions=[],h._positionsInsideArrays=[],h._objectPositions=[],a(h._obj),h.forEachNode=function(t,e){if("function"!=typeof t)throw new Error("filter requires a loop function");e=u.extend({endPointsOnly:!0},e);var i={};u.each(h._affectedKeys,function(n,r){e.endPointsOnly&&u.contains(h._parentPositions,r)||t.call({value:h.getValueForPosition(r),operator:o(r),position:r,key:n,genericKey:h._genericAffectedKeys[r],updateValue:function(t){i[r]=t},remove:function(){i[r]=void 0}})}),u.each(i,function(t,e){h.setValueForPosition(e,t)})},h.getValueForPosition=function(t){for(var e,n=t.split("["),r=h._obj,o=0,s=n.length;s>o;o++)if(e=n[o],"]"===e.slice(-1)&&(e=e.slice(0,-1)),r=r[e],!u.isArray(r)&&!i(r)&&s-1>o)return;return r},h.setValueForPosition=function(t,e){for(var n,r,o=t.split("["),s=h._obj,a=0,c=o.length;c>a;a++)if(r=o[a],"]"===r.slice(-1)&&(r=r.slice(0,-1)),a===c-1)s[r]=e,void 0===e&&delete s[r];else if(void 0===s[r]&&void 0!==e&&(n=o[a+1],n=parseInt(n,10),s[r]=isNaN(n)?{}:[]),s=s[r],!u.isArray(s)&&!i(s)&&c-1>a)return;l()},h.removeValueForPosition=function(t){h.setValueForPosition(t,void 0)},h.getKeyForPosition=function(t){return h._affectedKeys[t]},h.getGenericKeyForPosition=function(t){return h._genericAffectedKeys[t]},h.getInfoForKey=function(t){var e=h.getPositionForKey(t);if(e)return{value:h.getValueForPosition(e),operator:o(e)};for(var i,n,r=h.getPositionsForGenericKey(t+".$"),s=0,a=r.length;a>s;s++)if(i=r[s],n=h.getValueForPosition(i)||h.getValueForPosition(i.slice(0,i.lastIndexOf("["))))return{value:n,operator:o(i)}},h.getPositionForKey=function(t){for(var e in h._affectedKeys)if(h._affectedKeys.hasOwnProperty(e)&&h._affectedKeys[e]===t)return e},h.getPositionsForGenericKey=function(t){var e=[];for(var i in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(i)&&h._genericAffectedKeys[i]===t&&e.push(i);return e},h.getValueForKey=function(t){var e=h.getPositionForKey(t);return e?h.getValueForPosition(e):void 0},h.addKey=function(t,i,n){var r=n?n+"["+t+"]":e._keyToPosition(t);h.setValueForPosition(r,i)},h.removeGenericKeys=function(t){for(var e in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(e)&&u.contains(t,h._genericAffectedKeys[e])&&h.removeValueForPosition(e)},h.removeGenericKey=function(t){for(var e in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(e)&&h._genericAffectedKeys[e]===t&&h.removeValueForPosition(e)},h.removeKey=function(t){for(var e in h._affectedKeys)h._affectedKeys.hasOwnProperty(e)&&h._affectedKeys[e]===t&&h.removeValueForPosition(e)},h.removeKeys=function(t){for(var e=0,i=t.length;i>e;e++)h.removeKey(t[e])},h.filterGenericKeys=function(t){var e,i=[],n=[];for(var r in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(r)&&(e=h._genericAffectedKeys[r],u.contains(i,e)||(i.push(e),e&&!t(e)&&n.push(e)));u.each(n,function(t){h.removeGenericKey(t)})},h.setValueForKey=function(t,e){for(var i in h._affectedKeys)h._affectedKeys.hasOwnProperty(i)&&h._affectedKeys[i]===t&&h.setValueForPosition(i,e)},h.setValueForGenericKey=function(t,e){for(var i in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(i)&&h._genericAffectedKeys[i]===t&&h.setValueForPosition(i,e)},h.getObject=function(){return h._obj},h.getFlatObject=function(t){t=t||{};var e={};return u.each(h._affectedKeys,function(i,n){("string"==typeof i&&t.keepArrays===!0&&!u.contains(h._positionsInsideArrays,n)&&!u.contains(h._objectPositions,n)||!t.keepArrays&&!u.contains(h._parentPositions,n))&&(e[i]=h.getValueForPosition(n))}),e},h.affectsKey=function(t){return!!h.getPositionForKey(t)},h.affectsGenericKey=function(t){for(var e in h._genericAffectedKeys)if(h._genericAffectedKeys.hasOwnProperty(e)&&h._genericAffectedKeys[e]===t)return!0;return!1},h.affectsGenericKeyImplicit=function(t){for(var e in h._genericAffectedKeys)if(h._genericAffectedKeys.hasOwnProperty(e)){var i=h._genericAffectedKeys[e];if(i===t)return!0;if(i.substring(0,t.length+1)===t+".")return!0;var n=t.slice(-2);if(".$"===n&&t.slice(0,-2)===i)return!0}return!1}},e.expandKey=function(t,e,i){for(var n,r,o=e.split("["),s=i,a=0,l=o.length;l>a;a++)r=o[a],"]"===r.slice(-1)&&(r=r.slice(0,-1)),a===l-1?(s[r]=t,void 0===t&&delete s[r]):(n=o[a+1],n=parseInt(n,10),s[r]||(s[r]=isNaN(n)?{}:[])),s=s[r]},e._keyToPosition=function(t,e){var i="";return u.each(t.split("."),function(t,n){i+=0!==n||e?"["+t+"]":t}),i},e._positionToKey=function(t){var i=new e({});i.setValueForPosition(t,1);var n=i.getKeyForPosition(t);return i=null,n};var t=(u.isArray,function(t){return t===Object(t)});"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});var i=function(e){return t(e)&&Object.getPrototypeOf(e)===Object.prototype},n=function(t){return"string"!=typeof t?null:t.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},r=function(t,e){return"$each"===e?t:t?t+"."+e:e},o=function(t){var e=t.slice(0,t.indexOf("["));return"$"===e.substring(0,1)?e:null}}.call(this),function(){i={appendAffectedKey:function(t,e){return"$each"===e?t:t?t+"."+e:e},shouldCheck:function(t){if("$pushAll"===t)throw new Error("$pushAll is not supported; use $push + $each");return!u.contains(["$pull","$pullAll","$pop","$slice"],t)},isBlank:function(t){return"string"!=typeof t?!1:/^\s*$/.test(t)},isBlankNullOrUndefined:function(t){return void 0===t||null===t||i.isBlank(t)},isBlankOrNull:function(t){return null===t||i.isBlank(t)},errorObject:function(t,e,i){return{name:e,type:t,value:i}},isBasicObject:function(t){return u.isObject(t)&&Object.getPrototypeOf(t)===Object.prototype},safariBugFix:function(t){return"undefined"!=typeof Uint8Array&&t===Uint8Array||"undefined"!=typeof Uint16Array&&t===Uint16Array||"undefined"!=typeof Uint32Array&&t===Uint32Array||"undefined"!=typeof Uint8ClampedArray&&t===Uint8ClampedArray},isNotNullOrUndefined:function(t){return void 0!==t&&null!==t},extractOp:function(t){var e=t.slice(0,t.indexOf("["));return"$"===e.substring(0,1)?e:null},deleteIfPresent:function(t,e){e in t&&delete t[e]},looksLikeModifier:function(t){for(var e in t)if(t.hasOwnProperty(e)&&"$"===e.substring(0,1))return!0;return!1},dateToDateString:function(t){var e=t.getUTCMonth()+1;10>e&&(e="0"+e);var i=t.getUTCDate();return 10>i&&(i="0"+i),t.getUTCFullYear()+"-"+e+"-"+i}}}.call(this),function(){function r(t,e){a.startup(function(){l.autorun(function(){t.isValid()||console.log('SimpleSchema invalid keys for "'+e+'" context:',t.invalidKeys())})})}function o(t,n,r){function o(e){var i=this.key;if(!u.contains(l,i)){var o=i.lastIndexOf("."),s=-1===o?"":i.slice(0,o+1),a=!1,h=e.call(u.extend({isSet:void 0!==this.value,unset:function(){a=!0},value:this.value,operator:this.operator,field:function(e){var i=t.getInfoForKey(e)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator||null}},siblingField:function(e){var i=t.getInfoForKey(s+e)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator||null}}},r||{}),t.getObject());if(l.push(i),void 0===h)return void(a&&t.removeValueForPosition(this.position));var c,d;if(u.isObject(h))for(var p in h)if(h.hasOwnProperty(p)&&"$"===p.substring(0,1)){c=p,d=h[p];break}!c&&n&&"$"!==this.position.slice(0,1)&&(c="$set",d=h),c?(t.removeValueForPosition(this.position),t.setValueForPosition(c+"["+i+"]",d)):t.setValueForPosition(this.position,h)}}var s=this,l=[];a.isClient&&void 0===r.userId&&(r.userId=a.userId&&a.userId()||null),u.each(s._autoValues,function(r,s){var a,l,h,c;if(-1!==s.indexOf("$")){var d=s.slice(0,s.lastIndexOf("$")+1);
h=s.slice(d.length+1),a=e._keyToPosition(h,!0),h="."+h,c=t.getPositionsForGenericKey(d)}else c=t.getPositionsForGenericKey(s),c.length?(l=s,h="",a=""):(l=s,h="",a="",c=n?["$set["+s+"]"]:[e._keyToPosition(s)]);u.each(c,function(n){o.call({key:(l||e._positionToKey(n))+h,value:t.getValueForPosition(n+a),operator:i.extractOp(n),position:n+a},r)})})}a.isServer&&(n=Npm.require("string")),a.isClient&&(n=window.S);var c={type:h.Any,label:h.Optional(h.OneOf(String,Function)),optional:h.Optional(h.OneOf(Boolean,Function)),min:h.Optional(h.OneOf(Number,Date,Function)),max:h.Optional(h.OneOf(Number,Date,Function)),minCount:h.Optional(h.OneOf(Number,Function)),maxCount:h.Optional(h.OneOf(Number,Function)),allowedValues:h.Optional(h.OneOf([h.Any],Function)),decimal:h.Optional(Boolean),regEx:h.Optional(h.OneOf(RegExp,[RegExp])),custom:h.Optional(Function),blackbox:h.Optional(Boolean),autoValue:h.Optional(Function),defaultValue:h.Optional(h.Any)};t=function(t,e){var i,n=this,r=[],o=[],s=[],a=[],d=[];e=e||{},t=t||{},u.isArray(t)||(t=[t]),n._schema=v(t),n._schemaKeys=[],n._autoValues={},n._blackboxKeys=[],n._validators=[],n._messages={},n._depsMessages=new l.Dependency,n._depsLabels={},u.each(n._schema,function(t,e){if(!h.test(t,c))throw new Error("Invalid definition for "+e+" field.");if(i=e.split(".")[0],n._schemaKeys.push(e),"defaultValue"in t)if("autoValue"in t)console.warn('SimpleSchema: Found both autoValue and defaultValue options for "'+e+'". Ignoring defaultValue.');else{if(".$"===e.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have defaultValue.');n._autoValues[e]=function(t){return function(){return null!==this.operator||this.isSet?void 0:t}}(t.defaultValue)}if("autoValue"in t){if(".$"===e.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have autoValue.');n._autoValues[e]=t.autoValue}n._depsLabels[e]=new l.Dependency,t.blackbox===!0&&n._blackboxKeys.push(e),u.contains(r,i)||(r.push(i),t.optional||s.push(i),t.custom&&d.push(i)),t.optional||o.push(e),t.custom&&a.push(e)}),n._firstLevelSchemaKeys=r,n._requiredSchemaKeys=o,n._firstLevelRequiredSchemaKeys=s,n._requiredObjectKeys=T(n._schema,o),n._customSchemaKeys=a,n._firstLevelCustomSchemaKeys=d,n._customObjectKeys=T(n._schema,a),n._validationContexts={}},t.extendOptions=function(t){u.extend(c,t)};var d="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*",p="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z](?:[a-z-]*[a-z])?",f="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\.|$))+",m="(?:(?:[0-1]?\\d{1,2}|2[0-4]\\d|25[0-5])(?:\\.|$)){4}",g="(?:(?:[\\dA-Fa-f]{1,4}(?::|$)){8}|(?=(?:[^:\\s]|:[^:\\s])*::(?:[^:\\s]|:[^:\\s])*$)[\\dA-Fa-f]{0,4}(?:::?(?:[\\dA-Fa-f]{1,4}|$)){1,6})",_="(?:"+[f,m,g].join("|")+")";t.RegEx={Email:new RegExp("^"+d+"@"+p+"$"),WeakEmail:new RegExp("^"+d+"@"+_+"$"),Domain:new RegExp("^"+p+"$"),WeakDomain:new RegExp("^"+_+"$"),IP:new RegExp("^(?:"+m+"|"+g+")$"),IPv4:new RegExp("^"+m+"$"),IPv6:new RegExp("^"+g+"$"),Url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,Id:/^[23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz]{17}$/},t._makeGeneric=function(t){return"string"!=typeof t?null:t.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},t._depsGlobalMessages=new l.Dependency,t.prototype=new h.Where,t.prototype.condition=function(t){var e,i,n=this;if(u.each(t,function(t,n){"$"===n.substring(0,1)?e=!0:i=!0}),e&&i)throw new h.Error("Object cannot contain modifier operators alongside other keys");if(!n.newContext().validate(t,{modifier:e,filter:!1,autoConvert:!1}))throw new h.Error("One or more properties do not match the schema.");return!0},t.prototype.namedContext=function(e){var i=this;return"string"!=typeof e&&(e="default"),i._validationContexts[e]||(i._validationContexts[e]=new s(i),t.debug&&a.isClient&&l.nonreactive(function(){r(i._validationContexts[e],e)})),i._validationContexts[e]},t._validators=[],t.addValidator=function(e){t._validators.push(e)},t.prototype.addValidator=t.prototype.validator=function(t){this._validators.push(t)},t.prototype.clean=function(i,n){var r=this;if(n=u.extend({filter:!0,autoConvert:!0,removeEmptyStrings:!0,getAutoValues:!0,isModifier:!1,extendAutoValueContext:{}},n||{}),"$pushAll"in i){console.warn("SimpleSchema.clean: $pushAll is deprecated; converting to $push with $each"),i.$push=i.$push||{};for(var s in i.$pushAll){i.$push[s]=i.$push[s]||{},i.$push[s].$each=i.$push[s].$each||[];for(var a=0,l=i.$pushAll[s].length;l>a;a++)i.$push[s].$each.push(i.$pushAll[s][a]);delete i.$pushAll}}var h=new e(i,r._blackboxKeys);return n.filter&&h.filterGenericKeys(function(e){var i=r.allowsKey(e);return!i&&t.debug&&console.info('SimpleSchema.clean: filtered out value that would have affected key "'+e+'", which is not allowed by the schema'),i}),(n.autoConvert||n.removeEmptyStrings)&&h.forEachNode(function(){if(this.genericKey){var e=r._schema[this.genericKey],i=this.value;if(e&&void 0!==i){var o=!1;if(n.autoConvert){var s=y(i,e.type);void 0!==s&&s!==i&&(t.debug&&console.info("SimpleSchema.clean: autoconverted value "+i+" from "+typeof i+" to "+typeof s+" for "+this.genericKey),this.updateValue(s),o=!0,!n.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof s||s.length||this.remove())}if(!(!n.removeEmptyStrings||o||this.operator&&"$set"!==this.operator||"string"!=typeof i||i.length)&&(this.remove(),"$set"===this.operator)){var a=this.position.replace("$set","$unset");h.setValueForPosition(a,"")}}}},{endPointsOnly:!1}),n.getAutoValues&&o.call(r,h,n.isModifier,n.extendAutoValueContext),i},t.prototype.schema=function(e){var i=this;return null!=e?i._schema[t._makeGeneric(e)]:i._schema},t.prototype.getDefinition=function(t,e,i){var n=this,r=n.schema(t);return r?(r=u.isArray(e)?u.pick(r,e):u.clone(r),u.each(["min","max","minCount","maxCount","allowedValues","optional","label"],function(t){u.isFunction(r[t])&&(r[t]=r[t].call(i||{}))}),r.label=r.label||M(t),r):void 0},t.prototype.keyIsInBlackBox=function(e){var i,n,r=this,o=t._makeGeneric(e);do i=o.lastIndexOf("."),-1!==i&&(o=o.slice(0,i),n=r.getDefinition(o));while(-1!==i&&!n);return!(!n||!n.blackbox)},t.prototype.labels=function(t){var e=this;u.each(t,function(t,i){(u.isString(t)||u.isFunction(t))&&i in e._schema&&(e._schema[i].label=t,e._depsLabels[i]&&e._depsLabels[i].changed())})},t.prototype.label=function(t){var e=this;if(null==t){var i={};return u.each(e.schema(),function(t,n){i[n]=e.label(n)}),i}var n=e.getDefinition(t);return n?(e._depsLabels[t]&&e._depsLabels[t].depend(),n.label):null},t._globalMessages={required:"[label] is required",minString:"[label] must be at least [min] characters",maxString:"[label] cannot exceed [max] characters",minNumber:"[label] must be at least [min]",maxNumber:"[label] cannot exceed [max]",minDate:"[label] must be on or before [min]",maxDate:"[label] cannot be after [max]",minCount:"You must specify at least [minCount] values",maxCount:"You cannot specify more than [maxCount] values",noDecimal:"[label] must be an integer",notAllowed:"[value] is not an allowed value",expectedString:"[label] must be a string",expectedNumber:"[label] must be a number",expectedBoolean:"[label] must be a boolean",expectedArray:"[label] must be an array",expectedObject:"[label] must be an object",expectedConstructor:"[label] must be a [type]",regEx:[{msg:"[label] failed regular expression validation"},{exp:t.RegEx.Email,msg:"[label] must be a valid e-mail address"},{exp:t.RegEx.WeakEmail,msg:"[label] must be a valid e-mail address"},{exp:t.RegEx.Domain,msg:"[label] must be a valid domain"},{exp:t.RegEx.WeakDomain,msg:"[label] must be a valid domain"},{exp:t.RegEx.IP,msg:"[label] must be a valid IPv4 or IPv6 address"},{exp:t.RegEx.IPv4,msg:"[label] must be a valid IPv4 address"},{exp:t.RegEx.IPv6,msg:"[label] must be a valid IPv6 address"},{exp:t.RegEx.Url,msg:"[label] must be a valid URL"},{exp:t.RegEx.Id,msg:"[label] must be a valid alphanumeric ID"}],keyNotInSchema:"[label] is not allowed by the schema"},t.messages=function(e){u.extend(t._globalMessages,e),t._depsGlobalMessages.changed()},t.prototype.messages=function(t){var e=this;u.extend(e._messages,t),e._depsMessages.changed()},t.prototype.messageForError=function(e,n,r,o){function s(t){if("regEx"!==e||!u.isArray(t))return t;var i;return c&&(i=u.find(t,function(t){return t.exp&&t.exp.toString()===c})),i||(i=u.findWhere(t,{exp:null}),i||(i=u.findWhere(t,{exp:void 0}))),i?i.msg:null}var a=this;r=r||a.schema(n)||{};var l=e.indexOf("."),h=null;-1!==l&&(h=e.substring(l+1),h=parseInt(h,10),e=e.substring(0,l));var c;"regEx"===e&&(c=null==h||isNaN(h)?r.regEx:r.regEx[h],c&&(c=c.toString()));var d=e+" "+n,p=t._makeGeneric(n),f=e+" "+p;t._depsGlobalMessages.depend(),a._depsMessages.depend(),a._depsLabels[n]&&a._depsLabels[n].depend();var m=a._messages[d]||a._messages[f]||a._messages[e];if(m=s(m),m||(m=t._globalMessages[d]||t._globalMessages[f]||t._globalMessages[e],m=s(m)),!m)return"Unknown validation error";m=m.replace("[label]",a.label(n)),"undefined"!=typeof r.minCount&&(m=m.replace("[minCount]",r.minCount)),"undefined"!=typeof r.maxCount&&(m=m.replace("[maxCount]",r.maxCount)),void 0!==o&&null!==o&&(m=m.replace("[value]",o.toString()));var g=r.min,_=r.max;return"function"==typeof g&&(g=g()),"function"==typeof _&&(_=_()),r.type===Date||r.type===[Date]?("undefined"!=typeof g&&(m=m.replace("[min]",i.dateToDateString(g))),"undefined"!=typeof _&&(m=m.replace("[max]",i.dateToDateString(_)))):("undefined"!=typeof g&&(m=m.replace("[min]",g)),"undefined"!=typeof _&&(m=m.replace("[max]",_))),r.type instanceof Function&&(m=m.replace("[type]",r.type.name)),m},t.prototype.allowsKey=function(t){var e=this;return u.any(e._schemaKeys,function(i){if(i===t)return!0;if(e.schema(i).blackbox===!0){var n=i.length,r=t.slice(0,n+2),o=r.slice(0,-1);if(r===i+".$")return!1;if(o===i+".")return!0}return!1})},t.prototype.newContext=function(){return new s(this)},t.prototype.requiredObjectKeys=function(t){var e=this;return t?e._requiredObjectKeys[t+"."]||[]:e._firstLevelRequiredSchemaKeys},t.prototype.requiredSchemaKeys=function(){return this._requiredSchemaKeys},t.prototype.firstLevelSchemaKeys=function(){return this._firstLevelSchemaKeys},t.prototype.customObjectKeys=function(t){var e=this;return t?e._customObjectKeys[t+"."]||[]:e._firstLevelCustomSchemaKeys},t.prototype.customSchemaKeys=function(){return this._customSchemaKeys};var y=function(t,e){if(u.isArray(t)||u.isObject(t)&&!(t instanceof Date))return t;if(e===String)return"undefined"!=typeof t&&null!==t&&"string"!=typeof t?t.toString():t;if(e===Number){if("string"==typeof t&&!n(t).isEmpty()){var i=Number(t);return isNaN(i)?t:i}return t}return t},v=function(e){var i={};return u.each(e,function(e){e=h.test(e,t)?e._schema:x(b(e)),u.each(e,function(t,e){i[e]=i[e]||{},u.extend(i[e],t)})}),e.length&&w(i),i},b=function(e){return u.each(e,function(i,n){var r,o;if(i){if(h.test(i.type,t))r=".",o=i.type,i.type=Object;else{if(!h.test(i.type,[t]))return;r=".$.",o=i.type[0],i.type=[Object]}u.each(o._schema,function(t,i){var o=n+r+i;o in e||(e[o]=t)})}}),e},w=function(t){u.each(t,function(e,n){if(u.isArray(e.type)||e.type===Array){var r=n+".$";r in t||(t[r]={}),u.isArray(e.type)&&(t[r].type=e.type[0]),e.label&&(t[r].label=e.label),t[r].optional=!0,"undefined"!=typeof e.min&&(t[r].min=e.min),"undefined"!=typeof e.max&&(t[r].max=e.max),"undefined"!=typeof e.allowedValues&&(t[r].allowedValues=e.allowedValues),"undefined"!=typeof e.decimal&&(t[r].decimal=e.decimal),"undefined"!=typeof e.regEx&&(t[r].regEx=e.regEx),e.type=Array,u.each(["min","max","allowedValues","decimal","regEx"],function(t){i.deleteIfPresent(e,t)})}})},x=function(t){var e,i,n=[],r=[];u.each(t,function(t,i){for(var o=i.indexOf(".");-1!==o;)e=i.substring(0,o),".$"===e.substring(e.length-2)?o=-1:".$."===i.substring(o,o+3)?(n.push(e),o=i.indexOf(".",o+3)):(r.push(e),o=i.indexOf(".",o+1))});for(var o=0,s=n.length;s>o;o++)i=n[o],i in t||(t[i]={type:[Object],optional:!0});for(var o=0,s=r.length;s>o;o++)i=r[o],i in t||(t[i]={type:Object,optional:!0});return w(t),t},T=function(t,e){var i,r,o,s={};return u.each(t,function(t,a){t.type===Object&&(i=a+".",o=[],u.each(e,function(t){n(t).startsWith(i)&&(r=t.substring(i.length),-1===r.indexOf(".")&&o.push(r))}),s[i]=o)}),s},M=function(t){var e=t,i=e.lastIndexOf(".");if(-1!==i&&(e=e.substring(i+1),"$"===e)){var r=t.split(".");e=r[r.length-2]}return"_id"===e?"ID":n(e).humanize().s}}.call(this),function(){function n(t,e,n){var r=t.type;if(r===String){if("string"!=typeof e)return"expectedString";if(null!==t.max&&t.max<e.length)return"maxString";if(null!==t.min&&t.min>e.length)return"minString";if(t.regEx instanceof RegExp&&!t.regEx.test(e))return"regEx";if(u.isArray(t.regEx)){var o;if(u.every(t.regEx,function(t,i){return t.test(e)?!0:(o="regEx."+i,!1)}),o)return o}}else if(r===Number){if("number"!=typeof e||isNaN(e))return"expectedNumber";if("$inc"!==n&&null!==t.max&&t.max<e)return"maxNumber";if("$inc"!==n&&null!==t.min&&t.min>e)return"minNumber";if(!t.decimal&&e.toString().indexOf(".")>-1)return"noDecimal"}else if(r===Boolean){if("boolean"!=typeof e)return"expectedBoolean"}else if(r===Object){if(!i.isBasicObject(e))return"expectedObject"}else if(r===Array){if(!u.isArray(e))return"expectedArray";if(null!==t.minCount&&e.length<t.minCount)return"minCount";if(null!==t.maxCount&&e.length>t.maxCount)return"maxCount"}else if(r instanceof Function||i.safariBugFix(r)){if(!(e instanceof r))return"expectedConstructor";if(r===Date){if(u.isDate(t.min)&&t.min.getTime()>e.getTime())return"minDate";if(u.isDate(t.max)&&t.max.getTime()<e.getTime())return"maxDate"}}}r=function(r,o,s,a,l,h){function c(o,a,c,d,p,f,_){if(!d)return void g.push(i.errorObject("keyNotInSchema",a,o,d,l));if(!f&&!d.optional&&("$unset"===p||"$rename"===p||(!p||"$set"===p&&s||_)&&i.isBlankNullOrUndefined(o)||p&&i.isBlankOrNull(o)))return void g.push(i.errorObject("required",a,null,d,l));if("$rename"===p&&"string"==typeof o&&!l.allowsKey(o))return void g.push(i.errorObject("keyNotInSchema",o,null,null,l));if(!u.contains(["$unset","$rename"],p)){if(i.isNotNullOrUndefined(o)){var y=n(d,o,p);if(y)return void g.push(i.errorObject(y,a,o,d,l));if(d.allowedValues&&!u.contains(d.allowedValues,o))return void g.push(i.errorObject("notAllowed",a,o,d,l))}var v=a.lastIndexOf("."),b=-1===v?"":a.slice(0,v+1),w=d.custom?[d.custom]:[];w=w.concat(l._validators).concat(t._validators),u.every(w,function(t){var n=t.call(u.extend({key:a,genericKey:c,definition:d,isSet:void 0!==o,value:o,operator:p,field:function(t){m=m||new e(r,l._blackboxKeys);var i=m.getInfoForKey(t)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator}},siblingField:function(t){m=m||new e(r,l._blackboxKeys);var i=m.getInfoForKey(b+t)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator}}},h||{}));return"string"==typeof n?(g.push(i.errorObject(n,a,o,d,l)),!1):!0})}}function d(e,n,r,s,h,f){var m,g,_=!1;if(!r&&n&&"$"===n.substring(0,1)&&(r=n,n=null),n){if(s||"$push"!==r&&"$addToSet"!==r||(i.isBasicObject(e)&&"$each"in e?e=e.$each:n+=".0",_=s=!0),l.keyIsInBlackBox(n))return;m=t._makeGeneric(n),g=l.getDefinition(n),a&&a!==n&&a!==m||c(e,n,m,g,r,h,f)}if(void 0!==e&&null!==e||g&&(g.type!==Object||g.optional)||(e={}),u.isArray(e))u.each(e,function(t,e){d(t,n+"."+e,r,s)});else if(i.isBasicObject(e)&&(!g||!g.blackbox)){var y,v,b;y=u.keys(e),(!o||"$set"===r||_)&&(v=l.requiredObjectKeys(m),b=l.customObjectKeys(m));var w=u.union(y,v||[],b||[]),f=m&&".$"===m.slice(-2);u.each(w,function(t){i.shouldCheck(t)&&(h=u.some(p,function(e){return e.slice(0,t.length+1)===t+"."}),d(e[t],i.appendAffectedKey(n,t),r,s,h,f))})}}var p=[];if(!u.isObject(r))throw new Error("The first argument of validate() or validateOne() must be an object");if(o){if(u.isEmpty(r))throw new Error("When the modifier option is true, validation object must have at least one operator");var f=u.every(r,function(t,e){return"$"===e.substring(0,1)});if(!f)throw new Error("When the modifier option is true, all validation object keys must be operators. Did you forget `$set`?");p=p.concat(u.keys(r.$set||{})).concat(u.keys(r.$setOnInsert||{}))}else if(i.looksLikeModifier(r))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");"$setOnInsert"in r&&(s&&(r.$set=r.$set||{},r.$set=u.extend(r.$set,r.$setOnInsert)),delete r.$setOnInsert);var m,g=[];d(r);var _=[];return g=u.filter(g,function(t){return u.contains(_,t.name)?!1:(_.push(t.name),!0)})}}.call(this),function(){function n(t,e,i){var n,r=new a.Collection(null);if(i)n=c.id(),r.upsert({_id:n},t);else{var o={};n=r.insert(o),r.update(n,t)}var s=r.findOne(n);return r.remove(n),e._id||delete s._id,s}function r(t,e,n){var r=t.type;if(r===String){if("string"!=typeof e)return"expectedString";if(null!==t.max&&t.max<e.length)return"maxString";if(null!==t.min&&t.min>e.length)return"minString";if(t.regEx instanceof RegExp&&!t.regEx.test(e))return"regEx";if(u.isArray(t.regEx)){var o;if(u.every(t.regEx,function(t,i){return t.test(e)?!0:(o="regEx."+i,!1)}),o)return o}}else if(r===Number){if("number"!=typeof e||isNaN(e))return"expectedNumber";if("$inc"!==n&&null!==t.max&&t.max<e)return"maxNumber";if("$inc"!==n&&null!==t.min&&t.min>e)return"minNumber";if(!t.decimal&&e.toString().indexOf(".")>-1)return"noDecimal"}else if(r===Boolean){if("boolean"!=typeof e)return"expectedBoolean"}else if(r===Object){if(!i.isBasicObject(e))return"expectedObject"}else if(r===Array){if(!u.isArray(e))return"expectedArray";if(null!==t.minCount&&e.length<t.minCount)return"minCount";if(null!==t.maxCount&&e.length>t.maxCount)return"maxCount"}else if(r instanceof Function||i.safariBugFix(r)){if(!(e instanceof r))return"expectedConstructor";if(r===Date){if(u.isDate(t.min)&&t.min.getTime()>e.getTime())return"minDate";if(u.isDate(t.max)&&t.max.getTime()<e.getTime())return"maxDate"}}}o=function(o,s,a,l,h,c){function d(n,s,l,d,p,f,m){if(!d)return void _.push(i.errorObject("keyNotInSchema",s,n,d,h));if(!f&&!d.optional&&("$unset"===p||"$rename"===p||(!p||"$set"===p&&a||m)&&i.isBlankNullOrUndefined(n)||p&&i.isBlankOrNull(n)))return void _.push(i.errorObject("required",s,null,d,h));if("$rename"===p&&"string"==typeof n&&!h.allowsKey(n))return void _.push(i.errorObject("keyNotInSchema",n,null,null,h));if(!u.contains(["$unset","$rename"],p)){if(i.isNotNullOrUndefined(n)){var y=r(d,n,p);if(y)return void _.push(i.errorObject(y,s,n,d,h));if(d.allowedValues&&!u.contains(d.allowedValues,n))return void _.push(i.errorObject("notAllowed",s,n,d,h))}var v=s.lastIndexOf("."),b=-1===v?"":s.slice(0,v+1),w=d.custom?[d.custom]:[];w=w.concat(h._validators).concat(t._validators),u.every(w,function(t){var r=t.call(u.extend({key:s,genericKey:l,definition:d,isSet:void 0!==n,value:n,operator:p,field:function(t){g=g||new e(o,h._blackboxKeys);var i=g.getInfoForKey(t)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator}},siblingField:function(t){g=g||new e(o,h._blackboxKeys);var i=g.getInfoForKey(b+t)||{};return{isSet:void 0!==i.value,value:i.value,operator:i.operator}}},c||{}));return"string"==typeof r?(_.push(i.errorObject(r,s,n,d,h)),!1):!0})}}function p(e,n,r,o,a,c){var m,g,_=!1;if(!r&&n&&"$"===n.substring(0,1)&&(r=n,n=null),n){if(o||"$push"!==r&&"$addToSet"!==r||(i.isBasicObject(e)&&"$each"in e?e=e.$each:n+=".0",_=o=!0),h.keyIsInBlackBox(n))return;m=t._makeGeneric(n),g=h.getDefinition(n),l&&l!==n&&l!==m||d(e,n,m,g,r,a,c)}if(void 0!==e&&null!==e||g&&(g.type!==Object||g.optional)||(e={}),u.isArray(e))u.each(e,function(t,e){p(t,n+"."+e,r,o)});else if(i.isBasicObject(e)&&(!g||!g.blackbox)){var y,v,b;y=u.keys(e),(!s||"$set"===r||_)&&(v=h.requiredObjectKeys(m),b=h.customObjectKeys(m));var w=u.union(y,v||[],b||[]),c=m&&".$"===m.slice(-2);u.each(w,function(t){i.shouldCheck(t)&&(a=u.some(f,function(e){return e.slice(0,t.length+1)===t+"."}),p(e[t],i.appendAffectedKey(n,t),r,o,a,c))})}}var f=[];if(!u.isObject(o))throw new Error("The first argument of validate() or validateOne() must be an object");if(s){if(u.isEmpty(o))throw new Error("When the modifier option is true, validation object must have at least one operator");var m=u.every(o,function(t,e){return"$"===e.substring(0,1)});if(!m)throw new Error("When the modifier option is true, all validation object keys must be operators");f=f.concat(u.keys(o.$set||{})).concat(u.keys(o.$setOnInsert||{})),console.log("BEFORE",o),o=n(o,h.schema(),a),console.log("AFTER",o)}else if(i.looksLikeModifier(o))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");"$setOnInsert"in o&&(a&&(o.$set=o.$set||{},o.$set=u.extend(o.$set,o.$setOnInsert)),delete o.$setOnInsert);var g,_=[];p(o);var y=[];return _=u.filter(_,function(t){return u.contains(y,t.name)?!1:(y.push(t.name),!0)})}}.call(this),function(){function e(t,e,i,n,s,a){var l=!0,u=l?r:o;return u(t,e,i,n,s,a)}s=function(t){var e=this;e._simpleSchema=t,e._schema=t.schema(),e._schemaKeys=u.keys(e._schema),e._invalidKeys=[],e._deps={},e._depsAny=new l.Dependency,u.each(e._schemaKeys,function(t){e._deps[t]=new l.Dependency})},s.prototype.validate=function(t,i){var n=this;i=u.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},i||{}),a.isClient&&void 0===i.extendedCustomContext.userId&&(i.extendedCustomContext.userId=a.userId&&a.userId()||null);var r=e(t,i.modifier,i.upsert,null,n._simpleSchema,i.extendedCustomContext),o=u.pluck(n._invalidKeys,"name");n._invalidKeys=r;var s=u.pluck(n._invalidKeys,"name"),l=u.union(s,o);return n._markKeysChanged(l),0===n._invalidKeys.length},s.prototype.validateOne=function(t,i,n){var r=this;n=u.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},n||{}),a.isClient&&void 0===n.extendedCustomContext.userId&&(n.extendedCustomContext.userId=a.userId&&a.userId()||null);for(var o,s=e(t,n.modifier,n.upsert,i,r._simpleSchema,n.extendedCustomContext),l=[],h=0,c=r._invalidKeys.length;c>h;h++)o=r._invalidKeys[h],o.name!==i&&l.push(o);r._invalidKeys=l;for(var o,h=0,c=s.length;c>h;h++)o=s[h],r._invalidKeys.push(o);return r._markKeysChanged([i]),!r._keyIsInvalid(i)},s.prototype.resetValidation=function(){var t=this,e=u.pluck(t._invalidKeys,"name");t._invalidKeys=[],t._markKeysChanged(e)},s.prototype.isValid=function(){var t=this;return t._depsAny.depend(),!t._invalidKeys.length},s.prototype.invalidKeys=function(){var t=this;return t._depsAny.depend(),t._invalidKeys},s.prototype.addInvalidKeys=function(t){var e=this;if(t&&t.length){var i=[];u.each(t,function(t){i.push(t.name),e._invalidKeys.push(t)}),e._markKeysChanged(i)}},s.prototype._markKeysChanged=function(e){var i=this;e&&e.length&&(u.each(e,function(e){var n=t._makeGeneric(e);n in i._deps&&i._deps[n].changed()}),i._depsAny.changed())},s.prototype._keyIsInvalid=function(e,i){var n=this;i=i||t._makeGeneric(e);var r=!!u.findWhere(n._invalidKeys,{name:e}),o=i!==e?!!u.findWhere(n._invalidKeys,{name:i}):!1;return r||o},s.prototype.keyIsInvalid=function(e){var i=this,n=t._makeGeneric(e);return i._deps[n].depend(),i._keyIsInvalid(e,n)},s.prototype.keyErrorMessage=function(e){var i=this,n=t._makeGeneric(e),r=i._simpleSchema;i._deps[n].depend();var o=u.findWhere(i._invalidKeys,{name:e});if(!o&&(o=u.findWhere(i._invalidKeys,{name:n}),!o))return"";var s=r.schema(n);return s?r.messageForError(o.type,o.name,s,o.value):""}}.call(this),"undefined"==typeof Package&&(Package={}),Package["simple-schema"]={SimpleSchema:t,MongoObject:e}}(),function(){var t=Package.meteor.Meteor,e=Package["simple-schema"].SimpleSchema,i=(Package["simple-schema"].MongoObject,Package.underscore._),n=(Package.deps.Deps,Package.check.check,Package.check.Match),r=Package.ejson.EJSON;(function(){function o(e,n,r,o,a){function h(t,i,n,r,s){y.clean(t,{filter:n,autoConvert:r,getAutoValues:i,isModifier:"insert"!==e,removeEmptyStrings:s,extendAutoValueContext:{isInsert:"insert"===e,isUpdate:"update"===e&&f.upsert!==!0,isUpsert:m,userId:o,isFromTrustedCode:a}})}var c,d,p,f,m,g,_=this,y=_._c2._simpleSchema;if(!n.length)throw new Error(e+" requires an argument");if("insert"===e)c=n[0],f=n[1],d=n[2],n="function"==typeof f?[c,f]:"function"==typeof d?[c,d]:[c];else{if("update"!==e&&"upsert"!==e)throw new Error("invalid type argument");g=n[0],c=n[1],f=n[2],d=n[3]}if(d||"function"!=typeof f||(d=f,f={}),f=f||{},m="upsert"===e||"update"===e&&f.upsert===!0,t.isClient&&!d&&(d=function(i){i&&t._debug(e+" failed: "+(i.reason||i.stack))}),t.isClient){var v=n.length-1;"function"==typeof n[v]&&(d=n[v]=u(_,f.validationContext,d))}if(f.validate===!1)return n;var b;t.isServer&&c._id&&!y.allowsKey("_id")&&(b=c._id,delete c._id),h(c,t.isServer&&!r,!0,!0,f.removeEmptyStrings!==!1);var w={};for(var x in c)c.hasOwnProperty(x)&&(w[x]=c[x]);if(t.isServer&&m&&i.isObject(g)){var T=w.$set||{};w.$set=i.clone(g),i.extend(w.$set,T)}t.isClient&&h(w,!0,!1,!1,!1);var M=y.namedContext(f.validationContext),k=M.validate(w,{modifier:"update"===e||"upsert"===e,upsert:m,extendedCustomContext:{isInsert:"insert"===e,isUpdate:"update"===e&&f.upsert!==!0,isUpsert:m,userId:o,isFromTrustedCode:a}});if(k){if(b&&(c._id=b),"insert"===e?n[0]=c:n[1]=c,t.isServer){var v=n.length-1;"function"==typeof n[v]&&(n[v]=l(_,c,f.validationContext,n[v]))}return n}if(p=s(M),!d)throw p;d(p,!1)}function s(e){var i,n=e.invalidKeys();i=n.length?e.keyErrorMessage(n[0].name):"Failed validation";var r=new Error(i);return r.invalidKeys=n,t.isServer&&(r.sanitizedError=new t.Error(400,i)),r}function a(t,e){var i=e.split("c2_")[1].split(" ")[0],n=e.split("dup key:")[1].split('"')[1];t.addInvalidKeys([{name:i,type:"notUnique",value:n}])}function l(t,e,i,n){return function(e){if(e&&("MongoError"===e.name&&11001===e.code||e.message.indexOf(!0))&&-1!==e.message.indexOf("c2_")){var r=t.simpleSchema().namedContext(i);a(r,e.message),arguments[0]=s(r)}return n.apply(this,arguments)}}function u(e,i,n){return function(o){var l=e.simpleSchema().namedContext(i);if(o instanceof t.Error&&400===o.error&&"INVALID"===o.reason&&"string"==typeof o.details){var u=r.parse(o.details);l.addInvalidKeys(u),arguments[0]=s(l)}else o instanceof t.Error&&409===o.error&&o.reason&&-1!==o.reason.indexOf("E11000")&&-1!==o.reason.indexOf("c2_")&&(a(l,o.reason),arguments[0]=s(l));return n.apply(this,arguments)}}e.extendOptions({index:n.Optional(n.OneOf(Number,String,Boolean)),unique:n.Optional(Boolean),denyInsert:n.Optional(Boolean),denyUpdate:n.Optional(Boolean)}),e.messages({notUnique:"[label] must be unique",insertNotAllowed:"[label] cannot be set during an insert",updateNotAllowed:"[label] cannot be set during an update"});var h=t.Collection;t.Collection=function(t,e){var i,n=this;if(e=e||{},e.schema&&(i=e.schema,delete e.schema),e.virtualFields)throw new Error("Collection2: Sorry, the virtualFields option is no longer supported.");h.call(n,t,e),i&&n.attachSchema(i)},t.Collection.prototype=h.prototype;for(var c in h)h.hasOwnProperty(c)&&(t.Collection[c]=h[c]);if(t.isServer){var d=!1;t.startup(function(){d=!0})}t.Collection.prototype.attachSchema=function(n){var s=this;n instanceof e||(n=new e(n)),s._c2={},s._c2._simpleSchema=n,i.each(n.schema(),function(e,i){function n(){var t,n={};"index"in e?(t=e.index,t===!0&&(t=1)):t=1;var r="c2_"+i,o=i.replace(/\.\$\./g,".");n[o]=t;var a=!!e.unique&&(1===t||-1===t),l=!!e.optional&&a;if(t!==!1)s._collection._ensureIndex(n,{background:!0,name:r,unique:a,sparse:l});else try{s._collection._dropIndex(r)}catch(u){console.warn("Collection2: Tried to drop mongo index "+r+", but there is no index with that name")}}t.isServer&&("index"in e||e.unique===!0)&&(d?n():t.startup(n))}),n.validator(function(){{var t=this.definition,e=this.value,i=this.operator;this.key}return t.denyInsert&&void 0!==e&&!i?"insertNotAllowed":t.denyUpdate&&i&&("$set"!==i||"$set"===i&&void 0!==e)?"updateNotAllowed":!0}),s.deny({insert:function(e,i){var r;return t.isServer&&i._id&&!n.allowsKey("_id")&&(r=i._id,delete i._id),n.clean(i,{isModifier:!1,removeEmptyStrings:!1,extendAutoValueContext:{isInsert:!0,isUpdate:!1,isUpsert:!1,userId:e,isFromTrustedCode:!1}}),r&&(i._id=r),!1},update:function(t,e,i,r){return n.clean(r,{isModifier:!0,removeEmptyStrings:!1,extendAutoValueContext:{isInsert:!1,isUpdate:!0,isUpsert:!1,userId:t,isFromTrustedCode:!1}}),!1},fetch:[],transform:null}),s.deny({insert:function(e,i){return o.call(s,"insert",[i,{removeEmptyStrings:!1},function(e){if(e)throw new t.Error(400,"INVALID",r.stringify(e.invalidKeys))}],!0,e,!1),!1},update:function(e,i,n,a){return o.call(s,"update",[null,a,{removeEmptyStrings:!1},function(e){if(e)throw new t.Error(400,"INVALID",r.stringify(e.invalidKeys))}],!0,e,!1),!1},fetch:[]}),Package&&Package.insecure&&s.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null})},t.Collection.prototype.simpleSchema=function(){var t=this;return t._c2?t._c2._simpleSchema:null},i.each(["insert","update","upsert"],function(e){var n=t.Collection.prototype[e];t.Collection.prototype[e]=function(){var r=this,s=i.toArray(arguments);return r._c2&&(s=o.call(r,e,s,!1,t.isClient&&t.userId&&t.userId()||null,t.isServer),!s)?"insert"===e?r._makeNewID():void 0:n.apply(r,s)}}),t.Collection2=function(){throw new Error("Collection2: Doing `new Meteor.Collection` no longer works. Just use a normal `new Meteor.Collection` call.")}}).call(this),"undefined"==typeof Package&&(Package={}),Package.collection2={}}(),function(){var t,e,i,n,r,o,s,a,l,u,h,c=Package.meteor.Meteor,d=Package.deps.Deps,p=Package.session.Session,f=Package.underscore._,m=Package.templating.Template,g=Package.spacebars.Spacebars,_=(Package.showdown.Showdown,Package.ui.UI),y=(Package.ui.Handlebars,Package["simple-schema"].SimpleSchema),v=(Package["simple-schema"].MongoObject,Package.htmljs.HTML),b=Package.blaze.Blaze;(function(){i="object"==typeof i?i:{};var t,n;n=[{nombre:"Ofrenda",titulo:"**Agosto**:\nInicio del ciclo agrícola.",descripcion:'En el inicio del ciclo agrícola, el campesino muestra \nsu respeto a la *Pachamama* (Madre Tierra) y a los \n*apus* (espíritus guardianes de las montañas) \nalcanzándoles una ofrenda en un ritual simbólico.\n\nLes piden permiso para trabajar la tierra, fuerza en \nel trabajo y protección a las semillas que darán vida \na nuevas papitas. \n\n#### ¿Cómo se realiza la ofrenda?\n\nSe ofrece el "kintu" de coca (trío de hojas) y se \nbrinda por lo general con "chicha"; el primer vaso \nsiempre es para la Pachamama. Otros también \nacostumbran ofrecerle flores de colores, grasa de \nllama o caramelos.\n\nDurante el ritual se invoca a los apus y se dan \nsoplidos largos sobre la ofrenda para que el viento\nles lleve su sabor. Finalmente, esta ofrenda se \nentierra o se quema cerca a la *chacra*. ',pregunta:{texto:"¿Con la ofrenda a la *Pachamama* y a los\n*apus* se inicia el ciclo agrícola de la papa?",respuesta:{correcta:"si",si:"¡Correcto!",no:"¡Incorrecto!\n\nLa ofrenda es un ritual para empezar el ciclo agrícola."}},numero:1},{nombre:"Siembra",titulo:"**Agosto, Septiembre y Octubre**:\nSiembra",descripcion:"La siembra es la actividad más importante en el ciclo \nagrícola de la papa. Los preparativos se realizan \nincluso una semana antes de la siembra. \n\n#### ¿Cuándo se realiza la siembra?\n\nCuando la Pachamama muestra sus señales:\nAparición de ciertas flores, aullido del zorro cerca a\nla comunidad o llegada de las primeras lluvias. \nLa siembra se extiende de agosto a octubre de \nacuerdo al ciclo de crecimiento de las papas que \nproduce la comunidad. \n\n#### ¿Cómo se realiza la siembra? \n\nSe forman grupos de tres personas; los varones \nmanejan las herramientas, un grupo de mujeres se \nencarga de poner la semilla y otro se encarga de \nabonar la tierra. ",pregunta:{texto:"¿El campesino observa las señas de la naturaleza para sembrar? ",respuesta:{correcta:"si",si:"¡Correcto!",no:"¡Incorrecto!\n\nLos campesinos se guían por señales de la naturaleza para iniciar la siembra."}},numero:2},{nombre:"Aporque",titulo:"De **Noviembre** a **Enero**:\nEl aporque.",descripcion:"El aporque es una actividad que realizan los varones \nhaciendo uso de la lampa para ayudar al buen \ncrecimiento de las plantas de papa.\n\n#### ¿Cuándo se realiza? \n\nA partir de noviembre hasta enero, se realiza los \nprimeros aporques, aprovechando el agua de la \nlluvia. Si se observa que los tallos de la papa no \nestán gruesos y las hojas no están firmes, entonces\nse aporca nuevamente.\n\n#### ¿Cómo se realiza? \n- Se rectifican los surcos. \n- Se quita la mala hierba. \n- Se alimenta con más tierra el tallo de la planta de papa. ",pregunta:{texto:"¿Las plantas de papa sin aporque crecen sanas? ",respuesta:{correcta:"no",si:"¡Incorrecto!\n\nEl aporque ayuda al sano crecimiento de las plantas de papa. ",no:"¡Correcto!"}},numero:3},{nombre:"Aporque",titulo:"Criando la papa en la chacra desde \nla siembra hasta la cosecha.",descripcion:'El cuidado de las papas en su ciclo de producción es \ncomo criar a un hijo, los campesinos del Ande nos \ndicen: *"La papa nos cría toda la vida porque nos \nalimenta, por eso nosotros también debemos criar a \nla papa en la chacra"*.\n\n#### ¿Cómo criamos a la papa? \n\nLos criadores de la papita están siempre al cuidado\nde su parcela, le llevan guano, otros le echan ceniza \nde sus fogones para evitar plagas y enfermedades, \ncuidan que la mala hierba no invada el terreno o que \nel agua no inunde los surcos. ',pregunta:{texto:"¿Para los agricultores del Ande, cultivar papas es como criar a un hijo? ",respuesta:{correcta:"si",si:"¡Correcto!",no:"¡Incorrecto!\n\nLos agricultores del Ande consideran el cultivo de la papa\ncomo la crianza de un hijo. "}},numero:4},{nombre:"Roturado",titulo:"**Febrero y Marzo**: Preparación\nde la tierra para la nueva siembra.",descripcion:'Mientras las plantas de papa están creciendo en la \nparcela, los agricultores preparan nuevos terrenos \npara la próxima siembra.\n\n#### ¿Cómo se realiza? \n\nPrimero se rotura la tierra. Esta actividad requiere \nmucha coordinación, destreza y fuerza de los grupos\nparticipantes; en cada grupo encontramos dos \nvarones que abren la tierra con sus "chakitaqllas" \n(instrumentos de labranza) y una mujer que voltea \nlos terrores con sus manos, formando los surcos.\n\nDespués del roturado se deja en reposo a la\nPachamama hasta la siembra para que esté suave y \nlista para acoger a las semillas de papa. ',pregunta:{texto:"¿El roturado prepara el terreno para la cosecha? ",respuesta:{correcta:"no",si:"¡Incorrecto!\n\nEl roturado prepara el terreno para la nueva siembra. ",no:"¡Correcto!"}},numero:5},{nombre:"Cosecha",titulo:"**Abril y Mayo**:\nCosecha",descripcion:"La cosecha consiste en extraer de la tierra y \ndescubrir al sol del día las papitas multicolores que \nson el fruto del trabajo de familias enteras. \n\n#### ¿Cuándo se realiza? \n\nSe realiza en los meses de abril y mayo cuando el \nciclo de la planta ha culminado. Los agricultores \nobservan que las flores y hojas de la papa empiezan\na marchitarse; además la Pachamama envía muchas \nseñales a través de las flores, del comportamiento \nde algunos animales o cuando las nubes de lluvia se\nalejan. ",pregunta:{texto:"¿La naturaleza puede darnos señales para empezar la cosecha de papas? ",respuesta:{correcta:"si",si:"¡Correcto!",no:"¡Incorrecto!\n\nLa naturaleza da señales a los agricultores por medio de plantas, animales y \nel clima para que empiecen la cosecha. "}},numero:6},{nombre:"Cosecha",titulo:"**Abril y Mayo**:\nEl día de la cosecha.",descripcion:'Durante la cosecha se pueden ver muchas \nvariedades de papa en colores y formas, ese día se \nprepara la watias.\n\n#### ¿Qué es la watia? \n\nEs la comida favorita del día de cosecha, se prepara \nen hornos hechos con terrones donde se asan las \npapas; se acompañan con una crema de rocoto \nllamada "uchukuta" o sencillamente con queso \nelaborado por los propios comuneros, también se\npuede acompañar con cuy asado en fogón. Toda la \nfamilia forma un círculo y comparten la comida.\n\n#### ¿Cómo finaliza la cosecha? \n\nCon el traslado de la papa en costales a lomo de \ncaballos o llamas hasta el lugar de almacenamiento.',pregunta:{texto:"¿El día de la cosecha se lleva papa a la chacra en caballos para \npreparar la watia? ",respuesta:{correcta:"no",si:"¡Incorrecto!\n\nSe prepara la watia con la papa recién cosechada en la chacra.",no:"¡Correcto!"}},numero:7},{nombre:"Selección",titulo:"**Junio y Julio**:\nSelección de papas.",descripcion:"Es una actividad que se realiza en familia, los padres \nenseñan a sus hijos los nombres, colores y formas \nde las variedades de papa.\n\nEn una sola cosecha puede haber hasta 80 \nvariedades de papa; algunas son buenas para \nsancochar, otras para elaborar *chuño* o *moraya*\n(papas deshidratadas para su conservación) y otras \nson de tipo comercial.\n\nEn esta etapa también se hace la selección de la \nsemilla de cada variedad de papa.\n\n#### ¿Cuál es el criterio de selección de las semillas de \npapa?\n\nLos criterios más importantes son tener ojos \nbonitos, color uniforme, regular tamaño y no \npresentar enfermedades.\n",pregunta:{texto:"¿La semilla de papa con ojos bonitos es una característica \napreciada por los agricultores del Ande? ",respuesta:{correcta:"si",si:"¡Correcto!",no:"¡Incorrecto!\n\nLos agricultores consideran como buena semilla a las \npapas que tiene ojos bonitos. "}},numero:8},{nombre:"Almacenamiento",titulo:"**Julio**:\nAlmacenamiento de papas.",descripcion:'#### ¿Cómo se almacenan las papas? \n\nLas semillas de papa se guardan en montones \ncubiertos con paja en forma de conos que se \ncolocan a la intemperie cerca de la casa, en espera\nhasta la próxima siembra.\n\n Las papas para el consumo se guardan en el \nalmacén familiar y se disponen de a pocos para la \nalimentación diaria, calculado que dure hasta la \npróxima cosecha. \n\nOtras son destinadas para elaborar *"chuño"* y la \n*"moraya"* (papas deshidratadas) con procedimientos \ntradicionales. \n\nLo que sobra se vende. ',pregunta:{texto:"¿La semilla de papa se guarda en el almacén \nfamiliar? ",respuesta:{correcta:"no",si:"¡Incorrecto!\n\nLa semilla de papa se guarda a la intemperie cerca a la casa. ",no:"¡Correcto!"}},numero:9},{nombre:"Alimentación",titulo:"La papa está presente\nen la alimentación familiar.",descripcion:'#### ¿Qué comidas preparamos con papa?\n- Variedad de sopas donde la papa se acompaña por otros ingredientes. \n- Asados para los banquetes de las fiestas familiares y comunales. \n- Watias. \n- Papas sancochadas. \n\nCon el tiempo las papita se arrugan y reciben el \nnombre de "paya papa" (papa vieja), éstas son muy \ndulces por eso continúan sirviendo de alimento \nhasta la llegada de la papa nueva. ',pregunta:{texto:"¿Las papas viejas y arrugadas se desechan? ",respuesta:{correcta:"no",si:"¡Incorrecto!\n\nLas papas viejas continúan alimentando a las familias porque son muy dulces. ",no:"¡Correcto!"}},numero:10}],t=t||{},t.Etapa=new y({nombre:{type:String,label:"Título",max:140},numero:{type:Number,label:"Número",unique:!0,min:1,max:10},slug:{type:String,label:"Slug",max:140},titulo:{type:String,label:"Título",max:200},descripcion:{type:String,label:"Descripción"},pregunta:{type:new y({texto:{type:String,label:"Texto",max:255},respuesta:{type:new y({correcta:{type:String,label:"Respuesta correcta",allowedValues:["si","no"]},si:{type:String,label:"Texto si",max:1e3},no:{type:String,label:"Texto no",max:1e3}})}})}}),e=new c.Collection("etapas",{connection:null}),e.attachSchema(t.Etapa),c.startup(function(){var t,i,r,o;
for(o=[],i=0,r=n.length;r>i;i++)t=n[i],t.slug=""+("0"+t.numero).slice(-2)+"-"+f.slugify(t.nombre),o.push(e.insert(t));return o})}).call(this),function(){n=function(e){Phaser.Group.call(this,t.game),this.h=0,this.isFinal=!1,this.isSolvable=!1,this.moves=0,this.totalCost=0,this.position0=0,e?this.arrNumbs=e:e=[]},n.prototype=Object.create(Phaser.Group.prototype),n.prototype.constructor=n,n.prototype.genFinal=function(){this.moves=0,this.arrNumbs=[1,2,3,4,5,6,7,8,0]},n.prototype.genRandom=function(){this.arrNumbs=[],this.moves=0,this.clearBoard();var t=[1,2,3,4,5,6,7,8,0];this.arrNumbs=Phaser.Utils.shuffle(t),this.checkSolvable(this.arrNumbs)?(this.isSolvable=!0,this.logBoard()):this.genRandom()},n.prototype.genTest=function(){this.arrNumbs=[],this.moves=0,this.clearBoard(),this.arrNumbs=[1,2,3,4,5,6,0,7,8],console.log("Solvable: "+this.checkSolvable(this.arrNumbs)),this.logBoard()},n.prototype.checkSolvable=function(t){var e=0,i=0,n=0;for(i=t.length-1;i>=0;i--)for(n=i-1;n>=0;n--)t[n]>t[i]&&0!==t[i]&&0!==t[n]&&e++;return e%2===0?(console.log("Solvable - "+t+" - "+e),!0):(console.log("Unsulvable - "+t+" - "+e),!1)},n.prototype.equals=function(t){if(!t)return!1;if(!t.arrNumbs)return!1;if(this.arrNumbs.length!==t.arrNumbs.length)return!1;var e=0;for(e=this.arrNumbs.length-1;e>=0;e--)if(this.arrNumbs[e]!=t.arrNumbs[e])return!1;return!0},n.prototype.logBoard=function(){console.log("Board: "+this.arrNumbs)},n.prototype.checkPosition=function(t){var e=0;for(e=this.arrNumbs.length-1;e>=0;e--)if(this.arrNumbs[e]===t)return e},n.prototype.draw=function(){var e=t.blockDimension;this.clearBoard(this);var i=0,n=0,o=0,s={};for(n=3;n>0;n--)for(o=3;o>0;o--)0!==this.arrNumbs[i]&&(s=new r((o-3)*-e,(n-3)*-e,this.arrNumbs[i],this),this.add(s)),i++},n.prototype.clearBoard=function(){this.forEach(this.clearTxt,this,!0),this.removeAll()},n.prototype.calcHueristic=function(){var t=0,e=0;for(e=this.arrNumbs.length-1;e>=0;e--)0!==this.arrNumbs[e]&&(t+=Math.abs(e-(this.arrNumbs[e]-1)));this.h=t},n.prototype.calcTotalCost=function(){this.totalCost=this.moves+this.h},n.prototype.clearTxt=function(t){t.txt.destroy()},n.prototype.move=function(e){function i(t,e){if(!e)return!1;if(t.length!=e.length)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]instanceof Array&&e[i]instanceof Array){if(!t[i].compare(e[i]))return!1}else if(t[i]!=e[i])return!1;return!0}if(t.isMoving)return!1;t.isMoving=!0,this.position0=this.checkPosition(0);var n={};if("up"===e){if(this.position0>=6&&this.position0<=8)return t.isMoving=!1,!1;n=this.getAt(this.position0+2),n.move(e),this.remove(n),this.addAt(n,this.position0),this.arrNumbs[this.position0]=this.arrNumbs[this.position0+3],this.arrNumbs[this.position0+3]=0}else if("down"==e){if(this.position0>=0&&this.position0<=2)return t.isMoving=!1,!1;n=this.getAt(this.position0-3),n.move(e),this.remove(n),this.addAt(n,this.position0-1),this.arrNumbs[this.position0]=this.arrNumbs[this.position0-3],this.arrNumbs[this.position0-3]=0}else if("right"==e){if(0===this.position0||3===this.position0||6===this.position0)return t.isMoving=!1,!1;n=this.getAt(this.position0-1),n.move(e),this.remove(n),this.addAt(n,this.position0-1),this.arrNumbs[this.position0]=this.arrNumbs[this.position0-1],this.arrNumbs[this.position0-1]=0}else if("left"==e){if(2===this.position0||5===this.position0||8===this.position0)return t.isMoving=!1,!1;n=this.getAt(this.position0),n.move(e),this.remove(n),this.addAt(n,this.position0),this.arrNumbs[this.position0]=this.arrNumbs[this.position0+1],this.arrNumbs[this.position0+1]=0}t.isMoving=!1,this.moves++;var r=[1,2,3,4,5,6,7,8,0];return i(this.arrNumbs,r)&&(this.isFinal=!0,t.resuelto()),!0}}.call(this),function(){r=function(e,i,n){var r=t.game;console.log("Inicia NumberBlock"),this.number=n,this.position=0,this.position0=1,Phaser.Sprite.call(this,r,e,i,"bloques","bloque"+n),this.txt=r.add.text(e+100,i+30,n,{font:"250px Source Code Pro",fill:"#000000",align:"center",weight:"bold"});var o=this.txt;d.autorun(function(){o.fontSize=p.get("rompecabezasHelpOn")?250:1})},r.prototype=Object.create(Phaser.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(){this.txt.x=this.x+100,this.txt.y=this.y+30},r.prototype.move=function(e){var i=t.game,n=t.blockDimension,r=i.add.tween(this),o=i.add.tween(this.txt);switch(r.onStart.add(function(){t.isMoving=!0}),r.onComplete.add(function(){t.isMoving=!1}),e){case"left":r.to({x:this.x-n},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({x:this.txt.x-n},250,null),o.start(),r.start();break;case"up":r.to({y:this.y-n},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({y:this.txt.y-n},250,null),o.start(),r.start();break;case"right":r.to({x:this.x+n},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({x:this.txt.x+n},250,null),o.start(),r.start();break;case"down":r.to({y:this.y+n},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({y:this.txt.y+n},250,null),o.start(),r.start()}},r.prototype.onDown=function(){if(console.log(this.parent.arrNumbs),this.position=this.parent.checkPosition(this.number),this.position0=this.parent.checkPosition(0),this.position-this.position0!==0)switch(this.position){case 0:switch(this.position0){case 1:this.move(3);break;case 3:this.move(2);break;default:return}break;case 1:switch(this.position0){case 0:this.move(1);break;case 2:this.move(3);break;case 4:this.move(4);break;default:return}break;case 2:switch(this.position0){case 1:this.move(1);break;case 5:this.move(4);break;default:return}break;case 3:switch(this.position0){case 0:this.move(2);break;case 4:this.move(3);break;case 6:this.move(4);break;default:return}break;case 4:break;case 5:break;case 6:break;case 7:break;case 8:}console.log("Numbs: "+this.parent.arrNumbs),console.log(this.parent.arrNumbs)}}.call(this),function(){function e(){}e.prototype={preload:function(){this.load.audio("cortina","assets/audio/cortina.ogg",!0),this.load.onFileComplete.add(function(e,i){if("cortina"==i){var n=t.sonidos.cortinaDeFondo=t.game.add.audio("cortina",1,!0);n.play()}else if("efectos"==i){var r=t.sonidos.efectosDeSonido=t.game.add.audio("efectos");r.addMarker("movimiento",.16,.232)}else"finalEtapa"==i&&(t.sonidos.finalEtapa=t.game.add.audio("finalEtapa",8))}),this.load.image("loadingBG","assets/images/LoadingBG.png"),this.load.image("loading","assets/images/Loading.png"),this.load.audio("efectos","assets/audio/efectos.ogg",!0),this.load.audio("finalEtapa","assets/audio/final-etapa.ogg",!0)},create:function(){t.game.input.maxPointers=1}},o=e}.call(this),function(){function e(){}e.prototype={create:function(){function e(e,n){if(n.isDown&&!t.isDragging)t.isDragging=!0;else if(n.isUp&&t.isDragging){var r=n.position,o=n.positionDown;Math.abs(r.x-o.x)>Math.abs(r.y-o.y)?r.x<o.x?i(e,"left"):i(e,"right"):r.y<o.y?i(e,"up"):i(e,"down"),t.isDragging=!1}}function i(t,e){t.board.move(e)&&t.efectosDeSonido.play("movimiento")}var r=t.game;r.stage.backgroundColor="#000",r.add.sprite(0,0,"fondo"),this.efectosDeSonido=t.sonidos.efectosDeSonido,this.upKey=r.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=r.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=r.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=r.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.spaceKey=r.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);var o=this;r.input.addMoveCallback(function(t){e(o,t)}),this.upKey.onDown.add(function(){i(this,"up")},this),this.downKey.onDown.add(function(){i(this,"down")},this),this.leftKey.onDown.add(function(){i(this,"left")},this),this.rightKey.onDown.add(function(){i(this,"right")},this),this.spaceKey.onDown.add(function(){this.solveBoard()},this),this.board=new n,this.board.genRandom(),this.board.draw()},update:function(){var e=this;d.nonreactive(function(){e.board&&(p.set("rompecabezasMovimientos",e.board.moves),e.board.isFinal&&(e.quitGame(),t.resuelto()))})},quitGame:function(){this.board.clearBoard(),this.board.destroy(),this.board=null,this.upKey.onDown.removeAll(),this.downKey.onDown.removeAll(),this.leftKey.onDown.removeAll(),this.rightKey.onDown.removeAll(),this.spaceKey.onDown.removeAll(),this.upKey=null,this.downKey=null,this.leftKey=null,this.rightKey=null,this.spaceKey=null,t.isMoving=!1},shuffleBoard:function(){console.clear(),this.board.genRandom(),this.board.draw()},solveBoard:function(){var t=new n;t.genFinal();var e=new l(this.board,t);e.solve()}},s=e}.call(this),function(){function e(){this.preloadBarBg=null,this.preloadBar=null}function i(){if(!p.get("rompecabezasJuegoPausado")){var t=p.get("rompecabezasTiempo")||0;t++,p.set("rompecabezasTiempo",t)}}e.prototype={preload:function(){var e=t.game;e.stage.backgroundColor="#000";var i=p.get("rompecabezasEtapaElegida");this.load.image("fondo","assets/images/etapas/"+i.slug+"-bn.jpg"),this.preloadBarBg=this.add.sprite(300,400,"loadingBG"),this.preloadBar=this.add.sprite(304,405,"loading"),this.load.atlasJSONHash("bloques","assets/images/etapas/"+i.slug+".jpg","assets/spritesheets/bloques.json"),this.load.setPreloadSprite(this.preloadBar)},create:function(){this.preloadBar.cropEnabled=!1,t.game.state.start("play"),t.timer=c.setInterval(i,1e3)}},a=e}.call(this),function(){function e(){p.set("rompecabezasMovimientos",0),p.set("rompecabezasTiempo",0),t.timer&&c.clearInterval(t.timer)}t={isMoving:!1,blockDimension:300,sonidos:{},init:function(){t.isMoving=!1,t.game&&t.game.destroy();var e=t.game=new Phaser.Game(900,900,Phaser.AUTO,"rompecabezas-container");e.state.add("boot",o),e.state.add("preloader",a),e.state.add("play",s),e.state.start("boot")},restart:function(){t.game.state.states.play.shuffleBoard(),e()},resuelto:function(){p.set("rompecabezasStep","fin"),t.timer&&c.clearInterval(t.timer),t.sonidos.finalEtapa.play()}},d.autorun(function(){p.get("rompecabezasEtapaElegida"),e()});var i;i={google:{families:["Source+Code+Pro::latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}.call(this),function(){l=function(t,e){this.open=[],this.close=[],this.moves=0,this.boardI=t,this.boardF=e,this.open.push(Phaser.Utils.extend(!0,{},t))},l.prototype.solve=function(){for(var e=0;!this.open[this.open.length-1].equals(this.boardF)&&this.open.length>0;){var i=this.open.pop(),n=0;switch(this.close.push(Phaser.Utils.extend(!0,{},i)),n=i.checkPosition(0)){case 0:this.swap(i,3,n),this.swap(i,4,n);break;case 1:this.swap(i,1,n),this.swap(i,3,n),this.swap(i,4,n);break;case 2:this.swap(i,1,n),this.swap(i,4,n);break;case 3:this.swap(i,2,n),this.swap(i,3,n),this.swap(i,4,n);break;case 4:this.swap(i,1,n),this.swap(i,2,n),this.swap(i,3,n),this.swap(i,4,n);break;case 5:this.swap(i,1,n),this.swap(i,2,n),this.swap(i,4,n);break;case 6:this.swap(i,2,n),this.swap(i,3,n);break;case 7:this.swap(i,1,n),this.swap(i,2,n),this.swap(i,3,n);break;case 8:this.swap(i,1,n),this.swap(i,2,n)}this.open.sort(this.compare),0!==this.open.length&&(this.boardI.arrNumbs=this.open[this.open.length-1].arrNumbs,e++,console.log("solving - count: "+e+" - board: "+this.open[0].arrNumbs+" - closed-size: "+this.close.length+" - position: "+n))}this.boardI.draw(),t.resuelto(),console.log("Solved: "+this.open[this.open.length-1].arrNumbs)},l.prototype.swap=function(t,e,i){this.position=i;var r=Phaser.Utils.extend(!0,{},t),o=[];switch(e){case 1:r.arrNumbs[this.position]=r.arrNumbs[this.position-1],r.arrNumbs[this.position-1]=0;break;case 2:switch(this.position){case 3:r.arrNumbs[3]=r.arrNumbs[0],r.arrNumbs[0]=0;break;case 4:r.arrNumbs[4]=r.arrNumbs[1],r.arrNumbs[1]=0;break;case 5:r.arrNumbs[5]=r.arrNumbs[2],r.arrNumbs[2]=0;break;case 6:r.arrNumbs[6]=r.arrNumbs[3],r.arrNumbs[3]=0;break;case 7:r.arrNumbs[7]=r.arrNumbs[4],r.arrNumbs[4]=0;break;case 8:r.arrNumbs[8]=r.arrNumbs[5],r.arrNumbs[5]=0}break;case 3:r.arrNumbs[this.position]=r.arrNumbs[this.position+1],r.arrNumbs[this.position+1]=0;break;case 4:switch(this.position){case 0:r.arrNumbs[0]=r.arrNumbs[3],r.arrNumbs[3]=0;break;case 1:r.arrNumbs[1]=r.arrNumbs[4],r.arrNumbs[4]=0;break;case 2:r.arrNumbs[2]=r.arrNumbs[5],r.arrNumbs[5]=0;break;case 3:r.arrNumbs[3]=r.arrNumbs[6],r.arrNumbs[6]=0;break;case 4:r.arrNumbs[4]=r.arrNumbs[7],r.arrNumbs[7]=0;break;case 5:r.arrNumbs[5]=r.arrNumbs[8],r.arrNumbs[8]=0}}o=r.arrNumbs,r=new n(o,t),r.moves=t.moves+1,r.calcHueristic(),r.calcTotalCost(),this.checkClosed(r)||this.open.push(r)},l.prototype.checkClosed=function(t){var e=0;for(e=this.close.length-1;e>=0;e--)if(this.close[e].equals(t))return!0;return!1},l.prototype.compare=function(t,e){return t.totalCost>e.totalCost?-1:t.totalCost<e.totalCost?1:0}}.call(this),function(){function t(t){this.compare=t,this.pq=[],this.N=0}function e(t){for(var i=t.slice(0),n=i.length;n--;)i[n]instanceof Array&&(i[n]=e(i[n]));return i}function i(t,e,i){this.board=t,this.prev=e,this.steps=i||0}t.prototype={constructor:t,isEmpty:function(){return 0===this.N},insert:function(t){this.pq[++this.N]=t,this.swim(this.N)},delMin:function(){if(!this.isEmpty()){this.exch(1,this.N);var t=this.pq[this.N--];return this.sink(1),this.pq[this.N+1]=null,t}},greater:function(t,e){return this.pq[t].compareTo(this.pq[e])>0},exch:function(t,e){var i=this.pq[t];this.pq[t]=this.pq[e],this.pq[e]=i},swim:function(t){for(;t>1&&this.greater(Math.floor(t/2),t);)this.exch(t,Math.floor(t/2)),t=Math.floor(t/2)},sink:function(t){for(;2*t<=this.N;){var e=2*t;if(e<this.N&&this.greater(e,e+1)&&e++,!this.greater(t,e))break;this.exch(t,e),t=e}}},u=function(t){this.blocks=t,this.N=t[0].length,this.move,this.blankR=0,this.blankC=0,this.blank,this.hammingScore=0,this.manhattanScore=0,this.contructGoalBoardAS()},u.prototype.dimension=function(){return this.N},u.prototype.contructGoalBoardAS=function(){for(var t=0,e=0,i=1,n=0;n<this.N;n++){for(var r=0;r<this.N;r++){if(0===this.blocks[n][r]&&(this.blankR=n,this.blankC=r,this.blank=[n,r]),0!==this.blocks[n][r]&&this.blocks[n][r]!==i){t+=1;var o=n,s=r,a=this.blocks[n][r];0!==a&&(a-=1);var l=Math.floor(a/this.N),u=Math.floor(a%this.N);e+=Math.abs(o-l),e+=Math.abs(s,u)}i+=1}this.hammingScore=t,this.manhattanScore=e}},u.prototype.hamming=function(){return this.hammingScore},u.prototype.manhattan=function(){return this.manhattanScore},u.prototype.getNeighbours=function(){var t=this.blank,e=[],i=this.N-1;e.push([t[0]+1,t[1]]),e.push([t[0]-1,t[1]]),e.push([t[0],t[1]+1]),e.push([t[0],t[1]-1]),e=e.filter(function(t){return t[0]<=i&&t[0]>=0&&t[1]<=i&&t[1]>=0});for(var n=[],r=0;r<e.length;r++){var o=this.createNewBlocks(e[r]),s=new u(o);s.move=o.move,s.prevBlank={from:t,to:e[r]},s.steps=this.steps+1,s.prevNode=this,n.push(s)}return n},u.prototype.twin=function(){var t=this.blocks[0][0]*this.blocks[0][1],i=e(this.blocks);if(0!==t){this._tiles_swapped={tile_1:{x:0,y:0},tile_2:{x:0,y:1}},i=this.swap(i,0,0,0,1);var n=new u(i);return n}this._tiles_swapped={tile_1:{x:1,y:0},tile_2:{x:1,y:1}},i=this.swap(i,1,0,1,1);var n=new u(i);return n},u.prototype.tiles_swapped=function(){return this._tiles_swapped},u.prototype.swap=function(t,e,i,n,r){var o=t[e][i];return t[e][i]=t[n][r],t[n][r]=o,t},u.prototype.createNewBlocks=function(t){function e(t){for(var i=t.slice(0),n=i.length;n--;)i[n]instanceof Array&&(i[n]=e(i[n]));return i}var i=this.blank,n=e(this.blocks),r=t[0],o=t[1];return n[i[0]][i[1]]=this.blocks[t[0]][t[1]],n[t[0]][t[1]]=0,n.move=[r,o],n},u.prototype.isGoal=function(){for(var t=this.N*this.N,e=0,i=0;i<this.N;i++)for(var n=0;n<this.N;n++){if(e+=1,e===t)return!0;if(this.blocks[i][n]!==e)return!1}return!0},u.prototype.equals=function(t){if(this.N!==t.blocks[0].length)return!1;for(var e=0;e<this.N;e++)for(var i=0;i<this.N;i++)if(this.blocks[e][i]!==t.blocks[e][i])return!1;return!0},u.prototype.printBoardAS=function(){for(var t="",e=0;3>e;e++){for(var i=0;3>i;i++)t+=this.blocks[e][i]+", ";t+="\n"}t+=this.move},i.prototype.score=function(t){return void 0===t?this.board.manhattan()+this.steps:"hamming"==t?this.board.hamming()+this.steps:void 0},i.prototype.compareTo=function(t){return this.score()<t.score()?-1:this.score()>t.score()?1:this.score("hamming")<t.score("hamming")?-1:this.score("hamming")>t.score("hamming")?1:0},h=function(){function e(e){s=e;var o=new i(e,void 0,0),a=new i(e.twin(),void 0,0),l=new t,u=new t;for(l.insert(o),u.insert(a);;){var h=l.delMin(),c=u.delMin();if(h.board.isGoal()){this.isSolvable=!0,this.steps=h.steps;break}if(c.board.isGoal()){this.isSolvable=!1,s=s.twin();break}r(l,h),r(u,c)}n.call(this,h)}function n(t){if(this.isSolvable){var e=[];for(e.push(t.board);void 0!==t.prev;)t=t.prev,e.push(t.board);o=e.reverse()}else o=[]}function r(t,e){var n=e.board.getNeighbours();n.forEach(function(n){var r=new i(n,e,e.steps+1);void 0!==e.prev?n.equals(e.prev.board)||t.insert(r):t.insert(r)})}var o,s,a={solve:e,steps:0,init:function(t){this.solve(t)},getSolution:function(){return o},getWinningBlocks:function(){return s.blocks},isSolvable:!1};return{create:function(t){var e=Object.create(a);return e.init(t),e}}}()}.call(this),function(){m.__define__("rompecabezas",function(){var t=this;return[v.A({id:"actionToggleSound","class":"btn btn-primary","data-action":"toggle-sound"},"\n    ",v.SPAN({"class":function(){return["\n      ",b.If(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasIsMuted")},function(){return"\n        glyphicon glyphicon-volume-off\n      "},function(){return"\n        glyphicon glyphicon-volume-up\n      "}),"\n      "]}}),"\n  "),"\n\n  ",g.include(t.lookupTemplate("step")),"\n\n  ",v.DIV({"class":function(){return b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"equals"),"rompecabezasStep","juego")},function(){return"hidden"})}},"\n    ",v.Raw('<div class="col-lg-2">\n    </div>'),"\n\n    ",v.DIV({"class":"col-lg-8"},"\n      ",v.DIV({"class":"row"},"\n        ",v.DIV({"class":"col-lg-offset-1 col-lg-10"},"\n          ",v.H3({"class":"pull-left text-left"},"\n            Movimientos: ",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasMovimientos")}),"\n          "),"\n          ",v.H3({"class":"pull-right text-right"},"\n            ",b.View(function(){return g.mustache(t.lookup("timer"),t.lookup("rompecabezasTiempo"))}),"\n          "),"\n        "),"\n      "),"\n      ",v.Raw('<div class="row">\n        <div id="rompecabezas-container"></div>\n      </div>'),"\n      ",v.Raw('<div class="row"></div>'),"\n      ",v.Raw('<div class="row">\n        <div class="col-lg-offset-2 col-lg-8">\n          <div class="pull-left text-left">\n            <button class="btn btn-primary" data-action="reiniciar">\n              <span class="glyphicon glyphicon-repeat"></span> Reiniciar\n            </button>\n            <input type="checkbox" data-action="toggle-help"> Ayuda\n          </div>\n          <div class="pull-right text-right">\n            <button class="btn btn-danger" data-action="volver-al-comienzo">\n              <span class="glyphicon glyphicon-arrow-left"></span> Volver\n            </button>\n          </div>\n        </div>\n      </div>'),"\n    "),"\n\n    ",v.Raw('<div class="col-lg-2meru">\n    </div>'),"\n  ")]}),m.__define__("rompecabezasIntro",function(){var t=this;return[v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-2"},"\n    ",g.include(t.lookupTemplate("markdown"),function(){return"\n# Rompecabezas\n\n¡Hola!\n\n¿Sabías que? Los agricultores andinos realizan muchas actividades\nagrícolas durante el año para producir las papas que comemos.\n\nDescubre el ciclo agrícola de la papa armando los rompecabezas.\n\n    "}),"\n    "),"\n  "),v.Raw('\n\n  <br>\n\n  <div class="row text-center">\n    <a class="btn btn-primary" href="#" data-action="comenzar">Comenzar!</a>\n  </div>')]}),m.__define__("rompecabezasElegirEtapa",function(){var t=this;return[v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-8 col-lg-offset-2"},"\n      ",g.include(t.lookupTemplate("markdown"),function(){return"\n### Conoce el ciclo agrícola de la papa.\n\nElije la figura que quieres armar en un rompecabezas.\n      "}),"\n    "),"\n  "),v.Raw("\n\n  <br>\n\n  "),b.Each(function(){return g.call(t.lookup("etapas"))},function(){return["\n    ",v.DIV({"class":"col-xs-6 col-md-3 text-center"},"\n      ",v.DIV({"class":"etapa-titulo"},g.include(t.lookupTemplate("markdown"),function(){return b.View(function(){return g.mustache(t.lookup("titulo"))})})),"\n      ",v.A({href:"#","class":"thumbnail","data-action":"etapa-elegida"},"\n        ",v.IMG({src:function(){return["assets/images/etapas/",g.mustache(t.lookup("slug")),"-thumb.jpg"]},alt:"..."}),"\n      "),"\n    "),"\n  "]})]}),m.__define__("rompecabezasJuego",function(){return""}),m.__define__("rompecabezasFin",function(){var t=this;return[v.Raw('<div class="row no-print">\n    <div class="col-lg-10 col-lg-offset-1"> \n      <h1>Muy bien!</h1>\n    </div>\n  </div>\n\n  '),v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-10 col-lg-offset-1"},"\n      ",v.H3({"class":"fin-etapa-titulo"},g.include(t.lookupTemplate("markdown"),function(){return b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"titulo"))})})),"\n      ",v.H3(v.Raw("<strong>Movimientos:</strong>")," ",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasMovimientos")})),"\n      ",v.H3(v.Raw("<strong>Tiempo:</strong>")," ",b.View(function(){return g.mustache(t.lookup("timer"),t.lookup("rompecabezasTiempo"))})),"\n    "),"\n  "),"\n\n  ",v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-4 col-lg-offset-1"},"\n      ",v.IMG({src:function(){return["assets/images/etapas/",g.mustache(g.dot(t.lookup("etapaCompletada"),"slug")),".jpg"]},"class":"img-responsive",alt:"..."}),"\n    "),"\n\n    ",v.DIV({"class":"col-lg-5"},"\n      ",g.include(t.lookupTemplate("markdown"),function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"descripcion"))}),"\n      "]}),"\n\n      ",v.Raw('<button class="btn btn-success" href="#" data-toggle="modal" data-target="#preguntaModal">\n        <span class="glyphicon glyphicon-arrow-right"></span> Continuar\n      </button>'),"\n      ",v.Raw('<button class="btn btn-primary" href="#" data-action="imprimir">\n        <span class="glyphicon glyphicon-print"></span> Imprimir\n      </button>'),"\n    "),"\n  "),"\n\n  ",v.DIV({id:"preguntaModal","class":"modal fade","data-keyboard":"false"},"\n    ",v.DIV({"class":"modal-dialog"},"\n      ",v.DIV({"class":"modal-content"},"\n        ",v.Raw('<div class="modal-header">\n          <h4 class="modal-title">Para continuar, responde:</h4>\n        </div>'),"\n        ",v.DIV({"class":"modal-body text-center"},"\n          ",g.include(t.lookupTemplate("markdown"),function(){return["\n            ",b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")},function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"pregunta","texto"))}),"\n            "]},function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")}),"\n            "]}),"\n          "]}),"\n        "),"\n        ",v.DIV({"class":"modal-footer text-center"},"\n          ",b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")},function(){return["\n            ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"respuesta","data-respuesta":"si"},"Sí"),"\n            ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"respuesta","data-respuesta":"no"},"No"),"\n          "]},function(){return["\n            ",v.BUTTON({"class":"btn btn-success",href:"#","data-action":"volver-a-jugar"},"\n              ",v.SPAN({"class":"glyphicon glyphicon-repeat"})," Volver a jugar\n            "),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  ")]})}.call(this),function(){function i(t){return t.preventDefault(),$("#preguntaModal").hide(),p.set("rompecabezasEtapaElegida",void 0),p.set("rompecabezasRespuesta",void 0),p.set("rompecabezasStep","elegirEtapa"),!1}var n={'click [data-action="comenzar"]':function(t,e){return i(t,e)},'click [data-action="etapa-elegida"]':function(t){t.preventDefault();var i=e.findOne({numero:this.numero});return p.set("rompecabezasEtapaElegida",i),p.set("rompecabezasStep","juego"),!1},'click [data-action="volver-al-comienzo"]':function(t){return t.preventDefault(),bootbox.confirm("¿Estás segur@ de que quieres abandonar el juego?",function(t){t&&(p.set("rompecabezasEtapaElegida",void 0),p.set("rompecabezasStep","elegirEtapa"))}),!1},'click [data-action="toggle-sound"]':function(){var e=!t.game.sound.mute;t.game.sound.mute=e,p.set("rompecabezasIsMuted",e)},'change [data-action="toggle-help"]':function(){var t=!p.get("rompecabezasHelpOn");p.set("rompecabezasHelpOn",t)},'click [data-action="reiniciar"]':function(e){return e.preventDefault(),bootbox.confirm("¿Estás segur@ de que quieres abandonar el juego?",function(e){e&&t.restart()}),!1},'click [data-action="imprimir"]':function(t){return t.preventDefault(),window.print(),!1},'click [data-action="respuesta"]':function(t){t.preventDefault();var e=$(t.currentTarget).data("respuesta"),i=p.get("rompecabezasEtapaElegida");return p.set("rompecabezasRespuesta",i.pregunta.respuesta[e]),!1},'click [data-action="volver-a-jugar"]':function(t,e){var n=$("#preguntaModal");return n.on("hidden.bs.modal",function(){i(t,e)}),n.modal("hide"),!1}};_.registerHelper("rompecabezasTiempo",function(){return p.get("rompecabezasTiempo")}),m.rompecabezas.rendered=function(){t.init()},m.rompecabezas.step=function(){var t=p.get("rompecabezasStep")||"intro";return m["rompecabezas"+f.capitalize(t)]},m.rompecabezas.events(n),m.rompecabezasIntro.events(n),m.rompecabezasElegirEtapa.etapas=function(){return e.find()},m.rompecabezasElegirEtapa.events(n),m.rompecabezasJuego.rendered=function(){t.game.state.start("preloader")},m.rompecabezasJuego.events(n),m.rompecabezasFin.etapaCompletada=function(){return p.get("rompecabezasEtapaElegida")},m.rompecabezasFin.events(n)}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-rompecabezas"]={Rompecabezas:t,Etapas:e}}(),function(){var t,e,i=Package.underscore._;(function(){e={}}).call(this),function(){!function(t,i){"use strict";function n(t,e){var i,n,r=t.toLowerCase();for(e=[].concat(e),i=0;i<e.length;i+=1)if(n=e[i]){if(n.test&&n.test(t))return!0;if(n.toLowerCase()===r)return!0}}var r=i.prototype.trim,o=i.prototype.trimRight,s=i.prototype.trimLeft,a=function(t){return 1*t||0},l=function(t,e){if(1>e)return"";for(var i="";e>0;)1&e&&(i+=t),e>>=1,t+=t;return i},u=[].slice,h=function(t){return null==t?"\\s":t.source?t.source:"["+m.escapeRegExp(t)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},d={};for(var p in c)d[c[p]]=p;d["'"]="#39";var f=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var e=l,n=function(){return n.cache.hasOwnProperty(arguments[0])||(n.cache[arguments[0]]=n.parse(arguments[0])),n.format.call(null,n.cache[arguments[0]],arguments)};return n.format=function(n,r){var o,s,a,l,u,h,c,d=1,p=n.length,m="",g=[];for(s=0;p>s;s++)if(m=t(n[s]),"string"===m)g.push(n[s]);else if("array"===m){if(l=n[s],l[2])for(o=r[d],a=0;a<l[2].length;a++){if(!o.hasOwnProperty(l[2][a]))throw new Error(f('[_.sprintf] property "%s" does not exist',l[2][a]));o=o[l[2][a]]}else o=l[1]?r[l[1]]:r[d++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw new Error(f("[_.sprintf] expecting number but found %s",t(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=i.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=i(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,h=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",c=l[6]-i(o).length,u=l[6]?e(h,c):"",g.push(l[5]?o+u:u+o)}return g.join("")},n.cache={},n.parse=function(t){for(var e=t,i=[],n=[],r=0;e;){if(null!==(i=/^[^\x25]+/.exec(e)))n.push(i[0]);else if(null!==(i=/^\x25{2}/.exec(e)))n.push("%");else{if(null===(i=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(i[2]){r|=1;var o=[],s=i[2],a=[];if(null===(a=/^([a-z_][a-z_\d]*)/i.exec(s)))throw new Error("[_.sprintf] huh?");for(o.push(a[1]);""!==(s=s.substring(a[0].length));)if(null!==(a=/^\.([a-z_][a-z_\d]*)/i.exec(s)))o.push(a[1]);else{if(null===(a=/^\[(\d+)\]/.exec(s)))throw new Error("[_.sprintf] huh?");o.push(a[1])}i[2]=o}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");n.push(i)}e=e.substring(i[0].length)}return n},n}(),m={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":i(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":i(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,e){return null==t?[]:(t=i(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])},clean:function(t){return m.strip(t).replace(/\s+/g," ")},count:function(t,e){if(null==t||null==e)return 0;t=i(t),e=i(e);for(var n=0,r=0,o=e.length;;){if(r=t.indexOf(e,r),-1===r)break;n++,r+=o}return n},chars:function(t){return null==t?[]:i(t).split("")},swapCase:function(t){return null==t?"":i(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":i(t).replace(/[&<>"']/g,function(t){return"&"+d[t]+";"})},unescapeHTML:function(t){return null==t?"":i(t).replace(/\&([^;]+);/g,function(t,e){var n;return e in c?c[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?i.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?i.fromCharCode(~~n[1]):t})},escapeRegExp:function(t){return null==t?"":i(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,i,n){var r=m.chars(t);return r.splice(~~e,~~i,n),r.join("")},insert:function(t,e,i){return m.splice(t,e,0,i)},include:function(t,e){return""===e?!0:null==t?!1:-1!==i(t).indexOf(e)},join:function(){var t=u.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:i(t).split("\n")},reverse:function(t){return m.chars(t).reverse().join("")},startsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=i(t),e=i(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=i(t),e=i(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},succ:function(t){return null==t?"":(t=i(t),t.slice(0,-1)+i.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=i(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return m.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return m.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return m.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return m.titleize(i(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return m.capitalize(m.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,e){return null==t?"":!e&&r?r.call(t):(e=h(e),i(t).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(t,e){return null==t?"":!e&&s?s.call(t):(e=h(e),i(t).replace(new RegExp("^"+e+"+"),""))},rtrim:function(t,e){return null==t?"":!e&&o?o.call(t):(e=h(e),i(t).replace(new RegExp(e+"+$"),""))},truncate:function(t,e,n){return null==t?"":(t=i(t),n=n||"...",e=~~e,t.length>e?t.slice(0,e)+n:t)},prune:function(t,e,n){if(null==t)return"";if(t=i(t),e=~~e,n=null!=n?i(n):"...",t.length<=e)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "
},o=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):m.rtrim(o.slice(0,o.length-1)),(o+n).length>t.length?t:t.slice(0,o.length)+n},words:function(t,e){return m.isBlank(t)?[]:m.trim(t,e).split(e||/\s+/)},pad:function(t,e,n,r){t=null==t?"":i(t),e=~~e;var o=0;switch(n?n.length>1&&(n=n.charAt(0)):n=" ",r){case"right":return o=e-t.length,t+l(n,o);case"both":return o=e-t.length,l(n,Math.ceil(o/2))+t+l(n,Math.floor(o/2));default:return o=e-t.length,l(n,o)+t}},lpad:function(t,e,i){return m.pad(t,e,i)},rpad:function(t,e,i){return m.pad(t,e,i,"right")},lrpad:function(t,e,i){return m.pad(t,e,i,"both")},sprintf:f,vsprintf:function(t,e){return e.unshift(t),f.apply(null,e)},toNumber:function(t,e){return t?(t=m.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?a(a(t).toFixed(~~e)):0/0):0},numberFormat:function(t,e,i,n){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),n="string"==typeof n?n:",";var r=t.split("."),o=r[0],s=r[1]?(i||".")+r[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+n)+s},strRight:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.indexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strRightBack:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.lastIndexOf(e):-1;return~n?t.slice(n+e.length,t.length):t},strLeft:function(t,e){if(null==t)return"";t=i(t),e=null!=e?i(e):e;var n=e?t.indexOf(e):-1;return~n?t.slice(0,n):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var i=t.lastIndexOf(e);return~i?t.slice(0,i):t},toSentence:function(t,e,i,n){e=e||", ",i=i||" and ";var r=t.slice(),o=r.pop();return t.length>2&&n&&(i=m.rtrim(e)+i),r.length?r.join(e)+i+o:o},toSentenceSerial:function(){var t=u.call(arguments);return t[3]=!0,m.toSentence.apply(m,t)},slugify:function(t){if(null==t)return"";var e="ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź",n="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",r=new RegExp(h(e),"g");return t=i(t).toLowerCase().replace(r,function(t){var i=e.indexOf(t);return n.charAt(i)||"-"}),m.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return m.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,e,n){if(null==t)return"";if(e=~~e,null==n)return l(i(t),e);for(var r=[];e>0;r[--e]=t);return r.join(n)},naturalCmp:function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var n=/(\.\d+)|(\d+)|(\D+)/g,r=i(t).toLowerCase().match(n),o=i(e).toLowerCase().match(n),s=Math.min(r.length,o.length),a=0;s>a;a++){var l=r[a],u=o[a];if(l!==u){var h=parseInt(l,10);if(!isNaN(h)){var c=parseInt(u,10);if(!isNaN(c)&&h-c)return h-c}return u>l?-1:1}}return r.length===o.length?r.length-o.length:e>t?-1:1},levenshtein:function(t,e){if(null==t&&null==e)return 0;if(null==t)return i(e).length;if(null==e)return i(t).length;t=i(t),e=i(e);for(var n,r,o=[],s=0;s<=e.length;s++)for(var a=0;a<=t.length;a++)r=s&&a?t.charAt(a-1)===e.charAt(s-1)?n:Math.min(o[a],o[a-1],n)+1:s+a,n=o[a],o[a]=r;return o.pop()},toBoolean:function(t,e,i){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=m.trim(t),n(t,e||["true","1"])?!0:n(t,i||["false","0"])?!1:void 0)}};m.strip=m.trim,m.lstrip=m.ltrim,m.rstrip=m.rtrim,m.center=m.lrpad,m.rjust=m.lpad,m.ljust=m.rpad,m.contains=m.include,m.q=m.quote,m.toBool=m.toBoolean,"undefined"!=typeof e&&("undefined"!=typeof module&&module.exports&&(module.exports=m),e._s=m),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return m}),t._=t._||{},t._.string=t._.str=m}(this,String)}.call(this),function(){t=e._s,i.str=t,i.mixin(i.str.exports()),i.str.include("Underscore.string","string")}.call(this),"undefined"==typeof Package&&(Package={}),Package["underscore-string-latest"]={_s:t}}(),function(){{var t,e,i,n,r=Package.meteor.Meteor;Package.underscore._}(function(){n="object"==typeof n?n:{};var t,e,o,s=[].slice;o=null!=("undefined"!=typeof process&&null!==process?process.nextTick:void 0)?process.nextTick:function(t){return setTimeout(t,0)},i=function(){function t(){}return t.prototype.on=function(t,e){var i;return this._events||(this._events={}),(i=this._events)[t]||(i[t]=[]),this._events[t].push(e),this},t.prototype.removeListener=function(t,e){var i,n,r;for(this._events||(this._events={}),n=(r=this._events)[t]||(r[t]=[]),i=0;i<n.length;)n[i]===e&&(n[i]=void 0),i++;return o(function(e){return function(){var i;return e._events[t]=function(){var e,n,r,o;for(r=this._events[t],o=[],e=0,n=r.length;n>e;e++)i=r[e],i&&o.push(i);return o}.call(e)}}(this)),this},t.prototype.emit=function(){var t,e,i,n,r,o,a;if(e=arguments[0],t=2<=arguments.length?s.call(arguments,1):[],!(null!=(o=this._events)?o[e]:void 0))return this;for(a=this._events[e],n=0,r=a.length;r>n;n++)i=a[n],i&&i.apply(this,t);return this},t}(),i.mixin=function(t){var e;return e=t.prototype||t,e.on=i.prototype.on,e.removeListener=i.prototype.removeListener,e.emit=i.prototype.emit,t},t="undefined"!=typeof window,e="undefined"!=typeof r,t||e?this.MicroEvent=i:module.exports=i}).call(this),function(){n="object"==typeof n?n:{};var e,i;e="undefined"!=typeof window,i="undefined"!=typeof r,t={},t._browserOut=function(){var t;if(null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return 0===arguments.length?console.log(""):"function"==typeof console.log.apply?console.log.apply(console,arguments):"function"==typeof Function.prototype.bind?(t=Function.prototype.bind.call(console.log,console),t.apply(console,arguments)):Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},t._browserErr=function(){var t;if(null!=("undefined"!=typeof console&&null!==console?console.error:void 0))return 0===arguments.length?console.error(""):"function"==typeof console.error.apply?console.error.apply(console,arguments):"function"==typeof Function.prototype.bind?(t=Function.prototype.bind.call(console.error,console),t.apply(console,arguments)):Function.prototype.call.call(console.error,console,Array.prototype.slice.call(arguments))},t.out=function(i){return e?t._browserOut.apply(this,i):console.log.apply(console,i)},t.err=function(i){return e?t._browserOut.apply(this,i):console.error.apply(console,i)},e||i?this.Pince=t:module.exports=t}.call(this),function(){n="object"==typeof n?n:{};var o,s,a,l,u,h,c,d,p,f,m,g,_,y,v,b,w,x=[].slice,T={}.hasOwnProperty,M=function(t,e){function i(){this.constructor=t}for(var n in e)T.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};c="undefined"!=typeof r,h="undefined"!=typeof window,h?(p=function(){return p},p.format=function(){return""},o=i):c?(p=Npm.require("moment"),o=Npm.require("events").EventEmitter):(p=require("moment"),o=require("events").EventEmitter,t=require("./console.coffee")),_={error:0,warn:1,info:2,debug:3,trace:4},f=function(t){return t},h?u={error:f,warn:f,info:f,debug:f,trace:f}:(l=c?Npm.require("cli-color"):require("cli-color"),u={error:l.red.bold,warn:l.yellow,info:l.bold,debug:l.blue,trace:l.blackBright}),s="MADEYE_LOGLEVEL",m=function(){var t,e,i;return t=h?c?null!=(e=r.settings)&&null!=(i=e["public"])?i.logLevel:void 0:null:process.env[s]},g=function(){var t,e,i,n,o,a,l,u;if(h)return c&&null!=(o=null!=(a=r.settings)&&null!=(l=a["public"])?l.specificLogLevels:void 0)?o:{};i={},u=process.env;for(t in u)n=u[t],0===t.indexOf(""+s+"_")&&t!==s&&(e=t.substr((""+s+"_").length),e=e.split("_").join(":"),i[e]=n);return i},y=null!=(w=m())?w:"info",b=g(),v=null,a=function(){function e(t){var e,i;null==t&&(t={}),"string"==typeof t&&(t={logLevel:t}),this.logLevel=null!=(e=t.logLevel)?e:y,this.logLevels=null!=(i=t.logLevels)?i:b,this.loggers={},this.listenFns={}}return e.prototype._reattachLoggers=function(){var t,e,i,n;i=this.loggers,n=[];for(e in i)t=i[e],this.detach(e),n.push(this.listen(t,e));return n},e.prototype.setLevel=function(t,e){var i;if(e){if(!t)throw new Error("Must supply a name");return i={},i[t]=e,void this.setLevels(i)}if(e=t,!e)throw new Error("Must supply a level");this.logLevel!==e&&(this.logLevel=e,this._reattachLoggers())},e.prototype.setLevels=function(t){var e,i;for(i in t)e=t[i],this.logLevels[i]=e;return this._reattachLoggers()},e.prototype.findLevelFor=function(t){var e,i,n,r;for(i=this.logLevels[t],r=t;r.indexOf(":")>-1&&!i&&(e=r.lastIndexOf(":"),r=r.substr(0,e),n=this.logLevels[r],null==i&&(i=n),!i););return null==i&&(i=this.logLevel),i},e.prototype.listen=function(t,e){var i,n;if(!t)throw Error("An object is required for logging!");if(!e)throw Error("Name is required for logging!");this.loggers[e]=t,n&&(this.logLevels[e]=n),n=this.findLevelFor(e),this.listenFns[e]={},i=function(t){return function(){var i,n;return i=1<=arguments.length?x.call(arguments,0):[],n="function"==typeof v?v(i):void 0,n!==!1?t.handleLog({timestamp:new Date,level:"error",name:e,message:i}):void 0}}(this),t.on("error",i),this.listenFns[e].error=i,["warn","info","debug","trace"].forEach(function(i){return function(r){var o;if(!(_[r]>_[n]))return o=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],i.handleLog({timestamp:new Date,level:r,name:e,message:t})},t.on(r,o),i.listenFns[e][r]=o}}(this))},e.prototype.detach=function(t){var e,i,n,r;if(n=this.loggers[t]){r=this.listenFns[t];for(e in r)i=r[e],n.removeListener(e,i);delete this.listenFns[t],delete this.loggers[t]}},e.prototype.handleLog=function(e){var i,n,r,o;return o=p(e.timestamp).format("YYYY-MM-DD HH:mm:ss.SSS"),i=u[e.level],r=""+o+" "+i(e.level+": ")+" ",e.name&&(r+="["+e.name+"] "),n="string"==typeof e.message?[e.message]:e.message,n.unshift(r),_[e.level]<=_.warn?t.err(n):t.out(n)},e}(),d=new a,e=function(t){function e(t){null==t&&(t={}),"string"==typeof t&&(t={name:t}),this.name=t.name,d.listen(this,t.name,t.logLevel)}return M(e,t),e.setLevel=function(){return d.setLevel.apply(d,arguments)},e.setLevels=function(){return d.setLevels.apply(d,arguments)},e.onError=function(t){return v=t},e.listen=function(t,e,i){return d.listen(t,e,i)},e.prototype._log=function(t,e){return e.unshift(t),this.emit.apply(this,e)},e.prototype.log=function(){var t,e;return t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[],this._log(t,e)},e.prototype.trace=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("trace",t)},e.prototype.debug=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("debug",t)},e.prototype.info=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("info",t)},e.prototype.warn=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("warn",t)},e.prototype.error=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("error",t)},e}(o),this.Logger=e,e.listener=d,"undefined"!=typeof exports&&(module.exports=e)}.call(this),"undefined"==typeof Package&&(Package={}),Package.pince={Pince:t,Logger:e,MicroEvent:i}}(),function(){var t=(Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery);(function(){if("undefined"==typeof t)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var r=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.alert");r||i.data("bs.alert",r=new n(this)),"string"==typeof e&&r[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var n=t(this),r=n.attr("data-target");r||(r=n.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.button"),o="object"==typeof e&&e;r||n.data("bs.button",r=new i(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,r=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[r]()),n[r](null==o[e]?this.options[e]:o[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),s="string"==typeof e?e:o.slide;r||n.data("bs.carousel",r=new i(this,o)),"number"==typeof e?r.to(e):s?r[s]():o.interval&&r.pause().cycle()})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),r=i||n[e](),o=this.interval,s="next"==e?"left":"right",a="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[a]()}if(r.hasClass("active"))return this.sliding=!1;var u=r[0],h=t.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(r)]);c&&c.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,n.addClass(s),r.addClass(s),n.one("bsTransitionEnd",function(){r.removeClass([e,s].join(" ")).addClass("active"),n.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,r=t(this),o=t(r.attr("data-target")||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var s=t.extend({},o.data(),r.data()),a=r.attr("data-slide-to");a&&(s.interval=!1),e.call(o,s),a&&o.data("bs.carousel").to(a),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!r&&o.toggle&&"show"==e&&(e=!e),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var r=n.data("bs.collapse");if(r&&r.transitioning)return;e.call(n,"hide"),r||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return s.call(this);var a=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(s,this)).emulateTransitionEnd(350)[o](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,r=t(this),o=r.attr("data-target")||i.preventDefault()||(n=r.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),s=t(o),a=s.data("bs.collapse"),l=a?"toggle":r.data(),u=r.attr("data-parent"),h=u&&t(u);a&&a.transitioning||(h&&h.find('[data-toggle="collapse"][data-parent="'+u+'"]').not(r).addClass("collapsed"),r[s.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(s,l)})}(t),+function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(o).each(function(){var n=i(t(this)),r={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new s(this)),"string"==typeof e&&n[e].call(i)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',s=function(e){t(e).on("click.bs.dropdown",this.toggle)};s.VERSION="3.2.0",s.prototype.toggle=function(n){var r=t(this);if(!r.is(".disabled, :disabled")){var o=i(r),s=o.hasClass("open");if(e(),!s){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;r.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},s.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var r=i(n),s=r.hasClass("open");if(!s||s&&27==e.keyCode)return 27==e.which&&r.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",l=r.find('[role="menu"]'+a+', [role="listbox"]'+a);if(l.length){var u=l.index(l.filter(":focus"));38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=s,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,s.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',s.prototype.keydown)}(t),+function(t){"use strict";function e(e,n){return this.each(function(){var r=t(this),o=r.data("bs.modal"),s=t.extend({},i.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new i(this,s)),"string"==typeof e?o[e](n):s.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(r)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),r=n.attr("href"),o=t(n.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),s=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,s,this)})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tooltip"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||n.data("bs.tooltip",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var s=r[o];if("click"==s)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=s){var a="hover"==s?"mouseenter":"focusin",l="hover"==s?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,l=a.test(s);l&&(s=s.replace(a,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),h=r[0].offsetWidth,c=r[0].offsetHeight;if(l){var d=s,p=this.$element.parent(),f=this.getPosition(p);s="bottom"==s&&u.top+u.height+c-f.scroll>f.height?"top":"top"==s&&u.top-f.scroll-c<0?"bottom":"right"==s&&u.right+h>f.width?"left":"left"==s&&u.left-h<f.left?"right":s,r.removeClass(d).addClass(s)}var m=this.getCalculatedOffset(s,u,h,c);this.applyPlacement(m,s);var g=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),r=n[0].offsetWidth,o=n[0].offsetHeight,s=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(s)&&(s=0),isNaN(a)&&(a=0),e.top=e.top+s,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var l=n[0].offsetWidth,u=n[0].offsetHeight;"top"==i&&u!=o&&(e.top=e.top+o-u);var h=this.getViewportAdjustedDelta(i,e,l,u);h.left?e.left+=h.left:e.top+=h.top;var c=h.left?2*h.left-r+l:2*h.top-o+u,d=h.left?"left":"top",p=h.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(c,n[0][p],d)
},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,s=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-s.scroll,l=e.top+o-s.scroll+n;a<s.top?r.top=s.top-a:l>s.top+s.height&&(r.top=s.top+s.height-l)}else{var u=e.left-o,h=e.left+o+i;u<s.left?r.left=s.left-u:h>s.width&&(r.left=s.left+s.width-h)}return r},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.popover"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||n.data("bs.popover",r=new i(this,o)),"string"==typeof e&&r[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(t),+function(t){"use strict";function e(i,n){var r=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),r=n.data("bs.scrollspy"),o="object"==typeof i&&i;r||n.data("bs.scrollspy",r=new e(this,o)),"string"==typeof i&&r[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),r=n.data("target")||n.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),r=this.offsets,o=this.targets,s=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return s!=(t=o[o.length-1])&&this.activate(t);if(s&&e<=r[0])return s!=(t=o[0])&&this.activate(t);for(t=r.length;t--;)s!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.tab");r||n.data("bs.tab",r=new i(this)),"string"==typeof e&&r[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=i.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var s=t(n);this.activate(e.closest("li"),i),this.activate(s,s.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},i.prototype.activate=function(e,i,n){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),s?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),s=n&&t.support.transition&&o.hasClass("fade");s?o.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.affix"),o="object"==typeof e&&e;r||n.data("bs.affix",r=new i(this,o)),"string"==typeof e&&r[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),r=this.$element.offset(),o=this.options.offset,s=o.top,a=o.bottom;"object"!=typeof o&&(a=s=o),"function"==typeof s&&(s=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var l=null!=this.unpin&&n+this.unpin<=r.top?!1:null!=a&&r.top+this.$element.height()>=e-a?"bottom":null!=s&&s>=n?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),h=t.Event(u+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(u).trigger(t.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-a}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(t)}).call(this),"undefined"==typeof Package&&(Package={}),Package["bootstrap-3"]={}}(),function(){{var t;Package.meteor.Meteor,Package.underscore._}(function(){(function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t,e){function i(){le.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var n=!0;return l(function(){return n&&(i(),n=!1),e.apply(this,arguments)},e)}function n(t,e){return function(i){return c(t.call(this,i),e)}}function r(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function o(){}function s(t){M(t),l(this,t)}function a(t){var e=_(t),i=e.year||0,n=e.quarter||0,r=e.month||0,o=e.week||0,s=e.day||0,a=e.hour||0,l=e.minute||0,u=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*u+6e4*l+36e5*a,this._days=+s+7*o,this._months=+r+3*n+12*i,this._data={},this._bubble()}function l(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function u(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&xe.hasOwnProperty(e)&&(i[e]=t[e]);return i}function h(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,i){for(var n=""+Math.abs(t),r=t>=0;n.length<e;)n="0"+n;return(r?i?"+":"":"-")+n}function d(t,e,i,n){var r=e._milliseconds,o=e._days,s=e._months;n=null==n?!0:n,r&&t._d.setTime(+t._d+r*i),o&&ne(t,"Date",ie(t,"Date")+o*i),s&&ee(t,ie(t,"Month")+s*i),n&&le.updateOffset(t,o||s)}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function m(t,e,i){var n,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),s=0;for(n=0;r>n;n++)(i&&t[n]!==e[n]||!i&&v(t[n])!==v(e[n]))&&s++;return s+o}function g(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Je[t]||Qe[e]||e}return t}function _(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=g(i),e&&(n[e]=t[i]));return n}function y(e){var i,n;if(0===e.indexOf("week"))i=7,n="day";else{if(0!==e.indexOf("month"))return;i=12,n="month"}le[e]=function(r,o){var s,a,l=le.fn._lang[e],u=[];if("number"==typeof r&&(o=r,r=t),a=function(t){var e=le().utc().set(n,t);return l.call(le.fn._lang,e,r||"")},null!=o)return a(o);for(s=0;i>s;s++)u.push(a(s));return u}}function v(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function b(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t,e,i){return Q(le([t,11,31+e-i]),e,i).week}function x(t){return T(t)?366:365}function T(t){return t%4===0&&t%100!==0||t%400===0}function M(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[me]<0||t._a[me]>11?me:t._a[ge]<1||t._a[ge]>b(t._a[fe],t._a[me])?ge:t._a[_e]<0||t._a[_e]>23?_e:t._a[ye]<0||t._a[ye]>59?ye:t._a[ve]<0||t._a[ve]>59?ve:t._a[be]<0||t._a[be]>999?be:-1,t._pf._overflowDayOfYear&&(fe>e||e>ge)&&(e=ge),t._pf.overflow=e)}function k(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function S(t){return t?t.toLowerCase().replace("_","-"):t}function L(t,e){return e._isUTC?le(t).zone(e._offset||0):le(t).local()}function C(t,e){return e.abbr=t,we[t]||(we[t]=new o),we[t].set(e),we[t]}function P(t){delete we[t]}function D(t){var e,i,n,r,o=0,s=function(t){if(!we[t]&&Te)try{require("./lang/"+t)}catch(e){}return we[t]};if(!t)return le.fn._lang;if(!p(t)){if(i=s(t))return i;t=[t]}for(;o<t.length;){for(r=S(t[o]).split("-"),e=r.length,n=S(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=s(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&m(r,n,!0)>=e-1)break;e--}o++}return le.fn._lang}function E(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function A(t){var e,i,n=t.match(Le);for(e=0,i=n.length;i>e;e++)n[e]=ii[n[e]]?ii[n[e]]:E(n[e]);return function(r){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(r,t):n[e];return o}}function O(t,e){return t.isValid()?(e=I(e,t.lang()),Ze[e]||(Ze[e]=A(e)),Ze[e](t)):t.lang().invalidDate()}function I(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ce.lastIndex=0;n>=0&&Ce.test(t);)t=t.replace(Ce,i),Ce.lastIndex=0,n-=1;return t}function R(t,e){var i,n=e._strict;switch(t){case"Q":return Fe;case"DDDD":return Ue;case"YYYY":case"GGGG":case"gggg":return n?He:Ee;case"Y":case"G":case"g":return We;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Ge:Ae;case"S":if(n)return Fe;case"SS":if(n)return Be;case"SSS":if(n)return Ue;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ie;case"a":case"A":return D(e._l)._meridiemParse;case"X":return Ne;case"Z":case"ZZ":return Re;case"T":return Ye;case"SSSS":return Oe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Be:Pe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pe;case"Do":return je;default:return i=new RegExp(G(H(t.replace("\\","")),"i"))}}function Y(t){t=t||"";var e=t.match(Re)||[],i=e[e.length-1]||[],n=(i+"").match(qe)||["-",0,0],r=+(60*n[1])+v(n[2]);return"+"===n[0]?-r:r}function N(t,e,i){var n,r=i._a;switch(t){case"Q":null!=e&&(r[me]=3*(v(e)-1));break;case"M":case"MM":null!=e&&(r[me]=v(e)-1);break;case"MMM":case"MMMM":n=D(i._l).monthsParse(e),null!=n?r[me]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[ge]=v(e));break;case"Do":null!=e&&(r[ge]=v(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=v(e));break;case"YY":r[fe]=le.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[fe]=v(e);break;case"a":case"A":i._isPm=D(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[_e]=v(e);break;case"m":case"mm":r[ye]=v(e);break;case"s":case"ss":r[ve]=v(e);break;case"S":case"SS":case"SSS":case"SSSS":r[be]=v(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=Y(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=e)}}function j(t){var e,i,n,r,o,s,a,l,u,h,c=[];if(!t._d){for(n=B(t),t._w&&null==t._a[ge]&&null==t._a[me]&&(o=function(e){var i=parseInt(e,10);return e?e.length<3?i>68?1900+i:2e3+i:i:null==t._a[fe]?le().weekYear():t._a[fe]},s=t._w,null!=s.GG||null!=s.W||null!=s.E?a=Z(o(s.GG),s.W||1,s.E,4,1):(l=D(t._l),u=null!=s.d?q(s.d,l):null!=s.e?parseInt(s.e,10)+l._week.dow:0,h=parseInt(s.w,10)||1,null!=s.d&&u<l._week.dow&&h++,a=Z(o(s.gg),h,u,l._week.doy,l._week.dow)),t._a[fe]=a.year,t._dayOfYear=a.dayOfYear),t._dayOfYear&&(r=null==t._a[fe]?n[fe]:t._a[fe],t._dayOfYear>x(r)&&(t._pf._overflowDayOfYear=!0),i=X(r,0,t._dayOfYear),t._a[me]=i.getUTCMonth(),t._a[ge]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=c[e]=n[e];for(;7>e;e++)t._a[e]=c[e]=null==t._a[e]?2===e?1:0:t._a[e];c[_e]+=v((t._tzm||0)/60),c[ye]+=v((t._tzm||0)%60),t._d=(t._useUTC?X:$).apply(null,c)}}function F(t){var e;t._d||(e=_(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],j(t))}function B(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function U(t){t._a=[],t._pf.empty=!0;var e,i,n,r,o,s=D(t._l),a=""+t._i,l=a.length,u=0;for(n=I(t._f,s).match(Le)||[],e=0;e<n.length;e++)r=n[e],i=(a.match(R(r,t))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),u+=i.length),ii[r]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(r),N(r,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=l-u,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[_e]<12&&(t._a[_e]+=12),t._isPm===!1&&12===t._a[_e]&&(t._a[_e]=0),j(t),M(t)}function H(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r})}function G(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(t){var i,n,r,o,s;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)s=0,i=l({},t),i._pf=e(),i._f=t._f[o],U(i),k(i)&&(s+=i._pf.charsLeftOver,s+=10*i._pf.unusedTokens.length,i._pf.score=s,(null==r||r>s)&&(r=s,n=i));l(t,n||i)}function z(t){var e,i,n=t._i,r=ze.exec(n);if(r){for(t._pf.iso=!0,e=0,i=$e.length;i>e;e++)if($e[e][1].exec(n)){t._f=$e[e][0]+(r[6]||" ");break}for(e=0,i=Xe.length;i>e;e++)if(Xe[e][1].exec(n)){t._f+=Xe[e][0];break}n.match(Re)&&(t._f+="Z"),U(t)}else le.createFromInputFallback(t)}function V(e){var i=e._i,n=Me.exec(i);i===t?e._d=new Date:n?e._d=new Date(+n[1]):"string"==typeof i?z(e):p(i)?(e._a=i.slice(0),j(e)):f(i)?e._d=new Date(+i):"object"==typeof i?F(e):"number"==typeof i?e._d=new Date(i):le.createFromInputFallback(e)}function $(t,e,i,n,r,o,s){var a=new Date(t,e,i,n,r,o,s);return 1970>t&&a.setFullYear(t),a}function X(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function K(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function J(t,e,i){var n=pe(Math.abs(t)/1e3),r=pe(n/60),o=pe(r/60),s=pe(o/24),a=pe(s/365),l=45>n&&["s",n]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===s&&["d"]||25>=s&&["dd",s]||45>=s&&["M"]||345>s&&["MM",pe(s/30)]||1===a&&["y"]||["yy",a];return l[2]=e,l[3]=t>0,l[4]=i,K.apply({},l)}function Q(t,e,i){var n,r=i-e,o=i-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),n=le(t).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function Z(t,e,i,n,r){var o,s,a=X(t,0,1).getUTCDay();return i=null!=i?i:r,o=r-a+(a>n?7:0)-(r>a?7:0),s=7*(e-1)+(i-r)+o+1,{year:s>0?t:t-1,dayOfYear:s>0?s:x(t-1)+s}}function te(e){var i=e._i,n=e._f;return null===i||n===t&&""===i?le.invalid({nullInput:!0}):("string"==typeof i&&(e._i=i=D().preparse(i)),le.isMoment(i)?(e=u(i),e._d=new Date(+i._d)):n?p(n)?W(e):U(e):V(e),new s(e))}function ee(t,e){var i;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),b(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function ie(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ne(t,e,i){return"Month"===e?ee(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function re(t,e){return function(i){return null!=i?(ne(this,t,i),le.updateOffset(this,e),this):ie(this,t)}}function oe(t){le.duration.fn[t]=function(){return this._data[t]}}function se(t,e){le.duration.fn["as"+t]=function(){return+this/e}}function ae(t){"undefined"==typeof ender&&(ue=de.moment,de.moment=t?i("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",le):le)}for(var le,ue,he,ce="2.6.0",de="undefined"!=typeof global?global:this,pe=Math.round,fe=0,me=1,ge=2,_e=3,ye=4,ve=5,be=6,we={},xe={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Te="undefined"!=typeof module&&module.exports,Me=/^\/?Date\((\-?\d+)/i,ke=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Se=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Le=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ce=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pe=/\d\d?/,De=/\d{1,3}/,Ee=/\d{1,4}/,Ae=/[+\-]?\d{1,6}/,Oe=/\d+/,Ie=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Re=/Z|[\+\-]\d\d:?\d\d/gi,Ye=/T/i,Ne=/[\+\-]?\d+(\.\d{1,3})?/,je=/\d{1,2}/,Fe=/\d/,Be=/\d\d/,Ue=/\d{3}/,He=/\d{4}/,Ge=/[+-]?\d{6}/,We=/[+-]?\d+/,ze=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ve="YYYY-MM-DDTHH:mm:ssZ",$e=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Xe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],qe=/([\+\-]|\d\d)/gi,Ke=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Je={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Qe={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ze={},ti="DDD w W M D d".split(" "),ei="M D H h m s w W".split(" "),ii={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return v(this.milliseconds()/100)},SS:function(){return c(v(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(v(t/60),2)+":"+c(v(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(v(t/60),2)+c(v(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},ni=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ti.length;)he=ti.pop(),ii[he+"o"]=r(ii[he],he);for(;ei.length;)he=ei.pop(),ii[he+he]=n(ii[he],2);for(ii.DDDD=n(ii.DDD,3),l(o.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=le.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=le([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var r=this._relativeTime[i];return"function"==typeof r?r(t,e,i,n):r.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Q(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),le=function(i,n,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._i=i,s._f=n,s._l=r,s._strict=o,s._isUTC=!1,s._pf=e(),te(s)},le.suppressDeprecationWarnings=!1,le.createFromInputFallback=i("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),le.utc=function(i,n,r,o){var s;return"boolean"==typeof r&&(o=r,r=t),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=r,s._i=i,s._f=n,s._strict=o,s._pf=e(),te(s).utc()},le.unix=function(t){return le(1e3*t)},le.duration=function(t,e){var i,n,r,o=t,s=null;return le.isDuration(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(s=ke.exec(t))?(i="-"===s[1]?-1:1,o={y:0,d:v(s[ge])*i,h:v(s[_e])*i,m:v(s[ye])*i,s:v(s[ve])*i,ms:v(s[be])*i}):(s=Se.exec(t))&&(i="-"===s[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},o={y:r(s[2]),M:r(s[3]),d:r(s[4]),h:r(s[5]),m:r(s[6]),s:r(s[7]),w:r(s[8])}),n=new a(o),le.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},le.version=ce,le.defaultFormat=Ve,le.momentProperties=xe,le.updateOffset=function(){},le.lang=function(t,e){var i;return t?(e?C(S(t),e):null===e?(P(t),t="en"):we[t]||D(t),i=le.duration.fn._lang=le.fn._lang=D(t),i._abbr):le.fn._lang._abbr},le.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),D(t)},le.isMoment=function(t){return t instanceof s||null!=t&&t.hasOwnProperty("_isAMomentObject")},le.isDuration=function(t){return t instanceof a},he=ni.length-1;he>=0;--he)y(ni[he]);le.normalizeUnits=function(t){return g(t)},le.invalid=function(t){var e=le.utc(0/0);return null!=t?l(e._pf,t):e._pf.userInvalidated=!0,e},le.parseZone=function(){return le.apply(null,arguments).parseZone()},le.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)},l(le.fn=s.prototype,{clone:function(){return le(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=le(this).utc();return 0<t.year()&&t.year()<=9999?O(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?le.utc(this._a):le(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=O(this,t||le.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,i,-1),this},diff:function(t,e,i){var n,r,o=L(t,this),s=6e4*(this.zone()-o.zone());return e=g(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-le(this).startOf("month")-(o-le(o).startOf("month")))/n,r-=6e4*(this.zone()-le(this).startOf("month").zone()-(o.zone()-le(o).startOf("month").zone()))/n,"year"===e&&(r/=12)):(n=this-o,r="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-s)/864e5:"week"===e?(n-s)/6048e5:n),i?r:h(r)
},from:function(t,e){return le.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(le(),t)},calendar:function(){var t=L(le(),this).startOf("day"),e=this.diff(t,"days",!0),i=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(i,this))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=q(t,this.lang()),this.add({d:t-e})):e},month:re("Month",!0),startOf:function(t){switch(t=g(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=g(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+le(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+le(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+L(t,this).startOf(e)},min:function(t){return t=le.apply(null,arguments),this>t?this:t},max:function(t){return t=le.apply(null,arguments),t>this?this:t},zone:function(t,e){var i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=Y(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,i!==t&&(!e||this._changeInProgress?d(this,le.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?le(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return b(this.year(),this.month())},dayOfYear:function(t){var e=pe((le(this).startOf("day")-le(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=Q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Q(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Q(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return w(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return w(this.year(),t.dow,t.doy)},get:function(t){return t=g(t),this[t]()},set:function(t,e){return t=g(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=D(e),this)}}),le.fn.millisecond=le.fn.milliseconds=re("Milliseconds",!1),le.fn.second=le.fn.seconds=re("Seconds",!1),le.fn.minute=le.fn.minutes=re("Minutes",!1),le.fn.hour=le.fn.hours=re("Hours",!0),le.fn.date=re("Date",!0),le.fn.dates=i("dates accessor is deprecated. Use date instead.",re("Date",!0)),le.fn.year=re("FullYear",!0),le.fn.years=i("years accessor is deprecated. Use year instead.",re("FullYear",!0)),le.fn.days=le.fn.day,le.fn.months=le.fn.month,le.fn.weeks=le.fn.week,le.fn.isoWeeks=le.fn.isoWeek,le.fn.quarters=le.fn.quarter,le.fn.toJSON=le.fn.toISOString,l(le.duration.fn=a.prototype,{_bubble:function(){var t,e,i,n,r=this._milliseconds,o=this._days,s=this._months,a=this._data;a.milliseconds=r%1e3,t=h(r/1e3),a.seconds=t%60,e=h(t/60),a.minutes=e%60,i=h(e/60),a.hours=i%24,o+=h(i/24),a.days=o%30,s+=h(o/30),a.months=s%12,n=h(s/12),a.years=n},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},humanize:function(t){var e=+this,i=J(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=le.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=le.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=g(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=g(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:le.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||r||o?"T":"")+(n?n+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"}});for(he in Ke)Ke.hasOwnProperty(he)&&(se(he,Ke[he]),oe(he.toLowerCase()));se("Weeks",6048e5),le.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},le.lang("en",{ordinal:function(t){var e=t%10,i=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),function(t){t(le)}(function(t){return t.lang("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("ar",{months:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),monthsShort:"يناير/ كانون الثاني_فبراير/ شباط_مارس/ آذار_أبريل/ نيسان_مايو/ أيار_يونيو/ حزيران_يوليو/ تموز_أغسطس/ آب_سبتمبر/ أيلول_أكتوبر/ تشرين الأول_نوفمبر/ تشرين الثاني_ديسمبر/ كانون الأول".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinal:function(t){var e=t%10,i=t%100;return 0===t?t+"-ев":0===i?t+"-ен":i>10&&20>i?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(e){function i(t,e,i){var n={mm:"munutenn",MM:"miz",dd:"devezh"};return t+" "+o(n[i],t)}function n(t){switch(r(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}function r(t){return t>9?r(t%10):t}function o(t,e){return 2===e?s(t):t}function s(e){var i={m:"v",b:"v",d:"z"};return i[e.charAt(0)]===t?e:i[e.charAt(0)]+e.substring(1)}return e.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:i,h:"un eur",hh:"%d eur",d:"un devezh",dd:i,M:"ur miz",MM:i,y:"ur bloaz",yy:n},ordinal:function(t){var e=1===t?"añ":"vet";return t+e},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i){var n=t+" ";switch(i){case"m":return e?"jedna minuta":"jedne minute";case"mm":return n+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return n+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return n+=1===t?"dan":"dana";case"MM":return n+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return n+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t){return t>1&&5>t&&1!==~~(t/10)}function i(t,i,n,r){var o=t+" ";switch(n){case"s":return i||r?"pár sekund":"pár sekundami";case"m":return i?"minuta":r?"minutu":"minutou";case"mm":return i||r?o+(e(t)?"minuty":"minut"):o+"minutami";case"h":return i?"hodina":r?"hodinu":"hodinou";case"hh":return i||r?o+(e(t)?"hodiny":"hodin"):o+"hodinami";case"d":return i||r?"den":"dnem";case"dd":return i||r?o+(e(t)?"dny":"dní"):o+"dny";case"M":return i||r?"měsíc":"měsícem";case"MM":return i||r?o+(e(t)?"měsíce":"měsíců"):o+"měsíci";case"y":return i||r?"rok":"rokem";case"yy":return i||r?o+(e(t)?"roky":"let"):o+"lety"}}var n="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),r="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");return t.lang("cs",{months:n,monthsShort:r,monthsParse:function(t,e){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+t[i]+"$|^"+e[i]+"$","i");return n}(n,r),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("cv",{months:"кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),monthsShort:"кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кç_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",LLL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",LLLL:"dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ĕнер] LT [сехетре]",nextWeek:"[Çитес] dddd LT [сехетре]",lastWeek:"[Иртнĕ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(t){var e=/сехет$/i.exec(t)?"рен":/çул$/i.exec(t)?"тан":"ран";return t+e},past:"%s каялла",s:"пĕр-ик çеккунт",m:"пĕр минут",mm:"%d минут",h:"пĕр сехет",hh:"%d сехет",d:"пĕр кун",dd:"%d кун",M:"пĕр уйăх",MM:"%d уйăх",y:"пĕр çул",yy:"%d çул"},ordinal:"%d-мĕш",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn àl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(t){var e=t,i="",n=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return e>20?i=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(i=n[e]),t+i},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i){var n={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?n[i][0]:n[i][1]}return t.lang("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(t,e){return/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(t,e,i){return t>11?i?"μμ":"ΜΜ":i?"πμ":"ΠΜ"},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:"[την προηγούμενη] dddd [{}] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendarEl[t],n=e&&e.hours();return i.replace("{}",n%12===1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinal:function(t){return t+"η"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}})}),function(t){t(le)}(function(t){return t.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(t,e,i){return t>11?i?"p.t.m.":"P.T.M.":i?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),i="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return t.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,n){return/-MMM-/.test(n)?i[t.month()]:e[t.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i,n){var r={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[t+" minuti",t+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[t+" tunni",t+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[t+" kuu",t+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[i][2]?r[i][2]:r[i][1]:n?r[i][0]:r[i][1]}return t.lang("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d päeva",M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},i={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};return t.lang("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(t){return 12>t?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(t){return t.replace(/[۰-۹]/g,function(t){return i[t]}).replace(/،/g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"،")},ordinal:"%dم",week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){function e(t,e,n,r){var o="";switch(n){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"m":return r?"minuutin":"minuutti";case"mm":o=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":o=r?"tunnin":"tuntia";break;case"d":return r?"päivän":"päivä";case"dd":o=r?"päivän":"päivää";break;case"M":return r?"kuukauden":"kuukausi";case"MM":o=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":o=r?"vuoden":"vuotta"}return o=i(t,r)+" "+o}function i(t,e){return 10>t?e?r[t]:n[t]:t}var n="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),r=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",n[7],n[8],n[9]];return t.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinal:"%d.",week:{dow:1,doy:4}})
}),function(t){t(le)}(function(t){return t.lang("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")}})}),function(t){t(le)}(function(t){return t.lang("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return"uns segundos"===t?"nuns segundos":"en "+t},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY LT",LLLL:"dddd, D [ב]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(t){return 2===t?"שעתיים":t+" שעות"},d:"יום",dd:function(t){return 2===t?"יומיים":t+" ימים"},M:"חודש",MM:function(t){return 2===t?"חודשיים":t+" חודשים"},y:"שנה",yy:function(t){return 2===t?"שנתיים":t+" שנים"}}})}),function(t){t(le)}(function(t){var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return i[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 4>t?"रात":10>t?"सुबह":17>t?"दोपहर":20>t?"शाम":"रात"},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){function e(t,e,i){var n=t+" ";switch(i){case"m":return e?"jedna minuta":"jedne minute";case"mm":return n+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return n+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return n+=1===t?"dan":"dana";case"MM":return n+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return n+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("hr",{months:"sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e,i,n){var r=t;switch(i){case"s":return n||e?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(n||e?" perc":" perce");case"mm":return r+(n||e?" perc":" perce");case"h":return"egy"+(n||e?" óra":" órája");case"hh":return r+(n||e?" óra":" órája");case"d":return"egy"+(n||e?" nap":" napja");case"dd":return r+(n||e?" nap":" napja");case"M":return"egy"+(n||e?" hónap":" hónapja");case"MM":return r+(n||e?" hónap":" hónapja");case"y":return"egy"+(n||e?" év":" éve");case"yy":return r+(n||e?" év":" éve")}return""}function i(t){return(t?"":"[múlt] ")+"["+n[this.day()]+"] LT[-kor]"}var n="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");return t.lang("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(t,e,i){return 12>t?i===!0?"de":"DE":i===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return i.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return i.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e){var i={nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return i[n][t.month()]}function i(t){var e="հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_");return e[t.month()]}function n(t){var e="կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_");return e[t.day()]}return t.lang("hy-am",{months:e,monthsShort:i,weekdays:n,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., LT",LLLL:"dddd, D MMMM YYYY թ., LT"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiem:function(t){return 4>t?"գիշերվա":12>t?"առավոտվա":17>t?"ցերեկվա":"երեկոյան"},ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-ին":t+"-րդ";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"siang":19>t?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t){return t%100===11?!0:t%10===1?!1:!0}function i(t,i,n,r){var o=t+" ";switch(n){case"s":return i||r?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return i?"mínúta":"mínútu";case"mm":return e(t)?o+(i||r?"mínútur":"mínútum"):i?o+"mínúta":o+"mínútu";case"hh":return e(t)?o+(i||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return i?"dagur":r?"dag":"degi";case"dd":return e(t)?i?o+"dagar":o+(r?"daga":"dögum"):i?o+"dagur":o+(r?"dag":"degi");case"M":return i?"mánuður":r?"mánuð":"mánuði";case"MM":return e(t)?i?o+"mánuðir":o+(r?"mánuði":"mánuðum"):i?o+"mánuður":o+(r?"mánuð":"mánuði");case"y":return i||r?"ár":"ári";case"yy":return e(t)?o+(i||r?"ár":"árum"):o+(i||r?"ár":"ári")}}return t.lang("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:i,m:i,mm:i,h:"klukkustund",hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("it",{months:"Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),monthsShort:"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiem:function(t){return 12>t?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}),function(t){t(le)}(function(t){function e(t,e){var i={nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")},n=/D[oD] *MMMM?/.test(e)?"accusative":"nominative";return i[n][t.month()]}function i(t,e){var i={nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")},n=/(წინა|შემდეგ)/.test(e)?"accusative":"nominative";return i[n][t.day()]}return t.lang("ka",{months:e,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:i,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(t){return/(წამი|წუთი|საათი|წელი)/.test(t)?t.replace(/ი$/,"ში"):t+"ში"},past:function(t){return/(წამი|წუთი|საათი|დღე|თვე)/.test(t)?t.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(t)?t.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinal:function(t){return 0===t?t:1===t?t+"-ლი":20>t||100>=t&&t%20===0||t%100===0?"მე-"+t:t+"-ე"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 mm분",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},meridiem:function(t){return 12>t?"오전":"오후"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinal:"%d일",meridiemParse:/(오전|오후)/,isPM:function(t){return"오후"===t}})}),function(t){t(le)}(function(t){function e(t,e,i){var n={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[t+" Deeg",t+" Deeg"],M:["ee Mount","engem Mount"],MM:[t+" Méint",t+" Méint"],y:["ee Joer","engem Joer"],yy:[t+" Joer",t+" Joer"]};return e?n[i][0]:n[i][1]}function i(t){var e=t.substr(0,t.indexOf(" "));return s(e)?"a "+t:"an "+t}function n(t){var e=t.substr(0,t.indexOf(" "));return s(e)?"viru "+t:"virun "+t}function r(){var t=this.format("d");return o(t)?"[Leschte] dddd [um] LT":"[Leschten] dddd [um] LT"}function o(t){switch(t=parseInt(t,10)){case 0:case 1:case 3:case 5:case 6:return!0;default:return!1}}function s(t){if(t=parseInt(t,10),isNaN(t))return!1;if(0>t)return!0;if(10>t)return t>=4&&7>=t?!0:!1;if(100>t){var e=t%10,i=t/10;return s(0===e?i:e)}if(1e4>t){for(;t>=10;)t/=10;return s(t)}return t/=1e3,s(t)}return t.lang("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:r},relativeTime:{future:i,past:n,s:"e puer Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i,n){return e?"kelios sekundės":n?"kelių sekundžių":"kelias sekundes"}function i(t,e,i,n){return e?r(i)[0]:n?r(i)[1]:r(i)[2]}function n(t){return t%10===0||t>10&&20>t}function r(t){return a[t].split("_")}function o(t,e,o,s){var a=t+" ";return 1===t?a+i(t,e,o[0],s):e?a+(n(t)?r(o)[1]:r(o)[0]):s?a+r(o)[1]:a+(n(t)?r(o)[1]:r(o)[2])}function s(t,e){var i=-1===e.indexOf("dddd HH:mm"),n=l[t.weekday()];return i?n:n.substring(0,n.length-2)+"į"}var a={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},l="pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis_sekmadienis".split("_");return t.lang("lt",{months:"sausio_vasario_kovo_balandžio_gegužės_biržėlio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:s,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:e,m:i,mm:o,h:i,hh:o,d:i,dd:o,M:i,MM:o,y:i,yy:o},ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i){var n=t.split("_");return i?e%10===1&&11!==e?n[2]:n[3]:e%10===1&&11!==e?n[0]:n[1]}function i(t,i,r){return t+" "+e(n[r],t,i)}var n={mm:"minūti_minūtes_minūte_minūtes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mēnesi_mēnešus_mēnesis_mēneši",yy:"gadu_gadus_gads_gadi"};return t.lang("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vēlāk",past:"%s agrāk",s:"dažas sekundes",m:"minūti",mm:i,h:"stundu",hh:i,d:"dienu",dd:i,M:"mēnesi",MM:i,y:"gadu",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinal:function(t){var e=t%10,i=t%100;return 0===t?t+"-ев":0===i?t+"-ен":i>10&&20>i?t+"-ти":1===e?t+"-ви":2===e?t+"-ри":7===e||8===e?t+"-ми":t+"-ти"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiem:function(t){return 4>t?"രാത്രി":12>t?"രാവിലെ":17>t?"ഉച്ച കഴിഞ്ഞ്":20>t?"വൈകുന്നേരം":"രാത്രി"}})}),function(t){t(le)}(function(t){var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return i[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 4>t?"रात्री":10>t?"सकाळी":17>t?"दुपारी":20>t?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){return t.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"tengahari":19>t?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"sø._ma._ti._on._to._fr._lø.".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},i={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};return t.lang("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(t){return t.replace(/[१२३४५६७८९०]/g,function(t){return i[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 3>t?"राती":10>t?"बिहान":15>t?"दिउँसो":18>t?"बेलुका":20>t?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),i="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return t.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,n){return/-MMM-/.test(n)?i[t.month()]:e[t.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t){return 5>t%10&&t%10>1&&~~(t/10)%10!==1}function i(t,i,n){var r=t+" ";switch(n){case"m":return i?"minuta":"minutę";case"mm":return r+(e(t)?"minuty":"minut");case"h":return i?"godzina":"godzinę";case"hh":return r+(e(t)?"godziny":"godzin");case"MM":return r+(e(t)?"miesiące":"miesięcy");case"yy":return r+(e(t)?"lata":"lat")}}var n="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),r="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");return t.lang("pl",{months:function(t,e){return/D MMMM/.test(e)?r[t.month()]:n[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";
case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:i,mm:i,h:i,hh:i,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:i,y:"rok",yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [às] LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº"})}),function(t){t(le)}(function(t){return t.lang("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%dº",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i){var n={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},r=" ";return(t%100>=20||t>=100&&t%100===0)&&(r=" de "),t+r+n[i]}return t.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:e,h:"o oră",hh:e,d:"o zi",dd:e,M:"o lună",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e){var i=t.split("_");return e%10===1&&e%100!==11?i[0]:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?i[1]:i[2]}function i(t,i,n){var r={mm:i?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===n?i?"минута":"минуту":t+" "+e(r[n],+t)}function n(t,e){var i={nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return i[n][t.month()]}function r(t,e){var i={nominative:"янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")},n=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return i[n][t.month()]}function o(t,e){var i={nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")},n=/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(e)?"accusative":"nominative";return i[n][t.day()]}return t.lang("ru",{months:n,monthsShort:r,weekdays:o,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(){switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:i,mm:i,h:"час",hh:i,d:"день",dd:i,M:"месяц",MM:i,y:"год",yy:i},meridiem:function(t){return 4>t?"ночи":12>t?"утра":17>t?"дня":"вечера"},ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-й";case"D":return t+"-го";case"w":case"W":return t+"-я";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t){return t>1&&5>t}function i(t,i,n,r){var o=t+" ";switch(n){case"s":return i||r?"pár sekúnd":"pár sekundami";case"m":return i?"minúta":r?"minútu":"minútou";case"mm":return i||r?o+(e(t)?"minúty":"minút"):o+"minútami";case"h":return i?"hodina":r?"hodinu":"hodinou";case"hh":return i||r?o+(e(t)?"hodiny":"hodín"):o+"hodinami";case"d":return i||r?"deň":"dňom";case"dd":return i||r?o+(e(t)?"dni":"dní"):o+"dňami";case"M":return i||r?"mesiac":"mesiacom";case"MM":return i||r?o+(e(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return i||r?"rok":"rokom";case"yy":return i||r?o+(e(t)?"roky":"rokov"):o+"rokmi"}}var n="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),r="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");return t.lang("sk",{months:n,monthsShort:r,monthsParse:function(t,e){var i,n=[];for(i=0;12>i;i++)n[i]=new RegExp("^"+t[i]+"$|^"+e[i]+"$","i");return n}(n,r),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:i,m:i,mm:i,h:i,hh:i,d:i,dd:i,M:i,MM:i,y:i,yy:i},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,i){var n=t+" ";switch(i){case"m":return e?"ena minuta":"eno minuto";case"mm":return n+=1===t?"minuta":2===t?"minuti":3===t||4===t?"minute":"minut";case"h":return e?"ena ura":"eno uro";case"hh":return n+=1===t?"ura":2===t?"uri":3===t||4===t?"ure":"ur";case"dd":return n+=1===t?"dan":"dni";case"MM":return n+=1===t?"mesec":2===t?"meseca":3===t||4===t?"mesece":"mesecev";case"yy":return n+=1===t?"leto":2===t?"leti":3===t||4===t?"leta":"let"}}return t.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejšnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"%s nazaj",s:"nekaj sekund",m:e,mm:e,h:e,hh:e,d:"en dan",dd:e,M:"en mesec",MM:e,y:"eno leto",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiem:function(t){return 12>t?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&4>=t?e[1]:e[2]},translate:function(t,i,n){var r=e.words[n];return 1===n.length?i?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.lang("sr-cyr",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){var t=["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"дан",dd:e.translate,M:"месец",MM:e.translate,y:"годину",yy:e.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&4>=t?e[1]:e[2]},translate:function(t,i,n){var r=e.words[n];return 1===n.length?i?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){var t=["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinal:function(t){var e=t%10,i=1===~~(t%100/10)?"e":1===e?"a":2===e?"a":3===e?"e":"e";return t+i},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinal:function(t){return t+"வது"},meridiem:function(t){return t>=6&&10>=t?" காலை":t>=10&&14>=t?" நண்பகல்":t>=14&&18>=t?" எற்பாடு":t>=18&&20>=t?" மாலை":t>=20&&24>=t?" இரவு":t>=0&&6>=t?" வைகறை":void 0},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){return t.lang("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiem:function(t){return 12>t?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}),function(t){t(le)}(function(t){return t.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};return t.lang("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinal:function(t){if(0===t)return t+"'ıncı";var i=t%10,n=t%100-i,r=t>=100?100:null;return t+(e[i]||e[n]||e[r])},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("tzm-la",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){function e(t,e){var i=t.split("_");return e%10===1&&e%100!==11?i[0]:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?i[1]:i[2]}function i(t,i,n){var r={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===n?i?"хвилина":"хвилину":"h"===n?i?"година":"годину":t+" "+e(r[n],+t)}function n(t,e){var i={nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")},n=/D[oD]? *MMMM?/.test(e)?"accusative":"nominative";return i[n][t.month()]}function r(t,e){var i={nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")},n=/(\[[ВвУу]\]) ?dddd/.test(e)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(e)?"genitive":"nominative";return i[n][t.day()]}function o(t){return function(){return t+"о"+(11===this.hours()?"б":"")+"] LT"}}return t.lang("uk",{months:n,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:r,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., LT",LLLL:"dddd, D MMMM YYYY р., LT"},calendar:{sameDay:o("[Сьогодні "),nextDay:o("[Завтра "),lastDay:o("[Вчора "),nextWeek:o("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[Минулої] dddd [").call(this);case 1:case 2:case 4:return o("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:i,mm:i,h:"годину",hh:i,d:"день",dd:i,M:"місяць",MM:i,y:"рік",yy:i},meridiem:function(t){return 4>t?"ночі":12>t?"ранку":17>t?"дня":"вечора"},ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-й";case"D":return t+"-го";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(t,e){var i=100*t+e;return 600>i?"凌晨":900>i?"早上":1130>i?"上午":1230>i?"中午":1800>i?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var e,i;return e=t().startOf("week"),i=this.unix()-e.unix()>=604800?"[下]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},lastWeek:function(){var e,i;return e=t().startOf("week"),i=this.unix()<e.unix()?"[上]":"[本]",0===this.minutes()?i+"dddAh点整":i+"dddAh点mm"},sameElse:"LL"},ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"周";default:return t}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiem:function(t,e){var i=100*t+e;return 900>i?"早上":1130>i?"上午":1230>i?"中午":1800>i?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"日";case"M":return t+"月";case"w":case"W":return t+"週";default:return t}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}),le.lang("en"),Te?module.exports=le:"function"==typeof define&&define.amd?(define("moment",function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(de.moment=ue),le}),ae(!0)):ae()}).call(this)}).call(this),function(){"undefined"!=typeof Package&&(t=this.moment)}.call(this),"undefined"==typeof Package&&(Package={}),Package["moment-with-langs"]={moment:t}}(),function(){var t,e,i,n,r=Package.meteor.Meteor,o=Package.deps.Deps,s=Package.session.Session,a=Package.underscore._,l=Package.templating.Template,u=Package.spacebars.Spacebars,h=(Package.showdown.Showdown,Package.ui.UI),c=(Package.ui.Handlebars,Package["simple-schema"].SimpleSchema),d=(Package["simple-schema"].MongoObject,Package.htmljs.HTML),p=Package.blaze.Blaze;(function(){i="object"==typeof i?i:{};var t,n;n=[{nombre:"Allqa compis",numero:1,nombreAlternativo:"",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Azul ñawi ph'asña",numero:2,nombreAlternativo:"Azul ñawi ph'asña",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Qhachum Waqachiq",numero:3,nombreAlternativo:"Qhachum Waqachiq",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Compis",numero:4,nombreAlternativo:"Compis",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Huaman uma",numero:5,nombreAlternativo:"Huaman uma",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Linlin",numero:6,nombreAlternativo:"Linlin",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Muru linlin",numero:7,nombreAlternativo:"Muru linlin",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Muru Huarillo",numero:8,nombreAlternativo:"Muru Huarillo",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Muru Phuquya",numero:9,nombreAlternativo:"Muru Phuquya",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Paqus",numero:10,nombreAlternativo:"Paqus",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Palta suso",numero:11,nombreAlternativo:"Palta suso",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Peruanita",numero:12,nombreAlternativo:"Peruanita",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka ñawi suyto",numero:13,nombreAlternativo:"Puka ñawi suyto",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka qulluna",numero:14,nombreAlternativo:"Puka qulluna",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka Suwa llulla",numero:15,nombreAlternativo:"Puka Suwa llulla",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puma maki",numero:16,nombreAlternativo:"Puma maki",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Risco",numero:17,nombreAlternativo:"Risco",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Runtus",numero:18,nombreAlternativo:"Runtus",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Salamanca",numero:19,nombreAlternativo:"Salamanca",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Simpa waña",numero:20,nombreAlternativo:"Simpa waña",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Sunchu papa",numero:21,nombreAlternativo:"Sunchu papa",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Suso",numero:22,nombreAlternativo:"Suso",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana Wakchilla",numero:23,nombreAlternativo:"Yana Wakchilla",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana linlin",numero:24,nombreAlternativo:"Yana linlin",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana ñawi ph'asña",numero:25,nombreAlternativo:"Yana ñawi ph'asña",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana putis",numero:26,nombreAlternativo:"Yana putis",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana Suwa llulla",numero:27,nombreAlternativo:"Yana Suwa llulla",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana suso",numero:28,nombreAlternativo:"Yana suso",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq sunchu",numero:29,nombreAlternativo:"Yuraq sunchu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq waña",numero:30,nombreAlternativo:"Yuraq waña",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq wachalla",numero:31,nombreAlternativo:"Yuraq wachalla",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq suyto",numero:32,nombreAlternativo:"Yuraq suyto",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Allqa palta",numero:33,nombreAlternativo:"Allqa palta",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Allqay walash",numero:34,nombreAlternativo:"Allqay walash",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Aqu suyto",numero:35,nombreAlternativo:"Aqu suyto",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Botijuela",numero:36,nombreAlternativo:"Botijuela",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Camotillo",numero:37,nombreAlternativo:"Camotillo",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Caramelo suyto",numero:38,nombreAlternativo:"Caramelo suyto",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Qullqi tupu",numero:39,nombreAlternativo:"Qullqi tupu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Chiqchi ph'asña",numero:40,nombreAlternativo:"Chiqchi ph'asña",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Cordovina",numero:41,nombreAlternativo:"Cordovina",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Kuchipan akan",numero:42,nombreAlternativo:"Kuchipan akan",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Dosis",numero:43,nombreAlternativo:"Dosis",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Frescos",numero:44,nombreAlternativo:"Frescos",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Gaspar",numero:45,nombreAlternativo:"Gaspar",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Wamantanga",numero:46,nombreAlternativo:"Wamantanga",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Llunchuy waqachiq",numero:47,nombreAlternativo:"Llunchuy waqachiq",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Marquina",numero:48,nombreAlternativo:"Marquina",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Muro gaspar",numero:49,nombreAlternativo:"Muro gaspar",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Muru wayro",numero:50,nombreAlternativo:"Muru wayro",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Payapa ancon",numero:51,nombreAlternativo:"Payapa ancon",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Peruanita",numero:52,nombreAlternativo:"Peruanita",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka wayro",numero:53,nombreAlternativo:"Puka wayro",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puqya",numero:54,nombreAlternativo:"Puqya",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Qalapa waran",numero:55,nombreAlternativo:"Qalapa waran",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Quichka matanca",numero:56,nombreAlternativo:"Quichka matanca",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Runtus",numero:57,nombreAlternativo:"Runtus",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Sangre de toro",numero:58,nombreAlternativo:"Sangre de toro",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Traccin waqachiq",numero:59,nombreAlternativo:"Traccin waqachiq",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Wakapan qallun",numero:60,nombreAlternativo:"Wakapan qallun",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Wiqqis",numero:61,nombreAlternativo:"Wiqqis",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana chiqchi ph'asña",numero:62,audio:{ini:0,dur:2067}},{nombre:"Yana manua",numero:63,nombreAlternativo:"Yana manua",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana marquina",numero:64,nombreAlternativo:"Yana marquina",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana winqu",numero:65,nombreAlternativo:"Yana winqu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq",numero:66,nombreAlternativo:"Yuraq",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Alka charka",numero:67,nombreAlternativo:"Alka charka",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Ampairas",numero:68,nombreAlternativo:"Ampairas",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Kuchi aka",numero:69,nombreAlternativo:"Kuchi aka",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Llama sinqa",numero:70,nombreAlternativo:"Llama sinqa",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Maqa sunqu",numero:71,nombreAlternativo:"Maqa sunqu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Chimaku",numero:72,nombreAlternativo:"Chimaku",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Emilia",numero:73,nombreAlternativo:"Emilia",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka wayro",numero:74,nombreAlternativo:"Puka wayro",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka inkachu",numero:75,nombreAlternativo:"Puka inkachu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Khachun Waqachiq",numero:76,nombreAlternativo:"Khachun Waqachiq",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Sule",numero:77,nombreAlternativo:"Sule",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Wilkas",numero:78,nombreAlternativo:"Wilkas",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana charka",numero:79,nombreAlternativo:"Yana charka",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana chilkas",numero:80,nombreAlternativo:"Yana chilkas",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana k'usi",numero:81,nombreAlternativo:"Yana k'usi",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq inkachu",numero:82,nombreAlternativo:"Yuraq inkachu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Kuntur runtu",numero:83,nombreAlternativo:"Kuntur runtu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Uqi suytu",numero:84,nombreAlternativo:"Uqi suytu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Pariwana",numero:85,nombreAlternativo:"Pariwana",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka churuspi",numero:86,nombreAlternativo:"Puka churuspi",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Puka k'usi",numero:87,nombreAlternativo:"Puka k'usi",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yana ch'uruspi",numero:88,nombreAlternativo:"Yana ch'uruspi",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Yuraq suytu",numero:89,nombreAlternativo:"Yuraq suytu",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}},{nombre:"Wallpa supi",numero:90,nombreAlternativo:"Wallpa supi",significadoNombre:"",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",audio:{ini:0,dur:2067}}],t=t||{},t.Papa=new c({nombre:{type:String,label:"Nombre",max:140},numero:{type:Number,label:"Número",unique:!0,min:1,max:90},audio:{type:new c({ini:{type:Number,label:"Audio marker ini"},dur:{type:Number,label:"Audio duration"}})},slug:{type:String,label:"Slug",max:140},imageFileNameScreen:{type:String,label:"Image file name (screen)",max:140},imageFileNamePrint:{type:String,label:"Image file name (print)",max:140}}),e=new r.Collection("papas",{connection:null}),e.attachSchema(t.Papa),r.startup(function(){var t,i,r,o,s;
for(s=[],r=0,o=n.length;o>r;r++)i=n[r],t=("00"+i.numero).slice(-3),i.slug=""+t+"-"+a.slugify(i.nombre),i.imageFileNameScreen=""+t+".png",i.imageFileNamePrint=""+t+"-print.png",s.push(e.insert(i));return s})}).call(this),function(){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,n){var r,o,s,a=e.nodeName.toLowerCase();return"area"===a?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(s=t("img[usemap=#"+o+"]")[0],!!s&&i(s)):!1):(/input|select|textarea|button|object/.test(a)?!e.disabled:"a"===a?e.href||n:n)&&i(e)}function i(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(){var e=this.css("position"),i="absolute"===e,n=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&n.length?n:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,n){return!!t.data(e,n[3])},focusable:function(i){return e(i,!isNaN(t.attr(i,"tabindex")))},tabbable:function(i){var n=t.attr(i,"tabindex"),r=isNaN(n);return(r||n>=0)&&e(i,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,i){function n(e,i,n,o){return t.each(r,function(){i-=parseFloat(t.css(e,"padding"+this))||0,n&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var r="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),s={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+i]=function(e){return void 0===e?s["inner"+i].call(this):this.each(function(){t(this).css(o,n(this,e)+"px")})},t.fn["outer"+i]=function(e,r){return"number"!=typeof e?s["outer"+i].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(i,n){return"number"==typeof i?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),n&&n.call(e)},i)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var i,n,r=t(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(n=parseInt(r.css("zIndex"),10),!isNaN(n)&&0!==n))return n;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,i,n){var r,o=t.ui[e].prototype;for(r in n)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([i,n[r]])},call:function(t,e,i,n){var r,o=t.plugins[e];if(o&&(n||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,i)}};var n=0,r=Array.prototype.slice;t.cleanData=function(e){return function(i){for(var n,r=0;null!=(n=i[r]);r++)try{t(n).triggerHandler("remove")}catch(o){}e(i)}}(t.cleanData),t.widget=function(e,i,n){var r,o,s,a,l={},u=e.split(".")[0];return e=e.split(".")[1],r=u+"-"+e,n||(n=i,i=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},o=t[u][e],s=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new s(t,e)},t.extend(s,o,{version:n.version,_proto:t.extend({},n),_childConstructors:[]}),a=new i,a.options=t.widget.extend({},a.options),t.each(n,function(e,n){return t.isFunction(n)?void(l[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},r=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=n.apply(this,arguments),this._super=i,this._superApply=o,e}}()):void(l[e]=n)}),s.prototype=t.widget.extend(a,{widgetEventPrefix:o?a.widgetEventPrefix||e:e},l,{constructor:s,namespace:u,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,i){var n=i.prototype;t.widget(n.namespace+"."+n.widgetName,s,i._proto)}),delete o._childConstructors):i._childConstructors.push(s),t.widget.bridge(e,s),s},t.widget.extend=function(e){for(var i,n,o=r.call(arguments,1),s=0,a=o.length;a>s;s++)for(i in o[s])n=o[s][i],o[s].hasOwnProperty(i)&&void 0!==n&&(e[i]=t.isPlainObject(n)?t.isPlainObject(e[i])?t.widget.extend({},e[i],n):t.widget.extend({},n):n);return e},t.widget.bridge=function(e,i){var n=i.prototype.widgetFullName||e;t.fn[e]=function(o){var s="string"==typeof o,a=r.call(arguments,1),l=this;return o=!s&&a.length?t.widget.extend.apply(null,[o].concat(a)):o,this.each(s?function(){var i,r=t.data(this,n);return"instance"===o?(l=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(i=r[o].apply(r,a),i!==r&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,n);e?(e.option(o||{}),e._init&&e._init()):t.data(this,n,new i(o,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,i){i=t(i||this.defaultElement||this)[0],this.element=t(i),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),i!==this&&(t.data(i,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===i&&this.destroy()}}),this.document=t(i.style?i.ownerDocument:i.document||i),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,i){var n,r,o,s=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(s={},n=e.split("."),e=n.shift(),n.length){for(r=s[e]=t.widget.extend({},this.options[e]),o=0;n.length-1>o;o++)r[n[o]]=r[n[o]]||{},r=r[n[o]];if(e=n.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=i}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];s[e]=i}return this._setOptions(s),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,i,n){var r,o=this;"boolean"!=typeof e&&(n=i,i=e,e=!1),n?(i=r=t(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,r=this.widget()),t.each(n,function(n,s){function a(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof s?o[s]:s).apply(o,arguments):void 0}"string"!=typeof s&&(a.guid=s.guid=s.guid||a.guid||t.guid++);var l=n.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?r.delegate(h,u,a):i.bind(u,a)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?n[t]:t).apply(n,arguments)}var n=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,n){var r,o,s=this.options[e];if(n=n||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(r in o)r in i||(i[r]=o[r]);return this.element.trigger(i,n),!(t.isFunction(s)&&s.apply(this.element[0],[i].concat(n))===!1||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(n,r,o){"string"==typeof r&&(r={effect:r});var s,a=r?r===!0||"number"==typeof r?i:r.effect||i:e;r=r||{},"number"==typeof r&&(r={duration:r}),s=!t.isEmptyObject(r),r.complete=o,r.delay&&n.delay(r.delay),s&&t.effects&&t.effects.effect[a]?n[e](r):a!==e&&n[a]?n[a](r.duration,r.easing,o):n.queue(function(i){t(this)[e](),o&&o.call(n[0]),i()})}}),t.widget;var o=!1;t(document).mouseup(function(){o=!1}),t.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){return!0===t.data(i.target,e.widgetName+".preventClickEvent")?(t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var i=this,n=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return n&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){i.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return i._mouseMove(t)},this._mouseUpDelegate=function(t){return i._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):e.which?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function e(t,e,i){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?i/100:1)]}function i(e,i){return parseInt(t.css(e,i),10)||0}function n(e){var i=e[0];return 9===i.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(i)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:i.preventDefault?{width:0,height:0,offset:{top:i.pageY,left:i.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,o,s=Math.max,a=Math.abs,l=Math.round,u=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==r)return r;var e,i,n=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=n.children()[0];return t("body").append(n),e=o.offsetWidth,n.css("overflow","scroll"),i=o.offsetWidth,e===i&&(i=n[0].clientWidth),n.remove(),r=e-i},getScrollInfo:function(e){var i=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),n=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,o="scroll"===n||"auto"===n&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),n=t.isWindow(i[0]),r=!!i[0]&&9===i[0].nodeType;return{element:i,isWindow:n,isDocument:r,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},t.fn.position=function(r){if(!r||!r.of)return f.apply(this,arguments);r=t.extend({},r);var p,m,g,_,y,v,b=t(r.of),w=t.position.getWithinInfo(r.within),x=t.position.getScrollInfo(w),T=(r.collision||"flip").split(" "),M={};return v=n(b),b[0].preventDefault&&(r.at="left top"),m=v.width,g=v.height,_=v.offset,y=t.extend({},_),t.each(["my","at"],function(){var t,e,i=(r[this]||"").split(" ");1===i.length&&(i=u.test(i[0])?i.concat(["center"]):h.test(i[0])?["center"].concat(i):["center","center"]),i[0]=u.test(i[0])?i[0]:"center",i[1]=h.test(i[1])?i[1]:"center",t=c.exec(i[0]),e=c.exec(i[1]),M[this]=[t?t[0]:0,e?e[0]:0],r[this]=[d.exec(i[0])[0],d.exec(i[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===r.at[0]?y.left+=m:"center"===r.at[0]&&(y.left+=m/2),"bottom"===r.at[1]?y.top+=g:"center"===r.at[1]&&(y.top+=g/2),p=e(M.at,m,g),y.left+=p[0],y.top+=p[1],this.each(function(){var n,u,h=t(this),c=h.outerWidth(),d=h.outerHeight(),f=i(this,"marginLeft"),v=i(this,"marginTop"),k=c+f+i(this,"marginRight")+x.width,S=d+v+i(this,"marginBottom")+x.height,L=t.extend({},y),C=e(M.my,h.outerWidth(),h.outerHeight());"right"===r.my[0]?L.left-=c:"center"===r.my[0]&&(L.left-=c/2),"bottom"===r.my[1]?L.top-=d:"center"===r.my[1]&&(L.top-=d/2),L.left+=C[0],L.top+=C[1],o||(L.left=l(L.left),L.top=l(L.top)),n={marginLeft:f,marginTop:v},t.each(["left","top"],function(e,i){t.ui.position[T[e]]&&t.ui.position[T[e]][i](L,{targetWidth:m,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:n,collisionWidth:k,collisionHeight:S,offset:[p[0]+C[0],p[1]+C[1]],my:r.my,at:r.at,within:w,elem:h})}),r.using&&(u=function(t){var e=_.left-L.left,i=e+m-c,n=_.top-L.top,o=n+g-d,l={target:{element:b,left:_.left,top:_.top,width:m,height:g},element:{element:h,left:L.left,top:L.top,width:c,height:d},horizontal:0>i?"left":e>0?"right":"center",vertical:0>o?"top":n>0?"bottom":"middle"};c>m&&m>a(e+i)&&(l.horizontal="center"),d>g&&g>a(n+o)&&(l.vertical="middle"),l.important=s(a(e),a(i))>s(a(n),a(o))?"horizontal":"vertical",r.using.call(this,t,l)}),h.offset(t.extend(L,{using:u}))})},t.ui.position={fit:{left:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollLeft:n.offset.left,o=n.width,a=t.left-e.collisionPosition.marginLeft,l=r-a,u=a+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=u?(i=t.left+l+e.collisionWidth-o-r,t.left+=l-i):t.left=u>0&&0>=l?r:l>u?r+o-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=s(t.left-a,t.left)},top:function(t,e){var i,n=e.within,r=n.isWindow?n.scrollTop:n.offset.top,o=e.within.height,a=t.top-e.collisionPosition.marginTop,l=r-a,u=a+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=u?(i=t.top+l+e.collisionHeight-o-r,t.top+=l-i):t.top=u>0&&0>=l?r:l>u?r+o-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=s(t.top-a,t.top)}},flip:{left:function(t,e){var i,n,r=e.within,o=r.offset.left+r.scrollLeft,s=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-s-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(i=t.left+d+p+f+e.collisionWidth-s-o,(0>i||a(h)>i)&&(t.left+=d+p+f)):c>0&&(n=t.left-e.collisionPosition.marginLeft+d+p+f-l,(n>0||c>a(n))&&(t.left+=d+p+f))},top:function(t,e){var i,n,r=e.within,o=r.offset.top+r.scrollTop,s=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-s-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>h?(n=t.top+p+f+m+e.collisionHeight-s-o,t.top+p+f+m>h&&(0>n||a(h)>n)&&(t.top+=p+f+m)):c>0&&(i=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>c&&(i>0||c>a(i))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,n,r,s,a=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&t.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in n)e.style[s]=n[s];e.appendChild(l),i=a||document.documentElement,i.insertBefore(e,i.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",r=t(l).offset().left,o=r>10&&11>r,e.innerHTML="",i.removeChild(e)}()}(),t.ui.position,t.widget("ui.draggable",t.ui.mouse,{version:"1.11.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var i=this.document[0],n=this.options;try{i.activeElement&&"body"!==i.activeElement.nodeName.toLowerCase()&&t(i.activeElement).blur()}catch(r){}return this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(this._trigger("drag",e,n)===!1)return this._mouseUp({}),!1;this.position=n.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=this,n=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(n=t.ui.ddmanager.drop(this,e)),this.dropped&&(n=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!n||"valid"===this.options.revert&&n||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){i._trigger("stop",e)!==!1&&i._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this._removeHandleClassName(),t(this.options.handle||this.element).addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.element.find(".ui-draggable-handle").addBack().removeClass("ui-draggable-handle")},_createHelper:function(e){var i=this.options,n=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"===i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"===i.appendTo?this.element[0].parentNode:i.appendTo),n[0]===this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),i=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==i&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,i,n,r=this.options,o=this.document[0];return this.relative_container=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),i=t(r.containment),n=i[0],void(n&&(e="hidden"!==i.css("overflow"),this.containment=[(parseInt(i.css("borderLeftWidth"),10)||0)+(parseInt(i.css("paddingLeft"),10)||0),(parseInt(i.css("borderTopWidth"),10)||0)+(parseInt(i.css("paddingTop"),10)||0),(e?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(i.css("borderRightWidth"),10)||0)-(parseInt(i.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(i.css("borderBottomWidth"),10)||0)-(parseInt(i.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var i="absolute"===t?1:-1,n=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.offset.scroll.top:n?0:this.offset.scroll.top)*i,left:e.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.offset.scroll.left:n?0:this.offset.scroll.left)*i}},_generatePosition:function(t,e){var i,n,r,o,s=this.options,a=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return a&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relative_container?(n=this.relative_container.offset(),i=[this.containment[0]+n.left,this.containment[1]+n.top,this.containment[2]+n.left,this.containment[3]+n.top]):i=this.containment,t.pageX-this.offset.click.left<i[0]&&(l=i[0]+this.offset.click.left),t.pageY-this.offset.click.top<i[1]&&(u=i[1]+this.offset.click.top),t.pageX-this.offset.click.left>i[2]&&(l=i[2]+this.offset.click.left),t.pageY-this.offset.click.top>i[3]&&(u=i[3]+this.offset.click.top)),s.grid&&(r=s.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/s.grid[1])*s.grid[1]:this.originalPageY,u=i?r-this.offset.click.top>=i[1]||r-this.offset.click.top>i[3]?r:r-this.offset.click.top>=i[1]?r-s.grid[1]:r+s.grid[1]:r,o=s.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/s.grid[0])*s.grid[0]:this.originalPageX,l=i?o-this.offset.click.left>=i[0]||o-this.offset.click.left>i[2]?o:o-this.offset.click.left>=i[0]?o-s.grid[0]:o+s.grid[0]:o),"y"===s.axis&&(l=this.originalPageX),"x"===s.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:a?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:a?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,i,n){return n=n||this._uiHash(),t.ui.plugin.call(this,e,[i,n,this],!0),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,n)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i,n){var r=n.options,o=t.extend({},i,{item:n.element});n.sortables=[],t(r.connectToSortable).each(function(){var i=t(this).sortable("instance");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,o))})},stop:function(e,i,n){var r=t.extend({},i,{item:n.element});t.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))})},drag:function(e,i,n){var r=this;t.each(n.sortables,function(){var o=!1,s=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!==s&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(s.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",e),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",e),n.dropped=!1)
})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,i,n){var r=t("body"),o=n.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,i,n){var r=n.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i,n){var r=t(i.helper),o=n.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,i,n){var r=n.options;r._opacity&&t(i.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,i){i.scrollParent[0]!==i.document[0]&&"HTML"!==i.scrollParent[0].tagName&&(i.overflowOffset=i.scrollParent.offset())},drag:function(e,i,n){var r=n.options,o=!1,s=n.document[0];n.scrollParent[0]!==s&&"HTML"!==n.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(n,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,i,n){var r=n.options;n.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),i=e.offset();this!==n.element[0]&&n.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:i.top,left:i.left})})},drag:function(e,i,n){var r,o,s,a,l,u,h,c,d,p,f=n.options,m=f.snapTolerance,g=i.offset.left,_=g+n.helperProportions.width,y=i.offset.top,v=y+n.helperProportions.height;for(d=n.snapElements.length-1;d>=0;d--)l=n.snapElements[d].left,u=l+n.snapElements[d].width,h=n.snapElements[d].top,c=h+n.snapElements[d].height,l-m>_||g>u+m||h-m>v||y>c+m||!t.contains(n.snapElements[d].item.ownerDocument,n.snapElements[d].item)?(n.snapElements[d].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=m>=Math.abs(h-v),o=m>=Math.abs(c-y),s=m>=Math.abs(l-_),a=m>=Math.abs(u-g),r&&(i.position.top=n._convertPositionTo("relative",{top:h-n.helperProportions.height,left:0}).top-n.margins.top),o&&(i.position.top=n._convertPositionTo("relative",{top:c,left:0}).top-n.margins.top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l-n.helperProportions.width}).left-n.margins.left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left)),p=r||o||s||a,"outer"!==f.snapMode&&(r=m>=Math.abs(h-y),o=m>=Math.abs(c-v),s=m>=Math.abs(l-g),a=m>=Math.abs(u-_),r&&(i.position.top=n._convertPositionTo("relative",{top:h,left:0}).top-n.margins.top),o&&(i.position.top=n._convertPositionTo("relative",{top:c-n.helperProportions.height,left:0}).top-n.margins.top),s&&(i.position.left=n._convertPositionTo("relative",{top:0,left:l}).left-n.margins.left),a&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left)),!n.snapElements[d].snapping&&(r||o||s||a||p)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,e,t.extend(n._uiHash(),{snapItem:n.snapElements[d].item})),n.snapElements[d].snapping=r||o||s||a||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,i,n){var r,o=n.options,s=t.makeArray(t(o.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});s.length&&(r=parseInt(t(s[0]).css("zIndex"),10)||0,t(s).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+s.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i,n){var r=t(i.helper),o=n.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,i,n){var r=n.options;r._zIndex&&t(i.helper).css("zIndex",r._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.11.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,i=this.options,n=i.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(n)?n:function(t){return t.is(n)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(i.scope),i.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){if("accept"===e)this.accept=t.isFunction(i)?i:function(t){return t.is(i)};else if("scope"===e){var n=t.ui.ddmanager.droppables[this.options.scope];this._splice(n),this._addToManager(i)}this._super(e,i)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!==this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var n=i||t.ui.ddmanager.current,r=!1;return n&&(n.currentItem||n.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t(this).droppable("instance");return e.options.greedy&&!e.options.disabled&&e.options.scope===n.options.scope&&e.accept.call(e.element[0],n.currentItem||n.element)&&t.ui.intersect(n,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],n.currentItem||n.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(n)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,i){return t>=e&&e+i>t}return function(e,i,n){if(!i.offset)return!1;var r,o,s=(e.positionAbs||e.position.absolute).left,a=(e.positionAbs||e.position.absolute).top,l=s+e.helperProportions.width,u=a+e.helperProportions.height,h=i.offset.left,c=i.offset.top,d=h+i.proportions().width,p=c+i.proportions().height;switch(n){case"fit":return s>=h&&d>=l&&a>=c&&p>=u;case"intersect":return s+e.helperProportions.width/2>h&&d>l-e.helperProportions.width/2&&a+e.helperProportions.height/2>c&&p>u-e.helperProportions.height/2;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,c,i.proportions().height)&&t(r,h,i.proportions().width);case"touch":return(a>=c&&p>=a||u>=c&&p>=u||c>a&&u>p)&&(s>=h&&d>=s||l>=h&&d>=l||h>s&&l>d);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var n,r,o=t.ui.ddmanager.droppables[e.options.scope]||[],s=i?i.type:null,a=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(n=0;o.length>n;n++)if(!(o[n].options.disabled||e&&!o[n].accept.call(o[n].element[0],e.currentItem||e.element))){for(r=0;a.length>r;r++)if(a[r]===o[n].element[0]){o[n].proportions().height=0;continue t}o[n].visible="none"!==o[n].element.css("display"),o[n].visible&&("mousedown"===s&&o[n]._activate.call(o[n],i),o[n].offset=o[n].element.offset(),o[n].proportions({width:o[n].element[0].offsetWidth,height:o[n].element[0].offsetHeight}))}},drop:function(e,i){var n=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(n=this._drop.call(this,i)||n),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,i)))}),n},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var n,r,o,s=t.ui.intersect(e,this,this.options.tolerance),a=!s&&this.isover?"isout":s&&!this.isover?"isover":null;a&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r}),o.length&&(n=t(o[0]).droppable("instance"),n.greedyChild="isover"===a)),n&&"isover"===a&&(n.isover=!1,n.isout=!0,n._out.call(n,i)),this[a]=!0,this["isout"===a?"isover":"isout"]=!1,this["isover"===a?"_over":"_out"].call(this,i),n&&"isout"===a&&(n.isout=!1,n.isover=!0,n._over.call(n,i)))}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}},t.ui.droppable})}.call(this),function(){t={sonidos:{manager:Howler},init:function(){t.sonidos.cortina=new Howl({urls:["assets/audio/cortina.mp3","assets/audio/cortina.ogg"],autoplay:!0,loop:!0});var i={};e.find().forEach(function(t){i[t.numero]=[t.audio.ini,t.audio.dur]}),t.sonidos.papas=new Howl({urls:["assets/audio/papas.mp3","assets/audio/papas.ogg"],sprite:i,volume:10}),t.sonidos.final=new Howl({urls:["assets/audio/final-etapa.mp3","assets/audio/final-etapa.ogg"],volume:7}),t.sonidos.correcto=new Howl({urls:["assets/audio/correcto.mp3","assets/audio/correcto.ogg"],volume:5}),t.sonidos.incorrecto=new Howl({urls:["assets/audio/incorrecto.mp3","assets/audio/incorrecto.ogg"],volume:3})},restart:function(){},resuelto:function(){s.set("expertoStep","fin"),t.sonidos.finalEtapa.play()}};var i;i={google:{families:["Source+Code+Pro::latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}.call(this),function(){l.__define__("experto",function(){var t=this;return[d.A({id:"actionToggleSound","class":"btn btn-primary","data-action":"toggle-sound"},"\n    ",d.SPAN({"class":function(){return["\n      ",p.If(function(){return u.dataMustache(u.dot(t.lookup("Session"),"get"),"expertoIsMuted")},function(){return"\n        glyphicon glyphicon-volume-off\n      "},function(){return"\n        glyphicon glyphicon-volume-up\n      "}),"\n      "]}}),"\n  "),"\n\n  ",u.include(t.lookupTemplate("step")),d.Raw('\n\n  <div class="hidden">\n    <div id="experto-container"></div>\n  </div>')]}),l.__define__("expertoIntro",function(){var t=this;return[d.DIV({"class":"col-lg-5 col-lg-offset-2"},"\n    ",u.include(t.lookupTemplate("markdown"),function(){return"\n# Título Experto\n\nTexto introducción\n\n    "}),"\n  "),d.Raw('\n\n  <div class="col-lg-3">\n    <a class="btn btn-primary" href="#" data-action="comenzar">Comenzar!</a>\n  </div>')]}),l.__define__("expertoJuego",function(){var t=this;return[d.DIV({"class":"row"},"\n    ",d.DIV({"class":"pull-left"},"\n      ",d.H2("Fallos: ",p.View(function(){return u.mustache(u.dot(t.lookup("Session"),"get"),"expertoFallos")})),"\n    "),"\n  "),"\n\n  ",d.DIV({"class":"row col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"},"\n    ",d.DIV({"class":"row"},"\n      ",p.Each(function(){return u.call(t.lookup("papas1"))},function(){return["\n        ",u.include(t.lookupTemplate("expertoJuegoOption")),"\n      "]}),"\n    "),"\n\n    ",d.DIV({"class":"row experto-incognitas"},"\n      ",p.Each(function(){return u.call(t.lookup("papasAAdivinar"))},function(){return["\n        ",u.include(t.lookupTemplate("expertoJuegoIncognita")),"\n      "]}),"\n    "),"\n\n    ",d.DIV({"class":"row"},"\n      ",p.Each(function(){return u.call(t.lookup("papas2"))},function(){return["\n        ",u.include(t.lookupTemplate("expertoJuegoOption")),"\n      "]}),"\n    "),"\n  ")]}),l.__define__("expertoJuegoOption",function(){var t=this;return d.DIV({"class":"col-xs-2 col-sm-2 col-md-2 col-lg-2"},"\n    ",d.DIV({"class":"experto-papa","data-papanumero":function(){return u.mustache(t.lookup("numero"))},style:function(){return['background-image: url("assets/images/papas/',u.mustache(t.lookup("imageFileNameScreen")),'")']}},"\n    "),"\n  ")}),l.__define__("expertoJuegoIncognita",function(){var t=this;return d.DIV({"class":"col-xs-2 col-sm-2 col-md-2 col-lg-2"},"\n    ",d.DIV({"class":"experto-incognita","data-papanumero":function(){return u.mustache(t.lookup("numero"))}},"\n      ",d.Raw('<div class="chakana">&nbsp;</div>'),"\n      ",d.DIV({"class":"papa-nombre"},p.View(function(){return u.mustache(t.lookup("nombre"))})),"\n    "),"\n  ")}),l.__define__("expertoPapaMuestra",function(){var t=this;return d.DIV({"class":"col-xs-6 col-md-2 col-lg-2 col-md-2 col-lg-2"},"\n    ",d.DIV({"class":"experto-papa","data-action":"presentarse","data-papanumero":function(){return u.mustache(t.lookup("numero"))},style:function(){return['background-image: url("assets/images/papas/',u.mustache(t.lookup("imageFileNameScreen")),'")']}},"\n      ",d.Raw('<div class="centro">&nbsp;</div>'),"\n    "),"\n  ")}),l.__define__("expertoIdentificarPapas",function(){var t=this;return[d.DIV({"class":"row text-center"},"\n    ",p.Each(function(){return u.call(t.lookup("papas1"))},function(){return["\n      ",u.include(t.lookupTemplate("expertoPapaMuestra")),"\n    "]}),"\n  "),"\n\n  ",d.DIV({"class":"row text-center"},"\n    ",p.Each(function(){return u.call(t.lookup("papas2"))},function(){return["\n      ",u.include(t.lookupTemplate("expertoPapaMuestra")),"\n    "]}),"\n  "),d.Raw('\n\n  <div class="row text-center">\n    <a class="btn btn-primary" href="#" data-action="papas-identificadas">Comenzar!</a>\n  </div>')]}),l.__define__("expertoFin",function(){var t=this;return[d.Raw('<div class="row no-print hidden-print">\n    <div class="col-lg-10 col-lg-offset-1">\n      <h1>Muy bien!</h1>\n    </div>\n  </div>\n\n  '),d.DIV({"class":"row"},"\n    ",d.H3(d.Raw("<strong>Fallos:</strong>")," ",p.View(function(){return u.mustache(u.dot(t.lookup("Session"),"get"),"expertoFallos")})),"\n    ",d.Raw("<!--h3><strong>Tiempo:</strong> {{timer rompecabezasTiempo}}</h3-->"),"\n  "),"\n\n  ",d.DIV({"class":"row hidden-print"},"\n    ",d.DIV({"class":"col-lg-4 col-md-4"},"\n      ",p.Each(function(){return u.call(t.lookup("papasAdivinadas"))},function(){return["\n        ",u.include(t.lookupTemplate("expertoPapaAdivinada")),"\n      "]}),"\n    "),"\n    ",d.DIV({"class":"col-lg-8 col-md-8"},"\n      ",d.DIV({"class":"row experto-papa-detalles"},"\n        ",p.Each(function(){return u.call(t.lookup("papasCamposExtra"))},function(){return["\n          ",p.Unless(function(){return u.call(u.dot(t.lookup("."),"printOnly"))},function(){return["\n            ",d.DIV({"class":"row"},"\n              ",d.DIV({"class":"col-lg-4 col-md-4 col-sm-5 col-xs-5"},"\n                ",d.H4(d.STRONG(p.View(function(){return u.mustache(u.dot(t.lookup("."),"label"))}),":")),"\n              "),"\n              ",d.DIV({"class":"col-lg-8 col-md-8 col-sm-7 col-xs-7"},"\n                ",p.If(function(){return u.call(u.dot(t.lookup("."),"mainField"))},function(){return["\n                  ",d.H3(p.View(function(){return u.mustache(t.lookup("papaConsultada"),u.dot(t.lookup("."),"field"))})),"\n                "]},function(){return["\n                  ",d.H4(p.View(function(){return u.mustache(t.lookup("papaConsultada"),u.dot(t.lookup("."),"field"))})),"\n                "]}),"\n              "),"\n            "),"\n          "]}),"\n        "]}),"\n      "),"\n    "),"\n  "),"\n\n  ",d.DIV({"class":"row visible-print-inline-block"},"\n    ",p.Each(function(){return u.call(t.lookup("papasAdivinadas"))},function(){return["\n      ",d.DIV({"class":"col-lg-12 col-md-12 col-sm-12 col-xs-12"},"\n        ",d.DIV({"class":"row experto-papa-detalles"},"\n          ",p.Each(function(){return u.call(t.lookup("papasCamposExtra"))},function(){return["\n            ",d.DIV({"class":"row"},"\n              ",d.DIV({"class":"col-lg-4 col-md-4 col-sm-5 col-xs-5"},"\n                ",d.H5(d.STRONG(p.View(function(){return u.mustache(u.dot(t.lookup("."),"label"))}),":")),"\n              "),"\n              ",d.DIV({"class":"col-lg-8 col-md-8 col-sm-7 col-xs-7"},"\n                ",p.Unless(function(){return u.call(u.dot(t.lookup("."),"printOnly"))},function(){return["\n                  ",d.H4(p.View(function(){return u.mustache(t.lookup("papaConsultadaPrint"),t.lookup(".."),u.dot(t.lookup("."),"field"))})),"\n                "]},function(){return["\n                  ",d.IMG({"class":"img-responsive",src:function(){return["assets/images/papas/",u.mustache(t.lookup("papaConsultadaPrint"),t.lookup(".."),"imageFileNamePrint")]}}),"\n                "]}),"\n              "),"\n            "),"\n          "]}),"\n        "),"\n      "),"  \n    "]}),"\n  "),d.Raw('\n\n  <div class="row">\n    <br>\n    <button class="btn btn-primary" href="#" data-action="comenzar">\n      <span class="glyphicon glyphicon-repeat"></span> Volver a jugar\n    </button>\n    <button class="btn btn-primary" href="#" data-action="imprimir">\n      <span class="glyphicon glyphicon-print"></span> Imprimir\n    </button>\n  </div>')]}),l.__define__("expertoPapaAdivinada",function(){var t=this;return d.DIV({"class":"col-xs-12 col-sm-12 col-md-6 col-lg-6 text-center"},"\n    ",d.DIV({"class":"experto-papa","data-action":"set-papa-actual",style:function(){return['background-image: url("assets/images/papas/',u.mustache(t.lookup("imageFileNameScreen")),'");\n      ',u.mustache(t.lookup("papaActualBgStyle"))]}},"\n    "),"\n  ")})}.call(this),function(){function i(t,e,i){var n;do n=Math.floor(Math.random()*(e-t+1))+t;while(i.indexOf(n)>-1);return n}function r(){var t=s.get("expertoPapasActuales");if(!t){t=[];for(var n=0;m>n;n++)t.push(i(1,e.find().count(),t));s.set("expertoPapasActuales",t)}return p(t)}function u(t,e){var i=s.get("expertoPapasActuales");return p(i.slice(t,e))}function c(){return u(0,m/2)}function d(){return u(m/2,m)}function p(t){return t?e.find({numero:{$in:t}}):void 0}function f(){return p(s.get("expertoPapasAdivinadas"))}var m=10,g=5,_={'click [data-action="comenzar"]':function(t){return t.preventDefault(),s.set("expertoStep","identificarPapas"),a(["expertoTiempo","expertoPapasActuales","expertoFallos","expertoPapasAAdivinar","expertoPapasAdivinadas"]).each(function(t){s.set(t,void 0)}),!1},'click [data-action="papas-identificadas"]':function(t){return t.preventDefault(),s.set("expertoStep","juego"),!1},'click [data-action="volver-al-comienzo"]':function(t){return t.preventDefault(),bootbox.confirm("¿Estás segur@ de que quieres abandonar el juego?",function(t){t&&s.set("expertoStep","identificarPapas")}),!1},'click [data-action="toggle-sound"]':function(){var e=!t.sonidos.manager._muted;e?t.sonidos.manager.mute():t.sonidos.manager.unmute(),s.set("expertoIsMuted",e)},'click [data-action="reiniciar"]':function(e){return e.preventDefault(),bootbox.confirm("¿Estás segur@ de que quieres abandonar el juego?",function(e){e&&t.restart()}),!1},'click [data-action="set-papa-actual"]':function(t){t.preventDefault(),s.set("expertoPapaConsultada",this.numero)},'click [data-action="presentarse"]':function(i,n){i.preventDefault();var r=n.$(i.currentTarget),o=r.data("papanumero"),s=e.findOne({numero:o});return r.find(".centro").grumble({text:s.nombre,angle:85,distance:0,hideAfter:1e3}),t.sonidos.papas.play(s.numero),!1}};h.registerHelper("expertoTiempo",function(){return s.get("expertoTiempo")}),l.experto.rendered=function(){t.init()},l.experto.step=function(){var t=s.get("expertoStep")||"intro";return l["experto"+a.capitalize(t)]},l.experto.events(_),l.expertoIntro.events(_),l.expertoIdentificarPapas.rendered=function(){},l.expertoIdentificarPapas.papas1=function(){return r(),c()},l.expertoIdentificarPapas.papas2=function(){return r(),d()},l.expertoJuego.rendered=function(){s.set("expertoFallos",0);for(var t=[],e=[],n=0;g>n;n++){var r=s.get("expertoPapasActuales"),o=i(0,r.length-1,e);t.push(r[o]),e.push(o)}s.set("expertoPapasAAdivinar",t)},l.expertoJuegoOption.rendered=function(){var e=this;e.$(".experto-papa").draggable({revert:function(e){return e||(s.set("expertoFallos",s.get("expertoFallos")+1),t.sonidos.incorrecto.play()),!e}})},o.autorun(function(){var t=s.get("expertoPapasAdivinadas"),e=s.get("expertoPapasAAdivinar");t&&e&&t.length==e.length&&a(a(e).difference(t)).isEmpty()&&s.set("expertoStep","fin")}),l.expertoJuegoIncognita.rendered=function(){var e=this;e.$(".experto-incognita").droppable({accept:function(t){return $(t).hasClass("experto-papa")&&$(this).data("papanumero")==$(t).data("papanumero")},drop:function(i,n){n.draggable.draggable("destroy"),e.$(this).addClass("resuelta");var r=parseInt($(this).data("papanumero")),o=s.get("expertoPapasAdivinadas")||[];o.indexOf(r)<0&&(o.push(r),s.set("expertoPapasAdivinadas",o)),t.sonidos.correcto.play()}})},l.expertoJuego.papas1=function(){return c()},l.expertoJuego.papas2=function(){return d()},l.expertoJuego.papasAAdivinar=function(){return p(s.get("expertoPapasAAdivinar"))},l.expertoJuego.events(_),l.expertoFin.rendered=function(){t.sonidos.final.play()},l.expertoFin.papasAdivinadas=function(){return f()},l.expertoFin.papasCamposExtra=function(){return[{field:"nombre",label:"Nombre",mainField:!0},{printOnly:!0,label:"Colorea"},{field:"significadoNombre",label:"Significado del nombre"},{field:"nombreAlternativo",label:"Nombre alternativo"},{field:"colorFlor",label:"Color principal de la flor"},{field:"toleranciaGranizada",label:"Tolerancia a la granizada"},{field:"colorPulpa",label:"Color principal de la pulpa"},{field:"formaRara",label:"Forma rara"},{field:"toleranciaHelada",label:"Tolerancia a la helada "}]},l.expertoFin.papaConsultada=function(t){var i=s.get("expertoPapaConsultada");return i?n=e.findOne({numero:i}):(n=f().fetch()[0],s.set("expertoPapaConsultada",n.numero)),n[t]},l.expertoFin.papaConsultadaPrint=function(t,e){return t[e]},l.expertoFin.events(_),l.expertoFin.events({'click [data-action="imprimir"]':function(t){return t.preventDefault(),window.print(),!1}}),l.expertoPapaAdivinada.papaActualBgStyle=function(){return this.numero==s.get("expertoPapaConsultada")?"background-position: -160px":void 0},l.expertoPapaAdivinada.events(_)}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-experto"]={Experto:t,Papas:e}}(),Meteor=Package.meteor.Meteor,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Spacebars=Package.spacebars.Spacebars,Template=Package.templating.Template,check=Package.check.check,Match=Package.check.Match,_=Package.underscore._,$=Package.jquery.$,jQuery=Package.jquery.jQuery,Random=Package.random.Random,EJSON=Package.ejson.EJSON,GroundDB=Package.grounddb.GroundDB,Rompecabezas=Package["papitas-rompecabezas"].Rompecabezas,Etapas=Package["papitas-rompecabezas"].Etapas,_s=Package["underscore-string-latest"]._s,Pince=Package.pince.Pince,Logger=Package.pince.Logger,MicroEvent=Package.pince.MicroEvent,moment=Package["moment-with-langs"].moment,Experto=Package["papitas-experto"].Experto,Papas=Package["papitas-experto"].Papas,HTML=Package.htmljs.HTML,Blaze=Package.blaze.Blaze,SimpleSchema=Package["simple-schema"].SimpleSchema,MongoObject=Package["simple-schema"].MongoObject,function(){Template.__body__.__contentParts.push(Blaze.View("body_content_"+Template.__body__.__contentParts.length,function(){var t=this;return Spacebars.include(t.lookupTemplate("experto"))})),Meteor.startup(Template.__body__.__instantiate)}();