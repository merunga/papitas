!function(){var t,e;(function(){e={}}).call(this),function(){(function(){var t=this,n=t._,i={},r=Array.prototype,o=Object.prototype,a=Function.prototype,s=r.push,l=r.slice,u=r.concat,h=o.toString,c=o.hasOwnProperty,d=r.forEach,p=r.map,f=r.reduce,m=r.reduceRight,g=r.filter,y=r.every,_=r.some,v=r.indexOf,b=r.lastIndexOf,w=Array.isArray,x=Object.keys,T=a.bind,M=function(t){return t instanceof M?t:this instanceof M?void(this._wrapped=t):new M(t)};"undefined"!=typeof e?("undefined"!=typeof module&&module.exports&&(e=module.exports=M),e._=M):t._=M,M.VERSION="1.5.2";var k=function(t){return"[object Arguments]"===h.call(t)};k(arguments)||(k=function(t){return!(!t||!c.call(t,"callee")||"function"!=typeof t.callee)});var S=function(t){return t.length===+t.length&&(k(t)||t.constructor!==Object)},C=M.each=M.forEach=function(t,e,n){if(null!=t)if(d&&t.forEach===d)t.forEach(e,n);else if(S(t)){for(var r=0,o=t.length;o>r;r++)if(e.call(n,t[r],r,t)===i)return}else for(var a=M.keys(t),r=0,o=a.length;o>r;r++)if(e.call(n,t[a[r]],a[r],t)===i)return};M.map=M.collect=function(t,e,n){var i=[];return null==t?i:p&&t.map===p?t.map(e,n):(C(t,function(t,r,o){i.push(e.call(n,t,r,o))}),i)};var L="Reduce of empty array with no initial value";M.reduce=M.foldl=M.inject=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),f&&t.reduce===f)return i&&(e=M.bind(e,i)),r?t.reduce(e,n):t.reduce(e);if(C(t,function(t,o,a){r?n=e.call(i,n,t,o,a):(n=t,r=!0)}),!r)throw new TypeError(L);return n},M.reduceRight=M.foldr=function(t,e,n,i){var r=arguments.length>2;if(null==t&&(t=[]),m&&t.reduceRight===m)return i&&(e=M.bind(e,i)),r?t.reduceRight(e,n):t.reduceRight(e);var o=t.length;if(!S(t)){var a=M.keys(t);o=a.length}if(C(t,function(s,l,u){l=a?a[--o]:--o,r?n=e.call(i,n,t[l],l,u):(n=t[l],r=!0)}),!r)throw new TypeError(L);return n},M.find=M.detect=function(t,e,n){var i;return P(t,function(t,r,o){return e.call(n,t,r,o)?(i=t,!0):void 0}),i},M.filter=M.select=function(t,e,n){var i=[];return null==t?i:g&&t.filter===g?t.filter(e,n):(C(t,function(t,r,o){e.call(n,t,r,o)&&i.push(t)}),i)},M.reject=function(t,e,n){return M.filter(t,function(t,i,r){return!e.call(n,t,i,r)},n)},M.every=M.all=function(t,e,n){e||(e=M.identity);var r=!0;return null==t?r:y&&t.every===y?t.every(e,n):(C(t,function(t,o,a){return(r=r&&e.call(n,t,o,a))?void 0:i}),!!r)};var P=M.some=M.any=function(t,e,n){e||(e=M.identity);var r=!1;return null==t?r:_&&t.some===_?t.some(e,n):(C(t,function(t,o,a){return r||(r=e.call(n,t,o,a))?i:void 0}),!!r)};M.contains=M.include=function(t,e){return null==t?!1:v&&t.indexOf===v?-1!=t.indexOf(e):P(t,function(t){return t===e})},M.invoke=function(t,e){var n=l.call(arguments,2),i=M.isFunction(e);return M.map(t,function(t){return(i?e:t[e]).apply(t,n)})},M.pluck=function(t,e){return M.map(t,function(t){return t[e]})},M.where=function(t,e,n){return M.isEmpty(e)?n?void 0:[]:M[n?"find":"filter"](t,function(t){for(var n in e)if(e[n]!==t[n])return!1;return!0})},M.findWhere=function(t,e){return M.where(t,e,!0)},M.max=function(t,e,n){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.max.apply(Math,t);if(!e&&M.isEmpty(t))return-1/0;var i={computed:-1/0,value:-1/0};return C(t,function(t,r,o){var a=e?e.call(n,t,r,o):t;a>i.computed&&(i={value:t,computed:a})}),i.value},M.min=function(t,e,n){if(!e&&M.isArray(t)&&t[0]===+t[0]&&t.length<65535)return Math.min.apply(Math,t);if(!e&&M.isEmpty(t))return 1/0;var i={computed:1/0,value:1/0};return C(t,function(t,r,o){var a=e?e.call(n,t,r,o):t;a<i.computed&&(i={value:t,computed:a})}),i.value},M.shuffle=function(t){var e,n=0,i=[];return C(t,function(t){e=M.random(n++),i[n-1]=i[e],i[e]=t}),i},M.sample=function(t,e,n){return arguments.length<2||n?t[M.random(t.length-1)]:M.shuffle(t).slice(0,Math.max(0,e))};var D=function(t){return M.isFunction(t)?t:function(e){return e[t]}};M.sortBy=function(t,e,n){var i=D(e);return M.pluck(M.map(t,function(t,e,r){return{value:t,index:e,criteria:i.call(n,t,e,r)}}).sort(function(t,e){var n=t.criteria,i=e.criteria;if(n!==i){if(n>i||void 0===n)return 1;if(i>n||void 0===i)return-1}return t.index-e.index}),"value")};var A=function(t){return function(e,n,i){var r={},o=null==n?M.identity:D(n);return C(e,function(n,a){var s=o.call(i,n,a,e);t(r,s,n)}),r}};M.groupBy=A(function(t,e,n){(M.has(t,e)?t[e]:t[e]=[]).push(n)}),M.indexBy=A(function(t,e,n){t[e]=n}),M.countBy=A(function(t,e){M.has(t,e)?t[e]++:t[e]=1}),M.sortedIndex=function(t,e,n,i){n=null==n?M.identity:D(n);for(var r=n.call(i,e),o=0,a=t.length;a>o;){var s=o+a>>>1;n.call(i,t[s])<r?o=s+1:a=s}return o},M.toArray=function(t){return t?M.isArray(t)?l.call(t):S(t)?M.map(t,M.identity):M.values(t):[]},M.size=function(t){return null==t?0:S(t)?t.length:M.keys(t).length},M.first=M.head=M.take=function(t,e,n){return null==t?void 0:null==e||n?t[0]:l.call(t,0,e)},M.initial=function(t,e,n){return l.call(t,0,t.length-(null==e||n?1:e))},M.last=function(t,e,n){return null==t?void 0:null==e||n?t[t.length-1]:l.call(t,Math.max(t.length-e,0))},M.rest=M.tail=M.drop=function(t,e,n){return l.call(t,null==e||n?1:e)},M.compact=function(t){return M.filter(t,M.identity)};var E=function(t,e,n){return e&&M.every(t,M.isArray)?u.apply(n,t):(C(t,function(t){M.isArray(t)||M.isArguments(t)?e?s.apply(n,t):E(t,e,n):n.push(t)}),n)};M.flatten=function(t,e){return E(t,e,[])},M.without=function(t){return M.difference(t,l.call(arguments,1))},M.uniq=M.unique=function(t,e,n,i){M.isFunction(e)&&(i=n,n=e,e=!1);var r=n?M.map(t,n,i):t,o=[],a=[];return C(r,function(n,i){(e?i&&a[a.length-1]===n:M.contains(a,n))||(a.push(n),o.push(t[i]))}),o},M.union=function(){return M.uniq(M.flatten(arguments,!0))},M.intersection=function(t){var e=l.call(arguments,1);return M.filter(M.uniq(t),function(t){return M.every(e,function(e){return M.indexOf(e,t)>=0})})},M.difference=function(t){var e=u.apply(r,l.call(arguments,1));return M.filter(t,function(t){return!M.contains(e,t)})},M.zip=function(){for(var t=M.max(M.pluck(arguments,"length").concat(0)),e=new Array(t),n=0;t>n;n++)e[n]=M.pluck(arguments,""+n);return e},M.object=function(t,e){if(null==t)return{};for(var n={},i=0,r=t.length;r>i;i++)e?n[t[i]]=e[i]:n[t[i][0]]=t[i][1];return n},M.indexOf=function(t,e,n){if(null==t)return-1;var i=0,r=t.length;if(n){if("number"!=typeof n)return i=M.sortedIndex(t,e),t[i]===e?i:-1;i=0>n?Math.max(0,r+n):n}if(v&&t.indexOf===v)return t.indexOf(e,n);for(;r>i;i++)if(t[i]===e)return i;return-1},M.lastIndexOf=function(t,e,n){if(null==t)return-1;var i=null!=n;if(b&&t.lastIndexOf===b)return i?t.lastIndexOf(e,n):t.lastIndexOf(e);for(var r=i?n:t.length;r--;)if(t[r]===e)return r;return-1},M.range=function(t,e,n){arguments.length<=1&&(e=t||0,t=0),n=arguments[2]||1;for(var i=Math.max(Math.ceil((e-t)/n),0),r=0,o=new Array(i);i>r;)o[r++]=t,t+=n;return o};var O=function(){};M.bind=function(t,e){var n,i;if(T&&t.bind===T)return T.apply(t,l.call(arguments,1));if(!M.isFunction(t))throw new TypeError;return n=l.call(arguments,2),i=function(){if(!(this instanceof i))return t.apply(e,n.concat(l.call(arguments)));O.prototype=t.prototype;var r=new O;O.prototype=null;var o=t.apply(r,n.concat(l.call(arguments)));return Object(o)===o?o:r}},M.partial=function(t){var e=l.call(arguments,1);return function(){return t.apply(this,e.concat(l.call(arguments)))}},M.bindAll=function(t){var e=l.call(arguments,1);if(0===e.length)throw new Error("bindAll must be passed function names");return C(e,function(e){t[e]=M.bind(t[e],t)}),t},M.memoize=function(t,e){var n={};return e||(e=M.identity),function(){var i=e.apply(this,arguments);return M.has(n,i)?n[i]:n[i]=t.apply(this,arguments)}},M.delay=function(t,e){var n=l.call(arguments,2);return setTimeout(function(){return t.apply(null,n)},e)},M.defer=function(t){return M.delay.apply(M,[t,1].concat(l.call(arguments,1)))},M.throttle=function(t,e,n){var i,r,o,a=null,s=0;n||(n={});var l=function(){s=n.leading===!1?0:new Date,a=null,o=t.apply(i,r)};return function(){var u=new Date;s||n.leading!==!1||(s=u);var h=e-(u-s);return i=this,r=arguments,0>=h?(clearTimeout(a),a=null,s=u,o=t.apply(i,r)):a||n.trailing===!1||(a=setTimeout(l,h)),o}},M.debounce=function(t,e,n){var i,r,o,a,s;return function(){o=this,r=arguments,a=new Date;var l=function(){var u=new Date-a;e>u?i=setTimeout(l,e-u):(i=null,n||(s=t.apply(o,r)))},u=n&&!i;return i||(i=setTimeout(l,e)),u&&(s=t.apply(o,r)),s}},M.once=function(t){var e,n=!1;return function(){return n?e:(n=!0,e=t.apply(this,arguments),t=null,e)}},M.wrap=function(t,e){return function(){var n=[t];return s.apply(n,arguments),e.apply(this,n)}},M.compose=function(){var t=arguments;return function(){for(var e=arguments,n=t.length-1;n>=0;n--)e=[t[n].apply(this,e)];return e[0]}},M.after=function(t,e){return function(){return--t<1?e.apply(this,arguments):void 0}},M.keys=x||function(t){if(t!==Object(t))throw new TypeError("Invalid object");var e=[];for(var n in t)M.has(t,n)&&e.push(n);return e},M.values=function(t){for(var e=M.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=t[e[r]];return i},M.pairs=function(t){for(var e=M.keys(t),n=e.length,i=new Array(n),r=0;n>r;r++)i[r]=[e[r],t[e[r]]];return i},M.invert=function(t){for(var e={},n=M.keys(t),i=0,r=n.length;r>i;i++)e[t[n[i]]]=n[i];return e},M.functions=M.methods=function(t){var e=[];for(var n in t)M.isFunction(t[n])&&e.push(n);return e.sort()},M.extend=function(t){return C(l.call(arguments,1),function(e){if(e)for(var n in e)t[n]=e[n]}),t},M.pick=function(t){var e={},n=u.apply(r,l.call(arguments,1));return C(n,function(n){n in t&&(e[n]=t[n])}),e},M.omit=function(t){var e={},n=u.apply(r,l.call(arguments,1));for(var i in t)M.contains(n,i)||(e[i]=t[i]);return e},M.defaults=function(t){return C(l.call(arguments,1),function(e){if(e)for(var n in e)void 0===t[n]&&(t[n]=e[n])}),t},M.clone=function(t){return M.isObject(t)?M.isArray(t)?t.slice():M.extend({},t):t},M.tap=function(t,e){return e(t),t};var I=function(t,e,n,i){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;t instanceof M&&(t=t._wrapped),e instanceof M&&(e=e._wrapped);var r=h.call(t);if(r!=h.call(e))return!1;switch(r){case"[object String]":return t==String(e);case"[object Number]":return t!=+t?e!=+e:0==t?1/t==1/e:t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object RegExp]":return t.source==e.source&&t.global==e.global&&t.multiline==e.multiline&&t.ignoreCase==e.ignoreCase}if("object"!=typeof t||"object"!=typeof e)return!1;for(var o=n.length;o--;)if(n[o]==t)return i[o]==e;var a=t.constructor,s=e.constructor;if(a!==s&&!(M.isFunction(a)&&a instanceof a&&M.isFunction(s)&&s instanceof s))return!1;n.push(t),i.push(e);var l=0,u=!0;if("[object Array]"==r){if(l=t.length,u=l==e.length)for(;l--&&(u=I(t[l],e[l],n,i)););}else{for(var c in t)if(M.has(t,c)&&(l++,!(u=M.has(e,c)&&I(t[c],e[c],n,i))))break;if(u){for(c in e)if(M.has(e,c)&&!l--)break;u=!l}}return n.pop(),i.pop(),u};M.isEqual=function(t,e){return I(t,e,[],[])},M.isEmpty=function(t){if(null==t)return!0;if(M.isArray(t)||M.isString(t))return 0===t.length;for(var e in t)if(M.has(t,e))return!1;return!0},M.isElement=function(t){return!(!t||1!==t.nodeType)},M.isArray=w||function(t){return"[object Array]"==h.call(t)},M.isObject=function(t){return t===Object(t)},C(["Arguments","Function","String","Number","Date","RegExp"],function(t){M["is"+t]=function(e){return h.call(e)=="[object "+t+"]"}}),M.isArguments(arguments)||(M.isArguments=function(t){return!(!t||!M.has(t,"callee"))}),"function"!=typeof/./&&(M.isFunction=function(t){return"function"==typeof t}),M.isFinite=function(t){return isFinite(t)&&!isNaN(parseFloat(t))},M.isNaN=function(t){return M.isNumber(t)&&t!=+t},M.isBoolean=function(t){return t===!0||t===!1||"[object Boolean]"==h.call(t)},M.isNull=function(t){return null===t},M.isUndefined=function(t){return void 0===t},M.has=function(t,e){return c.call(t,e)},M.noConflict=function(){return t._=n,this},M.identity=function(t){return t},M.times=function(t,e,n){for(var i=Array(Math.max(0,t)),r=0;t>r;r++)i[r]=e.call(n,r);return i},M.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))};var R={escape:{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;"}};R.unescape=M.invert(R.escape);var N={escape:new RegExp("["+M.keys(R.escape).join("")+"]","g"),unescape:new RegExp("("+M.keys(R.unescape).join("|")+")","g")};M.each(["escape","unescape"],function(t){M[t]=function(e){return null==e?"":(""+e).replace(N[t],function(e){return R[t][e]})}}),M.result=function(t,e){if(null==t)return void 0;var n=t[e];return M.isFunction(n)?n.call(t):n},M.mixin=function(t){C(M.functions(t),function(e){var n=M[e]=t[e];M.prototype[e]=function(){var t=[this._wrapped];return s.apply(t,arguments),U.call(this,n.apply(M,t))}})};var Y=0;M.uniqueId=function(t){var e=++Y+"";return t?t+e:e},M.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var F=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","	":"t","\u2028":"u2028","\u2029":"u2029"},B=/\\|'|\r|\n|\t|\u2028|\u2029/g;M.template=function(t,e,n){var i;n=M.defaults({},n,M.templateSettings);var r=new RegExp([(n.escape||F).source,(n.interpolate||F).source,(n.evaluate||F).source].join("|")+"|$","g"),o=0,a="__p+='";t.replace(r,function(e,n,i,r,s){return a+=t.slice(o,s).replace(B,function(t){return"\\"+j[t]}),n&&(a+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'"),i&&(a+="'+\n((__t=("+i+"))==null?'':__t)+\n'"),r&&(a+="';\n"+r+"\n__p+='"),o=s+e.length,e}),a+="';\n",n.variable||(a="with(obj||{}){\n"+a+"}\n"),a="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+a+"return __p;\n";try{i=new Function(n.variable||"obj","_",a)}catch(s){throw s.source=a,s}if(e)return i(e,M);var l=function(t){return i.call(this,t,M)};return l.source="function("+(n.variable||"obj")+"){\n"+a+"}",l},M.chain=function(t){return M(t).chain()};var U=function(t){return this._chain?M(t).chain():t};M.mixin(M),C(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=r[t];M.prototype[t]=function(){var n=this._wrapped;return e.apply(n,arguments),"shift"!=t&&"splice"!=t||0!==n.length||delete n[0],U.call(this,n)}}),C(["concat","join","slice"],function(t){var e=r[t];M.prototype[t]=function(){return U.call(this,e.apply(this._wrapped,arguments))}}),M.extend(M.prototype,{chain:function(){return this._chain=!0,this},value:function(){return this._wrapped}})}).call(this)}.call(this),function(){t=e._}.call(this),"undefined"==typeof Package&&(Package={}),Package.underscore={_:t}}(),function(){var t,e=Package.underscore._;(function(){t={isClient:!0,isServer:!1},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.PUBLIC_SETTINGS&&(t.settings={"public":__meteor_runtime_config__.PUBLIC_SETTINGS})}).call(this),function(){if(t.isServer)var n=Npm.require("fibers/future");"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.meteorRelease&&(t.release=__meteor_runtime_config__.meteorRelease),e.extend(t,{_get:function(t){for(var e=1;e<arguments.length;e++){if(!(arguments[e]in t))return void 0;t=t[arguments[e]]}return t},_ensure:function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];n in t||(t[n]={}),t=t[n]}return t},_delete:function(t){for(var e=[t],n=!0,i=1;i<arguments.length-1;i++){var r=arguments[i];if(!(r in t)){n=!1;break}if(t=t[r],"object"!=typeof t)break;e.push(t)}for(var i=e.length-1;i>=0;i--){var r=arguments[i+1];if(n)n=!1;else for(var o in e[i][r])return;delete e[i][r]}},_wrapAsync:function(i){return function(){for(var r,o,a=this,s=e.toArray(arguments),l=function(e){return e?t._debug("Exception in callback of async function",e.stack?e.stack:e):void 0};s.length>0&&"undefined"==typeof s[s.length-1];)s.pop();s.length>0&&s[s.length-1]instanceof Function?r=s.pop():t.isClient?r=l:(o=new n,r=o.resolver()),s.push(t.bindEnvironment(r));var u=i.apply(a,s);return o?o.wait():u}},_inherits:function(t,n){for(var i in n)e.has(n,i)&&(t[i]=n[i]);var r=function(){this.constructor=t};return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t}})}.call(this),function(){"use strict";function e(){if(r.setImmediate){var t=function(t){r.setImmediate(t)};return t.implementation="setImmediate",t}return null}function n(){function t(t,e){return"string"==typeof t&&t.substring(0,e.length)===e}function e(e){if(e.source===r&&t(e.data,s)){var n=e.data.substring(s.length);try{a[n]&&a[n]()}finally{delete a[n]}}}if(!r.postMessage||r.importScripts)return null;var n=!0,i=r.onmessage;if(r.onmessage=function(){n=!1},r.postMessage("","*"),r.onmessage=i,!n)return null;var o=0,a={},s="Meteor._setImmediate."+Math.random()+".";r.addEventListener?r.addEventListener("message",e,!1):r.attachEvent("onmessage",e);var l=function(t){++o,a[o]=t,r.postMessage(s+o,"*")};return l.implementation="postMessage",l}function i(){var t=function(t){r.setTimeout(t,0)};return t.implementation="setTimeout",t}var r=this;t._setImmediate=e()||n()||i()}.call(this),function(){var n=function(t){if(Package.livedata){var e=Package.livedata.DDP._CurrentInvocation;if(e.get()&&e.get().isSimulation)throw new Error("Can't set timers inside simulations");return function(){e.withValue(null,t)}}return t},i=function(e,i){return t.bindEnvironment(n(i),e)};e.extend(t,{setTimeout:function(t,e){return setTimeout(i("setTimeout callback",t),e)},setInterval:function(t,e){return setInterval(i("setInterval callback",t),e)},clearInterval:function(t){return clearInterval(t)},clearTimeout:function(t){return clearTimeout(t)},defer:function(e){t._setImmediate(i("defer callback",e))}})}.call(this),function(){t.makeErrorType=function(e,n){var i=function(){var t=this;if(Error.captureStackTrace)Error.captureStackTrace(t,i);else{var r=new Error;r.__proto__=i.prototype,r instanceof i&&(t=r)}return n.apply(t,arguments),t.errorType=e,t};return t._inherits(i,Error),i},t.Error=t.makeErrorType("Meteor.Error",function(t,e,n){var i=this;i.error=t,i.reason=e,i.details=n,i.message=i.reason?i.reason+" ["+i.error+"]":"["+i.error+"]"}),t.Error.prototype.clone=function(){var e=this;return new t.Error(e.error,e.reason,e.details)}}.call(this),function(){t._noYieldsAllowed=function(t){return t()},t._SynchronousQueue=function(){var t=this;t._tasks=[],t._running=!1},e.extend(t._SynchronousQueue.prototype,{runTask:function(n){var i=this;if(!i.safeToRunTask())throw new Error("Could not synchronously run a task from a running task");i._tasks.push(n);var r=i._tasks;i._tasks=[],i._running=!0;try{for(;!e.isEmpty(r);){var o=r.shift();try{o()}catch(a){if(e.isEmpty(r))throw a;t._debug("Exception in queued task: "+a.stack)}}}finally{i._running=!1}},queueTask:function(t){var n=this,i=e.isEmpty(n._tasks);n._tasks.push(t),i&&setTimeout(e.bind(n.flush,n),0)},flush:function(){var t=this;t.runTask(function(){})},drain:function(){var t=this;if(t.safeToRunTask())for(;!e.isEmpty(t._tasks);)t.flush()},safeToRunTask:function(){var t=this;return!t._running}})}.call(this),function(){var e=[],n="loaded"===document.readyState||"complete"==document.readyState,i=function(){for(n=!0;e.length;)e.shift()()};document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("load",i)),t.startup=function(i){var r=!document.addEventListener&&document.documentElement.doScroll;if(r&&window===top){try{r("left")}catch(o){return void setTimeout(function(){t.startup(i)},50)}i()}else n?i():e.push(i)}}.call(this),function(){var e=0;t._debug=function(){if(e)return void e--;if("undefined"!=typeof console&&"undefined"!=typeof console.log)if(0==arguments.length)console.log("");else if("function"==typeof console.log.apply){for(var t=!0,n=0;n<arguments.length;n++)"string"!=typeof arguments[n]&&(t=!1);t?console.log.apply(console,[Array.prototype.join.call(arguments," ")]):console.log.apply(console,arguments)}else if("function"==typeof Function.prototype.bind){var i=Function.prototype.bind.call(console.log,console);i.apply(console,arguments)}else Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},t._suppress_log=function(t){e+=t}}.call(this),function(){var n=0,i=[];t.EnvironmentVariable=function(){this.slot=n++},e.extend(t.EnvironmentVariable.prototype,{get:function(){return i[this.slot]},getOrNullIfOutsideFiber:function(){return this.get()},withValue:function(t,e){var n=i[this.slot];try{i[this.slot]=t;var r=e()}finally{i[this.slot]=n}return r}}),t.bindEnvironment=function(n,r,o){var a=e.clone(i);if(!r||"string"==typeof r){var s=r||"callback of async function";r=function(e){t._debug("Exception in "+s+":",e&&e.stack||e)}}return function(){var t=i;try{i=a;var s=n.apply(o,e.toArray(arguments))}catch(l){r(l)}finally{i=t}return s}},t._nodeCodeMustBeInFiber=function(){}}.call(this),function(){t.absoluteUrl=function(n,i){i||"object"!=typeof n||(i=n,n=void 0),i=e.extend({},t.absoluteUrl.defaultOptions,i||{});var r=i.rootUrl;if(!r)throw new Error("Must pass options.rootUrl or set ROOT_URL in the server environment");return/^http[s]?:\/\//i.test(r)||(r="http://"+r),/\/$/.test(r)||(r+="/"),n&&(r+=n),i.secure&&/^http:/.test(r)&&!/http:\/\/localhost[:\/]/.test(r)&&!/http:\/\/127\.0\.0\.1[:\/]/.test(r)&&(r=r.replace(/^http:/,"https:")),i.replaceLocalhost&&(r=r.replace(/^http:\/\/localhost([:\/].*)/,"http://127.0.0.1$1")),r},t.absoluteUrl.defaultOptions={},"object"==typeof __meteor_runtime_config__&&__meteor_runtime_config__.ROOT_URL&&(t.absoluteUrl.defaultOptions.rootUrl=__meteor_runtime_config__.ROOT_URL),t._relativeToSiteRootUrl=function(t){return"object"==typeof __meteor_runtime_config__&&"/"===t.substr(0,1)&&(t=(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX||"")+t),t}}.call(this),"undefined"==typeof Package&&(Package={}),Package.meteor={Meteor:t}}(),function(){var t=Package.meteor.Meteor;(function(){t.startup(function(){t.disconnect()})}).call(this),"undefined"==typeof Package&&(Package={}),Package["no-server"]={}}(),function(){var Meteor=Package.meteor.Meteor,JSON;(function(){window.JSON&&(JSON=window.JSON)}).call(this),function(){"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return 10>t?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,r,o,a,s=gap,l=e[t];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(t)),"function"==typeof rep&&(l=rep.call(e,t,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,n=0;o>n;n+=1)a[n]=str(n,l)||"null";return r=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,r}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;o>n;n+=1)"string"==typeof rep[n]&&(i=rep[n],r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));else for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(r=str(i,l),r&&a.push(quote(i)+(gap?": ":":")+r));return r=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,r}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(gap="",indent="","number"==typeof n)for(i=0;n>i;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if(rep=e,e&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,r=t[e];if(r&&"object"==typeof r)for(n in r)Object.prototype.hasOwnProperty.call(r,n)&&(i=walk(r,n),void 0!==i?r[n]=i:delete r[n]);return reviver.call(t,e,r)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}()}.call(this),"undefined"==typeof Package&&(Package={}),Package.json={JSON:JSON}}(),function(){var t,e,n,i,r=Package.meteor.Meteor,o=Package.json.JSON,a=Package.underscore._;(function(){t={},e={};var s={};t.addType=function(t,e){if(a.has(s,t))throw new Error("Type "+t+" already present");s[t]=e};var l=function(t){return a.isNaN(t)||1/0===t||t===-1/0},u=[{matchJSONValue:function(t){return a.has(t,"$date")&&1===a.size(t)},matchObject:function(t){return t instanceof Date},toJSONValue:function(t){return{$date:t.getTime()}},fromJSONValue:function(t){return new Date(t.$date)}},{matchJSONValue:function(t){return a.has(t,"$InfNaN")&&1===a.size(t)},matchObject:l,toJSONValue:function(t){var e;return e=a.isNaN(t)?0:1/0===t?1:-1,{$InfNaN:e}},fromJSONValue:function(t){return t.$InfNaN/0}},{matchJSONValue:function(t){return a.has(t,"$binary")&&1===a.size(t)},matchObject:function(t){return"undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&a.has(t,"$Uint8ArrayPolyfill")},toJSONValue:function(t){return{$binary:n(t)}},fromJSONValue:function(t){return i(t.$binary)}},{matchJSONValue:function(t){return a.has(t,"$escape")&&1===a.size(t)},matchObject:function(t){return a.isEmpty(t)||a.size(t)>2?!1:a.any(u,function(e){return e.matchJSONValue(t)})},toJSONValue:function(e){var n={};return a.each(e,function(e,i){n[i]=t.toJSONValue(e)}),{$escape:n}},fromJSONValue:function(e){var n={};return a.each(e.$escape,function(e,i){n[i]=t.fromJSONValue(e)}),n}},{matchJSONValue:function(t){return a.has(t,"$type")&&a.has(t,"$value")&&2===a.size(t)},matchObject:function(e){return t._isCustomType(e)},toJSONValue:function(t){var e=r._noYieldsAllowed(function(){return t.toJSONValue()});return{$type:t.typeName(),$value:e}},fromJSONValue:function(t){var e=t.$type;if(!a.has(s,e))throw new Error("Custom EJSON type "+e+" is not defined");var n=s[e];return r._noYieldsAllowed(function(){return n(t.$value)})}}];t._isCustomType=function(t){return t&&"function"==typeof t.toJSONValue&&"function"==typeof t.typeName&&a.has(s,t.typeName())};var h=t._adjustTypesToJSONValue=function(t){if(null===t)return null;var e=c(t);return void 0!==e?e:"object"!=typeof t?t:(a.each(t,function(e,n){if("object"==typeof e||void 0===e||l(e)){var i=c(e);return i?void(t[n]=i):void h(e)}}),t)},c=function(t){for(var e=0;e<u.length;e++){var n=u[e];if(n.matchObject(t))return n.toJSONValue(t)}return void 0};t.toJSONValue=function(e){var n=c(e);return void 0!==n?n:("object"==typeof e&&(e=t.clone(e),h(e)),e)};var d=t._adjustTypesFromJSONValue=function(t){if(null===t)return null;var e=p(t);return e!==t?e:"object"!=typeof t?t:(a.each(t,function(e,n){if("object"==typeof e){var i=p(e);if(e!==i)return void(t[n]=i);d(e)}}),t)},p=function(t){if("object"==typeof t&&null!==t&&a.size(t)<=2&&a.all(t,function(t,e){return"string"==typeof e&&"$"===e.substr(0,1)}))for(var e=0;e<u.length;e++){var n=u[e];if(n.matchJSONValue(t))return n.fromJSONValue(t)}return t};t.fromJSONValue=function(e){var n=p(e);return n===e&&"object"==typeof e?(e=t.clone(e),d(e),e):n},t.stringify=function(e,n){var i=t.toJSONValue(e);return n&&(n.canonical||n.indent)?t._canonicalStringify(i,n):o.stringify(i)},t.parse=function(e){if("string"!=typeof e)throw new Error("EJSON.parse argument should be a string");return t.fromJSONValue(o.parse(e))},t.isBinary=function(t){return!!("undefined"!=typeof Uint8Array&&t instanceof Uint8Array||t&&t.$Uint8ArrayPolyfill)},t.equals=function(e,n,i){var r,o=!(!i||!i.keyOrderSensitive);if(e===n)return!0;if(a.isNaN(e)&&a.isNaN(n))return!0;if(!e||!n)return!1;if("object"!=typeof e||"object"!=typeof n)return!1;if(e instanceof Date&&n instanceof Date)return e.valueOf()===n.valueOf();if(t.isBinary(e)&&t.isBinary(n)){if(e.length!==n.length)return!1;for(r=0;r<e.length;r++)if(e[r]!==n[r])return!1;return!0}if("function"==typeof e.equals)return e.equals(n,i);if("function"==typeof n.equals)return n.equals(e,i);if(e instanceof Array){if(!(n instanceof Array))return!1;if(e.length!==n.length)return!1;for(r=0;r<e.length;r++)if(!t.equals(e[r],n[r],i))return!1;return!0}switch(t._isCustomType(e)+t._isCustomType(n)){case 1:return!1;case 2:return t.equals(t.toJSONValue(e),t.toJSONValue(n))}var s;if(o){var l=[];return a.each(n,function(t,e){l.push(e)}),r=0,s=a.all(e,function(e,o){return r>=l.length?!1:o!==l[r]?!1:t.equals(e,n[l[r]],i)?(r++,!0):!1}),s&&r===l.length}return r=0,s=a.all(e,function(e,o){return a.has(n,o)&&t.equals(e,n[o],i)?(r++,!0):!1}),s&&a.size(n)===r},t.clone=function(e){var n;if("object"!=typeof e)return e;if(null===e)return null;if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp)return e;if(t.isBinary(e)){n=t.newBinary(e.length);for(var i=0;i<e.length;i++)n[i]=e[i];return n}if(a.isArray(e)||a.isArguments(e)){for(n=[],i=0;i<e.length;i++)n[i]=t.clone(e[i]);return n}return"function"==typeof e.clone?e.clone():t._isCustomType(e)?t.fromJSONValue(t.clone(t.toJSONValue(e)),!0):(n={},a.each(e,function(e,i){n[i]=t.clone(e)}),n)}}).call(this),function(){function e(t){return o.stringify(t)}var n=function(t,i,r,o,s){var l,u,h,c,d=o,p=i[t];switch(typeof p){case"string":return e(p);case"number":return isFinite(p)?String(p):"null";case"boolean":return String(p);case"object":if(!p)return"null";if(d=o+r,c=[],a.isArray(p)||a.isArguments(p)){for(h=p.length,l=0;h>l;l+=1)c[l]=n(l,p,r,d,s)||"null";return u=0===c.length?"[]":d?"[\n"+d+c.join(",\n"+d)+"\n"+o+"]":"["+c.join(",")+"]"}var f=a.keys(p);return s&&(f=f.sort()),a.each(f,function(t){u=n(t,p,r,d,s),u&&c.push(e(t)+(d?": ":":")+u)}),u=0===c.length?"{}":d?"{\n"+d+c.join(",\n"+d)+"\n"+o+"}":"{"+c.join(",")+"}"}};t._canonicalStringify=function(t,e){if(e=a.extend({indent:"",canonical:!1},e),e.indent===!0)e.indent="  ";else if("number"==typeof e.indent){for(var i="",r=0;r<e.indent;r++)i+=" ";e.indent=i}return n("",{"":t},e.indent,"",e.canonical)}}.call(this),function(){for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o={},a=0;a<r.length;a++)o[r.charAt(a)]=a;n=function(t){for(var e=[],n=null,i=null,r=null,o=null,a=0;a<t.length;a++)switch(a%3){case 0:n=t[a]>>2&63,i=(3&t[a])<<4;break;case 1:i|=t[a]>>4&15,r=(15&t[a])<<2;break;case 2:r|=t[a]>>6&3,o=63&t[a],e.push(s(n)),e.push(s(i)),e.push(s(r)),e.push(s(o)),n=null,i=null,r=null,o=null}return null!=n&&(e.push(s(n)),e.push(s(i)),e.push(null==r?"=":s(r)),null==o&&e.push("=")),e.join("")};var s=function(t){return r.charAt(t)},l=function(t){return"="===t?-1:o[t]};t.newBinary=function(t){if("undefined"==typeof Uint8Array||"undefined"==typeof ArrayBuffer){for(var e=[],n=0;t>n;n++)e.push(0);return e.$Uint8ArrayPolyfill=!0,e}return new Uint8Array(new ArrayBuffer(t))},i=function(e){var n=Math.floor(3*e.length/4);"="==e.charAt(e.length-1)&&(n--,"="==e.charAt(e.length-2)&&n--);for(var i=t.newBinary(n),r=null,o=null,a=null,s=0,u=0;u<e.length;u++){var h=e.charAt(u),c=l(h);switch(u%4){case 0:if(0>c)throw new Error("invalid base64 string");r=c<<2;break;case 1:if(0>c)throw new Error("invalid base64 string");r|=c>>4,i[s++]=r,o=(15&c)<<4;break;case 2:c>=0&&(o|=c>>2,i[s++]=o,a=(3&c)<<6);break;case 3:c>=0&&(i[s++]=a|c)
}}return i},e.base64Encode=n,e.base64Decode=i}.call(this),"undefined"==typeof Package&&(Package={}),Package.ejson={EJSON:t,EJSONTest:e}}(),function(){var t,e=Package.meteor.Meteor,n=Package.underscore._,i=Package.ejson.EJSON;(function(){t=function(){return t.info.apply(this,arguments)};var r=0,o=[],a=0;t._intercept=function(t){r+=t},t._suppress=function(t){a+=t},t._intercepted=function(){var t=o;return o=[],r=0,t},t.outputFormat="json";var s={debug:"green",warn:"magenta",error:"red"},l="blue",u=["time","timeInexact","level","file","line","program","originApp","satellite","stderr"],h=u.concat(["app","message"]),c=function(n){var i=t.format(n),r=n.level;"undefined"!=typeof console&&console[r]?console[r](i):e._debug(i)};t._getCallerDetails=function(){var t=function(){var t=new Error,e=t.stack;return e},e=t();if(!e)return{};for(var n,i=e.split("\n"),r=1;r<i.length;++r){if(n=i[r],n.match(/^\s*at eval \(eval/))return{file:"eval"};if(!n.match(/packages\/logging(?:\/|(?::tests)?\.js)/))break}var o={},a=/(?:[@(]| at )([^(]+?):([0-9:]+)(?:\)|$)/.exec(n);return a?(o.line=a[2].split(":")[0],o.file=a[1].split("/").slice(-1)[0].split("?")[0],o):o},n.each(["debug","info","warn","error"],function(s){t[s]=function(l){if(a)return void a--;var h=!1;r&&(r--,h=!0);var d=!n.isObject(l)||n.isRegExp(l)||n.isDate(l)?{message:new String(l).toString()}:l;if(n.each(u,function(t){if(d[t])throw new Error("Can't set '"+t+"' in log message")}),n.has(d,"message")&&!n.isString(d.message))throw new Error("The 'message' field in log objects must be a string");if(d.omitCallerDetails||(d=n.extend(t._getCallerDetails(),d)),d.time=new Date,d.level=s,"debug"!==s)if(h)o.push(i.stringify(d));else if(e.isServer)if("colored-text"===t.outputFormat)console.log(t.format(d,{color:!0}));else{if("json"!==t.outputFormat)throw new Error("Unknown logging output format: "+t.outputFormat);console.log(i.stringify(d))}else c(d)}}),t.parse=function(t){var e=null;if(t&&"{"===t.charAt(0))try{e=i.parse(t)}catch(n){}return e&&e.time&&e.time instanceof Date?e:null},t.format=function(t,r){t=i.clone(t),r=r||{};var o=t.time;if(!(o instanceof Date))throw new Error("'time' must be a Date object");var a=t.timeInexact,u=t.level||"info",c=t.file,d=t.line,p=t.app||"",f=t.originApp,m=t.message||"",g=t.program||"",y=t.satellite,_=t.stderr||"";n.each(h,function(e){delete t[e]}),n.isEmpty(t)||(m&&(m+=" "),m+=i.stringify(t));var v=function(t){return 10>t?"0"+t:t.toString()},b=function(t){return 100>t?"0"+v(t):t.toString()},w=o.getFullYear().toString()+v(o.getMonth()+1)+v(o.getDate()),x=v(o.getHours())+":"+v(o.getMinutes())+":"+v(o.getSeconds())+"."+b(o.getMilliseconds()),T="("+-((new Date).getTimezoneOffset()/60)+")",M="";p&&(M+=p),f&&f!==p&&(M+=" via "+f),M&&(M="["+M+"] ");var k=c&&d?["(",g?g+":":"",c,":",d,") "].join(""):"";y&&(k+=["[",y,"]"].join(""));var S=_?"(STDERR) ":"",C=[u.charAt(0).toUpperCase(),w,"-",x,T,a?"? ":" ",M,k,S].join(""),L=function(t,n){return r.color&&e.isServer&&n?Npm.require("cli-color")[n](t):t};return L(C,l)+L(m,s[u])},t.objFromText=function(t,e){var i={message:t,level:"info",time:new Date,timeInexact:!0};return n.extend(i,e)}}).call(this),"undefined"==typeof Package&&(Package={}),Package.logging={Log:t}}(),function(){var t,e=Package.meteor.Meteor;(function(){t={},t.active=!1,t.currentComputation=null;var n=function(e){t.currentComputation=e,t.active=!!e},i=function(){return"undefined"!=typeof e?e._debug:"undefined"!=typeof console&&console.log?function(){console.log.apply(console,arguments)}:function(){}},r=function(t,e){if(c)throw e;i()("Exception from Deps "+t+" function:",e.stack||e.message)},o=function(t){return"undefined"==typeof e||e.isClient?t:function(){var n=arguments;e._noYieldsAllowed(function(){t.apply(null,n)})}},a=1,s=[],l=!1,u=!1,h=!1,c=!1,d=[],p=function(){l||(setTimeout(t.flush,0),l=!0)},f=!1;t.Computation=function(t,e){if(!f)throw new Error("Deps.Computation constructor is private; use Deps.autorun");f=!1;var n=this;n.stopped=!1,n.invalidated=!1,n.firstRun=!0,n._id=a++,n._onInvalidateCallbacks=[],n._parent=e,n._func=t,n._recomputing=!1;var i=!0;try{n._compute(),i=!1}finally{n.firstRun=!1,i&&n.stop()}},t.Computation.prototype.onInvalidate=function(e){var n=this;if("function"!=typeof e)throw new Error("onInvalidate requires a function");n.invalidated?t.nonreactive(function(){o(e)(n)}):n._onInvalidateCallbacks.push(e)},t.Computation.prototype.invalidate=function(){var e=this;if(!e.invalidated){e._recomputing||e.stopped||(p(),s.push(this)),e.invalidated=!0;for(var n,i=0;n=e._onInvalidateCallbacks[i];i++)t.nonreactive(function(){o(n)(e)});e._onInvalidateCallbacks=[]}},t.Computation.prototype.stop=function(){this.stopped||(this.stopped=!0,this.invalidate())},t.Computation.prototype._compute=function(){var e=this;e.invalidated=!1;var i=t.currentComputation;n(e);h=!0;try{o(e._func)(e)}finally{n(i),h=!1}},t.Computation.prototype._recompute=function(){var t=this;t._recomputing=!0;try{for(;t.invalidated&&!t.stopped;)try{t._compute()}catch(e){r("recompute",e)}}finally{t._recomputing=!1}},t.Dependency=function(){this._dependentsById={}},t.Dependency.prototype.depend=function(e){if(!e){if(!t.active)return!1;e=t.currentComputation}var n=this,i=e._id;return i in n._dependentsById?!1:(n._dependentsById[i]=e,e.onInvalidate(function(){delete n._dependentsById[i]}),!0)},t.Dependency.prototype.changed=function(){var t=this;for(var e in t._dependentsById)t._dependentsById[e].invalidate()},t.Dependency.prototype.hasDependents=function(){var t=this;for(var e in t._dependentsById)return!0;return!1},t.flush=function(e){if(u)throw new Error("Can't call Deps.flush while flushing");if(h)throw new Error("Can't flush inside Deps.autorun");u=!0,l=!0,c=!(!e||!e._throwFirstError);var n=!1;try{for(;s.length||d.length;){for(;s.length;){var i=s.shift();i._recompute()}if(d.length){var o=d.shift();try{o()}catch(a){r("afterFlush function",a)}}}n=!0}finally{n||(u=!1,t.flush({_throwFirstError:!1})),l=!1,u=!1}},t.autorun=function(e){if("function"!=typeof e)throw new Error("Deps.autorun requires a function argument");f=!0;var n=new t.Computation(e,t.currentComputation);return t.active&&t.onInvalidate(function(){n.stop()}),n},t.nonreactive=function(e){var i=t.currentComputation;n(null);try{return e()}finally{n(i)}},t.onInvalidate=function(e){if(!t.active)throw new Error("Deps.onInvalidate requires a currentComputation");t.currentComputation.onInvalidate(e)},t.afterFlush=function(t){d.push(t),p()}}).call(this),function(){e.flush=t.flush,e.autorun=t.autorun,e.autosubscribe=t.autorun,t.depend=function(t){return t.depend()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.deps={Deps:t}}(),function(){{var t,e=Package.meteor.Meteor;Package.underscore._}(function(){if(e.isServer)var n=Npm.require("crypto");var i=function(){function t(){var t=4022871197,e=function(e){e=e.toString();for(var n=0;n<e.length;n++){t+=e.charCodeAt(n);var i=.02519603282416938*t;t=i>>>0,i-=t,i*=t,t=i>>>0,i-=t,t+=4294967296*i}return 2.3283064365386963e-10*(t>>>0)};return e.version="Mash 0.9",e}return function(e){var n=0,i=0,r=0,o=1;0==e.length&&(e=[+new Date]);var a=t();n=a(" "),i=a(" "),r=a(" ");for(var s=0;s<e.length;s++)n-=a(e[s]),0>n&&(n+=1),i-=a(e[s]),0>i&&(i+=1),r-=a(e[s]),0>r&&(r+=1);a=null;var l=function(){var t=2091639*n+2.3283064365386963e-10*o;return n=i,i=r,r=t-(o=0|t)};return l.uint32=function(){return 4294967296*l()},l.fract53=function(){return l()+1.1102230246251565e-16*(2097152*l()|0)},l.version="Alea 0.9",l.args=e,l}(Array.prototype.slice.call(arguments))},r="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz",o="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789-_",a=function(t){var e=this;void 0!==t&&(e.alea=i.apply(null,t))};a.prototype.fraction=function(){var t=this;if(t.alea)return t.alea();if(n){var e=parseInt(t.hexString(8),16);return 2.3283064365386963e-10*e}if("undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues){var i=new Uint32Array(1);return window.crypto.getRandomValues(i),2.3283064365386963e-10*i[0]}throw new Error("No random generator available")},a.prototype.hexString=function(t){var e=this;if(n&&!e.alea){var i,r=Math.ceil(t/2);try{i=n.randomBytes(r)}catch(o){i=n.pseudoRandomBytes(r)}var a=i.toString("hex");return a.substring(0,t)}for(var s=[],l=0;t>l;++l)s.push(e.choice("0123456789abcdef"));return s.join("")},a.prototype._randomString=function(t,e){for(var n=this,i=[],r=0;t>r;r++)i[r]=n.choice(e);return i.join("")},a.prototype.id=function(t){var e=this;return void 0===t&&(t=17),e._randomString(t,r)},a.prototype.secret=function(t){var e=this;return void 0===t&&(t=43),e._randomString(t,o)},a.prototype.choice=function(t){var e=Math.floor(this.fraction()*t.length);return"string"==typeof t?t.substr(e,1):t[e]};var s="undefined"!=typeof window&&window.innerHeight||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientHeight||"undefined"!=typeof document&&document.body&&document.body.clientHeight||1,l="undefined"!=typeof window&&window.innerWidth||"undefined"!=typeof document&&document.documentElement&&document.documentElement.clientWidth||"undefined"!=typeof document&&document.body&&document.body.clientWidth||1,u="undefined"!=typeof navigator&&navigator.userAgent||"";t=n||"undefined"!=typeof window&&window.crypto&&window.crypto.getRandomValues?new a:new a([new Date,s,l,u,Math.random()]),t.createWithSeeds=function(){if(0===arguments.length)throw new Error("No seeds were provided");return new a(arguments)}}).call(this),function(){e.uuid=function(){for(var e="0123456789abcdef",n=[],i=0;36>i;i++)n[i]=t.choice(e);n[14]="4",n[19]=e.substr(3&parseInt(n[19],16)|8,1),n[8]=n[13]=n[18]=n[23]="-";var r=n.join("");return r}}.call(this),"undefined"==typeof Package&&(Package={}),Package.random={Random:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._),n=Package.json.JSON,i=Package.ejson.EJSON;(function(){t=function(t,e){var i=this;i._map={},i._idStringify=t||n.stringify,i._idParse=e||n.parse},e.extend(t.prototype,{get:function(t){var e=this,n=e._idStringify(t);return e._map[n]},set:function(t,e){var n=this,i=n._idStringify(t);n._map[i]=e},remove:function(t){var e=this,n=e._idStringify(t);delete e._map[n]},has:function(t){var n=this,i=n._idStringify(t);return e.has(n._map,i)},empty:function(){var t=this;return e.isEmpty(t._map)},clear:function(){var t=this;t._map={}},forEach:function(t){for(var n=this,i=e.keys(n._map),r=0;r<i.length;r++){var o=t.call(null,n._map[i[r]],n._idParse(i[r]));if(o===!1)return}},size:function(){var t=this;return e.size(t._map)},setDefault:function(t,n){var i=this,r=i._idStringify(t);return e.has(i._map,r)?i._map[r]:(i._map[r]=n,n)},clone:function(){var e=this,n=new t(e._idStringify,e._idParse);return e.forEach(function(t,e){n.set(e,i.clone(t))}),n}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["id-map"]={IdMap:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._);(function(){var n=function(t,e,n,i){return{key:t,value:e,next:n,prev:i}};t=function(){var t=this;t._dict={},t._first=null,t._last=null,t._size=0;var n=e.toArray(arguments);t._stringify=function(t){return t},"function"==typeof n[0]&&(t._stringify=n.shift()),e.each(n,function(e){t.putBefore(e[0],e[1],null)})},e.extend(t.prototype,{_k:function(t){return" "+this._stringify(t)},empty:function(){var t=this;return!t._first},size:function(){var t=this;return t._size},_linkEltIn:function(t){var e=this;t.next?(t.prev=t.next.prev,t.next.prev=t,t.prev&&(t.prev.next=t)):(t.prev=e._last,e._last&&(e._last.next=t),e._last=t),(null===e._first||e._first===t.next)&&(e._first=t)},_linkEltOut:function(t){var e=this;t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t===e._last&&(e._last=t.prev),t===e._first&&(e._first=t.next)},putBefore:function(t,e,i){var r=this;if(r._dict[r._k(t)])throw new Error("Item "+t+" already present in OrderedDict");var o=i?n(t,e,r._dict[r._k(i)]):n(t,e,null);if(void 0===o.next)throw new Error("could not find item to put this one before");r._linkEltIn(o),r._dict[r._k(t)]=o,r._size++},append:function(t,e){var n=this;n.putBefore(t,e,null)},remove:function(t){var e=this,n=e._dict[e._k(t)];if(void 0===n)throw new Error("Item "+t+" not present in OrderedDict");return e._linkEltOut(n),e._size--,delete e._dict[e._k(t)],n.value},get:function(t){var e=this;return e.has(t)?e._dict[e._k(t)].value:void 0},has:function(t){var n=this;return e.has(n._dict,n._k(t))},forEach:function(e){for(var n=this,i=0,r=n._first;null!==r;){var o=e(r.value,r.key,i);if(o===t.BREAK)return;r=r.next,i++}},first:function(){var t=this;return t.empty()?void 0:t._first.key},firstValue:function(){var t=this;return t.empty()?void 0:t._first.value},last:function(){var t=this;return t.empty()?void 0:t._last.key},lastValue:function(){var t=this;return t.empty()?void 0:t._last.value},prev:function(t){var e=this;if(e.has(t)){var n=e._dict[e._k(t)];if(n.prev)return n.prev.key}return null},next:function(t){var e=this;if(e.has(t)){var n=e._dict[e._k(t)];if(n.next)return n.next.key}return null},moveBefore:function(t,e){var n=this,i=n._dict[n._k(t)],r=e?n._dict[n._k(e)]:null;if(void 0===i)throw new Error("Item to move is not present");if(void 0===r)throw new Error("Could not find element to move this one before");r!==i.next&&(n._linkEltOut(i),i.next=r,n._linkEltIn(i))},indexOf:function(e){var n=this,i=null;return n.forEach(function(r,o,a){return n._k(o)===n._k(e)?(i=a,t.BREAK):void 0}),i},_checkRep:function(){var t=this;e.each(t._dict,function(t,e){if(e.next===e)throw new Error("Next is a loop");if(e.prev===e)throw new Error("Prev is a loop")})}}),t.BREAK={"break":!0}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ordered-dict"]={OrderedDict:t}}(),function(){{var t,e;Package.meteor.Meteor}(function(){e={exports:{}}}).call(this),function(){!function(){function t(t){for(var e=[],n=[],i=0;i<t[0].length;i++)e.push(t[0][i][1]),n.push(t[0][i][0]);return e=e.sort(function(t,e){return t-e}),n=n.sort(function(t,e){return t-e}),[[e[0],n[0]],[e[e.length-1],n[n.length-1]]]}function n(t,e,n){for(var i=[[0,0]],r=0;r<n.length;r++){for(var o=0;o<n[r].length;o++)i.push(n[r][o]);i.push([0,0])}for(var a=!1,r=0,o=i.length-1;r<i.length;o=r++)i[r][0]>e!=i[o][0]>e&&t<(i[o][1]-i[r][1])*(e-i[r][0])/(i[o][0]-i[r][0])+i[r][1]&&(a=!a);return a}var i={};"undefined"!=typeof e&&e.exports&&(e.exports=i),i.lineStringsIntersect=function(t,e){for(var n=[],i=0;i<=t.coordinates.length-2;++i)for(var r=0;r<=e.coordinates.length-2;++r){var o={x:t.coordinates[i][1],y:t.coordinates[i][0]},a={x:t.coordinates[i+1][1],y:t.coordinates[i+1][0]},s={x:e.coordinates[r][1],y:e.coordinates[r][0]},l={x:e.coordinates[r+1][1],y:e.coordinates[r+1][0]},u=(l.x-s.x)*(o.y-s.y)-(l.y-s.y)*(o.x-s.x),h=(a.x-o.x)*(o.y-s.y)-(a.y-o.y)*(o.x-s.x),c=(l.y-s.y)*(a.x-o.x)-(l.x-s.x)*(a.y-o.y);if(0!=c){var d=u/c,p=h/c;d>=0&&1>=d&&p>=0&&1>=p&&n.push({type:"Point",coordinates:[o.x+d*(a.x-o.x),o.y+d*(a.y-o.y)]})}}return 0==n.length&&(n=!1),n},i.pointInBoundingBox=function(t,e){return!(t.coordinates[1]<e[0][0]||t.coordinates[1]>e[1][0]||t.coordinates[0]<e[0][1]||t.coordinates[0]>e[1][1])},i.pointInPolygon=function(e,r){for(var o="Polygon"==r.type?[r.coordinates]:r.coordinates,a=!1,s=0;s<o.length;s++)i.pointInBoundingBox(e,t(o[s]))&&(a=!0);if(!a)return!1;for(var l=!1,s=0;s<o.length;s++)n(e.coordinates[1],e.coordinates[0],o[s])&&(l=!0);return l},i.numberToRadius=function(t){return t*Math.PI/180},i.numberToDegree=function(t){return 180*t/Math.PI},i.drawCircle=function(t,e,n){for(var r=[e.coordinates[1],e.coordinates[0]],o=t/1e3/6371,a=[i.numberToRadius(r[0]),i.numberToRadius(r[1])],n=n||15,s=[[r[0],r[1]]],l=0;n>l;l++){var u=2*Math.PI*l/n,h=Math.asin(Math.sin(a[0])*Math.cos(o)+Math.cos(a[0])*Math.sin(o)*Math.cos(u)),c=a[1]+Math.atan2(Math.sin(u)*Math.sin(o)*Math.cos(a[0]),Math.cos(o)-Math.sin(a[0])*Math.sin(h));s[l]=[],s[l][1]=i.numberToDegree(h),s[l][0]=i.numberToDegree(c)}return{type:"Polygon",coordinates:[s]}},i.rectangleCentroid=function(t){var e=t.coordinates[0],n=e[0][0],i=e[0][1],r=e[2][0],o=e[2][1],a=r-n,s=o-i;return{type:"Point",coordinates:[n+a/2,i+s/2]}},i.pointDistance=function(t,e){var n=t.coordinates[0],r=t.coordinates[1],o=e.coordinates[0],a=e.coordinates[1],s=i.numberToRadius(a-r),l=i.numberToRadius(o-n),u=Math.pow(Math.sin(s/2),2)+Math.cos(i.numberToRadius(r))*Math.cos(i.numberToRadius(a))*Math.pow(Math.sin(l/2),2),h=2*Math.atan2(Math.sqrt(u),Math.sqrt(1-u));return 6371*h*1e3},i.geometryWithinRadius=function(t,e,n){if("Point"==t.type)return i.pointDistance(t,e)<=n;if("LineString"==t.type||"Polygon"==t.type){var r,o={};r="Polygon"==t.type?t.coordinates[0]:t.coordinates;for(var a in r)if(o.coordinates=r[a],i.pointDistance(o,e)>n)return!1}return!0},i.area=function(t){for(var e,n,i=0,r=t.coordinates[0],o=r.length-1,a=0;a<r.length;o=a++){var e={x:r[a][1],y:r[a][0]},n={x:r[o][1],y:r[o][0]};i+=e.x*n.y,i-=e.y*n.x}return i/=2},i.centroid=function(t){for(var e,n,r,o=0,a=0,s=t.coordinates[0],l=s.length-1,u=0;u<s.length;l=u++){var n={x:s[u][1],y:s[u][0]},r={x:s[l][1],y:s[l][0]};e=n.x*r.y-r.x*n.y,o+=(n.x+r.x)*e,a+=(n.y+r.y)*e}return e=6*i.area(t),{type:"Point",coordinates:[a/e,o/e]}},i.simplify=function(t,e){e=e||20,t=t.map(function(t){return{lng:t.coordinates[0],lat:t.coordinates[1]}});var n,i,r,o,a,s,l,u,h,c,d,p,f,m,g,y,_,v,b,w=Math.PI/180*.5,x=new Array,T=new Array,M=new Array;if(t.length<3)return t;for(n=t.length,c=360*e/(2*Math.PI*6378137),c*=c,r=0,T[0]=0,M[0]=n-1,i=1;i>0;)if(o=T[i-1],a=M[i-1],i--,a-o>1){for(d=t[a].lng()-t[o].lng(),p=t[a].lat()-t[o].lat(),Math.abs(d)>180&&(d=360-Math.abs(d)),d*=Math.cos(w*(t[a].lat()+t[o].lat())),f=d*d+p*p,s=o+1,l=o,h=-1;a>s;s++)m=t[s].lng()-t[o].lng(),g=t[s].lat()-t[o].lat(),Math.abs(m)>180&&(m=360-Math.abs(m)),m*=Math.cos(w*(t[s].lat()+t[o].lat())),y=m*m+g*g,_=t[s].lng()-t[a].lng(),v=t[s].lat()-t[a].lat(),Math.abs(_)>180&&(_=360-Math.abs(_)),_*=Math.cos(w*(t[s].lat()+t[a].lat())),b=_*_+v*v,u=y>=f+b?b:b>=f+y?y:(m*p-g*d)*(m*p-g*d)/f,u>h&&(l=s,h=u);c>h?(x[r]=o,r++):(i++,T[i-1]=l,M[i-1]=a,i++,T[i-1]=o,M[i-1]=l)}else x[r]=o,r++;x[r]=n-1,r++;for(var k=new Array,s=0;r>s;s++)k.push(t[x[s]]);return k.map(function(t){return{type:"Point",coordinates:[t.lng,t.lat]}})},i.destinationPoint=function(t,e,n){n/=6371,e=i.numberToRadius(e);var r=i.numberToRadius(t.coordinates[0]),o=i.numberToRadius(t.coordinates[1]),a=Math.asin(Math.sin(r)*Math.cos(n)+Math.cos(r)*Math.sin(n)*Math.cos(e)),s=o+Math.atan2(Math.sin(e)*Math.sin(n)*Math.cos(r),Math.cos(n)-Math.sin(r)*Math.sin(a));return s=(s+3*Math.PI)%(2*Math.PI)-Math.PI,{type:"Point",coordinates:[i.numberToDegree(a),i.numberToDegree(s)]}}}()}.call(this),function(){t=e.exports}.call(this),"undefined"==typeof Package&&(Package={}),Package["geojson-utils"]={GeoJSON:t}}(),function(){var t,e,n,i,r,o,a,s,l,u,h,c,d,p,f,m,g=Package.meteor.Meteor,y=Package.underscore._,_=Package.json.JSON,v=Package.ejson.EJSON,b=Package["id-map"].IdMap,w=Package["ordered-dict"].OrderedDict,x=Package.deps.Deps,T=Package.random.Random,M=Package["geojson-utils"].GeoJSON;(function(){t=function(e){var n=this;n.name=e,n._docs=new t._IdMap,n._observeQueue=new g._SynchronousQueue,n.next_qid=1,n.queries={},n._savedOriginals=null,n.paused=!1},e={},n={},t._applyChanges=function(t,e){y.each(e,function(e,n){void 0===e?delete t[n]:t[n]=e})},i=function(t){var e=new Error(t);return e.name="MinimongoError",e},t.prototype.find=function(e,n){return 0===arguments.length&&(e={}),new t.Cursor(this,e,n)},t.Cursor=function(n,i,r){var o=this;r||(r={}),o.collection=n,o.sorter=null,t._selectorIsId(i)?(o._selectorId=i,o.matcher=new e.Matcher(i,o)):(o._selectorId=void 0,o.matcher=new e.Matcher(i,o),(o.matcher.hasGeoQuery()||r.sort)&&(o.sorter=new e.Sorter(r.sort||[],{matcher:o.matcher}))),o.skip=r.skip,o.limit=r.limit,o.fields=r.fields,o.fields&&(o.projectionFn=t._compileProjection(o.fields)),o._transform=t.wrapTransform(r.transform),"undefined"!=typeof x&&(o.reactive=void 0===r.reactive?!0:r.reactive)},t.Cursor.prototype.rewind=function(){},t.prototype.findOne=function(t,e){return 0===arguments.length&&(t={}),e=e||{},e.limit=1,this.find(t,e).fetch()[0]},t.Cursor.prototype.forEach=function(t,e){var n=this,i=n._getRawObjects({ordered:!0});n.reactive&&n._depend({addedBefore:!0,removed:!0,changed:!0,movedBefore:!0}),y.each(i,function(i,r){i=n.projectionFn?n.projectionFn(i):v.clone(i),n._transform&&(i=n._transform(i)),t.call(e,i,r,n)})},t.Cursor.prototype.getTransform=function(){return this._transform},t.Cursor.prototype.map=function(t,e){var n=this,i=[];return n.forEach(function(r,o){i.push(t.call(e,r,o,n))}),i},t.Cursor.prototype.fetch=function(){var t=this,e=[];return t.forEach(function(t){e.push(t)}),e},t.Cursor.prototype.count=function(){var t=this;return t.reactive&&t._depend({added:!0,removed:!0},!0),t._getRawObjects({ordered:!0}).length},t.Cursor.prototype._publishCursor=function(t){var e=this;if(!e.collection.name)throw new Error("Can't publish a cursor from a collection without a name.");var n=e.collection.name;return g.Collection._publishCursor(e,t,n)},t.Cursor.prototype._getCollectionName=function(){var t=this;return t.collection.name},t._observeChangesCallbacksAreOrdered=function(t){if(t.added&&t.addedBefore)throw new Error("Please specify only one of added() and addedBefore()");return!(!t.addedBefore&&!t.movedBefore)},t._observeCallbacksAreOrdered=function(t){if(t.addedAt&&t.added)throw new Error("Please specify only one of added() and addedAt()");if(t.changedAt&&t.changed)throw new Error("Please specify only one of changed() and changedAt()");if(t.removed&&t.removedAt)throw new Error("Please specify only one of removed() and removedAt()");return!!(t.addedAt||t.movedTo||t.changedAt||t.removedAt)},t.ObserveHandle=function(){},y.extend(t.Cursor.prototype,{observe:function(e){var n=this;return t._observeFromObserveChanges(n,e)},observeChanges:function(e){var n=this,i=t._observeChangesCallbacksAreOrdered(e);if(!e._allow_unordered&&!i&&(n.skip||n.limit))throw new Error("must use ordered observe with skip or limit");if(n.fields&&(0===n.fields._id||n.fields._id===!1))throw Error("You may not observe a cursor with {fields: {_id: 0}}");var r,o={matcher:n.matcher,sorter:i&&n.sorter,distances:n.matcher.hasGeoQuery()&&i&&new t._IdMap,resultsSnapshot:null,ordered:i,cursor:n,projectionFn:n.projectionFn};n.reactive&&(r=n.collection.next_qid++,n.collection.queries[r]=o),o.results=n._getRawObjects({ordered:i,distances:o.distances}),n.collection.paused&&(o.resultsSnapshot=i?[]:new t._IdMap);var a=function(t,e,i){return t?function(){var r=this,o=arguments;n.collection.paused||void 0!==e&&n.projectionFn&&(o[e]=n.projectionFn(o[e]),i&&y.isEmpty(o[e]))||n.collection._observeQueue.queueTask(function(){t.apply(r,o)})}:function(){}};if(o.added=a(e.added,1),o.changed=a(e.changed,1,!0),o.removed=a(e.removed),i&&(o.addedBefore=a(e.addedBefore,1),o.movedBefore=a(e.movedBefore)),!e._suppress_initial&&!n.collection.paused){var s=i?y.bind(y.each,null,o.results):y.bind(o.results.forEach,o.results);s(function(t){var e=v.clone(t);delete e._id,i&&o.addedBefore(t._id,e,null),o.added(t._id,e)})}var l=new t.ObserveHandle;return y.extend(l,{collection:n.collection,stop:function(){n.reactive&&delete n.collection.queries[r]}}),n.reactive&&x.active&&x.onInvalidate(function(){l.stop()}),n.collection._observeQueue.drain(),l}}),t.Cursor.prototype._getRawObjects=function(e){var n=this;e=e||{};var i=e.ordered?[]:new t._IdMap;if(void 0!==n._selectorId){if(n.skip)return i;var r=n.collection._docs.get(n._selectorId);return r&&(e.ordered?i.push(r):i.set(n._selectorId,r)),i}var o;if(n.matcher.hasGeoQuery()&&e.ordered&&(e.distances?(o=e.distances,o.clear()):o=new t._IdMap),n.collection._docs.forEach(function(t,r){var a=n.matcher.documentMatches(t);return a.result&&(e.ordered?(i.push(t),o&&void 0!==a.distance&&o.set(r,a.distance)):i.set(r,t)),!n.limit||n.skip||n.sorter||i.length!==n.limit?!0:!1}),!e.ordered)return i;if(n.sorter){var a=n.sorter.getComparator({distances:o});i.sort(a)}var s=n.skip||0,l=n.limit?n.limit+s:i.length;return i.slice(s,l)},t.Cursor.prototype._depend=function(t,e){var n=this;if(x.active){var i=new x.Dependency;i.depend();var r=y.bind(i.changed,i),o={_suppress_initial:!0,_allow_unordered:e};y.each(["added","changed","removed","addedBefore","movedBefore"],function(e){t[e]&&(o[e]=r)}),n.observeChanges(o)}},t.prototype.insert=function(e,n){var r=this;e=v.clone(e),y.has(e,"_id")||(e._id=t._useOID?new t._ObjectID:T.id());var o=e._id;if(r._docs.has(o))throw i("Duplicate _id '"+o+"'");r._saveOriginal(o,void 0),r._docs.set(o,e);var a=[];for(var s in r.queries){var l=r.queries[s],u=l.matcher.documentMatches(e);u.result&&(l.distances&&void 0!==u.distance&&l.distances.set(o,u.distance),l.cursor.skip||l.cursor.limit?a.push(s):t._insertInResults(l,e))}return y.each(a,function(e){r.queries[e]&&t._recomputeResults(r.queries[e])}),r._observeQueue.drain(),n&&g.defer(function(){n(null,o)}),o},t.prototype._eachPossiblyMatchingDoc=function(e,n){var i=this,r=t._idsMatchedBySelector(e);if(r)for(var o=0;o<r.length;++o){var a=r[o],s=i._docs.get(a);if(s){var l=n(s,a);if(l===!1)break}}else i._docs.forEach(n)},t.prototype.remove=function(n,i){var r=this;if(r.paused&&!r._savedOriginals&&v.equals(n,{})){var o=r._docs.size();return r._docs.clear(),y.each(r.queries,function(t){t.ordered?t.results=[]:t.results.clear()}),i&&g.defer(function(){i(null,o)}),o}var a=new e.Matcher(n,r),s=[];r._eachPossiblyMatchingDoc(n,function(t,e){a.documentMatches(t).result&&s.push(e)});for(var l=[],u=[],h=0;h<s.length;h++){var c=s[h],d=r._docs.get(c);y.each(r.queries,function(t,e){t.matcher.documentMatches(d).result&&(t.cursor.skip||t.cursor.limit?l.push(e):u.push({qid:e,doc:d}))}),r._saveOriginal(c,d),r._docs.remove(c)}return y.each(u,function(e){var n=r.queries[e.qid];n&&(n.distances&&n.distances.remove(e.doc._id),t._removeFromResults(n,e.doc))}),y.each(l,function(e){var n=r.queries[e];n&&t._recomputeResults(n)}),r._observeQueue.drain(),o=s.length,i&&g.defer(function(){i(null,o)}),o},t.prototype.update=function(n,i,r,o){var a=this;!o&&r instanceof Function&&(o=r,r=null),r||(r={});var s=new e.Matcher(n,a),l={};y.each(a.queries,function(t,e){!t.cursor.skip&&!t.cursor.limit||t.paused||(l[e]=v.clone(t.results))});var u={},h=0;a._eachPossiblyMatchingDoc(n,function(t,e){var n=s.documentMatches(t);return n.result&&(a._saveOriginal(e,t),a._modifyAndNotify(t,i,u,n.arrayIndices),++h,!r.multi)?!1:!0}),y.each(u,function(e,n){var i=a.queries[n];i&&t._recomputeResults(i,l[n])}),a._observeQueue.drain();var c;if(0===h&&r.upsert){var d=t._removeDollarOperators(n);t._modify(d,i,{isInsert:!0}),!d._id&&r.insertedId&&(d._id=r.insertedId),c=a.insert(d),h=1}var p;return r._returnObject?(p={numberAffected:h},void 0!==c&&(p.insertedId=c)):p=h,o&&g.defer(function(){o(null,p)}),p},t.prototype.upsert=function(t,e,n,i){var r=this;return i||"function"!=typeof n||(i=n,n={}),r.update(t,e,y.extend({},n,{upsert:!0,_returnObject:!0}),i)},t.prototype._modifyAndNotify=function(e,n,i,r){var o=this,a={};for(var s in o.queries){var l=o.queries[s];a[s]=l.ordered?l.matcher.documentMatches(e).result:l.results.has(e._id)}var u=v.clone(e);t._modify(e,n,{arrayIndices:r});for(s in o.queries){l=o.queries[s];var h=a[s],c=l.matcher.documentMatches(e),d=c.result;d&&l.distances&&void 0!==c.distance&&l.distances.set(e._id,c.distance),l.cursor.skip||l.cursor.limit?(h||d)&&(i[s]=!0):h&&!d?t._removeFromResults(l,e):!h&&d?t._insertInResults(l,e):h&&d&&t._updateInResults(l,e,u)}},t._insertInResults=function(e,n){var i=v.clone(n);if(delete i._id,e.ordered){if(e.sorter){var r=t._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,n),o=e.results[r+1];o=o?o._id:null,e.addedBefore(n._id,i,o)}else e.addedBefore(n._id,i,null),e.results.push(n);e.added(n._id,i)}else e.added(n._id,i),e.results.set(n._id,n)},t._removeFromResults=function(e,n){if(e.ordered){var i=t._findInOrderedResults(e,n);e.removed(n._id),e.results.splice(i,1)}else{var r=n._id;e.removed(n._id),e.results.remove(r)}},t._updateInResults=function(e,n,i){if(!v.equals(n._id,i._id))throw new Error("Can't change a doc's _id while updating");var r=t._makeChangedFields(n,i);if(!e.ordered)return void(y.isEmpty(r)||(e.changed(n._id,r),e.results.set(n._id,n)));var o=t._findInOrderedResults(e,n);if(y.isEmpty(r)||e.changed(n._id,r),e.sorter){e.results.splice(o,1);var a=t._insertInSortedList(e.sorter.getComparator({distances:e.distances}),e.results,n);if(o!==a){var s=e.results[a+1];s=s?s._id:null,e.movedBefore&&e.movedBefore(n._id,s)}}},t._recomputeResults=function(e,n){n||(n=e.results),e.distances&&e.distances.clear(),e.results=e.cursor._getRawObjects({ordered:e.ordered,distances:e.distances}),e.paused||t._diffQueryChanges(e.ordered,n,e.results,e)},t._findInOrderedResults=function(t,e){if(!t.ordered)throw new Error("Can't call _findInOrderedResults on unordered query");for(var n=0;n<t.results.length;n++)if(t.results[n]===e)return n;throw Error("object missing from query")},t._binarySearch=function(t,e,n){for(var i=0,r=e.length;r>0;){var o=Math.floor(r/2);t(n,e[i+o])>=0?(i+=o+1,r-=o+1):r=o}return i},t._insertInSortedList=function(e,n,i){if(0===n.length)return n.push(i),0;var r=t._binarySearch(e,n,i);return n.splice(r,0,i),r},t.prototype.saveOriginals=function(){var e=this;if(e._savedOriginals)throw new Error("Called saveOriginals twice without retrieveOriginals");e._savedOriginals=new t._IdMap},t.prototype.retrieveOriginals=function(){var t=this;if(!t._savedOriginals)throw new Error("Called retrieveOriginals without saveOriginals");var e=t._savedOriginals;return t._savedOriginals=null,e},t.prototype._saveOriginal=function(t,e){var n=this;n._savedOriginals&&(n._savedOriginals.has(t)||n._savedOriginals.set(t,v.clone(e)))},t.prototype.pauseObservers=function(){if(!this.paused){this.paused=!0;for(var t in this.queries){var e=this.queries[t];e.resultsSnapshot=v.clone(e.results)}}},t.prototype.resumeObservers=function(){var e=this;if(this.paused){this.paused=!1;for(var n in this.queries){var i=e.queries[n];t._diffQueryChanges(i.ordered,i.resultsSnapshot,i.results,i),i.resultsSnapshot=null}e._observeQueue.drain()}},t._idStringify=function(e){if(e instanceof t._ObjectID)return e.valueOf();if("string"==typeof e)return""===e?e:"-"===e.substr(0,1)||"~"===e.substr(0,1)||t._looksLikeObjectID(e)||"{"===e.substr(0,1)?"-"+e:e;if(void 0===e)return"-";if("object"==typeof e&&null!==e)throw new Error("Meteor does not currently support objects other than ObjectID as ids");return"~"+_.stringify(e)},t._idParse=function(e){return""===e?e:"-"===e?void 0:"-"===e.substr(0,1)?e.substr(1):"~"===e.substr(0,1)?_.parse(e.substr(1)):t._looksLikeObjectID(e)?new t._ObjectID(e):e},t._makeChangedFields=function(e,n){var i={};return t._diffObjects(n,e,{leftOnly:function(t){i[t]=void 0},rightOnly:function(t,e){i[t]=e},both:function(t,e,n){v.equals(e,n)||(i[t]=n)}}),i}}).call(this),function(){t.wrapTransform=function(t){return t?function(e){if(!y.has(e,"_id"))throw new Error("can only transform documents with _id");var n=e._id,i=x.nonreactive(function(){return t(e)});if(!o(i))throw new Error("transform must return object");if(y.has(i,"_id")){if(!v.equals(i._id,n))throw new Error("transformed document can't have different _id")}else i._id=n;return i}:null}}.call(this),function(){r=function(t){return y.isArray(t)&&!v.isBinary(t)},o=t._isPlainObject=function(e){return e&&3===t._f._type(e)},a=function(t){return r(t)||o(t)},s=function(t,e){if(!o(t))return!1;var n=void 0;return y.each(t,function(i,r){var o="$"===r.substr(0,1);if(void 0===n)n=o;else if(n!==o){if(!e)throw new Error("Inconsistent operator: "+_.stringify(t));n=!1}}),!!n},l=function(t){return/^[0-9]+$/.test(t)}}.call(this),function(){e.Matcher=function(t){var e=this;e._paths={},e._hasGeoQuery=!1,e._hasWhere=!1,e._isSimple=!0,e._matchingDocument=void 0,e._selector=null,e._docMatcher=e._compileSelector(t)},y.extend(e.Matcher.prototype,{documentMatches:function(t){if(!t||"object"!=typeof t)throw Error("documentMatches needs a document");return this._docMatcher(t)},hasGeoQuery:function(){return this._hasGeoQuery
},hasWhere:function(){return this._hasWhere},isSimple:function(){return this._isSimple},_compileSelector:function(e){var n=this;if(e instanceof Function)return n._isSimple=!1,n._selector=e,n._recordPathUsed(""),function(t){return{result:!!e.call(t)}};if(t._selectorIsId(e))return n._selector={_id:e},n._recordPathUsed("_id"),function(t){return{result:v.equals(t._id,e)}};if(!e||"_id"in e&&!e._id)return n._isSimple=!1,C;if("boolean"==typeof e||r(e)||v.isBinary(e))throw new Error("Invalid selector: "+e);return n._selector=v.clone(e),i(e,n,{isRoot:!0})},_recordPathUsed:function(t){this._paths[t]=!0},_getPaths:function(){return y.keys(this._paths)}});var i=function(t,e,n){n=n||{};var i=[];return y.each(t,function(t,r){if("$"===r.substr(0,1)){if(!y.has(b,r))throw new Error("Unrecognized logical operator: "+r);e._isSimple=!1,i.push(b[r](t,e,n.inElemMatch))}else{n.inElemMatch||e._recordPathUsed(r);var o=d(r),a=f(t,e,n.isRoot);i.push(function(t){var e=o(t);return a(e)})}}),D(i)},f=function(t,e,n){return t instanceof RegExp?(e._isSimple=!1,m(u(t))):s(t)?g(t,e,n):m(h(t))},m=function(t,e){return e=e||{},function(n){var i=n;e.dontExpandLeafArrays||(i=p(n,e.dontIncludeLeafArrays));var r={};return r.result=y.any(i,function(e){var n=t(e.value);return"number"==typeof n&&(e.arrayIndices||(e.arrayIndices=[n]),n=!0),n&&e.arrayIndices&&(r.arrayIndices=e.arrayIndices),n}),r}};u=function(t){return function(e){return e instanceof RegExp?y.isEqual(e,t):"string"!=typeof e?!1:t.test(e)}},h=function(e){if(s(e))throw Error("Can't create equalityValueSelector for operator object");return null==e?function(t){return null==t}:function(n){return t._f._equal(e,n)}};var g=function(t,e,n){var i=[];return y.each(t,function(r,o){var a=y.contains(["$lt","$lte","$gt","$gte"],o)&&y.isNumber(r),s="$ne"===o&&!y.isObject(r),l=y.contains(["$in","$nin"],o)&&y.isArray(r)&&!y.any(r,y.isObject);if("$eq"===o||a||l||s||(e._isSimple=!1),y.has(x,o))i.push(x[o](r,t,e,n));else{if(!y.has(c,o))throw new Error("Unrecognized operator: "+o);var u=c[o];i.push(m(u.compileElementSelector(r,t,e),u))}}),A(i)},_=function(t,e,n){if(!r(t)||y.isEmpty(t))throw Error("$and/$or/$nor must be nonempty array");return y.map(t,function(t){if(!o(t))throw Error("$or/$and/$nor entries need to be full objects");return i(t,e,{inElemMatch:n})})},b={$and:function(t,e,n){var i=_(t,e,n);return D(i)},$or:function(t,e,n){var i=_(t,e,n);return 1===i.length?i[0]:function(t){var e=y.any(i,function(e){return e(t).result});return{result:e}}},$nor:function(t,e,n){var i=_(t,e,n);return function(t){var e=y.all(i,function(e){return!e(t).result});return{result:e}}},$where:function(t,e){return e._recordPathUsed(""),e._hasWhere=!0,t instanceof Function||(t=Function("obj","return "+t)),function(e){return{result:t.call(e,e)}}},$comment:function(){return function(){return{result:!0}}}},w=function(t){return function(e){var n=t(e);return{result:!n.result}}},x={$not:function(t,e,n){return w(f(t,n))},$ne:function(t){return w(m(h(t)))},$nin:function(t){return w(m(c.$in.compileElementSelector(t)))},$exists:function(t){var e=m(function(t){return void 0!==t});return t?e:w(e)},$options:function(t,e){if(!y.has(e,"$regex"))throw Error("$options needs a $regex");return L},$maxDistance:function(t,e){if(!e.$near)throw Error("$maxDistance needs a $near");return L},$all:function(t,e,n){if(!r(t))throw Error("$all requires array");if(y.isEmpty(t))return C;var i=[];return y.each(t,function(t){if(s(t))throw Error("no $ expressions in $all");i.push(f(t,n))}),A(i)},$near:function(t,e,n,i){if(!i)throw Error("$near can't be inside another $ operator");n._hasGeoQuery=!0;var a,s,l;if(o(t)&&y.has(t,"$geometry"))a=t.$maxDistance,s=t.$geometry,l=function(t){return t&&t.type?"Point"===t.type?M.pointDistance(s,t):M.geometryWithinRadius(t,s,a)?0:a+1:null};else{if(a=e.$maxDistance,!r(t)&&!o(t))throw Error("$near argument must be coordinate pair or GeoJSON");s=k(t),l=function(t){return r(t)||o(t)?T(s,t):null}}return function(t){t=p(t);var e={result:!1};return y.each(t,function(t){var n=l(t.value);null===n||n>a||void 0!==e.distance&&e.distance<=n||(e.result=!0,e.distance=n,t.arrayIndices?e.arrayIndices=t.arrayIndices:delete e.arrayIndices)}),e}}},T=function(t,e){t=k(t),e=k(e);var n=t[0]-e[0],i=t[1]-e[1];return y.isNaN(n)||y.isNaN(i)?null:Math.sqrt(n*n+i*i)},k=function(t){return y.map(t,y.identity)},S=function(e){return{compileElementSelector:function(n){if(r(n))return function(){return!1};void 0===n&&(n=null);var i=t._f._type(n);return function(r){return void 0===r&&(r=null),t._f._type(r)!==i?!1:e(t._f._cmp(r,n))}}}};c={$lt:S(function(t){return 0>t}),$gt:S(function(t){return t>0}),$lte:S(function(t){return 0>=t}),$gte:S(function(t){return t>=0}),$mod:{compileElementSelector:function(t){if(!r(t)||2!==t.length||"number"!=typeof t[0]||"number"!=typeof t[1])throw Error("argument to $mod must be an array of two numbers");var e=t[0],n=t[1];return function(t){return"number"==typeof t&&t%e===n}}},$in:{compileElementSelector:function(t){if(!r(t))throw Error("$in needs an array");var e=[];return y.each(t,function(t){if(t instanceof RegExp)e.push(u(t));else{if(s(t))throw Error("cannot nest $ under $in");e.push(h(t))}}),function(t){return void 0===t&&(t=null),y.any(e,function(e){return e(t)})}}},$size:{dontExpandLeafArrays:!0,compileElementSelector:function(t){if("string"==typeof t)t=0;else if("number"!=typeof t)throw Error("$size needs a number");return function(e){return r(e)&&e.length===t}}},$type:{dontIncludeLeafArrays:!0,compileElementSelector:function(e){if("number"!=typeof e)throw Error("$type needs a number");return function(n){return void 0!==n&&t._f._type(n)===e}}},$regex:{compileElementSelector:function(t,e){if(!("string"==typeof t||t instanceof RegExp))throw Error("$regex has to be a string or RegExp");var n;if(void 0!==e.$options){if(/[^gim]/.test(e.$options))throw new Error("Only the i, m, and g regexp options are supported");var i=t instanceof RegExp?t.source:t;n=new RegExp(i,e.$options)}else n=t instanceof RegExp?t:new RegExp(t);return u(n)}},$elemMatch:{dontExpandLeafArrays:!0,compileElementSelector:function(t,e,n){if(!o(t))throw Error("$elemMatch need an object");var a,l;return s(t,!0)?(a=f(t,n),l=!1):(a=i(t,n,{inElemMatch:!0}),l=!0),function(t){if(!r(t))return!1;for(var e=0;e<t.length;++e){var n,i=t[e];if(l){if(!o(i)&&!r(i))return!1;n=i}else n=[{value:i,dontIterate:!0}];if(a(n).result)return e}return!1}}}},d=function(t){var e,n=t.split("."),i=n.length?n[0]:"",s=l(i);n.length>1&&(e=d(n.slice(1).join(".")));var u=function(t){return t.dontIterate||delete t.dontIterate,t.arrayIndices&&!t.arrayIndices.length&&delete t.arrayIndices,t};return function(t,n){if(n||(n=[]),r(t)){if(!(s&&i<t.length))return[];n=n.concat(+i,"x")}var l=t[i];if(!e)return[u({value:l,dontIterate:r(t)&&r(l),arrayIndices:n})];if(!a(l))return r(t)?[]:[u({value:void 0,arrayIndices:n})];var h=[],c=function(t){Array.prototype.push.apply(h,t)};return c(e(l,n)),r(l)&&y.each(l,function(t,i){o(t)&&c(e(t,n.concat(i)))}),h}},n.makeLookupFunction=d,p=function(t,e){var n=[];return y.each(t,function(t){var i=r(t.value);e&&i&&!t.dontIterate||n.push({value:t.value,arrayIndices:t.arrayIndices}),i&&!t.dontIterate&&y.each(t.value,function(e,i){n.push({value:e,arrayIndices:(t.arrayIndices||[]).concat(i)})})}),n};var C=function(){return{result:!1}},L=function(){return{result:!0}},P=function(t){return 0===t.length?L:1===t.length?t[0]:function(e){var n={};return n.result=y.all(t,function(t){var i=t(e);return i.result&&void 0!==i.distance&&void 0===n.distance&&(n.distance=i.distance),i.result&&i.arrayIndices&&(n.arrayIndices=i.arrayIndices),i.result}),n.result||(delete n.distance,delete n.arrayIndices),n}},D=P,A=P;t._f={_type:function(e){return"number"==typeof e?1:"string"==typeof e?2:"boolean"==typeof e?8:r(e)?4:null===e?10:e instanceof RegExp?11:"function"==typeof e?13:e instanceof Date?9:v.isBinary(e)?5:e instanceof t._ObjectID?7:3},_equal:function(t,e){return v.equals(t,e,{keyOrderSensitive:!0})},_typeorder:function(t){return[-1,1,2,3,4,5,-1,6,7,8,0,9,-1,100,2,100,1,8,1][t]},_cmp:function(e,n){if(void 0===e)return void 0===n?0:-1;if(void 0===n)return 1;var i=t._f._type(e),r=t._f._type(n),o=t._f._typeorder(i),a=t._f._typeorder(r);if(o!==a)return a>o?-1:1;if(i!==r)throw Error("Missing type coercion logic in _cmp");if(7===i&&(i=r=2,e=e.toHexString(),n=n.toHexString()),9===i&&(i=r=1,e=e.getTime(),n=n.getTime()),1===i)return e-n;if(2===r)return n>e?-1:e===n?0:1;if(3===i){var s=function(t){var e=[];for(var n in t)e.push(n),e.push(t[n]);return e};return t._f._cmp(s(e),s(n))}if(4===i)for(var l=0;;l++){if(l===e.length)return l===n.length?0:-1;if(l===n.length)return 1;var u=t._f._cmp(e[l],n[l]);if(0!==u)return u}if(5===i){if(e.length!==n.length)return e.length-n.length;for(l=0;l<e.length;l++){if(e[l]<n[l])return-1;if(e[l]>n[l])return 1}return 0}if(8===i)return e?n?0:1:n?-1:0;if(10===i)return 0;if(11===i)throw Error("Sorting not supported on regular expression");if(13===i)throw Error("Sorting not supported on Javascript code");throw Error("Unknown type to sort")}},t._removeDollarOperators=function(t){var e={};for(var n in t)"$"!==n.substr(0,1)&&(e[n]=t[n]);return e}}.call(this),function(){e.Sorter=function(t,i){var r=this;i=i||{},r._sortSpecParts=[];var o=function(t,e){if(!t)throw Error("sort keys must be non-empty");if("$"===t.charAt(0))throw Error("unsupported sort key: "+t);r._sortSpecParts.push({path:t,lookup:d(t),ascending:e})};if(t instanceof Array)for(var a=0;a<t.length;a++)"string"==typeof t[a]?o(t[a],!0):o(t[a][0],"desc"!==t[a][1]);else{if("object"!=typeof t)throw Error("Bad sort specification: "+_.stringify(t));y.each(t,function(t,e){o(e,t>=0)})}if(r.affectedByModifier){var s={};y.each(r._sortSpecParts,function(t){s[t.path]=1}),r._selectorForAffectedByModifier=new e.Matcher(s)}r._keyComparator=n(y.map(r._sortSpecParts,function(t,e){return r._keyFieldComparator(e)})),r._keyFilter=null,i.matcher&&r._useWithMatcher(i.matcher)},y.extend(e.Sorter.prototype,{getComparator:function(t){var e=this;if(!t||!t.distances)return e._getBaseComparator();var i=t.distances;return n([e._getBaseComparator(),function(t,e){if(!i.has(t._id))throw Error("Missing distance for "+t._id);if(!i.has(e._id))throw Error("Missing distance for "+e._id);return i.get(t._id)-i.get(e._id)}])},_getPaths:function(){var t=this;return y.pluck(t._sortSpecParts,"path")},_getMinKeyFromDoc:function(t){var e=this,n=null;if(e._generateKeysFromDoc(t,function(t){return e._keyCompatibleWithSelector(t)?null===n?void(n=t):void(e._compareKeys(t,n)<0&&(n=t)):void 0}),null===n)throw Error("sort selector found no keys in doc?");return n},_keyCompatibleWithSelector:function(t){var e=this;return!e._keyFilter||e._keyFilter(t)},_generateKeysFromDoc:function(t,e){var n=this;if(0===n._sortSpecParts.length)throw new Error("can't generate keys without a spec");var i=[],r=function(t){return t.join(",")+","},o=null;if(y.each(n._sortSpecParts,function(e,n){var a=p(e.lookup(t),!0);a.length||(a=[{value:null}]);var s=!1;if(i[n]={},y.each(a,function(t){if(!t.arrayIndices){if(a.length>1)throw Error("multiple branches but no array used?");return void(i[n][""]=t.value)}s=!0;var e=r(t.arrayIndices);if(y.has(i[n],e))throw Error("duplicate path: "+e);if(i[n][e]=t.value,o&&!y.has(o,e))throw Error("cannot index parallel arrays")}),o){if(!y.has(i[n],"")&&y.size(o)!==y.size(i[n]))throw Error("cannot index parallel arrays!")}else s&&(o={},y.each(i[n],function(t,e){o[e]=!0}))}),!o){var a=y.map(i,function(t){if(!y.has(t,""))throw Error("no value in sole key case?");return t[""]});return void e(a)}y.each(o,function(t,n){var r=y.map(i,function(t){if(y.has(t,""))return t[""];if(!y.has(t,n))throw Error("missing path?");return t[n]});e(r)})},_compareKeys:function(t,e){var n=this;if(t.length!==n._sortSpecParts.length||e.length!==n._sortSpecParts.length)throw Error("Key has wrong length");return n._keyComparator(t,e)},_keyFieldComparator:function(e){var n=this,i=!n._sortSpecParts[e].ascending;return function(n,r){var o=t._f._cmp(n[e],r[e]);return i&&(o=-o),o}},_getBaseComparator:function(){var t=this;return t._sortSpecParts.length?function(e,n){var i=t._getMinKeyFromDoc(e),r=t._getMinKeyFromDoc(n);return t._compareKeys(i,r)}:function(){return 0}},_useWithMatcher:function(t){var e=this;if(e._keyFilter)throw Error("called _useWithMatcher twice?");if(!y.isEmpty(e._sortSpecParts)){var n=t._selector;if(!(n instanceof Function)){var i={};y.each(e._sortSpecParts,function(t){i[t.path]=[]}),y.each(n,function(t,e){var n=i[e];if(n){if(t instanceof RegExp){if(t.ignoreCase||t.multiline)return;return void n.push(u(t))}return s(t)?void y.each(t,function(e,i){y.contains(["$lt","$lte","$gt","$gte"],i)&&n.push(c[i].compileElementSelector(e)),"$regex"!==i||t.$options||n.push(c.$regex.compileElementSelector(e,t))}):void n.push(h(t))}}),y.isEmpty(i[e._sortSpecParts[0].path])||(e._keyFilter=function(t){return y.all(e._sortSpecParts,function(e,n){return y.all(i[e.path],function(e){return e(t[n])})})})}}}});var n=function(t){return function(e,n){for(var i=0;i<t.length;++i){var r=t[i](e,n);if(0!==r)return r}return 0}}}.call(this),function(){t._compileProjection=function(e){t._checkSupportedProjection(e);var n=y.isUndefined(e._id)?!0:e._id,i=f(e),r=function(t,e){if(y.isArray(t))return y.map(t,function(t){return r(t,e)});var n=i.including?{}:v.clone(t);return y.each(e,function(e,o){y.has(t,o)&&(y.isObject(e)?y.isObject(t[o])&&(n[o]=r(t[o],e)):i.including?n[o]=v.clone(t[o]):delete n[o])}),n};return function(t){var e=r(t,i.tree);return n&&y.has(t,"_id")&&(e._id=t._id),!n&&y.has(e,"_id")&&delete e._id,e}},f=function(t){var e=y.keys(t).sort();e.length>0&&(1!==e.length||"_id"!==e[0])&&(e=y.reject(e,function(t){return"_id"===t}));var n=null;y.each(e,function(e){var r=!!t[e];if(null===n&&(n=r),n!==r)throw i("You cannot currently mix including and excluding fields.")});var r=m(e,function(){return n},function(t,e,n){var r=n,o=e;throw i("both "+r+" and "+o+" found in fields option, using both of them may trigger unexpected behavior. Did you mean to use only one of them?")});return{tree:r,including:n}},m=function(t,e,n,i){return i=i||{},y.each(t,function(t){var r=i,o=t.split("."),a=y.all(o.slice(0,-1),function(e,i){if(y.has(r,e)){if(!y.isObject(r[e])&&(r[e]=n(r[e],o.slice(0,i+1).join("."),t),!y.isObject(r[e])))return!1}else r[e]={};return r=r[e],!0});if(a){var s=y.last(o);r[s]=y.has(r,s)?n(r[s],t,t):e(t)}}),i},t._checkSupportedProjection=function(t){if(!y.isObject(t)||y.isArray(t))throw i("fields option must be an object");y.each(t,function(t,e){if(y.contains(e.split("."),"$"))throw i("Minimongo doesn't support $ operator in projections yet.");if(-1===y.indexOf([1,0,!0,!1],t))throw i("Projection values should be one of 1, 0, true, or false")})}}.call(this),function(){t._modify=function(t,e,a){if(a=a||{},!o(e))throw i("Modifier must be an object");var l,h=s(e);if(h)l=v.clone(t),y.each(e,function(t,e){var o=u[e];if(a.isInsert&&"$setOnInsert"===e&&(o=u.$set),!o)throw i("Invalid modifier specified "+e);y.each(t,function(t,s){if(s.length&&"."===s[s.length-1])throw i("Invalid mod field name, may not end in a period");if("_id"===s)throw i("Mod on _id not allowed");var u=s.split("."),h=(y.has(r,e),n(l,u,{noCreate:r[e],forbidArray:"$rename"===e,arrayIndices:a.arrayIndices})),c=u.pop();o(h,c,t,s,l)})});else{if(e._id&&!v.equals(t._id,e._id))throw i("Cannot change the _id of a document");for(var c in e)if(/\./.test(c))throw i("When replacing document, field name may not contain '.'");l=e}y.each(y.keys(t),function(e){("_id"!==e||a.isInsert)&&delete t[e]}),y.each(l,function(e,n){t[n]=e})};var n=function(t,e,n){n=n||{};for(var r=!1,o=0;o<e.length;o++){var s=o===e.length-1,u=e[o],h=a(t);if(!h){if(n.noCreate)return void 0;var c=i("cannot use the part '"+u+"' to traverse "+t);throw c.setPropertyError=!0,c}if(t instanceof Array){if(n.forbidArray)return null;if("$"===u){if(r)throw i("Too many positional (i.e. '$') elements");if(!n.arrayIndices||!n.arrayIndices.length)throw i("The positional operator did not find the match needed from the query");u=n.arrayIndices[0],r=!0}else{if(!l(u)){if(n.noCreate)return void 0;throw i("can't append to array using string field name ["+u+"]")}u=parseInt(u)}if(s&&(e[o]=u),n.noCreate&&u>=t.length)return void 0;for(;t.length<u;)t.push(null);if(!s)if(t.length===u)t.push({});else if("object"!=typeof t[u])throw i("can't modify field '"+e[o+1]+"' of list value "+_.stringify(t[u]))}else{if(u.length&&"$"===u.substr(0,1))throw i("can't set field named "+u);if(!(u in t)){if(n.noCreate)return void 0;s||(t[u]={})}}if(s)return t;t=t[u]}},r={$unset:!0,$pop:!0,$rename:!0,$pull:!0,$pullAll:!0},u={$inc:function(t,e,n){if("number"!=typeof n)throw i("Modifier $inc allowed for numbers only");if(e in t){if("number"!=typeof t[e])throw i("Cannot apply $inc modifier to non-number");t[e]+=n}else t[e]=n},$set:function(t,e,n){if(!y.isObject(t)){var r=i("Cannot set property on non-object field");throw r.setPropertyError=!0,r}if(null===t){var r=i("Cannot set property on null");throw r.setPropertyError=!0,r}t[e]=v.clone(n)},$setOnInsert:function(){},$unset:function(t,e){void 0!==t&&(t instanceof Array?e in t&&(t[e]=null):delete t[e])},$push:function(n,r,o){if(void 0===n[r]&&(n[r]=[]),!(n[r]instanceof Array))throw i("Cannot apply $push modifier to non-array");if(!o||!o.$each)return void n[r].push(v.clone(o));var a=o.$each;if(!(a instanceof Array))throw i("$each must be an array");var s=void 0;if("$slice"in o){if("number"!=typeof o.$slice)throw i("$slice must be a numeric value");if(o.$slice>0)throw i("$slice in $push must be zero or negative");s=o.$slice}var l=void 0;if(o.$sort){if(void 0===s)throw i("$sort requires $slice to be present");l=new e.Sorter(o.$sort).getComparator();for(var u=0;u<a.length;u++)if(3!==t._f._type(a[u]))throw i("$push like modifiers using $sort require all elements to be objects")}for(var h=0;h<a.length;h++)n[r].push(v.clone(a[h]));l&&n[r].sort(l),void 0!==s&&(n[r]=0===s?[]:n[r].slice(s))},$pushAll:function(t,e,n){if(!("object"==typeof n&&n instanceof Array))throw i("Modifier $pushAll/pullAll allowed for arrays only");var r=t[e];if(void 0===r)t[e]=n;else{if(!(r instanceof Array))throw i("Cannot apply $pushAll modifier to non-array");for(var o=0;o<n.length;o++)r.push(n[o])}},$addToSet:function(e,n,r){var o=e[n];if(void 0===o)e[n]=[r];else{if(!(o instanceof Array))throw i("Cannot apply $addToSet modifier to non-array");var a=!1;if("object"==typeof r)for(var s in r){"$each"===s&&(a=!0);break}var l=a?r.$each:[r];y.each(l,function(e){for(var n=0;n<o.length;n++)if(t._f._equal(e,o[n]))return;o.push(v.clone(e))})}},$pop:function(t,e,n){if(void 0!==t){var r=t[e];if(void 0!==r){if(!(r instanceof Array))throw i("Cannot apply $pop modifier to non-array");"number"==typeof n&&0>n?r.splice(0,1):r.pop()}}},$pull:function(n,r,o){if(void 0!==n){var a=n[r];if(void 0!==a){if(!(a instanceof Array))throw i("Cannot apply $pull/pullAll modifier to non-array");var s=[];if("object"!=typeof o||o instanceof Array)for(var l=0;l<a.length;l++)t._f._equal(a[l],o)||s.push(a[l]);else for(var u=new e.Matcher(o),l=0;l<a.length;l++)u.documentMatches(a[l]).result||s.push(a[l]);n[r]=s}}},$pullAll:function(e,n,r){if(!("object"==typeof r&&r instanceof Array))throw i("Modifier $pushAll/pullAll allowed for arrays only");if(void 0!==e){var o=e[n];if(void 0!==o){if(!(o instanceof Array))throw i("Cannot apply $pull/pullAll modifier to non-array");for(var a=[],s=0;s<o.length;s++){for(var l=!1,u=0;u<r.length;u++)if(t._f._equal(o[s],r[u])){l=!0;break}l||a.push(o[s])}e[n]=a}}},$rename:function(t,e,r,o,a){if(o===r)throw i("$rename source must differ from target");if(null===t)throw i("$rename source field invalid");if("string"!=typeof r)throw i("$rename target must be a string");if(void 0!==t){var s=t[e];delete t[e];var l=r.split("."),u=n(a,l,{forbidArray:!0});if(null===u)throw i("$rename target field invalid");var h=l.pop();u[h]=s}},$bit:function(){throw i("$bit is not supported")}}}.call(this),function(){t._diffQueryChanges=function(e,n,i,r){e?t._diffQueryOrderedChanges(n,i,r):t._diffQueryUnorderedChanges(n,i,r)},t._diffQueryUnorderedChanges=function(e,n,i){if(i.movedBefore)throw new Error("_diffQueryUnordered called with a movedBefore observer!");n.forEach(function(n,r){var o=e.get(r);if(o)i.changed&&!v.equals(o,n)&&i.changed(r,t._makeChangedFields(n,o));else if(i.added){var a=v.clone(n);delete a._id,i.added(n._id,a)}}),i.removed&&e.forEach(function(t,e){n.has(e)||i.removed(e)})},t._diffQueryOrderedChanges=function(e,n,i){var r={};y.each(n,function(t){r[t._id]&&g._debug("Duplicate _id in new_results"),r[t._id]=!0});var o={};y.each(e,function(t,e){t._id in o&&g._debug("Duplicate _id in old_results"),o[t._id]=e});for(var a=[],s=0,l=n.length,u=new Array(l),h=new Array(l),c=function(t){return o[n[t]._id]},d=0;l>d;d++)if(void 0!==o[n[d]._id]){for(var p=s;p>0&&!(c(u[p-1])<c(d));)p--;h[d]=0===p?-1:u[p-1],u[p]=d,p+1>s&&(s=p+1)}for(var f=0===s?-1:u[s-1];f>=0;)a.push(f),f=h[f];a.reverse(),a.push(n.length),y.each(e,function(t){r[t._id]||i.removed&&i.removed(t._id)});var m=0;y.each(a,function(r){for(var a,s,l,u=n[r]?n[r]._id:null,h=m;r>h;h++)s=n[h],y.has(o,s._id)?(a=e[o[s._id]],l=t._makeChangedFields(s,a),y.isEmpty(l)||i.changed&&i.changed(s._id,l),i.movedBefore&&i.movedBefore(s._id,u)):(l=v.clone(s),delete l._id,i.addedBefore&&i.addedBefore(s._id,l,u),i.added&&i.added(s._id,l));u&&(s=n[r],a=e[o[s._id]],l=t._makeChangedFields(s,a),y.isEmpty(l)||i.changed&&i.changed(s._id,l)),m=r+1})},t._diffObjects=function(t,e,n){y.each(t,function(t,i){y.has(e,i)?n.both&&n.both(i,t,e[i]):n.leftOnly&&n.leftOnly(i,t)}),n.rightOnly&&y.each(e,function(e,i){y.has(t,i)||n.rightOnly(i,e)})}}.call(this),function(){t._IdMap=function(){var e=this;b.call(e,t._idStringify,t._idParse)},g._inherits(t._IdMap,b)}.call(this),function(){t._CachingChangeObserver=function(e){var n=this;e=e||{};var i=e.callbacks&&t._observeChangesCallbacksAreOrdered(e.callbacks);if(y.has(e,"ordered")){if(n.ordered=e.ordered,e.callbacks&&e.ordered!==i)throw Error("ordered option doesn't match callbacks")}else{if(!e.callbacks)throw Error("must provide ordered or callbacks");n.ordered=i}var r=e.callbacks||{};n.ordered?(n.docs=new w(t._idStringify),n.applyChange={addedBefore:function(t,e,i){var o=v.clone(e);o._id=t,r.addedBefore&&r.addedBefore.call(n,t,e,i),r.added&&r.added.call(n,t,e),n.docs.putBefore(t,o,i||null)},movedBefore:function(t,e){n.docs.get(t);r.movedBefore&&r.movedBefore.call(n,t,e),n.docs.moveBefore(t,e||null)}}):(n.docs=new t._IdMap,n.applyChange={added:function(t,e){var i=v.clone(e);r.added&&r.added.call(n,t,e),i._id=t,n.docs.set(t,i)}}),n.applyChange.changed=function(e,i){var o=n.docs.get(e);if(!o)throw new Error("Unknown id for changed: "+e);r.changed&&r.changed.call(n,e,v.clone(i)),t._applyChanges(o,i)},n.applyChange.removed=function(t){r.removed&&r.removed.call(n,t),n.docs.remove(t)}},t._observeFromObserveChanges=function(e,n){var i,r=e.getTransform()||function(t){return t},o=!!n._suppress_initial;if(t._observeCallbacksAreOrdered(n)){var a=!n._no_indices;i={addedBefore:function(t,e,i){var s=this;if(!o&&(n.addedAt||n.added)){var l=r(y.extend(e,{_id:t}));if(n.addedAt){var u=a?i?s.docs.indexOf(i):s.docs.size():-1;n.addedAt(l,u,i)}else n.added(l)}},changed:function(e,i){var o=this;if(n.changedAt||n.changed){var s=v.clone(o.docs.get(e));if(!s)throw new Error("Unknown id for changed: "+e);var l=r(v.clone(s));if(t._applyChanges(s,i),s=r(s),n.changedAt){var u=a?o.docs.indexOf(e):-1;n.changedAt(s,l,u)}else n.changed(s,l)}},movedBefore:function(t,e){var i=this;if(n.movedTo){var o=a?i.docs.indexOf(t):-1,s=a?e?i.docs.indexOf(e):i.docs.size():-1;s>o&&--s,n.movedTo(r(v.clone(i.docs.get(t))),o,s,e||null)}},removed:function(t){var e=this;if(n.removedAt||n.removed){var i=r(e.docs.get(t));if(n.removedAt){var o=a?e.docs.indexOf(t):-1;n.removedAt(i,o)}else n.removed(i)}}}}else i={added:function(t,e){if(!o&&n.added){var i=y.extend(e,{_id:t});n.added(r(i))}},changed:function(e,i){var o=this;if(n.changed){var a=o.docs.get(e),s=v.clone(a);t._applyChanges(s,i),n.changed(r(s),r(a))}},removed:function(t){var e=this;n.removed&&n.removed(r(e.docs.get(t)))}};var s=new t._CachingChangeObserver({callbacks:i}),l=e.observeChanges(s.applyChange);return o=!1,s.ordered&&(l._fetch=function(){var t=[];return s.docs.forEach(function(e){t.push(r(v.clone(e)))}),t}),l}}.call(this),function(){t._looksLikeObjectID=function(t){return 24===t.length&&t.match(/^[0-9a-f]*$/)},t._ObjectID=function(e){var n=this;if(e){if(e=e.toLowerCase(),!t._looksLikeObjectID(e))throw new Error("Invalid hexadecimal string for creating an ObjectID");n._str=e}else n._str=T.hexString(24)},t._ObjectID.prototype.toString=function(){var t=this;return'ObjectID("'+t._str+'")'},t._ObjectID.prototype.equals=function(e){var n=this;return e instanceof t._ObjectID&&n.valueOf()===e.valueOf()},t._ObjectID.prototype.clone=function(){var e=this;return new t._ObjectID(e._str)},t._ObjectID.prototype.typeName=function(){return"oid"},t._ObjectID.prototype.getTimestamp=function(){var t=this;return parseInt(t._str.substr(0,8),16)},t._ObjectID.prototype.valueOf=t._ObjectID.prototype.toJSONValue=t._ObjectID.prototype.toHexString=function(){return this._str},t._selectorIsId=function(e){return"string"==typeof e||"number"==typeof e||e instanceof t._ObjectID},t._selectorIsIdPerhapsAsObject=function(e){return t._selectorIsId(e)||e&&"object"==typeof e&&e._id&&t._selectorIsId(e._id)&&1===y.size(e)},t._idsMatchedBySelector=function(e){if(t._selectorIsId(e))return[e];if(!e)return null;if(y.has(e,"_id"))return t._selectorIsId(e._id)?[e._id]:e._id&&e._id.$in&&y.isArray(e._id.$in)&&!y.isEmpty(e._id.$in)&&y.all(e._id.$in,t._selectorIsId)?e._id.$in:null;if(e.$and&&y.isArray(e.$and))for(var n=0;n<e.$and.length;++n){var i=t._idsMatchedBySelector(e.$and[n]);if(i)return i}return null},v.addType("oid",function(e){return new t._ObjectID(e)})}.call(this),"undefined"==typeof Package&&(Package={}),Package.minimongo={LocalCollection:t,Minimongo:e,MinimongoTest:n}}(),function(){var t,e,n=Package.meteor.Meteor,i=Package.underscore._,r=Package.ejson.EJSON;(function(){var o=new n.EnvironmentVariable;t=function(t,n){var i=o.getOrNullIfOutsideFiber();i&&i.checking(t);try{c(t,n)}catch(r){throw r instanceof e.Error&&r.path&&(r.message+=" in field "+r.path),r}},e={Optional:function(t){return new a(t)},OneOf:function(){return new s(i.toArray(arguments))},Any:["__any__"],Where:function(t){return new l(t)},ObjectIncluding:function(t){return new u(t)},Integer:["__integer__"],Error:n.makeErrorType("Match.Error",function(t){this.message="Match error: "+t,this.path="",this.sanitizedError=new n.Error(400,"Match failed")}),test:function(t,n){try{return c(t,n),!0}catch(i){if(i instanceof e.Error)return!1;throw i}},_failIfArgumentsAreNotAllChecked:function(t,e,n,i){var r=new d(n,i),a=o.withValue(r,function(){return t.apply(e,n)});return r.throwUnlessAllArgumentsHaveBeenChecked(),a}};var a=function(t){this.pattern=t},s=function(t){if(i.isEmpty(t))throw new Error("Must provide at least one choice to Match.OneOf");this.choices=t},l=function(t){this.condition=t},u=function(t){this.pattern=t},h=[[String,"string"],[Number,"number"],[Boolean,"boolean"],[void 0,"undefined"]],c=function(t,n){if(n!==e.Any){for(var o=0;o<h.length;++o)if(n===h[o][0]){if(typeof t===h[o][1])return;throw new e.Error("Expected "+h[o][1]+", got "+typeof t)}if(null===n){if(null===t)return;throw new e.Error("Expected null, got "+r.stringify(t))}if(n===e.Integer){if("number"==typeof t&&(0|t)===t)return;throw new e.Error("Expected Integer, got "+(t instanceof Object?r.stringify(t):t))}if(n===Object&&(n=e.ObjectIncluding({})),n instanceof Array){if(1!==n.length)throw Error("Bad pattern: arrays must have one type element"+r.stringify(n));if(!i.isArray(t)&&!i.isArguments(t))throw new e.Error("Expected array, got "+r.stringify(t));return void i.each(t,function(t,i){try{c(t,n[0])}catch(r){throw r instanceof e.Error&&(r.path=f(i,r.path)),r}})}if(n instanceof l){if(n.condition(t))return;throw new e.Error("Failed Match.Where validation")}if(n instanceof a&&(n=e.OneOf(void 0,n.pattern)),n instanceof s){for(var o=0;o<n.choices.length;++o)try{return void c(t,n.choices[o])}catch(d){if(!(d instanceof e.Error))throw d}throw new e.Error("Failed Match.OneOf or Match.Optional validation")}if(n instanceof Function){if(t instanceof n)return;throw new e.Error("Expected "+n.name)}var p=!1;if(n instanceof u&&(p=!0,n=n.pattern),"object"!=typeof n)throw Error("Bad pattern: unknown pattern type");if("object"!=typeof t)throw new e.Error("Expected object, got "+typeof t);if(null===t)throw new e.Error("Expected object, got null");if(t.constructor!==Object)throw new e.Error("Expected plain object");var m={},g={};i.each(n,function(t,e){t instanceof a?g[e]=t.pattern:m[e]=t}),i.each(t,function(t,n){try{if(i.has(m,n))c(t,m[n]),delete m[n];else if(i.has(g,n))c(t,g[n]);else if(!p)throw new e.Error("Unknown key")}catch(r){throw r instanceof e.Error&&(r.path=f(n,r.path)),r}}),i.each(m,function(t,n){throw new e.Error("Missing key '"+n+"'")})}},d=function(t,e){var n=this;n.args=i.clone(t),n.args.reverse(),n.description=e};i.extend(d.prototype,{checking:function(t){var e=this;e._checkingOneValue(t)||(i.isArray(t)||i.isArguments(t))&&i.each(t,i.bind(e._checkingOneValue,e))},_checkingOneValue:function(t){for(var e=this,n=0;n<e.args.length;++n)if(t===e.args[n])return e.args.splice(n,1),!0;return!1},throwUnlessAllArgumentsHaveBeenChecked:function(){var t=this;if(!i.isEmpty(t.args))throw new Error("Did not check() all arguments during "+t.description)}});var p=["do","if","in","for","let","new","try","var","case","else","enum","eval","false","null","this","true","void","with","break","catch","class","const","super","throw","while","yield","delete","export","import","public","return","static","switch","typeof","default","extends","finally","package","private","continue","debugger","function","arguments","interface","protected","implements","instanceof"],f=function(t,e){return"number"==typeof t||t.match(/^[0-9]+$/)?t="["+t+"]":(!t.match(/^[a-z_$][0-9a-z_$]*$/i)||i.contains(p,t))&&(t=JSON.stringify([t])),e&&"["!==e[0]?t+"."+e:t+e}}).call(this),"undefined"==typeof Package&&(Package={}),Package.check={check:t,Match:e}}(),function(){var t,e=Package.meteor.Meteor,n=Package.underscore._,i=Package.random.Random;(function(){t=function(t){var e=this;n.extend(e,n.defaults(n.clone(t||{}),{baseTimeout:1e3,exponent:2.2,maxTimeout:3e5,minTimeout:10,minCount:2,fuzz:.5})),e.retryTimer=null},n.extend(t.prototype,{clear:function(){var t=this;t.retryTimer&&clearTimeout(t.retryTimer),t.retryTimer=null},_timeout:function(t){var e=this;if(t<e.minCount)return e.minTimeout;var n=Math.min(e.maxTimeout,e.baseTimeout*Math.pow(e.exponent,t));return n*=i.fraction()*e.fuzz+(1-e.fuzz/2)},retryLater:function(t,n){var i=this,r=i._timeout(t);return i.retryTimer&&clearTimeout(i.retryTimer),i.retryTimer=e.setTimeout(n,r),r}})}).call(this),"undefined"==typeof Package&&(Package={}),Package.retry={Retry:t}}(),function(){var t,e=Package.meteor.Meteor,n=Package.underscore._,i=(Package.logging.Log,Package.json.JSON);(function(){var r,o="Meteor_Reload",a=3e4,s={};"undefined"!=typeof sessionStorage&&sessionStorage&&(r=sessionStorage.getItem(o),sessionStorage.removeItem(o)),r||(r="{}");var l={};try{l=i.parse(r),"object"!=typeof l&&(e._debug("Got bad data on reload. Ignoring."),l={})}catch(u){e._debug("Got invalid JSON on reload. Ignoring.")}l.reload&&"object"==typeof l.data&&l.time+a>(new Date).getTime()&&(s=l.data);var h=[];t={},t._onMigrate=function(t,e){e||(e=t,t=void 0),h.push({name:t,callback:e})},t._migrationData=function(t){return s[t]};var c=!1;t._reload=function(){if(!c){c=!0;var t=function(){n.defer(function(){for(var r={},a=n.clone(h);a.length;){var s=a.shift(),l=s.callback(t);if(!l[0])return;l.length>1&&s.name&&(r[s.name]=l[1])}try{var u=i.stringify({time:(new Date).getTime(),data:r,reload:!0})}catch(c){throw e._debug("Couldn't serialize data for migration",r),c}if("undefined"!=typeof sessionStorage&&sessionStorage)try{sessionStorage.setItem(o,u)
}catch(c){e._debug("Couldn't save data for migration to sessionStorage",c)}else e._debug("Browser does not support sessionStorage. Not saving migration state.");window.location.reload()})};t()}}}).call(this),function(){e._reload={onMigrate:t._onMigrate,migrationData:t._migrationData,reload:t._reload}}.call(this),"undefined"==typeof Package&&(Package={}),Package.reload={Reload:t}}(),function(){{var t,e,n,i,r,o,a,s,l,u,h,c,d,p=Package.meteor.Meteor,f=(Package.check.check,Package.check.Match,Package.random.Random),m=Package.ejson.EJSON,g=Package.json.JSON,y=Package.underscore._,_=Package.deps.Deps,v=(Package.logging.Log,Package.retry.Retry),b=Package.minimongo.LocalCollection;Package.minimongo.Minimongo}(function(){e={}}).call(this),function(){n=function(){var t=document,e=window,n={},i=function(){};i.prototype.addEventListener=function(t,e){this._listeners||(this._listeners={}),t in this._listeners||(this._listeners[t]=[]);var i=this._listeners[t];-1===n.arrIndexOf(i,e)&&i.push(e)},i.prototype.removeEventListener=function(t,e){if(this._listeners&&t in this._listeners){var i=this._listeners[t],r=n.arrIndexOf(i,e);return-1!==r?void(i.length>1?this._listeners[t]=i.slice(0,r).concat(i.slice(r+1)):delete this._listeners[t]):void 0}},i.prototype.dispatchEvent=function(t){var e=t.type,n=Array.prototype.slice.call(arguments,0);if(this["on"+e]&&this["on"+e].apply(this,n),this._listeners&&e in this._listeners)for(var i=0;i<this._listeners[e].length;i++)this._listeners[e][i].apply(this,n)};var r=function(t,e){if(this.type=t,"undefined"!=typeof e)for(var n in e)e.hasOwnProperty(n)&&(this[n]=e[n])};r.prototype.toString=function(){var t=[];for(var e in this)if(this.hasOwnProperty(e)){var n=this[e];"function"==typeof n&&(n="[function]"),t.push(e+"="+n)}return"SimpleEvent("+t.join(", ")+")"};var o=function(t){var e=this;e._events=t||[],e._listeners={}};o.prototype.emit=function(t){var e=this;if(e._verifyType(t),!e._nuked){var n=Array.prototype.slice.call(arguments,1);if(e["on"+t]&&e["on"+t].apply(e,n),t in e._listeners)for(var i=0;i<e._listeners[t].length;i++)e._listeners[t][i].apply(e,n)}},o.prototype.on=function(t,e){var n=this;n._verifyType(t),n._nuked||(t in n._listeners||(n._listeners[t]=[]),n._listeners[t].push(e))},o.prototype._verifyType=function(t){var e=this;-1===n.arrIndexOf(e._events,t)&&n.log("Event "+g.stringify(t)+" not listed "+g.stringify(e._events)+" in "+e)},o.prototype.nuke=function(){var t=this;t._nuked=!0;for(var e=0;e<t._events.length;e++)delete t[t._events[e]];t._listeners={}};var a="abcdefghijklmnopqrstuvwxyz0123456789_";n.random_string=function(t,e){e=e||a.length;var n,i=[];for(n=0;t>n;n++)i.push(a.substr(Math.floor(Math.random()*e),1));return i.join("")},n.random_number=function(t){return Math.floor(Math.random()*t)},n.random_number_string=function(t){var e=(""+(t-1)).length,i=Array(e+1).join("0");return(i+n.random_number(t)).slice(-e)},n.getOrigin=function(t){t+="/";var e=t.split("/").slice(0,3);return e.join("/")},n.isSameOriginUrl=function(t,n){return n||(n=e.location.href),t.split("/").slice(0,3).join("/")===n.split("/").slice(0,3).join("/")},n.isSameOriginScheme=function(t,n){return n||(n=e.location.href),t.split(":")[0]===n.split(":")[0]},n.getParentDomain=function(t){if(/^[0-9.]*$/.test(t))return t;if(/^\[/.test(t))return t;if(!/[.]/.test(t))return t;var e=t.split(".").slice(1);return e.join(".")},n.objectExtend=function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t};var s="_jp";n.polluteGlobalNamespace=function(){s in e||(e[s]={})},n.closeFrame=function(t,e){return"c"+g.stringify([t,e])},n.userSetCode=function(t){return 1e3===t||t>=3e3&&4999>=t},n.countRTO=function(t){var e;return e=t>100?3*t:t+200},n.log=function(){e.console&&console.log&&console.log.apply&&console.log.apply(console,arguments)},n.bind=function(t,e){return t.bind?t.bind(e):function(){return t.apply(e,arguments)}},n.flatUrl=function(t){return-1===t.indexOf("?")&&-1===t.indexOf("#")},n.amendUrl=function(e,i){var r;if(void 0===i)r=t.location;else{var o=/^([a-z0-9.+-]+:)/i.exec(i);if(o){var a=o[0].toLowerCase(),s=i.substring(a.length),l=/[a-z0-9\.-]+(:[0-9]+)?/.exec(s);if(l)var u=l[0]}if(!a||!u)throw new Error("relativeTo must be an absolute url");r={protocol:a,host:u}}if(!e)throw new Error("Wrong url for SockJS");if(!n.flatUrl(e))throw new Error("Only basic urls are supported in SockJS");0===e.indexOf("//")&&(e=r.protocol+e),0===e.indexOf("/")&&(e=r.protocol+"//"+r.host+e),e=e.replace(/[/]+$/,"");var h=e.split("/");return("http:"===h[0]&&/:80$/.test(h[2])||"https:"===h[0]&&/:443$/.test(h[2]))&&(h[2]=h[2].replace(/:(80|443)$/,"")),e=h.join("/")},n.arrIndexOf=function(t,e){for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},n.arrSkip=function(t,e){var i=n.arrIndexOf(t,e);if(-1===i)return t.slice();var r=t.slice(0,i);return r.concat(t.slice(i+1))},n.isArray=Array.isArray||function(t){return{}.toString.call(t).indexOf("Array")>=0},n.delay=function(t,e){return"function"==typeof t&&(e=t,t=0),setTimeout(e,t)};var l,u=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,h={"\x00":"\\u0000","":"\\u0001","":"\\u0002","":"\\u0003","":"\\u0004","":"\\u0005","":"\\u0006","":"\\u0007","\b":"\\b","	":"\\t","\n":"\\n","":"\\u000b","\f":"\\f","\r":"\\r","":"\\u000e","":"\\u000f","":"\\u0010","":"\\u0011","":"\\u0012","":"\\u0013","":"\\u0014","":"\\u0015","":"\\u0016","":"\\u0017","":"\\u0018","":"\\u0019","":"\\u001a","":"\\u001b","":"\\u001c","":"\\u001d","":"\\u001e","":"\\u001f",'"':'\\"',"\\":"\\\\","":"\\u007f","":"\\u0080","":"\\u0081","":"\\u0082","":"\\u0083","":"\\u0084","":"\\u0085","":"\\u0086","":"\\u0087","":"\\u0088","":"\\u0089","":"\\u008a","":"\\u008b","":"\\u008c","":"\\u008d","":"\\u008e","":"\\u008f","":"\\u0090","":"\\u0091","":"\\u0092","":"\\u0093","":"\\u0094","":"\\u0095","":"\\u0096","":"\\u0097","":"\\u0098","":"\\u0099","":"\\u009a","":"\\u009b","":"\\u009c","":"\\u009d","":"\\u009e","":"\\u009f","":"\\u00ad","":"\\u0600","":"\\u0601","":"\\u0602","":"\\u0603","":"\\u0604","":"\\u070f","":"\\u17b4","":"\\u17b5","":"\\u200c","":"\\u200d","":"\\u200e","":"\\u200f","\u2028":"\\u2028","\u2029":"\\u2029","":"\\u202a","":"\\u202b","":"\\u202c","":"\\u202d","":"\\u202e","":"\\u202f","":"\\u2060","":"\\u2061","":"\\u2062","":"\\u2063","":"\\u2064","":"\\u2065","":"\\u2066","":"\\u2067","":"\\u2068","":"\\u2069","":"\\u206a","":"\\u206b","":"\\u206c","":"\\u206d","":"\\u206e","":"\\u206f","":"\\ufeff","":"\\ufff0","":"\\ufff1","":"\\ufff2","":"\\ufff3","":"\\ufff4","":"\\ufff5","":"\\ufff6","":"\\ufff7","":"\\ufff8","":"\\ufff9","":"\\ufffa","":"\\ufffb","":"\\ufffc","":"\\ufffd","":"\\ufffe","":"\\uffff"},c=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,d=g&&g.stringify||function(t){return u.lastIndex=0,u.test(t)&&(t=t.replace(u,function(t){return h[t]})),'"'+t+'"'},p=function(t){var e,n={},i=[];for(e=0;65536>e;e++)i.push(String.fromCharCode(e));return t.lastIndex=0,i.join("").replace(t,function(t){return n[t]="\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4),""}),t.lastIndex=0,n};n.quote=function(t){var e=d(t);return c.lastIndex=0,c.test(e)?(l||(l=p(c)),e.replace(c,function(t){return l[t]})):e};var f=["websocket","xdr-streaming","xhr-streaming","iframe-eventsource","iframe-htmlfile","xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"];n.probeProtocols=function(){for(var t={},e=0;e<f.length;e++){var n=f[e];t[n]=k[n]&&k[n].enabled()}return t},n.detectProtocols=function(t,e,n){var i={},r=[];e||(e=f);for(var o=0;o<e.length;o++){var a=e[o];i[a]=t[a]}var s=function(t){var e=t.shift();i[e]?r.push(e):t.length>0&&s(t)};return n.websocket!==!1&&s(["websocket"]),i["xhr-streaming"]&&!n.null_origin?r.push("xhr-streaming"):!i["xdr-streaming"]||n.cookie_needed||n.null_origin?s(["iframe-eventsource","iframe-htmlfile"]):r.push("xdr-streaming"),i["xhr-polling"]&&!n.null_origin?r.push("xhr-polling"):!i["xdr-polling"]||n.cookie_needed||n.null_origin?s(["iframe-xhr-polling","jsonp-polling"]):r.push("xdr-polling"),r};var m="_sockjs_global";n.createHook=function(){var t="a"+n.random_string(8);if(!(m in e)){var i={};e[m]=function(t){return t in i||(i[t]={id:t,del:function(){delete i[t]}}),i[t]}}return e[m](t)},n.attachMessage=function(t){n.attachEvent("message",t)},n.attachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.addEventListener(n,i,!1):(t.attachEvent("on"+n,i),e.attachEvent("on"+n,i))},n.detachMessage=function(t){n.detachEvent("message",t)},n.detachEvent=function(n,i){"undefined"!=typeof e.addEventListener?e.removeEventListener(n,i,!1):(t.detachEvent("on"+n,i),e.detachEvent("on"+n,i))};var y={},_=!1,v=function(){for(var t in y)y[t](),delete y[t]},b=function(){_||(_=!0,v())};n.attachEvent("unload",b),n.unload_add=function(t){var e=n.random_string(8);return y[e]=t,_&&n.delay(v),e},n.unload_del=function(t){t in y&&delete y[t]},n.createIframe=function(e,i){var r,o,a=t.createElement("iframe"),s=function(){clearTimeout(r);try{a.onload=null}catch(t){}a.onerror=null},l=function(){a&&(s(),setTimeout(function(){a&&a.parentNode.removeChild(a),a=null},0),n.unload_del(o))},u=function(t){a&&(l(),i(t))},h=function(t,e){try{a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}catch(n){}};return a.src=e,a.style.display="none",a.style.position="absolute",a.onerror=function(){u("onerror")},a.onload=function(){clearTimeout(r),r=setTimeout(function(){u("onload timeout")},2e3)},t.body.appendChild(a),r=setTimeout(function(){u("timeout")},15e3),o=n.unload_add(l),{post:h,cleanup:l,loaded:s}},n.createHtmlfile=function(t,i){var r,o,a,l=new ActiveXObject("htmlfile"),u=function(){clearTimeout(r)},h=function(){l&&(u(),n.unload_del(o),a.parentNode.removeChild(a),a=l=null,CollectGarbage())},c=function(t){l&&(h(),i(t))},d=function(t,e){try{a&&a.contentWindow&&a.contentWindow.postMessage(t,e)}catch(n){}};l.open(),l.write('<html><script>document.domain="'+document.domain+'";</script></html>'),l.close(),l.parentWindow[s]=e[s];var p=l.createElement("div");return l.body.appendChild(p),a=l.createElement("iframe"),p.appendChild(a),a.src=t,r=setTimeout(function(){c("timeout")},15e3),o=n.unload_add(h),{post:d,cleanup:h,loaded:u}};var w=function(){};w.prototype=new o(["chunk","finish"]),w.prototype._start=function(t,i,r,o){var a=this;try{a.xhr=new XMLHttpRequest}catch(s){}if(!a.xhr)try{a.xhr=new e.ActiveXObject("Microsoft.XMLHTTP")}catch(s){}(e.ActiveXObject||e.XDomainRequest)&&(i+=(-1===i.indexOf("?")?"?":"&")+"t="+ +new Date),a.unload_ref=n.unload_add(function(){a._cleanup(!0)});try{a.xhr.open(t,i,!0)}catch(l){return a.emit("finish",0,""),void a._cleanup()}if(o&&o.no_credentials||(a.xhr.withCredentials="true"),o&&o.headers)for(var u in o.headers)a.xhr.setRequestHeader(u,o.headers[u]);a.xhr.onreadystatechange=function(){if(a.xhr){var t=a.xhr;switch(t.readyState){case 3:try{var e=t.status,n=t.responseText}catch(t){}1223===e&&(e=204),n&&n.length>0&&a.emit("chunk",e,n);break;case 4:var e=t.status;1223===e&&(e=204),a.emit("finish",e,t.responseText),a._cleanup(!1)}}},a.xhr.send(r)},w.prototype._cleanup=function(t){var e=this;if(e.xhr){if(n.unload_del(e.unload_ref),e.xhr.onreadystatechange=function(){},t)try{e.xhr.abort()}catch(i){}e.unload_ref=e.xhr=null}},w.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)};var x=n.XHRCorsObject=function(){var t=this,e=arguments;n.delay(function(){t._start.apply(t,e)})};x.prototype=new w;var T=n.XHRLocalObject=function(t,e,i){var r=this;n.delay(function(){r._start(t,e,i,{no_credentials:!0})})};T.prototype=new w;var M=n.XDRObject=function(t,e,i){var r=this;n.delay(function(){r._start(t,e,i)})};M.prototype=new o(["chunk","finish"]),M.prototype._start=function(t,e,i){var r=this,o=new XDomainRequest;e+=(-1===e.indexOf("?")?"?":"&")+"t="+ +new Date;var a=o.ontimeout=o.onerror=function(){r.emit("finish",0,""),r._cleanup(!1)};o.onprogress=function(){r.emit("chunk",200,o.responseText)},o.onload=function(){r.emit("finish",200,o.responseText),r._cleanup(!1)},r.xdr=o,r.unload_ref=n.unload_add(function(){r._cleanup(!0)});try{r.xdr.open(t,e),r.xdr.send(i)}catch(s){a()}},M.prototype._cleanup=function(t){var e=this;if(e.xdr){if(n.unload_del(e.unload_ref),e.xdr.ontimeout=e.xdr.onerror=e.xdr.onprogress=e.xdr.onload=null,t)try{e.xdr.abort()}catch(i){}e.unload_ref=e.xdr=null}},M.prototype.close=function(){var t=this;t.nuke(),t._cleanup(!0)},n.isXHRCorsCapable=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest?1:e.XDomainRequest&&t.domain?2:F.enabled()?3:4};var k=function(t,e,i){if(!(this instanceof k))return new k(t,e,i);var r,o=this;o._options={devel:!1,debug:!1,protocols_whitelist:[],info:void 0,rtt:void 0},i&&n.objectExtend(o._options,i),o._base_url=n.amendUrl(t),o._server=o._options.server||n.random_number_string(1e3),o._options.protocols_whitelist&&o._options.protocols_whitelist.length?r=o._options.protocols_whitelist:(r="string"==typeof e&&e.length>0?[e]:n.isArray(e)?e:null,r&&o._debug('Deprecated API: Use "protocols_whitelist" option instead of supplying protocol list as a second parameter to SockJS constructor.')),o._protocols=[],o.protocol=null,o.readyState=k.CONNECTING,o._ir=z(o._base_url),o._ir.onfinish=function(t,e){o._ir=null,t?(o._options.info&&(t=n.objectExtend(t,o._options.info)),o._options.rtt&&(e=o._options.rtt),o._applyInfo(t,e,r),o._didClose()):o._didClose(1002,"Can't connect to server",!0)}};k.prototype=new i,k.version="0.3.4",k.CONNECTING=0,k.OPEN=1,k.CLOSING=2,k.CLOSED=3,k.prototype._debug=function(){this._options.debug&&n.log.apply(n,arguments)},k.prototype._dispatchOpen=function(){var t=this;t.readyState===k.CONNECTING?(t._transport_tref&&(clearTimeout(t._transport_tref),t._transport_tref=null),t.readyState=k.OPEN,t.dispatchEvent(new r("open"))):t._didClose(1006,"Server lost session")},k.prototype._dispatchMessage=function(t){var e=this;e.readyState===k.OPEN&&e.dispatchEvent(new r("message",{data:t}))},k.prototype._dispatchHeartbeat=function(){var t=this;t.readyState===k.OPEN&&t.dispatchEvent(new r("heartbeat",{}))},k.prototype._didClose=function(t,e,i){var o=this;if(o.readyState!==k.CONNECTING&&o.readyState!==k.OPEN&&o.readyState!==k.CLOSING)throw new Error("INVALID_STATE_ERR");o._ir&&(o._ir.nuke(),o._ir=null),o._transport&&(o._transport.doCleanup(),o._transport=null);var a=new r("close",{code:t,reason:e,wasClean:n.userSetCode(t)});if(!n.userSetCode(t)&&o.readyState===k.CONNECTING&&!i){if(o._try_next_protocol(a))return;a=new r("close",{code:2e3,reason:"All transports failed",wasClean:!1,last_event:a})}o.readyState=k.CLOSED,n.delay(function(){o.dispatchEvent(a)})},k.prototype._didMessage=function(t){var e=this,n=t.slice(0,1);switch(n){case"o":e._dispatchOpen();break;case"a":for(var i=g.parse(t.slice(1)||"[]"),r=0;r<i.length;r++)e._dispatchMessage(i[r]);break;case"m":var i=g.parse(t.slice(1)||"null");e._dispatchMessage(i);break;case"c":var i=g.parse(t.slice(1)||"[]");e._didClose(i[0],i[1]);break;case"h":e._dispatchHeartbeat()}},k.prototype._try_next_protocol=function(e){var i=this;for(i.protocol&&(i._debug("Closed transport:",i.protocol,""+e),i.protocol=null),i._transport_tref&&(clearTimeout(i._transport_tref),i._transport_tref=null);;){var r=i.protocol=i._protocols.shift();if(!r)return!1;if(k[r]&&k[r].need_body===!0&&(!t.body||"undefined"!=typeof t.readyState&&"complete"!==t.readyState))return i._protocols.unshift(r),i.protocol="waiting-for-load",n.attachEvent("load",function(){i._try_next_protocol()}),!0;if(k[r]&&k[r].enabled(i._options)){var o=k[r].roundTrips||1,a=(i._options.rto||0)*o||5e3;i._transport_tref=n.delay(a,function(){i.readyState===k.CONNECTING&&i._didClose(2007,"Transport timeouted")});var s=n.random_string(8),l=i._base_url+"/"+i._server+"/"+s;return i._debug("Opening transport:",r," url:"+l," RTO:"+i._options.rto),i._transport=new k[r](i,l,i._base_url),!0}i._debug("Skipping transport:",r)}},k.prototype.close=function(t,e){var i=this;if(t&&!n.userSetCode(t))throw new Error("INVALID_ACCESS_ERR");return i.readyState!==k.CONNECTING&&i.readyState!==k.OPEN?!1:(i.readyState=k.CLOSING,i._didClose(t||1e3,e||"Normal closure"),!0)},k.prototype.send=function(t){var e=this;if(e.readyState===k.CONNECTING)throw new Error("INVALID_STATE_ERR");return e.readyState===k.OPEN&&e._transport.doSend(n.quote(""+t)),!0},k.prototype._applyInfo=function(e,i,r){var o=this;o._options.info=e,o._options.rtt=i,o._options.rto=n.countRTO(i),o._options.info.null_origin=!t.domain,e.base_url&&(o._base_url=n.amendUrl(e.base_url,o._base_url));var a=n.probeProtocols();o._protocols=n.detectProtocols(a,r,e),n.isSameOriginScheme(o._base_url)||2!==n.isXHRCorsCapable()||(o._protocols=["jsonp-polling"])};var S=k.websocket=function(t,i){var r=this,o=i+"/websocket";o="https"===o.slice(0,5)?"wss"+o.slice(5):"ws"+o.slice(4),r.ri=t,r.url=o;var a=e.WebSocket||e.MozWebSocket;r.ws=new a(r.url),r.ws.onmessage=function(t){r.ri._didMessage(t.data)},r.unload_ref=n.unload_add(function(){r.ws.close()}),r.ws.onclose=function(){r.ri._didMessage(n.closeFrame(1006,"WebSocket connection broken"))}};S.prototype.doSend=function(t){this.ws.send("["+t+"]")},S.prototype.doCleanup=function(){var t=this,e=t.ws;e&&(e.onmessage=e.onclose=null,e.close(),n.unload_del(t.unload_ref),t.unload_ref=t.ri=t.ws=null)},S.enabled=function(){return!(!e.WebSocket&&!e.MozWebSocket)},S.roundTrips=2;var C=function(){};C.prototype.send_constructor=function(t){var e=this;e.send_buffer=[],e.sender=t},C.prototype.doSend=function(t){var e=this;e.send_buffer.push(t),e.send_stop||e.send_schedule()},C.prototype.send_schedule_wait=function(){var t,e=this;e.send_stop=function(){e.send_stop=null,clearTimeout(t)},t=n.delay(25,function(){e.send_stop=null,e.send_schedule()})},C.prototype.send_schedule=function(){var t=this;if(t.send_buffer.length>0){var e="["+t.send_buffer.join(",")+"]";t.send_stop=t.sender(t.trans_url,e,function(e,n){t.send_stop=null,e===!1?t.ri._didClose(1006,"Sending error "+n):t.send_schedule_wait()}),t.send_buffer=[]}},C.prototype.send_destructor=function(){var t=this;t._send_stop&&t._send_stop(),t._send_stop=null};var L=function(e,i,r){var o=this;if(!("_send_form"in o)){var a=o._send_form=t.createElement("form"),s=o._send_area=t.createElement("textarea");s.name="d",a.style.display="none",a.style.position="absolute",a.method="POST",a.enctype="application/x-www-form-urlencoded",a.acceptCharset="UTF-8",a.appendChild(s),t.body.appendChild(a)}var a=o._send_form,s=o._send_area,l="a"+n.random_string(8);a.target=l,a.action=e+"/jsonp_send?i="+l;var u;try{u=t.createElement('<iframe name="'+l+'">')}catch(h){u=t.createElement("iframe"),u.name=l}u.id=l,a.appendChild(u),u.style.display="none";try{s.value=i}catch(c){n.log("Your browser is seriously broken. Go home! "+c.message)}a.submit();var d=function(){u.onerror&&(u.onreadystatechange=u.onerror=u.onload=null,n.delay(500,function(){u.parentNode.removeChild(u),u=null}),s.value="",r(!0))};return u.onerror=u.onload=d,u.onreadystatechange=function(){"complete"==u.readyState&&d()},d},P=function(t){return function(e,n,i){var r=new t("POST",e+"/xhr_send",n);return r.onfinish=function(t){i(200===t||204===t,"http status "+t)},function(t){i(!1,t)}}},D=function(e,i){var r,o,a=t.createElement("script"),s=function(t){o&&(o.parentNode.removeChild(o),o=null),a&&(clearTimeout(r),a.parentNode.removeChild(a),a.onreadystatechange=a.onerror=a.onload=a.onclick=null,a=null,i(t),i=null)},l=!1,u=null;if(a.id="a"+n.random_string(8),a.src=e,a.type="text/javascript",a.charset="UTF-8",a.onerror=function(){u||(u=setTimeout(function(){l||s(n.closeFrame(1006,"JSONP script loaded abnormally (onerror)"))},1e3))},a.onload=function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (onload)"))},a.onreadystatechange=function(){if(/loaded|closed/.test(a.readyState)){if(a&&a.htmlFor&&a.onclick){l=!0;try{a.onclick()}catch(t){}}a&&s(n.closeFrame(1006,"JSONP script loaded abnormally (onreadystatechange)"))}},"undefined"==typeof a.async&&t.attachEvent)if(/opera/i.test(navigator.userAgent))o=t.createElement("script"),o.text="try{var a = document.getElementById('"+a.id+"'); if(a)a.onerror();}catch(x){};",a.async=o.async=!1;else{try{a.htmlFor=a.id,a.event="onclick"}catch(h){}a.async=!0}"undefined"!=typeof a.async&&(a.async=!0),r=setTimeout(function(){s(n.closeFrame(1006,"JSONP script loaded abnormally (timeout)"))},35e3);var c=t.getElementsByTagName("head")[0];return c.insertBefore(a,c.firstChild),o&&c.insertBefore(o,c.firstChild),s},A=k["jsonp-polling"]=function(t,e){n.polluteGlobalNamespace();var i=this;i.ri=t,i.trans_url=e,i.send_constructor(L),i._schedule_recv()};A.prototype=new C,A.prototype._schedule_recv=function(){var t=this,e=function(e){t._recv_stop=null,e&&(t._is_closing||t.ri._didMessage(e)),t._is_closing||t._schedule_recv()};t._recv_stop=E(t.trans_url+"/jsonp",D,e)},A.enabled=function(){return!0},A.need_body=!0,A.prototype.doCleanup=function(){var t=this;t._is_closing=!0,t._recv_stop&&t._recv_stop(),t.ri=t._recv_stop=null,t.send_destructor()};var E=function(t,i,r){var o="a"+n.random_string(6),a=t+"?c="+escape(s+"."+o),l=0,u=function(t){switch(l){case 0:delete e[s][o],r(t);break;case 1:r(t),l=2;break;case 2:delete e[s][o]}},h=i(a,u);e[s][o]=h;var c=function(){e[s][o]&&(l=1,e[s][o](n.closeFrame(1e3,"JSONP user aborted read")))};return c},O=function(){};O.prototype=new C,O.prototype.run=function(t,e,n,i,r){var o=this;o.ri=t,o.trans_url=e,o.send_constructor(P(r)),o.poll=new Z(t,i,e+n,r)},O.prototype.doCleanup=function(){var t=this;t.poll&&(t.poll.abort(),t.poll=null)};var I=k["xhr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",re,n.XHRCorsObject)};I.prototype=new O,I.enabled=function(){return e.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest&&!/opera/i.test(navigator.userAgent)},I.roundTrips=2,I.need_body=!0;var R=k["xdr-streaming"]=function(t,e){this.run(t,e,"/xhr_streaming",re,n.XDRObject)};R.prototype=new O,R.enabled=function(){return!!e.XDomainRequest},R.roundTrips=2;var N=k["xhr-polling"]=function(t,e){this.run(t,e,"/xhr",re,n.XHRCorsObject)};N.prototype=new O,N.enabled=I.enabled,N.roundTrips=2;var Y=k["xdr-polling"]=function(t,e){this.run(t,e,"/xhr",re,n.XDRObject)};Y.prototype=new O,Y.enabled=R.enabled,Y.roundTrips=2;var F=function(){};F.prototype.i_constructor=function(t,e,i){var r=this;r.ri=t,r.origin=n.getOrigin(i),r.base_url=i,r.trans_url=e;var o=i+"/iframe.html";r.ri._options.devel&&(o+="?t="+ +new Date),r.window_id=n.random_string(8),o+="#"+r.window_id,r.iframeObj=n.createIframe(o,function(t){r.ri._didClose(1006,"Unable to load an iframe ("+t+")")}),r.onmessage_cb=n.bind(r.onmessage,r),n.attachMessage(r.onmessage_cb)},F.prototype.doCleanup=function(){var t=this;if(t.iframeObj){n.detachMessage(t.onmessage_cb);try{t.iframeObj.iframe.contentWindow&&t.postMessage("c")}catch(e){}t.iframeObj.cleanup(),t.iframeObj=null,t.onmessage_cb=t.iframeObj=null}},F.prototype.onmessage=function(t){var e=this;if(t.origin===e.origin){var n=t.data.slice(0,8),i=t.data.slice(8,9),r=t.data.slice(9);if(n===e.window_id)switch(i){case"s":e.iframeObj.loaded(),e.postMessage("s",g.stringify([k.version,e.protocol,e.trans_url,e.base_url]));break;case"t":e.ri._didMessage(r)}}},F.prototype.postMessage=function(t,e){var n=this;n.iframeObj.post(n.window_id+t+(e||""),n.origin)},F.prototype.doSend=function(t){this.postMessage("m",t)},F.enabled=function(){var t=navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("Konqueror");return("function"==typeof e.postMessage||"object"==typeof e.postMessage)&&!t};var j,B=function(t,i){parent!==e?parent.postMessage(j+t+(i||""),"*"):n.log("Can't postMessage, no parent window.",t,i)},U=function(){};U.prototype._didClose=function(t,e){B("t",n.closeFrame(t,e))},U.prototype._didMessage=function(t){B("t",t)},U.prototype._doSend=function(t){this._transport.doSend(t)},U.prototype._doCleanup=function(){this._transport.doCleanup()},n.parent_origin=void 0,k.bootstrap_iframe=function(){var i;j=t.location.hash.slice(1);var r=function(t){if(t.source===parent&&("undefined"==typeof n.parent_origin&&(n.parent_origin=t.origin),t.origin===n.parent_origin)){var r=t.data.slice(0,8),o=t.data.slice(8,9),a=t.data.slice(9);if(r===j)switch(o){case"s":var s=g.parse(a),l=s[0],u=s[1],h=s[2],c=s[3];if(l!==k.version&&n.log('Incompatibile SockJS! Main site uses: "'+l+'", the iframe: "'+k.version+'".'),!n.flatUrl(h)||!n.flatUrl(c))return void n.log("Only basic urls are supported in SockJS");if(!n.isSameOriginUrl(h)||!n.isSameOriginUrl(c))return void n.log("Can't connect to different domain from within an iframe. ("+g.stringify([e.location.href,h,c])+")");i=new U,i._transport=new U[u](i,h,c);break;case"m":i._doSend(a);break;case"c":i&&i._doCleanup(),i=null}}};n.attachMessage(r),B("s")};var H=function(t,e){var i=this;n.delay(function(){i.doXhr(t,e)})};H.prototype=new o(["finish"]),H.prototype.doXhr=function(t,e){var i=this,r=(new Date).getTime(),o=new e("GET",t+"/info?cb="+n.random_string(10)),a=n.delay(8e3,function(){o.ontimeout()});o.onfinish=function(t,e){if(clearTimeout(a),a=null,200===t){var n=(new Date).getTime()-r,o=g.parse(e);"object"!=typeof o&&(o={}),i.emit("finish",o,n)}else i.emit("finish")},o.ontimeout=function(){o.close(),i.emit("finish")}};var G=function(e){var i=this,r=function(){var t=new F;t.protocol="w-iframe-info-receiver";var n=function(e){if("string"==typeof e&&"m"===e.substr(0,1)){var n=g.parse(e.substr(1)),r=n[0],o=n[1];i.emit("finish",r,o)}else i.emit("finish");t.doCleanup(),t=null},r={_options:{},_didClose:n,_didMessage:n};t.i_constructor(r,e,e)};t.body?r():n.attachEvent("load",r)};G.prototype=new o(["finish"]);var W=function(){var t=this;n.delay(function(){t.emit("finish",{},2e3)})};W.prototype=new o(["finish"]);var z=function(t){if(n.isSameOriginUrl(t))return new H(t,n.XHRLocalObject);switch(n.isXHRCorsCapable()){case 1:return new H(t,n.XHRLocalObject);case 2:return n.isSameOriginScheme(t)?new H(t,n.XDRObject):new W;case 3:return new G(t);default:return new W}},V=U["w-iframe-info-receiver"]=function(t,e,i){var r=new H(i,n.XHRLocalObject);r.onfinish=function(e,n){t._didMessage("m"+g.stringify([e,n])),t._didClose()}};V.prototype.doCleanup=function(){};var $=k["iframe-eventsource"]=function(){var t=this;t.protocol="w-iframe-eventsource",t.i_constructor.apply(t,arguments)};$.prototype=new F,$.enabled=function(){return"EventSource"in e&&F.enabled()},$.need_body=!0,$.roundTrips=3;var X=U["w-iframe-eventsource"]=function(t,e){this.run(t,e,"/eventsource",te,n.XHRLocalObject)};X.prototype=new O;var q=k["iframe-xhr-polling"]=function(){var t=this;t.protocol="w-iframe-xhr-polling",t.i_constructor.apply(t,arguments)};q.prototype=new F,q.enabled=function(){return e.XMLHttpRequest&&F.enabled()},q.need_body=!0,q.roundTrips=3;var K=U["w-iframe-xhr-polling"]=function(t,e){this.run(t,e,"/xhr",re,n.XHRLocalObject)};K.prototype=new O;var J=k["iframe-htmlfile"]=function(){var t=this;t.protocol="w-iframe-htmlfile",t.i_constructor.apply(t,arguments)};J.prototype=new F,J.enabled=function(){return F.enabled()},J.need_body=!0,J.roundTrips=3;var Q=U["w-iframe-htmlfile"]=function(t,e){this.run(t,e,"/htmlfile",ie,n.XHRLocalObject)};Q.prototype=new O;var Z=function(t,e,n,i){var r=this;r.ri=t,r.Receiver=e,r.recv_url=n,r.AjaxObject=i,r._scheduleRecv()};Z.prototype._scheduleRecv=function(){var t=this,e=t.poll=new t.Receiver(t.recv_url,t.AjaxObject),n=0;e.onmessage=function(e){n+=1,t.ri._didMessage(e.data)},e.onclose=function(n){t.poll=e=e.onmessage=e.onclose=null,t.poll_is_closing||("permanent"===n.reason?t.ri._didClose(1006,"Polling error ("+n.reason+")"):t._scheduleRecv())}},Z.prototype.abort=function(){var t=this;t.poll_is_closing=!0,t.poll&&t.poll.abort()};var te=function(t){var e=this,i=new EventSource(t);i.onmessage=function(t){e.dispatchEvent(new r("message",{data:unescape(t.data)}))},e.es_close=i.onerror=function(t,o){var a=o?"user":2!==i.readyState?"network":"permanent";e.es_close=i.onmessage=i.onerror=null,i.close(),i=null,n.delay(200,function(){e.dispatchEvent(new r("close",{reason:a}))})}};te.prototype=new i,te.prototype.abort=function(){var t=this;t.es_close&&t.es_close({},!0)};var ee,ne=function(){if(void 0===ee)if("ActiveXObject"in e)try{ee=!!new ActiveXObject("htmlfile")}catch(t){}else ee=!1;return ee},ie=function(t){var i=this;n.polluteGlobalNamespace(),i.id="a"+n.random_string(6,26),t+=(-1===t.indexOf("?")?"?":"&")+"c="+escape(s+"."+i.id);var o,a=ne()?n.createHtmlfile:n.createIframe;e[s][i.id]={start:function(){o.loaded()},message:function(t){i.dispatchEvent(new r("message",{data:t}))},stop:function(){i.iframe_close({},"network")}},i.iframe_close=function(t,n){o.cleanup(),i.iframe_close=o=null,delete e[s][i.id],i.dispatchEvent(new r("close",{reason:n}))},o=a(t,function(){i.iframe_close({},"permanent")})};ie.prototype=new i,ie.prototype.abort=function(){var t=this;t.iframe_close&&t.iframe_close({},"user")};var re=function(t,e){var n=this,i=0;n.xo=new e("POST",t,null),n.xo.onchunk=function(t,e){if(200===t)for(;;){var o=e.slice(i),a=o.indexOf("\n");if(-1===a)break;i+=a+1;var s=o.slice(0,a);n.dispatchEvent(new r("message",{data:s}))}},n.xo.onfinish=function(t,e){n.xo.onchunk(t,e),n.xo=null;var i=200===t?"network":"permanent";n.dispatchEvent(new r("close",{reason:i}))}};return re.prototype=new i,re.prototype.abort=function(){var t=this;t.xo&&(t.xo.close(),t.dispatchEvent(new r("close",{reason:"user"})),t.xo=null)},k.getUtils=function(){return n},k.getIframeTransport=function(){return F},k}(),"_sockjs_onload"in window&&setTimeout(_sockjs_onload,1),"function"==typeof define&&define.amd&&define("sockjs",[],function(){return n})}.call(this),function(){e.ClientStream=function(t,e){var n=this;n.options=y.extend({retry:!0},e),n._initCommon(),n.HEARTBEAT_TIMEOUT=1e5,n.rawUrl=t,n.socket=null,n.heartbeatTimer=null,"undefined"!=typeof window&&window.addEventListener&&window.addEventListener("online",y.bind(n._online,n),!1),n._launchConnection()},y.extend(e.ClientStream.prototype,{send:function(t){var e=this;e.currentStatus.connected&&e.socket.send(t)},_changeUrl:function(t){var e=this;e.rawUrl=t},_connected:function(){var t=this;t.connectionTimer&&(clearTimeout(t.connectionTimer),t.connectionTimer=null),t.currentStatus.connected||(t.currentStatus.status="connected",t.currentStatus.connected=!0,t.currentStatus.retryCount=0,t.statusChanged(),y.each(t.eventCallbacks.reset,function(t){t()}))},_cleanup:function(){var t=this;t._clearConnectionAndHeartbeatTimers(),t.socket&&(t.socket.onmessage=t.socket.onclose=t.socket.onerror=t.socket.onheartbeat=function(){},t.socket.close(),t.socket=null),y.each(t.eventCallbacks.disconnect,function(t){t()})},_clearConnectionAndHeartbeatTimers:function(){var t=this;t.connectionTimer&&(clearTimeout(t.connectionTimer),t.connectionTimer=null),t.heartbeatTimer&&(clearTimeout(t.heartbeatTimer),t.heartbeatTimer=null)},_heartbeat_timeout:function(){var t=this;p._debug("Connection timeout. No sockjs heartbeat received."),t._lostConnection()},_heartbeat_received:function(){var t=this;t._forcedToDisconnect||(t.heartbeatTimer&&clearTimeout(t.heartbeatTimer),t.heartbeatTimer=setTimeout(y.bind(t._heartbeat_timeout,t),t.HEARTBEAT_TIMEOUT))
},_sockjsProtocolsWhitelist:function(){var t=["xdr-polling","xhr-polling","iframe-xhr-polling","jsonp-polling"],e=navigator&&/iPhone|iPad|iPod/.test(navigator.userAgent)&&/OS 4_|OS 5_/.test(navigator.userAgent);return e||(t=["websocket"].concat(t)),t},_launchConnection:function(){var t=this;t._cleanup();var e=y.extend({protocols_whitelist:t._sockjsProtocolsWhitelist()},t.options._sockjsOptions);t.socket=new n(i(t.rawUrl),void 0,e),t.socket.onopen=function(){t._connected()},t.socket.onmessage=function(e){t._heartbeat_received(),t.currentStatus.connected&&y.each(t.eventCallbacks.message,function(t){t(e.data)})},t.socket.onclose=function(){t._lostConnection()},t.socket.onerror=function(){p._debug("stream error",y.toArray(arguments),(new Date).toDateString())},t.socket.onheartbeat=function(){t._heartbeat_received()},t.connectionTimer&&clearTimeout(t.connectionTimer),t.connectionTimer=setTimeout(y.bind(t._lostConnection,t),t.CONNECT_TIMEOUT)}})}.call(this),function(){var t=function(t,e){return t.length>=e.length&&t.substring(0,e.length)===e},n=function(t,e){return t.length>=e.length&&t.substring(t.length-e.length)===e},o=function(e,i,r){i||(i="http");var o,a=e.match(/^ddp(i?)\+sockjs:\/\//),s=e.match(/^http(s?):\/\//);if(a){var l=e.substr(a[0].length);o="i"===a[1]?i:i+"s";var u=l.indexOf("/"),h=-1===u?l:l.substr(0,u),c=-1===u?"":l.substr(u);return h=h.replace(/\*/g,function(){return Math.floor(10*f.fraction())}),o+"://"+h+c}if(s){o=s[1]?i+"s":i;var d=e.substr(s[0].length);e=o+"://"+d}return-1!==e.indexOf("://")||t(e,"/")||(e=i+"://"+e),e=p._relativeToSiteRootUrl(e),n(e,"/")?e+r:e+"/"+r};i=function(t){return o(t,"http","sockjs")},r=function(t){var e=o(t,"ws","websocket");return e},e.toSockjsUrl=i,y.extend(e.ClientStream.prototype,{on:function(t,e){var n=this;if("message"!==t&&"reset"!==t&&"disconnect"!==t)throw new Error("unknown event type: "+t);n.eventCallbacks[t]||(n.eventCallbacks[t]=[]),n.eventCallbacks[t].push(e)},_initCommon:function(){var t=this;t.CONNECT_TIMEOUT=1e4,t.eventCallbacks={},t._forcedToDisconnect=!1,t.currentStatus={status:"connecting",connected:!1,retryCount:0},t.statusListeners="undefined"!=typeof _&&new _.Dependency,t.statusChanged=function(){t.statusListeners&&t.statusListeners.changed()},t._retry=new v,t.connectionTimer=null},reconnect:function(t){var e=this;return t=t||{},t.url&&e._changeUrl(t.url),t._sockjsOptions&&(e.options._sockjsOptions=t._sockjsOptions),e.currentStatus.connected?void((t._force||t.url)&&e._lostConnection()):("connecting"===e.currentStatus.status&&e._lostConnection(),e._retry.clear(),e.currentStatus.retryCount-=1,void e._retryNow())},disconnect:function(t){var e=this;t=t||{},e._forcedToDisconnect||(t._permanent&&(e._forcedToDisconnect=!0),e._cleanup(),e._retry.clear(),e.currentStatus={status:t._permanent?"failed":"offline",connected:!1,retryCount:0},t._permanent&&t._error&&(e.currentStatus.reason=t._error),e.statusChanged())},_lostConnection:function(){var t=this;t._cleanup(),t._retryLater()},_online:function(){"offline"!=this.currentStatus.status&&this.reconnect()},_retryLater:function(){var t=this,e=0;t.options.retry&&(e=t._retry.retryLater(t.currentStatus.retryCount,y.bind(t._retryNow,t))),t.currentStatus.status="waiting",t.currentStatus.connected=!1,t.currentStatus.retryTime=(new Date).getTime()+e,t.statusChanged()},_retryNow:function(){var t=this;t._forcedToDisconnect||(t.currentStatus.retryCount+=1,t.currentStatus.status="connecting",t.currentStatus.connected=!1,delete t.currentStatus.retryTime,t.statusChanged(),t._launchConnection())},status:function(){var t=this;return t.statusListeners&&t.statusListeners.depend(),t.currentStatus}})}.call(this),function(){o=function(t){var e=this;e.heartbeatInterval=t.heartbeatInterval,e.heartbeatTimeout=t.heartbeatTimeout,e._sendPing=t.sendPing,e._onTimeout=t.onTimeout,e._heartbeatIntervalHandle=null,e._heartbeatTimeoutHandle=null},y.extend(o.prototype,{stop:function(){var t=this;t._clearHeartbeatIntervalTimer(),t._clearHeartbeatTimeoutTimer()},start:function(){var t=this;t.stop(),t._startHeartbeatIntervalTimer()},_startHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle=p.setTimeout(y.bind(t._heartbeatIntervalFired,t),t.heartbeatInterval)},_startHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle=p.setTimeout(y.bind(t._heartbeatTimeoutFired,t),t.heartbeatTimeout)},_clearHeartbeatIntervalTimer:function(){var t=this;t._heartbeatIntervalHandle&&(p.clearTimeout(t._heartbeatIntervalHandle),t._heartbeatIntervalHandle=null)},_clearHeartbeatTimeoutTimer:function(){var t=this;t._heartbeatTimeoutHandle&&(p.clearTimeout(t._heartbeatTimeoutHandle),t._heartbeatTimeoutHandle=null)},_heartbeatIntervalFired:function(){var t=this;t._heartbeatIntervalHandle=null,t._sendPing(),t._startHeartbeatTimeoutTimer()},_heartbeatTimeoutFired:function(){var t=this;t._heartbeatTimeoutHandle=null,t._onTimeout()},pingReceived:function(){var t=this;t._heartbeatIntervalHandle&&(t._clearHeartbeatIntervalTimer(),t._startHeartbeatIntervalTimer())},pongReceived:function(){var t=this;t._heartbeatTimeoutHandle&&(t._clearHeartbeatTimeoutTimer(),t._startHeartbeatIntervalTimer())}})}.call(this),function(){t={},a=["pre2","pre1"],e.SUPPORTED_DDP_VERSIONS=a,s=function(t){this.isSimulation=t.isSimulation,this._unblock=t.unblock||function(){},this._calledUnblock=!1,this.userId=t.userId,this._setUserId=t.setUserId||function(){},this.connection=t.connection,this.randomSeed=t.randomSeed,this.randomStream=null},y.extend(s.prototype,{unblock:function(){var t=this;t._calledUnblock=!0,t._unblock()},setUserId:function(t){var e=this;if(e._calledUnblock)throw new Error("Can't call setUserId in a method after calling unblock");e.userId=t,e._setUserId(t)}}),l=function(t){try{var e=g.parse(t)}catch(n){return p._debug("Discarding message with invalid JSON",t),null}return null===e||"object"!=typeof e?(p._debug("Discarding non-object DDP message",t),null):(y.has(e,"cleared")&&(y.has(e,"fields")||(e.fields={}),y.each(e.cleared,function(t){e.fields[t]=void 0}),delete e.cleared),y.each(["fields","params","result"],function(t){y.has(e,t)&&(e[t]=m._adjustTypesFromJSONValue(e[t]))}),e)},u=function(t){var e=m.clone(t);if(y.has(t,"fields")){var n=[];y.each(t.fields,function(t,i){void 0===t&&(n.push(i),delete e.fields[i])}),y.isEmpty(n)||(e.cleared=n),y.isEmpty(e.fields)&&delete e.fields}if(y.each(["fields","params","result"],function(t){y.has(e,t)&&(e[t]=m._adjustTypesToJSONValue(e[t]))}),t.id&&"string"!=typeof t.id)throw new Error("Message id is not a string");return g.stringify(e)},t._CurrentInvocation=new p.EnvironmentVariable}.call(this),function(){function e(){return f.hexString(20)}h=function(t){this.seed=[].concat(t.seed||e()),this.sequences={}},h.get=function(t,e){if(e||(e="default"),!t)return f;var n=t.randomStream;return n||(t.randomStream=n=new h({seed:t.randomSeed})),n._sequence(e)},t.randomStream=function(e){var n=t._CurrentInvocation.get();return h.get(n,e)},c=function(t,e){var n=h.get(t,"/rpc/"+e);return n.hexString(20)},y.extend(h.prototype,{_sequence:function(t){var e=this,n=e.sequences[t]||null;if(null===n){for(var i=e.seed.concat(t),r=0;r<i.length;r++)y.isFunction(i[r])&&(i[r]=i[r]());e.sequences[t]=n=f.createWithSeeds.apply(null,i)}return n}})}.call(this),function(){if(p.isServer)var n=Npm.require("path"),i=(Npm.require("fibers"),Npm.require(n.join("fibers","future")));var r=function(t,n){var i=this;n=y.extend({onConnected:function(){},onDDPVersionNegotiationFailure:function(t){p._debug(t)},heartbeatInterval:35e3,heartbeatTimeout:15e3,reloadWithOutstanding:!1,supportedDDPVersions:a,retry:!0,respondToPings:!0},n),i.onReconnect=null,i._stream="object"==typeof t?t:new e.ClientStream(t,{retry:n.retry,headers:n.headers,_sockjsOptions:n._sockjsOptions,_dontPrintErrors:n._dontPrintErrors}),i._lastSessionId=null,i._versionSuggestion=null,i._version=null,i._stores={},i._methodHandlers={},i._nextMethodId=1,i._supportedDDPVersions=n.supportedDDPVersions,i._heartbeatInterval=n.heartbeatInterval,i._heartbeatTimeout=n.heartbeatTimeout,i._methodInvokers={},i._outstandingMethodBlocks=[],i._documentsWrittenByStub={},i._serverDocuments={},i._afterUpdateCallbacks=[],i._messagesBufferedUntilQuiescence=[],i._methodsBlockingQuiescence={},i._subsBeingRevived={},i._resetStores=!1,i._updatesForUnknownStores={},i._retryMigrate=null,i._subscriptions={},i._userId=null,i._userIdDeps=new _.Dependency,p.isClient&&Package.reload&&!n.reloadWithOutstanding&&Package.reload.Reload._onMigrate(function(t){if(i._readyToMigrate())return[!0];if(i._retryMigrate)throw new Error("Two migrations in progress?");return i._retryMigrate=t,!1});var r=function(t){try{var e=l(t)}catch(r){return void p._debug("Exception while parsing DDP",r)}if(null===e||!e.msg)return void(e&&e.server_id||p._debug("discarding invalid livedata message",e));if("connected"===e.msg)i._version=i._versionSuggestion,i._livedata_connected(e),n.onConnected();else if("failed"==e.msg)if(y.contains(i._supportedDDPVersions,e.version))i._versionSuggestion=e.version,i._stream.reconnect({_force:!0});else{var o="DDP version negotiation failed; server requested version "+e.version;i._stream.disconnect({_permanent:!0,_error:o}),n.onDDPVersionNegotiationFailure(o)}else"ping"===e.msg?(n.respondToPings&&i._send({msg:"pong",id:e.id}),i._heartbeat&&i._heartbeat.pingReceived()):"pong"===e.msg?i._heartbeat&&i._heartbeat.pongReceived():y.include(["added","changed","removed","ready","updated"],e.msg)?i._livedata_data(e):"nosub"===e.msg?i._livedata_nosub(e):"result"===e.msg?i._livedata_result(e):"error"===e.msg?i._livedata_error(e):p._debug("discarding unknown livedata message type",e)},o=function(){var t={msg:"connect"};i._lastSessionId&&(t.session=i._lastSessionId),t.version=i._versionSuggestion||i._supportedDDPVersions[0],i._versionSuggestion=t.version,t.support=i._supportedDDPVersions,i._send(t),!y.isEmpty(i._outstandingMethodBlocks)&&y.isEmpty(i._outstandingMethodBlocks[0].methods)&&i._outstandingMethodBlocks.shift(),y.each(i._methodInvokers,function(t){t.sentMessage=!1}),i.onReconnect?i._callOnReconnectAndSendAppropriateOutstandingMethods():i._sendOutstandingMethods(),y.each(i._subscriptions,function(t,e){i._send({msg:"sub",id:e,name:t.name,params:t.params})})},s=function(){i._heartbeat&&(i._heartbeat.stop(),i._heartbeat=null)};p.isServer?(i._stream.on("message",p.bindEnvironment(r,p._debug)),i._stream.on("reset",p.bindEnvironment(o,p._debug)),i._stream.on("disconnect",p.bindEnvironment(s,p._debug))):(i._stream.on("message",r),i._stream.on("reset",o),i._stream.on("disconnect",s))},h=function(t){var e=this;e.methodId=t.methodId,e.sentMessage=!1,e._callback=t.callback,e._connection=t.connection,e._message=t.message,e._onResultReceived=t.onResultReceived||function(){},e._wait=t.wait,e._methodResult=null,e._dataVisible=!1,e._connection._methodInvokers[e.methodId]=e};y.extend(h.prototype,{sendMessage:function(){var t=this;if(t.gotResult())throw new Error("sendingMethod is called on method with result");t._dataVisible=!1,t.sentMessage=!0,t._wait&&(t._connection._methodsBlockingQuiescence[t.methodId]=!0),t._connection._send(t._message)},_maybeInvokeCallback:function(){var t=this;t._methodResult&&t._dataVisible&&(t._callback(t._methodResult[0],t._methodResult[1]),delete t._connection._methodInvokers[t.methodId],t._connection._outstandingMethodFinished())},receiveResult:function(t,e){var n=this;if(n.gotResult())throw new Error("Methods should only receive results once");n._methodResult=[t,e],n._onResultReceived(t,e),n._maybeInvokeCallback()},dataVisible:function(){var t=this;t._dataVisible=!0,t._maybeInvokeCallback()},gotResult:function(){var t=this;return!!t._methodResult}}),y.extend(r.prototype,{registerStore:function(t,e){var n=this;if(t in n._stores)return!1;var i={};y.each(["update","beginUpdate","endUpdate","saveOriginals","retrieveOriginals"],function(t){i[t]=function(){return e[t]?e[t].apply(e,arguments):void 0}}),n._stores[t]=i;var r=n._updatesForUnknownStores[t];return r&&(i.beginUpdate(r.length,!1),y.each(r,function(t){i.update(t)}),i.endUpdate(),delete n._updatesForUnknownStores[t]),!0},subscribe:function(t){var e=this,n=Array.prototype.slice.call(arguments,1),i={};if(n.length){var r=n[n.length-1];"function"==typeof r?i.onReady=n.pop():!r||"function"!=typeof r.onReady&&"function"!=typeof r.onError||(i=n.pop())}var o,a=y.find(e._subscriptions,function(e){return e.inactive&&e.name===t&&m.equals(e.params,n)});a?(o=a.id,a.inactive=!1,i.onReady&&(a.ready||(a.readyCallback=i.onReady)),i.onError&&(a.errorCallback=i.onError)):(o=f.id(),e._subscriptions[o]={id:o,name:t,params:m.clone(n),inactive:!1,ready:!1,readyDeps:new _.Dependency,readyCallback:i.onReady,errorCallback:i.onError,connection:e,remove:function(){delete this.connection._subscriptions[this.id],this.ready&&this.readyDeps.changed()},stop:function(){this.connection._send({msg:"unsub",id:o}),this.remove()}},e._send({msg:"sub",id:o,name:t,params:n}));var s={stop:function(){y.has(e._subscriptions,o)&&e._subscriptions[o].stop()},ready:function(){if(!y.has(e._subscriptions,o))return!1;var t=e._subscriptions[o];return t.readyDeps.depend(),t.ready}};return _.active&&_.onInvalidate(function(){y.has(e._subscriptions,o)&&(e._subscriptions[o].inactive=!0),_.afterFlush(function(){y.has(e._subscriptions,o)&&e._subscriptions[o].inactive&&s.stop()})}),s},_subscribeAndWait:function(t,e,n){var r,o=this,a=new i,s=!1;return e=e||[],e.push({onReady:function(){s=!0,a["return"]()},onError:function(t){s?n&&n.onLateError&&n.onLateError(t):a["throw"](t)}}),r=o.subscribe.apply(o,[t].concat(e)),a.wait(),r},methods:function(t){var e=this;y.each(t,function(t,n){if(e._methodHandlers[n])throw new Error("A method named '"+n+"' is already defined");e._methodHandlers[n]=t})},call:function(t){var e=Array.prototype.slice.call(arguments,1);if(e.length&&"function"==typeof e[e.length-1])var n=e.pop();return this.apply(t,e,n)},apply:function(e,n,r,o){var a=this;o||"function"!=typeof r||(o=r,r={}),r=r||{},o&&(o=p.bindEnvironment(o,"delivering result of invoking '"+e+"'")),n=m.clone(n);var l=function(){var t;return function(){return void 0===t&&(t=""+a._nextMethodId++),t}}(),u=t._CurrentInvocation.get(),d=u&&u.isSimulation,f=null,g=function(){return null===f&&(f=c(u,e)),f},_=a._methodHandlers[e];if(_){var v=function(t){a.setUserId(t)},b=new s({isSimulation:!0,userId:a.userId(),setUserId:v,randomSeed:function(){return g()}});d||a._saveOriginals();try{var w=t._CurrentInvocation.withValue(b,function(){return p.isServer?p._noYieldsAllowed(function(){return _.apply(b,m.clone(n))}):_.apply(b,m.clone(n))})}catch(x){var T=x}d||a._retrieveAndStoreOriginals(l())}if(d){if(o)return void o(T,w);if(T)throw T;return w}if(T&&!T.expected&&p._debug("Exception while simulating the effect of invoking '"+e+"'",T,T.stack),!o)if(p.isClient)o=function(t){t&&p._debug("Error invoking Method '"+e+"':",t.message)};else{var M=new i;o=M.resolver()}var k={msg:"method",method:e,params:n,id:l()};null!==f&&(k.randomSeed=f);var S=new h({methodId:l(),callback:o,connection:a,onResultReceived:r.onResultReceived,wait:!!r.wait,message:k});return r.wait?a._outstandingMethodBlocks.push({wait:!0,methods:[S]}):((y.isEmpty(a._outstandingMethodBlocks)||y.last(a._outstandingMethodBlocks).wait)&&a._outstandingMethodBlocks.push({wait:!1,methods:[]}),y.last(a._outstandingMethodBlocks).methods.push(S)),1===a._outstandingMethodBlocks.length&&S.sendMessage(),M?M.wait():r.returnStubValue?w:void 0},_saveOriginals:function(){var t=this;y.each(t._stores,function(t){t.saveOriginals()})},_retrieveAndStoreOriginals:function(t){var e=this;if(e._documentsWrittenByStub[t])throw new Error("Duplicate methodId in _retrieveAndStoreOriginals");var n=[];y.each(e._stores,function(i,r){var o=i.retrieveOriginals();o&&o.forEach(function(i,o){n.push({collection:r,id:o}),y.has(e._serverDocuments,r)||(e._serverDocuments[r]=new b._IdMap);var a=e._serverDocuments[r].setDefault(o,{});a.writtenByStubs?a.writtenByStubs[t]=!0:(a.document=i,a.flushCallbacks=[],a.writtenByStubs={},a.writtenByStubs[t]=!0)})}),y.isEmpty(n)||(e._documentsWrittenByStub[t]=n)},_unsubscribeAll:function(){var t=this;y.each(y.clone(t._subscriptions),function(e,n){"meteor_autoupdate_clientVersions"!==e.name&&t._subscriptions[n].stop()})},_send:function(t){var e=this;e._stream.send(u(t))},_lostConnection:function(){var t=this;t._stream._lostConnection()},status:function(){var t=this;return t._stream.status.apply(t._stream,arguments)},reconnect:function(){var t=this;return t._stream.reconnect.apply(t._stream,arguments)},disconnect:function(){var t=this;return t._stream.disconnect.apply(t._stream,arguments)},close:function(){var t=this;return t._stream.disconnect({_permanent:!0})},userId:function(){var t=this;return t._userIdDeps&&t._userIdDeps.depend(),t._userId},setUserId:function(t){var e=this;e._userId!==t&&(e._userId=t,e._userIdDeps&&e._userIdDeps.changed())},_waitingForQuiescence:function(){var t=this;return!y.isEmpty(t._subsBeingRevived)||!y.isEmpty(t._methodsBlockingQuiescence)},_anyMethodsAreOutstanding:function(){var t=this;return y.any(y.pluck(t._methodInvokers,"sentMessage"))},_livedata_connected:function(t){var e=this;if("pre1"!==e._version&&0!==e._heartbeatInterval&&(e._heartbeat=new o({heartbeatInterval:e._heartbeatInterval,heartbeatTimeout:e._heartbeatTimeout,onTimeout:function(){p.isClient&&!e._stream._isStub&&p._debug("Connection timeout. No DDP heartbeat received."),e._lostConnection()},sendPing:function(){e._send({msg:"ping"})}}),e._heartbeat.start()),e._lastSessionId&&(e._resetStores=!0),"string"==typeof t.session){var n=e._lastSessionId===t.session;e._lastSessionId=t.session}n||(e._updatesForUnknownStores={},e._resetStores&&(e._documentsWrittenByStub={},e._serverDocuments={}),e._afterUpdateCallbacks=[],e._subsBeingRevived={},y.each(e._subscriptions,function(t,n){t.ready&&(e._subsBeingRevived[n]=!0)}),e._methodsBlockingQuiescence={},e._resetStores&&y.each(e._methodInvokers,function(t){t.gotResult()?e._afterUpdateCallbacks.push(y.bind(t.dataVisible,t)):t.sentMessage&&(e._methodsBlockingQuiescence[t.methodId]=!0)}),e._messagesBufferedUntilQuiescence=[],e._waitingForQuiescence()||(e._resetStores&&(y.each(e._stores,function(t){t.beginUpdate(0,!0),t.endUpdate()}),e._resetStores=!1),e._runAfterUpdateCallbacks()))},_processOneDataMessage:function(t,e){var n=this;n["_process_"+t.msg](t,e)},_livedata_data:function(t){var e=this,n={};if(e._waitingForQuiescence()){if(e._messagesBufferedUntilQuiescence.push(t),"nosub"===t.msg&&delete e._subsBeingRevived[t.id],y.each(t.subs||[],function(t){delete e._subsBeingRevived[t]}),y.each(t.methods||[],function(t){delete e._methodsBlockingQuiescence[t]}),e._waitingForQuiescence())return;y.each(e._messagesBufferedUntilQuiescence,function(t){e._processOneDataMessage(t,n)}),e._messagesBufferedUntilQuiescence=[]}else e._processOneDataMessage(t,n);(e._resetStores||!y.isEmpty(n))&&(y.each(e._stores,function(t,i){t.beginUpdate(y.has(n,i)?n[i].length:0,e._resetStores)}),e._resetStores=!1,y.each(n,function(t,n){var i=e._stores[n];i?y.each(t,function(t){i.update(t)}):(y.has(e._updatesForUnknownStores,n)||(e._updatesForUnknownStores[n]=[]),Array.prototype.push.apply(e._updatesForUnknownStores[n],t))}),y.each(e._stores,function(t){t.endUpdate()})),e._runAfterUpdateCallbacks()},_runAfterUpdateCallbacks:function(){var t=this,e=t._afterUpdateCallbacks;t._afterUpdateCallbacks=[],y.each(e,function(t){t()})},_pushUpdate:function(t,e,n){y.has(t,e)||(t[e]=[]),t[e].push(n)},_getServerDoc:function(t,e){var n=this;if(!y.has(n._serverDocuments,t))return null;var i=n._serverDocuments[t];return i.get(e)||null},_process_added:function(t,e){var n=this,i=b._idParse(t.id),r=n._getServerDoc(t.collection,i);if(r){if(void 0!==r.document)throw new Error("Server sent add for existing id: "+t.id);r.document=t.fields||{},r.document._id=i}else n._pushUpdate(e,t.collection,t)},_process_changed:function(t,e){var n=this,i=n._getServerDoc(t.collection,b._idParse(t.id));if(i){if(void 0===i.document)throw new Error("Server sent changed for nonexisting id: "+t.id);b._applyChanges(i.document,t.fields)}else n._pushUpdate(e,t.collection,t)},_process_removed:function(t,e){var n=this,i=n._getServerDoc(t.collection,b._idParse(t.id));if(i){if(void 0===i.document)throw new Error("Server sent removed for nonexisting id:"+t.id);i.document=void 0}else n._pushUpdate(e,t.collection,{msg:"removed",collection:t.collection,id:t.id})},_process_updated:function(t,e){var n=this;y.each(t.methods,function(t){y.each(n._documentsWrittenByStub[t],function(i){var r=n._getServerDoc(i.collection,i.id);if(!r)throw new Error("Lost serverDoc for "+g.stringify(i));if(!r.writtenByStubs[t])throw new Error("Doc "+g.stringify(i)+" not written by  method "+t);delete r.writtenByStubs[t],y.isEmpty(r.writtenByStubs)&&(n._pushUpdate(e,i.collection,{msg:"replace",id:b._idStringify(i.id),replace:r.document}),y.each(r.flushCallbacks,function(t){t()}),n._serverDocuments[i.collection].remove(i.id))}),delete n._documentsWrittenByStub[t];var i=n._methodInvokers[t];if(!i)throw new Error("No callback invoker for method "+t);n._runWhenAllServerDocsAreFlushed(y.bind(i.dataVisible,i))})},_process_ready:function(t){var e=this;y.each(t.subs,function(t){e._runWhenAllServerDocsAreFlushed(function(){var n=e._subscriptions[t];n&&(n.ready||(n.readyCallback&&n.readyCallback(),n.ready=!0,n.readyDeps.changed()))})})},_runWhenAllServerDocsAreFlushed:function(t){var e=this,n=function(){e._afterUpdateCallbacks.push(t)},i=0,r=function(){--i,0===i&&n()};y.each(e._serverDocuments,function(t){t.forEach(function(t){var n=y.any(t.writtenByStubs,function(t,n){var i=e._methodInvokers[n];return i&&i.sentMessage});n&&(++i,t.flushCallbacks.push(r))})}),0===i&&n()},_livedata_nosub:function(t){var e=this;if(e._livedata_data(t),y.has(e._subscriptions,t.id)){var n=e._subscriptions[t.id].errorCallback;e._subscriptions[t.id].remove(),n&&t.error&&n(new p.Error(t.error.error,t.error.reason,t.error.details))}},_process_nosub:function(){},_livedata_result:function(t){var e=this;if(y.isEmpty(e._outstandingMethodBlocks))return void p._debug("Received method result but no methods outstanding");for(var n,i=e._outstandingMethodBlocks[0].methods,r=0;r<i.length&&(n=i[r],n.methodId!==t.id);r++);return n?(i.splice(r,1),void(y.has(t,"error")?n.receiveResult(new p.Error(t.error.error,t.error.reason,t.error.details)):n.receiveResult(void 0,t.result))):void p._debug("Can't match method response to original method call",t)},_outstandingMethodFinished:function(){var t=this;if(!t._anyMethodsAreOutstanding()){if(!y.isEmpty(t._outstandingMethodBlocks)){var e=t._outstandingMethodBlocks.shift();if(!y.isEmpty(e.methods))throw new Error("No methods outstanding but nonempty block: "+g.stringify(e));y.isEmpty(t._outstandingMethodBlocks)||t._sendOutstandingMethods()}t._maybeMigrate()}},_sendOutstandingMethods:function(){var t=this;y.isEmpty(t._outstandingMethodBlocks)||y.each(t._outstandingMethodBlocks[0].methods,function(t){t.sendMessage()})},_livedata_error:function(t){p._debug("Received error from server: ",t.reason),t.offendingMessage&&p._debug("For: ",t.offendingMessage)},_callOnReconnectAndSendAppropriateOutstandingMethods:function(){var t=this,e=t._outstandingMethodBlocks;if(t._outstandingMethodBlocks=[],t.onReconnect(),!y.isEmpty(e)){if(y.isEmpty(t._outstandingMethodBlocks))return t._outstandingMethodBlocks=e,void t._sendOutstandingMethods();y.last(t._outstandingMethodBlocks).wait||e[0].wait||(y.each(e[0].methods,function(e){y.last(t._outstandingMethodBlocks).methods.push(e),1===t._outstandingMethodBlocks.length&&e.sendMessage()}),e.shift()),y.each(e,function(e){t._outstandingMethodBlocks.push(e)})}},_readyToMigrate:function(){var t=this;return y.isEmpty(t._methodInvokers)},_maybeMigrate:function(){var t=this;t._retryMigrate&&t._readyToMigrate()&&(t._retryMigrate(),t._retryMigrate=null)}}),e.Connection=r,t.connect=function(t,e){var n=new r(t,e);return d.push(n),n},d=[],t._allSubscriptionsReady=function(){return y.all(d,function(t){return y.all(t._subscriptions,function(t){return t.ready})})}}.call(this),function(){if(p.refresh=function(){},p.isClient){var e="/";"undefined"!=typeof __meteor_runtime_config__&&__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL&&(e=__meteor_runtime_config__.DDP_DEFAULT_CONNECTION_URL);var n=new v,i=function(t){if(p._debug(t),Package.reload){var e=Package.reload.Reload._migrationData("livedata")||{},i=e.DDPVersionNegotiationFailures||0;++i,Package.reload.Reload._onMigrate("livedata",function(){return[!0,{DDPVersionNegotiationFailures:i}]}),n.retryLater(i,function(){Package.reload.Reload._reload()})}};p.connection=t.connect(e,{onDDPVersionNegotiationFailure:i}),y.each(["subscribe","methods","call","apply","status","reconnect","disconnect"],function(t){p[t]=y.bind(p.connection[t],p.connection)})}else p.connection=null;p.default_connection=p.connection,p.connect=t.connect}.call(this),"undefined"==typeof Package&&(Package={}),Package.livedata={DDP:t,LivedataTest:e}}(),function(){{var t;Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON}"undefined"==typeof Package&&(Package={}),Package["follower-livedata"]={Follower:t}}(),function(){Package.meteor.Meteor,Package.logging.Log,Package.underscore._,Package.livedata.DDP,Package.ejson.EJSON,Package["follower-livedata"].Follower;"undefined"==typeof Package&&(Package={}),Package["application-configuration"]={}}(),function(){var t,e=Package.meteor.Meteor,n=Package.random.Random,i=Package.ejson.EJSON,r=(Package.json.JSON,Package.underscore._),o=Package.minimongo.LocalCollection,a=(Package.minimongo.Minimongo,Package.logging.Log,Package.livedata.DDP),s=(Package.deps.Deps,Package.check.check),l=Package.check.Match;(function(){t=function(){var t=this;t.noConnCollections={}};var e=function(t,e){return t in e||(e[t]=new o(t)),e[t]};r.extend(t.prototype,{open:function(t,n){var i=this;return t?n?(n._mongo_livedata_collections||(n._mongo_livedata_collections={}),e(t,n._mongo_livedata_collections)):e(t,i.noConnCollections):new o}}),t=new t}).call(this),function(){e.Collection=function(i,s){var l=this;if(!(l instanceof e.Collection))throw new Error('use "new" to construct a Meteor.Collection');if(i||null===i||(e._debug("Warning: creating anonymous collection. It will not be saved or synchronized over the network. (Pass null for the collection name to turn off this warning.)"),i=null),null!==i&&"string"!=typeof i)throw new Error("First argument to new Meteor.Collection must be a string or null");switch(s&&s.methods&&(s={connection:s}),s&&s.manager&&!s.connection&&(s.connection=s.manager),s=r.extend({connection:void 0,idGeneration:"STRING",transform:null,_driver:void 0,_preventAutopublish:!1},s),s.idGeneration){case"MONGO":l._makeNewID=function(){var t=i?a.randomStream("/collection/"+i):n;return new e.Collection.ObjectID(t.hexString(24))};break;case"STRING":default:l._makeNewID=function(){var t=i?a.randomStream("/collection/"+i):n;return t.id()}}if(l._transform=o.wrapTransform(s.transform),l._connection=i&&null!==s.connection?s.connection?s.connection:e.isClient?e.connection:e.server:null,s._driver||(s._driver=i&&l._connection===e.server&&"undefined"!=typeof MongoInternals&&MongoInternals.defaultRemoteCollectionDriver?MongoInternals.defaultRemoteCollectionDriver():t),l._collection=s._driver.open(i,l._connection),l._name=i,l._connection&&l._connection.registerStore){var u=l._connection.registerStore(i,{beginUpdate:function(t,e){(t>1||e)&&l._collection.pauseObservers(),e&&l._collection.remove({})},update:function(t){var e=o._idParse(t.id),n=l._collection.findOne(e);if("replace"===t.msg){var i=t.replace;return void(i?n?l._collection.update(e,i):l._collection.insert(i):n&&l._collection.remove(e))}if("added"===t.msg){if(n)throw new Error("Expected not to find a document already present for an add");l._collection.insert(r.extend({_id:e},t.fields))}else if("removed"===t.msg){if(!n)throw new Error("Expected to find a document already present for removed");l._collection.remove(e)}else{if("changed"!==t.msg)throw new Error("I don't know how to deal with this message");if(!n)throw new Error("Expected to find a document to change");if(!r.isEmpty(t.fields)){var a={};r.each(t.fields,function(t,e){void 0===t?(a.$unset||(a.$unset={}),a.$unset[e]=1):(a.$set||(a.$set={}),a.$set[e]=t)}),l._collection.update(e,a)}}},endUpdate:function(){l._collection.resumeObservers()},saveOriginals:function(){l._collection.saveOriginals()},retrieveOriginals:function(){return l._collection.retrieveOriginals()}});if(!u)throw new Error("There is already a collection named '"+i+"'")}l._defineMutationMethods(),Package.autopublish&&!s._preventAutopublish&&l._connection&&l._connection.publish&&l._connection.publish(null,function(){return l.find()},{is_auto:!0})},r.extend(e.Collection.prototype,{_getFindSelector:function(t){return 0==t.length?{}:t[0]},_getFindOptions:function(t){var e=this;return t.length<2?{transform:e._transform}:(s(t[1],l.Optional(l.ObjectIncluding({fields:l.Optional(l.OneOf(Object,void 0)),sort:l.Optional(l.OneOf(Object,Array,void 0)),limit:l.Optional(l.OneOf(Number,void 0)),skip:l.Optional(l.OneOf(Number,void 0))}))),r.extend({transform:e._transform},t[1]))},find:function(){var t=this,e=r.toArray(arguments);return t._collection.find(t._getFindSelector(e),t._getFindOptions(e))},findOne:function(){var t=this,e=r.toArray(arguments);return t._collection.findOne(t._getFindSelector(e),t._getFindOptions(e))}}),e.Collection._publishCursor=function(t,e,n){var i=t.observeChanges({added:function(t,i){e.added(n,t,i)},changed:function(t,i){e.changed(n,t,i)},removed:function(t){e.removed(n,t)}});e.onStop(function(){i.stop()})},e.Collection._rewriteSelector=function(t){if(o._selectorIsId(t)&&(t={_id:t}),!t||"_id"in t&&!t._id)return{_id:n.id()};var i={};return r.each(t,function(t,n){t instanceof RegExp?i[n]=u(t):t&&t.$regex instanceof RegExp?(i[n]=u(t.$regex),void 0!==t.$options&&(i[n].$options=t.$options)):i[n]=r.contains(["$or","$and","$nor"],n)?r.map(t,function(t){return e.Collection._rewriteSelector(t)}):t}),i};var u=function(t){s(t,RegExp);var e={$regex:t.source},n="";return t.ignoreCase&&(n+="i"),t.multiline&&(n+="m"),n&&(e.$options=n),e},h=function(t,n){if(!o._selectorIsIdPerhapsAsObject(t))throw new e.Error(403,"Not permitted. Untrusted code may only "+n+" documents by ID.")};r.each(["insert","update","remove"],function(t){e.Collection.prototype[t]=function(){var n,i,o,s=this,l=r.toArray(arguments);if(l.length&&l[l.length-1]instanceof Function&&(n=l.pop()),"insert"===t){if(!l.length)throw new Error("insert requires an argument");if(l[0]=r.extend({},l[0]),"_id"in l[0]){if(i=l[0]._id,!i||!("string"==typeof i||i instanceof e.Collection.ObjectID))throw new Error("Meteor requires document _id fields to be non-empty strings or ObjectIDs")}else{var u=!0;if(s._connection&&s._connection!==e.server){var c=a._CurrentInvocation.get();c||(u=!1)}u&&(i=l[0]._id=s._makeNewID())}}else if(l[0]=e.Collection._rewriteSelector(l[0]),"update"===t){var d=l[2]=r.clone(l[2])||{};if(d&&"function"!=typeof d&&d.upsert)if(d.insertedId){if(!("string"==typeof d.insertedId||d.insertedId instanceof e.Collection.ObjectID))throw new Error("insertedId must be string or ObjectID")}else d.insertedId=s._makeNewID()}var p,f=function(e){return"insert"===t?(!i&&e&&(i=e),i):e};if(n&&(p=function(t,e){n(t,!t&&f(e))}),s._connection&&s._connection!==e.server){var c=a._CurrentInvocation.get(),m=c&&c.isSimulation;!e.isClient||p||m||(p=function(n){n&&e._debug(t+" failed: "+(n.reason||n.stack))}),m||"insert"===t||h(l[0],t),o=f(s._connection.apply(s._prefix+t,l,{returnStubValue:!0},p))}else{l.push(p);try{var g=s._collection[t].apply(s._collection,l);o=f(g)}catch(y){if(n)return n(y),null;throw y}}return o}}),e.Collection.prototype.upsert=function(t,e,n,i){var o=this;return i||"function"!=typeof n||(i=n,n={}),o.update(t,e,r.extend({},n,{_returnObject:!0,upsert:!0}),i)},e.Collection.prototype._ensureIndex=function(t,e){var n=this;if(!n._collection._ensureIndex)throw new Error("Can only call _ensureIndex on server collections");
n._collection._ensureIndex(t,e)},e.Collection.prototype._dropIndex=function(t){var e=this;if(!e._collection._dropIndex)throw new Error("Can only call _dropIndex on server collections");e._collection._dropIndex(t)},e.Collection.prototype._dropCollection=function(){var t=this;if(!t._collection.dropCollection)throw new Error("Can only call _dropCollection on server collections");t._collection.dropCollection()},e.Collection.prototype._createCappedCollection=function(t){var e=this;if(!e._collection._createCappedCollection)throw new Error("Can only call _createCappedCollection on server collections");e._collection._createCappedCollection(t)},e.Collection.ObjectID=o._ObjectID,function(){var t=function(t,e){var n=["insert","update","remove","fetch","transform"];r.each(r.keys(e),function(e){if(!r.contains(n,e))throw new Error(t+": Invalid key: "+e)});var i=this;if(i._restricted=!0,r.each(["insert","update","remove"],function(n){if(e[n]){if(!(e[n]instanceof Function))throw new Error(t+": Value for `"+n+"` must be a function");e[n].transform=void 0===e.transform?i._transform:o.wrapTransform(e.transform),i._validators[n][t].push(e[n])}}),e.update||e.remove||e.fetch){if(e.fetch&&!(e.fetch instanceof Array))throw new Error(t+": Value for `fetch` must be an array");i._updateFetch(e.fetch)}};e.Collection.prototype.allow=function(e){t.call(this,"allow",e)},e.Collection.prototype.deny=function(e){t.call(this,"deny",e)}}(),e.Collection.prototype._defineMutationMethods=function(){var t=this;if(t._restricted=!1,t._insecure=void 0,t._validators={insert:{allow:[],deny:[]},update:{allow:[],deny:[]},remove:{allow:[],deny:[]},upsert:{allow:[],deny:[]},fetch:[],fetchAllFields:!1},t._name&&(t._prefix="/"+t._name+"/",t._connection)){var n={};r.each(["insert","update","remove"],function(i){n[t._prefix+i]=function(){s(arguments,[l.Any]);var n=r.toArray(arguments);try{var o=null;if("insert"!==i||r.has(n[0],"_id")||(o=t._makeNewID()),this.isSimulation)return null!==o&&(n[0]._id=o),t._collection[i].apply(t._collection,n);if("insert"!==i&&h(n[0],i),t._restricted){if(0===t._validators[i].allow.length)throw new e.Error(403,"Access denied. No allow validators set on restricted collection for method '"+i+"'.");var a="_validated"+i.charAt(0).toUpperCase()+i.slice(1);return n.unshift(this.userId),"insert"===i&&n.push(o),t[a].apply(t,n)}if(t._isInsecure())return null!==o&&(n[0]._id=o),t._collection[i].apply(t._collection,n);throw new e.Error(403,"Access denied")}catch(u){throw"MongoError"===u.name||"MinimongoError"===u.name?new e.Error(409,u.toString()):u}}}),(e.isClient||t._connection===e.server)&&t._connection.methods(n)}},e.Collection.prototype._updateFetch=function(t){var e=this;e._validators.fetchAllFields||(t?e._validators.fetch=r.union(e._validators.fetch,t):(e._validators.fetchAllFields=!0,e._validators.fetch=null))},e.Collection.prototype._isInsecure=function(){var t=this;return void 0===t._insecure?!!Package.insecure:t._insecure};var c=function(t,e,n){var r=e;return t.transform&&(r=i.clone(e),null!==n&&(r._id=n),r=t.transform(r)),r};e.Collection.prototype._validatedInsert=function(t,n,i){var o=this;if(r.any(o._validators.insert.deny,function(e){return e(t,c(e,n,i))}))throw new e.Error(403,"Access denied");if(r.all(o._validators.insert.allow,function(e){return!e(t,c(e,n,i))}))throw new e.Error(403,"Access denied");null!==i&&(n._id=i),o._collection.insert.call(o._collection,n)};var d=function(t,e){return t.transform?t.transform(e):e};e.Collection.prototype._validatedUpdate=function(t,n,i,a){var s=this;if(a=a||{},!o._selectorIsIdPerhapsAsObject(n))throw new Error("validated update should be of a single ID");if(a.upsert)throw new e.Error(403,"Access denied. Upserts not allowed in a restricted collection.");var l=[];r.each(i,function(t,n){if("$"!==n.charAt(0))throw new e.Error(403,"Access denied. In a restricted collection you can only update documents, not replace them. Use a Mongo update operator, such as '$set'.");if(!r.has(p,n))throw new e.Error(403,"Access denied. Operator "+n+" not allowed in a restricted collection.");r.each(r.keys(t),function(t){-1!==t.indexOf(".")&&(t=t.substring(0,t.indexOf("."))),r.contains(l,t)||l.push(t)})});var u={transform:null};s._validators.fetchAllFields||(u.fields={},r.each(s._validators.fetch,function(t){u.fields[t]=1}));var h=s._collection.findOne(n,u);if(!h)return 0;var c;if(r.any(s._validators.update.deny,function(e){return c||(c=d(e,h)),e(t,c,l,i)}))throw new e.Error(403,"Access denied");if(r.all(s._validators.update.allow,function(e){return c||(c=d(e,h)),!e(t,c,l,i)}))throw new e.Error(403,"Access denied");return s._collection.update.call(s._collection,n,i,a)};var p={$inc:1,$set:1,$unset:1,$addToSet:1,$pop:1,$pullAll:1,$pull:1,$pushAll:1,$push:1,$bit:1};e.Collection.prototype._validatedRemove=function(t,n){var i=this,o={transform:null};i._validators.fetchAllFields||(o.fields={},r.each(i._validators.fetch,function(t){o.fields[t]=1}));var a=i._collection.findOne(n,o);if(!a)return 0;if(r.any(i._validators.remove.deny,function(e){return e(t,d(e,a))}))throw new e.Error(403,"Access denied");if(r.all(i._validators.remove.allow,function(e){return!e(t,d(e,a))}))throw new e.Error(403,"Access denied");return i._collection.remove.call(i._collection,n)}}.call(this),"undefined"==typeof Package&&(Package={}),Package["mongo-livedata"]={}}(),function(){var t,e=Package.meteor.Meteor,n=Package.underscore._,i=Package.deps.Deps,r=Package.ejson.EJSON;(function(){var o=function(t){return void 0===t?"undefined":r.stringify(t)},a=function(t){return void 0===t||"undefined"===t?void 0:r.parse(t)};t=function(t){this.keys=t||{},this.keyDeps={},this.keyValueDeps={}},n.extend(t.prototype,{set:function(t,e){var i=this;e=o(e);var r="undefined";if(n.has(i.keys,t)&&(r=i.keys[t]),e!==r){i.keys[t]=e;var a=function(t){t&&t.changed()};a(i.keyDeps[t]),i.keyValueDeps[t]&&(a(i.keyValueDeps[t][r]),a(i.keyValueDeps[t][e]))}},setDefault:function(t,e){var n=this;void 0===n.keys[t]&&n.set(t,e)},get:function(t){var e=this;return e._ensureKey(t),e.keyDeps[t].depend(),a(e.keys[t])},equals:function(t,s){var l=this,u=Package["mongo-livedata"]&&e.Collection.ObjectID;if(!("string"==typeof s||"number"==typeof s||"boolean"==typeof s||"undefined"==typeof s||s instanceof Date||u&&s instanceof u||null===s))throw new Error("ReactiveDict.equals: value must be scalar");var h=o(s);if(i.active){l._ensureKey(t),n.has(l.keyValueDeps[t],h)||(l.keyValueDeps[t][h]=new i.Dependency);var c=l.keyValueDeps[t][h].depend();c&&i.onInvalidate(function(){l.keyValueDeps[t][h].hasDependents()||delete l.keyValueDeps[t][h]})}var d=void 0;return n.has(l.keys,t)&&(d=a(l.keys[t])),r.equals(d,s)},_ensureKey:function(t){var e=this;t in e.keyDeps||(e.keyDeps[t]=new i.Dependency,e.keyValueDeps[t]={})},getMigrationData:function(){return this.keys}})}).call(this),"undefined"==typeof Package&&(Package={}),Package["reactive-dict"]={ReactiveDict:t}}(),function(){{var t,e=(Package.meteor.Meteor,Package.underscore._,Package["reactive-dict"].ReactiveDict);Package.ejson.EJSON}(function(){var n={};if(Package.reload){var i=Package.reload.Reload._migrationData("session");i&&i.keys&&(n=i.keys)}t=new e(n),Package.reload&&Package.reload.Reload._onMigrate("session",function(){return[!0,{keys:t.keys}]})}).call(this),"undefined"==typeof Package&&(Package={}),Package.session={Session:t}}(),function(){{var t,e;Package.meteor.Meteor}(function(){!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=oe.type(t);return"function"===n||oe.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(oe.isFunction(e))return oe.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return oe.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(pe.test(e))return oe.filter(e,t,n);e=oe.filter(e,t)}return oe.grep(t,function(t){return oe.inArray(t,e)>=0!==n})}function r(t,e){do t=t[e];while(t&&1!==t.nodeType);return t}function o(t){var e=we[t]={};return oe.each(t.match(be)||[],function(t,n){e[n]=!0}),e}function a(){me.addEventListener?(me.removeEventListener("DOMContentLoaded",s,!1),t.removeEventListener("load",s,!1)):(me.detachEvent("onreadystatechange",s),t.detachEvent("onload",s))}function s(){(me.addEventListener||"load"===event.type||"complete"===me.readyState)&&(a(),oe.ready())}function l(t,e,n){if(void 0===n&&1===t.nodeType){var i="data-"+e.replace(Se,"-$1").toLowerCase();if(n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:ke.test(n)?oe.parseJSON(n):n}catch(r){}oe.data(t,e,n)}else n=void 0}return n}function u(t){var e;for(e in t)if(("data"!==e||!oe.isEmptyObject(t[e]))&&"toJSON"!==e)return!1;return!0}function h(t,e,n,i){if(oe.acceptData(t)){var r,o,a=oe.expando,s=t.nodeType,l=s?oe.cache:t,u=s?t[a]:t[a]&&a;if(u&&l[u]&&(i||l[u].data)||void 0!==n||"string"!=typeof e)return u||(u=s?t[a]=X.pop()||oe.guid++:a),l[u]||(l[u]=s?{}:{toJSON:oe.noop}),("object"==typeof e||"function"==typeof e)&&(i?l[u]=oe.extend(l[u],e):l[u].data=oe.extend(l[u].data,e)),o=l[u],i||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[oe.camelCase(e)]=n),"string"==typeof e?(r=o[e],null==r&&(r=o[oe.camelCase(e)])):r=o,r}}function c(t,e,n){if(oe.acceptData(t)){var i,r,o=t.nodeType,a=o?oe.cache:t,s=o?t[oe.expando]:oe.expando;if(a[s]){if(e&&(i=n?a[s]:a[s].data)){oe.isArray(e)?e=e.concat(oe.map(e,oe.camelCase)):e in i?e=[e]:(e=oe.camelCase(e),e=e in i?[e]:e.split(" ")),r=e.length;for(;r--;)delete i[e[r]];if(n?!u(i):!oe.isEmptyObject(i))return}(n||(delete a[s].data,u(a[s])))&&(o?oe.cleanData([t],!0):ie.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function d(){return!0}function p(){return!1}function f(){try{return me.activeElement}catch(t){}}function m(t){var e=Ye.split("|"),n=t.createDocumentFragment();if(n.createElement)for(;e.length;)n.createElement(e.pop());return n}function g(t,e){var n,i,r=0,o=typeof t.getElementsByTagName!==Me?t.getElementsByTagName(e||"*"):typeof t.querySelectorAll!==Me?t.querySelectorAll(e||"*"):void 0;if(!o)for(o=[],n=t.childNodes||t;null!=(i=n[r]);r++)!e||oe.nodeName(i,e)?o.push(i):oe.merge(o,g(i,e));return void 0===e||e&&oe.nodeName(t,e)?oe.merge([t],o):o}function y(t){Ae.test(t.type)&&(t.defaultChecked=t.checked)}function _(t,e){return oe.nodeName(t,"table")&&oe.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function v(t){return t.type=(null!==oe.find.attr(t,"type"))+"/"+t.type,t}function b(t){var e=Xe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function w(t,e){for(var n,i=0;null!=(n=t[i]);i++)oe._data(n,"globalEval",!e||oe._data(e[i],"globalEval"))}function x(t,e){if(1===e.nodeType&&oe.hasData(t)){var n,i,r,o=oe._data(t),a=oe._data(e,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(i=0,r=s[n].length;r>i;i++)oe.event.add(e,n,s[n][i])}a.data&&(a.data=oe.extend({},a.data))}}function T(t,e){var n,i,r;if(1===e.nodeType){if(n=e.nodeName.toLowerCase(),!ie.noCloneEvent&&e[oe.expando]){r=oe._data(e);for(i in r.events)oe.removeEvent(e,i,r.handle);e.removeAttribute(oe.expando)}"script"===n&&e.text!==t.text?(v(e).text=t.text,b(e)):"object"===n?(e.parentNode&&(e.outerHTML=t.outerHTML),ie.html5Clone&&t.innerHTML&&!oe.trim(e.innerHTML)&&(e.innerHTML=t.innerHTML)):"input"===n&&Ae.test(t.type)?(e.defaultChecked=e.checked=t.checked,e.value!==t.value&&(e.value=t.value)):"option"===n?e.defaultSelected=e.selected=t.defaultSelected:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}}function M(e,n){var i=oe(n.createElement(e)).appendTo(n.body),r=t.getDefaultComputedStyle?t.getDefaultComputedStyle(i[0]).display:oe.css(i[0],"display");return i.detach(),r}function k(t){var e=me,n=tn[t];return n||(n=M(t,e),"none"!==n&&n||(Ze=(Ze||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=(Ze[0].contentWindow||Ze[0].contentDocument).document,e.write(),e.close(),n=M(t,e),Ze.detach()),tn[t]=n),n}function S(t,e){return{get:function(){var n=t();if(null!=n)return n?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(t,e){if(e in t)return e;for(var n=e.charAt(0).toUpperCase()+e.slice(1),i=e,r=fn.length;r--;)if(e=fn[r]+n,e in t)return e;return i}function L(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=oe._data(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Pe(i)&&(o[a]=oe._data(i,"olddisplay",k(i.nodeName)))):o[a]||(r=Pe(i),(n&&"none"!==n||!r)&&oe._data(i,"olddisplay",r?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function P(t,e,n){var i=hn.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function D(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=oe.css(t,n+Le[o],!0,r)),i?("content"===n&&(a-=oe.css(t,"padding"+Le[o],!0,r)),"margin"!==n&&(a-=oe.css(t,"border"+Le[o]+"Width",!0,r))):(a+=oe.css(t,"padding"+Le[o],!0,r),"padding"!==n&&(a+=oe.css(t,"border"+Le[o]+"Width",!0,r)));return a}function A(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=en(t),a=ie.boxSizing()&&"border-box"===oe.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=nn(t,e,o),(0>r||null==r)&&(r=t.style[e]),on.test(r))return r;i=a&&(ie.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+D(t,e,n||(a?"border":"content"),i,o)+"px"}function E(t,e,n,i,r){return new E.prototype.init(t,e,n,i,r)}function O(){return setTimeout(function(){mn=void 0}),mn=oe.now()}function I(t,e){var n,i={height:t},r=0;for(e=e?1:0;4>r;r+=2-e)n=Le[r],i["margin"+n]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function R(t,e,n){for(var i,r=(wn[e]||[]).concat(wn["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,e,t))return i}function N(t,e,n){var i,r,o,a,s,l,u,h,c=this,d={},p=t.style,f=t.nodeType&&Pe(t),m=oe._data(t,"fxshow");n.queue||(s=oe._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,oe.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],u=oe.css(t,"display"),h=k(t.nodeName),"none"===u&&(u=h),"inline"===u&&"none"===oe.css(t,"float")&&(ie.inlineBlockNeedsLayout&&"inline"!==h?p.zoom=1:p.display="inline-block")),n.overflow&&(p.overflow="hidden",ie.shrinkWrapBlocks()||c.always(function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],yn.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(f?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;f=!0}d[i]=m&&m[i]||oe.style(t,i)}if(!oe.isEmptyObject(d)){m?"hidden"in m&&(f=m.hidden):m=oe._data(t,"fxshow",{}),o&&(m.hidden=!f),f?oe(t).show():c.done(function(){oe(t).hide()}),c.done(function(){var e;oe._removeData(t,"fxshow");for(e in d)oe.style(t,e,d[e])});for(i in d)a=R(f?m[i]:0,i,c),i in m||(m[i]=a.start,f&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function Y(t,e){var n,i,r,o,a;for(n in t)if(i=oe.camelCase(n),r=e[i],o=t[n],oe.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=oe.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function F(t,e,n){var i,r,o=0,a=bn.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=mn||O(),n=Math.max(0,u.startTime+u.duration-e),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(t,[u,o,n]),1>o&&l?n:(s.resolveWith(t,[u]),!1)},u=s.promise({elem:t,props:oe.extend({},e),opts:oe.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:mn||O(),duration:n.duration,tweens:[],createTween:function(e,n){var i=oe.Tween(t,u.opts,e,n,u.opts.specialEasing[e]||u.opts.easing);return u.tweens.push(i),i},stop:function(e){var n=0,i=e?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return e?s.resolveWith(t,[u,e]):s.rejectWith(t,[u,e]),this}}),h=u.props;for(Y(h,u.opts.specialEasing);a>o;o++)if(i=bn[o].call(u,t,h,u.opts))return i;return oe.map(h,R,u),oe.isFunction(u.opts.start)&&u.opts.start.call(t,u),oe.fx.timer(oe.extend(l,{elem:t,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function j(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(be)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i.charAt(0)?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function B(t,e,n,i){function r(s){var l;return o[s]=!0,oe.each(t[s]||[],function(t,s){var u=s(e,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(e.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=t===zn;return r(e.dataTypes[0])||!o["*"]&&r("*")}function U(t,e){var n,i,r=oe.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((r[i]?t:n||(n={}))[i]=e[i]);return n&&oe.extend(!0,t,n),t}function H(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(a in s)if(s[a]&&s[a].test(r)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||t.converters[a+" "+l[0]]){o=a;break}i||(i=a)}o=o||i}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function G(t,e,n,i){var r,o,a,s,l,u={},h=t.dataTypes.slice();if(h[1])for(a in t.converters)u[a.toLowerCase()]=t.converters[a];for(o=h.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=h.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],h.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(c){return{state:"parsererror",error:a?c:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function W(t,e,n,i){var r;if(oe.isArray(e))oe.each(e,function(e,r){n||qn.test(t)?i(t,r):W(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==oe.type(e))i(t,e);else for(r in e)W(t+"["+r+"]",e[r],n,i)}function z(){try{return new t.XMLHttpRequest}catch(e){}}function V(){try{return new t.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function $(t){return oe.isWindow(t)?t:9===t.nodeType?t.defaultView||t.parentWindow:!1}var X=[],q=X.slice,K=X.concat,J=X.push,Q=X.indexOf,Z={},te=Z.toString,ee=Z.hasOwnProperty,ne="".trim,ie={},re="1.11.0",oe=function(t,e){return new oe.fn.init(t,e)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(t,e){return e.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return q.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:q.call(this)},pushStack:function(t){var e=oe.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return oe.each(this,t,e)},map:function(t){return this.pushStack(oe.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:J,sort:X.sort,splice:X.splice},oe.extend=oe.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(r=arguments[s]))for(i in r)t=a[i],n=r[i],a!==n&&(u&&n&&(oe.isPlainObject(n)||(e=oe.isArray(n)))?(e?(e=!1,o=t&&oe.isArray(t)?t:[]):o=t&&oe.isPlainObject(t)?t:{},a[i]=oe.extend(u,o,n)):void 0!==n&&(a[i]=n));return a},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===oe.type(t)},isArray:Array.isArray||function(t){return"array"===oe.type(t)},isWindow:function(t){return null!=t&&t==t.window},isNumeric:function(t){return t-parseFloat(t)>=0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},isPlainObject:function(t){var e;if(!t||"object"!==oe.type(t)||t.nodeType||oe.isWindow(t))return!1;try{if(t.constructor&&!ee.call(t,"constructor")&&!ee.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(ie.ownLast)for(e in t)return ee.call(t,e);for(e in t);return void 0===e||ee.call(t,e)},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Z[te.call(t)]||"object":typeof t},globalEval:function(e){e&&oe.trim(e)&&(t.execScript||function(e){t.eval.call(t,e)})(e)},camelCase:function(t){return t.replace(se,"ms-").replace(le,ue)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,a=t.length,s=n(t);if(i){if(s)for(;a>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(s)for(;a>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:ne&&!ne.call("")?function(t){return null==t?"":ne.call(t)}:function(t){return null==t?"":(t+"").replace(ae,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?oe.merge(i,"string"==typeof t?[t]:t):J.call(i,t)),i},inArray:function(t,e,n){var i;if(e){if(Q)return Q.call(e,t,n);for(i=e.length,n=n?0>n?Math.max(0,i+n):n:0;i>n;n++)if(n in e&&e[n]===t)return n}return-1},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;)t[r++]=e[i++];if(n!==n)for(;void 0!==e[i];)t[r++]=e[i++];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;a>o;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)r=e(t[o],o,i),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&l.push(r);return K.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(r=t[e],e=t,t=r),oe.isFunction(t)?(n=q.call(arguments,2),i=function(){return t.apply(e||this,n.concat(q.call(arguments)))},i.guid=t.guid=t.guid||oe.guid++,i):void 0},now:function(){return+new Date},support:ie}),oe.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){Z["[object "+e+"]"]=e.toLowerCase()});var he=function(t){function e(t,e,n,i){var r,o,a,s,l,u,c,f,m,g;if((e?e.ownerDocument||e:B)!==E&&A(e),e=e||E,n=n||[],!t||"string"!=typeof t)return n;if(1!==(s=e.nodeType)&&9!==s)return[];if(I&&!i){if(r=_e.exec(t))if(a=r[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&F(e,o)&&o.id===a)return n.push(o),n}else{if(r[2])return Z.apply(n,e.getElementsByTagName(t)),n;if((a=r[3])&&T.getElementsByClassName&&e.getElementsByClassName)return Z.apply(n,e.getElementsByClassName(a)),n}if(T.qsa&&(!R||!R.test(t))){if(f=c=j,m=e,g=9===s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(u=d(t),(c=e.getAttribute("id"))?f=c.replace(be,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=u.length;l--;)u[l]=f+p(u[l]);m=ve.test(t)&&h(e.parentNode)||e,g=u.join(",")}if(g)try{return Z.apply(n,m.querySelectorAll(g)),n}catch(y){}finally{c||e.removeAttribute("id")}}}return w(t.replace(le,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>M.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[j]=!0,t}function r(t){var e=E.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)M.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function u(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function h(t){return t&&typeof t.getElementsByTagName!==$&&t}function c(){}function d(t,n){var i,r,o,a,s,l,u,h=W[t+" "];if(h)return n?0:h.slice(0);for(s=t,l=[],u=M.preFilter;s;){(!i||(r=ue.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=he.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(le," ")}),s=s.slice(i.length));for(a in M.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):W(t,l).slice(0)}function p(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=H++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,a){var s,l,u=[U,o];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[j]||(e[j]={}),(s=l[i])&&s[0]===U&&s[1]===o)return u[2]=s[2];if(l[i]=u,u[2]=t(e,n,a))return!0}}}function m(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function g(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,u=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,i,r))&&(a.push(o),u&&e.push(s));return a}function y(t,e,n,r,o,a){return r&&!r[j]&&(r=y(r)),o&&!o[j]&&(o=y(o,a)),i(function(i,a,s,l){var u,h,c,d=[],p=[],f=a.length,m=i||b(e||"*",s.nodeType?[s]:s,[]),y=!t||!i&&e?m:g(m,d,t,s,l),_=n?o||(i?t:f||r)?[]:a:y;if(n&&n(y,_,s,l),r)for(u=g(_,p),r(u,[],s,l),h=u.length;h--;)(c=u[h])&&(_[p[h]]=!(y[p[h]]=c));if(i){if(o||t){if(o){for(u=[],h=_.length;h--;)(c=_[h])&&u.push(y[h]=c);o(null,_=[],u,l)}for(h=_.length;h--;)(c=_[h])&&(u=o?ee.call(i,c):d[h])>-1&&(i[u]=!(a[u]=c))}}else _=g(_===a?_.splice(f,_.length):_),o?o(null,a,_,l):Z.apply(a,_)})}function _(t){for(var e,n,i,r=t.length,o=M.relative[t[0].type],a=o||M.relative[" "],s=o?1:0,l=f(function(t){return t===e},a,!0),u=f(function(t){return ee.call(e,t)>-1},a,!0),h=[function(t,n,i){return!o&&(i||n!==L)||((e=n).nodeType?l(t,n,i):u(t,n,i))}];r>s;s++)if(n=M.relative[t[s].type])h=[f(m(h),n)];else{if(n=M.filter[t[s].type].apply(null,t[s].matches),n[j]){for(i=++s;r>i&&!M.relative[t[i].type];i++);return y(s>1&&m(h),s>1&&p(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(le,"$1"),n,i>s&&_(t.slice(s,i)),r>i&&_(t=t.slice(i)),r>i&&p(t))}h.push(n)}return m(h)}function v(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,u){var h,c,d,p=0,f="0",m=i&&[],y=[],_=L,v=i||o&&M.find.TAG("*",u),b=U+=null==_?1:Math.random()||.1,w=v.length;for(u&&(L=a!==E&&a);f!==w&&null!=(h=v[f]);f++){if(o&&h){for(c=0;d=t[c++];)if(d(h,a,s)){l.push(h);break}u&&(U=b)}r&&((h=!d&&h)&&p--,i&&m.push(h))}if(p+=f,r&&f!==p){for(c=0;d=n[c++];)d(m,y,a,s);if(i){if(p>0)for(;f--;)m[f]||y[f]||(y[f]=J.call(l));y=g(y)}Z.apply(l,y),u&&!i&&y.length>0&&p+n.length>1&&e.uniqueSort(l)}return u&&(U=b,L=_),m};return r?i(a):a}function b(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function w(t,e,n,i){var r,o,a,s,l,u=d(t);if(!i&&1===u.length){if(o=u[0]=u[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&T.getById&&9===e.nodeType&&I&&M.relative[o[1].type]){if(e=(M.find.ID(a.matches[0].replace(we,xe),e)||[])[0],!e)return n;t=t.slice(o.shift().value.length)}for(r=fe.needsContext.test(t)?0:o.length;r--&&(a=o[r],!M.relative[s=a.type]);)if((l=M.find[s])&&(i=l(a.matches[0].replace(we,xe),ve.test(o[0].type)&&h(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&p(o),!t)return Z.apply(n,i),n;break}}return C(t,u)(i,e,!I,n,ve.test(t)&&h(e.parentNode)||e),n}var x,T,M,k,S,C,L,P,D,A,E,O,I,R,N,Y,F,j="sizzle"+-new Date,B=t.document,U=0,H=0,G=n(),W=n(),z=n(),V=function(t,e){return t===e&&(D=!0),0},$="undefined",X=1<<31,q={}.hasOwnProperty,K=[],J=K.pop,Q=K.push,Z=K.push,te=K.slice,ee=K.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ie="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",oe=re.replace("w","w#"),ae="\\["+ie+"*("+re+")"+ie+"*(?:([*^$|!~]?=)"+ie+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+oe+")|)|)"+ie+"*\\]",se=":("+re+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+ae.replace(3,8)+")*)|.*)\\)|)",le=new RegExp("^"+ie+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ie+"+$","g"),ue=new RegExp("^"+ie+"*,"+ie+"*"),he=new RegExp("^"+ie+"*([>+~]|"+ie+")"+ie+"*"),ce=new RegExp("="+ie+"*([^\\]'\"]*?)"+ie+"*\\]","g"),de=new RegExp(se),pe=new RegExp("^"+oe+"$"),fe={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+se),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ie+"*(even|odd|(([+-]|)(\\d*)n|)"+ie+"*(?:([+-]|)"+ie+"*(\\d+)|))"+ie+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+ie+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ie+"*((?:-\\d)?\\d*)"+ie+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ye=/^[^{]+\{\s*\[native \w/,_e=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,be=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ie+"?|("+ie+")|.)","ig"),xe=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)};try{Z.apply(K=te.call(B.childNodes),B.childNodes),K[B.childNodes.length].nodeType}catch(Te){Z={apply:K.length?function(t,e){Q.apply(t,te.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}T=e.support={},S=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},A=e.setDocument=function(t){var e,n=t?t.ownerDocument||t:B,i=n.defaultView;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,O=n.documentElement,I=!S(n),i&&i!==i.top&&(i.addEventListener?i.addEventListener("unload",function(){A()},!1):i.attachEvent&&i.attachEvent("onunload",function(){A()})),T.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),T.getElementsByTagName=r(function(t){return t.appendChild(n.createComment("")),!t.getElementsByTagName("*").length}),T.getElementsByClassName=ye.test(n.getElementsByClassName)&&r(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),T.getById=r(function(t){return O.appendChild(t).id=j,!n.getElementsByName||!n.getElementsByName(j).length}),T.getById?(M.find.ID=function(t,e){if(typeof e.getElementById!==$&&I){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},M.filter.ID=function(t){var e=t.replace(we,xe);return function(t){return t.getAttribute("id")===e}}):(delete M.find.ID,M.filter.ID=function(t){var e=t.replace(we,xe);return function(t){var n=typeof t.getAttributeNode!==$&&t.getAttributeNode("id");return n&&n.value===e}}),M.find.TAG=T.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==$?e.getElementsByTagName(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},M.find.CLASS=T.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==$&&I?e.getElementsByClassName(t):void 0},N=[],R=[],(T.qsa=ye.test(n.querySelectorAll))&&(r(function(t){t.innerHTML="<select t=''><option selected=''></option></select>",t.querySelectorAll("[t^='']").length&&R.push("[*^$]="+ie+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||R.push("\\["+ie+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||R.push(":checked")
}),r(function(t){var e=n.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&R.push("name"+ie+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),R.push(",.*:")})),(T.matchesSelector=ye.test(Y=O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&r(function(t){T.disconnectedMatch=Y.call(t,"div"),Y.call(t,"[s!='']:x"),N.push("!=",se)}),R=R.length&&new RegExp(R.join("|")),N=N.length&&new RegExp(N.join("|")),e=ye.test(O.compareDocumentPosition),F=e||ye.test(O.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},V=e?function(t,e){if(t===e)return D=!0,0;var i=!t.compareDocumentPosition-!e.compareDocumentPosition;return i?i:(i=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&i||!T.sortDetached&&e.compareDocumentPosition(t)===i?t===n||t.ownerDocument===B&&F(B,t)?-1:e===n||e.ownerDocument===B&&F(B,e)?1:P?ee.call(P,t)-ee.call(P,e):0:4&i?-1:1)}:function(t,e){if(t===e)return D=!0,0;var i,r=0,o=t.parentNode,s=e.parentNode,l=[t],u=[e];if(!o||!s)return t===n?-1:e===n?1:o?-1:s?1:P?ee.call(P,t)-ee.call(P,e):0;if(o===s)return a(t,e);for(i=t;i=i.parentNode;)l.unshift(i);for(i=e;i=i.parentNode;)u.unshift(i);for(;l[r]===u[r];)r++;return r?a(l[r],u[r]):l[r]===B?-1:u[r]===B?1:0},n):E},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==E&&A(t),n=n.replace(ce,"='$1']"),!(!T.matchesSelector||!I||N&&N.test(n)||R&&R.test(n)))try{var i=Y.call(t,n);if(i||T.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,E,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==E&&A(t),F(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==E&&A(t);var n=M.attrHandle[e.toLowerCase()],i=n&&q.call(M.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==i?i:T.attributes||!I?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(D=!T.detectDuplicates,P=!T.sortStable&&t.slice(0),t.sort(V),D){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return P=null,t},k=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=k(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=k(e);return n},M=e.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,xe),t[3]=(t[4]||t[5]||"").replace(we,xe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[5]&&t[2];return fe.CHILD.test(t[0])?null:(t[3]&&void 0!==t[4]?t[2]=t[4]:n&&de.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,xe).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=G[t+" "];return e||(e=new RegExp("(^|"+ie+")"+t+"("+ie+"|$)"))&&G(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==$&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var u,h,c,d,p,f,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,y=s&&e.nodeName.toLowerCase(),_=!l&&!s;if(g){if(o){for(;m;){for(c=e;c=c[m];)if(s?c.nodeName.toLowerCase()===y:1===c.nodeType)return!1;f=m="only"===t&&!f&&"nextSibling"}return!0}if(f=[a?g.firstChild:g.lastChild],a&&_){for(h=g[j]||(g[j]={}),u=h[t]||[],p=u[0]===U&&u[1],d=u[0]===U&&u[2],c=p&&g.childNodes[p];c=++p&&c&&c[m]||(d=p=0)||f.pop();)if(1===c.nodeType&&++d&&c===e){h[t]=[U,p,d];break}}else if(_&&(u=(e[j]||(e[j]={}))[t])&&u[0]===U)d=u[1];else for(;(c=++p&&c&&c[m]||(d=p=0)||f.pop())&&((s?c.nodeName.toLowerCase()!==y:1!==c.nodeType)||!++d||(_&&((c[j]||(c[j]={}))[t]=[U,d]),c!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var r,o=M.pseudos[t]||M.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[j]?o(n):o.length>1?(r=[t,t,"",n],M.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=ee.call(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=C(t.replace(le,"$1"));return r[j]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return function(e){return(e.textContent||e.innerText||k(e)).indexOf(t)>-1}}),lang:i(function(t){return pe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,xe).toLowerCase(),function(e){var n;do if(n=I?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!M.pseudos.empty(t)},header:function(t){return ge.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:u(function(){return[0]}),last:u(function(t,e){return[e-1]}),eq:u(function(t,e,n){return[0>n?n+e:n]}),even:u(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:u(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:u(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:u(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},M.pseudos.nth=M.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})M.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})M.pseudos[x]=l(x);return c.prototype=M.filters=M.pseudos,M.setFilters=new c,C=e.compile=function(t,e){var n,i=[],r=[],o=z[t+" "];if(!o){for(e||(e=d(t)),n=e.length;n--;)o=_(e[n]),o[j]?i.push(o):r.push(o);o=z(t,v(r,i))}return o},T.sortStable=j.split("").sort(V).join("")===j,T.detectDuplicates=!!D,A(),T.sortDetached=r(function(t){return 1&t.compareDocumentPosition(E.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),T.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(ne,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);oe.find=he,oe.expr=he.selectors,oe.expr[":"]=oe.expr.pseudos,oe.unique=he.uniqueSort,oe.text=he.getText,oe.isXMLDoc=he.isXML,oe.contains=he.contains;var ce=oe.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,pe=/^.[^:#\[\.,]*$/;oe.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?oe.find.matchesSelector(i,t)?[i]:[]:oe.find.matches(t,oe.grep(e,function(t){return 1===t.nodeType}))},oe.fn.extend({find:function(t){var e,n=[],i=this,r=i.length;if("string"!=typeof t)return this.pushStack(oe(t).filter(function(){for(e=0;r>e;e++)if(oe.contains(i[e],this))return!0}));for(e=0;r>e;e++)oe.find(t,i[e],n);return n=this.pushStack(r>1?oe.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ce.test(t)?oe(t):t||[],!1).length}});var fe,me=t.document,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ye=oe.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t.charAt(0)&&">"===t.charAt(t.length-1)&&t.length>=3?[null,t,null]:ge.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||fe).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof oe?e[0]:e,oe.merge(this,oe.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:me,!0)),de.test(n[1])&&oe.isPlainObject(e))for(n in e)oe.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}if(i=me.getElementById(n[2]),i&&i.parentNode){if(i.id!==n[2])return fe.find(t);this.length=1,this[0]=i}return this.context=me,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):oe.isFunction(t)?"undefined"!=typeof fe.ready?fe.ready(t):t(oe):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),oe.makeArray(t,this))};ye.prototype=oe.fn,fe=oe(me);var _e=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};oe.extend({dir:function(t,e,n){for(var i=[],r=t[e];r&&9!==r.nodeType&&(void 0===n||1!==r.nodeType||!oe(r).is(n));)1===r.nodeType&&i.push(r),r=r[e];return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),oe.fn.extend({has:function(t){var e,n=oe(t,this),i=n.length;return this.filter(function(){for(e=0;i>e;e++)if(oe.contains(this,n[e]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=ce.test(t)||"string"!=typeof t?oe(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?oe.unique(o):o)},index:function(t){return t?"string"==typeof t?oe.inArray(this[0],oe(t)):oe.inArray(t.jquery?t[0]:t,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(oe.unique(oe.merge(this.get(),oe(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),oe.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return oe.dir(t,"parentNode")},parentsUntil:function(t,e,n){return oe.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return oe.dir(t,"nextSibling")},prevAll:function(t){return oe.dir(t,"previousSibling")},nextUntil:function(t,e,n){return oe.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return oe.dir(t,"previousSibling",n)},siblings:function(t){return oe.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return oe.sibling(t.firstChild)},contents:function(t){return oe.nodeName(t,"iframe")?t.contentDocument||t.contentWindow.document:oe.merge([],t.childNodes)}},function(t,e){oe.fn[t]=function(n,i){var r=oe.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(ve[t]||(r=oe.unique(r)),_e.test(t)&&(r=r.reverse())),this.pushStack(r)}});var be=/\S+/g,we={};oe.Callbacks=function(t){t="string"==typeof t?we[t]||o(t):oe.extend({},t);var e,n,i,r,a,s,l=[],u=!t.once&&[],h=function(o){for(n=t.memory&&o,i=!0,a=s||0,s=0,r=l.length,e=!0;l&&r>a;a++)if(l[a].apply(o[0],o[1])===!1&&t.stopOnFalse){n=!1;break}e=!1,l&&(u?u.length&&h(u.shift()):n?l=[]:c.disable())},c={add:function(){if(l){var i=l.length;!function o(e){oe.each(e,function(e,n){var i=oe.type(n);"function"===i?t.unique&&c.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),e?r=l.length:n&&(s=i,h(n))}return this},remove:function(){return l&&oe.each(arguments,function(t,n){for(var i;(i=oe.inArray(n,l,i))>-1;)l.splice(i,1),e&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?oe.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],r=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||c.disable(),this},locked:function(){return!u},fireWith:function(t,n){return!l||i&&!u||(n=n||[],n=[t,n.slice?n.slice():n],e?u.push(n):h(n)),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(t){var e=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return oe.Deferred(function(n){oe.each(e,function(e,o){var a=oe.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&oe.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?oe.extend(t,i):i}},r={};return i.pipe=i.then,oe.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=q.call(arguments),a=o.length,s=1!==a||t&&oe.isFunction(t.promise)?a:0,l=1===s?t:oe.Deferred(),u=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?q.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().done(u(r,i,o)).fail(l.reject).progress(u(r,n,e)):--s;return s||l.resolveWith(i,o),l.promise()}});var xe;oe.fn.ready=function(t){return oe.ready.promise().done(t),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(t){t?oe.readyWait++:oe.ready(!0)},ready:function(t){if(t===!0?!--oe.readyWait:!oe.isReady){if(!me.body)return setTimeout(oe.ready);oe.isReady=!0,t!==!0&&--oe.readyWait>0||(xe.resolveWith(me,[oe]),oe.fn.trigger&&oe(me).trigger("ready").off("ready"))}}}),oe.ready.promise=function(e){if(!xe)if(xe=oe.Deferred(),"complete"===me.readyState)setTimeout(oe.ready);else if(me.addEventListener)me.addEventListener("DOMContentLoaded",s,!1),t.addEventListener("load",s,!1);else{me.attachEvent("onreadystatechange",s),t.attachEvent("onload",s);var n=!1;try{n=null==t.frameElement&&me.documentElement}catch(i){}n&&n.doScroll&&!function r(){if(!oe.isReady){try{n.doScroll("left")}catch(t){return setTimeout(r,50)}a(),oe.ready()}}()}return xe.promise(e)};var Te,Me="undefined";for(Te in oe(ie))break;ie.ownLast="0"!==Te,ie.inlineBlockNeedsLayout=!1,oe(function(){var t,e,n=me.getElementsByTagName("body")[0];n&&(t=me.createElement("div"),t.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",e=me.createElement("div"),n.appendChild(t).appendChild(e),typeof e.style.zoom!==Me&&(e.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1",(ie.inlineBlockNeedsLayout=3===e.offsetWidth)&&(n.style.zoom=1)),n.removeChild(t),t=e=null)}),function(){var t=me.createElement("div");if(null==ie.deleteExpando){ie.deleteExpando=!0;try{delete t.test}catch(e){ie.deleteExpando=!1}}t=null}(),oe.acceptData=function(t){var e=oe.noData[(t.nodeName+" ").toLowerCase()],n=+t.nodeType||1;return 1!==n&&9!==n?!1:!e||e!==!0&&t.getAttribute("classid")===e};var ke=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Se=/([A-Z])/g;oe.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(t){return t=t.nodeType?oe.cache[t[oe.expando]]:t[oe.expando],!!t&&!u(t)},data:function(t,e,n){return h(t,e,n)},removeData:function(t,e){return c(t,e)},_data:function(t,e,n){return h(t,e,n,!0)},_removeData:function(t,e){return c(t,e,!0)}}),oe.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=oe.data(o),1===o.nodeType&&!oe._data(o,"parsedAttrs"))){for(n=a.length;n--;)i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(o,i,r[i]));oe._data(o,"parsedAttrs",!0)}return r}return"object"==typeof t?this.each(function(){oe.data(this,t)}):arguments.length>1?this.each(function(){oe.data(this,t,e)}):o?l(o,t,oe.data(o,t)):void 0},removeData:function(t){return this.each(function(){oe.removeData(this,t)})}}),oe.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=oe._data(t,e),n&&(!i||oe.isArray(n)?i=oe._data(t,e,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=oe.queue(t,e),i=n.length,r=n.shift(),o=oe._queueHooks(t,e),a=function(){oe.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return oe._data(t,n)||oe._data(t,n,{empty:oe.Callbacks("once memory").add(function(){oe._removeData(t,e+"queue"),oe._removeData(t,n)})})}}),oe.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?oe.queue(this[0],t):void 0===e?this:this.each(function(){var n=oe.queue(this,t,e);oe._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&oe.dequeue(this,t)})},dequeue:function(t){return this.each(function(){oe.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=oe.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=oe._data(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var Ce=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Le=["Top","Right","Bottom","Left"],Pe=function(t,e){return t=e||t,"none"===oe.css(t,"display")||!oe.contains(t.ownerDocument,t)},De=oe.access=function(t,e,n,i,r,o,a){var s=0,l=t.length,u=null==n;if("object"===oe.type(n)){r=!0;for(s in n)oe.access(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,oe.isFunction(i)||(a=!0),u&&(a?(e.call(t,i),e=null):(u=e,e=function(t,e,n){return u.call(oe(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:u?e.call(t):l?e(t[0],n):o},Ae=/^(?:checkbox|radio)$/i;!function(){var t=me.createDocumentFragment(),e=me.createElement("div"),n=me.createElement("input");if(e.setAttribute("className","t"),e.innerHTML="  <link/><table></table><a href='/a'>a</a>",ie.leadingWhitespace=3===e.firstChild.nodeType,ie.tbody=!e.getElementsByTagName("tbody").length,ie.htmlSerialize=!!e.getElementsByTagName("link").length,ie.html5Clone="<:nav></:nav>"!==me.createElement("nav").cloneNode(!0).outerHTML,n.type="checkbox",n.checked=!0,t.appendChild(n),ie.appendChecked=n.checked,e.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue,t.appendChild(e),e.innerHTML="<input type='radio' checked='checked' name='t'/>",ie.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,ie.noCloneEvent=!0,e.attachEvent&&(e.attachEvent("onclick",function(){ie.noCloneEvent=!1}),e.cloneNode(!0).click()),null==ie.deleteExpando){ie.deleteExpando=!0;try{delete e.test}catch(i){ie.deleteExpando=!1}}t=e=n=null}(),function(){var e,n,i=me.createElement("div");for(e in{submit:!0,change:!0,focusin:!0})n="on"+e,(ie[e+"Bubbles"]=n in t)||(i.setAttribute(n,"t"),ie[e+"Bubbles"]=i.attributes[n].expando===!1);i=null}();var Ee=/^(?:input|select|textarea)$/i,Oe=/^key/,Ie=/^(?:mouse|contextmenu)|click/,Re=/^(?:focusinfocus|focusoutblur)$/,Ne=/^([^.]*)(?:\.(.+)|)$/;oe.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,u,h,c,d,p,f,m,g=oe._data(t);if(g){for(n.handler&&(l=n,n=l.handler,r=l.selector),n.guid||(n.guid=oe.guid++),(a=g.events)||(a=g.events={}),(h=g.handle)||(h=g.handle=function(t){return typeof oe===Me||t&&oe.event.triggered===t.type?void 0:oe.event.dispatch.apply(h.elem,arguments)},h.elem=t),e=(e||"").match(be)||[""],s=e.length;s--;)o=Ne.exec(e[s])||[],p=m=o[1],f=(o[2]||"").split(".").sort(),p&&(u=oe.event.special[p]||{},p=(r?u.delegateType:u.bindType)||p,u=oe.event.special[p]||{},c=oe.extend({type:p,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:f.join(".")},l),(d=a[p])||(d=a[p]=[],d.delegateCount=0,u.setup&&u.setup.call(t,i,f,h)!==!1||(t.addEventListener?t.addEventListener(p,h,!1):t.attachEvent&&t.attachEvent("on"+p,h))),u.add&&(u.add.call(t,c),c.handler.guid||(c.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,c):d.push(c),oe.event.global[p]=!0);t=null}},remove:function(t,e,n,i,r){var o,a,s,l,u,h,c,d,p,f,m,g=oe.hasData(t)&&oe._data(t);if(g&&(h=g.events)){for(e=(e||"").match(be)||[""],u=e.length;u--;)if(s=Ne.exec(e[u])||[],p=m=s[1],f=(s[2]||"").split(".").sort(),p){for(c=oe.event.special[p]||{},p=(i?c.delegateType:c.bindType)||p,d=h[p]||[],s=s[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=d.length;o--;)a=d[o],!r&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||i&&i!==a.selector&&("**"!==i||!a.selector)||(d.splice(o,1),a.selector&&d.delegateCount--,c.remove&&c.remove.call(t,a));l&&!d.length&&(c.teardown&&c.teardown.call(t,f,g.handle)!==!1||oe.removeEvent(t,p,g.handle),delete h[p])}else for(p in h)oe.event.remove(t,p+e[u],n,i,!0);oe.isEmptyObject(h)&&(delete g.handle,oe._removeData(t,"events"))}},trigger:function(e,n,i,r){var o,a,s,l,u,h,c,d=[i||me],p=ee.call(e,"type")?e.type:e,f=ee.call(e,"namespace")?e.namespace.split("."):[];if(s=h=i=i||me,3!==i.nodeType&&8!==i.nodeType&&!Re.test(p+oe.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),a=p.indexOf(":")<0&&"on"+p,e=e[oe.expando]?e:new oe.Event(p,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:oe.makeArray(n,[e]),u=oe.event.special[p]||{},r||!u.trigger||u.trigger.apply(i,n)!==!1)){if(!r&&!u.noBubble&&!oe.isWindow(i)){for(l=u.delegateType||p,Re.test(l+p)||(s=s.parentNode);s;s=s.parentNode)d.push(s),h=s;h===(i.ownerDocument||me)&&d.push(h.defaultView||h.parentWindow||t)}for(c=0;(s=d[c++])&&!e.isPropagationStopped();)e.type=c>1?l:u.bindType||p,o=(oe._data(s,"events")||{})[e.type]&&oe._data(s,"handle"),o&&o.apply(s,n),o=a&&s[a],o&&o.apply&&oe.acceptData(s)&&(e.result=o.apply(s,n),e.result===!1&&e.preventDefault());if(e.type=p,!r&&!e.isDefaultPrevented()&&(!u._default||u._default.apply(d.pop(),n)===!1)&&oe.acceptData(i)&&a&&i[p]&&!oe.isWindow(i)){h=i[a],h&&(i[a]=null),oe.event.triggered=p;try{i[p]()}catch(m){}oe.event.triggered=void 0,h&&(i[a]=h)}return e.result}},dispatch:function(t){t=oe.event.fix(t);var e,n,i,r,o,a=[],s=q.call(arguments),l=(oe._data(this,"events")||{})[t.type]||[],u=oe.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,t)!==!1){for(a=oe.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,o=0;(i=r.handlers[o++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(i.namespace))&&(t.handleObj=i,t.data=i.data,n=((oe.event.special[i.origType]||{}).handle||i.handler).apply(r.elem,s),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==t.type)){for(r=[],o=0;s>o;o++)i=e[o],n=i.selector+" ",void 0===r[n]&&(r[n]=i.needsContext?oe(n,this).index(l)>=0:oe.find(n,this,null,[l]).length),r[n]&&r.push(i);r.length&&a.push({elem:l,handlers:r})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},fix:function(t){if(t[oe.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Ie.test(r)?this.mouseHooks:Oe.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new oe.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=o.srcElement||me),3===t.target.nodeType&&(t.target=t.target.parentNode),t.metaKey=!!t.metaKey,a.filter?a.filter(t,o):t},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button,a=e.fromElement;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||me,r=i.documentElement,n=i.body,t.pageX=e.clientX+(r&&r.scrollLeft||n&&n.scrollLeft||0)-(r&&r.clientLeft||n&&n.clientLeft||0),t.pageY=e.clientY+(r&&r.scrollTop||n&&n.scrollTop||0)-(r&&r.clientTop||n&&n.clientTop||0)),!t.relatedTarget&&a&&(t.relatedTarget=a===t.target?e.toElement:a),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==f()&&this.focus)try{return this.focus(),!1}catch(t){}},delegateType:"focusin"},blur:{trigger:function(){return this===f()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return oe.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(t){return oe.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=oe.extend(new oe.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?oe.event.trigger(r,null,e):oe.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},oe.removeEvent=me.removeEventListener?function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)}:function(t,e,n){var i="on"+e;t.detachEvent&&(typeof t[i]===Me&&(t[i]=null),t.detachEvent(i,n))},oe.Event=function(t,e){return this instanceof oe.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&(t.returnValue===!1||t.getPreventDefault&&t.getPreventDefault())?d:p):this.type=t,e&&oe.extend(this,e),this.timeStamp=t&&t.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(t,e)},oe.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=d,t&&(t.preventDefault?t.preventDefault():t.returnValue=!1)},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=d,t&&(t.stopPropagation&&t.stopPropagation(),t.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=d,this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(t,e){oe.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!oe.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),ie.submitBubbles||(oe.event.special.submit={setup:function(){return oe.nodeName(this,"form")?!1:void oe.event.add(this,"click._submit keypress._submit",function(t){var e=t.target,n=oe.nodeName(e,"input")||oe.nodeName(e,"button")?e.form:void 0;n&&!oe._data(n,"submitBubbles")&&(oe.event.add(n,"submit._submit",function(t){t._submit_bubble=!0}),oe._data(n,"submitBubbles",!0))})},postDispatch:function(t){t._submit_bubble&&(delete t._submit_bubble,this.parentNode&&!t.isTrigger&&oe.event.simulate("submit",this.parentNode,t,!0))},teardown:function(){return oe.nodeName(this,"form")?!1:void oe.event.remove(this,"._submit")}}),ie.changeBubbles||(oe.event.special.change={setup:function(){return Ee.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(oe.event.add(this,"propertychange._change",function(t){"checked"===t.originalEvent.propertyName&&(this._just_changed=!0)}),oe.event.add(this,"click._change",function(t){this._just_changed&&!t.isTrigger&&(this._just_changed=!1),oe.event.simulate("change",this,t,!0)})),!1):void oe.event.add(this,"beforeactivate._change",function(t){var e=t.target;Ee.test(e.nodeName)&&!oe._data(e,"changeBubbles")&&(oe.event.add(e,"change._change",function(t){!this.parentNode||t.isSimulated||t.isTrigger||oe.event.simulate("change",this.parentNode,t,!0)}),oe._data(e,"changeBubbles",!0))})},handle:function(t){var e=t.target;return this!==e||t.isSimulated||t.isTrigger||"radio"!==e.type&&"checkbox"!==e.type?t.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return oe.event.remove(this,"._change"),!Ee.test(this.nodeName)}}),ie.focusinBubbles||oe.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){oe.event.simulate(e,t.target,oe.event.fix(t),!0)};oe.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=oe._data(i,e);r||i.addEventListener(t,n,!0),oe._data(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=oe._data(i,e)-1;r?oe._data(i,e,r):(i.removeEventListener(t,n,!0),oe._removeData(i,e))}}}),oe.fn.extend({on:function(t,e,n,i,r){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(o in t)this.on(o,e,n,t[o],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=p;else if(!i)return this;return 1===r&&(a=i,i=function(t){return oe().off(t),a.apply(this,arguments)},i.guid=a.guid||(a.guid=oe.guid++)),this.each(function(){oe.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,oe(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=p),this.each(function(){oe.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){oe.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?oe.event.trigger(t,e,n,!0):void 0}});var Ye="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,je=new RegExp("<(?:"+Ye+")[\\s/>]","i"),Be=/^\s+/,Ue=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,He=/<([\w:]+)/,Ge=/<tbody/i,We=/<|&#?\w+;/,ze=/<(?:script|style|link)/i,Ve=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/^$|\/(?:java|ecma)script/i,Xe=/^true\/(.*)/,qe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ke={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ie.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Je=m(me),Qe=Je.appendChild(me.createElement("div"));
Ke.optgroup=Ke.option,Ke.tbody=Ke.tfoot=Ke.colgroup=Ke.caption=Ke.thead,Ke.th=Ke.td,oe.extend({clone:function(t,e,n){var i,r,o,a,s,l=oe.contains(t.ownerDocument,t);if(ie.html5Clone||oe.isXMLDoc(t)||!je.test("<"+t.nodeName+">")?o=t.cloneNode(!0):(Qe.innerHTML=t.outerHTML,Qe.removeChild(o=Qe.firstChild)),!(ie.noCloneEvent&&ie.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||oe.isXMLDoc(t)))for(i=g(o),s=g(t),a=0;null!=(r=s[a]);++a)i[a]&&T(r,i[a]);if(e)if(n)for(s=s||g(t),i=i||g(o),a=0;null!=(r=s[a]);a++)x(r,i[a]);else x(t,o);return i=g(o,"script"),i.length>0&&w(i,!l&&g(t,"script")),i=s=r=null,o},buildFragment:function(t,e,n,i){for(var r,o,a,s,l,u,h,c=t.length,d=m(e),p=[],f=0;c>f;f++)if(o=t[f],o||0===o)if("object"===oe.type(o))oe.merge(p,o.nodeType?[o]:o);else if(We.test(o)){for(s=s||d.appendChild(e.createElement("div")),l=(He.exec(o)||["",""])[1].toLowerCase(),h=Ke[l]||Ke._default,s.innerHTML=h[1]+o.replace(Ue,"<$1></$2>")+h[2],r=h[0];r--;)s=s.lastChild;if(!ie.leadingWhitespace&&Be.test(o)&&p.push(e.createTextNode(Be.exec(o)[0])),!ie.tbody)for(o="table"!==l||Ge.test(o)?"<table>"!==h[1]||Ge.test(o)?0:s:s.firstChild,r=o&&o.childNodes.length;r--;)oe.nodeName(u=o.childNodes[r],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(oe.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=d.lastChild}else p.push(e.createTextNode(o));for(s&&d.removeChild(s),ie.appendChecked||oe.grep(g(p,"input"),y),f=0;o=p[f++];)if((!i||-1===oe.inArray(o,i))&&(a=oe.contains(o.ownerDocument,o),s=g(d.appendChild(o),"script"),a&&w(s),n))for(r=0;o=s[r++];)$e.test(o.type||"")&&n.push(o);return s=null,d},cleanData:function(t,e){for(var n,i,r,o,a=0,s=oe.expando,l=oe.cache,u=ie.deleteExpando,h=oe.event.special;null!=(n=t[a]);a++)if((e||oe.acceptData(n))&&(r=n[s],o=r&&l[r])){if(o.events)for(i in o.events)h[i]?oe.event.remove(n,i):oe.removeEvent(n,i,o.handle);l[r]&&(delete l[r],u?delete n[s]:typeof n.removeAttribute!==Me?n.removeAttribute(s):n[s]=null,X.push(r))}}}),oe.fn.extend({text:function(t){return De(this,function(t){return void 0===t?oe.text(this):this.empty().append((this[0]&&this[0].ownerDocument||me).createTextNode(t))},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=_(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?oe.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||oe.cleanData(g(n)),n.parentNode&&(e&&oe.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++){for(1===t.nodeType&&oe.cleanData(g(t,!1));t.firstChild;)t.removeChild(t.firstChild);t.options&&oe.nodeName(t,"select")&&(t.options.length=0)}return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return oe.clone(this,t,e)})},html:function(t){return De(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t)return 1===e.nodeType?e.innerHTML.replace(Fe,""):void 0;if(!("string"!=typeof t||ze.test(t)||!ie.htmlSerialize&&je.test(t)||!ie.leadingWhitespace&&Be.test(t)||Ke[(He.exec(t)||["",""])[1].toLowerCase()])){t=t.replace(Ue,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(oe.cleanData(g(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,oe.cleanData(g(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=K.apply([],t);var n,i,r,o,a,s,l=0,u=this.length,h=this,c=u-1,d=t[0],p=oe.isFunction(d);if(p||u>1&&"string"==typeof d&&!ie.checkClone&&Ve.test(d))return this.each(function(n){var i=h.eq(n);p&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(u&&(s=oe.buildFragment(t,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=oe.map(g(s,"script"),v),r=o.length;u>l;l++)i=s,l!==c&&(i=oe.clone(i,!0,!0),r&&oe.merge(o,g(i,"script"))),e.call(this[l],i,l);if(r)for(a=o[o.length-1].ownerDocument,oe.map(o,b),l=0;r>l;l++)i=o[l],$e.test(i.type||"")&&!oe._data(i,"globalEval")&&oe.contains(a,i)&&(i.src?oe._evalUrl&&oe._evalUrl(i.src):oe.globalEval((i.text||i.textContent||i.innerHTML||"").replace(qe,"")));s=n=null}return this}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){oe.fn[t]=function(t){for(var n,i=0,r=[],o=oe(t),a=o.length-1;a>=i;i++)n=i===a?this:this.clone(!0),oe(o[i])[e](n),J.apply(r,n.get());return this.pushStack(r)}});var Ze,tn={};!function(){var t,e,n=me.createElement("div"),i="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=n.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(t.style.opacity),ie.cssFloat=!!t.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===n.style.backgroundClip,t=n=null,ie.shrinkWrapBlocks=function(){var t,n,r,o;if(null==e){if(t=me.getElementsByTagName("body")[0],!t)return;o="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=me.createElement("div"),r=me.createElement("div"),t.appendChild(n).appendChild(r),e=!1,typeof r.style.zoom!==Me&&(r.style.cssText=i+";width:1px;padding:1px;zoom:1",r.innerHTML="<div></div>",r.firstChild.style.width="5px",e=3!==r.offsetWidth),t.removeChild(n),t=n=r=null}return e}}();var en,nn,rn=/^margin/,on=new RegExp("^("+Ce+")(?!px)[a-z%]+$","i"),an=/^(top|right|bottom|left)$/;t.getComputedStyle?(en=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)},nn=function(t,e,n){var i,r,o,a,s=t.style;return n=n||en(t),a=n?n.getPropertyValue(e)||n[e]:void 0,n&&(""!==a||oe.contains(t.ownerDocument,t)||(a=oe.style(t,e)),on.test(a)&&rn.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0===a?a:a+""}):me.documentElement.currentStyle&&(en=function(t){return t.currentStyle},nn=function(t,e,n){var i,r,o,a,s=t.style;return n=n||en(t),a=n?n[e]:void 0,null==a&&s&&s[e]&&(a=s[e]),on.test(a)&&!an.test(e)&&(i=s.left,r=t.runtimeStyle,o=r&&r.left,o&&(r.left=t.currentStyle.left),s.left="fontSize"===e?"1em":a,a=s.pixelLeft+"px",s.left=i,o&&(r.left=o)),void 0===a?a:a+""||"auto"}),function(){function e(){var e,n,i=me.getElementsByTagName("body")[0];i&&(e=me.createElement("div"),n=me.createElement("div"),e.style.cssText=u,i.appendChild(e).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",oe.swap(i,null!=i.style.zoom?{zoom:1}:{},function(){r=4===n.offsetWidth}),o=!0,a=!1,s=!0,t.getComputedStyle&&(a="1%"!==(t.getComputedStyle(n,null)||{}).top,o="4px"===(t.getComputedStyle(n,null)||{width:"4px"}).width),i.removeChild(e),n=i=null)}var n,i,r,o,a,s,l=me.createElement("div"),u="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",h="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";l.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=l.getElementsByTagName("a")[0],n.style.cssText="float:left;opacity:.5",ie.opacity=/^0.5/.test(n.style.opacity),ie.cssFloat=!!n.style.cssFloat,l.style.backgroundClip="content-box",l.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===l.style.backgroundClip,n=l=null,oe.extend(ie,{reliableHiddenOffsets:function(){if(null!=i)return i;var t,e,n,r=me.createElement("div"),o=me.getElementsByTagName("body")[0];if(o)return r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=me.createElement("div"),t.style.cssText=u,o.appendChild(t).appendChild(r),r.innerHTML="<table><tr><td></td><td>t</td></tr></table>",e=r.getElementsByTagName("td"),e[0].style.cssText="padding:0;margin:0;border:0;display:none",n=0===e[0].offsetHeight,e[0].style.display="",e[1].style.display="none",i=n&&0===e[0].offsetHeight,o.removeChild(t),r=o=null,i},boxSizing:function(){return null==r&&e(),r},boxSizingReliable:function(){return null==o&&e(),o},pixelPosition:function(){return null==a&&e(),a},reliableMarginRight:function(){var e,n,i,r;if(null==s&&t.getComputedStyle){if(e=me.getElementsByTagName("body")[0],!e)return;n=me.createElement("div"),i=me.createElement("div"),n.style.cssText=u,e.appendChild(n).appendChild(i),r=i.appendChild(me.createElement("div")),r.style.cssText=i.style.cssText=h,r.style.marginRight=r.style.width="0",i.style.width="1px",s=!parseFloat((t.getComputedStyle(r,null)||{}).marginRight),e.removeChild(n)}return s}})}(),oe.swap=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r};var sn=/alpha\([^)]*\)/i,ln=/opacity\s*=\s*([^)]*)/,un=/^(none|table(?!-c[ea]).+)/,hn=new RegExp("^("+Ce+")(.*)$","i"),cn=new RegExp("^([+-])=("+Ce+")","i"),dn={position:"absolute",visibility:"hidden",display:"block"},pn={letterSpacing:0,fontWeight:400},fn=["Webkit","O","Moz","ms"];oe.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=nn(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ie.cssFloat?"cssFloat":"styleFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=oe.camelCase(e),l=t.style;if(e=oe.cssProps[s]||(oe.cssProps[s]=C(l,s)),a=oe.cssHooks[e]||oe.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e];if(o=typeof n,"string"===o&&(r=cn.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(oe.css(t,e)),o="number"),null!=n&&n===n&&("number"!==o||oe.cssNumber[s]||(n+="px"),ie.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(t,n,i)))))try{l[e]="",l[e]=n}catch(u){}}},css:function(t,e,n,i){var r,o,a,s=oe.camelCase(e);return e=oe.cssProps[s]||(oe.cssProps[s]=C(t.style,s)),a=oe.cssHooks[e]||oe.cssHooks[s],a&&"get"in a&&(o=a.get(t,!0,n)),void 0===o&&(o=nn(t,e,i)),"normal"===o&&e in pn&&(o=pn[e]),""===n||n?(r=parseFloat(o),n===!0||oe.isNumeric(r)?r||0:o):o}}),oe.each(["height","width"],function(t,e){oe.cssHooks[e]={get:function(t,n,i){return n?0===t.offsetWidth&&un.test(oe.css(t,"display"))?oe.swap(t,dn,function(){return A(t,e,i)}):A(t,e,i):void 0},set:function(t,n,i){var r=i&&en(t);return P(t,n,i?D(t,e,i,ie.boxSizing()&&"border-box"===oe.css(t,"boxSizing",!1,r),r):0)}}}),ie.opacity||(oe.cssHooks.opacity={get:function(t,e){return ln.test((e&&t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":e?"1":""},set:function(t,e){var n=t.style,i=t.currentStyle,r=oe.isNumeric(e)?"alpha(opacity="+100*e+")":"",o=i&&i.filter||n.filter||"";n.zoom=1,(e>=1||""===e)&&""===oe.trim(o.replace(sn,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===e||i&&!i.filter)||(n.filter=sn.test(o)?o.replace(sn,r):o+" "+r)}}),oe.cssHooks.marginRight=S(ie.reliableMarginRight,function(t,e){return e?oe.swap(t,{display:"inline-block"},nn,[t,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(t,e){oe.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Le[i]+e]=o[i]||o[i-2]||o[0];return r}},rn.test(t)||(oe.cssHooks[t+e].set=P)}),oe.fn.extend({css:function(t,e){return De(this,function(t,e,n){var i,r,o={},a=0;if(oe.isArray(e)){for(i=en(t),r=e.length;r>a;a++)o[e[a]]=oe.css(t,e[a],!1,i);return o}return void 0!==n?oe.style(t,e,n):oe.css(t,e)},t,e,arguments.length>1)},show:function(){return L(this,!0)},hide:function(){return L(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Pe(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=E,E.prototype={constructor:E,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var t=E.propHooks[this.prop];return t&&t.get?t.get(this):E.propHooks._default.get(this)},run:function(t){var e,n=E.propHooks[this.prop];return this.pos=e=this.options.duration?oe.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):E.propHooks._default.set(this),this}},E.prototype.init.prototype=E.prototype,E.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=oe.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){oe.fx.step[t.prop]?oe.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[oe.cssProps[t.prop]]||oe.cssHooks[t.prop])?oe.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},E.propHooks.scrollTop=E.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},oe.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},oe.fx=E.prototype.init,oe.fx.step={};var mn,gn,yn=/^(?:toggle|show|hide)$/,_n=new RegExp("^(?:([+-])=|)("+Ce+")([a-z%]*)$","i"),vn=/queueHooks$/,bn=[N],wn={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=_n.exec(e),o=r&&r[3]||(oe.cssNumber[t]?"":"px"),a=(oe.cssNumber[t]||"px"!==o&&+i)&&_n.exec(oe.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,oe.style(n.elem,t,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};oe.Animation=oe.extend(F,{tweener:function(t,e){oe.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],wn[n]=wn[n]||[],wn[n].unshift(e)},prefilter:function(t,e){e?bn.unshift(t):bn.push(t)}}),oe.speed=function(t,e,n){var i=t&&"object"==typeof t?oe.extend({},t):{complete:n||!n&&e||oe.isFunction(t)&&t,duration:t,easing:n&&e||e&&!oe.isFunction(e)&&e};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(t,e,n,i){return this.filter(Pe).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=oe.isEmptyObject(t),o=oe.speed(e,n,i),a=function(){var e=F(this,oe.extend({},t),o);(r||oe._data(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=oe.timers,a=oe._data(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&vn.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&oe.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=oe._data(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(t,e){var n=oe.fn[e];oe.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(I(e,!0),t,i,r)}}),oe.each({slideDown:I("show"),slideUp:I("hide"),slideToggle:I("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){oe.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),oe.timers=[],oe.fx.tick=function(){var t,e=oe.timers,n=0;for(mn=oe.now();n<e.length;n++)t=e[n],t()||e[n]!==t||e.splice(n--,1);e.length||oe.fx.stop(),mn=void 0},oe.fx.timer=function(t){oe.timers.push(t),t()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){gn||(gn=setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){clearInterval(gn),gn=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,e){return t=oe.fx?oe.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t,e,n,i,r=me.createElement("div");r.setAttribute("className","t"),r.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=r.getElementsByTagName("a")[0],n=me.createElement("select"),i=n.appendChild(me.createElement("option")),e=r.getElementsByTagName("input")[0],t.style.cssText="top:1px",ie.getSetAttribute="t"!==r.className,ie.style=/top/.test(t.getAttribute("style")),ie.hrefNormalized="/a"===t.getAttribute("href"),ie.checkOn=!!e.value,ie.optSelected=i.selected,ie.enctype=!!me.createElement("form").enctype,n.disabled=!0,ie.optDisabled=!i.disabled,e=me.createElement("input"),e.setAttribute("value",""),ie.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ie.radioValue="t"===e.value,t=e=n=i=r=null}();var xn=/\r/g;oe.fn.extend({val:function(t){var e,n,i,r=this[0];{if(arguments.length)return i=oe.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,oe(this).val()):t,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(t){return null==t?"":t+""})),e=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))});if(r)return e=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(xn,""):null==n?"":n)}}}),oe.extend({valHooks:{option:{get:function(t){var e=oe.find.attr(t,"value");return null!=e?e:oe.text(t)}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(ie.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&oe.nodeName(n.parentNode,"optgroup"))){if(e=oe(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=oe.makeArray(e),a=r.length;a--;)if(i=r[a],oe.inArray(oe.valHooks.option.get(i),o)>=0)try{i.selected=n=!0}catch(s){i.scrollHeight}else i.selected=!1;return n||(t.selectedIndex=-1),r}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(t,e){return oe.isArray(e)?t.checked=oe.inArray(oe(t).val(),e)>=0:void 0}},ie.checkOn||(oe.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var Tn,Mn,kn=oe.expr.attrHandle,Sn=/^(?:checked|selected)$/i,Cn=ie.getSetAttribute,Ln=ie.input;oe.fn.extend({attr:function(t,e){return De(this,oe.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){oe.removeAttr(this,t)})}}),oe.extend({attr:function(t,e,n){var i,r,o=t.nodeType;if(t&&3!==o&&8!==o&&2!==o)return typeof t.getAttribute===Me?oe.prop(t,e,n):(1===o&&oe.isXMLDoc(t)||(e=e.toLowerCase(),i=oe.attrHooks[e]||(oe.expr.match.bool.test(e)?Mn:Tn)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=oe.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void oe.removeAttr(t,e))},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(be);if(o&&1===t.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)?Ln&&Cn||!Sn.test(n)?t[i]=!1:t[oe.camelCase("default-"+n)]=t[i]=!1:oe.attr(t,n,""),t.removeAttribute(Cn?n:i)},attrHooks:{type:{set:function(t,e){if(!ie.radioValue&&"radio"===e&&oe.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),Mn={set:function(t,e,n){return e===!1?oe.removeAttr(t,n):Ln&&Cn||!Sn.test(n)?t.setAttribute(!Cn&&oe.propFix[n]||n,n):t[oe.camelCase("default-"+n)]=t[n]=!0,n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(t,e){var n=kn[e]||oe.find.attr;kn[e]=Ln&&Cn||!Sn.test(e)?function(t,e,i){var r,o;return i||(o=kn[e],kn[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,kn[e]=o),r}:function(t,e,n){return n?void 0:t[oe.camelCase("default-"+e)]?e.toLowerCase():null}}),Ln&&Cn||(oe.attrHooks.value={set:function(t,e,n){return oe.nodeName(t,"input")?void(t.defaultValue=e):Tn&&Tn.set(t,e,n)}}),Cn||(Tn={set:function(t,e,n){var i=t.getAttributeNode(n);return i||t.setAttributeNode(i=t.ownerDocument.createAttribute(n)),i.value=e+="","value"===n||e===t.getAttribute(n)?e:void 0}},kn.id=kn.name=kn.coords=function(t,e,n){var i;return n?void 0:(i=t.getAttributeNode(e))&&""!==i.value?i.value:null},oe.valHooks.button={get:function(t,e){var n=t.getAttributeNode(e);return n&&n.specified?n.value:void 0},set:Tn.set},oe.attrHooks.contenteditable={set:function(t,e,n){Tn.set(t,""===e?!1:e,n)}},oe.each(["width","height"],function(t,e){oe.attrHooks[e]={set:function(t,n){return""===n?(t.setAttribute(e,"auto"),n):void 0}}})),ie.style||(oe.attrHooks.style={get:function(t){return t.style.cssText||void 0},set:function(t,e){return t.style.cssText=e+""}});var Pn=/^(?:input|select|textarea|button|object)$/i,Dn=/^(?:a|area)$/i;oe.fn.extend({prop:function(t,e){return De(this,oe.prop,t,e,arguments.length>1)},removeProp:function(t){return t=oe.propFix[t]||t,this.each(function(){try{this[t]=void 0,delete this[t]}catch(e){}})}}),oe.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,a=t.nodeType;if(t&&3!==a&&8!==a&&2!==a)return o=1!==a||!oe.isXMLDoc(t),o&&(e=oe.propFix[e]||e,r=oe.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=oe.find.attr(t,"tabindex");return e?parseInt(e,10):Pn.test(t.nodeName)||Dn.test(t.nodeName)&&t.href?0:-1}}}}),ie.hrefNormalized||oe.each(["href","src"],function(t,e){oe.propHooks[e]={get:function(t){return t.getAttribute(e,4)}}}),ie.optSelected||(oe.propHooks.selected={get:function(t){var e=t.parentNode;return e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex),null}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this}),ie.enctype||(oe.propFix.enctype="encoding");var An=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u="string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).addClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(An," "):" ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=oe.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,r,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof t&&t;if(oe.isFunction(t))return this.each(function(e){oe(this).removeClass(t.call(this,e,this.className))});if(u)for(e=(t||"").match(be)||[];l>s;s++)if(n=this[s],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(An," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=t?oe.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(oe.isFunction(t)?function(n){oe(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=oe(this),o=t.match(be)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===Me||"boolean"===n)&&(this.className&&oe._data(this,"__className__",this.className),this.className=this.className||t===!1?"":oe._data(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(An," ").indexOf(e)>=0)return!0;return!1}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){oe.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),oe.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var En=oe.now(),On=/\?/,In=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;oe.parseJSON=function(e){if(t.JSON&&t.JSON.parse)return t.JSON.parse(e+"");var n,i=null,r=oe.trim(e+"");return r&&!oe.trim(r.replace(In,function(t,e,r,o){return n&&e&&(i=0),0===i?t:(n=r||e,i+=!o-!r,"")}))?Function("return "+r)():oe.error("Invalid JSON: "+e)},oe.parseXML=function(e){var n,i;if(!e||"string"!=typeof e)return null;try{t.DOMParser?(i=new DOMParser,n=i.parseFromString(e,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(e))}catch(r){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+e),n};var Rn,Nn,Yn=/#.*$/,Fn=/([?&])_=[^&]*/,jn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Bn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Un=/^(?:GET|HEAD)$/,Hn=/^\/\//,Gn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wn={},zn={},Vn="*/".concat("*");try{Nn=location.href}catch($n){Nn=me.createElement("a"),Nn.href="",Nn=Nn.href}Rn=Gn.exec(Nn.toLowerCase())||[],oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Nn,type:"GET",isLocal:Bn.test(Rn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Vn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?U(U(t,oe.ajaxSettings),e):U(oe.ajaxSettings,t)},ajaxPrefilter:j(Wn),ajaxTransport:j(zn),ajax:function(t,e){function n(t,e,n,i){var r,h,y,_,b,x=e;2!==v&&(v=2,s&&clearTimeout(s),u=void 0,a=i||"",w.readyState=t>0?4:0,r=t>=200&&300>t||304===t,n&&(_=H(c,w,n)),_=G(c,_,w,r),r?(c.ifModified&&(b=w.getResponseHeader("Last-Modified"),b&&(oe.lastModified[o]=b),b=w.getResponseHeader("etag"),b&&(oe.etag[o]=b)),204===t||"HEAD"===c.type?x="nocontent":304===t?x="notmodified":(x=_.state,h=_.data,y=_.error,r=!y)):(y=x,(t||!x)&&(x="error",0>t&&(t=0))),w.status=t,w.statusText=(e||x)+"",r?f.resolveWith(d,[h,x,w]):f.rejectWith(d,[w,x,y]),w.statusCode(g),g=void 0,l&&p.trigger(r?"ajaxSuccess":"ajaxError",[w,c,r?h:y]),m.fireWith(d,[w,x]),l&&(p.trigger("ajaxComplete",[w,c]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,s,l,u,h,c=oe.ajaxSetup({},e),d=c.context||c,p=c.context&&(d.nodeType||d.jquery)?oe(d):oe.event,f=oe.Deferred(),m=oe.Callbacks("once memory"),g=c.statusCode||{},y={},_={},v=0,b="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===v){if(!h)for(h={};e=jn.exec(a);)h[e[1].toLowerCase()]=e[2];e=h[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===v?a:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return v||(t=_[n]=_[n]||t,y[t]=e),this},overrideMimeType:function(t){return v||(c.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>v)for(e in t)g[e]=[g[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||b;return u&&u.abort(e),n(0,e),this}};if(f.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,c.url=((t||c.url||Nn)+"").replace(Yn,"").replace(Hn,Rn[1]+"//"),c.type=e.method||e.type||c.method||c.type,c.dataTypes=oe.trim(c.dataType||"*").toLowerCase().match(be)||[""],null==c.crossDomain&&(i=Gn.exec(c.url.toLowerCase()),c.crossDomain=!(!i||i[1]===Rn[1]&&i[2]===Rn[2]&&(i[3]||("http:"===i[1]?"80":"443"))===(Rn[3]||("http:"===Rn[1]?"80":"443")))),c.data&&c.processData&&"string"!=typeof c.data&&(c.data=oe.param(c.data,c.traditional)),B(Wn,c,e,w),2===v)return w;l=c.global,l&&0===oe.active++&&oe.event.trigger("ajaxStart"),c.type=c.type.toUpperCase(),c.hasContent=!Un.test(c.type),o=c.url,c.hasContent||(c.data&&(o=c.url+=(On.test(o)?"&":"?")+c.data,delete c.data),c.cache===!1&&(c.url=Fn.test(o)?o.replace(Fn,"$1_="+En++):o+(On.test(o)?"&":"?")+"_="+En++)),c.ifModified&&(oe.lastModified[o]&&w.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&w.setRequestHeader("If-None-Match",oe.etag[o])),(c.data&&c.hasContent&&c.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",c.contentType),w.setRequestHeader("Accept",c.dataTypes[0]&&c.accepts[c.dataTypes[0]]?c.accepts[c.dataTypes[0]]+("*"!==c.dataTypes[0]?", "+Vn+"; q=0.01":""):c.accepts["*"]);for(r in c.headers)w.setRequestHeader(r,c.headers[r]);if(c.beforeSend&&(c.beforeSend.call(d,w,c)===!1||2===v))return w.abort();b="abort";for(r in{success:1,error:1,complete:1})w[r](c[r]);if(u=B(zn,c,e,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,c]),c.async&&c.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},c.timeout));try{v=1,u.send(y,n)}catch(x){if(!(2>v))throw x;n(-1,x)}}else n(-1,"No Transport");return w},getJSON:function(t,e,n){return oe.get(t,e,n,"json")},getScript:function(t,e){return oe.get(t,void 0,e,"script")}}),oe.each(["get","post"],function(t,e){oe[e]=function(t,n,i,r){return oe.isFunction(n)&&(r=r||i,i=n,n=void 0),oe.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){oe.fn[e]=function(t){return this.on(e,t)}}),oe._evalUrl=function(t){return oe.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},oe.fn.extend({wrapAll:function(t){if(oe.isFunction(t))return this.each(function(e){oe(this).wrapAll(t.call(this,e))});if(this[0]){var e=oe(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstChild&&1===t.firstChild.nodeType;)t=t.firstChild;return t}).append(this)}return this},wrapInner:function(t){return this.each(oe.isFunction(t)?function(e){oe(this).wrapInner(t.call(this,e))}:function(){var e=oe(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=oe.isFunction(t);return this.each(function(n){oe(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0||!ie.reliableHiddenOffsets()&&"none"===(t.style&&t.style.display||oe.css(t,"display"))},oe.expr.filters.visible=function(t){return!oe.expr.filters.hidden(t)};var Xn=/%20/g,qn=/\[\]$/,Kn=/\r?\n/g,Jn=/^(?:submit|button|image|reset|file)$/i,Qn=/^(?:input|select|textarea|keygen)/i;
oe.param=function(t,e){var n,i=[],r=function(t,e){e=oe.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(t)||t.jquery&&!oe.isPlainObject(t))oe.each(t,function(){r(this.name,this.value)});else for(n in t)W(n,t[n],e,r);return i.join("&").replace(Xn,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=oe.prop(this,"elements");return t?oe.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!oe(this).is(":disabled")&&Qn.test(this.nodeName)&&!Jn.test(t)&&(this.checked||!Ae.test(t))}).map(function(t,e){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(t){return{name:e.name,value:t.replace(Kn,"\r\n")}}):{name:e.name,value:n.replace(Kn,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=void 0!==t.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&z()||V()}:z;var Zn=0,ti={},ei=oe.ajaxSettings.xhr();t.ActiveXObject&&oe(t).on("unload",function(){for(var t in ti)ti[t](void 0,!0)}),ie.cors=!!ei&&"withCredentials"in ei,ei=ie.ajax=!!ei,ei&&oe.ajaxTransport(function(t){if(!t.crossDomain||ie.cors){var e;return{send:function(n,i){var r,o=t.xhr(),a=++Zn;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)void 0!==n[r]&&o.setRequestHeader(r,n[r]+"");o.send(t.hasContent&&t.data||null),e=function(n,r){var s,l,u;if(e&&(r||4===o.readyState))if(delete ti[a],e=void 0,o.onreadystatechange=oe.noop,r)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(h){l=""}s||!t.isLocal||t.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&i(s,l,u,o.getAllResponseHeaders())},t.async?4===o.readyState?setTimeout(e):o.onreadystatechange=ti[a]=e:e()},abort:function(){e&&e(void 0,!0)}}}}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return oe.globalEval(t),t}}}),oe.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET",t.global=!1)}),oe.ajaxTransport("script",function(t){if(t.crossDomain){var e,n=me.head||oe("head")[0]||me.documentElement;return{send:function(i,r){e=me.createElement("script"),e.async=!0,t.scriptCharset&&(e.charset=t.scriptCharset),e.src=t.url,e.onload=e.onreadystatechange=function(t,n){(n||!e.readyState||/loaded|complete/.test(e.readyState))&&(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),e=null,n||r(200,"success"))},n.insertBefore(e,n.firstChild)},abort:function(){e&&e.onload(void 0,!0)}}}});var ni=[],ii=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=ni.pop()||oe.expando+"_"+En++;return this[t]=!0,t}}),oe.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(ii.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&ii.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=oe.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(ii,"$1"+r):e.jsonp!==!1&&(e.url+=(On.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||oe.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,ni.push(r)),a&&oe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),oe.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||me;var i=de.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=oe.buildFragment([t],e,r),r&&r.length&&oe(r).remove(),oe.merge([],i.childNodes))};var ri=oe.fn.load;oe.fn.load=function(t,e,n){if("string"!=typeof t&&ri)return ri.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return s>=0&&(i=t.slice(s,t.length),t=t.slice(0,s)),oe.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(o="POST"),a.length>0&&oe.ajax({url:t,type:o,dataType:"html",data:e}).done(function(t){r=arguments,a.html(i?oe("<div>").append(oe.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,r||[t.responseText,e,t])}),this},oe.expr.filters.animated=function(t){return oe.grep(oe.timers,function(e){return t===e.elem}).length};var oi=t.document.documentElement;oe.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,u,h=oe.css(t,"position"),c=oe(t),d={};"static"===h&&(t.style.position="relative"),s=c.offset(),o=oe.css(t,"top"),l=oe.css(t,"left"),u=("absolute"===h||"fixed"===h)&&oe.inArray("auto",[o,l])>-1,u?(i=c.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):c.css(d)}},oe.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){oe.offset.setOffset(this,t,e)});var e,n,i={top:0,left:0},r=this[0],o=r&&r.ownerDocument;if(o)return e=o.documentElement,oe.contains(e,r)?(typeof r.getBoundingClientRect!==Me&&(i=r.getBoundingClientRect()),n=$(o),{top:i.top+(n.pageYOffset||e.scrollTop)-(e.clientTop||0),left:i.left+(n.pageXOffset||e.scrollLeft)-(e.clientLeft||0)}):i},position:function(){if(this[0]){var t,e,n={top:0,left:0},i=this[0];return"fixed"===oe.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),oe.nodeName(t[0],"html")||(n=t.offset()),n.top+=oe.css(t[0],"borderTopWidth",!0),n.left+=oe.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-oe.css(i,"marginTop",!0),left:e.left-n.left-oe.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||oi;t&&!oe.nodeName(t,"html")&&"static"===oe.css(t,"position");)t=t.offsetParent;return t||oi})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,e){var n=/Y/.test(e);oe.fn[t]=function(i){return De(this,function(t,i,r){var o=$(t);return void 0===r?o?e in o?o[e]:o.document.documentElement[i]:t[i]:void(o?o.scrollTo(n?oe(o).scrollLeft():r,n?r:oe(o).scrollTop()):t[i]=r)},t,i,arguments.length,null)}}),oe.each(["top","left"],function(t,e){oe.cssHooks[e]=S(ie.pixelPosition,function(t,n){return n?(n=nn(t,e),on.test(n)?oe(t).position()[e]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(t,e){oe.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){oe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return De(this,function(e,n,i){var r;return oe.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?oe.css(e,n,a):oe.style(e,n,i,a)},e,o?i:void 0,o,null)}})}),oe.fn.size=function(){return this.length},oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var ai=t.jQuery,si=t.$;return oe.noConflict=function(e){return t.$===oe&&(t.$=si),e&&t.jQuery===oe&&(t.jQuery=ai),oe},typeof e===Me&&(t.jQuery=t.$=oe),oe})}).call(this),function(){t=e=window.jQuery.noConflict()}.call(this),"undefined"==typeof Package&&(Package={}),Package.jquery={$:t,jQuery:e}}(),function(){var t,e=(Package.meteor.Meteor,Package.deps.Deps),n=Package.minimongo.LocalCollection,i=(Package.minimongo.Minimongo,Package.underscore._),r=Package.random.Random;(function(){var o=function(){t._suppressWarnings?t._suppressWarnings--:("undefined"!=typeof console&&console.warn&&console.warn.apply(console,arguments),t._loggedWarnings++)},a=n._idStringify,s=n._idParse;t={_suppressWarnings:0,_loggedWarnings:0,observe:function(t,n){var s=null,c=null,d=[],p=e.autorun(function(){var p=t();e.nonreactive(function(){var t;if(c&&(d=i.map(c._fetch(),function(t){return{_id:t._id,item:t}}),c.stop(),c=null),p)if(p instanceof Array){var e={};t=i.map(p,function(t,n){var i;if("string"==typeof t)i="-"+t;else if("number"==typeof t||"boolean"==typeof t||void 0===t)i=t;else{if("object"!=typeof t)throw new Error("{{#each}} doesn't support arrays with elements of type "+typeof t);i=t&&t._id||n}var s=a(i);return e[s]?("object"==typeof t&&"_id"in t&&o("duplicate id "+i+" in",p),i=r.id()):e[s]=!0,{_id:i,item:t}}),h(d,t,n)}else{if(!u(p))throw l();var f=p;t=[];var m=!0;c=f.observe({addedAt:function(e,i,r){if(m){if(null!==r)throw new Error("Expected initial data from observe in order");t.push({_id:e._id,item:e})}else n.addedAt(e._id,e,i,r)},changedAt:function(t,e,i){n.changedAt(t._id,t,e,i)},removedAt:function(t,e){n.removedAt(t._id,t,e)},movedTo:function(t,e,i,r){n.movedTo(t._id,t,e,i,r)}}),m=!1,h(d,t,n)}else t=[],h(d,t,n);s=p,d=t})});return{stop:function(){p.stop(),c&&c.stop()}}},fetch:function(t){if(t){if(t instanceof Array)return t;if(u(t))return t.fetch();throw l()}return[]}};var l=function(){return new Error("{{#each}} currently only accepts arrays, cursors or falsey values.")},u=function(t){return t&&i.isObject(t)&&i.isFunction(t.observe)&&i.isFunction(t.fetch)},h=function(t,e,n){var r=Package.minimongo.LocalCollection._diffQueryOrderedChanges,o=[],l=[],u={},h={},c={},d=t.length;i.each(e,function(t,e){l.push({_id:t._id}),h[a(t._id)]=e}),i.each(t,function(t,e){o.push({_id:t._id}),u[a(t._id)]=e,c[a(t._id)]=e}),r(o,l,{addedBefore:function(t,r,o){var s=o?c[a(o)]:d;i.each(c,function(t,e){t>=s&&c[e]++}),d++,c[a(t)]=s,n.addedAt(t,e[h[a(t)]].item,s,o)},movedBefore:function(t,r){var o=c[a(t)],s=r?c[a(r)]:d-1;i.each(c,function(t,e){t>=o&&s>=t?c[e]--:o>=t&&t>=s&&c[e]++}),c[a(t)]=s,n.movedTo(t,e[h[a(t)]].item,o,s,r)},removed:function(e){var r=c[a(e)];i.each(c,function(t,e){t>=r&&c[e]--}),delete c[a(e)],d--,n.removedAt(e,t[u[a(e)]].item,r)}}),i.each(h,function(r,o){var a=s(o);if(i.has(u,o)){var l=e[r].item,h=t[u[o]].item;("object"==typeof l||l!==h)&&n.changedAt(a,l,h,r)}})}}).call(this),"undefined"==typeof Package&&(Package={}),Package["observe-sequence"]={ObserveSequence:t}}(),function(){{var t,e,n;Package.meteor.Meteor}(function(){t={},e=function(t){return t},n=Array.prototype.slice}).call(this),function(){var i=Object.prototype.hasOwnProperty,r=function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);return t};t.Visitor=function(t){r(this,t)},t.Visitor.def=function(t){r(this.prototype,t)},t.Visitor.extend=function(e){var n=this,i=function(){t.Visitor.apply(this,arguments)};return i.prototype=new n,i.extend=n.extend,i.def=n.def,e&&r(i.prototype,e),i},t.Visitor.def({visit:function(e){if(null==e)return this.visitNull.apply(this,arguments);if("object"==typeof e){if(e.htmljsType)switch(e.htmljsType){case t.Tag.htmljsType:return this.visitTag.apply(this,arguments);case t.CharRef.htmljsType:return this.visitCharRef.apply(this,arguments);case t.Comment.htmljsType:return this.visitComment.apply(this,arguments);case t.Raw.htmljsType:return this.visitRaw.apply(this,arguments);default:throw new Error("Unknown htmljs type: "+e.htmljsType)}return t.isArray(e)?this.visitArray.apply(this,arguments):this.visitObject.apply(this,arguments)}if("string"==typeof e||"boolean"==typeof e||"number"==typeof e)return this.visitPrimitive.apply(this,arguments);if("function"==typeof e)return this.visitFunction.apply(this,arguments);throw new Error("Unexpected object in htmljs: "+e)},visitNull:function(){},visitPrimitive:function(){},visitArray:function(){},visitComment:function(){},visitCharRef:function(){},visitRaw:function(){},visitTag:function(){},visitObject:function(t){throw new Error("Unexpected object in htmljs: "+t)},visitFunction:function(t){throw new Error("Unexpected function in htmljs: "+t)}}),t.TransformingVisitor=t.Visitor.extend(),t.TransformingVisitor.def({visitNull:e,visitPrimitive:e,visitArray:function(t){for(var e=n.call(arguments),i=t,r=0;r<t.length;r++){var o=t[r];e[0]=o;var a=this.visit.apply(this,e);a!==o&&(i===t&&(i=t.slice()),i[r]=a)}return i},visitComment:e,visitCharRef:e,visitRaw:e,visitObject:e,visitFunction:e,visitTag:function(e){var i=e.children,r=n.call(arguments);r[0]=i;var o=this.visitChildren.apply(this,r),a=e.attrs;r[0]=a;var s=this.visitAttributes.apply(this,r);if(s===a&&o===i)return e;var l=t.getTag(e.tagName).apply(null,o);return l.attrs=s,l},visitChildren:function(){return this.visitArray.apply(this,arguments)},visitAttributes:function(e){if(t.isArray(e)){for(var i=n.call(arguments),o=e,a=0;a<e.length;a++){var s=e[a];i[0]=s;var l=this.visitAttributes.apply(this,i);l!==s&&(o===e&&(o=e.slice()),o[a]=l)}return o}if(e&&t.isConstructedObject(e))throw new Error("The basic HTML.TransformingVisitor does not support foreign objects in attributes.  Define a custom visitAttributes for this case.");var u=e,h=u;if(u){var c=[null,null];c.push.apply(c,arguments);for(var d in u){var p=u[d];c[0]=d,c[1]=p;var f=this.visitAttribute.apply(this,c);f!==p&&(h===u&&(h=r({},u)),h[d]=f)}}return h},visitAttribute:function(t,e){var i=n.call(arguments,2);return i[0]=e,this.visit.apply(this,i)}}),t.ToTextVisitor=t.Visitor.extend(),t.ToTextVisitor.def({visitNull:function(){return""},visitPrimitive:function(e){var n=String(e);return this.textMode===t.TEXTMODE.RCDATA?n.replace(/&/g,"&amp;").replace(/</g,"&lt;"):this.textMode===t.TEXTMODE.ATTRIBUTE?n.replace(/&/g,"&amp;").replace(/"/g,"&quot;"):n},visitArray:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.visit(t[n]));return e.join("")},visitComment:function(){throw new Error("Can't have a comment here")},visitCharRef:function(e){return this.textMode===t.TEXTMODE.RCDATA||this.textMode===t.TEXTMODE.ATTRIBUTE?e.html:e.str},visitRaw:function(t){return t.value},visitTag:function(t){return this.visit(this.toHTML(t))},visitObject:function(t){throw new Error("Unexpected object in htmljs in toText: "+t)},toHTML:function(e){return t.toHTML(e)}}),t.ToHTMLVisitor=t.Visitor.extend(),t.ToHTMLVisitor.def({visitNull:function(){return""},visitPrimitive:function(t){var e=String(t);return e.replace(/&/g,"&amp;").replace(/</g,"&lt;")},visitArray:function(t){for(var e=[],n=0;n<t.length;n++)e.push(this.visit(t[n]));return e.join("")},visitComment:function(t){return"<!--"+t.sanitizedValue+"-->"},visitCharRef:function(t){return t.html},visitRaw:function(t){return t.value},visitTag:function(e){var n=[],i=e.tagName,r=e.children,o=e.attrs;if(o){o=t.flattenAttributes(o);for(var a in o)if("value"===a&&"textarea"===i)r=[o[a],r];else{var s=this.toText(o[a],t.TEXTMODE.ATTRIBUTE);n.push(" "+a+'="'+s+'"')}}var l,u="<"+i+n.join("")+">",h=[];if("textarea"===i){for(var c=0;c<r.length;c++)h.push(this.toText(r[c],t.TEXTMODE.RCDATA));l=h.join(""),"\n"===l.slice(0,1)&&(l="\n"+l)}else{for(var c=0;c<r.length;c++)h.push(this.visit(r[c]));l=h.join("")}var d=u+l;return(r.length||!t.isVoidElement(i))&&(d+="</"+i+">"),d},visitObject:function(t){throw new Error("Unexpected object in htmljs in toHTML: "+t)},toText:function(e,n){return t.toText(e,n)}})}.call(this),function(){t.Tag=function(){},t.Tag.prototype.tagName="",t.Tag.prototype.attrs=null,t.Tag.prototype.children=Object.freeze?Object.freeze([]):[],t.Tag.prototype.htmljsType=t.Tag.htmljsType=["Tag"];var e=function(e){var i=function(){var e=this instanceof t.Tag?this:new i,r=0,o=arguments.length&&arguments[0];if(o&&"object"==typeof o)if(t.isConstructedObject(o)){if(o instanceof t.Attrs){var a=o.value;1===a.length?e.attrs=a[0]:a.length>1&&(e.attrs=a),r++}}else e.attrs=o,r++;return r<arguments.length&&(e.children=n.call(arguments,r)),e};return i.prototype=new t.Tag,i.prototype.constructor=i,i.prototype.tagName=e,i},i=t.Attrs=function(){var t=this instanceof i?this:new i;return t.value=n.call(arguments),t};t.getTag=function(n){var i=t.getSymbolName(n);if(i===n)throw new Error("Use the lowercase or camelCase form of '"+n+"' here");return t[i]||(t[i]=e(n)),t[i]},t.ensureTag=function(e){t.getTag(e)},t.isTagEnsured=function(e){return t.isKnownElement(e)},t.getSymbolName=function(t){return t.toUpperCase().replace(/-/g,"_")},t.knownElementNames="a abbr acronym address applet area b base basefont bdo big blockquote body br button caption center cite code col colgroup dd del dfn dir div dl dt em fieldset font form frame frameset h1 h2 h3 h4 h5 h6 head hr html i iframe img input ins isindex kbd label legend li link map menu meta noframes noscript object ol optgroup option p param pre q s samp script select small span strike strong style sub sup table tbody td textarea tfoot th thead title tr tt u ul var article aside audio bdi canvas command data datagrid datalist details embed eventsource figcaption figure footer header hgroup keygen mark meter nav output progress ruby rp rt section source summary time track video wbr".split(" "),t.knownSVGElementNames="altGlyph altGlyphDef altGlyphItem animate animateColor animateMotion animateTransform circle clipPath color-profile cursor defs desc ellipse feBlend feColorMatrix feComponentTransfer feComposite feConvolveMatrix feDiffuseLighting feDisplacementMap feDistantLight feFlood feFuncA feFuncB feFuncG feFuncR feGaussianBlur feImage feMerge feMergeNode feMorphology feOffset fePointLight feSpecularLighting feSpotLight feTile feTurbulence filter font font-face font-face-format font-face-name font-face-src font-face-uri foreignObject g glyph glyphRef hkern image line linearGradient marker mask metadata missing-glyph path pattern polygon polyline radialGradient rect script set stop style svg switch symbol text textPath title tref tspan use view vkern".split(" "),t.knownElementNames=t.knownElementNames.concat(t.knownSVGElementNames),t.voidElementNames="area base br col command embed hr img input keygen link meta param source track wbr".split(" ");var r={yes:!0},o=function(t){for(var e={},n=0;n<t.length;n++)e[t[n]]=r;return e},a=o(t.voidElementNames),s=o(t.knownElementNames),l=o(t.knownSVGElementNames);t.isKnownElement=function(t){return s[t]===r},t.isKnownSVGElement=function(t){return l[t]===r},t.isVoidElement=function(t){return a[t]===r};for(var u=0;u<t.knownElementNames.length;u++)t.ensureTag(t.knownElementNames[u]);var h=t.CharRef=function(t){if(!(this instanceof h))return new h(t);if(!(t&&t.html&&t.str))throw new Error("HTML.CharRef must be constructed with ({html:..., str:...})");this.html=t.html,this.str=t.str};h.prototype.htmljsType=h.htmljsType=["CharRef"];var c=t.Comment=function(t){if(!(this instanceof c))return new c(t);if("string"!=typeof t)throw new Error("HTML.Comment must be constructed with a string");this.value=t,this.sanitizedValue=t.replace(/^-|--+|-$/g,"")};c.prototype.htmljsType=c.htmljsType=["Comment"];var d=t.Raw=function(t){if(!(this instanceof d))return new d(t);if("string"!=typeof t)throw new Error("HTML.Raw must be constructed with a string");this.value=t};d.prototype.htmljsType=d.htmljsType=["Raw"],t.isArray=function(t){return t instanceof Array},t.isConstructedObject=function(t){return t&&"object"==typeof t&&t.constructor!==Object&&!Object.prototype.hasOwnProperty.call(t,"constructor")},t.isNully=function(e){if(null==e)return!0;if(t.isArray(e)){for(var n=0;n<e.length;n++)if(!t.isNully(e[n]))return!1;return!0}return!1},t.isValidAttributeName=function(t){return/^[:_A-Za-z][:_A-Za-z0-9.\-]*/.test(t)},t.flattenAttributes=function(e){if(!e)return e;var n=t.isArray(e);if(n&&0===e.length)return null;for(var i={},r=0,o=n?e.length:1;o>r;r++){var a=n?e[r]:e;if("object"!=typeof a||t.isConstructedObject(a))throw new Error("Expected plain JS object as attrs, found: "+a);for(var s in a){if(!t.isValidAttributeName(s))throw new Error("Illegal HTML attribute name: "+s);var l=a[s];t.isNully(l)||(i[s]=l)}}return i},t.toHTML=function(e){return(new t.ToHTMLVisitor).visit(e)},t.TEXTMODE={STRING:1,RCDATA:2,ATTRIBUTE:3},t.toText=function(e,n){if(!n)throw new Error("textMode required for HTML.toText");if(n!==t.TEXTMODE.STRING&&n!==t.TEXTMODE.RCDATA&&n!==t.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+n);var i=new t.ToTextVisitor({textMode:n});return i.visit(e)}}.call(this),"undefined"==typeof Package&&(Package={}),Package.htmljs={HTML:t}}(),function(){var t,e,n,i,r=Package.meteor.Meteor,o=Package.jquery.$,a=Package.jquery.jQuery,s=Package.deps.Deps,l=Package.underscore._,u=Package.htmljs.HTML,h=Package["observe-sequence"].ObserveSequence;(function(){t={}}).call(this),function(){var e={};t.DOMBackend=e;var n="undefined"!=typeof a?a:"undefined"!=typeof Package?Package.jquery&&Package.jquery.jQuery:null;if(!n)throw new Error("jQuery not found");e._$jq=n,e.parseHTML=function(t){return n.parseHTML(t)||[]},e.Events={delegateEvents:function(t,e,i,r){n(t).on(e,i,r)},undelegateEvents:function(t,e,i){n(t).off(e,"**",i)},bindEventCapturer:function(t,i,r,o){var a=n(t),s=function(e){e=n.event.fix(e),e.currentTarget=e.target;var i=n(e.currentTarget);i.is(a.find(r))&&o.call(t,e)};o._meteorui_wrapper=s,i=e.Events.parseEventType(i),t.addEventListener(i,s,!0)},unbindEventCapturer:function(t,n,i){n=e.Events.parseEventType(n),t.removeEventListener(n,i._meteorui_wrapper,!0)},parseEventType:function(t){var e=t.indexOf(".");return e>=0?t.slice(0,e):t}};var i=function(){},r=function(t){this.next=this,this.prev=this,this.func=t};r.prototype.linkBefore=function(t){this.prev=t.prev,this.next=t,t.prev.next=this,t.prev=this},r.prototype.unlink=function(){this.prev.next=this.next,this.next.prev=this.prev},r.prototype.go=function(){var t=this.func;t&&t()},r.prototype.stop=r.prototype.unlink,e.Teardown={_JQUERY_EVENT_NAME:"blaze_teardown_watcher",_CB_PROP:"$blaze_teardown_callbacks",onElementTeardown:function(t,o){var a=new r(o),s=e.Teardown._CB_PROP;return t[s]||(t[s]=new r,n(t).on(e.Teardown._JQUERY_EVENT_NAME,i)),a.linkBefore(t[s]),a},tearDownElement:function(t){for(var e=[],i=t.getElementsByTagName("*"),r=0;r<i.length;r++)e.push(i[r]);e.push(t),n.cleanData(e)}},n.event.special[e.Teardown._JQUERY_EVENT_NAME]={setup:function(){},teardown:function(){var t=this,n=t[e.Teardown._CB_PROP];if(n){for(var i=n.next;i!==n;)i.go(),i=i.next;n.go(),t[e.Teardown._CB_PROP]=null}}},e.findBySelector=function(t,e){return n(t,e)}}.call(this),function(){var e=Object.freeze?Object.freeze([]):[];t.DOMRange=function(t){if(!(this instanceof n))return new n(t);var i=t||e;if(!i||"number"!=typeof i.length)throw new Error("Expected array");for(var r=0;r<i.length;r++)this._memberIn(i[r]);this.members=i,this.emptyRangePlaceholder=null,this.attached=!1,this.parentElement=null,this.parentRange=null,this.attachedCallbacks=e};var n=t.DOMRange;n._USE_COMMENT_PLACEHOLDERS=function(){var t=!1,e=document.createTextNode("");try{e.someProp=!0}catch(n){t=!0}return t}(),n._insert=function(t,e,i,r){var o=t;o instanceof n?o.attach(e,i,r):r?n._moveNodeWithHooks(o,e,i):n._insertNodeWithHooks(o,e,i)},n._remove=function(t){var e=t;e instanceof n?e.detach():n._removeNodeWithHooks(e)},n._removeNodeWithHooks=function(t){t.parentNode&&(1===t.nodeType&&t.parentNode._uihooks&&t.parentNode._uihooks.removeElement?t.parentNode._uihooks.removeElement(t):t.parentNode.removeChild(t))},n._insertNodeWithHooks=function(t,e,n){n=n||null,1===t.nodeType&&e._uihooks&&e._uihooks.insertElement?e._uihooks.insertElement(t,n):e.insertBefore(t,n)},n._moveNodeWithHooks=function(t,e,n){t.parentNode===e&&(n=n||null,1===t.nodeType&&e._uihooks&&e._uihooks.moveElement?e._uihooks.moveElement(t,n):e.insertBefore(t,n))},n.forElement=function(t){if(1!==t.nodeType)throw new Error("Expected element, found: "+t);for(var e=null;t&&!e;)e=t.$blaze_range||null,e||(t=t.parentNode);return e},n.prototype.attach=function(t,e,i){if(i&&(this.parentElement!==t||!this.attached))throw new Error("Can only move an attached DOMRange, and only under the same parent element");var r=this.members;if(r.length){this.emptyRangePlaceholder=null;for(var o=0;o<r.length;o++)n._insert(r[o],t,e,i)}else{var a=n._USE_COMMENT_PLACEHOLDERS?document.createComment(""):document.createTextNode("");this.emptyRangePlaceholder=a,t.insertBefore(a,e||null)}if(this.attached=!0,this.parentElement=t,!i)for(var o=0;o<this.attachedCallbacks.length;o++){var s=this.attachedCallbacks[o];s.attached&&s.attached(this,t)}},n.prototype.setMembers=function(t){var e=t;if(!e||"number"!=typeof e.length)throw new Error("Expected array");for(var n=this.members,i=0;i<n.length;i++)this._memberOut(n[i]);for(var i=0;i<e.length;i++)this._memberIn(e[i]);if(this.attached){if(e.length||n.length){var r=this.lastNode().nextSibling,o=this.parentElement;this.detach(),this.members=e,this.attach(o,r)}}else this.members=e},n.prototype.firstNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var t=this.members[0];return t instanceof n?t.firstNode():t},n.prototype.lastNode=function(){if(!this.attached)throw new Error("Must be attached");if(!this.members.length)return this.emptyRangePlaceholder;var t=this.members[this.members.length-1];return t instanceof n?t.lastNode():t},n.prototype.detach=function(){if(!this.attached)throw new Error("Must be attached");var t=this.parentElement,e=this.members;if(e.length)for(var i=0;i<e.length;i++)n._remove(e[i]);else{var r=this.emptyRangePlaceholder;this.parentElement.removeChild(r),this.emptyRangePlaceholder=null}this.attached=!1,this.parentElement=null;for(var i=0;i<this.attachedCallbacks.length;i++){var o=this.attachedCallbacks[i];o.detached&&o.detached(this,t)}},n.prototype.addMember=function(t,e,i){var r=this.members;if(!(e>=0&&e<=r.length))throw new Error("Bad index in range.addMember: "+e);if(i||this._memberIn(t),this.attached)if(0===r.length)this.setMembers([t]);else{var o;if(e===r.length)o=this.lastNode().nextSibling;else{var a=r[e];o=a instanceof n?a.firstNode():a}r.splice(e,0,t),n._insert(t,this.parentElement,o,i)}else r.splice(e,0,t)},n.prototype.removeMember=function(t,i){var r=this.members;if(!(t>=0&&t<r.length))throw new Error("Bad index in range.removeMember: "+t);if(i)r.splice(t,1);else{var o=r[t];this._memberOut(o),1===r.length?this.setMembers(e):(r.splice(t,1),this.attached&&n._remove(o))}},n.prototype.moveMember=function(t,e){var n=this.members[t];this.removeMember(t,!0),this.addMember(n,e,!0)},n.prototype.getMember=function(t){var e=this.members;if(!(t>=0&&t<e.length))throw new Error("Bad index in range.getMember: "+t);return this.members[t]},n.prototype._memberIn=function(t){t instanceof n?t.parentRange=this:1===t.nodeType&&(t.$blaze_range=this)},n._destroy=function(e,i){e instanceof n?(e.view&&t.destroyView(e.view,i),e.parentRange=null):i||1!==e.nodeType||e.$blaze_range&&(t.destroyNode(e),e.$blaze_range=null)},n.prototype._memberOut=n._destroy,n.prototype.destroyMembers=function(t){for(var e=this.members,n=0;n<e.length;n++)this._memberOut(e[n],t)},n.prototype.destroy=function(t){n._destroy(this,t)},n.prototype.containsElement=function(e){if(!this.attached)throw new Error("Must be attached");if(!t._elementContains(this.parentElement,e))return!1;for(;e.parentNode!==this.parentElement;)e=e.parentNode;for(var n=e.$blaze_range;n&&n!==this;)n=n.parentRange;return n===this},n.prototype.containsRange=function(t){if(!this.attached)throw new Error("Must be attached");if(!t.attached)return!1;if(t.parentElement!==this.parentElement)return this.containsElement(t.parentElement);if(t===this)return!1;for(;t&&t!==this;)t=t.parentRange;return t===this},n.prototype.onAttached=function(t){this.onAttachedDetached({attached:t})},n.prototype.onAttachedDetached=function(t){this.attachedCallbacks===e&&(this.attachedCallbacks=[]),this.attachedCallbacks.push(t)},n.prototype.$=function(e){var n=this,i=this.parentElement;if(!i)throw new Error("Can't select in removed DomRange");if(11===i.nodeType)throw new Error("Can't use $ on an offscreen range");var r=t.DOMBackend.findBySelector(e,i),o=function(t){return"number"==typeof t&&(t=this),n.containsElement(t)};if(r.filter)r=r.filter(o);else{for(var a=[],s=0;s<r.length;s++){var l=r[s];o(l)&&a.push(l)}r=a}return r},t._elementContains=function(t,e){return 1!==t.nodeType?!1:t===e?!1:t.compareDocumentPosition?16&t.compareDocumentPosition(e):(e=e.parentNode,e&&1===e.nodeType?t===e?!0:t.contains(e):!1)}}.call(this),function(){var e=t.EventSupport={},n=t.DOMBackend,i=e.eventsToDelegate={blur:1,change:1,click:1,focus:1,focusin:1,focusout:1,reset:1,submit:1},r=e.EVENT_MODE={TBD:0,BUBBLING:1,CAPTURING:2},o=1,a=function(t,e,a,s,u){this.elem=t,this.type=e,this.selector=a,this.handler=s,this.recipient=u,this.id=o++,this.mode=r.TBD,this.delegatedHandler=function(t){return function(e){return t.selector||e.currentTarget===e.target?t.handler.apply(t.recipient,arguments):void 0}}(this);var h=t.addEventListener&&!l.has(i,n.Events.parseEventType(e));h?this.capturingHandler=function(t){return function(e){if(t.mode===r.TBD){if(e.bubbles)return t.mode=r.BUBBLING,void n.Events.unbindEventCapturer(t.elem,t.type,t.capturingHandler);t.mode=r.CAPTURING,n.Events.undelegateEvents(t.elem,t.type,t.delegatedHandler)}t.delegatedHandler(e)}}(this):this.mode=r.BUBBLING};e.HandlerRec=a,a.prototype.bind=function(){this.mode!==r.BUBBLING&&n.Events.bindEventCapturer(this.elem,this.type,this.selector||"*",this.capturingHandler),this.mode!==r.CAPTURING&&n.Events.delegateEvents(this.elem,this.type,this.selector||"*",this.delegatedHandler)},a.prototype.unbind=function(){this.mode!==r.BUBBLING&&n.Events.unbindEventCapturer(this.elem,this.type,this.capturingHandler),this.mode!==r.CAPTURING&&n.Events.undelegateEvents(this.elem,this.type,this.delegatedHandler)},e.listen=function(t,e,n,i,r,o){var s=[];e.replace(/[^ /]+/g,function(t){s.push(t)});for(var l=[],u=0,h=s.length;h>u;u++){var c=s[u],d=t.$blaze_events;d||(d=t.$blaze_events={});var p=d[c];p||(p=d[c]={},p.handlers=[]);var f=p.handlers,m=new a(t,c,n,i,r);if(l.push(m),m.bind(),f.push(m),o)for(var g=o(r);g;g=o(g))for(var y=0,_=f.length;_>y;y++){var v=f[y];v.recipient===g&&(v.unbind(),v.bind(),f.splice(y,1),f.push(v),y--,_--)}}return{stop:function(){var e=t.$blaze_events;if(e){for(var n=0;n<l.length;n++){var i=l[n],r=e[i.type];if(r)for(var o=r.handlers,a=o.length-1;a>=0;a--)o[a]===i&&(i.unbind(),o.splice(a,1))}l.length=0}}}}}.call(this),function(){e=function(t,e){this.name=t,this.value=e},e.prototype.update=function(t,e,n){null===n?null!==e&&t.removeAttribute(this.name):t.setAttribute(this.name,n)},e.extend=function(t){var n=this,i=function(){e.apply(this,arguments)};return i.prototype=new n,i.extend=n.extend,t&&l.extend(i.prototype,t),i};var t=e.extend({update:function(t,e,n){if(!this.getCurrentValue||!this.setValue||!this.parseValue)throw new Error("Missing methods in subclass of 'DiffingAttributeHandler'");var i=e?this.parseValue(e):{},r=n?this.parseValue(n):{},o=this.getCurrentValue(t),a=o?this.parseValue(o):{};l.each(l.keys(i),function(t){t in r||delete a[t]}),l.each(l.keys(r),function(t){a[t]=r[t]}),this.setValue(t,l.values(a).join(" "))}}),a=t.extend({getCurrentValue:function(t){return t.className},setValue:function(t,e){t.className=e},parseValue:function(t){var e={};return l.each(t.split(" "),function(t){t&&(e[t]=t)}),e}}),s=a.extend({getCurrentValue:function(t){return t.className.baseVal},setValue:function(t,e){t.setAttribute("class",e)}}),u=t.extend({getCurrentValue:function(t){return t.getAttribute("style")},setValue:function(t,e){""===e?t.removeAttribute("style"):t.setAttribute("style",e)},parseValue:function(t){for(var e={},n=/(\*?[-#\/\*\\\w]+(?:\[[0-9a-z_-]+\])?)\s*:\s*(?:\'(?:\\\'|.)*?\'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+[;\s]*/g,i=n.exec(t);i;)e[" "+i[1]]=i[0].trim?i[0].trim():o.trim(i[0]),i=n.exec(t);return e}}),h=e.extend({update:function(t,e,n){var i=this.name;null==n?null!=e&&(t[i]=!1):t[i]=!0}}),c=e.extend({update:function(t,e,n){t.value=n}}),d=e.extend({update:function(t,e,n){var i="http://www.w3.org/1999/xlink";null===n?null!==e&&t.removeAttributeNS(i,this.name):t.setAttributeNS(i,this.name,this.value)}}),p=function(t){return"ownerSVGElement"in t},f=function(t,e){var n={FORM:["action"],BODY:["background"],BLOCKQUOTE:["cite"],Q:["cite"],DEL:["cite"],INS:["cite"],OBJECT:["classid","codebase","data","usemap"],APPLET:["codebase"],A:["href"],AREA:["href"],LINK:["href"],BASE:["href"],IMG:["longdesc","src","usemap"],FRAME:["longdesc","src"],IFRAME:["longdesc","src"],HEAD:["profile"],SCRIPT:["src"],INPUT:["src","usemap","formaction"],BUTTON:["formaction"],BASE:["href"],MENUITEM:["icon"],HTML:["manifest"],VIDEO:["poster"]};
if("itemid"===e)return!0;var i=n[t]||[];return l.contains(i,e)};if(r.isClient)var m=document.createElement("A");var g=function(t){if(r.isClient)return m.href=t,(m.protocol||"").toLowerCase();throw new Error("getUrlProtocol not implemented on the server")},y=e.prototype.update,_=e.extend({update:function(t,e,n){var i=this,o=arguments;if(UI._javascriptUrlsAllowed())y.apply(i,o);else{var a="javascript:"===g(n);a?(r._debug("URLs that use the 'javascript:' protocol are not allowed in URL attribute values. Call UI._allowJavascriptUrls() to enable them."),y.apply(i,[t,e,null])):y.apply(i,o)}}});n=function(t,n,i){return"class"===n?p(t)?new s(n,i):new a(n,i):"style"===n?new u(n,i):"OPTION"===t.tagName&&"selected"===n||"INPUT"===t.tagName&&"checked"===n?new h(n,i):"TEXTAREA"!==t.tagName&&"INPUT"!==t.tagName||"value"!==n?"xlink:"===n.substring(0,6)?new d(n.substring(6),i):f(t.tagName,n)?new _(n,i):new e(n,i):new c(n,i)},i=function(t){this.elem=t,this.handlers={}},i.prototype.update=function(t){var e=this.elem,i=this.handlers;for(var r in i)if(!l.has(t,r)){var o=i[r],a=o.value;o.value=null,o.update(e,a,null),delete i[r]}for(var r in t){var a,o=null,s=t[r];l.has(i,r)?(o=i[r],a=o.value):null!==s&&(o=n(e,r,s),i[r]=o,a=null),a!==s&&(o.value=s,o.update(e,a,s),null===s&&delete i[r])}}}.call(this),function(){t.DOMMaterializer=u.Visitor.extend(),t.DOMMaterializer.def({visitNull:function(t,e){return e},visitPrimitive:function(t,e){var n=String(t);return e.push(document.createTextNode(n)),e},visitCharRef:function(t,e){return this.visitPrimitive(t.str,e)},visitArray:function(t,e){for(var n=0;n<t.length;n++)this.visit(t[n],e);return e},visitComment:function(t,e){return e.push(document.createComment(t.sanitizedValue)),e},visitRaw:function(e,n){for(var i=t.DOMBackend.parseHTML(e.value),r=0;r<i.length;r++)n.push(i[r]);return n},visitTag:function(n,r){var o,a=this,h=n.tagName;o=(u.isKnownSVGElement(h)||e(n))&&document.createElementNS?document.createElementNS("http://www.w3.org/2000/svg",h):document.createElement(h);var c=n.attrs,d=n.children;if("textarea"===h&&n.children.length&&!(c&&"value"in c)){if("function"==typeof c||u.isArray(c))throw new Error("Can't have reactive children of TEXTAREA node; use the 'value' attribute instead.");c=l.extend({},c||null),c.value=t._expand(d,a.parentView),d=[]}if(c){var p,f=new i(o),m=function(){var e=a.parentView,n=t._expandAttributes(c,e),i=u.flattenAttributes(n),r={};for(var o in i)r[o]=t.toText(i[o],e,u.TEXTMODE.STRING);f.update(r)};p=a.parentView?a.parentView.autorun(m):s.nonreactive(function(){return s.autorun(function(){s.withCurrentView(a.parentView,m)})}),t.DOMBackend.Teardown.onElementTeardown(o,function(){p.stop()})}for(var g=a.visit(d,[]),y=0;y<g.length;y++){var _=g[y];_ instanceof t.DOMRange?_.attach(o):o.appendChild(_)}return r.push(o),r},visitObject:function(e,n){return t.isTemplate(e)&&(e=t.runTemplate(e)),e instanceof t.View?(n.push(t.materializeView(e,this.parentView)),n):u.Visitor.prototype.visitObject.call(this,e)}});var e=function(t){return"a"===t.tagName&&t.attrs&&void 0!==t.attrs["xlink:href"]}}.call(this),function(){var e;t._throwNextException=!1,t.reportException=function(n,i){if(t._throwNextException)throw t._throwNextException=!1,n;e||(e=function(){return"undefined"!=typeof r?r._debug:"undefined"!=typeof console&&console.log?console.log:function(){}}),e()(i||"Exception caught in template:",n.stack||n.message)},t.wrapCatchingExceptions=function(e,n){return"function"!=typeof e?e:function(){try{return e.apply(this,arguments)}catch(i){t.reportException(i,"Exception in "+n+":")}}}}.call(this),function(){t.ReactiveVar=function(e,n){return this instanceof t.ReactiveVar?(this.curValue=e,this.equalsFunc=n,void(this.dep=new s.Dependency)):new t.ReactiveVar(e,n)},t.ReactiveVar._isEqual=function(t,e){var n=t,i=e;return n!==i?!1:!n||"number"==typeof n||"boolean"==typeof n||"string"==typeof n},t.ReactiveVar.prototype.get=function(){return s.active&&this.dep.depend(),this.curValue},t.ReactiveVar.prototype.set=function(e){var n=this.curValue;(this.equalsFunc||t.ReactiveVar._isEqual)(n,e)||(this.curValue=e,this.dep.changed())},t.ReactiveVar.prototype.toString=function(){return"ReactiveVar{"+this.get()+"}"}}.call(this),function(){t.View=function(e,n){return this instanceof t.View?("function"==typeof e&&(n=e,e=""),this.kind=e,this.render=n,this._callbacks={created:null,materialized:null,rendered:null,destroyed:null},this.isCreated=!1,this.isCreatedForExpansion=!1,this.isDestroyed=!1,this.isInRender=!1,this.parentView=null,this.domrange=null,void(this.renderCount=0)):new t.View(e,n)},t.View.prototype.render=function(){return null},t.View.prototype.onCreated=function(t){this._callbacks.created=this._callbacks.created||[],this._callbacks.created.push(t)},t.View.prototype.onMaterialized=function(t){this._callbacks.materialized=this._callbacks.materialized||[],this._callbacks.materialized.push(t)},t.View.prototype.onRendered=function(t){this._callbacks.rendered=this._callbacks.rendered||[],this._callbacks.rendered.push(t)},t.View.prototype.onDestroyed=function(t){this._callbacks.destroyed=this._callbacks.destroyed||[],this._callbacks.destroyed.push(t)},t.View.prototype.autorun=function(e,n){var i=this;if(!i.isCreated)throw new Error("View#autorun must be called from the created callback at the earliest");if(this.isInRender)throw new Error("Can't call View#autorun from inside render(); try calling it from the created or rendered callback");if(s.active)throw new Error("Can't call View#autorun from a Deps Computation; try calling it from the created or rendered callback");var r=s.autorun(function(r){return t.withCurrentView(n||i,function(){return e.call(i,r)})});return i.onDestroyed(function(){r.stop()}),r},t._fireCallbacks=function(e,n){t.withCurrentView(e,function(){s.nonreactive(function(){for(var t=e._callbacks[n],i=0,r=t&&t.length;r>i;i++)t[i].call(e)})})},t.materializeView=function(e,n){if(e.parentView=n||null,e.isCreated)throw new Error("Can't render the same View twice");e.isCreated=!0,t._fireCallbacks(e,"created");var i,r,o=!1,a=function(){o&&!e.isDestroyed&&e._callbacks.rendered&&e._callbacks.rendered.length&&s.afterFlush(function(){o&&!e.isDestroyed&&(o=!1,t._fireCallbacks(e,"rendered"))})};return s.nonreactive(function(){e.autorun(function(n){e.renderCount++,e.isInRender=!0;var l=e.render();e.isInRender=!1,s.nonreactive(function(){var s=new t.DOMMaterializer({parentView:e}),u=s.visit(l,[]);(n.firstRun||!t._isContentEqual(r,l))&&(n.firstRun?(i=new t.DOMRange(u),e.domrange=i,i.view=e):i.setMembers(u),t._fireCallbacks(e,"materialized"),o=!0,n.firstRun||a())}),r=l,s.onInvalidate(function(){i.destroyMembers()})});var n=null;i.onAttached(function(i,r){n=t.DOMBackend.Teardown.onElementTeardown(r,function(){t.destroyView(e,!0)}),a()}),e.onDestroyed(function(){n&&n.stop(),n=null})}),i},t._expandView=function(e,n){if(e.parentView=n||null,e.isCreated)throw new Error("Can't render the same View twice");e.isCreated=!0,e.isCreatedForExpansion=!0,t._fireCallbacks(e,"created"),e.isInRender=!0;var i=t.withCurrentView(e,function(){return e.render()});e.isInRender=!1;var r=t._expand(i,e);return s.active?s.onInvalidate(function(){t.destroyView(e)}):t.destroyView(e),r},t.HTMLJSExpander=u.TransformingVisitor.extend(),t.HTMLJSExpander.def({visitObject:function(e){return t.isTemplate(e)&&(e=t.runTemplate(e)),e instanceof t.View?t._expandView(e,this.parentView):u.TransformingVisitor.prototype.visitObject.call(this,e)},visitAttributes:function(e){return"function"==typeof e&&(e=t.withCurrentView(this.parentView,e)),u.TransformingVisitor.prototype.visitAttributes.call(this,e)},visitAttribute:function(e,n,i){return"function"==typeof n&&(n=t.withCurrentView(this.parentView,n)),u.TransformingVisitor.prototype.visitAttribute.call(this,e,n,i)}});var e=function(){var e=t.currentView;return e&&e.isInRender?e:null};t._expand=function(n,i){return i=i||e(),new t.HTMLJSExpander({parentView:i}).visit(n)},t._expandAttributes=function(n,i){return i=i||e(),new t.HTMLJSExpander({parentView:i}).visitAttributes(n)},t.destroyView=function(e){e.isDestroyed||(e.isDestroyed=!0,t._fireCallbacks(e,"destroyed"),e.domrange&&e.domrange.destroyMembers())},t.destroyNode=function(e){1===e.nodeType&&t.DOMBackend.Teardown.tearDownElement(e)},t._isContentEqual=function(t,e){return t instanceof u.Raw?e instanceof u.Raw&&t.value===e.value:null==t?null==e:t===e&&("number"==typeof t||"boolean"==typeof t||"string"==typeof t)},t.currentView=null,t.withCurrentView=function(e,n){var i=t.currentView;try{return t.currentView=e,n()}finally{t.currentView=i}},t.isTemplate=function(t){return t&&"function"==typeof t.__makeView},t.runTemplate=function(e){if(!t.isTemplate(e))throw new Error("Not a template: "+e);var n=Array.prototype.slice.call(arguments,1);return e.__makeView.apply(e,n)},t.render=function(n,i){i=i||e();var r;if("function"==typeof n)r=t.View("render",n);else if(t.isTemplate(n))r=t.runTemplate(n);else{if(!(n instanceof t.View))throw new Error("Expected a function, template, or View in Blaze.render");r=n}return t.materializeView(r,i)},t.toHTML=function(n,i){if("function"==typeof n)throw new Error("Blaze.toHTML doesn't take a function, just HTMLjs");return i=i||e(),u.toHTML(t._expand(n,i))},t.toText=function(n,i,r){if("function"==typeof n)throw new Error("Blaze.toText doesn't take a function, just HTMLjs");if(null==i||i instanceof t.View||(r=i,i=null),i=i||e(),!r)throw new Error("textMode required");if(r!==u.TEXTMODE.STRING&&r!==u.TEXTMODE.RCDATA&&r!==u.TEXTMODE.ATTRIBUTE)throw new Error("Unknown textMode: "+r);return u.toText(t._expand(n,i),r)},t.getCurrentData=function(){var e=t.getCurrentView("with");return e?e.dataVar.get():null},t.getCurrentView=function(e){var n=t.currentView;if(!n)throw new Error("There is no current view");if(e){for(;n&&n.kind!==e;)n=n.parentView;return n||null}return n},t.getCurrentTemplateView=function(){for(var e=t.getCurrentView();e&&!e.template;)e=e.parentView;return e||null},t.getParentView=function(t,e){var n=t.parentView;if(e)for(;n&&n.kind!==e;)n=n.parentView;return n||null},t.getElementView=function(e,n){for(var i=t.DOMRange.forElement(e),r=null;i&&!r;)r=i.view||null,r||(i=i.parentRange?i.parentRange:t.DOMRange.forElement(i.parentElement));if(n){for(;r&&r.kind!==n;)r=r.parentView;return r||null}return r},t.getElementData=function(e){var n=t.getElementView(e,"with");return n?n.dataVar.get():null},t.getViewData=function(e){var n=t.getParentView(e,"with");return n?n.dataVar.get():null},t._addEventMap=function(e,n,i){i=i||null;var r=[];if(!e.domrange)throw new Error("View must have a DOMRange");e.domrange.onAttached(function(o,a){l.each(n,function(n,s){var u=s.split(/,\s+/);l.each(u,function(s){var l=s.split(/\s+/);if(0!==l.length){var u=l.shift(),h=l.join(" ");r.push(t.EventSupport.listen(a,u,h,function(r){if(!o.containsElement(r.currentTarget))return null;var a=i||this,s=arguments;return t.withCurrentView(e,function(){return n.apply(a,s)})},o,function(t){return t.parentRange}))}})})}),e.onDestroyed(function(){l.each(r,function(t){t.stop()}),r.length=0})}}.call(this),function(){t._calculateCondition=function(t){return t instanceof Array&&0===t.length&&(t=!1),!!t},t.With=function(e,n){var i=t.View("with",n);return i.dataVar=new t.ReactiveVar,i.onCreated(function(){"function"==typeof e?i.autorun(function(){i.dataVar.set(e())},i.parentView):i.dataVar.set(e)}),i},t.If=function(e,n,i,r){var o=new t.ReactiveVar,a=t.View(r?"unless":"if",function(){return o.get()?n():i?i():null});return a.__conditionVar=o,a.onCreated(function(){this.autorun(function(){var n=t._calculateCondition(e());o.set(r?!n:n)},this.parentView)}),a},t.Unless=function(e,n,i){return t.If(e,n,i,!0)},t.Each=function(e,n,i){var r=t.View("each",function(){var t=this.initialSubviews;return this.initialSubviews=null,this.isCreatedForExpansion&&(this.expandedValueDep=new s.Dependency,this.expandedValueDep.depend()),t});return r.initialSubviews=[],r.numItems=0,r.inElseMode=!1,r.stopHandle=null,r.contentFunc=n,r.elseFunc=i,r.argVar=new t.ReactiveVar,r.onCreated(function(){r.autorun(function(){r.argVar.set(e())},r.parentView),r.stopHandle=h.observe(function(){return r.argVar.get()},{addedAt:function(e,n,i){s.nonreactive(function(){var e=t.With(n,r.contentFunc);if(r.numItems++,r.expandedValueDep)r.expandedValueDep.changed();else if(r.domrange){r.inElseMode&&(r.domrange.removeMember(0),r.inElseMode=!1);var o=t.materializeView(e,r);r.domrange.addMember(o,i)}else r.initialSubviews.splice(i,0,e)})},removedAt:function(e,n,i){s.nonreactive(function(){r.numItems--,r.expandedValueDep?r.expandedValueDep.changed():r.domrange?(r.domrange.removeMember(i),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r.domrange.addMember(t.materializeView(t.View("each_else",r.elseFunc),r),0))):r.initialSubviews.splice(i,1)})},changedAt:function(t,e,n,i){s.nonreactive(function(){var t;r.expandedValueDep?r.expandedValueDep.changed():t=r.domrange?r.domrange.getMember(i).view:r.initialSubviews[i],t.dataVar.set(e)})},movedTo:function(t,e,n,i){s.nonreactive(function(){if(r.expandedValueDep)r.expandedValueDep.changed();else if(r.domrange)r.domrange.moveMember(n,i);else{var t=r.initialSubviews,e=t[n];t.splice(n,1),t.splice(i,0,e)}})}}),r.elseFunc&&0===r.numItems&&(r.inElseMode=!0,r.initialSubviews[0]=t.View("each_else",r.elseFunc))}),r.onDestroyed(function(){r.stopHandle&&r.stopHandle.stop()}),r},t.InOuterTemplateScope=function(e,n){var i=t.View("InOuterTemplateScope",n),r=e.parentView;return r.__isTemplateWith&&(r=r.parentView),i.onCreated(function(){this.originalParentView=this.parentView,this.parentView=r}),i}}.call(this),function(){var e=function(e){return"function"==typeof e?function(){var n=t.getCurrentData();return null==n&&(n={}),e.apply(n,arguments)}:e},n=function(e){return t.wrapCatchingExceptions(e,"template helper")};t.View.prototype.lookup=function(i,r){var o=this.template,a=r&&r.template;if(/^\./.test(i)){if(!/^(\.)+$/.test(i))throw new Error("id starting with dot must be a series of dots");return t._parentData(i.length-1,!0)}return o&&i in o?n(e(o[i])):a&&Template.__lookup__(i)?Template.__lookup__(i):UI._globalHelpers[i]?n(e(UI._globalHelpers[i])):function(){var e=arguments.length>0,n=t.getCurrentData();if(a&&(!n||!n[i]))throw new Error("No such template: "+i);if(e&&(!n||!n[i]))throw new Error("No such function: "+i);if(!n)return null;var r=n[i];if("function"!=typeof r){if(e)throw new Error("Can't call non-function: "+r);return r}return r.apply(n,arguments)}},t._parentData=function(e,n){for(var i=t.getCurrentView("with"),r=0;e>r&&i;r++)i=t.getParentView(i,"with");return i?n?function(){return i.dataVar.get()}:i.dataVar.get():null},t.View.prototype.lookupTemplate=function(t){return this.lookup(t,{template:!0})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.blaze={Blaze:t}}(),function(){var t,e,n=(Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery,Package.deps.Deps,Package.random.Random,Package.ejson.EJSON,Package.underscore._,Package["ordered-dict"].OrderedDict,Package.minimongo.LocalCollection,Package.minimongo.Minimongo,Package["observe-sequence"].ObserveSequence,Package.htmljs.HTML,Package.blaze.Blaze);(function(){t={},t._globalHelpers={},t.registerHelper=function(e,n){t._globalHelpers[e]=n},t._escape=function(){var t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","&":"&amp;"},e=function(e){return t[e]};return function(t){return t.replace(/[&<>"'`]/g,e)}}();var e=!1;t._allowJavascriptUrls=function(){e=!0},t._javascriptUrlsAllowed=function(){return e},t._parentData=n._parentData,t.getElementData=n.getElementData}).call(this),function(){e={},e.registerHelper=t.registerHelper,e._escape=t._escape,e.SafeString=function(t){this.string=t},e.SafeString.prototype.toString=function(){return this.string.toString()}}.call(this),"undefined"==typeof Package&&(Package={}),Package.ui={UI:t,Handlebars:e}}(),function(){var t,e=(Package.meteor.Meteor,Package.ui.UI),n=(Package.ui.Handlebars,Package.htmljs.HTML,Package.blaze.Blaze);(function(){t={},t.prototype=function(){return function(){}.prototype}(),t.prototype.helpers=function(t){for(var e in t)this[e]=t[e]},t.__updateTemplateInstance=function(t){var e=t._templateInstance;return e||(e=t._templateInstance={$:function(e){if(!t.domrange)throw new Error("Can't use $ on component with no DOM");return t.domrange.$(e)},findAll:function(t){return Array.prototype.slice.call(this.$(t))},find:function(t){var e=this.$(t);return e[0]||null},data:null,firstNode:null,lastNode:null,autorun:function(e){return t.autorun(e)},__view__:t}),e.data=n.getViewData(t),t.domrange&&!t.isDestroyed?(e.firstNode=t.domrange.firstNode(),e.lastNode=t.domrange.lastNode()):(e.firstNode=null,e.lastNode=null),e},e._templateInstance=function(){var e=n.getCurrentTemplateView();if(!e)throw new Error("No current template");return t.__updateTemplateInstance(e)},t.prototype.events=function(e){var i=this;i.__eventMaps=i.__eventMaps||[];var r={};for(var o in e)r[o]=function(e,i){return function(e){var r=this,o=n.getElementData(e.currentTarget);null==o&&(o={});var a=Array.prototype.slice.call(arguments),s=t.__updateTemplateInstance(r);return a.splice(1,0,s),i.apply(o,a)}}(o,e[o]);i.__eventMaps.push(r)},t.prototype.__makeView=function(e,i){var r=this,o=n.View(this.__viewName,this.__render);return o.template=r,o.templateContentBlock=e?t.__create__("(contentBlock)",e):null,o.templateElseBlock=i?t.__create__("(elseBlock)",i):null,(r.__eventMaps||"object"==typeof r.events)&&o.onMaterialized(function(){r.__eventMaps||"object"!=typeof r.events||t.prototype.events.call(r,r.events),_.each(r.__eventMaps,function(t){n._addEventMap(o,t,o)})}),r.__initView&&r.__initView(o),r.created&&o.onCreated(function(){var e=t.__updateTemplateInstance(o);r.created.call(e)}),r.rendered&&o.onRendered(function(){var e=t.__updateTemplateInstance(o);r.rendered.call(e)}),r.destroyed&&o.onDestroyed(function(){var e=t.__updateTemplateInstance(o);r.destroyed.call(e)}),o};var i=Object.prototype.hasOwnProperty;t.__lookup__=function(e){if(!i.call(t,e))return null;var n=t[e];return t.__isTemplate__(n)?n:null},t.__create__=function(e,n,i){var r=new t.prototype.constructor;return r.__viewName=e,r.__render=n,i&&(r.__initView=i),r},t.__define__=function(e,n){if(i.call(t,e)){if(t[e].__makeView)throw new Error("There are multiple templates named '"+e+"'. Each template needs a unique name.");throw new Error("This template name is reserved: "+e)}var r=t.__create__("Template."+e,n);return r.__templateName=e,t[e]=r,r},t.__isTemplate__=function(t){return t&&t.__makeView},t.__define__("__body__",function(){for(var e=t.__body__.__contentParts,n=0;n<e.length;n++)e[n].template=t.__body__;return e}),t.__body__.__contentParts=[],t.__body__.__isInstantiated=!1;var r=function(){if(!t.__body__.__isInstantiated){t.__body__.__isInstantiated=!0;var e=n.render(t.__body__);t.__body__.__view=e.view,e.attach(document.body)}};t.__body__.__instantiate=r,e.render=function(e){if(!t.__isTemplate__(e))throw new Error("Template required here");return n.render(e)},e.renderWithData=function(e,i){if(!t.__isTemplate__(e))throw new Error("Template required here");if("function"==typeof i)throw new Error("Data argument can't be a function");return n.render(n.With(i,function(){return e}))},e.insert=function(t,e,i){if(!e||"number"!=typeof e.nodeType)throw new Error("'parentElement' must be a DOM node");if(i&&"number"!=typeof i.nodeType)throw new Error("'nextNode' must be a DOM node");if(!t instanceof n.DOMRange)throw new Error("Expected template rendered with UI.render");t.attach(e,i)},e.remove=function(t){if(!t instanceof n.DOMRange)throw new Error("Expected template rendered with UI.render");t.attached&&t.detach(),t.destroy()},e.body=t.__body__}).call(this),"undefined"==typeof Package&&(Package={}),Package.templating={Template:t}}(),function(){var t,e=(Package.meteor.Meteor,Package.htmljs.HTML),n=(Package.ui.UI,Package.ui.Handlebars),i=(Package["observe-sequence"].ObserveSequence,Package.templating.Template),r=Package.blaze.Blaze;(function(){t={};var o=function(t,e){return t===e};t.include=function(t,e,n){if(!t)return null;if("function"!=typeof t){var a=t;if(!r.isTemplate(a))throw new Error("Expected template or null, found: "+a);return r.runTemplate(t,e,n)}var s=r.ReactiveVar(null,o),l=r.View("Spacebars.include",function(){var t=s.get();if(null===t)return null;if(!i.__isTemplate__(t))throw new Error("Expected template or null, found: "+t);return r.runTemplate(t,e,n)});return l.__templateVar=s,l.onCreated(function(){this.autorun(function(){s.set(t())})}),l},t.mustacheImpl=function(){var e=arguments;if(e.length>1){var n=e[e.length-1];if(n instanceof t.kw){var i={};for(var r in n.hash){var o=n.hash[r];i[r]="function"==typeof o?o():o}e[e.length-1]=t.kw(i)}else n=t.kw(),e=Array.prototype.slice.call(arguments),e.push(n)}return t.call.apply(null,e)},t.mustache=function(){var n=t.mustacheImpl.apply(null,arguments);return n instanceof t.SafeString?e.Raw(n.toString()):null==n||n===!1?null:String(n)},t.attrMustache=function(){var n=t.mustacheImpl.apply(null,arguments);if(null==n||""===n)return null;if("object"==typeof n)return n;if("string"==typeof n&&e.isValidAttributeName(n)){var i={};return i[n]="",i}throw new Error("Expected valid attribute name, '', null, or object")},t.dataMustache=function(){var e=t.mustacheImpl.apply(null,arguments);return e},t.makeRaw=function(t){return null==t?null:t instanceof e.Raw?t:e.Raw(t)},t.call=function(t){if("function"==typeof t){for(var e=[],n=1;n<arguments.length;n++){var i=arguments[n];e[n-1]="function"==typeof i?i():i}return t.apply(null,e)}if(arguments.length>1)throw new Error("Can't call non-function: "+t);return t},t.kw=function(e){return this instanceof t.kw?void(this.hash=e||{}):new t.kw(e)},t.SafeString=function(e){return this instanceof t.SafeString?new n.SafeString(e):new t.SafeString(e)},t.SafeString.prototype=n.SafeString.prototype,t.dot=function(e,n){if(arguments.length>2){var i=[];return i.push(t.dot(e,n)),i.push.apply(i,Array.prototype.slice.call(arguments,2)),t.dot.apply(null,i)}if("function"==typeof e&&(e=e()),!e)return e;var r=e[n];return"function"!=typeof r?r:function(){return r.apply(e,arguments)}},t.TemplateWith=function(t,e){var n,i=function(){var e=null;return n.parentView&&"InOuterTemplateScope"===n.parentView.kind&&(e=n.parentView.originalParentView),e?r.withCurrentView(e,t):t()};return n=r.With(i,e),n.__isTemplateWith=!0,n},t.With=function(t,e,n){var i=new r.ReactiveVar,o=r.View("Spacebars_with",function(){return r.If(function(){return i.get()},function(){return r.With(function(){return i.get()},e)},n)});return o.onCreated(function(){this.autorun(function(){i.set(t()),Deps.onInvalidate(function(){i.dep.changed()})})}),o}}).call(this),function(){i.__define__("__dynamic",function(){var e=this;return[r.View(function(){return t.mustache(e.lookup("checkContext"))}),"\n  ",r.If(function(){return t.call(e.lookup("dataContextPresent"))},function(){return["\n    ",t.include(e.lookupTemplate("__dynamicWithDataContext")),"\n  "]},function(){return["\n    \n    ",t.TemplateWith(function(){return{template:t.call(e.lookup("template")),data:t.call(e.lookup(".."))}},function(){return t.include(e.lookupTemplate("__dynamicWithDataContext"))}),"\n  "]})]}),i.__define__("__dynamicWithDataContext",function(){var e=this;return t.With(function(){return t.dataMustache(e.lookup("chooseTemplate"),e.lookup("template"))},function(){return["\n    ",t.TemplateWith(function(){return t.call(t.dot(e.lookup(".."),"data"))},function(){return t.include(e.lookupTemplate(".."))}),"    \n  "]})})}.call(this),function(){i.__dynamicWithDataContext.chooseTemplate=function(t){return i[t]||null},i.__dynamic.dataContextPresent=function(){return _.has(this,"data")},i.__dynamic.checkContext=function(){if(!_.has(this,"template"))throw new Error("Must specify name in the 'template' argument to {{> UI.dynamic}}.");_.each(this,function(t,e){if("template"!==e&&"data"!==e)throw new Error("Invalid argument to {{> UI.dynamic}}: "+e)})}}.call(this),"undefined"==typeof Package&&(Package={}),Package.spacebars={Spacebars:t}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.less={}}(),function(){var t=(Package.meteor.Meteor,Package.underscore._),e=Package.ejson.EJSON;(function(){e.minify=function(n){var i={"false":0,"true":1,"null":2},r=[!1,!0,null],o=[0],a=function(t){return"undefined"==typeof i[t]&&(i[t]=r.push(t)-1),i[t]},s=function(t){var e=String(t);return"undefined"!=typeof i[e]?i[e]:null},l=function(t){for(var e=null,n=1;n<o.length;n++){for(var i=o[n],r=Math.min(i.length,t.length),a=!0,s=0;r>s;s++)if(i[s]!==t[s]){a=!1;break}if(a&&(e=n,t.length>r&&(o[n]=t)),null!==e)break}return null===e&&(e=o.push(t)-1),e},u=function(e){var n=!t.isArray(e),i=[],r=[];if(t.each(e,function(t,e){var o=n?a(e):0;if(null!==t&&"object"==typeof t)n&&r.push(o),i.push(u(t));else{var l=s(t);null===l?(r.push(o),i.push(t)):(r.push(-o),i.push(l))}}),n){var o=l(r);i.unshift(o)}else i.unshift(0);return i};if("object"!=typeof n)return e.stringify(n);var h=u(e.toJSONValue(n));return r.shift(),r.shift(),r.shift(),JSON.stringify([r,o,h])},e.maxify=function(n){var i=JSON.parse(String(n));if(null===i||3!==i.length)return e.fromJSONValue(i);var r=i[0],o=i[1],a=i[2];r.unshift(!1,!0,null);var s=function(e){var n=e.shift(),i=n?o[n]:null,a=null===i?[]:{};if(null===i)for(var l=0;l<e.length;l++)a.push(t.isArray(e[l])?s(e[l]):e[l]);else for(var l=0;l<e.length;l++){var u=i[l],h=r[Math.abs(u)];if(t.isArray(e[l]))a[h]=s(e[l]);else{var c=e[l];0>u&&(c=r[c]),a[h]=c}}return a};return e.fromJSONValue(s(a))}}).call(this),"undefined"==typeof Package&&(Package={}),Package["ejson-minimax"]={}}(),function(){{var t,e=Package.meteor.Meteor,n=Package.deps.Deps,i=Package.retry.Retry;Package.livedata.DDP}(function(){var r=__meteor_runtime_config__.autoupdateVersion||"unknown",o=new e.Collection("meteor_autoupdate_clientVersions");t={},t.newClientAvailable=function(){return!!o.findOne({$and:[{current:!0},{_id:{$ne:r}}]})};var a=new i({minCount:0,baseTimeout:3e4}),s=0;t._retrySubscription=function(){e.subscribe("meteor_autoupdate_clientVersions",{onError:function(n){e._debug("autoupdate subscription failed:",n),s++,a.retryLater(s,function(){t._retrySubscription()})},onReady:function(){Package.reload&&n.autorun(function(t){o.findOne({current:!0})&&!o.findOne({_id:r})&&(t.stop(),Package.reload.Reload._reload())})}})},t._retrySubscription()}).call(this),"undefined"==typeof Package&&(Package={}),Package.autoupdate={Autoupdate:t}}(),function(){Package.meteor.Meteor,Package.reload.Reload,Package.autoupdate.Autoupdate;"undefined"==typeof Package&&(Package={}),Package["standard-app-packages"]={}}(),function(){var t,e=(Package.meteor.Meteor,Package.underscore._);(function(){t={_isCssLoaded:function(){return 0===document.styleSheets.length?!0:e.find(document.styleSheets,function(t){return t.cssText&&!t.cssRules?!t.cssText.match(/meteor-css-not-found-error/):!e.find(t.cssRules,function(t){return".meteor-css-not-found-error"===t.selectorText})})}}}).call(this),"undefined"==typeof Package&&(Package={}),Package.webapp={WebApp:t}}(),function(){{var t,e,n=Package.meteor.Meteor,i=Package.underscore._,r=Package.random.Random,o=Package.minimongo.LocalCollection,a=(Package.minimongo.Minimongo,Package.ejson.EJSON),s=Package.deps.Deps;Package.webapp.WebApp,Package.logging.Log,Package.session.Session,Package.livedata.DDP,Package.ui.UI,Package.ui.Handlebars,Package.spacebars.Spacebars,Package.templating.Template,Package.check.check,Package.check.Match,Package.jquery.$,Package.jquery.jQuery,Package.htmljs.HTML,Package.blaze.Blaze}(function(){"use strict";e={},e.connection=n.connection||n.default_connection,e.idParse=o&&o._idParse||n.idParse,e.subscriptionsReady=!1,e.subscriptionsReadyDeps=new s.Dependency,window.Meteor=n,window.console=window&&window.console&&window.console.log?window.console:{log:function(){}},e._isReloading=!1,e._storage=function(){var t,e,n;try{n=r.id(),(t=window.localStorage).setItem(n,n),e=t.getItem(n)!==n,t.removeItem(n),e&&(t=!1)}catch(i){}return t},e.storage=e._storage(),e._prefix="groundDB.",e._getGroundDBPrefix=function(t){return e._prefix+t},e._saveObject=function(n,i){if(e.storage&&e._isReloading===!1){var r=i&&a.minify(i);try{e.storage.setItem(e._getGroundDBPrefix(n),r)}catch(o){t.onQuotaExceeded()}}},e._loadObject=function(t){if(e.storage){var n=e.storage.getItem(e._getGroundDBPrefix(t));return n?a.maxify(n):null}return null},e.minify=function(t){return a.stringify(t)},e.maxify=function(t){return a.parse(t)},e.OneTimeout=function(){var t=this;t._id=null,t.oneTimeout=function(e,i){t._count++,null!==t._id&&n.clearTimeout(t._id),t._id=n.setTimeout(function(){t._id=null,e()},i)}},e._serverTimeDiff=0,e.storage&&(e._serverTimeDiff=1*e.storage.getItem(e._prefix+"timeDiff")||0,n.startup(function(){n.call("getServerTime",function(t,n){t||(e._serverTimeDiff=n-Date.now(),e.storage.setItem(e._prefix+"timeDiff",e._serverTimeDiff))})})),e._groundDatabases={},t=function(r,o){var a;a=r instanceof n.Collection?r:new n.Collection(r,o),a.offlineDatabase=!(null!==a._connection),a.name=a._name?a._name:"null",e._groundDatabases[a.name]=a,a.gdbSuper={},a._connection&&a._connection._stores[a.name]&&(a.gdbSuper.storeUpdate=a._connection._stores[a.name].update,a._connection._stores[a.name].update=function(t){var n=t.id&&e.idParse(t.id),i=t.id&&a._collection.findOne(n);"added"===t.msg&&i&&(delete a._localOnly[n],a._collection.remove(n)),"removed"!==t.msg||i||a._collection.insert({_id:n}),a.gdbSuper.storeUpdate(t)}),a._databaseLoaded=!1,a._localOnly={},a.removeLocalOnly=function(){i.each(a._localOnly,function(t,e){t&&(a._collection.remove({_id:e}),delete a._localOnly[e])})},a.isCleanedUp=!1,s.autorun(function(){t.ready()&&!a.isCleanedUp&&(a.isCleanedUp=!0,a.removeLocalOnly())}),a._checkDocs=function(t){var e={};return i.each(t,function(t,n){e[n]=t}),e},a._loadDatabase=function(){t.onResumeDatabase(a.name);var n=e._loadObject("db."+a.name);i.each(a._checkDocs(n?n._map:{}),function(t){var e=a._collection.findOne({_id:t._id});e||(a.offlineDatabase||(a._localOnly[t._id]=!0),a._collection.insert(t))}),a._databaseLoaded=!0};var l=new e.OneTimeout,u=new s.Dependency,h=function(){u.changed()};return a._saveDatabase=function(){a._databaseLoaded&&l.oneTimeout(function(){t.onCacheDatabase(a.name),e._saveObject("db."+a.name,a._collection._docs)},200)},a.find().observe({added:h,changed:h,removed:h}),n.autorun(function(){u.depend(),a._saveDatabase()}),a._loadDatabase(),a},window.GroundDB=t,t.onQuotaExceeded=function(){throw new Error("Quota exceeded!")},t.onResumeDatabase=function(){},t.onResumeMethods=function(){},t.onMethodCall=function(){},t.onCacheDatabase=function(){},t.onCacheMethods=function(){},t.onTabSync=function(){},t.onFlushInMemoryMethods=function(){},t.ready=function(){return e.subscriptionsReadyDeps.depend(),e.subscriptionsReady},t.saveObject=e._saveObject,t.loadObject=e._loadObject,t.now=function(){return Date.now()+e._serverTimeDiff},e.skipThisMethod={login:!0,getServerTime:!0},t.skipMethods=function(t){if("object"!=typeof t)throw new Error("skipMethods expects parametre as object of method names to skip when caching methods");for(var n in t)t.hasOwnProperty(n)&&(e.skipThisMethod[n]=!!t[n])},t.OneTimeout=e.OneTimeout,e._methodsResumed=!1,e._getMethodsList=function(){var t=[];return i.each(e.connection._methodInvokers,function(n){e.skipThisMethod[n._message.method]||t.push({method:n._message.method,args:n._message.params,options:{wait:n._wait}})}),t},e._flushInMemoryMethods=function(){var n=!1;if(e.connection&&e.connection._outstandingMethodBlocks&&e.connection._outstandingMethodBlocks.length){for(var i=0;i<e.connection._outstandingMethodBlocks.length;i++){var r=e.connection._outstandingMethodBlocks[i];r&&r._message&&!e.skipThisMethod[r._message.method]&&(delete e.connection._outstandingMethodBlocks[i],delete e.connection._methodInvokers[i],n=!0)}n&&t.onFlushInMemoryMethods()}},e._getMethodUpdates=function(n){var i=[];if(n&&n.length>0){var r=e._getMethodsList();r.length&&a.stringify(r[0])!==a.stringify(n[0])&&(e._flushInMemoryMethods(),r=[]);
for(var o=0;o<n.length;o++)if(o<r.length){if(a.stringify(r[o])!==a.stringify(n[o]))throw new Error("The method database is corrupted or out of sync at position: "+o)}else i.push(n[o]),t.onMethodCall(n[o])}else e._flushInMemoryMethods();return i},e._loadMethods=function(){var n=e._loadObject("methods");if(n=e._getMethodUpdates(n))for(;n.length>0;){var i=n.shift(),r=i.method.split("/"),o=r[1],a=r[2];if(o&&a&&e._groundDatabases[o]){var s=e.idParse(i.args&&i.args[0]?i.args[0]._id||i.args[0]:""),l=e._groundDatabases[o]._collection.findOne(s);l&&"insert"===a&&(e._groundDatabases[o]._collection.remove(s),delete e._groundDatabases[o]._localOnly[s])}e.connection.apply(i.method,i.args,i.options)}e._methodsResumed=!0,t.onResumeMethods()},e._saveMethods=function(){e._methodsResumed&&(t.onCacheMethods(),e._saveObject("methods",e._getMethodsList()))},n.setInterval(function(){var t=!0;for(var i in n.connection._subscriptions){var r=n.connection._subscriptions[i];if(!r.ready){t=!1;break}}t!==e.subscriptionsReady&&(e.subscriptionsReady=t,e.subscriptionsReadyDeps.changed())},5e3),n.startup(function(){n.setTimeout(function(){e._loadMethods()},500)});var l=new e.OneTimeout;e._syncDatabase=function(n){l.oneTimeout(function(){var r=e._groundDatabases[n];if(r){t.onTabSync("database",n);var o=e._loadObject("db."+n);r.find().forEach(function(t){r._collection.remove(t._id),"undefined"!=typeof o[t._id]&&(r._collection.insert(o[t._id]),delete o[t._id])}),i.each(o,function(t){r._collection.insert(t)})}},150)};var u=new e.OneTimeout;e._syncMethods=function(){e._isReloading=!0,u.oneTimeout(function(){t.onTabSync("methods"),e._loadMethods(),e._isReloading=!1},500)},i.extend(e.connection,{_gdbSuper:{apply:e.connection.apply,_outstandingMethodFinished:e.connection._outstandingMethodFinished},apply:function(){var t=this;t._gdbSuper.apply.apply(t,arguments),e._saveMethods()},_outstandingMethodFinished:function(){var t=this;t._gdbSuper._outstandingMethodFinished.apply(t),e._saveMethods()}}),"undefined"!=typeof window.addEventListener&&window.addEventListener("storage",function(t){var n=new RegExp("^"+e._prefix+"db.");t.key===e._prefix+"methods"&&e._syncMethods("mehods"),n.test(t.key)&&e._syncDatabase(t.key.replace(n,""))},!1)}).call(this),"undefined"==typeof Package&&(Package={}),Package.grounddb={GroundDB:t,_gDB:e}}(),function(){{var t,e,n=(Package.meteor.Meteor,Package.templating.Template,Package.spacebars.Spacebars,Package.session.Session),i=Package.jquery.$,r=Package.jquery.jQuery,o=Package.ui.UI;Package.ui.Handlebars,Package.htmljs.HTML,Package.blaze.Blaze}(function(){o.registerHelper("Session",function(){return n}),o.registerHelper("timer",function(t){return moment.utc(moment.duration(t,"seconds").asMilliseconds()).format("HH:mm:ss")})}).call(this),function(){(function(){var e=this,n=n||{};n.WEBGL_RENDERER=0,n.CANVAS_RENDERER=1,n.VERSION="v1.5.2",n.blendModes={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},n.scaleModes={DEFAULT:0,LINEAR:0,NEAREST:1},n.INTERACTION_FREQUENCY=30,n.AUTO_PREVENT_DEFAULT=!0,n.RAD_TO_DEG=180/Math.PI,n.DEG_TO_RAD=Math.PI/180,n.Point=function(t,e){this.x=t||0,this.y=e||0},n.Point.prototype.clone=function(){return new n.Point(this.x,this.y)},n.Point.prototype.constructor=n.Point,n.Point.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n.Rectangle=function(t,e,n,i){this.x=t||0,this.y=e||0,this.width=n||0,this.height=i||0},n.Rectangle.prototype.clone=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Rectangle.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=this.x;if(t>=n&&t<=n+this.width){var i=this.y;if(e>=i&&e<=i+this.height)return!0}return!1},n.Rectangle.prototype.constructor=n.Rectangle,n.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Polygon=function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,r=t.length;r>i;i+=2)e.push(new n.Point(t[i],t[i+1]));t=e}this.points=t},n.Polygon.prototype.clone=function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new n.Polygon(t)},n.Polygon.prototype.contains=function(t,e){for(var n=!1,i=0,r=this.points.length-1;i<this.points.length;r=i++){var o=this.points[i].x,a=this.points[i].y,s=this.points[r].x,l=this.points[r].y,u=a>e!=l>e&&(s-o)*(e-a)/(l-a)+o>t;u&&(n=!n)}return n},n.Polygon.prototype.constructor=n.Polygon,n.Circle=function(t,e,n){this.x=t||0,this.y=e||0,this.radius=n||0},n.Circle.prototype.clone=function(){return new n.Circle(this.x,this.y,this.radius)},n.Circle.prototype.contains=function(t,e){if(this.radius<=0)return!1;var n=this.x-t,i=this.y-e,r=this.radius*this.radius;return n*=n,i*=i,r>=n+i},n.Circle.prototype.constructor=n.Circle,n.Ellipse=function(t,e,n,i){this.x=t||0,this.y=e||0,this.width=n||0,this.height=i||0},n.Ellipse.prototype.clone=function(){return new n.Ellipse(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var n=(t-this.x)/this.width,i=(e-this.y)/this.height;return n*=n,i*=i,1>=n+i},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},n.Ellipse.prototype.constructor=n.Ellipse,n.determineMatrixArrayType=function(){return"undefined"!=typeof Float32Array?Float32Array:Array},n.Matrix2=n.determineMatrixArrayType(),n.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0},n.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},n.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(this.array[0]=this.a,this.array[1]=this.c,this.array[2]=0,this.array[3]=this.b,this.array[4]=this.d,this.array[5]=0,this.array[6]=this.tx,this.array[7]=this.ty,this.array[8]=1):(this.array[0]=this.a,this.array[1]=this.b,this.array[2]=this.tx,this.array[3]=this.c,this.array[4]=this.d,this.array[5]=this.ty,this.array[6]=0,this.array[7]=0,this.array[8]=1),e},n.identityMatrix=new n.Matrix,n.DisplayObject=function(){this.position=new n.Point,this.scale=new n.Point(1,1),this.pivot=new n.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.buttonMode=!1,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this._interactive=!1,this.defaultCursor="pointer",this.worldTransform=new n.Matrix,this.color=[],this.dynamic=!0,this._sr=0,this._cr=1,this.filterArea=null,this._bounds=new n.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1},n.DisplayObject.prototype.constructor=n.DisplayObject,n.DisplayObject.prototype.setInteractive=function(t){this.interactive=t},Object.defineProperty(n.DisplayObject.prototype,"interactive",{get:function(){return this._interactive},set:function(t){this._interactive=t,this.stage&&(this.stage.dirty=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(n.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(n.DisplayObject.prototype,"filters",{get:function(){return this._filters},set:function(t){if(t){for(var e=[],n=0;n<t.length;n++)for(var i=t[n].passes,r=0;r<i.length;r++)e.push(i[r]);this._filterBlock={target:this,filterPasses:e}}this._filters=t}}),Object.defineProperty(n.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),n.DisplayObject.prototype.updateTransform=function(){this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation));var t=this.parent.worldTransform,e=this.worldTransform,n=this.pivot.x,i=this.pivot.y,r=this._cr*this.scale.x,o=-this._sr*this.scale.y,a=this._sr*this.scale.x,s=this._cr*this.scale.y,l=this.position.x-r*n-i*o,u=this.position.y-s*i-n*a,h=t.a,c=t.b,d=t.c,p=t.d;e.a=h*r+c*a,e.b=h*o+c*s,e.tx=h*l+c*u+t.tx,e.c=d*r+p*a,e.d=d*o+p*s,e.ty=d*l+p*u+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha},n.DisplayObject.prototype.getBounds=function(t){return t=t,n.EmptyRectangle},n.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(n.identityMatrix)},n.DisplayObject.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0)},n.DisplayObject.prototype.generateTexture=function(t){var e=this.getLocalBounds(),i=new n.RenderTexture(0|e.width,0|e.height,t);return i.render(this,new n.Point(-e.x,-e.y)),i},n.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},n.DisplayObject.prototype._renderCachedSprite=function(t){t.gl?n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t):n.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},n.DisplayObject.prototype._generateCachedSprite=function(){this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new n.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new n.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}var i=this._filters;this._filters=null,this._cachedSprite.filters=i,this._cachedSprite.texture.render(this,new n.Point(-t.x,-t.y)),this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._filters=i,this._cacheAsBitmap=!0},n.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},n.DisplayObject.prototype._renderWebGL=function(t){t=t},n.DisplayObject.prototype._renderCanvas=function(t){t=t},Object.defineProperty(n.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.DisplayObjectContainer=function(){n.DisplayObject.call(this),this.children=[]},n.DisplayObjectContainer.prototype=Object.create(n.DisplayObject.prototype),n.DisplayObjectContainer.prototype.constructor=n.DisplayObjectContainer,n.DisplayObjectContainer.prototype.addChild=function(t){this.addChildAt(t,this.children.length)},n.DisplayObjectContainer.prototype.addChildAt=function(t,e){if(!(e>=0&&e<=this.children.length))throw new Error(t+" The index "+e+" supplied is out of bounds "+this.children.length);t.parent&&t.parent.removeChild(t),t.parent=this,this.children.splice(e,0,t),this.stage&&t.setStageReference(this.stage)},n.DisplayObjectContainer.prototype.swapChildren=function(t,e){if(t!==e){var n=this.children.indexOf(t),i=this.children.indexOf(e);if(0>n||0>i)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[n]=e,this.children[i]=t}},n.DisplayObjectContainer.prototype.getChildAt=function(t){if(t>=0&&t<this.children.length)return this.children[t];throw new Error("Supplied index does not exist in the child list, or the supplied DisplayObject must be a child of the caller")},n.DisplayObjectContainer.prototype.removeChild=function(t){return this.removeChildAt(this.children.indexOf(t))},n.DisplayObjectContainer.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return this.stage&&e.removeStageReference(),e.parent=void 0,this.children.splice(t,1),e},n.DisplayObjectContainer.prototype.removeChildren=function(t,e){var n=t||0,i="number"==typeof e?e:this.children.length,r=i-n;if(r>0&&i>=r){for(var o=this.children.splice(n,r),a=0;a<o.length;a++){var s=o[a];this.stage&&s.removeStageReference(),s.parent=void 0}return o}throw new Error("Range Error, numeric values are outside the acceptable range")},n.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(n.DisplayObject.prototype.updateTransform.call(this),!this._cacheAsBitmap))for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform()},n.DisplayObjectContainer.prototype.getBounds=function(t){if(0===this.children.length)return n.EmptyRectangle;if(t){var e=this.worldTransform;this.worldTransform=t,this.updateTransform(),this.worldTransform=e}for(var i,r,o,a=1/0,s=1/0,l=-1/0,u=-1/0,h=!1,c=0,d=this.children.length;d>c;c++){var p=this.children[c];p.visible&&(h=!0,i=this.children[c].getBounds(t),a=a<i.x?a:i.x,s=s<i.y?s:i.y,r=i.width+i.x,o=i.height+i.y,l=l>r?l:r,u=u>o?u:o)}if(!h)return n.EmptyRectangle;var f=this._bounds;return f.x=a,f.y=s,f.width=l-a,f.height=u-s,f},n.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=n.identityMatrix;for(var e=0,i=this.children.length;i>e;e++)this.children[e].updateTransform();var r=this.getBounds();return this.worldTransform=t,r},n.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t,this._interactive&&(this.stage.dirty=!0);for(var e=0,n=this.children.length;n>e;e++){var i=this.children[e];i.setStageReference(t)}},n.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0,e=this.children.length;e>t;t++){var n=this.children[t];n.removeStageReference()}this._interactive&&(this.stage.dirty=!0),this.stage=null},n.DisplayObjectContainer.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);var e,n;if(this._mask||this._filters){for(this._mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this._filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.spriteBatch.start()}else for(e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.DisplayObjectContainer.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){if(this._cacheAsBitmap)return void this._renderCachedSprite(t);this._mask&&t.maskManager.pushMask(this._mask,t.context);for(var e=0,n=this.children.length;n>e;e++){var i=this.children[e];i._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},n.Sprite=function(t){n.DisplayObjectContainer.call(this),this.anchor=new n.Point,this.texture=t,this._width=0,this._height=0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL,t.baseTexture.hasLoaded?this.onTextureUpdate():(this.onTextureUpdateBind=this.onTextureUpdate.bind(this),this.texture.addEventListener("update",this.onTextureUpdateBind)),this.renderable=!0},n.Sprite.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Sprite.prototype.constructor=n.Sprite,Object.defineProperty(n.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(n.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),n.Sprite.prototype.setTexture=function(t){this.texture.baseTexture!==t.baseTexture?(this.textureChange=!0,this.texture=t):this.texture=t,this.cachedTint=16777215,this.updateFrame=!0},n.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height),this.updateFrame=!0},n.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width,n=this.texture.frame.height,i=e*(1-this.anchor.x),r=e*-this.anchor.x,o=n*(1-this.anchor.y),a=n*-this.anchor.y,s=t||this.worldTransform,l=s.a,u=s.c,h=s.b,c=s.d,d=s.tx,p=s.ty,f=l*r+h*a+d,m=c*a+u*r+p,g=l*i+h*a+d,y=c*a+u*i+p,_=l*i+h*o+d,v=c*o+u*i+p,b=l*r+h*o+d,w=c*o+u*r+p,x=-1/0,T=-1/0,M=1/0,k=1/0;M=M>f?f:M,M=M>g?g:M,M=M>_?_:M,M=M>b?b:M,k=k>m?m:k,k=k>y?y:k,k=k>v?v:k,k=k>w?w:k,x=f>x?f:x,x=g>x?g:x,x=_>x?_:x,x=b>x?b:x,T=m>T?m:T,T=y>T?y:T,T=v>T?v:T,T=w>T?w:T;var S=this._bounds;return S.x=M,S.width=x-M,S.y=k,S.height=T-k,this._currentBounds=S,S},n.Sprite.prototype._renderWebGL=function(t){if(this.visible&&!(this.alpha<=0)){var e,n;if(this._mask||this._filters){var i=t.spriteBatch;for(this._mask&&(i.stop(),t.maskManager.pushMask(this.mask,t),i.start()),this._filters&&(i.flush(),t.filterManager.pushFilter(this._filterBlock)),i.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t);i.stop(),this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),i.start()}else for(t.spriteBatch.render(this),e=0,n=this.children.length;n>e;e++)this.children[e]._renderWebGL(t)}},n.Sprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=this.texture.frame,i=t.context,r=this.texture;if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),this._mask&&t.maskManager.pushMask(this._mask,t.context),e&&e.width&&e.height&&r.baseTexture.source){i.globalAlpha=this.worldAlpha;var o=this.worldTransform;if(t.roundPixels?i.setTransform(o.a,o.c,o.b,o.d,0|o.tx,0|o.ty):i.setTransform(o.a,o.c,o.b,o.d,o.tx,o.ty),t.smoothProperty&&t.scaleMode!==this.texture.baseTexture.scaleMode&&(t.scaleMode=this.texture.baseTexture.scaleMode,i[t.smoothProperty]=t.scaleMode===n.scaleModes.LINEAR),16777215!==this.tint){if(this.cachedTint!==this.tint){if(!r.baseTexture.hasLoaded)return;this.cachedTint=this.tint,this.tintedTexture=n.CanvasTinter.getTintedTexture(this,this.tint)}i.drawImage(this.tintedTexture,0,0,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}else if(r.trim){var a=r.trim;i.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,a.x-this.anchor.x*a.width,a.y-this.anchor.y*a.height,e.width,e.height)}else i.drawImage(this.texture.baseTexture.source,e.x,e.y,e.width,e.height,this.anchor.x*-e.width,this.anchor.y*-e.height,e.width,e.height)}for(var s=0,l=this.children.length;l>s;s++){var u=this.children[s];u._renderCanvas(t)}this._mask&&t.maskManager.popMask(t.context)}},n.Sprite.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache'+this);return new n.Sprite(e)},n.Sprite.fromImage=function(t,e,i){var r=n.Texture.fromImage(t,e,i);return new n.Sprite(r)},n.SpriteBatch=function(t){n.DisplayObjectContainer.call(this),this.textureThing=t,this.ready=!1},n.SpriteBatch.prototype=Object.create(n.DisplayObjectContainer.prototype),n.SpriteBatch.constructor=n.SpriteBatch,n.SpriteBatch.prototype.initWebGL=function(t){this.fastSpriteBatch=new n.WebGLFastSpriteBatch(t),this.ready=!0},n.SpriteBatch.prototype.updateTransform=function(){n.DisplayObject.prototype.updateTransform.call(this)},n.SpriteBatch.prototype._renderWebGL=function(t){!this.visible||this.alpha<=0||!this.children.length||(this.ready||this.initWebGL(t.gl),t.spriteBatch.stop(),t.shaderManager.activateShader(t.shaderManager.fastShader),this.fastSpriteBatch.begin(this,t),this.fastSpriteBatch.render(this),t.shaderManager.activateShader(t.shaderManager.defaultShader),t.spriteBatch.start())},n.SpriteBatch.prototype._renderCanvas=function(t){var e=t.context;e.globalAlpha=this.worldAlpha,n.DisplayObject.prototype.updateTransform.call(this);for(var i=this.worldTransform,r=!0,o=0;o<this.children.length;o++){var a=this.children[o];if(a.visible){var s=a.texture,l=s.frame;if(e.globalAlpha=this.worldAlpha*a.alpha,a.rotation%(2*Math.PI)===0)r&&(e.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty),r=!1),e.drawImage(s.baseTexture.source,l.x,l.y,l.width,l.height,a.anchor.x*-l.width*a.scale.x+a.position.x+.5|0,a.anchor.y*-l.height*a.scale.y+a.position.y+.5|0,l.width*a.scale.x,l.height*a.scale.y);else{r||(r=!0),n.DisplayObject.prototype.updateTransform.call(a);var u=a.worldTransform;t.roundPixels?e.setTransform(u.a,u.c,u.b,u.d,0|u.tx,0|u.ty):e.setTransform(u.a,u.c,u.b,u.d,u.tx,u.ty),e.drawImage(s.baseTexture.source,l.x,l.y,l.width,l.height,a.anchor.x*-l.width+.5|0,a.anchor.y*-l.height+.5|0,l.width,l.height)}}}},n.AbstractFilter=function(t,e){this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms=e||{},this.fragmentSrc=t||[]},n.FilterBlock=function(){this.visible=!0,this.renderable=!0},n.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),n.Sprite.call(this,n.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},n.Text.prototype=Object.create(n.Sprite.prototype),n.Text.prototype.constructor=n.Text,n.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},n.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},n.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),n=[],i=0,r=0;r<e.length;r++){var o=this.context.measureText(e[r]).width;n[r]=o,i=Math.max(i,o)}var a=i+this.style.strokeThickness;this.style.dropShadow&&(a+=this.style.dropShadowDistance),this.canvas.width=a+this.context.lineWidth;var s=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness,l=s*e.length;this.style.dropShadow&&(l+=this.style.dropShadowDistance),this.canvas.height=l,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="top";var u,h;if(this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var c=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,d=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(r=0;r<e.length;r++)u=this.style.strokeThickness/2,h=this.style.strokeThickness/2+r*s,"right"===this.style.align?u+=i-n[r]:"center"===this.style.align&&(u+=(i-n[r])/2),this.style.fill&&this.context.fillText(e[r],u+c,h+d)}for(this.context.fillStyle=this.style.fill,r=0;r<e.length;r++)u=this.style.strokeThickness/2,h=this.style.strokeThickness/2+r*s,"right"===this.style.align?u+=i-n[r]:"center"===this.style.align&&(u+=(i-n[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[r],u,h),this.style.fill&&this.context.fillText(e[r],u,h);this.updateTexture()},n.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.frame.width=this.canvas.width,this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height,this.requiresUpdate=!0},n.Text.prototype._renderWebGL=function(t){this.requiresUpdate&&(this.requiresUpdate=!1,n.updateWebGLTexture(this.texture.baseTexture,t.gl)),n.Sprite.prototype._renderWebGL.call(this,t)},n.Text.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.Sprite.prototype.updateTransform.call(this)},n.Text.prototype.determineFontHeight=function(t){var e=n.Text.heightCache[t];if(!e){var i=document.getElementsByTagName("body")[0],r=document.createElement("div"),o=document.createTextNode("M");r.appendChild(o),r.setAttribute("style",t+";position:absolute;top:0;left:0"),i.appendChild(r),e=r.offsetHeight,n.Text.heightCache[t]=e,i.removeChild(r)}return e},n.Text.prototype.wordWrap=function(t){for(var e="",n=t.split("\n"),i=0;i<n.length;i++){for(var r=this.style.wordWrapWidth,o=n[i].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,l=s+this.context.measureText(" ").width;0===a||l>r?(a>0&&(e+="\n"),e+=o[a],r=this.style.wordWrapWidth-s):(r-=l,e+=" "+o[a])}i<n.length-1&&(e+="\n")}return e},n.Text.prototype.destroy=function(t){t&&this.texture.destroy()},n.Text.heightCache={},n.BitmapText=function(t,e){n.DisplayObjectContainer.call(this),this._pool=[],this.setText(t),this.setStyle(e),this.updateText(),this.dirty=!1},n.BitmapText.prototype=Object.create(n.DisplayObjectContainer.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setText=function(t){this.text=t||" ",this.dirty=!0},n.BitmapText.prototype.setStyle=function(t){t=t||{},t.align=t.align||"left",this.style=t;var e=t.font.split(" ");this.fontName=e[e.length-1],this.fontSize=e.length>=2?parseInt(e[e.length-2],10):n.BitmapText.fonts[this.fontName].size,this.dirty=!0,this.tint=t.tint},n.BitmapText.prototype.updateText=function(){for(var t=n.BitmapText.fonts[this.fontName],e=new n.Point,i=null,r=[],o=0,a=[],s=0,l=this.fontSize/t.size,u=0;u<this.text.length;u++){var h=this.text.charCodeAt(u);if(/(?:\r\n|\r|\n)/.test(this.text.charAt(u)))a.push(e.x),o=Math.max(o,e.x),s++,e.x=0,e.y+=t.lineHeight,i=null;else{var c=t.chars[h];c&&(i&&c[i]&&(e.x+=c.kerning[i]),r.push({texture:c.texture,line:s,charCode:h,position:new n.Point(e.x+c.xOffset,e.y+c.yOffset)}),e.x+=c.xAdvance,i=h)}}a.push(e.x),o=Math.max(o,e.x);var d=[];for(u=0;s>=u;u++){var p=0;"right"===this.style.align?p=o-a[u]:"center"===this.style.align&&(p=(o-a[u])/2),d.push(p)}var f=this.children.length,m=r.length,g=this.tint||16777215;for(u=0;m>u;u++){var y=f>u?this.children[u]:this._pool.pop();y?y.setTexture(r[u].texture):y=new n.Sprite(r[u].texture),y.position.x=(r[u].position.x+d[r[u].line])*l,y.position.y=r[u].position.y*l,y.scale.x=y.scale.y=l,y.tint=g,y.parent||this.addChild(y)}for(;this.children.length>m;){var _=this.getChildAt(this.children.length-1);this._pool.push(_),this.removeChild(_)}this.textWidth=o*l,this.textHeight=(e.y+t.lineHeight)*l},n.BitmapText.prototype.updateTransform=function(){this.dirty&&(this.updateText(),this.dirty=!1),n.DisplayObjectContainer.prototype.updateTransform.call(this)},n.BitmapText.fonts={},n.Stage=function(t){n.DisplayObjectContainer.call(this),this.worldTransform=new n.Matrix,this.interactive=!0,this.interactionManager=new n.InteractionManager(this),this.dirty=!0,this.stage=this,this.stage.hitArea=new n.Rectangle(0,0,1e5,1e5),this.setBackgroundColor(t)},n.Stage.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.setInteractionDelegate=function(t){this.interactionManager.setTargetDomElement(t)},n.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0,e=this.children.length;e>t;t++)this.children[t].updateTransform();this.dirty&&(this.dirty=!1,this.interactionManager.dirty=!0),this.interactive&&this.interactionManager.update()},n.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=n.hex2rgb(this.backgroundColor);var e=this.backgroundColor.toString(16);e="000000".substr(0,6-e.length)+e,this.backgroundColorString="#"+e},n.Stage.prototype.getMousePosition=function(){return this.interactionManager.mouse.global};for(var i=0,r=["ms","moz","webkit","o"],o=0;o<r.length&&!window.requestAnimationFrame;++o)window.requestAnimationFrame=window[r[o]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[r[o]+"CancelAnimationFrame"]||window[r[o]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-i)),r=window.setTimeout(function(){t(e+n)},n);return i=e+n,r}),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(t){clearTimeout(t)}),window.requestAnimFrame=window.requestAnimationFrame,n.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},n.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function n(){var o=r.concat(t.call(arguments));i.apply(this instanceof n?this:e,o)}var i=this,r=t.call(arguments,1);if("function"!=typeof i)throw new TypeError;return n.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(i.prototype),n}}()),n.AjaxRequest=function(){var t=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.3.0","Microsoft.XMLHTTP"];if(!window.ActiveXObject)return window.XMLHttpRequest?new window.XMLHttpRequest:!1;for(var e=0;e<t.length;e++)try{return new window.ActiveXObject(t[e])}catch(n){}},n.canUseNewCanvasBlendModes=function(){var t=document.createElement("canvas");t.width=1,t.height=1;var e=t.getContext("2d");return e.fillStyle="#000",e.fillRect(0,0,1,1),e.globalCompositeOperation="multiply",e.fillStyle="#fff",e.fillRect(0,0,1,1),0===e.getImageData(0,0,1,1).data[0]},n.getNextPowerOfTwo=function(t){if(t>0&&0===(t&t-1))return t;for(var e=1;t>e;)e<<=1;return e},n.EventTarget=function(){var t={};this.addEventListener=this.on=function(e,n){void 0===t[e]&&(t[e]=[]),-1===t[e].indexOf(n)&&t[e].push(n)},this.dispatchEvent=this.emit=function(e){if(t[e.type]&&t[e.type].length)for(var n=0,i=t[e.type].length;i>n;n++)t[e.type][n](e)},this.removeEventListener=this.off=function(e,n){var i=t[e].indexOf(n);-1!==i&&t[e].splice(i,1)},this.removeAllEventListeners=function(e){var n=t[e];n&&(n.length=0)}},n.PolyK={},n.PolyK.Triangulate=function(t){var e=!0,i=t.length>>1;if(3>i)return[];for(var r=[],o=[],a=0;i>a;a++)o.push(a);a=0;for(var s=i;s>3;){var l=o[(a+0)%s],u=o[(a+1)%s],h=o[(a+2)%s],c=t[2*l],d=t[2*l+1],p=t[2*u],f=t[2*u+1],m=t[2*h],g=t[2*h+1],y=!1;if(n.PolyK._convex(c,d,p,f,m,g,e)){y=!0;for(var _=0;s>_;_++){var v=o[_];if(v!==l&&v!==u&&v!==h&&n.PolyK._PointInTriangle(t[2*v],t[2*v+1],c,d,p,f,m,g)){y=!1;break}}}if(y)r.push(l,u,h),o.splice((a+1)%s,1),s--,a=0;else if(a++>3*s){if(!e)return window.console.log("PIXI Warning: shape too complex to fill"),[];for(r=[],o=[],a=0;i>a;a++)o.push(a);a=0,s=i,e=!1}}return r.push(o[0],o[1],o[2]),r},n.PolyK._PointInTriangle=function(t,e,n,i,r,o,a,s){var l=a-n,u=s-i,h=r-n,c=o-i,d=t-n,p=e-i,f=l*l+u*u,m=l*h+u*c,g=l*d+u*p,y=h*h+c*c,_=h*d+c*p,v=1/(f*y-m*m),b=(y*g-m*_)*v,w=(f*_-m*g)*v;return b>=0&&w>=0&&1>b+w},n.PolyK._convex=function(t,e,n,i,r,o,a){return(e-i)*(r-n)+(n-t)*(o-i)>=0===a},n.initDefaultShaders=function(){},n.CompileVertexShader=function(t,e){return n._CompileShader(t,e,t.VERTEX_SHADER)},n.CompileFragmentShader=function(t,e){return n._CompileShader(t,e,t.FRAGMENT_SHADER)},n._CompileShader=function(t,e,n){var i=e.join("\n"),r=t.createShader(n);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:(window.console.log(t.getShaderInfoLog(r)),null)},n.compileProgram=function(t,e,i){var r=n.CompileFragmentShader(t,i),o=n.CompileVertexShader(t,e),a=t.createProgram();return t.attachShader(a,o),t.attachShader(a,r),t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||window.console.log("Could not initialise shaders"),a},n.PixiShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.textureCount=0,this.attributes=[],this.init()},n.PixiShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc||n.PixiShader.defaultVertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aTextureCoord,this.colorAttribute];
for(var i in this.uniforms)this.uniforms[i].uniformLocation=t.getUniformLocation(e,i);this.initUniforms(),this.program=e},n.PixiShader.prototype.initUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var n in this.uniforms){t=this.uniforms[n];var i=t.type;"sampler2D"===i?(t._init=!1,null!==t.value&&this.initSampler2D(t)):"mat2"===i||"mat3"===i||"mat4"===i?(t.glMatrix=!0,t.glValueLength=1,"mat2"===i?t.glFunc=e.uniformMatrix2fv:"mat3"===i?t.glFunc=e.uniformMatrix3fv:"mat4"===i&&(t.glFunc=e.uniformMatrix4fv)):(t.glFunc=e["uniform"+i],t.glValueLength="2f"===i||"2i"===i?2:"3f"===i||"3i"===i?3:"4f"===i||"4i"===i?4:1)}},n.PixiShader.prototype.initSampler2D=function(t){if(t.value&&t.value.baseTexture&&t.value.baseTexture.hasLoaded){var e=this.gl;if(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]),t.textureData){var n=t.textureData,i=n.magFilter?n.magFilter:e.LINEAR,r=n.minFilter?n.minFilter:e.LINEAR,o=n.wrapS?n.wrapS:e.CLAMP_TO_EDGE,a=n.wrapT?n.wrapT:e.CLAMP_TO_EDGE,s=n.luminance?e.LUMINANCE:e.RGBA;if(n.repeat&&(o=e.REPEAT,a=e.REPEAT),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!!n.flipY),n.width){var l=n.width?n.width:512,u=n.height?n.height:2,h=n.border?n.border:0;e.texImage2D(e.TEXTURE_2D,0,s,l,u,h,s,e.UNSIGNED_BYTE,null)}else e.texImage2D(e.TEXTURE_2D,0,s,e.RGBA,e.UNSIGNED_BYTE,t.value.baseTexture.source);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,o),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,a)}e.uniform1i(t.uniformLocation,this.textureCount),t._init=!0,this.textureCount++}},n.PixiShader.prototype.syncUniforms=function(){this.textureCount=1;var t,e=this.gl;for(var i in this.uniforms)t=this.uniforms[i],1===t.glValueLength?t.glMatrix===!0?t.glFunc.call(e,t.uniformLocation,t.transpose,t.value):t.glFunc.call(e,t.uniformLocation,t.value):2===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y):3===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z):4===t.glValueLength?t.glFunc.call(e,t.uniformLocation,t.value.x,t.value.y,t.value.z,t.value.w):"sampler2D"===t.type&&(t._init?(e.activeTexture(e["TEXTURE"+this.textureCount]),e.bindTexture(e.TEXTURE_2D,t.value.baseTexture._glTextures[e.id]||n.createWebGLTexture(t.value.baseTexture,e)),e.uniform1i(t.uniformLocation,this.textureCount),this.textureCount++):this.initSampler2D(t))},n.PixiShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.PixiShader.defaultVertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec2 aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","varying vec2 vTextureCoord;","varying vec4 vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   gl_Position = vec4( ((aVertexPosition + offsetVector) / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vec3 color = mod(vec3(aColor.y/65536.0, aColor.y/256.0, aColor.y), 256.0) / 256.0;","   vColor = vec4(color * aColor.x, aColor.x);","}"],n.PixiFastShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision lowp float;","varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vTextureCoord) * vColor ;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform mat3 uMatrix;","varying vec2 vTextureCoord;","varying float vColor;","const vec2 center = vec2(-1.0, 1.0);","void main(void) {","   vec2 v;","   vec2 sv = aVertexPosition * aScale;","   v.x = (sv.x) * cos(aRotation) - (sv.y) * sin(aRotation);","   v.y = (sv.x) * sin(aRotation) + (sv.y) * cos(aRotation);","   v = ( uMatrix * vec3(v + aPositionCoord , 1.0) ).xy ;","   gl_Position = vec4( ( v / projectionVector) + center , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"],this.textureCount=0,this.init()},n.PixiFastShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.dimensions=t.getUniformLocation(e,"dimensions"),this.uMatrix=t.getUniformLocation(e,"uMatrix"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aPositionCoord=t.getAttribLocation(e,"aPositionCoord"),this.aScale=t.getAttribLocation(e,"aScale"),this.aRotation=t.getAttribLocation(e,"aRotation"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.colorAttribute=t.getAttribLocation(e,"aColor"),-1===this.colorAttribute&&(this.colorAttribute=2),this.attributes=[this.aVertexPosition,this.aPositionCoord,this.aScale,this.aRotation,this.aTextureCoord,this.colorAttribute],this.program=e},n.PixiFastShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attributes=null},n.StripShader=function(){this.program=null,this.fragmentSrc=["precision mediump float;","varying vec2 vTextureCoord;","varying float vColor;","uniform float alpha;","uniform sampler2D uSampler;","void main(void) {","   gl_FragColor = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y));","   gl_FragColor = gl_FragColor * alpha;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","varying vec2 vTextureCoord;","uniform vec2 offsetVector;","varying float vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition, 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / projectionVector.y + 1.0 , 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"]},n.StripShader.prototype.init=function(){var t=n.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.uSampler=t.getUniformLocation(e,"uSampler"),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.aTextureCoord=t.getAttribLocation(e,"aTextureCoord"),this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.PrimitiveShader=function(t){this.gl=t,this.program=null,this.fragmentSrc=["precision mediump float;","varying vec4 vColor;","void main(void) {","   gl_FragColor = vColor;","}"],this.vertexSrc=["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform vec2 projectionVector;","uniform vec2 offsetVector;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void) {","   vec3 v = translationMatrix * vec3(aVertexPosition , 1.0);","   v -= offsetVector.xyx;","   gl_Position = vec4( v.x / projectionVector.x -1.0, v.y / -projectionVector.y + 1.0 , 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"],this.init()},n.PrimitiveShader.prototype.init=function(){var t=this.gl,e=n.compileProgram(t,this.vertexSrc,this.fragmentSrc);t.useProgram(e),this.projectionVector=t.getUniformLocation(e,"projectionVector"),this.offsetVector=t.getUniformLocation(e,"offsetVector"),this.tintColor=t.getUniformLocation(e,"tint"),this.aVertexPosition=t.getAttribLocation(e,"aVertexPosition"),this.colorAttribute=t.getAttribLocation(e,"aColor"),this.attributes=[this.aVertexPosition,this.colorAttribute],this.translationMatrix=t.getUniformLocation(e,"translationMatrix"),this.alpha=t.getUniformLocation(e,"alpha"),this.program=e},n.PrimitiveShader.prototype.destroy=function(){this.gl.deleteProgram(this.program),this.uniforms=null,this.gl=null,this.attribute=null},n.WebGLGraphics=function(){},n.WebGLGraphics.renderGraphics=function(t,e){var i=e.gl,r=e.projection,o=e.offset,a=e.shaderManager.primitiveShader;t._webGL[i.id]||(t._webGL[i.id]={points:[],indices:[],lastIndex:0,buffer:i.createBuffer(),indexBuffer:i.createBuffer()});var s=t._webGL[i.id];t.dirty&&(t.dirty=!1,t.clearDirty&&(t.clearDirty=!1,s.lastIndex=0,s.points=[],s.indices=[]),n.WebGLGraphics.updateGraphics(t,i)),e.shaderManager.activatePrimitiveShader(),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA),i.uniformMatrix3fv(a.translationMatrix,!1,t.worldTransform.toArray(!0)),i.uniform2f(a.projectionVector,r.x,-r.y),i.uniform2f(a.offsetVector,-o.x,-o.y),i.uniform3fv(a.tintColor,n.hex2rgb(t.tint)),i.uniform1f(a.alpha,t.worldAlpha),i.bindBuffer(i.ARRAY_BUFFER,s.buffer),i.vertexAttribPointer(a.aVertexPosition,2,i.FLOAT,!1,24,0),i.vertexAttribPointer(a.colorAttribute,4,i.FLOAT,!1,24,8),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,s.indexBuffer),i.drawElements(i.TRIANGLE_STRIP,s.indices.length,i.UNSIGNED_SHORT,0),e.shaderManager.deactivatePrimitiveShader()},n.WebGLGraphics.updateGraphics=function(t,e){for(var i=t._webGL[e.id],r=i.lastIndex;r<t.graphicsData.length;r++){var o=t.graphicsData[r];o.type===n.Graphics.POLY?(o.fill&&o.points.length>3&&n.WebGLGraphics.buildPoly(o,i),o.lineWidth>0&&n.WebGLGraphics.buildLine(o,i)):o.type===n.Graphics.RECT?n.WebGLGraphics.buildRectangle(o,i):(o.type===n.Graphics.CIRC||o.type===n.Graphics.ELIP)&&n.WebGLGraphics.buildCircle(o,i)}i.lastIndex=t.graphicsData.length,i.glPoints=new Float32Array(i.points),e.bindBuffer(e.ARRAY_BUFFER,i.buffer),e.bufferData(e.ARRAY_BUFFER,i.glPoints,e.STATIC_DRAW),i.glIndicies=new Uint16Array(i.indices),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,i.indexBuffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,i.glIndicies,e.STATIC_DRAW)},n.WebGLGraphics.buildRectangle=function(t,e){var i=t.points,r=i[0],o=i[1],a=i[2],s=i[3];if(t.fill){var l=n.hex2rgb(t.fillColor),u=t.fillAlpha,h=l[0]*u,c=l[1]*u,d=l[2]*u,p=e.points,f=e.indices,m=p.length/6;p.push(r,o),p.push(h,c,d,u),p.push(r+a,o),p.push(h,c,d,u),p.push(r,o+s),p.push(h,c,d,u),p.push(r+a,o+s),p.push(h,c,d,u),f.push(m,m,m+1,m+2,m+3,m+3)}if(t.lineWidth){var g=t.points;t.points=[r,o,r+a,o,r+a,o+s,r,o+s,r,o],n.WebGLGraphics.buildLine(t,e),t.points=g}},n.WebGLGraphics.buildCircle=function(t,e){var i=t.points,r=i[0],o=i[1],a=i[2],s=i[3],l=40,u=2*Math.PI/l,h=0;if(t.fill){var c=n.hex2rgb(t.fillColor),d=t.fillAlpha,p=c[0]*d,f=c[1]*d,m=c[2]*d,g=e.points,y=e.indices,_=g.length/6;for(y.push(_),h=0;l+1>h;h++)g.push(r,o,p,f,m,d),g.push(r+Math.sin(u*h)*a,o+Math.cos(u*h)*s,p,f,m,d),y.push(_++,_++);y.push(_-1)}if(t.lineWidth){var v=t.points;for(t.points=[],h=0;l+1>h;h++)t.points.push(r+Math.sin(u*h)*a,o+Math.cos(u*h)*s);n.WebGLGraphics.buildLine(t,e),t.points=v}},n.WebGLGraphics.buildLine=function(t,e){var i=0,r=t.points;if(0!==r.length){if(t.lineWidth%2)for(i=0;i<r.length;i++)r[i]+=.5;var o=new n.Point(r[0],r[1]),a=new n.Point(r[r.length-2],r[r.length-1]);if(o.x===a.x&&o.y===a.y){r.pop(),r.pop(),a=new n.Point(r[r.length-2],r[r.length-1]);var s=a.x+.5*(o.x-a.x),l=a.y+.5*(o.y-a.y);r.unshift(s,l),r.push(s,l)}var u,h,c,d,p,f,m,g,y,_,v,b,w,x,T,M,k,S,C,L,P,D,A,E=e.points,O=e.indices,I=r.length/2,R=r.length,N=E.length/6,Y=t.lineWidth/2,F=n.hex2rgb(t.lineColor),j=t.lineAlpha,B=F[0]*j,U=F[1]*j,H=F[2]*j;for(c=r[0],d=r[1],p=r[2],f=r[3],y=-(d-f),_=c-p,A=Math.sqrt(y*y+_*_),y/=A,_/=A,y*=Y,_*=Y,E.push(c-y,d-_,B,U,H,j),E.push(c+y,d+_,B,U,H,j),i=1;I-1>i;i++)c=r[2*(i-1)],d=r[2*(i-1)+1],p=r[2*i],f=r[2*i+1],m=r[2*(i+1)],g=r[2*(i+1)+1],y=-(d-f),_=c-p,A=Math.sqrt(y*y+_*_),y/=A,_/=A,y*=Y,_*=Y,v=-(f-g),b=p-m,A=Math.sqrt(v*v+b*b),v/=A,b/=A,v*=Y,b*=Y,T=-_+d-(-_+f),M=-y+p-(-y+c),k=(-y+c)*(-_+f)-(-y+p)*(-_+d),S=-b+g-(-b+f),C=-v+p-(-v+m),L=(-v+m)*(-b+f)-(-v+p)*(-b+g),P=T*C-S*M,Math.abs(P)<.1?(P+=10.1,E.push(p-y,f-_,B,U,H,j),E.push(p+y,f+_,B,U,H,j)):(u=(M*L-C*k)/P,h=(S*k-T*L)/P,D=(u-p)*(u-p)+(h-f)+(h-f),D>19600?(w=y-v,x=_-b,A=Math.sqrt(w*w+x*x),w/=A,x/=A,w*=Y,x*=Y,E.push(p-w,f-x),E.push(B,U,H,j),E.push(p+w,f+x),E.push(B,U,H,j),E.push(p-w,f-x),E.push(B,U,H,j),R++):(E.push(u,h),E.push(B,U,H,j),E.push(p-(u-p),f-(h-f)),E.push(B,U,H,j)));for(c=r[2*(I-2)],d=r[2*(I-2)+1],p=r[2*(I-1)],f=r[2*(I-1)+1],y=-(d-f),_=c-p,A=Math.sqrt(y*y+_*_),y/=A,_/=A,y*=Y,_*=Y,E.push(p-y,f-_),E.push(B,U,H,j),E.push(p+y,f+_),E.push(B,U,H,j),O.push(N),i=0;R>i;i++)O.push(N++);O.push(N-1)}},n.WebGLGraphics.buildPoly=function(t,e){var i=t.points;if(!(i.length<6)){var r=e.points,o=e.indices,a=i.length/2,s=n.hex2rgb(t.fillColor),l=t.fillAlpha,u=s[0]*l,h=s[1]*l,c=s[2]*l,d=n.PolyK.Triangulate(i),p=r.length/6,f=0;for(f=0;f<d.length;f+=3)o.push(d[f]+p),o.push(d[f]+p),o.push(d[f+1]+p),o.push(d[f+2]+p),o.push(d[f+2]+p);for(f=0;a>f;f++)r.push(i[2*f],i[2*f+1],u,h,c,l)}},n.glContexts=[],n.WebGLRenderer=function(t,e,i,r,o){n.defaultRenderer||(n.defaultRenderer=this),this.type=n.WEBGL_RENDERER,this.transparent=!!r,this.width=t||800,this.height=e||600,this.view=i||document.createElement("canvas"),this.view.width=this.width,this.view.height=this.height,this.contextLost=this.handleContextLost.bind(this),this.contextRestoredLost=this.handleContextRestored.bind(this),this.view.addEventListener("webglcontextlost",this.contextLost,!1),this.view.addEventListener("webglcontextrestored",this.contextRestoredLost,!1),this.options={alpha:this.transparent,antialias:!!o,premultipliedAlpha:!!r,stencil:!0};try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(a){try{this.gl=this.view.getContext("webgl",this.options)}catch(s){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var l=this.gl;this.glContextId=l.id=n.WebGLRenderer.glContextId++,n.glContexts[this.glContextId]=l,n.blendModesWebGL||(n.blendModesWebGL=[],n.blendModesWebGL[n.blendModes.NORMAL]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.ADD]=[l.SRC_ALPHA,l.DST_ALPHA],n.blendModesWebGL[n.blendModes.MULTIPLY]=[l.DST_COLOR,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SCREEN]=[l.SRC_ALPHA,l.ONE],n.blendModesWebGL[n.blendModes.OVERLAY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DARKEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LIGHTEN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_DODGE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR_BURN]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HARD_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SOFT_LIGHT]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.DIFFERENCE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.EXCLUSION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.HUE]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.SATURATION]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.COLOR]=[l.ONE,l.ONE_MINUS_SRC_ALPHA],n.blendModesWebGL[n.blendModes.LUMINOSITY]=[l.ONE,l.ONE_MINUS_SRC_ALPHA]),this.projection=new n.Point,this.projection.x=this.width/2,this.projection.y=-this.height/2,this.offset=new n.Point(0,0),this.resize(this.width,this.height),this.contextLost=!1,this.shaderManager=new n.WebGLShaderManager(l),this.spriteBatch=new n.WebGLSpriteBatch(l),this.maskManager=new n.WebGLMaskManager(l),this.filterManager=new n.WebGLFilterManager(l,this.transparent),this.renderSession={},this.renderSession.gl=this.gl,this.renderSession.drawCount=0,this.renderSession.shaderManager=this.shaderManager,this.renderSession.maskManager=this.maskManager,this.renderSession.filterManager=this.filterManager,this.renderSession.spriteBatch=this.spriteBatch,this.renderSession.renderer=this,l.useProgram(this.shaderManager.defaultShader.program),l.disable(l.DEPTH_TEST),l.disable(l.CULL_FACE),l.enable(l.BLEND),l.colorMask(!0,!0,!0,this.transparent)},n.WebGLRenderer.prototype.constructor=n.WebGLRenderer,n.WebGLRenderer.prototype.render=function(t){if(!this.contextLost){this.__stage!==t&&(t.interactive&&t.interactionManager.removeEvents(),this.__stage=t),n.WebGLRenderer.updateTextures(),t.updateTransform(),t._interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)));var e=this.gl;e.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this.transparent?e.clearColor(0,0,0,0):e.clearColor(t.backgroundColorSplit[0],t.backgroundColorSplit[1],t.backgroundColorSplit[2],1),e.clear(e.COLOR_BUFFER_BIT),this.renderDisplayObject(t,this.projection),t.interactive?t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this)):t._interactiveEventsAdded&&(t._interactiveEventsAdded=!1,t.interactionManager.setTarget(this))}},n.WebGLRenderer.prototype.renderDisplayObject=function(t,e,n){this.renderSession.drawCount=0,this.renderSession.currentBlendMode=9999,this.renderSession.projection=e,this.renderSession.offset=this.offset,this.spriteBatch.begin(this.renderSession),this.filterManager.begin(this.renderSession,n),t._renderWebGL(this.renderSession),this.spriteBatch.end()},n.WebGLRenderer.updateTextures=function(){var t=0;for(t=0;t<n.Texture.frameUpdates.length;t++)n.WebGLRenderer.updateTextureFrame(n.Texture.frameUpdates[t]);for(t=0;t<n.texturesToDestroy.length;t++)n.WebGLRenderer.destroyTexture(n.texturesToDestroy[t]);n.texturesToUpdate.length=0,n.texturesToDestroy.length=0,n.Texture.frameUpdates.length=0},n.WebGLRenderer.destroyTexture=function(t){for(var e=t._glTextures.length-1;e>=0;e--){var i=t._glTextures[e],r=n.glContexts[e];r&&i&&r.deleteTexture(i)}t._glTextures.length=0},n.WebGLRenderer.updateTextureFrame=function(t){t.updateFrame=!1,t._updateWebGLuvs()},n.WebGLRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e,this.gl.viewport(0,0,this.width,this.height),this.projection.x=this.width/2,this.projection.y=-this.height/2},n.createWebGLTexture=function(t,e){return t.hasLoaded&&(t._glTextures[e.id]=e.createTexture(),e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null)),t._glTextures[e.id]},n.updateWebGLTexture=function(t,e){t._glTextures[e.id]&&(e.bindTexture(e.TEXTURE_2D,t._glTextures[e.id]),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.source),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t.scaleMode===n.scaleModes.LINEAR?e.LINEAR:e.NEAREST),t._powerOf2?(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT)):(e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE)),e.bindTexture(e.TEXTURE_2D,null))},n.WebGLRenderer.prototype.handleContextLost=function(t){t.preventDefault(),this.contextLost=!0},n.WebGLRenderer.prototype.handleContextRestored=function(){try{this.gl=this.view.getContext("experimental-webgl",this.options)}catch(t){try{this.gl=this.view.getContext("webgl",this.options)}catch(e){throw new Error(" This browser does not support webGL. Try using the canvas renderer"+this)}}var i=this.gl;i.id=n.WebGLRenderer.glContextId++,this.shaderManager.setContext(i),this.spriteBatch.setContext(i),this.maskManager.setContext(i),this.filterManager.setContext(i),this.renderSession.gl=this.gl,i.disable(i.DEPTH_TEST),i.disable(i.CULL_FACE),i.enable(i.BLEND),i.colorMask(!0,!0,!0,this.transparent),this.gl.viewport(0,0,this.width,this.height);for(var r in n.TextureCache){var o=n.TextureCache[r].baseTexture;o._glTextures=[]}this.contextLost=!1},n.WebGLRenderer.prototype.destroy=function(){this.view.removeEventListener("webglcontextlost",this.contextLost),this.view.removeEventListener("webglcontextrestored",this.contextRestoredLost),n.glContexts[this.glContextId]=null,this.projection=null,this.offset=null,this.shaderManager.destroy(),this.spriteBatch.destroy(),this.maskManager.destroy(),this.filterManager.destroy(),this.shaderManager=null,this.spriteBatch=null,this.maskManager=null,this.filterManager=null,this.gl=null,this.renderSession=null},n.WebGLRenderer.glContextId=0,n.WebGLMaskManager=function(t){this.maskStack=[],this.maskPosition=0,this.setContext(t)},n.WebGLMaskManager.prototype.setContext=function(t){this.gl=t},n.WebGLMaskManager.prototype.pushMask=function(t,e){var i=this.gl;0===this.maskStack.length&&(i.enable(i.STENCIL_TEST),i.stencilFunc(i.ALWAYS,1,1)),this.maskStack.push(t),i.colorMask(!1,!1,!1,!1),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.WebGLGraphics.renderGraphics(t,e),i.colorMask(!0,!0,!0,!0),i.stencilFunc(i.NOTEQUAL,0,this.maskStack.length),i.stencilOp(i.KEEP,i.KEEP,i.KEEP)},n.WebGLMaskManager.prototype.popMask=function(t){var e=this.gl,i=this.maskStack.pop();i&&(e.colorMask(!1,!1,!1,!1),e.stencilOp(e.KEEP,e.KEEP,e.DECR),n.WebGLGraphics.renderGraphics(i,t),e.colorMask(!0,!0,!0,!0),e.stencilFunc(e.NOTEQUAL,0,this.maskStack.length),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)),0===this.maskStack.length&&e.disable(e.STENCIL_TEST)},n.WebGLMaskManager.prototype.destroy=function(){this.maskStack=null,this.gl=null},n.WebGLShaderManager=function(t){this.maxAttibs=10,this.attribState=[],this.tempAttribState=[];for(var e=0;e<this.maxAttibs;e++)this.attribState[e]=!1;this.setContext(t)},n.WebGLShaderManager.prototype.setContext=function(t){this.gl=t,this.primitiveShader=new n.PrimitiveShader(t),this.defaultShader=new n.PixiShader(t),this.fastShader=new n.PixiFastShader(t),this.activateShader(this.defaultShader)},n.WebGLShaderManager.prototype.setAttribs=function(t){var e;for(e=0;e<this.tempAttribState.length;e++)this.tempAttribState[e]=!1;for(e=0;e<t.length;e++){var n=t[e];this.tempAttribState[n]=!0}var i=this.gl;for(e=0;e<this.attribState.length;e++)this.attribState[e]!==this.tempAttribState[e]&&(this.attribState[e]=this.tempAttribState[e],this.tempAttribState[e]?i.enableVertexAttribArray(e):i.disableVertexAttribArray(e))},n.WebGLShaderManager.prototype.activateShader=function(t){this.currentShader=t,this.gl.useProgram(t.program),this.setAttribs(t.attributes)},n.WebGLShaderManager.prototype.activatePrimitiveShader=function(){var t=this.gl;t.useProgram(this.primitiveShader.program),this.setAttribs(this.primitiveShader.attributes)},n.WebGLShaderManager.prototype.deactivatePrimitiveShader=function(){var t=this.gl;t.useProgram(this.defaultShader.program),this.setAttribs(this.defaultShader.attributes)},n.WebGLShaderManager.prototype.destroy=function(){this.attribState=null,this.tempAttribState=null,this.primitiveShader.destroy(),this.defaultShader.destroy(),this.fastShader.destroy(),this.gl=null},n.WebGLSpriteBatch=function(t){this.vertSize=6,this.size=2e3;var e=4*this.size*this.vertSize,n=6*this.size;this.vertices=new Float32Array(e),this.indices=new Uint16Array(n),this.lastIndexCount=0;for(var i=0,r=0;n>i;i+=6,r+=4)this.indices[i+0]=r+0,this.indices[i+1]=r+1,this.indices[i+2]=r+2,this.indices[i+3]=r+0,this.indices[i+4]=r+2,this.indices[i+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.setContext(t)},n.WebGLSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.WebGLSpriteBatch.prototype.begin=function(t){this.renderSession=t,this.shader=this.renderSession.shaderManager.defaultShader,this.start()},n.WebGLSpriteBatch.prototype.end=function(){this.flush()},n.WebGLSpriteBatch.prototype.render=function(t){var e=t.texture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=e.baseTexture),t.blendMode!==this.currentBlendMode&&this.setBlendMode(t.blendMode);var n=t._uvs||t.texture._uvs;if(n){var i,r,o,a,s=t.worldAlpha,l=t.tint,u=this.vertices,h=t.anchor.x,c=t.anchor.y;if(t.texture.trim){var d=t.texture.trim;r=d.x-h*d.width,i=r+e.frame.width,a=d.y-c*d.height,o=a+e.frame.height}else i=e.frame.width*(1-h),r=e.frame.width*-h,o=e.frame.height*(1-c),a=e.frame.height*-c;var p=4*this.currentBatchSize*this.vertSize,f=t.worldTransform,m=f.a,g=f.c,y=f.b,_=f.d,v=f.tx,b=f.ty;u[p++]=m*r+y*a+v,u[p++]=_*a+g*r+b,u[p++]=n.x0,u[p++]=n.y0,u[p++]=s,u[p++]=l,u[p++]=m*i+y*a+v,u[p++]=_*a+g*i+b,u[p++]=n.x1,u[p++]=n.y1,u[p++]=s,u[p++]=l,u[p++]=m*i+y*o+v,u[p++]=_*o+g*i+b,u[p++]=n.x2,u[p++]=n.y2,u[p++]=s,u[p++]=l,u[p++]=m*r+y*o+v,u[p++]=_*o+g*r+b,u[p++]=n.x3,u[p++]=n.y3,u[p++]=s,u[p++]=l,this.currentBatchSize++}},n.WebGLSpriteBatch.prototype.renderTilingSprite=function(t){var e=t.tilingTexture;(e.baseTexture!==this.currentBaseTexture||this.currentBatchSize>=this.size)&&(this.flush(),this.currentBaseTexture=e.baseTexture),t.blendMode!==this.currentBlendMode&&this.setBlendMode(t.blendMode),t._uvs||(t._uvs=new n.TextureUvs);var i=t._uvs;t.tilePosition.x%=e.baseTexture.width*t.tileScaleOffset.x,t.tilePosition.y%=e.baseTexture.height*t.tileScaleOffset.y;var r=t.tilePosition.x/(e.baseTexture.width*t.tileScaleOffset.x),o=t.tilePosition.y/(e.baseTexture.height*t.tileScaleOffset.y),a=t.width/e.baseTexture.width/(t.tileScale.x*t.tileScaleOffset.x),s=t.height/e.baseTexture.height/(t.tileScale.y*t.tileScaleOffset.y);i.x0=0-r,i.y0=0-o,i.x1=1*a-r,i.y1=0-o,i.x2=1*a-r,i.y2=1*s-o,i.x3=0-r,i.y3=1*s-o;var l=t.worldAlpha,u=t.tint,h=this.vertices,c=t.width,d=t.height,p=t.anchor.x,f=t.anchor.y,m=c*(1-p),g=c*-p,y=d*(1-f),_=d*-f,v=4*this.currentBatchSize*this.vertSize,b=t.worldTransform,w=b.a,x=b.c,T=b.b,M=b.d,k=b.tx,S=b.ty;h[v++]=w*g+T*_+k,h[v++]=M*_+x*g+S,h[v++]=i.x0,h[v++]=i.y0,h[v++]=l,h[v++]=u,h[v++]=w*m+T*_+k,h[v++]=M*_+x*m+S,h[v++]=i.x1,h[v++]=i.y1,h[v++]=l,h[v++]=u,h[v++]=w*m+T*y+k,h[v++]=M*y+x*m+S,h[v++]=i.x2,h[v++]=i.y2,h[v++]=l,h[v++]=u,h[v++]=w*g+T*y+k,h[v++]=M*y+x*g+S,h[v++]=i.x3,h[v++]=i.y3,h[v++]=l,h[v++]=u,this.currentBatchSize++},n.WebGLSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]||n.createWebGLTexture(this.currentBaseTexture,t)),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;t.uniform2f(this.shader.projectionVector,e.x,e.y);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.colorAttribute,2,t.FLOAT,!1,i,16),this.currentBlendMode!==n.blendModes.NORMAL&&this.setBlendMode(n.blendModes.NORMAL)},n.WebGLSpriteBatch.prototype.setBlendMode=function(t){this.flush(),this.currentBlendMode=t;var e=n.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(e[0],e[1])},n.WebGLSpriteBatch.prototype.destroy=function(){this.vertices=null,this.indices=null,this.gl.deleteBuffer(this.vertexBuffer),this.gl.deleteBuffer(this.indexBuffer),this.currentBaseTexture=null,this.gl=null},n.WebGLFastSpriteBatch=function(t){this.vertSize=10,this.maxSize=6e3,this.size=this.maxSize;var e=4*this.size*this.vertSize,n=6*this.maxSize;this.vertices=new Float32Array(e),this.indices=new Uint16Array(n),this.vertexBuffer=null,this.indexBuffer=null,this.lastIndexCount=0;for(var i=0,r=0;n>i;i+=6,r+=4)this.indices[i+0]=r+0,this.indices[i+1]=r+1,this.indices[i+2]=r+2,this.indices[i+3]=r+0,this.indices[i+4]=r+2,this.indices[i+5]=r+3;this.drawing=!1,this.currentBatchSize=0,this.currentBaseTexture=null,this.currentBlendMode=0,this.renderSession=null,this.shader=null,this.matrix=null,this.setContext(t)},n.WebGLFastSpriteBatch.prototype.setContext=function(t){this.gl=t,this.vertexBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.indices,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),this.currentBlendMode=99999},n.WebGLFastSpriteBatch.prototype.begin=function(t,e){this.renderSession=e,this.shader=this.renderSession.shaderManager.fastShader,this.matrix=t.worldTransform.toArray(!0),this.start()},n.WebGLFastSpriteBatch.prototype.end=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.render=function(t){var e=t.children,n=e[0];if(n.texture._uvs){this.currentBaseTexture=n.texture.baseTexture,n.blendMode!==this.currentBlendMode&&this.setBlendMode(n.blendMode);for(var i=0,r=e.length;r>i;i++)this.renderSprite(e[i]);this.flush()}},n.WebGLFastSpriteBatch.prototype.renderSprite=function(t){if(t.visible&&(t.texture.baseTexture===this.currentBaseTexture||(this.flush(),this.currentBaseTexture=t.texture.baseTexture,t.texture._uvs))){var e,n,i,r,o,a,s,l,u=this.vertices;if(e=t.texture._uvs,n=t.texture.frame.width,i=t.texture.frame.height,t.texture.trim){var h=t.texture.trim;o=h.x-t.anchor.x*h.width,r=o+t.texture.frame.width,s=h.y-t.anchor.y*h.height,a=s+t.texture.frame.height}else r=t.texture.frame.width*(1-t.anchor.x),o=t.texture.frame.width*-t.anchor.x,a=t.texture.frame.height*(1-t.anchor.y),s=t.texture.frame.height*-t.anchor.y;l=4*this.currentBatchSize*this.vertSize,u[l++]=o,u[l++]=s,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x0,u[l++]=e.y1,u[l++]=t.alpha,u[l++]=r,u[l++]=s,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x1,u[l++]=e.y1,u[l++]=t.alpha,u[l++]=r,u[l++]=a,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x2,u[l++]=e.y2,u[l++]=t.alpha,u[l++]=o,u[l++]=a,u[l++]=t.position.x,u[l++]=t.position.y,u[l++]=t.scale.x,u[l++]=t.scale.y,u[l++]=t.rotation,u[l++]=e.x3,u[l++]=e.y3,u[l++]=t.alpha,this.currentBatchSize++,this.currentBatchSize>=this.size&&this.flush()}},n.WebGLFastSpriteBatch.prototype.flush=function(){if(0!==this.currentBatchSize){var t=this.gl;if(this.currentBaseTexture._glTextures[t.id]||n.createWebGLTexture(this.currentBaseTexture,t),t.bindTexture(t.TEXTURE_2D,this.currentBaseTexture._glTextures[t.id]),this.currentBatchSize>.5*this.size)t.bufferSubData(t.ARRAY_BUFFER,0,this.vertices);else{var e=this.vertices.subarray(0,4*this.currentBatchSize*this.vertSize);t.bufferSubData(t.ARRAY_BUFFER,0,e)}t.drawElements(t.TRIANGLES,6*this.currentBatchSize,t.UNSIGNED_SHORT,0),this.currentBatchSize=0,this.renderSession.drawCount++}},n.WebGLFastSpriteBatch.prototype.stop=function(){this.flush()},n.WebGLFastSpriteBatch.prototype.start=function(){var t=this.gl;t.activeTexture(t.TEXTURE0),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer);var e=this.renderSession.projection;
t.uniform2f(this.shader.projectionVector,e.x,e.y),t.uniformMatrix3fv(this.shader.uMatrix,!1,this.matrix);var i=4*this.vertSize;t.vertexAttribPointer(this.shader.aVertexPosition,2,t.FLOAT,!1,i,0),t.vertexAttribPointer(this.shader.aPositionCoord,2,t.FLOAT,!1,i,8),t.vertexAttribPointer(this.shader.aScale,2,t.FLOAT,!1,i,16),t.vertexAttribPointer(this.shader.aRotation,1,t.FLOAT,!1,i,24),t.vertexAttribPointer(this.shader.aTextureCoord,2,t.FLOAT,!1,i,28),t.vertexAttribPointer(this.shader.colorAttribute,1,t.FLOAT,!1,i,36),this.currentBlendMode!==n.blendModes.NORMAL&&this.setBlendMode(n.blendModes.NORMAL)},n.WebGLFastSpriteBatch.prototype.setBlendMode=function(t){this.flush(),this.currentBlendMode=t;var e=n.blendModesWebGL[this.currentBlendMode];this.gl.blendFunc(e[0],e[1])},n.WebGLFilterManager=function(t,e){this.transparent=e,this.filterStack=[],this.offsetX=0,this.offsetY=0,this.setContext(t)},n.WebGLFilterManager.prototype.setContext=function(t){this.gl=t,this.texturePool=[],this.initShaderBuffers()},n.WebGLFilterManager.prototype.begin=function(t,e){this.renderSession=t,this.defaultShader=t.shaderManager.defaultShader;var n=this.renderSession.projection;this.width=2*n.x,this.height=2*-n.y,this.buffer=e},n.WebGLFilterManager.prototype.pushFilter=function(t){var e=this.gl,i=this.renderSession.projection,r=this.renderSession.offset;t._filterArea=t.target.filterArea||t.target.getBounds(),this.filterStack.push(t);var o=t.filterPasses[0];this.offsetX+=t._filterArea.x,this.offsetY+=t._filterArea.y;var a=this.texturePool.pop();a?a.resize(this.width,this.height):a=new n.FilterTexture(this.gl,this.width,this.height),e.bindTexture(e.TEXTURE_2D,a.texture);var s=t._filterArea,l=o.padding;s.x-=l,s.y-=l,s.width+=2*l,s.height+=2*l,s.x<0&&(s.x=0),s.width>this.width&&(s.width=this.width),s.y<0&&(s.y=0),s.height>this.height&&(s.height=this.height),e.bindFramebuffer(e.FRAMEBUFFER,a.frameBuffer),e.viewport(0,0,s.width,s.height),i.x=s.width/2,i.y=-s.height/2,r.x=-s.x,r.y=-s.y,e.uniform2f(this.defaultShader.projectionVector,s.width/2,-s.height/2),e.uniform2f(this.defaultShader.offsetVector,-s.x,-s.y),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),t._glFilterTexture=a},n.WebGLFilterManager.prototype.popFilter=function(){var t=this.gl,e=this.filterStack.pop(),i=e._filterArea,r=e._glFilterTexture,o=this.renderSession.projection,a=this.renderSession.offset;if(e.filterPasses.length>1){t.viewport(0,0,i.width,i.height),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=0,this.vertexArray[1]=i.height,this.vertexArray[2]=i.width,this.vertexArray[3]=i.height,this.vertexArray[4]=0,this.vertexArray[5]=0,this.vertexArray[6]=i.width,this.vertexArray[7]=0,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray);var s=r,l=this.texturePool.pop();l||(l=new n.FilterTexture(this.gl,this.width,this.height)),l.resize(this.width,this.height),t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.clear(t.COLOR_BUFFER_BIT),t.disable(t.BLEND);for(var u=0;u<e.filterPasses.length-1;u++){var h=e.filterPasses[u];t.bindFramebuffer(t.FRAMEBUFFER,l.frameBuffer),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,s.texture),this.applyFilterPass(h,i,i.width,i.height);var c=s;s=l,l=c}t.enable(t.BLEND),r=s,this.texturePool.push(l)}var d=e.filterPasses[e.filterPasses.length-1];this.offsetX-=i.x,this.offsetY-=i.y;var p=this.width,f=this.height,m=0,g=0,y=this.buffer;if(0===this.filterStack.length)t.colorMask(!0,!0,!0,!0);else{var _=this.filterStack[this.filterStack.length-1];i=_._filterArea,p=i.width,f=i.height,m=i.x,g=i.y,y=_._glFilterTexture.frameBuffer}o.x=p/2,o.y=-f/2,a.x=m,a.y=g,i=e._filterArea;var v=i.x-m,b=i.y-g;t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),this.vertexArray[0]=v,this.vertexArray[1]=b+i.height,this.vertexArray[2]=v+i.width,this.vertexArray[3]=b+i.height,this.vertexArray[4]=v,this.vertexArray[5]=b,this.vertexArray[6]=v+i.width,this.vertexArray[7]=b,t.bufferSubData(t.ARRAY_BUFFER,0,this.vertexArray),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),this.uvArray[2]=i.width/this.width,this.uvArray[5]=i.height/this.height,this.uvArray[6]=i.width/this.width,this.uvArray[7]=i.height/this.height,t.bufferSubData(t.ARRAY_BUFFER,0,this.uvArray),t.viewport(0,0,p,f),t.bindFramebuffer(t.FRAMEBUFFER,y),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,r.texture),this.applyFilterPass(d,i,p,f),t.useProgram(this.defaultShader.program),t.uniform2f(this.defaultShader.projectionVector,p/2,-f/2),t.uniform2f(this.defaultShader.offsetVector,-m,-g),this.texturePool.push(r),e._glFilterTexture=null},n.WebGLFilterManager.prototype.applyFilterPass=function(t,e,i,r){var o=this.gl,a=t.shaders[o.id];a||(a=new n.PixiShader(o),a.fragmentSrc=t.fragmentSrc,a.uniforms=t.uniforms,a.init(),t.shaders[o.id]=a),o.useProgram(a.program),o.uniform2f(a.projectionVector,i/2,-r/2),o.uniform2f(a.offsetVector,0,0),t.uniforms.dimensions&&(t.uniforms.dimensions.value[0]=this.width,t.uniforms.dimensions.value[1]=this.height,t.uniforms.dimensions.value[2]=this.vertexArray[0],t.uniforms.dimensions.value[3]=this.vertexArray[5]),a.syncUniforms(),o.bindBuffer(o.ARRAY_BUFFER,this.vertexBuffer),o.vertexAttribPointer(a.aVertexPosition,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.uvBuffer),o.vertexAttribPointer(a.aTextureCoord,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ARRAY_BUFFER,this.colorBuffer),o.vertexAttribPointer(a.colorAttribute,2,o.FLOAT,!1,0,0),o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,this.indexBuffer),o.drawElements(o.TRIANGLES,6,o.UNSIGNED_SHORT,0),this.renderSession.drawCount++},n.WebGLFilterManager.prototype.initShaderBuffers=function(){var t=this.gl;this.vertexBuffer=t.createBuffer(),this.uvBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.indexBuffer=t.createBuffer(),this.vertexArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.vertexBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertexArray,t.STATIC_DRAW),this.uvArray=new Float32Array([0,0,1,0,0,1,1,1]),t.bindBuffer(t.ARRAY_BUFFER,this.uvBuffer),t.bufferData(t.ARRAY_BUFFER,this.uvArray,t.STATIC_DRAW),this.colorArray=new Float32Array([1,16777215,1,16777215,1,16777215,1,16777215]),t.bindBuffer(t.ARRAY_BUFFER,this.colorBuffer),t.bufferData(t.ARRAY_BUFFER,this.colorArray,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.indexBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),t.STATIC_DRAW)},n.WebGLFilterManager.prototype.destroy=function(){var t=this.gl;this.filterStack=null,this.offsetX=0,this.offsetY=0;for(var e=0;e<this.texturePool.length;e++)this.texturePool.destroy();this.texturePool=null,t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.uvBuffer),t.deleteBuffer(this.colorBuffer),t.deleteBuffer(this.indexBuffer)},n.FilterTexture=function(t,e,i,r){this.gl=t,this.frameBuffer=t.createFramebuffer(),this.texture=t.createTexture(),r=r||n.scaleModes.DEFAULT,t.bindTexture(t.TEXTURE_2D,this.texture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r===n.scaleModes.LINEAR?t.LINEAR:t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,this.texture,0),this.renderBuffer=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.renderBuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.renderBuffer),this.resize(e,i)},n.FilterTexture.prototype.clear=function(){var t=this.gl;t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT)},n.FilterTexture.prototype.resize=function(t,e){if(this.width!==t||this.height!==e){this.width=t,this.height=e;var n=this.gl;n.bindTexture(n.TEXTURE_2D,this.texture),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,t,e,0,n.RGBA,n.UNSIGNED_BYTE,null),n.bindRenderbuffer(n.RENDERBUFFER,this.renderBuffer),n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t,e)}},n.FilterTexture.prototype.destroy=function(){var t=this.gl;t.deleteFramebuffer(this.frameBuffer),t.deleteTexture(this.texture),this.frameBuffer=null,this.texture=null},n.CanvasMaskManager=function(){},n.CanvasMaskManager.prototype.pushMask=function(t,e){e.save();var i=t.alpha,r=t.worldTransform;e.setTransform(r.a,r.c,r.b,r.d,r.tx,r.ty),n.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=i},n.CanvasMaskManager.prototype.popMask=function(t){t.restore()},n.CanvasTinter=function(){},n.CanvasTinter.getTintedTexture=function(t,e){var i=t.texture;e=n.CanvasTinter.roundColor(e);var r="#"+("00000"+(0|e).toString(16)).substr(-6);if(i.tintCache=i.tintCache||{},i.tintCache[r])return i.tintCache[r];var o=n.CanvasTinter.canvas||document.createElement("canvas");if(n.CanvasTinter.tintMethod(i,e,o),n.CanvasTinter.convertTintToImage){var a=new Image;a.src=o.toDataURL(),i.tintCache[r]=a}else i.tintCache[r]=o,n.CanvasTinter.canvas=null;return o},n.CanvasTinter.tintWithMultiply=function(t,e,n){var i=n.getContext("2d"),r=t.frame;n.width=r.width,n.height=r.height,i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},n.CanvasTinter.tintWithOverlay=function(t,e,n){var i=n.getContext("2d"),r=t.frame;n.width=r.width,n.height=r.height,i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,r.width,r.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height)},n.CanvasTinter.tintWithPerPixel=function(t,e,i){var r=i.getContext("2d"),o=t.frame;i.width=o.width,i.height=o.height,r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height);for(var a=n.hex2rgb(e),s=a[0],l=a[1],u=a[2],h=r.getImageData(0,0,o.width,o.height),c=h.data,d=0;d<c.length;d+=4)c[d+0]*=s,c[d+1]*=l,c[d+2]*=u;r.putImageData(h,0,0)},n.CanvasTinter.roundColor=function(t){var e=n.CanvasTinter.cacheStepsPerColorChannel,i=n.hex2rgb(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),n.rgb2hex(i)},n.CanvasTinter.cacheStepsPerColorChannel=8,n.CanvasTinter.convertTintToImage=!1,n.CanvasTinter.canUseMultiply=n.canUseNewCanvasBlendModes(),n.CanvasTinter.tintMethod=n.CanvasTinter.canUseMultiply?n.CanvasTinter.tintWithMultiply:n.CanvasTinter.tintWithPerPixel,n.CanvasRenderer=function(t,e,i,r){n.defaultRenderer=n.defaultRenderer||this,this.type=n.CANVAS_RENDERER,this.clearBeforeRender=!0,this.roundPixels=!1,this.transparent=!!r,n.blendModesCanvas||(n.blendModesCanvas=[],n.canUseNewCanvasBlendModes()?(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="multiply",n.blendModesCanvas[n.blendModes.SCREEN]="screen",n.blendModesCanvas[n.blendModes.OVERLAY]="overlay",n.blendModesCanvas[n.blendModes.DARKEN]="darken",n.blendModesCanvas[n.blendModes.LIGHTEN]="lighten",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="color-dodge",n.blendModesCanvas[n.blendModes.COLOR_BURN]="color-burn",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="hard-light",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="soft-light",n.blendModesCanvas[n.blendModes.DIFFERENCE]="difference",n.blendModesCanvas[n.blendModes.EXCLUSION]="exclusion",n.blendModesCanvas[n.blendModes.HUE]="hue",n.blendModesCanvas[n.blendModes.SATURATION]="saturation",n.blendModesCanvas[n.blendModes.COLOR]="color",n.blendModesCanvas[n.blendModes.LUMINOSITY]="luminosity"):(n.blendModesCanvas[n.blendModes.NORMAL]="source-over",n.blendModesCanvas[n.blendModes.ADD]="lighter",n.blendModesCanvas[n.blendModes.MULTIPLY]="source-over",n.blendModesCanvas[n.blendModes.SCREEN]="source-over",n.blendModesCanvas[n.blendModes.OVERLAY]="source-over",n.blendModesCanvas[n.blendModes.DARKEN]="source-over",n.blendModesCanvas[n.blendModes.LIGHTEN]="source-over",n.blendModesCanvas[n.blendModes.COLOR_DODGE]="source-over",n.blendModesCanvas[n.blendModes.COLOR_BURN]="source-over",n.blendModesCanvas[n.blendModes.HARD_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.SOFT_LIGHT]="source-over",n.blendModesCanvas[n.blendModes.DIFFERENCE]="source-over",n.blendModesCanvas[n.blendModes.EXCLUSION]="source-over",n.blendModesCanvas[n.blendModes.HUE]="source-over",n.blendModesCanvas[n.blendModes.SATURATION]="source-over",n.blendModesCanvas[n.blendModes.COLOR]="source-over",n.blendModesCanvas[n.blendModes.LUMINOSITY]="source-over")),this.width=t||800,this.height=e||600,this.view=i||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.refresh=!0,this.view.width=this.width,this.view.height=this.height,this.count=0,this.maskManager=new n.CanvasMaskManager,this.renderSession={context:this.context,maskManager:this.maskManager,scaleMode:null,smoothProperty:null},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="oImageSmoothingEnabled")},n.CanvasRenderer.prototype.constructor=n.CanvasRenderer,n.CanvasRenderer.prototype.render=function(t){n.texturesToUpdate.length=0,n.texturesToDestroy.length=0,t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,!this.transparent&&this.clearBeforeRender?(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height)):this.transparent&&this.clearBeforeRender&&this.context.clearRect(0,0,this.width,this.height),this.renderDisplayObject(t),t.interactive&&(t._interactiveEventsAdded||(t._interactiveEventsAdded=!0,t.interactionManager.setTarget(this))),n.Texture.frameUpdates.length>0&&(n.Texture.frameUpdates.length=0)},n.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e,this.view.width=t,this.view.height=e},n.CanvasRenderer.prototype.renderDisplayObject=function(t,e){this.renderSession.context=e||this.context,t._renderCanvas(this.renderSession)},n.CanvasRenderer.prototype.renderStripFlat=function(t){var e=this.context,n=t.verticies,i=n.length/2;this.count++,e.beginPath();for(var r=1;i-2>r;r++){var o=2*r,a=n[o],s=n[o+2],l=n[o+4],u=n[o+1],h=n[o+3],c=n[o+5];e.moveTo(a,u),e.lineTo(s,h),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.CanvasRenderer.prototype.renderStrip=function(t){var e=this.context,n=t.verticies,i=t.uvs,r=n.length/2;this.count++;for(var o=1;r-2>o;o++){var a=2*o,s=n[a],l=n[a+2],u=n[a+4],h=n[a+1],c=n[a+3],d=n[a+5],p=i[a]*t.texture.width,f=i[a+2]*t.texture.width,m=i[a+4]*t.texture.width,g=i[a+1]*t.texture.height,y=i[a+3]*t.texture.height,_=i[a+5]*t.texture.height;e.save(),e.beginPath(),e.moveTo(s,h),e.lineTo(l,c),e.lineTo(u,d),e.closePath(),e.clip();var v=p*y+g*m+f*_-y*m-g*f-p*_,b=s*y+g*u+l*_-y*u-g*l-s*_,w=p*l+s*m+f*u-l*m-s*f-p*u,x=p*y*u+g*l*m+s*f*_-s*y*m-g*f*u-p*l*_,T=h*y+g*d+c*_-y*d-g*c-h*_,M=p*c+h*m+f*d-c*m-h*f-p*d,k=p*y*d+g*c*m+h*f*_-h*y*m-g*f*d-p*c*_;e.transform(b/v,T/v,w/v,M/v,x/v,k/v),e.drawImage(t.texture.baseTexture.source,0,0),e.restore()}},n.CanvasBuffer=function(t,e){this.width=t,this.height=e,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=e},n.CanvasBuffer.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},n.CanvasBuffer.prototype.resize=function(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e},n.CanvasGraphics=function(){},n.CanvasGraphics.renderGraphics=function(t,e){for(var i=t.worldAlpha,r="",o=0;o<t.graphicsData.length;o++){var a=t.graphicsData[o],s=a.points;if(e.strokeStyle=r="#"+("00000"+(0|a.lineColor).toString(16)).substr(-6),e.lineWidth=a.lineWidth,a.type===n.Graphics.POLY){e.beginPath(),e.moveTo(s[0],s[1]);for(var l=1;l<s.length/2;l++)e.lineTo(s[2*l],s[2*l+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*i,e.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*i,e.stroke())}else if(a.type===n.Graphics.RECT)(a.fillColor||0===a.fillColor)&&(e.globalAlpha=a.fillAlpha*i,e.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fillRect(s[0],s[1],s[2],s[3])),a.lineWidth&&(e.globalAlpha=a.lineAlpha*i,e.strokeRect(s[0],s[1],s[2],s[3]));else if(a.type===n.Graphics.CIRC)e.beginPath(),e.arc(s[0],s[1],s[2],0,2*Math.PI),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*i,e.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*i,e.stroke());else if(a.type===n.Graphics.ELIP){var u=a.points,h=2*u[2],c=2*u[3],d=u[0]-h/2,p=u[1]-c/2;e.beginPath();var f=.5522848,m=h/2*f,g=c/2*f,y=d+h,_=p+c,v=d+h/2,b=p+c/2;e.moveTo(d,b),e.bezierCurveTo(d,b-g,v-m,p,v,p),e.bezierCurveTo(v+m,p,y,b-g,y,b),e.bezierCurveTo(y,b+g,v+m,_,v,_),e.bezierCurveTo(v-m,_,d,b+g,d,b),e.closePath(),a.fill&&(e.globalAlpha=a.fillAlpha*i,e.fillStyle=r="#"+("00000"+(0|a.fillColor).toString(16)).substr(-6),e.fill()),a.lineWidth&&(e.globalAlpha=a.lineAlpha*i,e.stroke())}}},n.CanvasGraphics.renderGraphicsMask=function(t,e){var i=t.graphicsData.length;if(0!==i){i>1&&(i=1,window.console.log("Pixi.js warning: masks in canvas can only mask using the first path in the graphics object"));for(var r=0;1>r;r++){var o=t.graphicsData[r],a=o.points;if(o.type===n.Graphics.POLY){e.beginPath(),e.moveTo(a[0],a[1]);for(var s=1;s<a.length/2;s++)e.lineTo(a[2*s],a[2*s+1]);a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath()}else if(o.type===n.Graphics.RECT)e.beginPath(),e.rect(a[0],a[1],a[2],a[3]),e.closePath();else if(o.type===n.Graphics.CIRC)e.beginPath(),e.arc(a[0],a[1],a[2],0,2*Math.PI),e.closePath();else if(o.type===n.Graphics.ELIP){var l=o.points,u=2*l[2],h=2*l[3],c=l[0]-u/2,d=l[1]-h/2;e.beginPath();var p=.5522848,f=u/2*p,m=h/2*p,g=c+u,y=d+h,_=c+u/2,v=d+h/2;e.moveTo(c,v),e.bezierCurveTo(c,v-m,_-f,d,_,d),e.bezierCurveTo(_+f,d,g,v-m,g,v),e.bezierCurveTo(g,v+m,_+f,y,_,y),e.bezierCurveTo(_-f,y,c,v+m,c,v),e.closePath()}}}},n.Graphics=function(){n.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor="black",this.graphicsData=[],this.tint=16777215,this.blendMode=n.blendModes.NORMAL,this.currentPath={points:[]},this._webGL=[],this.isMask=!1,this.bounds=null,this.boundsPadding=10},n.Graphics.prototype=Object.create(n.DisplayObjectContainer.prototype),n.Graphics.prototype.constructor=n.Graphics,Object.defineProperty(n.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this.dirty=!0)}}),n.Graphics.prototype.lineStyle=function(t,e,i){return this.currentPath.points.length||this.graphicsData.pop(),this.lineWidth=t||0,this.lineColor=e||0,this.lineAlpha=arguments.length<3?1:i,this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:n.Graphics.POLY},this.graphicsData.push(this.currentPath),this},n.Graphics.prototype.moveTo=function(t,e){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath=this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[],type:n.Graphics.POLY},this.currentPath.points.push(t,e),this.graphicsData.push(this.currentPath),this},n.Graphics.prototype.lineTo=function(t,e){return this.currentPath.points.push(t,e),this.dirty=!0,this},n.Graphics.prototype.beginFill=function(t,e){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=arguments.length<2?1:e,this},n.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},n.Graphics.prototype.drawRect=function(t,e,i,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,r],type:n.Graphics.RECT},this.graphicsData.push(this.currentPath),this.dirty=!0,this},n.Graphics.prototype.drawCircle=function(t,e,i){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,i],type:n.Graphics.CIRC},this.graphicsData.push(this.currentPath),this.dirty=!0,this},n.Graphics.prototype.drawEllipse=function(t,e,i,r){return this.currentPath.points.length||this.graphicsData.pop(),this.currentPath={lineWidth:this.lineWidth,lineColor:this.lineColor,lineAlpha:this.lineAlpha,fillColor:this.fillColor,fillAlpha:this.fillAlpha,fill:this.filling,points:[t,e,i,r],type:n.Graphics.ELIP},this.graphicsData.push(this.currentPath),this.dirty=!0,this},n.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this.dirty=!0,this.clearDirty=!0,this.graphicsData=[],this.bounds=null,this},n.Graphics.prototype.generateTexture=function(){var t=this.getBounds(),e=new n.CanvasBuffer(t.width,t.height),i=n.Texture.fromCanvas(e.canvas);return e.context.translate(-t.x,-t.y),n.CanvasGraphics.renderGraphics(this,e.context),i},n.Graphics.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){if(this._cacheAsBitmap)return this.dirty&&(this._generateCachedSprite(),n.updateWebGLTexture(this._cachedSprite.texture.baseTexture,t.gl),this.dirty=!1),this._cachedSprite.alpha=this.alpha,void n.Sprite.prototype._renderWebGL.call(this._cachedSprite,t);if(t.spriteBatch.stop(),this._mask&&t.maskManager.pushMask(this.mask,t),this._filters&&t.filterManager.pushFilter(this._filterBlock),this.blendMode!==t.spriteBatch.currentBlendMode){t.spriteBatch.currentBlendMode=this.blendMode;var e=n.blendModesWebGL[t.spriteBatch.currentBlendMode];t.spriteBatch.gl.blendFunc(e[0],e[1])}if(n.WebGLGraphics.renderGraphics(this,t),this.children.length){t.spriteBatch.start();for(var i=0,r=this.children.length;r>i;i++)this.children[i]._renderWebGL(t);t.spriteBatch.stop()}this._filters&&t.filterManager.popFilter(),this._mask&&t.maskManager.popMask(t),t.drawCount++,t.spriteBatch.start()}},n.Graphics.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha&&this.isMask!==!0){var e=t.context,i=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),e.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty),n.CanvasGraphics.renderGraphics(this,e);for(var r=0,o=this.children.length;o>r;r++)this.children[r]._renderCanvas(t)}},n.Graphics.prototype.getBounds=function(t){this.bounds||this.updateBounds();var e=this.bounds.x,n=this.bounds.width+this.bounds.x,i=this.bounds.y,r=this.bounds.height+this.bounds.y,o=t||this.worldTransform,a=o.a,s=o.c,l=o.b,u=o.d,h=o.tx,c=o.ty,d=a*n+l*r+h,p=u*r+s*n+c,f=a*e+l*r+h,m=u*r+s*e+c,g=a*e+l*i+h,y=u*i+s*e+c,_=a*n+l*i+h,v=u*i+s*n+c,b=d,w=p,x=d,T=p;x=x>f?f:x,x=x>g?g:x,x=x>_?_:x,T=T>m?m:T,T=T>y?y:T,T=T>v?v:T,b=f>b?f:b,b=g>b?g:b,b=_>b?_:b,w=m>w?m:w,w=y>w?y:w,w=v>w?v:w;var M=this._bounds;return M.x=x,M.width=b-x,M.y=T,M.height=w-T,M},n.Graphics.prototype.updateBounds=function(){for(var t,e,i,r,o,a=1/0,s=-1/0,l=1/0,u=-1/0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],d=c.type,p=c.lineWidth;if(t=c.points,d===n.Graphics.RECT)e=t[0]-p/2,i=t[1]-p/2,r=t[2]+p,o=t[3]+p,a=a>e?e:a,s=e+r>s?e+r:s,l=l>i?e:l,u=i+o>u?i+o:u;else if(d===n.Graphics.CIRC||d===n.Graphics.ELIP)e=t[0],i=t[1],r=t[2]+p/2,o=t[3]+p/2,a=a>e-r?e-r:a,s=e+r>s?e+r:s,l=l>i-o?i-o:l,u=i+o>u?i+o:u;else for(var f=0;f<t.length;f+=2)e=t[f],i=t[f+1],a=a>e-p?e-p:a,s=e+p>s?e+p:s,l=l>i-p?i-p:l,u=i+p>u?i+p:u}var m=this.boundsPadding;this.bounds=new n.Rectangle(a-m,l-m,s-a+2*m,u-l+2*m)},n.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var e=new n.CanvasBuffer(t.width,t.height),i=n.Texture.fromCanvas(e.canvas);this._cachedSprite=new n.Sprite(i),this._cachedSprite.buffer=e,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-(t.x/t.width),this._cachedSprite.anchor.y=-(t.y/t.height),this._cachedSprite.buffer.context.translate(-t.x,-t.y),n.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},n.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},n.Graphics.POLY=0,n.Graphics.RECT=1,n.Graphics.CIRC=2,n.Graphics.ELIP=3,n.TilingSprite=function(t,e,i){n.Sprite.call(this,t),this.width=e||100,this.height=i||100,this.tileScale=new n.Point(1,1),this.tileScaleOffset=new n.Point(1,1),this.tilePosition=new n.Point(0,0),this.renderable=!0,this.tint=16777215,this.blendMode=n.blendModes.NORMAL},n.TilingSprite.prototype=Object.create(n.Sprite.prototype),n.TilingSprite.prototype.constructor=n.TilingSprite,Object.defineProperty(n.TilingSprite.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(n.TilingSprite.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}}),n.TilingSprite.prototype.onTextureUpdate=function(){this.updateFrame=!0},n.TilingSprite.prototype.setTexture=function(t){this.texture!==t&&(this.texture=t,this.refreshTexture=!0,this.cachedTint=16777215)},n.TilingSprite.prototype._renderWebGL=function(t){if(this.visible!==!1&&0!==this.alpha){var e,i;for(this.mask&&(t.spriteBatch.stop(),t.maskManager.pushMask(this.mask,t),t.spriteBatch.start()),this.filters&&(t.spriteBatch.flush(),t.filterManager.pushFilter(this._filterBlock)),!this.tilingTexture||this.refreshTexture?(this.generateTilingTexture(!0),this.tilingTexture&&this.tilingTexture.needsUpdate&&(n.updateWebGLTexture(this.tilingTexture.baseTexture,t.gl),this.tilingTexture.needsUpdate=!1)):t.spriteBatch.renderTilingSprite(this),e=0,i=this.children.length;i>e;e++)this.children[e]._renderWebGL(t);t.spriteBatch.stop(),this.filters&&t.filterManager.popFilter(),this.mask&&t.maskManager.popMask(t),t.spriteBatch.start()}},n.TilingSprite.prototype._renderCanvas=function(t){if(this.visible!==!1&&0!==this.alpha){var e=t.context;this._mask&&t.maskManager.pushMask(this._mask,e),e.globalAlpha=this.worldAlpha;var i=this.worldTransform;if(e.setTransform(i.a,i.c,i.b,i.d,i.tx,i.ty),!this.__tilePattern||this.refreshTexture){if(this.generateTilingTexture(!1),!this.tilingTexture)return;this.__tilePattern=e.createPattern(this.tilingTexture.baseTexture.source,"repeat")}this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,e.globalCompositeOperation=n.blendModesCanvas[t.currentBlendMode]),e.beginPath();var r=this.tilePosition,o=this.tileScale;r.x%=this.tilingTexture.baseTexture.width,r.y%=this.tilingTexture.baseTexture.height,e.scale(o.x,o.y),e.translate(r.x,r.y),e.fillStyle=this.__tilePattern,e.fillRect(-r.x+this.anchor.x*-this._width,-r.y+this.anchor.y*-this._height,this._width/o.x,this._height/o.y),e.scale(1/o.x,1/o.y),e.translate(-r.x,-r.y),e.closePath(),this._mask&&t.maskManager.popMask(t.context)}},n.TilingSprite.prototype.getBounds=function(){var t=this._width,e=this._height,n=t*(1-this.anchor.x),i=t*-this.anchor.x,r=e*(1-this.anchor.y),o=e*-this.anchor.y,a=this.worldTransform,s=a.a,l=a.c,u=a.b,h=a.d,c=a.tx,d=a.ty,p=s*i+u*o+c,f=h*o+l*i+d,m=s*n+u*o+c,g=h*o+l*n+d,y=s*n+u*r+c,_=h*r+l*n+d,v=s*i+u*r+c,b=h*r+l*i+d,w=-1/0,x=-1/0,T=1/0,M=1/0;T=T>p?p:T,T=T>m?m:T,T=T>y?y:T,T=T>v?v:T,M=M>f?f:M,M=M>g?g:M,M=M>_?_:M,M=M>b?b:M,w=p>w?p:w,w=m>w?m:w,w=y>w?y:w,w=v>w?v:w,x=f>x?f:x,x=g>x?g:x,x=_>x?_:x,x=b>x?b:x;var k=this._bounds;return k.x=T,k.width=w-T,k.y=M,k.height=x-M,this._currentBounds=k,k},n.TilingSprite.prototype.generateTilingTexture=function(t){var e=this.texture;if(e.baseTexture.hasLoaded){var i,r,o=e.baseTexture,a=e.frame,s=a.width!==o.width||a.height!==o.height,l=!1;if(t?(i=n.getNextPowerOfTwo(a.width),r=n.getNextPowerOfTwo(a.height),a.width!==i&&a.height!==r&&(l=!0)):s&&(i=a.width,r=a.height,l=!0),l){var u;this.tilingTexture&&this.tilingTexture.isTiling?(u=this.tilingTexture.canvasBuffer,u.resize(i,r),this.tilingTexture.baseTexture.width=i,this.tilingTexture.baseTexture.height=r,this.tilingTexture.needsUpdate=!0):(u=new n.CanvasBuffer(i,r),this.tilingTexture=n.Texture.fromCanvas(u.canvas),this.tilingTexture.canvasBuffer=u,this.tilingTexture.isTiling=!0),u.context.drawImage(e.baseTexture.source,a.x,a.y,a.width,a.height,0,0,i,r),this.tileScaleOffset.x=a.width/i,this.tileScaleOffset.y=a.height/r}else this.tilingTexture&&this.tilingTexture.isTiling&&this.tilingTexture.destroy(!0),this.tileScaleOffset.x=1,this.tileScaleOffset.y=1,this.tilingTexture=e;this.refreshTexture=!1,this.tilingTexture.baseTexture._powerOf2=!0}},n.BaseTextureCache={},n.texturesToUpdate=[],n.texturesToDestroy=[],n.BaseTextureCacheIdGenerator=0,n.BaseTexture=function(t,e){if(n.EventTarget.call(this),this.width=100,this.height=100,this.scaleMode=e||n.scaleModes.DEFAULT,this.hasLoaded=!1,this.source=t,this.id=n.BaseTextureCacheIdGenerator++,this._glTextures=[],t){if((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.hasLoaded=!0,this.width=this.source.width,this.height=this.source.height,n.texturesToUpdate.push(this);else{var i=this;this.source.onload=function(){i.hasLoaded=!0,i.width=i.source.width,i.height=i.source.height,n.texturesToUpdate.push(i),i.dispatchEvent({type:"loaded",content:i})}}this.imageUrl=null,this._powerOf2=!1}},n.BaseTexture.prototype.constructor=n.BaseTexture,n.BaseTexture.prototype.destroy=function(){this.imageUrl&&(delete n.BaseTextureCache[this.imageUrl],this.imageUrl=null,this.source.src=null),this.source=null,n.texturesToDestroy.push(this)},n.BaseTexture.prototype.updateSourceImage=function(t){this.hasLoaded=!1,this.source.src=null,this.source.src=t},n.BaseTexture.fromImage=function(t,e,i){var r=n.BaseTextureCache[t];if(void 0===e&&-1===t.indexOf("data:")&&(e=!0),!r){var o=new Image;e&&(o.crossOrigin=""),o.src=t,r=new n.BaseTexture(o,i),r.imageUrl=t,n.BaseTextureCache[t]=r}return r},n.BaseTexture.fromCanvas=function(t,e){t._pixiId||(t._pixiId="canvas_"+n.TextureCacheIdGenerator++);var i=n.BaseTextureCache[t._pixiId];return i||(i=new n.BaseTexture(t,e),n.BaseTextureCache[t._pixiId]=i),i},n.TextureCache={},n.FrameCache={},n.TextureCacheIdGenerator=0,n.Texture=function(t,e){if(n.EventTarget.call(this),e||(this.noFrame=!0,e=new n.Rectangle(0,0,1,1)),t instanceof n.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=e,this.trim=null,this.scope=this,this._uvs=null,t.hasLoaded)this.noFrame&&(e=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(e);else{var i=this;t.addEventListener("loaded",function(){i.onBaseTextureLoaded()})}},n.Texture.prototype.constructor=n.Texture,n.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;t.removeEventListener("loaded",this.onLoaded),this.noFrame&&(this.frame=new n.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame),this.scope.dispatchEvent({type:"update",content:this})},n.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy()
},n.Texture.prototype.setFrame=function(t){if(this.frame=t,this.width=t.width,this.height=t.height,t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.updateFrame=!0,n.Texture.frameUpdates.push(this)},n.Texture.prototype._updateWebGLuvs=function(){this._uvs||(this._uvs=new n.TextureUvs);var t=this.frame,e=this.baseTexture.width,i=this.baseTexture.height;this._uvs.x0=t.x/e,this._uvs.y0=t.y/i,this._uvs.x1=(t.x+t.width)/e,this._uvs.y1=t.y/i,this._uvs.x2=(t.x+t.width)/e,this._uvs.y2=(t.y+t.height)/i,this._uvs.x3=t.x/e,this._uvs.y3=(t.y+t.height)/i},n.Texture.fromImage=function(t,e,i){var r=n.TextureCache[t];return r||(r=new n.Texture(n.BaseTexture.fromImage(t,e,i)),n.TextureCache[t]=r),r},n.Texture.fromFrame=function(t){var e=n.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return e},n.Texture.fromCanvas=function(t,e){var i=n.BaseTexture.fromCanvas(t,e);return new n.Texture(i)},n.Texture.addTextureToCache=function(t,e){n.TextureCache[e]=t},n.Texture.removeTextureFromCache=function(t){var e=n.TextureCache[t];return delete n.TextureCache[t],delete n.BaseTextureCache[t],e},n.Texture.frameUpdates=[],n.TextureUvs=function(){this.x0=0,this.y0=0,this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.x3=0,this.y4=0},n.RenderTexture=function(t,e,i,r){if(n.EventTarget.call(this),this.width=t||100,this.height=e||100,this.frame=new n.Rectangle(0,0,this.width,this.height),this.baseTexture=new n.BaseTexture,this.baseTexture.width=this.width,this.baseTexture.height=this.height,this.baseTexture._glTextures=[],this.baseTexture.scaleMode=r||n.scaleModes.DEFAULT,this.baseTexture.hasLoaded=!0,this.renderer=i||n.defaultRenderer,this.renderer.type===n.WEBGL_RENDERER){var o=this.renderer.gl;this.textureBuffer=new n.FilterTexture(o,this.width,this.height,this.baseTexture.scaleMode),this.baseTexture._glTextures[o.id]=this.textureBuffer.texture,this.render=this.renderWebGL,this.projection=new n.Point(this.width/2,-this.height/2)}else this.render=this.renderCanvas,this.textureBuffer=new n.CanvasBuffer(this.width,this.height),this.baseTexture.source=this.textureBuffer.canvas;n.Texture.frameUpdates.push(this)},n.RenderTexture.prototype=Object.create(n.Texture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.resize=function(t,e,i){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.frame.width=this.width,this.frame.height=this.height,i&&(this.baseTexture.width=this.width,this.baseTexture.height=this.height),this.renderer.type===n.WEBGL_RENDERER&&(this.projection.x=this.width/2,this.projection.y=-this.height/2),this.textureBuffer.resize(this.width,this.height))},n.RenderTexture.prototype.clear=function(){this.renderer.type===n.WEBGL_RENDERER&&this.renderer.gl.bindFramebuffer(this.renderer.gl.FRAMEBUFFER,this.textureBuffer.frameBuffer),this.textureBuffer.clear()},n.RenderTexture.prototype.renderWebGL=function(t,e,i){var r=this.renderer.gl;r.colorMask(!0,!0,!0,!0),r.viewport(0,0,this.width,this.height),r.bindFramebuffer(r.FRAMEBUFFER,this.textureBuffer.frameBuffer),i&&this.textureBuffer.clear();var o=t.children,a=t.worldTransform;t.worldTransform=n.RenderTexture.tempMatrix,t.worldTransform.d=-1,t.worldTransform.ty=-2*this.projection.y,e&&(t.worldTransform.tx=e.x,t.worldTransform.ty-=e.y);for(var s=0,l=o.length;l>s;s++)o[s].updateTransform();n.WebGLRenderer.updateTextures(),this.renderer.renderDisplayObject(t,this.projection,this.textureBuffer.frameBuffer),t.worldTransform=a},n.RenderTexture.prototype.renderCanvas=function(t,e,i){var r=t.children,o=t.worldTransform;t.worldTransform=n.RenderTexture.tempMatrix,e&&(t.worldTransform.tx=e.x,t.worldTransform.ty=e.y);for(var a=0,s=r.length;s>a;a++)r[a].updateTransform();i&&this.textureBuffer.clear();var l=this.textureBuffer.context;this.renderer.renderDisplayObject(t,l),l.setTransform(1,0,0,1,0,0),t.worldTransform=o},n.RenderTexture.tempMatrix=new n.Matrix,"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=n),t.PIXI=n):"undefined"!=typeof define&&define.amd?define("PIXI",function(){return e.PIXI=n}()):e.PIXI=n}).call(this),function(){var e=this,n=n||{VERSION:"2.0.5",GAMES:[],AUTO:0,CANVAS:1,WEBGL:2,HEADLESS:3,NONE:0,LEFT:1,RIGHT:2,UP:3,DOWN:4,SPRITE:0,BUTTON:1,IMAGE:2,GRAPHICS:3,TEXT:4,TILESPRITE:5,BITMAPTEXT:6,GROUP:7,RENDERTEXTURE:8,TILEMAP:9,TILEMAPLAYER:10,EMITTER:11,POLYGON:12,BITMAPDATA:13,CANVAS_FILTER:14,WEBGL_FILTER:15,ELLIPSE:16,SPRITEBATCH:17,RETROFONT:18,POINTER:19,blendModes:{NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},scaleModes:{DEFAULT:0,LINEAR:0,NEAREST:1}};if(PIXI.InteractionManager=PIXI.InteractionManager||function(){},n.Utils={transposeArray:function(t){for(var e=new Array(t[0].length),n=0;n<t[0].length;n++){e[n]=new Array(t.length-1);for(var i=t.length-1;i>-1;i--)e[n][i]=t[i][n]}return e},rotateArray:function(t,e){if("string"!=typeof e&&(e=(e%360+360)%360),90===e||-270===e||"rotateLeft"===e)t=n.Utils.transposeArray(t),t=t.reverse();else if(-90===e||270===e||"rotateRight"===e)t=t.reverse(),t=n.Utils.transposeArray(t);else if(180===Math.abs(e)||"rotate180"===e){for(var i=0;i<t.length;i++)t[i].reverse();t=t.reverse()}return t},parseDimension:function(t,e){var n=0,i=0;return"string"==typeof t?"%"===t.substr(-1)?(n=parseInt(t,10)/100,i=0===e?window.innerWidth*n:window.innerHeight*n):i=parseInt(t,10):i=t,i},shuffle:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t},pad:function(t,e,n,i){if("undefined"==typeof e)var e=0;if("undefined"==typeof n)var n=" ";if("undefined"==typeof i)var i=3;var r=0;if(e+1>=t.length)switch(i){case 1:t=new Array(e+1-t.length).join(n)+t;break;case 3:var o=Math.ceil((r=e-t.length)/2),a=r-o;t=new Array(a+1).join(n)+t+new Array(o+1).join(n);break;default:t+=new Array(e+1-t.length).join(n)}return t},isPlainObject:function(t){if("object"!=typeof t||t.nodeType||t===t.window)return!1;try{if(t.constructor&&!{}.hasOwnProperty.call(t.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}return!0},extend:function(){var t,e,i,r,o,a,s=arguments[0]||{},l=1,u=arguments.length,h=!1;for("boolean"==typeof s&&(h=s,s=arguments[1]||{},l=2),u===l&&(s=this,--l);u>l;l++)if(null!=(t=arguments[l]))for(e in t)i=s[e],r=t[e],s!==r&&(h&&r&&(n.Utils.isPlainObject(r)||(o=Array.isArray(r)))?(o?(o=!1,a=i&&Array.isArray(i)?i:[]):a=i&&n.Utils.isPlainObject(i)?i:{},s[e]=n.Utils.extend(h,a,r)):void 0!==r&&(s[e]=r));return s}},"function"!=typeof Function.prototype.bind&&(Function.prototype.bind=function(){var t=Array.prototype.slice;return function(e){function n(){var o=r.concat(t.call(arguments));i.apply(this instanceof n?this:e,o)}var i=this,r=t.call(arguments,1);if("function"!=typeof i)throw new TypeError;return n.prototype=function o(t){return t&&(o.prototype=t),this instanceof o?void 0:new o}(i.prototype),n}}()),Array.isArray||(Array.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)}),Array.prototype.forEach||(Array.prototype.forEach=function(t){"use strict";if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError;for(var i=arguments.length>=2?arguments[1]:void 0,r=0;n>r;r++)r in e&&t.call(i,e[r],r,e)}),"function"!=typeof window.Uint32Array){var i=function(t){var e=new Array;window[t]=function(t){if("number"==typeof t){Array.call(this,t),this.length=t;for(var e=0;e<this.length;e++)this[e]=0}else{Array.call(this,t.length),this.length=t.length;for(var e=0;e<this.length;e++)this[e]=t[e]}},window[t].prototype=e,window[t].constructor=window[t]};i("Uint32Array"),i("Int16Array")}window.console||(window.console={},window.console.log=window.console.assert=function(){},window.console.warn=window.console.assert=function(){}),n.Circle=function(t,e,n){t=t||0,e=e||0,n=n||0,this.x=t,this.y=e,this._diameter=n,this._radius=n>0?.5*n:0},n.Circle.prototype={circumference:function(){return 2*Math.PI*this._radius},setTo:function(t,e,n){return this.x=t,this.y=e,this._diameter=n,this._radius=.5*n,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,e){return"undefined"==typeof e&&(e=!1),e?n.Math.distanceRounded(this.x,this.y,t.x,t.y):n.Math.distance(this.x,this.y,t.x,t.y)},clone:function(t){return"undefined"==typeof t?t=new n.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,e){return n.Circle.contains(this,t,e)},circumferencePoint:function(t,e,i){return n.Circle.circumferencePoint(this,t,e,i)},offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},toString:function(){return"[{Phaser.Circle (x="+this.x+" y="+this.y+" diameter="+this.diameter+" radius="+this.radius+")}]"}},n.Circle.prototype.constructor=n.Circle,Object.defineProperty(n.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(n.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(n.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(n.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(n.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(n.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(n.Circle.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(n.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){t===!0&&this.setTo(0,0,0)}}),n.Circle.contains=function(t,e,n){if(t.radius>0&&e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom){var i=(t.x-e)*(t.x-e),r=(t.y-n)*(t.y-n);return i+r<=t.radius*t.radius}return!1},n.Circle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.diameter==e.diameter},n.Circle.intersects=function(t,e){return n.Math.distance(t.x,t.y,e.x,e.y)<=t.radius+e.radius},n.Circle.circumferencePoint=function(t,e,i,r){return"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=new n.Point),i===!0&&(e=n.Math.degToRad(e)),r.x=t.x+t.radius*Math.cos(e),r.y=t.y+t.radius*Math.sin(e),r},n.Circle.intersectsRectangle=function(t,e){var n=Math.abs(t.x-e.x-e.halfWidth),i=e.halfWidth+t.radius;if(n>i)return!1;var r=Math.abs(t.y-e.y-e.halfHeight),o=e.halfHeight+t.radius;if(r>o)return!1;if(n<=e.halfWidth||r<=e.halfHeight)return!0;var a=n-e.halfWidth,s=r-e.halfHeight,l=a*a,u=s*s,h=t.radius*t.radius;return h>=l+u},PIXI.Circle=n.Circle,n.Point=function(t,e){t=t||0,e=e||0,this.x=t,this.y=e},n.Point.prototype={copyFrom:function(t){return this.setTo(t.x,t.y)},invert:function(){return this.setTo(this.y,this.x)},setTo:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},set:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this},add:function(t,e){return this.x+=t,this.y+=e,this},subtract:function(t,e){return this.x-=t,this.y-=e,this},multiply:function(t,e){return this.x*=t,this.y*=e,this},divide:function(t,e){return this.x/=t,this.y/=e,this},clampX:function(t,e){return this.x=n.Math.clamp(this.x,t,e),this},clampY:function(t,e){return this.y=n.Math.clamp(this.y,t,e),this},clamp:function(t,e){return this.x=n.Math.clamp(this.x,t,e),this.y=n.Math.clamp(this.y,t,e),this},clone:function(t){return"undefined"==typeof t?t=new n.Point(this.x,this.y):t.setTo(this.x,this.y),t},copyTo:function(t){return t.x=this.x,t.y=this.y,t},distance:function(t,e){return n.Point.distance(this,t,e)},equals:function(t){return t.x===this.x&&t.y===this.y},angle:function(t,e){return"undefined"==typeof e&&(e=!1),e?n.Math.radToDeg(Math.atan2(t.y-this.y,t.x-this.x)):Math.atan2(t.y-this.y,t.x-this.x)},angleSq:function(t){return this.subtract(t).angle(t.subtract(this))},rotate:function(t,e,i,r,o){return n.Point.rotate(this,t,e,i,r,o)},getMagnitude:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},getMagnitudeSq:function(){return this.x*this.x+this.y*this.y},setMagnitude:function(t){return this.normalize().multiply(t,t)},normalize:function(){if(!this.isZero()){var t=this.getMagnitude();this.x/=t,this.y/=t}return this},isZero:function(){return 0===this.x&&0===this.y},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},perp:function(){return this.setTo(-this.y,this.x)},rperp:function(){return this.setTo(this.y,-this.x)},normalRightHand:function(){return this.setTo(-1*this.y,this.x)},toString:function(){return"[{Point (x="+this.x+" y="+this.y+")}]"}},n.Point.prototype.constructor=n.Point,n.Point.add=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x+e.x,i.y=t.y+e.y,i},n.Point.subtract=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x-e.x,i.y=t.y-e.y,i},n.Point.multiply=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x*e.x,i.y=t.y*e.y,i},n.Point.divide=function(t,e,i){return"undefined"==typeof i&&(i=new n.Point),i.x=t.x/e.x,i.y=t.y/e.y,i},n.Point.equals=function(t,e){return t.x===e.x&&t.y===e.y},n.Point.angle=function(t,e){return Math.atan2(t.y-e.y,t.x-e.x)},n.Point.angleSq=function(t,e){return t.subtract(e).angle(e.subtract(t))},n.Point.negative=function(t,e){return"undefined"==typeof e&&(e=new n.Point),e.setTo(-t.x,-t.y)},n.Point.multiplyAdd=function(t,e,i,r){return"undefined"==typeof r&&(r=new n.Point),r.setTo(t.x+e.x*i,t.y+e.y*i)},n.Point.interpolate=function(t,e,i,r){return"undefined"==typeof r&&(r=new n.Point),r.setTo(t.x+(e.x-t.x)*i,t.y+(e.y-t.y)*i)},n.Point.perp=function(t,e){return"undefined"==typeof e&&(e=new n.Point),e.setTo(-t.y,t.x)},n.Point.rperp=function(t,e){return"undefined"==typeof e&&(e=new n.Point),e.setTo(t.y,-t.x)},n.Point.distance=function(t,e,i){return"undefined"==typeof i&&(i=!1),i?n.Math.distanceRounded(t.x,t.y,e.x,e.y):n.Math.distance(t.x,t.y,e.x,e.y)},n.Point.project=function(t,e,i){"undefined"==typeof i&&(i=new n.Point);var r=t.dot(e)/e.getMagnitudeSq();return 0!==r&&i.setTo(r*e.x,r*e.y),i},n.Point.projectUnit=function(t,e,i){"undefined"==typeof i&&(i=new n.Point);var r=t.dot(e);return 0!==r&&i.setTo(r*e.x,r*e.y),i},n.Point.normalRightHand=function(t,e){return"undefined"==typeof e&&(e=new n.Point),e.setTo(-1*t.y,t.x)},n.Point.normalize=function(t,e){"undefined"==typeof e&&(e=new n.Point);var i=t.getMagnitude();return 0!==i&&e.setTo(t.x/i,t.y/i),e},n.Point.rotate=function(t,e,i,r,o,a){return o=o||!1,a=a||null,o&&(r=n.Math.degToRad(r)),null===a&&(a=Math.sqrt((e-t.x)*(e-t.x)+(i-t.y)*(i-t.y))),t.setTo(e+a*Math.cos(r),i+a*Math.sin(r))},n.Point.centroid=function(t,e){if("undefined"==typeof e&&(e=new n.Point),"[object Array]"!==Object.prototype.toString.call(t))throw new Error("Phaser.Point. Parameter 'points' must be an array");var i=t.length;if(1>i)throw new Error("Phaser.Point. Parameter 'points' array must not be empty");if(1===i)return e.copyFrom(t[0]),e;for(var r=0;i>r;r++)n.Point.add(e,t[r],e);return e.divide(i,i),e},PIXI.Point=n.Point,n.Rectangle=function(t,e,n,i){t=t||0,e=e||0,n=n||0,i=i||0,this.x=t,this.y=e,this.width=n,this.height=i},n.Rectangle.prototype={offset:function(t,e){return this.x+=t,this.y+=e,this},offsetPoint:function(t){return this.offset(t.x,t.y)},setTo:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},floor:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y)},floorAll:function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.width=Math.floor(this.width),this.height=Math.floor(this.height)},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},inflate:function(t,e){return n.Rectangle.inflate(this,t,e)},size:function(t){return n.Rectangle.size(this,t)},clone:function(t){return n.Rectangle.clone(this,t)},contains:function(t,e){return n.Rectangle.contains(this,t,e)},containsRect:function(t){return n.Rectangle.containsRect(this,t)},equals:function(t){return n.Rectangle.equals(this,t)},intersection:function(t,e){return n.Rectangle.intersection(this,t,e)},intersects:function(t,e){return n.Rectangle.intersects(this,t,e)},intersectsRaw:function(t,e,i,r,o){return n.Rectangle.intersectsRaw(this,t,e,i,r,o)},union:function(t,e){return n.Rectangle.union(this,t,e)},toString:function(){return"[{Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+" empty="+this.empty+")}]"}},Object.defineProperty(n.Rectangle.prototype,"halfWidth",{get:function(){return Math.round(this.width/2)}}),Object.defineProperty(n.Rectangle.prototype,"halfHeight",{get:function(){return Math.round(this.height/2)}}),Object.defineProperty(n.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<=this.y?0:this.y-t}}),Object.defineProperty(n.Rectangle.prototype,"bottomRight",{get:function(){return new n.Point(this.right,this.bottom)},set:function(t){this.right=t.x,this.bottom=t.y}}),Object.defineProperty(n.Rectangle.prototype,"left",{get:function(){return this.x},set:function(t){this.width=t>=this.right?0:this.right-t,this.x=t}}),Object.defineProperty(n.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<=this.x?0:this.x+t}}),Object.defineProperty(n.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Object.defineProperty(n.Rectangle.prototype,"perimeter",{get:function(){return 2*this.width+2*this.height}}),Object.defineProperty(n.Rectangle.prototype,"centerX",{get:function(){return this.x+this.halfWidth},set:function(t){this.x=t-this.halfWidth}}),Object.defineProperty(n.Rectangle.prototype,"centerY",{get:function(){return this.y+this.halfHeight},set:function(t){this.y=t-this.halfHeight}}),Object.defineProperty(n.Rectangle.prototype,"top",{get:function(){return this.y},set:function(t){t>=this.bottom?(this.height=0,this.y=t):this.height=this.bottom-t}}),Object.defineProperty(n.Rectangle.prototype,"topLeft",{get:function(){return new n.Point(this.x,this.y)},set:function(t){this.x=t.x,this.y=t.y}}),Object.defineProperty(n.Rectangle.prototype,"empty",{get:function(){return!this.width||!this.height},set:function(t){t===!0&&this.setTo(0,0,0,0)}}),n.Rectangle.prototype.constructor=n.Rectangle,n.Rectangle.inflate=function(t,e,n){return t.x-=e,t.width+=2*e,t.y-=n,t.height+=2*n,t},n.Rectangle.inflatePoint=function(t,e){return n.Rectangle.inflate(t,e.x,e.y)},n.Rectangle.size=function(t,e){return"undefined"==typeof e?e=new n.Point(t.width,t.height):e.setTo(t.width,t.height),e},n.Rectangle.clone=function(t,e){return"undefined"==typeof e?e=new n.Rectangle(t.x,t.y,t.width,t.height):e.setTo(t.x,t.y,t.width,t.height),e},n.Rectangle.contains=function(t,e,n){return t.width<=0||t.height<=0?!1:e>=t.x&&e<=t.right&&n>=t.y&&n<=t.bottom},n.Rectangle.containsRaw=function(t,e,n,i,r,o){return r>=t&&t+n>=r&&o>=e&&e+i>=o},n.Rectangle.containsPoint=function(t,e){return n.Rectangle.contains(t,e.x,e.y)},n.Rectangle.containsRect=function(t,e){return t.volume>e.volume?!1:t.x>=e.x&&t.y>=e.y&&t.right<=e.right&&t.bottom<=e.bottom},n.Rectangle.equals=function(t,e){return t.x==e.x&&t.y==e.y&&t.width==e.width&&t.height==e.height},n.Rectangle.intersection=function(t,e,i){return"undefined"==typeof i&&(i=new n.Rectangle),n.Rectangle.intersects(t,e)&&(i.x=Math.max(t.x,e.x),i.y=Math.max(t.y,e.y),i.width=Math.min(t.right,e.right)-i.x,i.height=Math.min(t.bottom,e.bottom)-i.y),i},n.Rectangle.intersects=function(t,e){return t.width<=0||t.height<=0||e.width<=0||e.height<=0?!1:!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)},n.Rectangle.intersectsRaw=function(t,e,n,i,r,o){return"undefined"==typeof o&&(o=0),!(e>t.right+o||n<t.left-o||i>t.bottom+o||r<t.top-o)},n.Rectangle.union=function(t,e,i){return"undefined"==typeof i&&(i=new n.Rectangle),i.setTo(Math.min(t.x,e.x),Math.min(t.y,e.y),Math.max(t.right,e.right)-Math.min(t.left,e.left),Math.max(t.bottom,e.bottom)-Math.min(t.top,e.top))},PIXI.Rectangle=n.Rectangle,PIXI.EmptyRectangle=new n.Rectangle(0,0,0,0),n.Line=function(t,e,i,r){t=t||0,e=e||0,i=i||0,r=r||0,this.start=new n.Point(t,e),this.end=new n.Point(i,r)},n.Line.prototype={setTo:function(t,e,n,i){return this.start.setTo(t,e),this.end.setTo(n,i),this},fromSprite:function(t,e,n){return"undefined"==typeof n&&(n=!1),n?this.setTo(t.center.x,t.center.y,e.center.x,e.center.y):this.setTo(t.x,t.y,e.x,e.y)},intersects:function(t,e,i){return n.Line.intersectsPoints(this.start,this.end,t.start,t.end,e,i)},pointOnLine:function(t,e){return(t-this.start.x)*(this.end.y-this.start.y)===(this.end.x-this.start.x)*(e-this.start.y)},pointOnSegment:function(t,e){var n=Math.min(this.start.x,this.end.x),i=Math.max(this.start.x,this.end.x),r=Math.min(this.start.y,this.end.y),o=Math.max(this.start.y,this.end.y);return this.pointOnLine(t,e)&&t>=n&&i>=t&&e>=r&&o>=e},coordinatesOnLine:function(t,e){"undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=[]);var n=Math.round(this.start.x),i=Math.round(this.start.y),r=Math.round(this.end.x),o=Math.round(this.end.y),a=Math.abs(r-n),s=Math.abs(o-i),l=r>n?1:-1,u=o>i?1:-1,h=a-s;e.push([n,i]);for(var c=1;n!=r||i!=o;){var d=h<<1;d>-s&&(h-=s,n+=l),a>d&&(h+=a,i+=u),c%t===0&&e.push([n,i]),c++}return e}},Object.defineProperty(n.Line.prototype,"length",{get:function(){return Math.sqrt((this.end.x-this.start.x)*(this.end.x-this.start.x)+(this.end.y-this.start.y)*(this.end.y-this.start.y))}}),Object.defineProperty(n.Line.prototype,"angle",{get:function(){return Math.atan2(this.end.y-this.start.y,this.end.x-this.start.x)}}),Object.defineProperty(n.Line.prototype,"slope",{get:function(){return(this.end.y-this.start.y)/(this.end.x-this.start.x)}}),Object.defineProperty(n.Line.prototype,"perpSlope",{get:function(){return-((this.end.x-this.start.x)/(this.end.y-this.start.y))}}),Object.defineProperty(n.Line.prototype,"x",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(n.Line.prototype,"y",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(n.Line.prototype,"left",{get:function(){return Math.min(this.start.x,this.end.x)}}),Object.defineProperty(n.Line.prototype,"right",{get:function(){return Math.max(this.start.x,this.end.x)}}),Object.defineProperty(n.Line.prototype,"top",{get:function(){return Math.min(this.start.y,this.end.y)}}),Object.defineProperty(n.Line.prototype,"bottom",{get:function(){return Math.max(this.start.y,this.end.y)}}),Object.defineProperty(n.Line.prototype,"width",{get:function(){return Math.abs(this.start.x-this.end.x)}}),Object.defineProperty(n.Line.prototype,"height",{get:function(){return Math.abs(this.start.y-this.end.y)}}),n.Line.intersectsPoints=function(t,e,i,r,o,a){"undefined"==typeof o&&(o=!0),"undefined"==typeof a&&(a=new n.Point);var s=e.y-t.y,l=r.y-i.y,u=t.x-e.x,h=i.x-r.x,c=e.x*t.y-t.x*e.y,d=r.x*i.y-i.x*r.y,p=s*h-l*u;return 0===p?null:(a.x=(u*d-h*c)/p,a.y=(l*c-s*d)/p,o&&(a.x<Math.min(t.x,e.x)||a.x>Math.max(t.x,e.x)||a.y<Math.min(t.y,e.y)||a.y>Math.max(t.y,e.y)||a.x<Math.min(i.x,r.x)||a.x>Math.max(i.x,r.x)||a.y<Math.min(i.y,r.y)||a.y>Math.max(i.y,r.y))?null:a)},n.Line.intersects=function(t,e,i,r){return n.Line.intersectsPoints(t.start,t.end,e.start,e.end,i,r)},n.Ellipse=function(t,e,i,r){this.type=n.ELLIPSE,t=t||0,e=e||0,i=i||0,r=r||0,this.x=t,this.y=e,this.width=i,this.height=r},n.Ellipse.prototype={setTo:function(t,e,n,i){return this.x=t,this.y=e,this.width=n,this.height=i,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.width,t.height)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t},clone:function(t){return"undefined"==typeof t?t=new n.Ellipse(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t},contains:function(t,e){return n.Ellipse.contains(this,t,e)},toString:function(){return"[{Phaser.Ellipse (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")}]"}},n.Ellipse.prototype.constructor=n.Ellipse,Object.defineProperty(n.Ellipse.prototype,"left",{get:function(){return this.x},set:function(t){this.x=t}}),Object.defineProperty(n.Ellipse.prototype,"right",{get:function(){return this.x+this.width},set:function(t){this.width=t<this.x?0:this.x+t}}),Object.defineProperty(n.Ellipse.prototype,"top",{get:function(){return this.y},set:function(t){this.y=t}}),Object.defineProperty(n.Ellipse.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){this.height=t<this.y?0:this.y+t}}),Object.defineProperty(n.Ellipse.prototype,"empty",{get:function(){return 0===this.width||0===this.height},set:function(t){t===!0&&this.setTo(0,0,0,0)}}),n.Ellipse.contains=function(t,e,n){if(t.width<=0||t.height<=0)return!1;var i=(e-t.x)/t.width-.5,r=(n-t.y)/t.height-.5;return i*=i,r*=r,.25>i+r},n.Ellipse.prototype.getBounds=function(){return new n.Rectangle(this.x,this.y,this.width,this.height)},PIXI.Ellipse=n.Ellipse,n.Polygon=function(t){if(this.type=n.POLYGON,t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,r=t.length;r>i;i+=2)e.push(new n.Point(t[i],t[i+1]));t=e}this._points=t},n.Polygon.prototype={clone:function(){for(var t=[],e=0;e<this.points.length;e++)t.push(this.points[e].clone());return new n.Polygon(t)},contains:function(t,e){for(var n=!1,i=0,r=this.points.length-1;i<this.points.length;r=i++){var o=this.points[i].x,a=this.points[i].y,s=this.points[r].x,l=this.points[r].y,u=a>e!=l>e&&(s-o)*(e-a)/(l-a)+o>t;u&&(n=!n)}return n}},n.Polygon.prototype.constructor=n.Polygon,Object.defineProperty(n.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){if(t instanceof Array||(t=Array.prototype.slice.call(arguments)),"number"==typeof t[0]){for(var e=[],i=0,r=t.length;r>i;i+=2)e.push(new n.Point(t[i],t[i+1]));t=e}this._points=t}}),Object.defineProperty(n.Polygon.prototype,"area",{get:function(){var t,e,n,i,r,o=Number.MAX_VALUE,a=0;for(r=0;r<this.points.length;r++)this.points[r].y<o&&(o=this.points[r].y);for(r=0;r<this.points.length;r++)t=this.points[r],e=r===this.points.length-1?this.points[0]:this.points[r+1],n=(t.y-o+(e.y-o))/2,i=t.x-e.x,a+=n*i;return a}}),PIXI.Polygon=n.Polygon,n.Camera=function(t,e,i,r,o,a){this.game=t,this.world=t.world,this.id=0,this.view=new n.Rectangle(i,r,o,a),this.screenView=new n.Rectangle(i,r,o,a),this.bounds=new n.Rectangle(i,r,o,a),this.deadzone=null,this.visible=!0,this.atLimit={x:!1,y:!1},this.target=null,this._edge=0,this.displayObject=null,this.scale=null},n.Camera.FOLLOW_LOCKON=0,n.Camera.FOLLOW_PLATFORMER=1,n.Camera.FOLLOW_TOPDOWN=2,n.Camera.FOLLOW_TOPDOWN_TIGHT=3,n.Camera.prototype={follow:function(t,e){"undefined"==typeof e&&(e=n.Camera.FOLLOW_LOCKON),this.target=t;var i;switch(e){case n.Camera.FOLLOW_PLATFORMER:var r=this.width/8,o=this.height/3;this.deadzone=new n.Rectangle((this.width-r)/2,(this.height-o)/2-.25*o,r,o);break;case n.Camera.FOLLOW_TOPDOWN:i=Math.max(this.width,this.height)/4,this.deadzone=new n.Rectangle((this.width-i)/2,(this.height-i)/2,i,i);break;case n.Camera.FOLLOW_TOPDOWN_TIGHT:i=Math.max(this.width,this.height)/8,this.deadzone=new n.Rectangle((this.width-i)/2,(this.height-i)/2,i,i);break;case n.Camera.FOLLOW_LOCKON:this.deadzone=null;break;default:this.deadzone=null}},unfollow:function(){this.target=null},focusOn:function(t){this.setPosition(Math.round(t.x-this.view.halfWidth),Math.round(t.y-this.view.halfHeight))},focusOnXY:function(t,e){this.setPosition(Math.round(t-this.view.halfWidth),Math.round(e-this.view.halfHeight))},update:function(){this.target&&this.updateTarget(),this.bounds&&this.checkBounds(),this.displayObject.position.x=-this.view.x,this.displayObject.position.y=-this.view.y},updateTarget:function(){this.deadzone?(this._edge=this.target.x-this.deadzone.x,this.view.x>this._edge&&(this.view.x=this._edge),this._edge=this.target.x+this.target.width-this.deadzone.x-this.deadzone.width,this.view.x<this._edge&&(this.view.x=this._edge),this._edge=this.target.y-this.deadzone.y,this.view.y>this._edge&&(this.view.y=this._edge),this._edge=this.target.y+this.target.height-this.deadzone.y-this.deadzone.height,this.view.y<this._edge&&(this.view.y=this._edge)):this.focusOnXY(this.target.x,this.target.y)},setBoundsToWorld:function(){this.bounds.setTo(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height)},checkBounds:function(){this.atLimit.x=!1,this.atLimit.y=!1,this.view.x<=this.bounds.x&&(this.atLimit.x=!0,this.view.x=this.bounds.x),this.view.right>=this.bounds.right&&(this.atLimit.x=!0,this.view.x=this.bounds.right-this.width),this.view.y<=this.bounds.top&&(this.atLimit.y=!0,this.view.y=this.bounds.top),this.view.bottom>=this.bounds.bottom&&(this.atLimit.y=!0,this.view.y=this.bounds.bottom-this.height),this.view.floor()},setPosition:function(t,e){this.view.x=t,this.view.y=e,this.bounds&&this.checkBounds()},setSize:function(t,e){this.view.width=t,this.view.height=e},reset:function(){this.target=null,this.view.x=0,this.view.y=0}},n.Camera.prototype.constructor=n.Camera,Object.defineProperty(n.Camera.prototype,"x",{get:function(){return this.view.x},set:function(t){this.view.x=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(n.Camera.prototype,"y",{get:function(){return this.view.y},set:function(t){this.view.y=t,this.bounds&&this.checkBounds()}}),Object.defineProperty(n.Camera.prototype,"width",{get:function(){return this.view.width},set:function(t){this.view.width=t}}),Object.defineProperty(n.Camera.prototype,"height",{get:function(){return this.view.height},set:function(t){this.view.height=t}}),n.State=function(){this.game=null,this.add=null,this.make=null,this.camera=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.sound=null,this.scale=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.particles=null,this.physics=null,this.rnd=null},n.State.prototype={preload:function(){},loadUpdate:function(){},loadRender:function(){},create:function(){},update:function(){},render:function(){},paused:function(){},pauseUpdate:function(){},shutdown:function(){}},n.State.prototype.constructor=n.State,n.StateManager=function(t,e){this.game=t,this.states={},this._pendingState=null,"undefined"!=typeof e&&null!==e&&(this._pendingState=e),this._clearWorld=!1,this._clearCache=!1,this._created=!1,this._args=[],this.current="",this.onInitCallback=null,this.onPreloadCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPreRenderCallback=null,this.onLoadUpdateCallback=null,this.onLoadRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.onShutDownCallback=null},n.StateManager.prototype={boot:function(){this.game.onPause.add(this.pause,this),this.game.onResume.add(this.resume,this),this.game.load.onLoadComplete.add(this.loadComplete,this),null!==this._pendingState&&("string"==typeof this._pendingState?this.start(this._pendingState,!1,!1):this.add("default",this._pendingState,!0))},add:function(t,e,i){"undefined"==typeof i&&(i=!1);var r;return e instanceof n.State?r=e:"object"==typeof e?(r=e,r.game=this.game):"function"==typeof e&&(r=new e(this.game)),this.states[t]=r,i&&(this.game.isBooted?this.start(t):this._pendingState=t),r},remove:function(t){this.current===t&&(this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null),delete this.states[t]
},start:function(t,e,n){"undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=!1),this.checkState(t)&&(this._pendingState=t,this._clearWorld=e,this._clearCache=n,arguments.length>3&&(this._args=Array.prototype.splice.call(arguments,3)))},restart:function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!1),this._pendingState=this.current,this._clearWorld=t,this._clearCache=e,arguments.length>2&&(this._args=Array.prototype.splice.call(arguments,2))},dummy:function(){},preUpdate:function(){this._pendingState&&this.game.isBooted&&(this.current&&(this.onShutDownCallback.call(this.callbackContext,this.game),this.game.tweens.removeAll(),this.game.camera.reset(),this.game.input.reset(!0),this.game.physics.clear(),this.game.time.removeAll(),this._clearWorld&&(this.game.world.shutdown(),this._clearCache===!0&&this.game.cache.destroy())),this.setCurrentState(this._pendingState),this.onPreloadCallback?(this.game.load.reset(),this.onPreloadCallback.call(this.callbackContext,this.game),0===this.game.load.totalQueuedFiles()?this.loadComplete():this.game.load.start()):this.loadComplete(),this.current===this._pendingState&&(this._pendingState=null))},checkState:function(t){if(this.states[t]){var e=!1;return this.states[t].preload&&(e=!0),this.states[t].create&&(e=!0),this.states[t].update&&(e=!0),this.states[t].render&&(e=!0),e===!1?(console.warn("Invalid Phaser State object given. Must contain at least a one of the required functions: preload, create, update or render"),!1):!0}return console.warn("Phaser.StateManager - No state found with the key: "+t),!1},link:function(t){this.states[t].game=this.game,this.states[t].add=this.game.add,this.states[t].make=this.game.make,this.states[t].camera=this.game.camera,this.states[t].cache=this.game.cache,this.states[t].input=this.game.input,this.states[t].load=this.game.load,this.states[t].math=this.game.math,this.states[t].sound=this.game.sound,this.states[t].scale=this.game.scale,this.states[t].state=this,this.states[t].stage=this.game.stage,this.states[t].time=this.game.time,this.states[t].tweens=this.game.tweens,this.states[t].world=this.game.world,this.states[t].particles=this.game.particles,this.states[t].rnd=this.game.rnd,this.states[t].physics=this.game.physics},setCurrentState:function(t){this.callbackContext=this.states[t],this.link(t),this.onInitCallback=this.states[t].init||this.dummy,this.onPreloadCallback=this.states[t].preload||null,this.onLoadRenderCallback=this.states[t].loadRender||null,this.onLoadUpdateCallback=this.states[t].loadUpdate||null,this.onCreateCallback=this.states[t].create||null,this.onUpdateCallback=this.states[t].update||null,this.onPreRenderCallback=this.states[t].preRender||null,this.onRenderCallback=this.states[t].render||null,this.onPausedCallback=this.states[t].paused||null,this.onResumedCallback=this.states[t].resumed||null,this.onPauseUpdateCallback=this.states[t].pauseUpdate||null,this.onShutDownCallback=this.states[t].shutdown||this.dummy,this.current=t,this._created=!1,this.onInitCallback.apply(this.callbackContext,this._args),this._args=[]},getCurrentState:function(){return this.states[this.current]},loadComplete:function(){this._created===!1&&this.onCreateCallback?(this._created=!0,this.onCreateCallback.call(this.callbackContext,this.game)):this._created=!0},pause:function(){this._created&&this.onPausedCallback&&this.onPausedCallback.call(this.callbackContext,this.game)},resume:function(){this._created&&this.onResumedCallback&&this.onResumedCallback.call(this.callbackContext,this.game)},update:function(){this._created&&this.onUpdateCallback?this.onUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},pauseUpdate:function(){this._created&&this.onPauseUpdateCallback?this.onPauseUpdateCallback.call(this.callbackContext,this.game):this.onLoadUpdateCallback&&this.onLoadUpdateCallback.call(this.callbackContext,this.game)},preRender:function(){this.onPreRenderCallback&&this.onPreRenderCallback.call(this.callbackContext,this.game)},render:function(){this._created&&this.onRenderCallback?(this.game.renderType===n.CANVAS&&(this.game.context.save(),this.game.context.setTransform(1,0,0,1,0,0)),this.onRenderCallback.call(this.callbackContext,this.game),this.game.renderType===n.CANVAS&&this.game.context.restore()):this.onLoadRenderCallback&&this.onLoadRenderCallback.call(this.callbackContext,this.game)},destroy:function(){this.callbackContext=null,this.onInitCallback=null,this.onShutDownCallback=null,this.onPreloadCallback=null,this.onLoadRenderCallback=null,this.onLoadUpdateCallback=null,this.onCreateCallback=null,this.onUpdateCallback=null,this.onRenderCallback=null,this.onPausedCallback=null,this.onResumedCallback=null,this.onPauseUpdateCallback=null,this.game=null,this.states={},this._pendingState=null}},n.StateManager.prototype.constructor=n.StateManager,n.LinkedList=function(){this.next=null,this.prev=null,this.first=null,this.last=null,this.total=0},n.LinkedList.prototype={add:function(t){return 0===this.total&&null===this.first&&null===this.last?(this.first=t,this.last=t,this.next=t,t.prev=this,this.total++,t):(this.last.next=t,t.prev=this.last,this.last=t,this.total++,t)},reset:function(){this.first=null,this.last=null,this.next=null,this.prev=null,this.total=0},remove:function(t){return 1===this.total?(this.reset(),void(t.next=t.prev=null)):(t===this.first?this.first=this.first.next:t===this.last&&(this.last=this.last.prev),t.prev&&(t.prev.next=t.next),t.next&&(t.next.prev=t.prev),t.next=t.prev=null,null===this.first&&(this.last=null),void this.total--)},callAll:function(t){if(this.first&&this.last){var e=this.first;do e&&e[t]&&e[t].call(e),e=e.next;while(e!=this.last.next)}}},n.LinkedList.prototype.constructor=n.LinkedList,n.ArrayList=function(){this.total=0,this.position=0,this.list=[]},n.ArrayList.prototype={add:function(t){return this.exists(t)||(this.list.push(t),this.total++),t},getIndex:function(t){return this.list.indexOf(t)},exists:function(t){return this.list.indexOf(t)>-1},reset:function(){this.list.length=0,this.total=0},remove:function(t){var e=this.list.indexOf(t);return e>-1?(this.list.splice(e,1),this.total--,t):void 0},callAll:function(t){for(var e=Array.prototype.splice.call(arguments,1),n=this.list.length;n--;)this.list[n]&&this.list[n][t]&&this.list[n][t].apply(this.list[n],e)}},Object.defineProperty(n.ArrayList.prototype,"first",{get:function(){return this.position=0,this.total>0?this.list[0]:null}}),Object.defineProperty(n.ArrayList.prototype,"next",{get:function(){return this.position<this.total?(this.position++,this.list[this.position]):null}}),n.ArrayList.prototype.constructor=n.ArrayList,n.Signal=function(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){n.Signal.prototype.dispatch.apply(t,arguments)}},n.Signal.prototype={memorize:!1,_shouldPropagate:!0,active:!0,validateListener:function(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))},_registerListener:function(t,e,i,r){var o,a=this._indexOfListener(t,i);if(-1!==a){if(o=this._bindings[a],o.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else o=new n.SignalBinding(this,t,e,i,r),this._addBinding(o);return this.memorize&&this._prevParams&&o.execute(this._prevParams),o},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return this.validateListener(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return this.validateListener(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){this.validateListener(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(){if(this.active){var t,e=Array.prototype.slice.call(arguments),n=this._bindings.length;if(this.memorize&&(this._prevParams=e),n){t=this._bindings.slice(),this._shouldPropagate=!0;do n--;while(t[n]&&this._shouldPropagate&&t[n].execute(e)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Phaser.Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}},n.Signal.prototype.constructor=n.Signal,n.SignalBinding=function(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0},n.SignalBinding.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[Phaser.SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},n.SignalBinding.prototype.constructor=n.SignalBinding,n.Filter=function(t,e,i){this.game=t,this.type=n.WEBGL_FILTER,this.passes=[this],this.shaders=[],this.dirty=!0,this.padding=0,this.uniforms={time:{type:"1f",value:0},resolution:{type:"2f",value:{x:256,y:256}},mouse:{type:"2f",value:{x:0,y:0}}},this.fragmentSrc=i||[]},n.Filter.prototype={init:function(){},setResolution:function(t,e){this.uniforms.resolution.value.x=t,this.uniforms.resolution.value.y=e},update:function(t){"undefined"!=typeof t&&(t.x>0&&(this.uniforms.mouse.x=t.x.toFixed(2)),t.y>0&&(this.uniforms.mouse.y=t.y.toFixed(2))),this.uniforms.time.value=this.game.time.totalElapsedSeconds()},destroy:function(){this.game=null}},n.Filter.prototype.constructor=n.Filter,Object.defineProperty(n.Filter.prototype,"width",{get:function(){return this.uniforms.resolution.value.x},set:function(t){this.uniforms.resolution.value.x=t}}),Object.defineProperty(n.Filter.prototype,"height",{get:function(){return this.uniforms.resolution.value.y},set:function(t){this.uniforms.resolution.value.y=t}}),n.Plugin=function(t,e){"undefined"==typeof e&&(e=null),this.game=t,this.parent=e,this.active=!1,this.visible=!1,this.hasPreUpdate=!1,this.hasUpdate=!1,this.hasPostUpdate=!1,this.hasRender=!1,this.hasPostRender=!1},n.Plugin.prototype={preUpdate:function(){},update:function(){},render:function(){},postRender:function(){},destroy:function(){this.game=null,this.parent=null,this.active=!1,this.visible=!1}},n.Plugin.prototype.constructor=n.Plugin,n.PluginManager=function(t){this.game=t,this.plugins=[],this._len=0,this._i=0},n.PluginManager.prototype={add:function(t){var e=Array.prototype.splice.call(arguments,1),n=!1;return"function"==typeof t?t=new t(this.game,this):(t.game=this.game,t.parent=this),"function"==typeof t.preUpdate&&(t.hasPreUpdate=!0,n=!0),"function"==typeof t.update&&(t.hasUpdate=!0,n=!0),"function"==typeof t.postUpdate&&(t.hasPostUpdate=!0,n=!0),"function"==typeof t.render&&(t.hasRender=!0,n=!0),"function"==typeof t.postRender&&(t.hasPostRender=!0,n=!0),n?((t.hasPreUpdate||t.hasUpdate||t.hasPostUpdate)&&(t.active=!0),(t.hasRender||t.hasPostRender)&&(t.visible=!0),this._len=this.plugins.push(t),"function"==typeof t.init&&t.init.apply(t,e),t):null},remove:function(t){for(this._i=this._len;this._i--;)if(this.plugins[this._i]===t)return t.destroy(),this.plugins.splice(this._i,1),void this._len--},removeAll:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].destroy();this.plugins.length=0,this._len=0},preUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPreUpdate&&this.plugins[this._i].preUpdate()},update:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasUpdate&&this.plugins[this._i].update()},postUpdate:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].active&&this.plugins[this._i].hasPostUpdate&&this.plugins[this._i].postUpdate()},render:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasRender&&this.plugins[this._i].render()},postRender:function(){for(this._i=this._len;this._i--;)this.plugins[this._i].visible&&this.plugins[this._i].hasPostRender&&this.plugins[this._i].postRender()},destroy:function(){this.removeAll(),this.game=null}},n.PluginManager.prototype.constructor=n.PluginManager,n.Stage=function(t,e,i){this.game=t,this.offset=new n.Point,this.bounds=new n.Rectangle(0,0,e,i),PIXI.Stage.call(this,0,!1),this.name="_stage_root",this.interactive=!1,this.disableVisibilityChange=!1,this.checkOffsetInterval=2500,this.exists=!0,this.currentRenderOrderID=0,this._hiddenVar="hidden",this._nextOffsetCheck=0,this._backgroundColor=0,t.config?this.parseConfig(t.config):(this.game.canvas=n.Canvas.create(e,i),this.game.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%")},n.Stage.prototype=Object.create(PIXI.Stage.prototype),n.Stage.prototype.constructor=n.Stage,n.Stage.prototype.preUpdate=function(){this.currentRenderOrderID=0;for(var t=this.children.length,e=0;t>e;e++)this.children[e].preUpdate()},n.Stage.prototype.update=function(){for(var t=this.children.length;t--;)this.children[t].update()},n.Stage.prototype.postUpdate=function(){if(this.game.world.camera.target){this.game.world.camera.target.postUpdate(),this.game.world.camera.update();for(var t=this.children.length;t--;)this.children[t]!==this.game.world.camera.target&&this.children[t].postUpdate()}else{this.game.world.camera.update();for(var t=this.children.length;t--;)this.children[t].postUpdate()}this.checkOffsetInterval!==!1&&this.game.time.now>this._nextOffsetCheck&&(n.Canvas.getOffset(this.game.canvas,this.offset),this.bounds.x=this.offset.x,this.bounds.y=this.offset.y,this._nextOffsetCheck=this.game.time.now+this.checkOffsetInterval)},n.Stage.prototype.parseConfig=function(t){this.game.canvas=t.canvasID?n.Canvas.create(this.game.width,this.game.height,t.canvasID):n.Canvas.create(this.game.width,this.game.height),t.canvasStyle?this.game.canvas.stlye=t.canvasStyle:this.game.canvas.style["-webkit-full-screen"]="width: 100%; height: 100%",t.checkOffsetInterval&&(this.checkOffsetInterval=t.checkOffsetInterval),t.disableVisibilityChange&&(this.disableVisibilityChange=t.disableVisibilityChange),t.fullScreenScaleMode&&(this.fullScreenScaleMode=t.fullScreenScaleMode),t.scaleMode&&(this.scaleMode=t.scaleMode),t.backgroundColor&&(this.backgroundColor=t.backgroundColor)},n.Stage.prototype.boot=function(){n.Canvas.getOffset(this.game.canvas,this.offset),this.bounds.setTo(this.offset.x,this.offset.y,this.game.width,this.game.height);var t=this;this._onChange=function(e){return t.visibilityChange(e)},n.Canvas.setUserSelect(this.game.canvas,"none"),n.Canvas.setTouchAction(this.game.canvas,"none"),this.checkVisibility()},n.Stage.prototype.checkVisibility=function(){this._hiddenVar=void 0!==document.webkitHidden?"webkitvisibilitychange":void 0!==document.mozHidden?"mozvisibilitychange":void 0!==document.msHidden?"msvisibilitychange":void 0!==document.hidden?"visibilitychange":null,this._hiddenVar&&document.addEventListener(this._hiddenVar,this._onChange,!1),window.onpagehide=this._onChange,window.onpageshow=this._onChange,window.onblur=this._onChange,window.onfocus=this._onChange},n.Stage.prototype.visibilityChange=function(t){return this.disableVisibilityChange?void 0:"pagehide"===t.type||"blur"===t.type||"pageshow"===t.type||"focus"===t.type?void("pagehide"===t.type||"blur"===t.type?this.game.focusLoss(t):("pageshow"===t.type||"focus"===t.type)&&this.game.focusGain(t)):void(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden?this.game.gamePaused(t):this.game.gameResumed(t))},n.Stage.prototype.setBackgroundColor=function(t){if("string"==typeof t){var e=n.Color.hexToColor(t);this._backgroundColor=n.Color.getColor(e.r,e.g,e.b)}else{var e=n.Color.getRGB(t);this._backgroundColor=t}this.backgroundColorSplit=[e.r/255,e.g/255,e.b/255],this.backgroundColorString=n.Color.RGBtoString(e.r,e.g,e.b,255,"#")},Object.defineProperty(n.Stage.prototype,"backgroundColor",{get:function(){return this._backgroundColor},set:function(t){this.game.transparent||this.setBackgroundColor(t)}}),Object.defineProperty(n.Stage.prototype,"smoothed",{get:function(){return!PIXI.scaleModes.LINEAR},set:function(t){PIXI.scaleModes.LINEAR=t?0:1}}),n.Group=function(t,e,i,r,o,a){"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=!1),"undefined"==typeof a&&(a=n.Physics.ARCADE),this.game=t,"undefined"==typeof e&&(e=t.world),this.name=i||"group",PIXI.DisplayObjectContainer.call(this),r?this.game.stage.addChild(this):e&&e.addChild(this),this.z=0,this.type=n.GROUP,this.alive=!0,this.exists=!0,this.classType=n.Sprite,this.scale=new n.Point(1,1),this.cursor=null,this.cameraOffset=new n.Point,this.enableBody=o,this.enableBodyDebug=!1,this.physicsBodyType=a,this._sortProperty="z",this._cache=[0,0,0,0,1,0,1,0,0,0]},n.Group.prototype=Object.create(PIXI.DisplayObjectContainer.prototype),n.Group.prototype.constructor=n.Group,n.Group.RETURN_NONE=0,n.Group.RETURN_TOTAL=1,n.Group.RETURN_CHILD=2,n.Group.SORT_ASCENDING=-1,n.Group.SORT_DESCENDING=1,n.Group.prototype.add=function(t){return t.parent!==this&&(this.enableBody&&this.game.physics.enable(t,this.physicsBodyType),this.addChild(t),t.z=this.children.length,t.events&&t.events.onAddedToGroup.dispatch(t,this),null===this.cursor&&(this.cursor=t)),t},n.Group.prototype.addAt=function(t,e){return t.parent!==this&&(this.enableBody&&this.game.physics.enable(t,this.physicsBodyType),this.addChildAt(t,e),this.updateZ(),t.events&&t.events.onAddedToGroup.dispatch(t,this),null===this.cursor&&(this.cursor=t)),t},n.Group.prototype.getAt=function(t){return 0>t||t>=this.children.length?-1:this.getChildAt(t)},n.Group.prototype.create=function(t,e,n,i,r){"undefined"==typeof r&&(r=!0);var o=new this.classType(this.game,t,e,n,i);return this.enableBody&&this.game.physics.enable(o,this.physicsBodyType),o.exists=r,o.visible=r,o.alive=r,this.addChild(o),o.z=this.children.length,o.events&&o.events.onAddedToGroup.dispatch(o,this),null===this.cursor&&(this.cursor=o),o},n.Group.prototype.createMultiple=function(t,e,n,i){"undefined"==typeof i&&(i=!1);for(var r=0;t>r;r++)this.create(0,0,e,n,i)},n.Group.prototype.updateZ=function(){for(var t=this.children.length;t--;)this.children[t].z=t},n.Group.prototype.resetCursor=function(t){return"undefined"==typeof t&&(t=0),t>this.children.length-1&&(t=0),this.cursor?(this._cache[8]=t,this.cursor=this.children[this._cache[8]],this.cursor):void 0},n.Group.prototype.next=function(){return this.cursor?(this._cache[8]>=this.children.length-1?this._cache[8]=0:this._cache[8]++,this.cursor=this.children[this._cache[8]],this.cursor):void 0},n.Group.prototype.previous=function(){return this.cursor?(0===this._cache[8]?this._cache[8]=this.children.length-1:this._cache[8]--,this.cursor=this.children[this._cache[8]],this.cursor):void 0},n.Group.prototype.swap=function(t,e){var n=this.swapChildren(t,e);return n&&this.updateZ(),n},n.Group.prototype.bringToTop=function(t){return t.parent===this&&this.getIndex(t)<this.children.length&&(this.remove(t),this.add(t)),t},n.Group.prototype.sendToBack=function(t){return t.parent===this&&this.getIndex(t)>0&&(this.remove(t),this.addAt(t,0)),t},n.Group.prototype.moveUp=function(t){if(t.parent===this&&this.getIndex(t)<this.children.length-1){var e=this.getIndex(t),n=this.getAt(e+1);n&&this.swap(t,n)}return t},n.Group.prototype.moveDown=function(t){if(t.parent===this&&this.getIndex(t)>0){var e=this.getIndex(t),n=this.getAt(e-1);n&&this.swap(t,n)}return t},n.Group.prototype.xy=function(t,e,n){return 0>t||t>this.children.length?-1:(this.getChildAt(t).x=e,void(this.getChildAt(t).y=n))},n.Group.prototype.reverse=function(){this.children.reverse(),this.updateZ()},n.Group.prototype.getIndex=function(t){return this.children.indexOf(t)},n.Group.prototype.replace=function(t,e){var i=this.getIndex(t);if(-1!==i){void 0!==e.parent&&(e.events.onRemovedFromGroup.dispatch(e,this),e.parent.removeChild(e),e.parent instanceof n.Group&&e.parent.updateZ());var r=t;return this.remove(r),this.addAt(e,i),r}},n.Group.prototype.hasProperty=function(t,e){var n=e.length;return 1===n&&e[0]in t?!0:2===n&&e[0]in t&&e[1]in t[e[0]]?!0:3===n&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]?!0:4===n&&e[0]in t&&e[1]in t[e[0]]&&e[2]in t[e[0]][e[1]]&&e[3]in t[e[0]][e[1]][e[2]]?!0:!1},n.Group.prototype.setProperty=function(t,e,n,i,r){if("undefined"==typeof r&&(r=!1),i=i||0,!this.hasProperty(t,e)&&(!r||i>0))return!1;var o=e.length;return 1===o?0===i?t[e[0]]=n:1==i?t[e[0]]+=n:2==i?t[e[0]]-=n:3==i?t[e[0]]*=n:4==i&&(t[e[0]]/=n):2===o?0===i?t[e[0]][e[1]]=n:1==i?t[e[0]][e[1]]+=n:2==i?t[e[0]][e[1]]-=n:3==i?t[e[0]][e[1]]*=n:4==i&&(t[e[0]][e[1]]/=n):3===o?0===i?t[e[0]][e[1]][e[2]]=n:1==i?t[e[0]][e[1]][e[2]]+=n:2==i?t[e[0]][e[1]][e[2]]-=n:3==i?t[e[0]][e[1]][e[2]]*=n:4==i&&(t[e[0]][e[1]][e[2]]/=n):4===o&&(0===i?t[e[0]][e[1]][e[2]][e[3]]=n:1==i?t[e[0]][e[1]][e[2]][e[3]]+=n:2==i?t[e[0]][e[1]][e[2]][e[3]]-=n:3==i?t[e[0]][e[1]][e[2]][e[3]]*=n:4==i&&(t[e[0]][e[1]][e[2]][e[3]]/=n)),!0},n.Group.prototype.set=function(t,e,n,i,r,o,a){return"undefined"==typeof a&&(a=!1),e=e.split("."),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=!1),(i===!1||i&&t.alive)&&(r===!1||r&&t.visible)?this.setProperty(t,e,n,o,a):void 0},n.Group.prototype.setAll=function(t,e,n,i,r,o){"undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof o&&(o=!1),t=t.split("."),r=r||0;for(var a=0,s=this.children.length;s>a;a++)(!n||n&&this.children[a].alive)&&(!i||i&&this.children[a].visible)&&this.setProperty(this.children[a],t,e,r,o)},n.Group.prototype.setAllChildren=function(t,e,i,r,o,a){"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=!1),"undefined"==typeof a&&(a=!1),o=o||0;for(var s=0,l=this.children.length;l>s;s++)(!i||i&&this.children[s].alive)&&(!r||r&&this.children[s].visible)&&(this.children[s]instanceof n.Group?this.children[s].setAllChildren(t,e,i,r,o,a):this.setProperty(this.children[s],t.split("."),e,o,a))},n.Group.prototype.addAll=function(t,e,n,i){this.setAll(t,e,n,i,1)},n.Group.prototype.subAll=function(t,e,n,i){this.setAll(t,e,n,i,2)},n.Group.prototype.multiplyAll=function(t,e,n,i){this.setAll(t,e,n,i,3)},n.Group.prototype.divideAll=function(t,e,n,i){this.setAll(t,e,n,i,4)},n.Group.prototype.callAllExists=function(t,e){for(var n=Array.prototype.splice.call(arguments,2),i=0,r=this.children.length;r>i;i++)this.children[i].exists===e&&this.children[i][t]&&this.children[i][t].apply(this.children[i],n)},n.Group.prototype.callbackFromArray=function(t,e,n){if(1==n){if(t[e[0]])return t[e[0]]}else if(2==n){if(t[e[0]][e[1]])return t[e[0]][e[1]]}else if(3==n){if(t[e[0]][e[1]][e[2]])return t[e[0]][e[1]][e[2]]}else if(4==n){if(t[e[0]][e[1]][e[2]][e[3]])return t[e[0]][e[1]][e[2]][e[3]]}else if(t[e])return t[e];return!1},n.Group.prototype.callAll=function(t,e){if("undefined"!=typeof t){t=t.split(".");var n=t.length;if("undefined"==typeof e||null===e||""===e)e=null;else if("string"==typeof e){e=e.split(".");var i=e.length}for(var r=Array.prototype.splice.call(arguments,2),o=null,a=null,s=0,l=this.children.length;l>s;s++)o=this.callbackFromArray(this.children[s],t,n),e&&o?(a=this.callbackFromArray(this.children[s],e,i),o&&o.apply(a,r)):o&&o.apply(this.children[s],r)}},n.Group.prototype.preUpdate=function(){if(!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;for(var t=this.children.length;t--;)this.children[t].preUpdate();return!0},n.Group.prototype.update=function(){for(var t=this.children.length;t--;)this.children[t].update()},n.Group.prototype.postUpdate=function(){1===this._cache[7]&&(this.x=this.game.camera.view.x+this.cameraOffset.x,this.y=this.game.camera.view.y+this.cameraOffset.y);for(var t=this.children.length;t--;)this.children[t].postUpdate()},n.Group.prototype.forEach=function(t,e,n){"undefined"==typeof n&&(n=!1);var i=Array.prototype.splice.call(arguments,3);i.unshift(null);for(var r=0,o=this.children.length;o>r;r++)(!n||n&&this.children[r].exists)&&(i[0]=this.children[r],t.apply(e,i))},n.Group.prototype.forEachExists=function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("exists",!0,n.Group.RETURN_TOTAL,t,e,i)},n.Group.prototype.forEachAlive=function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("alive",!0,n.Group.RETURN_TOTAL,t,e,i)},n.Group.prototype.forEachDead=function(t,e){var i=Array.prototype.splice.call(arguments,2);i.unshift(null),this.iterate("alive",!1,n.Group.RETURN_TOTAL,t,e,i)},n.Group.prototype.sort=function(t,e){this.children.length<2||("undefined"==typeof t&&(t="z"),"undefined"==typeof e&&(e=n.Group.SORT_ASCENDING),this._sortProperty=t,this.children.sort(e===n.Group.SORT_ASCENDING?this.ascendingSortHandler.bind(this):this.descendingSortHandler.bind(this)),this.updateZ())},n.Group.prototype.customSort=function(t,e){this.children.length<2||(this.children.sort(t.bind(e)),this.updateZ())},n.Group.prototype.ascendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?-1:t[this._sortProperty]>e[this._sortProperty]?1:t.z<e.z?-1:1},n.Group.prototype.descendingSortHandler=function(t,e){return t[this._sortProperty]<e[this._sortProperty]?1:t[this._sortProperty]>e[this._sortProperty]?-1:0},n.Group.prototype.iterate=function(t,e,i,r,o,a){if(i===n.Group.RETURN_TOTAL&&0===this.children.length)return 0;"undefined"==typeof r&&(r=!1);for(var s=0,l=0,u=this.children.length;u>l;l++)if(this.children[l][t]===e&&(s++,r&&(a[0]=this.children[l],r.apply(o,a)),i===n.Group.RETURN_CHILD))return this.children[l];return i===n.Group.RETURN_TOTAL?s:i===n.Group.RETURN_CHILD?null:void 0},n.Group.prototype.getFirstExists=function(t){return"boolean"!=typeof t&&(t=!0),this.iterate("exists",t,n.Group.RETURN_CHILD)},n.Group.prototype.getFirstAlive=function(){return this.iterate("alive",!0,n.Group.RETURN_CHILD)},n.Group.prototype.getFirstDead=function(){return this.iterate("alive",!1,n.Group.RETURN_CHILD)},n.Group.prototype.getTop=function(){return this.children.length>0?this.children[this.children.length-1]:void 0},n.Group.prototype.getBottom=function(){return this.children.length>0?this.children[0]:void 0},n.Group.prototype.countLiving=function(){return this.iterate("alive",!0,n.Group.RETURN_TOTAL)},n.Group.prototype.countDead=function(){return this.iterate("alive",!1,n.Group.RETURN_TOTAL)},n.Group.prototype.getRandom=function(t,e){return 0===this.children.length?null:(t=t||0,e=e||this.children.length,this.game.math.getRandom(this.children,t,e))},n.Group.prototype.remove=function(t,e){if("undefined"==typeof e&&(e=!1),0===this.children.length||-1===this.children.indexOf(t))return!1;t.events&&!t.destroyPhase&&t.events.onRemovedFromGroup.dispatch(t,this);var n=this.removeChild(t);return this.updateZ(),this.cursor===t&&this.next(),e&&n&&n.destroy(!0),!0},n.Group.prototype.removeAll=function(t){if("undefined"==typeof t&&(t=!1),0!==this.children.length){do{this.children[0].events&&this.children[0].events.onRemovedFromGroup.dispatch(this.children[0],this);var e=this.removeChild(this.children[0]);t&&e&&e.destroy(!0)}while(this.children.length>0);this.cursor=null}},n.Group.prototype.removeBetween=function(t,e,n){if("undefined"==typeof e&&(e=this.children.length),"undefined"==typeof n&&(n=!1),0!==this.children.length){if(t>e||0>t||e>this.children.length)return!1;for(var i=e;i>=t;){this.children[i].events&&this.children[i].events.onRemovedFromGroup.dispatch(this.children[i],this);var r=this.removeChild(this.children[i]);n&&r&&r.destroy(!0),this.cursor===this.children[i]&&(this.cursor=null),i--}this.updateZ()}},n.Group.prototype.destroy=function(t,e){null!==this.game&&("undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!1),this.removeAll(t),this.cursor=null,e||(this.parent&&this.parent.removeChild(this),this.game=null,this.exists=!1))},Object.defineProperty(n.Group.prototype,"total",{get:function(){return this.iterate("exists",!0,n.Group.RETURN_TOTAL)}}),Object.defineProperty(n.Group.prototype,"length",{get:function(){return this.children.length}}),Object.defineProperty(n.Group.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.Group.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),n.World=function(t){n.Group.call(this,t,null,"__world",!1),this.bounds=new n.Rectangle(0,0,t.width,t.height),this.camera=null},n.World.prototype=Object.create(n.Group.prototype),n.World.prototype.constructor=n.World,n.World.prototype.boot=function(){this.camera=new n.Camera(this.game,0,0,0,this.game.width,this.game.height),this.camera.displayObject=this,this.camera.scale=this.scale,this.game.camera=this.camera,this.game.stage.addChild(this)},n.World.prototype.setBounds=function(t,e,n,i){n<this.game.width&&(n=this.game.width),i<this.game.height&&(i=this.game.height),this.bounds.setTo(t,e,n,i),this.camera.bounds&&this.camera.bounds.setTo(t,e,n,i),this.game.physics.setBoundsToWorld()},n.World.prototype.shutdown=function(){this.destroy(!0,!0)},n.World.prototype.wrap=function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=!1),n?(t.getBounds(),t._currentBounds.right<this.bounds.x?t.x=this.bounds.right:t._currentBounds.x>this.bounds.right&&(t.x=this.bounds.left),t._currentBounds.bottom<this.bounds.top?t.y=this.bounds.bottom:t._currentBounds.top>this.bounds.bottom&&(t.y=this.bounds.top)):(t.x+e<this.bounds.x?t.x=this.bounds.right+e:t.x-e>this.bounds.right&&(t.x=this.bounds.left-e),t.y+e<this.bounds.top?t.y=this.bounds.bottom+e:t.y-e>this.bounds.bottom&&(t.y=this.bounds.top-e))},Object.defineProperty(n.World.prototype,"width",{get:function(){return this.bounds.width},set:function(t){this.bounds.width=t}}),Object.defineProperty(n.World.prototype,"height",{get:function(){return this.bounds.height},set:function(t){this.bounds.height=t}}),Object.defineProperty(n.World.prototype,"centerX",{get:function(){return this.bounds.halfWidth}}),Object.defineProperty(n.World.prototype,"centerY",{get:function(){return this.bounds.halfHeight}}),Object.defineProperty(n.World.prototype,"randomX",{get:function(){return this.bounds.x<0?this.game.rnd.integerInRange(this.bounds.x,this.bounds.width-Math.abs(this.bounds.x)):this.game.rnd.integerInRange(this.bounds.x,this.bounds.width)}}),Object.defineProperty(n.World.prototype,"randomY",{get:function(){return this.bounds.y<0?this.game.rnd.integerInRange(this.bounds.y,this.bounds.height-Math.abs(this.bounds.y)):this.game.rnd.integerInRange(this.bounds.y,this.bounds.height)}}),n.ScaleManager=function(t,e,i){this.game=t,this.width=e,this.height=i,this.minWidth=null,this.maxWidth=null,this.minHeight=null,this.maxHeight=null,this.forceLandscape=!1,this.forcePortrait=!1,this.incorrectOrientation=!1,this.pageAlignHorizontally=!1,this.pageAlignVertically=!1,this.maxIterations=5,this.orientationSprite=null,this.enterLandscape=new n.Signal,this.enterPortrait=new n.Signal,this.enterIncorrectOrientation=new n.Signal,this.leaveIncorrectOrientation=new n.Signal,this.hasResized=new n.Signal,this.fullScreenTarget=this.game.canvas,this.enterFullScreen=new n.Signal,this.leaveFullScreen=new n.Signal,this.orientation=0,window.orientation?this.orientation=window.orientation:window.outerWidth>window.outerHeight&&(this.orientation=90),this.scaleFactor=new n.Point(1,1),this.scaleFactorInversed=new n.Point(1,1),this.margin=new n.Point(0,0),this.bounds=new n.Rectangle(0,0,e,i),this.aspectRatio=0,this.sourceAspectRatio=e/i,this.event=null,this.scaleMode=n.ScaleManager.NO_SCALE,this.fullScreenScaleMode=n.ScaleManager.NO_SCALE,this._startHeight=0,this._width=0,this._height=0,this._check=null;
var r=this;window.addEventListener("orientationchange",function(t){return r.checkOrientation(t)},!1),window.addEventListener("resize",function(t){return r.checkResize(t)},!1),document.addEventListener("webkitfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("mozfullscreenchange",function(t){return r.fullScreenChange(t)},!1),document.addEventListener("fullscreenchange",function(t){return r.fullScreenChange(t)},!1)},n.ScaleManager.EXACT_FIT=0,n.ScaleManager.NO_SCALE=1,n.ScaleManager.SHOW_ALL=2,n.ScaleManager.prototype={startFullScreen:function(t){!this.isFullScreen&&this.game.device.fullscreen&&("undefined"!=typeof t&&this.game.renderType===n.CANVAS&&(this.game.stage.smoothed=t),this._width=this.width,this._height=this.height,this.game.device.fullscreenKeyboard?this.fullScreenTarget[this.game.device.requestFullscreen](Element.ALLOW_KEYBOARD_INPUT):this.fullScreenTarget[this.game.device.requestFullscreen]())},stopFullScreen:function(){this.fullScreenTarget[this.game.device.cancelFullscreen]()},fullScreenChange:function(t){this.event=t,this.isFullScreen?(this.fullScreenScaleMode===n.ScaleManager.EXACT_FIT?(this.fullScreenTarget.style.width="100%",this.fullScreenTarget.style.height="100%",this.width=window.outerWidth,this.height=window.outerHeight,this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.checkResize()):this.fullScreenScaleMode===n.ScaleManager.SHOW_ALL&&(this.setShowAll(),this.refresh()),this.enterFullScreen.dispatch(this.width,this.height)):(this.fullScreenTarget.style.width=this.game.width+"px",this.fullScreenTarget.style.height=this.game.height+"px",this.width=this._width,this.height=this._height,this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.leaveFullScreen.dispatch(this.width,this.height))},forceOrientation:function(t,e,i){"undefined"==typeof e&&(e=!1),this.forceLandscape=t,this.forcePortrait=e,"undefined"!=typeof i&&((null===i||this.game.cache.checkImageKey(i)===!1)&&(i="__default"),this.orientationSprite=new n.Image(this.game,this.game.width/2,this.game.height/2,PIXI.TextureCache[i]),this.orientationSprite.anchor.set(.5),this.checkOrientationState(),this.incorrectOrientation?(this.orientationSprite.visible=!0,this.game.world.visible=!1):(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.game.stage.addChild(this.orientationSprite))},checkOrientationState:function(){this.incorrectOrientation?(this.forceLandscape&&window.innerWidth>window.innerHeight||this.forcePortrait&&window.innerHeight>window.innerWidth)&&(this.incorrectOrientation=!1,this.leaveIncorrectOrientation.dispatch(),this.orientationSprite&&(this.orientationSprite.visible=!1,this.game.world.visible=!0),this.scaleMode!==n.ScaleManager.NO_SCALE&&this.refresh()):(this.forceLandscape&&window.innerWidth<window.innerHeight||this.forcePortrait&&window.innerHeight<window.innerWidth)&&(this.incorrectOrientation=!0,this.enterIncorrectOrientation.dispatch(),this.orientationSprite&&this.orientationSprite.visible===!1&&(this.orientationSprite.visible=!0,this.game.world.visible=!1),this.scaleMode!==n.ScaleManager.NO_SCALE&&this.refresh())},checkOrientation:function(t){this.event=t,this.orientation=window.orientation,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.scaleMode!==n.ScaleManager.NO_SCALE&&this.refresh()},checkResize:function(t){this.event=t,this.orientation=window.outerWidth>window.outerHeight?90:0,this.isLandscape?this.enterLandscape.dispatch(this.orientation,!0,!1):this.enterPortrait.dispatch(this.orientation,!1,!0),this.scaleMode!==n.ScaleManager.NO_SCALE&&this.refresh(),this.checkOrientationState()},refresh:function(){if(this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),null===this._check&&this.maxIterations>0){this._iterations=this.maxIterations;var t=this;this._check=window.setInterval(function(){return t.setScreenSize()},10),this.setScreenSize()}},setScreenSize:function(t){"undefined"==typeof t&&(t=!1),this.game.device.iPad||this.game.device.webApp||this.game.device.desktop||(this.game.device.android&&!this.game.device.chrome?window.scrollTo(0,1):window.scrollTo(0,0)),this._iterations--,(t||window.innerHeight>this._startHeight||this._iterations<0)&&(document.documentElement.style.minHeight=window.innerHeight+"px",this.incorrectOrientation?this.setMaximum():this.isFullScreen?this.fullScreenScaleMode===n.ScaleManager.EXACT_FIT?this.setExactFit():this.fullScreenScaleMode===n.ScaleManager.SHOW_ALL&&this.setShowAll():this.scaleMode===n.ScaleManager.EXACT_FIT?this.setExactFit():this.scaleMode===n.ScaleManager.SHOW_ALL&&this.setShowAll(),this.setSize(),clearInterval(this._check),this._check=null)},setSize:function(){this.incorrectOrientation||(this.maxWidth&&this.width>this.maxWidth&&(this.width=this.maxWidth),this.maxHeight&&this.height>this.maxHeight&&(this.height=this.maxHeight),this.minWidth&&this.width<this.minWidth&&(this.width=this.minWidth),this.minHeight&&this.height<this.minHeight&&(this.height=this.minHeight)),this.game.canvas.style.width=this.width+"px",this.game.canvas.style.height=this.height+"px",this.game.input.scale.setTo(this.game.width/this.width,this.game.height/this.height),this.pageAlignHorizontally&&(this.width<window.innerWidth&&!this.incorrectOrientation?(this.margin.x=Math.round((window.innerWidth-this.width)/2),this.game.canvas.style.marginLeft=this.margin.x+"px"):(this.margin.x=0,this.game.canvas.style.marginLeft="0px")),this.pageAlignVertically&&(this.height<window.innerHeight&&!this.incorrectOrientation?(this.margin.y=Math.round((window.innerHeight-this.height)/2),this.game.canvas.style.marginTop=this.margin.y+"px"):(this.margin.y=0,this.game.canvas.style.marginTop="0px")),n.Canvas.getOffset(this.game.canvas,this.game.stage.offset),this.bounds.setTo(this.game.stage.offset.x,this.game.stage.offset.y,this.width,this.height),this.aspectRatio=this.width/this.height,this.scaleFactor.x=this.game.width/this.width,this.scaleFactor.y=this.game.height/this.height,this.scaleFactorInversed.x=this.width/this.game.width,this.scaleFactorInversed.y=this.height/this.game.height,this.hasResized.dispatch(this.width,this.height),this.checkOrientationState()},setMaximum:function(){this.width=window.innerWidth,this.height=window.innerHeight},setShowAll:function(){var t=Math.min(window.innerHeight/this.game.height,window.innerWidth/this.game.width);this.width=Math.round(this.game.width*t),this.height=Math.round(this.game.height*t)},setExactFit:function(){var t=window.innerWidth,e=window.innerHeight;this.width=this.maxWidth&&t>this.maxWidth?this.maxWidth:t,this.height=this.maxHeight&&e>this.maxHeight?this.maxHeight:e}},n.ScaleManager.prototype.constructor=n.ScaleManager,Object.defineProperty(n.ScaleManager.prototype,"isFullScreen",{get:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement}}),Object.defineProperty(n.ScaleManager.prototype,"isPortrait",{get:function(){return 0===this.orientation||180===this.orientation}}),Object.defineProperty(n.ScaleManager.prototype,"isLandscape",{get:function(){return 90===this.orientation||-90===this.orientation}}),n.Game=function(t,e,i,r,o,a,s,l){this.id=n.GAMES.push(this)-1,this.config=null,this.physicsConfig=l,this.parent="",this.width=800,this.height=600,this.transparent=!1,this.antialias=!0,this.renderer=null,this.renderType=n.AUTO,this.state=null,this.isBooted=!1,this.isRunning=!1,this.raf=null,this.add=null,this.make=null,this.cache=null,this.input=null,this.load=null,this.math=null,this.net=null,this.scale=null,this.sound=null,this.stage=null,this.time=null,this.tweens=null,this.world=null,this.physics=null,this.rnd=null,this.device=null,this.camera=null,this.canvas=null,this.context=null,this.debug=null,this.particles=null,this.stepping=!1,this.pendingStep=!1,this.stepCount=0,this.onPause=null,this.onResume=null,this.onBlur=null,this.onFocus=null,this._paused=!1,this._codePaused=!1,1===arguments.length&&"object"==typeof arguments[0]?this.parseConfig(arguments[0]):("undefined"!=typeof t&&(this.width=t),"undefined"!=typeof e&&(this.height=e),"undefined"!=typeof i&&(this.renderer=i,this.renderType=i),"undefined"!=typeof r&&(this.parent=r),"undefined"!=typeof a&&(this.transparent=a),"undefined"!=typeof s&&(this.antialias=s),this.rnd=new n.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this.state=new n.StateManager(this,o));var u=this;return this._onBoot=function(){return u.boot()},"complete"===document.readyState||"interactive"===document.readyState?window.setTimeout(this._onBoot,0):(document.addEventListener("DOMContentLoaded",this._onBoot,!1),window.addEventListener("load",this._onBoot,!1)),this},n.Game.prototype={parseConfig:function(t){this.config=t,t.width&&(this.width=n.Utils.parseDimension(t.width,0)),t.height&&(this.height=n.Utils.parseDimension(t.height,1)),t.renderer&&(this.renderer=t.renderer,this.renderType=t.renderer),t.parent&&(this.parent=t.parent),t.transparent&&(this.transparent=t.transparent),t.antialias&&(this.antialias=t.antialias),t.physicsConfig&&(this.physicsConfig=t.physicsConfig);var e=[(Date.now()*Math.random()).toString()];t.seed&&(e=t.seed),this.rnd=new n.RandomDataGenerator(e);var i=null;t.state&&(i=t.state),this.state=new n.StateManager(this,i)},boot:function(){this.isBooted||(document.body?(document.removeEventListener("DOMContentLoaded",this._onBoot),window.removeEventListener("load",this._onBoot),this.onPause=new n.Signal,this.onResume=new n.Signal,this.onBlur=new n.Signal,this.onFocus=new n.Signal,this.isBooted=!0,this.device=new n.Device(this),this.math=n.Math,this.stage=new n.Stage(this,this.width,this.height),this.scale=new n.ScaleManager(this,this.width,this.height),this.setUpRenderer(),this.device.checkFullScreenSupport(),this.world=new n.World(this),this.add=new n.GameObjectFactory(this),this.make=new n.GameObjectCreator(this),this.cache=new n.Cache(this),this.load=new n.Loader(this),this.time=new n.Time(this),this.tweens=new n.TweenManager(this),this.input=new n.Input(this),this.sound=new n.SoundManager(this),this.physics=new n.Physics(this,this.physicsConfig),this.particles=new n.Particles(this),this.plugins=new n.PluginManager(this),this.net=new n.Net(this),this.debug=new n.Utils.Debug(this),this.scratch=new n.BitmapData(this,"__root",1024,1024),this.time.boot(),this.stage.boot(),this.world.boot(),this.input.boot(),this.sound.boot(),this.state.boot(),this.debug.boot(),this.showDebugHeader(),this.isRunning=!0,this.raf=this.config&&this.config.forceSetTimeOut?new n.RequestAnimationFrame(this,this.config.forceSetTimeOut):new n.RequestAnimationFrame(this,!1),this.raf.start()):window.setTimeout(this._onBoot,20))},showDebugHeader:function(){var t=n.VERSION,e="Canvas",i="HTML Audio",r=1;if(this.renderType===n.WEBGL?(e="WebGL",r++):this.renderType==n.HEADLESS&&(e="Headless"),this.device.webAudio&&(i="WebAudio",r++),this.device.chrome){for(var o=["%c %c %c Phaser v"+t+" - "+e+" - "+i+"  %c %c  http://phaser.io  %c %c %c%c ","background: #0cf300","background: #00bc17","color: #ffffff; background: #00711f;","background: #00bc17","background: #0cf300","background: #00bc17"],a=0;3>a;a++)o.push(r>a?"color: #ff2424; background: #fff":"color: #959595; background: #fff");console.log.apply(console,o)}else window.console&&console.log("Phaser v"+t+" - Renderer: "+e+" - Audio: "+i+" - http://phaser.io")},setUpRenderer:function(){if(this.device.trident&&(this.renderType=n.CANVAS),this.renderType===n.HEADLESS||this.renderType===n.CANVAS||this.renderType===n.AUTO&&this.device.webGL===!1){if(!this.device.canvas)throw new Error("Phaser.Game - cannot create Canvas or WebGL context, aborting.");this.renderType===n.AUTO&&(this.renderType=n.CANVAS),this.renderer=new PIXI.CanvasRenderer(this.width,this.height,this.canvas,this.transparent),this.context=this.renderer.context}else this.renderType=n.WEBGL,this.renderer=new PIXI.WebGLRenderer(this.width,this.height,this.canvas,this.transparent,this.antialias),this.context=null;this.renderType!==n.HEADLESS&&(this.stage.smoothed=this.antialias,n.Canvas.addToDOM(this.canvas,this.parent,!0),n.Canvas.setTouchAction(this.canvas))},update:function(t){this.time.update(t),this._paused||this.pendingStep?(this.state.pauseUpdate(),this.debug.preUpdate()):(this.stepping&&(this.pendingStep=!0),this.debug.preUpdate(),this.physics.preUpdate(),this.state.preUpdate(),this.plugins.preUpdate(),this.stage.preUpdate(),this.state.update(),this.stage.update(),this.tweens.update(),this.sound.update(),this.input.update(),this.physics.update(),this.particles.update(),this.plugins.update(),this.stage.postUpdate(),this.plugins.postUpdate()),this.renderType!=n.HEADLESS&&(this.renderer.render(this.stage),this.plugins.render(),this.state.render(),this.plugins.postRender())},enableStep:function(){this.stepping=!0,this.pendingStep=!1,this.stepCount=0},disableStep:function(){this.stepping=!1,this.pendingStep=!1},step:function(){this.pendingStep=!1,this.stepCount++},destroy:function(){this.raf.stop(),this.input.destroy(),this.state.destroy(),this.physics.destroy(),this.state=null,this.cache=null,this.input=null,this.load=null,this.sound=null,this.stage=null,this.time=null,this.world=null,this.isBooted=!1},gamePaused:function(t){this._paused||(this._paused=!0,this.time.gamePaused(),this.sound.setMute(),this.onPause.dispatch(t))},gameResumed:function(t){this._paused&&!this._codePaused&&(this._paused=!1,this.time.gameResumed(),this.input.reset(),this.sound.unsetMute(),this.onResume.dispatch(t))},focusLoss:function(t){this.onBlur.dispatch(t),this.gamePaused(t)},focusGain:function(t){this.onFocus.dispatch(t),this.gameResumed(t)}},n.Game.prototype.constructor=n.Game,Object.defineProperty(n.Game.prototype,"paused",{get:function(){return this._paused},set:function(t){t===!0?this._paused===!1&&(this._paused=!0,this._codePaused=!0,this.sound.setMute(),this.time.gamePaused(),this.onPause.dispatch(this)):this._paused&&(this._paused=!1,this._codePaused=!1,this.input.reset(),this.sound.unsetMute(),this.time.gameResumed(),this.onResume.dispatch(this))}}),n.Input=function(t){this.game=t,this.hitCanvas=null,this.hitContext=null,this.moveCallbacks=[],this.moveCallback=null,this.moveCallbackContext=this,this.pollRate=0,this.disabled=!1,this.multiInputOverride=n.Input.MOUSE_TOUCH_COMBINE,this.position=null,this.speed=null,this.circle=null,this.scale=null,this.maxPointers=10,this.currentPointers=0,this.tapRate=200,this.doubleTapRate=300,this.holdRate=2e3,this.justPressedRate=200,this.justReleasedRate=200,this.recordPointerHistory=!1,this.recordRate=100,this.recordLimit=100,this.pointer1=null,this.pointer2=null,this.pointer3=null,this.pointer4=null,this.pointer5=null,this.pointer6=null,this.pointer7=null,this.pointer8=null,this.pointer9=null,this.pointer10=null,this.activePointer=null,this.mousePointer=null,this.mouse=null,this.keyboard=null,this.touch=null,this.mspointer=null,this.gamepad=null,this.resetLocked=!1,this.onDown=null,this.onUp=null,this.onTap=null,this.onHold=null,this.minPriorityID=0,this.interactiveItems=new n.ArrayList,this._localPoint=new n.Point,this._pollCounter=0,this._oldPosition=null,this._x=0,this._y=0},n.Input.MOUSE_OVERRIDES_TOUCH=0,n.Input.TOUCH_OVERRIDES_MOUSE=1,n.Input.MOUSE_TOUCH_COMBINE=2,n.Input.prototype={boot:function(){this.mousePointer=new n.Pointer(this.game,0),this.pointer1=new n.Pointer(this.game,1),this.pointer2=new n.Pointer(this.game,2),this.mouse=new n.Mouse(this.game),this.keyboard=new n.Keyboard(this.game),this.touch=new n.Touch(this.game),this.mspointer=new n.MSPointer(this.game),this.gamepad=new n.Gamepad(this.game),this.onDown=new n.Signal,this.onUp=new n.Signal,this.onTap=new n.Signal,this.onHold=new n.Signal,this.scale=new n.Point(1,1),this.speed=new n.Point,this.position=new n.Point,this._oldPosition=new n.Point,this.circle=new n.Circle(0,0,44),this.activePointer=this.mousePointer,this.currentPointers=0,this.hitCanvas=document.createElement("canvas"),this.hitCanvas.width=1,this.hitCanvas.height=1,this.hitContext=this.hitCanvas.getContext("2d"),this.mouse.start(),this.keyboard.start(),this.touch.start(),this.mspointer.start(),this.mousePointer.active=!0},destroy:function(){this.mouse.stop(),this.keyboard.stop(),this.touch.stop(),this.mspointer.stop(),this.gamepad.stop(),this.moveCallbacks=[],this.moveCallback=null},setMoveCallback:function(t,e){this.moveCallback=t,this.moveCallbackContext=e},addMoveCallback:function(t,e){return this.moveCallbacks.push({callback:t,context:e})-1},deleteMoveCallback:function(t){this.moveCallbacks[t]&&this.moveCallbacks.splice(t,1)},addPointer:function(){for(var t=0,e=10;e>0;e--)null===this["pointer"+e]&&(t=e);return 0===t?(console.warn("You can only have 10 Pointer objects"),null):(this["pointer"+t]=new n.Pointer(this.game,t),this["pointer"+t])},update:function(){return this.keyboard.update(),this.pollRate>0&&this._pollCounter<this.pollRate?void this._pollCounter++:(this.speed.x=this.position.x-this._oldPosition.x,this.speed.y=this.position.y-this._oldPosition.y,this._oldPosition.copyFrom(this.position),this.mousePointer.update(),this.gamepad.active&&this.gamepad.update(),this.pointer1.update(),this.pointer2.update(),this.pointer3&&this.pointer3.update(),this.pointer4&&this.pointer4.update(),this.pointer5&&this.pointer5.update(),this.pointer6&&this.pointer6.update(),this.pointer7&&this.pointer7.update(),this.pointer8&&this.pointer8.update(),this.pointer9&&this.pointer9.update(),this.pointer10&&this.pointer10.update(),void(this._pollCounter=0))},reset:function(t){if(this.game.isBooted&&!this.resetLocked){"undefined"==typeof t&&(t=!1),this.keyboard.reset(t),this.mousePointer.reset(),this.gamepad.reset();for(var e=1;10>=e;e++)this["pointer"+e]&&this["pointer"+e].reset();this.currentPointers=0,"none"!==this.game.canvas.style.cursor&&(this.game.canvas.style.cursor="inherit"),t&&(this.onDown.dispose(),this.onUp.dispose(),this.onTap.dispose(),this.onHold.dispose(),this.onDown=new n.Signal,this.onUp=new n.Signal,this.onTap=new n.Signal,this.onHold=new n.Signal,this.moveCallbacks=[]),this._pollCounter=0}},resetSpeed:function(t,e){this._oldPosition.setTo(t,e),this.speed.setTo(0,0)},startPointer:function(t){if(this.maxPointers<10&&this.totalActivePointers==this.maxPointers)return null;if(this.pointer1.active===!1)return this.pointer1.start(t);if(this.pointer2.active===!1)return this.pointer2.start(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active===!1)return this["pointer"+e].start(t);return null},updatePointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.move(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.move(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].move(t);return null},stopPointer:function(t){if(this.pointer1.active&&this.pointer1.identifier==t.identifier)return this.pointer1.stop(t);if(this.pointer2.active&&this.pointer2.identifier==t.identifier)return this.pointer2.stop(t);for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active&&this["pointer"+e].identifier==t.identifier)return this["pointer"+e].stop(t);return null},getPointer:function(t){if(t=t||!1,this.pointer1.active==t)return this.pointer1;if(this.pointer2.active==t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].active==t)return this["pointer"+e];return null},getPointerFromIdentifier:function(t){if(this.pointer1.identifier===t)return this.pointer1;if(this.pointer2.identifier===t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].identifier===t)return this["pointer"+e];return null},getPointerFromId:function(t){if(this.pointer1.pointerId===t)return this.pointer1;if(this.pointer2.pointerId===t)return this.pointer2;for(var e=3;10>=e;e++)if(this["pointer"+e]&&this["pointer"+e].pointerId===t)return this["pointer"+e];return null},getLocalPosition:function(t,e,i){"undefined"==typeof i&&(i=new n.Point);var r=t.worldTransform,o=1/(r.a*r.d+r.b*-r.c);return i.setTo(r.d*o*e.x+-r.b*o*e.y+(r.ty*r.b-r.tx*r.d)*o,r.a*o*e.y+-r.c*o*e.x+(-r.ty*r.a+r.tx*r.c)*o)},hitTest:function(t,e,i){if(!t.worldVisible)return!1;if(this.getLocalPosition(t,e,this._localPoint),i.copyFrom(this._localPoint),t.hitArea&&t.hitArea.contains)return t.hitArea.contains(this._localPoint.x,this._localPoint.y)?!0:!1;if(t instanceof n.TileSprite){var r=t.width,o=t.height,a=-r*t.anchor.x;if(this._localPoint.x>a&&this._localPoint.x<a+r){var s=-o*t.anchor.y;if(this._localPoint.y>s&&this._localPoint.y<s+o)return!0}}else if(t instanceof PIXI.Sprite){var r=t.texture.frame.width,o=t.texture.frame.height,a=-r*t.anchor.x;if(this._localPoint.x>a&&this._localPoint.x<a+r){var s=-o*t.anchor.y;if(this._localPoint.y>s&&this._localPoint.y<s+o)return!0}}for(var l=0,u=t.children.length;u>l;l++)if(this.hitTest(t.children[l],e,i))return!0;return!1}},n.Input.prototype.constructor=n.Input,Object.defineProperty(n.Input.prototype,"x",{get:function(){return this._x},set:function(t){this._x=Math.floor(t)}}),Object.defineProperty(n.Input.prototype,"y",{get:function(){return this._y},set:function(t){this._y=Math.floor(t)}}),Object.defineProperty(n.Input.prototype,"pollLocked",{get:function(){return this.pollRate>0&&this._pollCounter<this.pollRate}}),Object.defineProperty(n.Input.prototype,"totalInactivePointers",{get:function(){return 10-this.currentPointers}}),Object.defineProperty(n.Input.prototype,"totalActivePointers",{get:function(){this.currentPointers=0;for(var t=1;10>=t;t++)this["pointer"+t]&&this["pointer"+t].active&&this.currentPointers++;return this.currentPointers}}),Object.defineProperty(n.Input.prototype,"worldX",{get:function(){return this.game.camera.view.x+this.x}}),Object.defineProperty(n.Input.prototype,"worldY",{get:function(){return this.game.camera.view.y+this.y}}),n.Key=function(t,e){this.game=t,this.enabled=!0,this.event=null,this.isDown=!1,this.isUp=!0,this.altKey=!1,this.ctrlKey=!1,this.shiftKey=!1,this.timeDown=0,this.duration=0,this.timeUp=-2500,this.repeats=0,this.keyCode=e,this.onDown=new n.Signal,this.onHoldCallback=null,this.onHoldContext=null,this.onUp=new n.Signal},n.Key.prototype={update:function(){this.enabled&&this.isDown&&(this.duration=this.game.time.now-this.timeDown,this.repeats++,this.onHoldCallback&&this.onHoldCallback.call(this.onHoldContext,this))},processKeyDown:function(t){this.enabled&&(this.event=t,this.isDown||(this.altKey=t.altKey,this.ctrlKey=t.ctrlKey,this.shiftKey=t.shiftKey,this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.now,this.duration=0,this.repeats=0,this.onDown.dispatch(this)))},processKeyUp:function(t){this.enabled&&(this.event=t,this.isUp||(this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.duration=this.game.time.now-this.timeDown,this.onUp.dispatch(this)))},reset:function(t){"undefined"==typeof t&&(t=!0),this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.duration=this.game.time.now-this.timeDown,this.enabled=!0,t&&(this.onDown.removeAll(),this.onUp.removeAll(),this.onHoldCallback=null,this.onHoldContext=null)},justPressed:function(t){return"undefined"==typeof t&&(t=50),this.isDown&&this.duration<t},justReleased:function(t){return"undefined"==typeof t&&(t=50),!this.isDown&&this.game.time.now-this.timeUp<t}},n.Key.prototype.constructor=n.Key,n.Keyboard=function(t){this.game=t,this.disabled=!1,this.event=null,this.callbackContext=this,this.onDownCallback=null,this.onUpCallback=null,this._keys=[],this._capture=[],this._onKeyDown=null,this._onKeyUp=null,this._i=0},n.Keyboard.prototype={addCallbacks:function(t,e,n){this.callbackContext=t,this.onDownCallback=e,"undefined"!=typeof n&&(this.onUpCallback=n)},addKey:function(t){return this._keys[t]||(this._keys[t]=new n.Key(this.game,t),this.addKeyCapture(t)),this._keys[t]},removeKey:function(t){this._keys[t]&&(this._keys[t]=null,this.removeKeyCapture(t))},createCursorKeys:function(){return{up:this.addKey(n.Keyboard.UP),down:this.addKey(n.Keyboard.DOWN),left:this.addKey(n.Keyboard.LEFT),right:this.addKey(n.Keyboard.RIGHT)}},start:function(){if(null===this._onKeyDown){var t=this;this._onKeyDown=function(e){return t.processKeyDown(e)},this._onKeyUp=function(e){return t.processKeyUp(e)},window.addEventListener("keydown",this._onKeyDown,!1),window.addEventListener("keyup",this._onKeyUp,!1)}},stop:function(){window.removeEventListener("keydown",this._onKeyDown),window.removeEventListener("keyup",this._onKeyUp),this._onKeyDown=null,this._onKeyUp=null},destroy:function(){this.stop(),this.clearCaptures(),this._keys.length=0,this._i=0},addKeyCapture:function(t){if("object"==typeof t)for(var e in t)this._capture[t[e]]=!0;else this._capture[t]=!0},removeKeyCapture:function(t){delete this._capture[t]},clearCaptures:function(){this._capture={}},update:function(){for(this._i=this._keys.length;this._i--;)this._keys[this._i]&&this._keys[this._i].update()},processKeyDown:function(t){this.event=t,this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t),this._keys[t.keyCode]||(this._keys[t.keyCode]=new n.Key(this.game,t.keyCode)),this._keys[t.keyCode].processKeyDown(t))},processKeyUp:function(t){this.event=t,this.game.input.disabled||this.disabled||(this._capture[t.keyCode]&&t.preventDefault(),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t),this._keys[t.keyCode]||(this._keys[t.keyCode]=new n.Key(this.game,t.keyCode)),this._keys[t.keyCode].processKeyUp(t))},reset:function(t){"undefined"==typeof t&&(t=!0),this.event=null;for(var e=this._keys.length;e--;)this._keys[e]&&this._keys[e].reset(t)},justPressed:function(t,e){return"undefined"==typeof e&&(e=50),this._keys[t]?this._keys[t].justPressed(e):!1},justReleased:function(t,e){return"undefined"==typeof e&&(e=50),this._keys[t]?this._keys[t].justReleased(e):!1},isDown:function(t){return this._keys[t]?this._keys[t].isDown:!1}},n.Keyboard.prototype.constructor=n.Keyboard,n.Keyboard.A="A".charCodeAt(0),n.Keyboard.B="B".charCodeAt(0),n.Keyboard.C="C".charCodeAt(0),n.Keyboard.D="D".charCodeAt(0),n.Keyboard.E="E".charCodeAt(0),n.Keyboard.F="F".charCodeAt(0),n.Keyboard.G="G".charCodeAt(0),n.Keyboard.H="H".charCodeAt(0),n.Keyboard.I="I".charCodeAt(0),n.Keyboard.J="J".charCodeAt(0),n.Keyboard.K="K".charCodeAt(0),n.Keyboard.L="L".charCodeAt(0),n.Keyboard.M="M".charCodeAt(0),n.Keyboard.N="N".charCodeAt(0),n.Keyboard.O="O".charCodeAt(0),n.Keyboard.P="P".charCodeAt(0),n.Keyboard.Q="Q".charCodeAt(0),n.Keyboard.R="R".charCodeAt(0),n.Keyboard.S="S".charCodeAt(0),n.Keyboard.T="T".charCodeAt(0),n.Keyboard.U="U".charCodeAt(0),n.Keyboard.V="V".charCodeAt(0),n.Keyboard.W="W".charCodeAt(0),n.Keyboard.X="X".charCodeAt(0),n.Keyboard.Y="Y".charCodeAt(0),n.Keyboard.Z="Z".charCodeAt(0),n.Keyboard.ZERO="0".charCodeAt(0),n.Keyboard.ONE="1".charCodeAt(0),n.Keyboard.TWO="2".charCodeAt(0),n.Keyboard.THREE="3".charCodeAt(0),n.Keyboard.FOUR="4".charCodeAt(0),n.Keyboard.FIVE="5".charCodeAt(0),n.Keyboard.SIX="6".charCodeAt(0),n.Keyboard.SEVEN="7".charCodeAt(0),n.Keyboard.EIGHT="8".charCodeAt(0),n.Keyboard.NINE="9".charCodeAt(0),n.Keyboard.NUMPAD_0=96,n.Keyboard.NUMPAD_1=97,n.Keyboard.NUMPAD_2=98,n.Keyboard.NUMPAD_3=99,n.Keyboard.NUMPAD_4=100,n.Keyboard.NUMPAD_5=101,n.Keyboard.NUMPAD_6=102,n.Keyboard.NUMPAD_7=103,n.Keyboard.NUMPAD_8=104,n.Keyboard.NUMPAD_9=105,n.Keyboard.NUMPAD_MULTIPLY=106,n.Keyboard.NUMPAD_ADD=107,n.Keyboard.NUMPAD_ENTER=108,n.Keyboard.NUMPAD_SUBTRACT=109,n.Keyboard.NUMPAD_DECIMAL=110,n.Keyboard.NUMPAD_DIVIDE=111,n.Keyboard.F1=112,n.Keyboard.F2=113,n.Keyboard.F3=114,n.Keyboard.F4=115,n.Keyboard.F5=116,n.Keyboard.F6=117,n.Keyboard.F7=118,n.Keyboard.F8=119,n.Keyboard.F9=120,n.Keyboard.F10=121,n.Keyboard.F11=122,n.Keyboard.F12=123,n.Keyboard.F13=124,n.Keyboard.F14=125,n.Keyboard.F15=126,n.Keyboard.COLON=186,n.Keyboard.EQUALS=187,n.Keyboard.UNDERSCORE=189,n.Keyboard.QUESTION_MARK=191,n.Keyboard.TILDE=192,n.Keyboard.OPEN_BRACKET=219,n.Keyboard.BACKWARD_SLASH=220,n.Keyboard.CLOSED_BRACKET=221,n.Keyboard.QUOTES=222,n.Keyboard.BACKSPACE=8,n.Keyboard.TAB=9,n.Keyboard.CLEAR=12,n.Keyboard.ENTER=13,n.Keyboard.SHIFT=16,n.Keyboard.CONTROL=17,n.Keyboard.ALT=18,n.Keyboard.CAPS_LOCK=20,n.Keyboard.ESC=27,n.Keyboard.SPACEBAR=32,n.Keyboard.PAGE_UP=33,n.Keyboard.PAGE_DOWN=34,n.Keyboard.END=35,n.Keyboard.HOME=36,n.Keyboard.LEFT=37,n.Keyboard.UP=38,n.Keyboard.RIGHT=39,n.Keyboard.DOWN=40,n.Keyboard.INSERT=45,n.Keyboard.DELETE=46,n.Keyboard.HELP=47,n.Keyboard.NUM_LOCK=144,n.Mouse=function(t){this.game=t,this.callbackContext=this.game,this.mouseDownCallback=null,this.mouseMoveCallback=null,this.mouseUpCallback=null,this.mouseOutCallback=null,this.mouseOverCallback=null,this.capture=!1,this.button=-1,this.disabled=!1,this.locked=!1,this.stopOnGameOut=!1,this.pointerLock=new n.Signal,this.event=null,this._onMouseDown=null,this._onMouseMove=null,this._onMouseUp=null,this._onMouseOut=null,this._onMouseOver=null},n.Mouse.NO_BUTTON=-1,n.Mouse.LEFT_BUTTON=0,n.Mouse.MIDDLE_BUTTON=1,n.Mouse.RIGHT_BUTTON=2,n.Mouse.prototype={start:function(){if((!this.game.device.android||this.game.device.chrome!==!1)&&null===this._onMouseDown){var t=this;this._onMouseDown=function(e){return t.onMouseDown(e)},this._onMouseMove=function(e){return t.onMouseMove(e)},this._onMouseUp=function(e){return t.onMouseUp(e)},this._onMouseOut=function(e){return t.onMouseOut(e)},this._onMouseOver=function(e){return t.onMouseOver(e)},this.game.canvas.addEventListener("mousedown",this._onMouseDown,!0),this.game.canvas.addEventListener("mousemove",this._onMouseMove,!0),this.game.canvas.addEventListener("mouseup",this._onMouseUp,!0),this.game.canvas.addEventListener("mouseover",this._onMouseOver,!0),this.game.canvas.addEventListener("mouseout",this._onMouseOut,!0)}},onMouseDown:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=t.button,this.mouseDownCallback&&this.mouseDownCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.start(t))},onMouseMove:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseMoveCallback&&this.mouseMoveCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.move(t))},onMouseUp:function(t){this.event=t,this.capture&&t.preventDefault(),this.button=n.Mouse.NO_BUTTON,this.mouseUpCallback&&this.mouseUpCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(t.identifier=0,this.game.input.mousePointer.stop(t))},onMouseOut:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseOutCallback&&this.mouseOutCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(this.game.input.mousePointer.withinGame=!1,this.stopOnGameOut&&(t.identifier=0,this.game.input.mousePointer.stop(t)))},onMouseOver:function(t){this.event=t,this.capture&&t.preventDefault(),this.mouseOverCallback&&this.mouseOverCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||(this.game.input.mousePointer.withinGame=!0)},requestPointerLock:function(){if(this.game.device.pointerLock){var t=this.game.canvas;t.requestPointerLock=t.requestPointerLock||t.mozRequestPointerLock||t.webkitRequestPointerLock,t.requestPointerLock();var e=this;this._pointerLockChange=function(t){return e.pointerLockChange(t)},document.addEventListener("pointerlockchange",this._pointerLockChange,!0),document.addEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.addEventListener("webkitpointerlockchange",this._pointerLockChange,!0)
}},pointerLockChange:function(t){var e=this.game.canvas;document.pointerLockElement===e||document.mozPointerLockElement===e||document.webkitPointerLockElement===e?(this.locked=!0,this.pointerLock.dispatch(!0,t)):(this.locked=!1,this.pointerLock.dispatch(!1,t))},releasePointerLock:function(){document.exitPointerLock=document.exitPointerLock||document.mozExitPointerLock||document.webkitExitPointerLock,document.exitPointerLock(),document.removeEventListener("pointerlockchange",this._pointerLockChange,!0),document.removeEventListener("mozpointerlockchange",this._pointerLockChange,!0),document.removeEventListener("webkitpointerlockchange",this._pointerLockChange,!0)},stop:function(){this.game.canvas.removeEventListener("mousedown",this._onMouseDown,!0),this.game.canvas.removeEventListener("mousemove",this._onMouseMove,!0),this.game.canvas.removeEventListener("mouseup",this._onMouseUp,!0),this.game.canvas.removeEventListener("mouseover",this._onMouseOver,!0),this.game.canvas.removeEventListener("mouseout",this._onMouseOut,!0)}},n.Mouse.prototype.constructor=n.Mouse,n.MSPointer=function(t){this.game=t,this.callbackContext=this.game,this.disabled=!1,this._onMSPointerDown=null,this._onMSPointerMove=null,this._onMSPointerUp=null},n.MSPointer.prototype={start:function(){if(null===this._onMSPointerDown){var t=this;this.game.device.mspointer===!0&&(this._onMSPointerDown=function(e){return t.onPointerDown(e)},this._onMSPointerMove=function(e){return t.onPointerMove(e)},this._onMSPointerUp=function(e){return t.onPointerUp(e)},this.game.renderer.view.addEventListener("MSPointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("MSPointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("MSPointerUp",this._onMSPointerUp,!1),this.game.renderer.view.addEventListener("pointerDown",this._onMSPointerDown,!1),this.game.renderer.view.addEventListener("pointerMove",this._onMSPointerMove,!1),this.game.renderer.view.addEventListener("pointerUp",this._onMSPointerUp,!1),this.game.renderer.view.style["-ms-content-zooming"]="none",this.game.renderer.view.style["-ms-touch-action"]="none")}},onPointerDown:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.startPointer(t))},onPointerMove:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.updatePointer(t))},onPointerUp:function(t){this.game.input.disabled||this.disabled||(t.preventDefault(),t.identifier=t.pointerId,this.game.input.stopPointer(t))},stop:function(){this.game.canvas.removeEventListener("MSPointerDown",this._onMSPointerDown),this.game.canvas.removeEventListener("MSPointerMove",this._onMSPointerMove),this.game.canvas.removeEventListener("MSPointerUp",this._onMSPointerUp),this.game.canvas.removeEventListener("pointerDown",this._onMSPointerDown),this.game.canvas.removeEventListener("pointerMove",this._onMSPointerMove),this.game.canvas.removeEventListener("pointerUp",this._onMSPointerUp)}},n.MSPointer.prototype.constructor=n.MSPointer,n.Pointer=function(t,e){this.game=t,this.id=e,this.type=n.POINTER,this.exists=!0,this.identifier=0,this.pointerId=null,this.target=null,this.button=null,this._holdSent=!1,this._history=[],this._nextDrop=0,this._stateReset=!1,this.withinGame=!1,this.clientX=-1,this.clientY=-1,this.pageX=-1,this.pageY=-1,this.screenX=-1,this.screenY=-1,this.rawMovementX=0,this.rawMovementY=0,this.movementX=0,this.movementY=0,this.x=-1,this.y=-1,this.isMouse=!1,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.timeUp=0,this.previousTapTime=0,this.totalTouches=0,this.msSinceLastClick=Number.MAX_VALUE,this.targetObject=null,this.active=!1,this.position=new n.Point,this.positionDown=new n.Point,this.positionUp=new n.Point,this.circle=new n.Circle(0,0,44),0===e&&(this.isMouse=!0)},n.Pointer.prototype={start:function(t){return t.pointerId&&(this.pointerId=t.pointerId),this.identifier=t.identifier,this.target=t.target,"undefined"!=typeof t.button&&(this.button=t.button),this._history=[],this.active=!0,this.withinGame=!0,this.isDown=!0,this.isUp=!1,this.msSinceLastClick=this.game.time.now-this.timeDown,this.timeDown=this.game.time.now,this._holdSent=!1,this.move(t,!0),this.positionDown.setTo(this.x,this.y),(this.game.input.multiInputOverride===n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.x,this.y),this.game.input.onDown.dispatch(this,t),this.game.input.resetSpeed(this.x,this.y)),this._stateReset=!1,this.totalTouches++,this.isMouse||this.game.input.currentPointers++,null!==this.targetObject&&this.targetObject._touchedHandler(this),this},update:function(){this.active&&(this._holdSent===!1&&this.duration>=this.game.input.holdRate&&((this.game.input.multiInputOverride==n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride==n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride==n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&this.game.input.onHold.dispatch(this),this._holdSent=!0),this.game.input.recordPointerHistory&&this.game.time.now>=this._nextDrop&&(this._nextDrop=this.game.time.now+this.game.input.recordRate,this._history.push({x:this.position.x,y:this.position.y}),this._history.length>this.game.input.recordLimit&&this._history.shift()))},move:function(t,e){if(!this.game.input.pollLocked){if("undefined"==typeof e&&(e=!1),"undefined"!=typeof t.button&&(this.button=t.button),this.clientX=t.clientX,this.clientY=t.clientY,this.pageX=t.pageX,this.pageY=t.pageY,this.screenX=t.screenX,this.screenY=t.screenY,this.isMouse&&this.game.input.mouse.locked&&!e&&(this.rawMovementX=t.movementX||t.mozMovementX||t.webkitMovementX||0,this.rawMovementY=t.movementY||t.mozMovementY||t.webkitMovementY||0,this.movementX+=this.rawMovementX,this.movementY+=this.rawMovementY),this.x=(this.pageX-this.game.stage.offset.x)*this.game.input.scale.x,this.y=(this.pageY-this.game.stage.offset.y)*this.game.input.scale.y,this.position.setTo(this.x,this.y),this.circle.x=this.x,this.circle.y=this.y,(this.game.input.multiInputOverride===n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.activePointer=this,this.game.input.x=this.x,this.game.input.y=this.y,this.game.input.position.setTo(this.game.input.x,this.game.input.y),this.game.input.circle.x=this.game.input.x,this.game.input.circle.y=this.game.input.y),this.withinGame=this.game.scale.bounds.contains(this.pageX,this.pageY),this.game.paused)return this;this.game.input.moveCallback&&this.game.input.moveCallback.call(this.game.input.moveCallbackContext,this,this.x,this.y);for(var i=this.game.input.moveCallbacks.length;i--;)this.game.input.moveCallbacks[i].callback.call(this.game.input.moveCallbacks[i].context,this,this.x,this.y);if(null!==this.targetObject&&this.targetObject.isDragged===!0)return this.targetObject.update(this)===!1&&(this.targetObject=null),this;if(this._highestRenderOrderID=Number.MAX_SAFE_INTEGER,this._highestRenderObject=null,this._highestInputPriorityID=-1,this.game.input.interactiveItems.total>0){var r=this.game.input.interactiveItems.first;do r&&r.validForInput(this._highestInputPriorityID,this._highestRenderOrderID)&&(!e&&r.checkPointerOver(this)||e&&r.checkPointerDown(this))&&(this._highestRenderOrderID=r.sprite._cache[3],this._highestInputPriorityID=r.priorityID,this._highestRenderObject=r),r=this.game.input.interactiveItems.next;while(null!==r)}return null===this._highestRenderObject?this.targetObject&&(this.targetObject._pointerOutHandler(this),this.targetObject=null):null===this.targetObject?(this.targetObject=this._highestRenderObject,this._highestRenderObject._pointerOverHandler(this)):this.targetObject===this._highestRenderObject?this._highestRenderObject.update(this)===!1&&(this.targetObject=null):(this.targetObject._pointerOutHandler(this),this.targetObject=this._highestRenderObject,this.targetObject._pointerOverHandler(this)),this}},leave:function(t){this.withinGame=!1,this.move(t,!1)},stop:function(t){return this._stateReset?void t.preventDefault():(this.timeUp=this.game.time.now,(this.game.input.multiInputOverride===n.Input.MOUSE_OVERRIDES_TOUCH||this.game.input.multiInputOverride===n.Input.MOUSE_TOUCH_COMBINE||this.game.input.multiInputOverride===n.Input.TOUCH_OVERRIDES_MOUSE&&0===this.game.input.currentPointers)&&(this.game.input.onUp.dispatch(this,t),this.duration>=0&&this.duration<=this.game.input.tapRate&&(this.timeUp-this.previousTapTime<this.game.input.doubleTapRate?this.game.input.onTap.dispatch(this,!0):this.game.input.onTap.dispatch(this,!1),this.previousTapTime=this.timeUp)),this.id>0&&(this.active=!1),this.withinGame=!1,this.isDown=!1,this.isUp=!0,this.pointerId=null,this.identifier=null,this.positionUp.setTo(this.x,this.y),this.isMouse===!1&&this.game.input.currentPointers--,this.game.input.interactiveItems.callAll("_releasedHandler",this),this.targetObject=null,this)},justPressed:function(t){return t=t||this.game.input.justPressedRate,this.isDown===!0&&this.timeDown+t>this.game.time.now},justReleased:function(t){return t=t||this.game.input.justReleasedRate,this.isUp===!0&&this.timeUp+t>this.game.time.now},reset:function(){this.isMouse===!1&&(this.active=!1),this.pointerId=null,this.identifier=null,this.isDown=!1,this.isUp=!0,this.totalTouches=0,this._holdSent=!1,this._history.length=0,this._stateReset=!0,this.targetObject&&this.targetObject._releasedHandler(this),this.targetObject=null},resetMovement:function(){this.movementX=0,this.movementY=0}},n.Pointer.prototype.constructor=n.Pointer,Object.defineProperty(n.Pointer.prototype,"duration",{get:function(){return this.isUp?-1:this.game.time.now-this.timeDown}}),Object.defineProperty(n.Pointer.prototype,"worldX",{get:function(){return this.game.world.camera.x+this.x}}),Object.defineProperty(n.Pointer.prototype,"worldY",{get:function(){return this.game.world.camera.y+this.y}}),n.Touch=function(t){this.game=t,this.disabled=!1,this.callbackContext=this.game,this.touchStartCallback=null,this.touchMoveCallback=null,this.touchEndCallback=null,this.touchEnterCallback=null,this.touchLeaveCallback=null,this.touchCancelCallback=null,this.preventDefault=!0,this.event=null,this._onTouchStart=null,this._onTouchMove=null,this._onTouchEnd=null,this._onTouchEnter=null,this._onTouchLeave=null,this._onTouchCancel=null,this._onTouchMove=null},n.Touch.prototype={start:function(){if(null===this._onTouchStart){var t=this;this.game.device.touch&&(this._onTouchStart=function(e){return t.onTouchStart(e)},this._onTouchMove=function(e){return t.onTouchMove(e)},this._onTouchEnd=function(e){return t.onTouchEnd(e)},this._onTouchEnter=function(e){return t.onTouchEnter(e)},this._onTouchLeave=function(e){return t.onTouchLeave(e)},this._onTouchCancel=function(e){return t.onTouchCancel(e)},this.game.canvas.addEventListener("touchstart",this._onTouchStart,!1),this.game.canvas.addEventListener("touchmove",this._onTouchMove,!1),this.game.canvas.addEventListener("touchend",this._onTouchEnd,!1),this.game.canvas.addEventListener("touchenter",this._onTouchEnter,!1),this.game.canvas.addEventListener("touchleave",this._onTouchLeave,!1),this.game.canvas.addEventListener("touchcancel",this._onTouchCancel,!1))}},consumeDocumentTouches:function(){this._documentTouchMove=function(t){t.preventDefault()},document.addEventListener("touchmove",this._documentTouchMove,!1)},onTouchStart:function(t){if(this.event=t,this.touchStartCallback&&this.touchStartCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.startPointer(t.changedTouches[e])}},onTouchCancel:function(t){if(this.event=t,this.touchCancelCallback&&this.touchCancelCallback.call(this.callbackContext,t),!this.game.input.disabled&&!this.disabled){this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])}},onTouchEnter:function(t){console.log("touch enter",t),this.event=t,this.touchEnterCallback&&this.touchEnterCallback.call(this.callbackContext,t),this.game.input.disabled||this.disabled||this.preventDefault&&t.preventDefault()},onTouchLeave:function(t){this.event=t,this.touchLeaveCallback&&this.touchLeaveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault()},onTouchMove:function(t){this.event=t,this.touchMoveCallback&&this.touchMoveCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.updatePointer(t.changedTouches[e])},onTouchEnd:function(t){this.event=t,this.touchEndCallback&&this.touchEndCallback.call(this.callbackContext,t),this.preventDefault&&t.preventDefault();for(var e=0;e<t.changedTouches.length;e++)this.game.input.stopPointer(t.changedTouches[e])},stop:function(){this.game.device.touch&&(this.game.canvas.removeEventListener("touchstart",this._onTouchStart),this.game.canvas.removeEventListener("touchmove",this._onTouchMove),this.game.canvas.removeEventListener("touchend",this._onTouchEnd),this.game.canvas.removeEventListener("touchenter",this._onTouchEnter),this.game.canvas.removeEventListener("touchleave",this._onTouchLeave),this.game.canvas.removeEventListener("touchcancel",this._onTouchCancel))}},n.Touch.prototype.constructor=n.Touch,n.Gamepad=function(t){this.game=t,this._gamepads=[new n.SinglePad(t,this),new n.SinglePad(t,this),new n.SinglePad(t,this),new n.SinglePad(t,this)],this._gamepadIndexMap={},this._rawPads=[],this._active=!1,this.disabled=!1,this._gamepadSupportAvailable=!!navigator.webkitGetGamepads||!!navigator.webkitGamepads||-1!=navigator.userAgent.indexOf("Firefox/")||!!navigator.getGamepads,this._prevRawGamepadTypes=[],this._prevTimestamps=[],this.callbackContext=this,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this._ongamepadconnected=null,this._gamepaddisconnected=null},n.Gamepad.prototype={addCallbacks:function(t,e){"undefined"!=typeof e&&(this.onConnectCallback="function"==typeof e.onConnect?e.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof e.onDisconnect?e.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof e.onDown?e.onDown:this.onDownCallback,this.onUpCallback="function"==typeof e.onUp?e.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof e.onAxis?e.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof e.onFloat?e.onFloat:this.onFloatCallback)},start:function(){if(!this._active){this._active=!0;var t=this;this._ongamepadconnected=function(e){var n=e.gamepad;t._rawPads.push(n),t._gamepads[n.index].connect(n)},window.addEventListener("gamepadconnected",this._ongamepadconnected,!1),this._ongamepaddisconnected=function(e){var n=e.gamepad;for(var i in t._rawPads)t._rawPads[i].index===n.index&&t._rawPads.splice(i,1);t._gamepads[n.index].disconnect()},window.addEventListener("gamepaddisconnected",this._ongamepaddisconnected,!1)}},update:function(){this._pollGamepads();for(var t=0;t<this._gamepads.length;t++)this._gamepads[t]._connected&&this._gamepads[t].pollStatus()},_pollGamepads:function(){var t=navigator.getGamepads||navigator.webkitGetGamepads&&navigator.webkitGetGamepads()||navigator.webkitGamepads;if(t){this._rawPads=[];for(var e=!1,n=0;n<t.length&&(typeof t[n]!==this._prevRawGamepadTypes[n]&&(e=!0,this._prevRawGamepadTypes[n]=typeof t[n]),t[n]&&this._rawPads.push(t[n]),3!==n);n++);if(e){for(var i,r={rawIndices:{},padIndices:{}},o=0;o<this._gamepads.length;o++)if(i=this._gamepads[o],i.connected)for(var a=0;a<this._rawPads.length;a++)this._rawPads[a].index===i.index&&(r.rawIndices[i.index]=!0,r.padIndices[o]=!0);for(var s=0;s<this._gamepads.length;s++)if(i=this._gamepads[s],!r.padIndices[s]){this._rawPads.length<1&&i.disconnect();for(var l=0;l<this._rawPads.length&&!r.padIndices[s];l++){var u=this._rawPads[l];if(u){if(r.rawIndices[u.index]){i.disconnect();continue}i.connect(u),r.rawIndices[u.index]=!0,r.padIndices[s]=!0}else i.disconnect()}}}}},setDeadZones:function(t){for(var e=0;e<this._gamepads.length;e++)this._gamepads[e].deadZone=t},stop:function(){this._active=!1,window.removeEventListener("gamepadconnected",this._ongamepadconnected),window.removeEventListener("gamepaddisconnected",this._ongamepaddisconnected)},reset:function(){this.update();for(var t=0;t<this._gamepads.length;t++)this._gamepads[t].reset()},justPressed:function(t,e){for(var n=0;n<this._gamepads.length;n++)if(this._gamepads[n].justPressed(t,e)===!0)return!0;return!1},justReleased:function(t,e){for(var n=0;n<this._gamepads.length;n++)if(this._gamepads[n].justReleased(t,e)===!0)return!0;return!1},isDown:function(t){for(var e=0;e<this._gamepads.length;e++)if(this._gamepads[e].isDown(t)===!0)return!0;return!1}},n.Gamepad.prototype.constructor=n.Gamepad,Object.defineProperty(n.Gamepad.prototype,"active",{get:function(){return this._active}}),Object.defineProperty(n.Gamepad.prototype,"supported",{get:function(){return this._gamepadSupportAvailable}}),Object.defineProperty(n.Gamepad.prototype,"padsConnected",{get:function(){return this._rawPads.length}}),Object.defineProperty(n.Gamepad.prototype,"pad1",{get:function(){return this._gamepads[0]}}),Object.defineProperty(n.Gamepad.prototype,"pad2",{get:function(){return this._gamepads[1]}}),Object.defineProperty(n.Gamepad.prototype,"pad3",{get:function(){return this._gamepads[2]}}),Object.defineProperty(n.Gamepad.prototype,"pad4",{get:function(){return this._gamepads[3]}}),n.Gamepad.BUTTON_0=0,n.Gamepad.BUTTON_1=1,n.Gamepad.BUTTON_2=2,n.Gamepad.BUTTON_3=3,n.Gamepad.BUTTON_4=4,n.Gamepad.BUTTON_5=5,n.Gamepad.BUTTON_6=6,n.Gamepad.BUTTON_7=7,n.Gamepad.BUTTON_8=8,n.Gamepad.BUTTON_9=9,n.Gamepad.BUTTON_10=10,n.Gamepad.BUTTON_11=11,n.Gamepad.BUTTON_12=12,n.Gamepad.BUTTON_13=13,n.Gamepad.BUTTON_14=14,n.Gamepad.BUTTON_15=15,n.Gamepad.AXIS_0=0,n.Gamepad.AXIS_1=1,n.Gamepad.AXIS_2=2,n.Gamepad.AXIS_3=3,n.Gamepad.AXIS_4=4,n.Gamepad.AXIS_5=5,n.Gamepad.AXIS_6=6,n.Gamepad.AXIS_7=7,n.Gamepad.AXIS_8=8,n.Gamepad.AXIS_9=9,n.Gamepad.XBOX360_A=0,n.Gamepad.XBOX360_B=1,n.Gamepad.XBOX360_X=2,n.Gamepad.XBOX360_Y=3,n.Gamepad.XBOX360_LEFT_BUMPER=4,n.Gamepad.XBOX360_RIGHT_BUMPER=5,n.Gamepad.XBOX360_LEFT_TRIGGER=6,n.Gamepad.XBOX360_RIGHT_TRIGGER=7,n.Gamepad.XBOX360_BACK=8,n.Gamepad.XBOX360_START=9,n.Gamepad.XBOX360_STICK_LEFT_BUTTON=10,n.Gamepad.XBOX360_STICK_RIGHT_BUTTON=11,n.Gamepad.XBOX360_DPAD_LEFT=14,n.Gamepad.XBOX360_DPAD_RIGHT=15,n.Gamepad.XBOX360_DPAD_UP=12,n.Gamepad.XBOX360_DPAD_DOWN=13,n.Gamepad.XBOX360_STICK_LEFT_X=0,n.Gamepad.XBOX360_STICK_LEFT_Y=1,n.Gamepad.XBOX360_STICK_RIGHT_X=2,n.Gamepad.XBOX360_STICK_RIGHT_Y=3,n.SinglePad=function(t,e){this.game=t,this._padParent=e,this._index=null,this._rawPad=null,this._connected=!1,this._prevTimestamp=null,this._rawButtons=[],this._buttons=[],this._axes=[],this._hotkeys=[],this.callbackContext=this,this.onConnectCallback=null,this.onDisconnectCallback=null,this.onDownCallback=null,this.onUpCallback=null,this.onAxisCallback=null,this.onFloatCallback=null,this.deadZone=.26},n.SinglePad.prototype={addCallbacks:function(t,e){"undefined"!=typeof e&&(this.onConnectCallback="function"==typeof e.onConnect?e.onConnect:this.onConnectCallback,this.onDisconnectCallback="function"==typeof e.onDisconnect?e.onDisconnect:this.onDisconnectCallback,this.onDownCallback="function"==typeof e.onDown?e.onDown:this.onDownCallback,this.onUpCallback="function"==typeof e.onUp?e.onUp:this.onUpCallback,this.onAxisCallback="function"==typeof e.onAxis?e.onAxis:this.onAxisCallback,this.onFloatCallback="function"==typeof e.onFloat?e.onFloat:this.onFloatCallback)},addButton:function(t){return this._hotkeys[t]=new n.GamepadButton(this.game,t),this._hotkeys[t]},pollStatus:function(){if(!this._rawPad.timestamp||this._rawPad.timestamp!=this._prevTimestamp){for(var t=0;t<this._rawPad.buttons.length;t+=1){var e=this._rawPad.buttons[t];this._rawButtons[t]!==e&&(1===e?this.processButtonDown(t,e):0===e?this.processButtonUp(t,e):this.processButtonFloat(t,e),this._rawButtons[t]=e)}for(var n=this._rawPad.axes,i=0;i<n.length;i+=1){var r=n[i];this.processAxisChange(r>0&&r>this.deadZone||0>r&&r<-this.deadZone?{axis:i,value:r}:{axis:i,value:0})}this._prevTimestamp=this._rawPad.timestamp}},connect:function(t){var e=!this._connected;this._index=t.index,this._connected=!0,this._rawPad=t,this._rawButtons=t.buttons,this._axes=t.axes,e&&this._padParent.onConnectCallback&&this._padParent.onConnectCallback.call(this._padParent.callbackContext,this._index),e&&this.onConnectCallback&&this.onConnectCallback.call(this.callbackContext)},disconnect:function(){var t=this._connected;this._connected=!1,this._rawPad=void 0,this._rawButtons=[],this._buttons=[];var e=this._index;this._index=null,t&&this._padParent.onDisconnectCallback&&this._padParent.onDisconnectCallback.call(this._padParent.callbackContext,e),t&&this.onDisconnectCallback&&this.onDisconnectCallback.call(this.callbackContext)},processAxisChange:function(t){this.game.input.disabled||this.game.input.gamepad.disabled||this._axes[t.axis]!==t.value&&(this._axes[t.axis]=t.value,this._padParent.onAxisCallback&&this._padParent.onAxisCallback.call(this._padParent.callbackContext,t,this._index),this.onAxisCallback&&this.onAxisCallback.call(this.callbackContext,t))},processButtonDown:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onDownCallback&&this._padParent.onDownCallback.call(this._padParent.callbackContext,t,e,this._index),this.onDownCallback&&this.onDownCallback.call(this.callbackContext,t,e),this._buttons[t]&&this._buttons[t].isDown?this._buttons[t].duration=this.game.time.now-this._buttons[t].timeDown:this._buttons[t]?(this._buttons[t].isDown=!0,this._buttons[t].timeDown=this.game.time.now,this._buttons[t].duration=0,this._buttons[t].value=e):this._buttons[t]={isDown:!0,timeDown:this.game.time.now,timeUp:0,duration:0,value:e},this._hotkeys[t]&&this._hotkeys[t].processButtonDown(e))},processButtonUp:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onUpCallback&&this._padParent.onUpCallback.call(this._padParent.callbackContext,t,e,this._index),this.onUpCallback&&this.onUpCallback.call(this.callbackContext,t,e),this._hotkeys[t]&&this._hotkeys[t].processButtonUp(e),this._buttons[t]?(this._buttons[t].isDown=!1,this._buttons[t].timeUp=this.game.time.now,this._buttons[t].value=e):this._buttons[t]={isDown:!1,timeDown:this.game.time.now,timeUp:this.game.time.now,duration:0,value:e})},processButtonFloat:function(t,e){this.game.input.disabled||this.game.input.gamepad.disabled||(this._padParent.onFloatCallback&&this._padParent.onFloatCallback.call(this._padParent.callbackContext,t,e,this._index),this.onFloatCallback&&this.onFloatCallback.call(this.callbackContext,t,e),this._buttons[t]?this._buttons[t].value=e:this._buttons[t]={value:e},this._hotkeys[t]&&this._hotkeys[t].processButtonFloat(e))},axis:function(t){return this._axes[t]?this._axes[t]:!1},isDown:function(t){return this._buttons[t]?this._buttons[t].isDown:!1},justReleased:function(t,e){return"undefined"==typeof e&&(e=250),this._buttons[t]&&this._buttons[t].isDown===!1&&this.game.time.now-this._buttons[t].timeUp<e},justPressed:function(t,e){return"undefined"==typeof e&&(e=250),this._buttons[t]&&this._buttons[t].isDown&&this._buttons[t].duration<e},buttonValue:function(t){return this._buttons[t]?this._buttons[t].value:!1},reset:function(){for(var t=0;t<this._buttons.length;t++)this._buttons[t]=0;for(var e=0;e<this._axes.length;e++)this._axes[e]=0}},n.SinglePad.prototype.constructor=n.SinglePad,Object.defineProperty(n.SinglePad.prototype,"connected",{get:function(){return this._connected}}),Object.defineProperty(n.SinglePad.prototype,"index",{get:function(){return this._index}}),n.GamepadButton=function(t,e){this.game=t,this.isDown=!1,this.isUp=!0,this.timeDown=0,this.duration=0,this.timeUp=0,this.repeats=0,this.value=0,this.buttonCode=e,this.onDown=new n.Signal,this.onUp=new n.Signal,this.onFloat=new n.Signal},n.GamepadButton.prototype={processButtonDown:function(t){this.isDown?(this.duration=this.game.time.now-this.timeDown,this.repeats++):(this.isDown=!0,this.isUp=!1,this.timeDown=this.game.time.now,this.duration=0,this.repeats=0,this.value=t,this.onDown.dispatch(this,t))},processButtonUp:function(t){this.isDown=!1,this.isUp=!0,this.timeUp=this.game.time.now,this.value=t,this.onUp.dispatch(this,t)},processButtonFloat:function(t){this.value=t,this.onFloat.dispatch(this,t)},justPressed:function(t){return"undefined"==typeof t&&(t=250),this.isDown&&this.duration<t},justReleased:function(t){return"undefined"==typeof t&&(t=250),this.isDown===!1&&this.game.time.now-this.timeUp<t}},n.GamepadButton.prototype.constructor=n.GamepadButton,n.InputHandler=function(t){this.sprite=t,this.game=t.game,this.enabled=!1,this.priorityID=0,this.useHandCursor=!1,this._setHandCursor=!1,this.isDragged=!1,this.allowHorizontalDrag=!0,this.allowVerticalDrag=!0,this.bringToTop=!1,this.snapOffset=null,this.snapOnDrag=!1,this.snapOnRelease=!1,this.snapX=0,this.snapY=0,this.snapOffsetX=0,this.snapOffsetY=0,this.pixelPerfectOver=!1,this.pixelPerfectClick=!1,this.pixelPerfectAlpha=255,this.draggable=!1,this.boundsRect=null,this.boundsSprite=null,this.consumePointerEvent=!1,this._dragPhase=!1,this._wasEnabled=!1,this._tempPoint=new n.Point,this._pointerData=[],this._pointerData.push({id:0,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1})},n.InputHandler.prototype={start:function(t,e){if(t=t||0,"undefined"==typeof e&&(e=!1),this.enabled===!1){this.game.input.interactiveItems.add(this),this.useHandCursor=e,this.priorityID=t;for(var i=0;10>i;i++)this._pointerData[i]={id:i,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1};this.snapOffset=new n.Point,this.enabled=!0,this._wasEnabled=!0,this.sprite.events&&null===this.sprite.events.onInputOver&&(this.sprite.events.onInputOver=new n.Signal,this.sprite.events.onInputOut=new n.Signal,this.sprite.events.onInputDown=new n.Signal,this.sprite.events.onInputUp=new n.Signal,this.sprite.events.onDragStart=new n.Signal,this.sprite.events.onDragStop=new n.Signal)}return this.sprite.events.onAddedToGroup.add(this.addedToGroup,this),this.sprite.events.onRemovedFromGroup.add(this.removedFromGroup,this),this.sprite},addedToGroup:function(){this._dragPhase||this._wasEnabled&&!this.enabled&&this.start()},removedFromGroup:function(){this._dragPhase||(this.enabled?(this._wasEnabled=!0,this.stop()):this._wasEnabled=!1)},reset:function(){this.enabled=!1;for(var t=0;10>t;t++)this._pointerData[t]={id:t,x:0,y:0,isDown:!1,isUp:!1,isOver:!1,isOut:!1,timeOver:0,timeOut:0,timeDown:0,timeUp:0,downDuration:0,isDragged:!1}},stop:function(){this.enabled!==!1&&(this.enabled=!1,this.game.input.interactiveItems.remove(this))},destroy:function(){this.sprite&&(this._setHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.enabled=!1,this.game.input.interactiveItems.remove(this),this._pointerData.length=0,this.boundsRect=null,this.boundsSprite=null,this.sprite=null)},validForInput:function(t,e){return 0===this.sprite.scale.x||0===this.sprite.scale.y||this.priorityID<this.game.input.minPriorityID?!1:this.pixelPerfectClick||this.pixelPerfectOver?!0:this.priorityID>t||this.priorityID===t&&this.sprite._cache[3]<e?!0:!1},pointerX:function(t){return t=t||0,this._pointerData[t].x},pointerY:function(t){return t=t||0,this._pointerData[t].y},pointerDown:function(t){return t=t||0,this._pointerData[t].isDown},pointerUp:function(t){return t=t||0,this._pointerData[t].isUp},pointerTimeDown:function(t){return t=t||0,this._pointerData[t].timeDown},pointerTimeUp:function(t){return t=t||0,this._pointerData[t].timeUp},pointerOver:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOver;for(var e=0;10>e;e++)if(this._pointerData[e].isOver)return!0}return!1},pointerOut:function(t){if(this.enabled){if("undefined"!=typeof t)return this._pointerData[t].isOut;for(var e=0;10>e;e++)if(this._pointerData[e].isOut)return!0}return!1},pointerTimeOver:function(t){return t=t||0,this._pointerData[t].timeOver},pointerTimeOut:function(t){return t=t||0,this._pointerData[t].timeOut},pointerDragged:function(t){return t=t||0,this._pointerData[t].isDragged},checkPointerDown:function(t){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,t,this._tempPoint)?this.pixelPerfectClick?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0:!1},checkPointerOver:function(t){return this.enabled&&this.sprite&&this.sprite.parent&&this.sprite.visible&&this.sprite.parent.visible&&this.game.input.hitTest(this.sprite,t,this._tempPoint)?this.pixelPerfectOver?this.checkPixel(this._tempPoint.x,this._tempPoint.y):!0:!1},checkPixel:function(t,e,n){if(this.sprite.texture.baseTexture.source){if(this.game.input.hitContext.clearRect(0,0,1,1),null===t&&null===e){this.game.input.getLocalPosition(this.sprite,n,this._tempPoint);var t=this._tempPoint.x,e=this._tempPoint.y}0!==this.sprite.anchor.x&&(t-=-this.sprite.texture.frame.width*this.sprite.anchor.x),0!==this.sprite.anchor.y&&(e-=-this.sprite.texture.frame.height*this.sprite.anchor.y),t+=this.sprite.texture.frame.x,e+=this.sprite.texture.frame.y,this.game.input.hitContext.drawImage(this.sprite.texture.baseTexture.source,t,e,1,1,0,0,1,1);var i=this.game.input.hitContext.getImageData(0,0,1,1);if(i.data[3]>=this.pixelPerfectAlpha)return!0}return!1},update:function(t){return null!==this.sprite&&void 0!==this.sprite.parent?this.enabled&&this.sprite.visible&&this.sprite.parent.visible?this.draggable&&this._draggedPointerID==t.id?this.updateDrag(t):this._pointerData[t.id].isOver===!0?this.checkPointerOver(t)?(this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,!0):(this._pointerOutHandler(t),!1):void 0:(this._pointerOutHandler(t),!1):void 0},_pointerOverHandler:function(t){null!==this.sprite&&this._pointerData[t.id].isOver===!1&&(this._pointerData[t.id].isOver=!0,this._pointerData[t.id].isOut=!1,this._pointerData[t.id].timeOver=this.game.time.now,this._pointerData[t.id].x=t.x-this.sprite.x,this._pointerData[t.id].y=t.y-this.sprite.y,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.canvas.style.cursor="pointer",this._setHandCursor=!0),this.sprite&&this.sprite.events&&this.sprite.events.onInputOver.dispatch(this.sprite,t))},_pointerOutHandler:function(t){null!==this.sprite&&(this._pointerData[t.id].isOver=!1,this._pointerData[t.id].isOut=!0,this._pointerData[t.id].timeOut=this.game.time.now,this.useHandCursor&&this._pointerData[t.id].isDragged===!1&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1),this.sprite&&this.sprite.events&&this.sprite.events.onInputOut.dispatch(this.sprite,t))},_touchedHandler:function(t){if(null!==this.sprite){if(this._pointerData[t.id].isDown===!1&&this._pointerData[t.id].isOver===!0){if(this.pixelPerfectClick&&!this.checkPixel(null,null,t))return;this._pointerData[t.id].isDown=!0,this._pointerData[t.id].isUp=!1,this._pointerData[t.id].timeDown=this.game.time.now,this.sprite&&this.sprite.events&&this.sprite.events.onInputDown.dispatch(this.sprite,t),this.draggable&&this.isDragged===!1&&this.startDrag(t),this.bringToTop&&this.sprite.bringToTop()}return this.consumePointerEvent}},_releasedHandler:function(t){null!==this.sprite&&this._pointerData[t.id].isDown&&t.isUp&&(this._pointerData[t.id].isDown=!1,this._pointerData[t.id].isUp=!0,this._pointerData[t.id].timeUp=this.game.time.now,this._pointerData[t.id].downDuration=this._pointerData[t.id].timeUp-this._pointerData[t.id].timeDown,this.checkPointerOver(t)?this.sprite&&this.sprite.events&&this.sprite.events.onInputUp.dispatch(this.sprite,t,!0):(this.sprite&&this.sprite.events&&this.sprite.events.onInputUp.dispatch(this.sprite,t,!1),this.useHandCursor&&(this.game.canvas.style.cursor="default",this._setHandCursor=!1)),this.draggable&&this.isDragged&&this._draggedPointerID===t.id&&this.stopDrag(t))
},updateDrag:function(t){return t.isUp?(this.stopDrag(t),!1):(this.sprite.fixedToCamera?(this.allowHorizontalDrag&&(this.sprite.cameraOffset.x=t.x+this._dragPoint.x+this.dragOffset.x),this.allowVerticalDrag&&(this.sprite.cameraOffset.y=t.y+this._dragPoint.y+this.dragOffset.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)):(this.allowHorizontalDrag&&(this.sprite.x=t.x+this._dragPoint.x+this.dragOffset.x),this.allowVerticalDrag&&(this.sprite.y=t.y+this._dragPoint.y+this.dragOffset.y),this.boundsRect&&this.checkBoundsRect(),this.boundsSprite&&this.checkBoundsSprite(),this.snapOnDrag&&(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),!0)},justOver:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOver&&this.overDuration(t)<e},justOut:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isOut&&this.game.time.now-this._pointerData[t].timeOut<e},justPressed:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isDown&&this.downDuration(t)<e},justReleased:function(t,e){return t=t||0,e=e||500,this._pointerData[t].isUp&&this.game.time.now-this._pointerData[t].timeUp<e},overDuration:function(t){return t=t||0,this._pointerData[t].isOver?this.game.time.now-this._pointerData[t].timeOver:-1},downDuration:function(t){return t=t||0,this._pointerData[t].isDown?this.game.time.now-this._pointerData[t].timeDown:-1},enableDrag:function(t,e,i,r,o,a){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=255),"undefined"==typeof o&&(o=null),"undefined"==typeof a&&(a=null),this._dragPoint=new n.Point,this.draggable=!0,this.bringToTop=e,this.dragOffset=new n.Point,this.dragFromCenter=t,this.pixelPerfect=i,this.pixelPerfectAlpha=r,o&&(this.boundsRect=o),a&&(this.boundsSprite=a)},disableDrag:function(){if(this._pointerData)for(var t=0;10>t;t++)this._pointerData[t].isDragged=!1;this.draggable=!1,this.isDragged=!1,this._draggedPointerID=-1},startDrag:function(t){if(this.isDragged=!0,this._draggedPointerID=t.id,this._pointerData[t.id].isDragged=!0,this.sprite.fixedToCamera)this.dragFromCenter?(this.sprite.centerOn(t.x,t.y),this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y)):this._dragPoint.setTo(this.sprite.cameraOffset.x-t.x,this.sprite.cameraOffset.y-t.y);else if(this.dragFromCenter){var e=this.sprite.getBounds();this.sprite.x=t.x+(this.sprite.x-e.centerX),this.sprite.y=t.y+(this.sprite.y-e.centerY),this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y)}else this._dragPoint.setTo(this.sprite.x-t.x,this.sprite.y-t.y);this.updateDrag(t),this.bringToTop&&(this._dragPhase=!0,this.sprite.bringToTop()),this.sprite.events.onDragStart.dispatch(this.sprite,t)},stopDrag:function(t){this.isDragged=!1,this._draggedPointerID=-1,this._pointerData[t.id].isDragged=!1,this._dragPhase=!1,this.snapOnRelease&&(this.sprite.fixedToCamera?(this.sprite.cameraOffset.x=Math.round((this.sprite.cameraOffset.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.cameraOffset.y=Math.round((this.sprite.cameraOffset.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY):(this.sprite.x=Math.round((this.sprite.x-this.snapOffsetX%this.snapX)/this.snapX)*this.snapX+this.snapOffsetX%this.snapX,this.sprite.y=Math.round((this.sprite.y-this.snapOffsetY%this.snapY)/this.snapY)*this.snapY+this.snapOffsetY%this.snapY)),this.sprite.events.onDragStop.dispatch(this.sprite,t),this.checkPointerOver(t)===!1&&this._pointerOutHandler(t)},setDragLock:function(t,e){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=!0),this.allowHorizontalDrag=t,this.allowVerticalDrag=e},enableSnap:function(t,e,n,i,r,o){"undefined"==typeof n&&(n=!0),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),this.snapX=t,this.snapY=e,this.snapOffsetX=r,this.snapOffsetY=o,this.snapOnDrag=n,this.snapOnRelease=i},disableSnap:function(){this.snapOnDrag=!1,this.snapOnRelease=!1},checkBoundsRect:function(){this.sprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsRect.left?this.sprite.cameraOffset.x=this.boundsRect.cameraOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsRect.right&&(this.sprite.cameraOffset.x=this.boundsRect.right-this.sprite.width),this.sprite.cameraOffset.y<this.boundsRect.top?this.sprite.cameraOffset.y=this.boundsRect.top:this.sprite.cameraOffset.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.cameraOffset.y=this.boundsRect.bottom-this.sprite.height)):(this.sprite.x<this.boundsRect.left?this.sprite.x=this.boundsRect.x:this.sprite.x+this.sprite.width>this.boundsRect.right&&(this.sprite.x=this.boundsRect.right-this.sprite.width),this.sprite.y<this.boundsRect.top?this.sprite.y=this.boundsRect.top:this.sprite.y+this.sprite.height>this.boundsRect.bottom&&(this.sprite.y=this.boundsRect.bottom-this.sprite.height))},checkBoundsSprite:function(){this.sprite.fixedToCamera&&this.boundsSprite.fixedToCamera?(this.sprite.cameraOffset.x<this.boundsSprite.camerOffset.x?this.sprite.cameraOffset.x=this.boundsSprite.camerOffset.x:this.sprite.cameraOffset.x+this.sprite.width>this.boundsSprite.camerOffset.x+this.boundsSprite.width&&(this.sprite.cameraOffset.x=this.boundsSprite.camerOffset.x+this.boundsSprite.width-this.sprite.width),this.sprite.cameraOffset.y<this.boundsSprite.camerOffset.y?this.sprite.cameraOffset.y=this.boundsSprite.camerOffset.y:this.sprite.cameraOffset.y+this.sprite.height>this.boundsSprite.camerOffset.y+this.boundsSprite.height&&(this.sprite.cameraOffset.y=this.boundsSprite.camerOffset.y+this.boundsSprite.height-this.sprite.height)):(this.sprite.x<this.boundsSprite.x?this.sprite.x=this.boundsSprite.x:this.sprite.x+this.sprite.width>this.boundsSprite.x+this.boundsSprite.width&&(this.sprite.x=this.boundsSprite.x+this.boundsSprite.width-this.sprite.width),this.sprite.y<this.boundsSprite.y?this.sprite.y=this.boundsSprite.y:this.sprite.y+this.sprite.height>this.boundsSprite.y+this.boundsSprite.height&&(this.sprite.y=this.boundsSprite.y+this.boundsSprite.height-this.sprite.height))}},n.InputHandler.prototype.constructor=n.InputHandler,n.Events=function(t){this.parent=t,this.onAddedToGroup=new n.Signal,this.onRemovedFromGroup=new n.Signal,this.onKilled=new n.Signal,this.onRevived=new n.Signal,this.onOutOfBounds=new n.Signal,this.onEnterBounds=new n.Signal,this.onInputOver=null,this.onInputOut=null,this.onInputDown=null,this.onInputUp=null,this.onDragStart=null,this.onDragStop=null,this.onAnimationStart=null,this.onAnimationComplete=null,this.onAnimationLoop=null},n.Events.prototype={destroy:function(){this.parent=null,this.onAddedToGroup.dispose(),this.onRemovedFromGroup.dispose(),this.onKilled.dispose(),this.onRevived.dispose(),this.onOutOfBounds.dispose(),this.onInputOver&&(this.onInputOver.dispose(),this.onInputOut.dispose(),this.onInputDown.dispose(),this.onInputUp.dispose(),this.onDragStart.dispose(),this.onDragStop.dispose()),this.onAnimationStart&&(this.onAnimationStart.dispose(),this.onAnimationComplete.dispose(),this.onAnimationLoop.dispose())}},n.Events.prototype.constructor=n.Events,n.GameObjectFactory=function(t){this.game=t,this.world=this.game.world},n.GameObjectFactory.prototype={existing:function(t){return this.world.add(t)},image:function(t,e,i,r,o){return"undefined"==typeof o&&(o=this.world),o.add(new n.Image(this.game,t,e,i,r))},sprite:function(t,e,n,i,r){return"undefined"==typeof r&&(r=this.world),r.create(t,e,n,i)},tween:function(t){return this.game.tweens.create(t)},group:function(t,e,i,r,o){return new n.Group(this.game,t,e,i,r,o)},physicsGroup:function(t,e,i,r){return new n.Group(this.game,e,i,r,!0,t)},spriteBatch:function(t,e,i){return"undefined"==typeof e&&(e="group"),"undefined"==typeof i&&(i=!1),new n.SpriteBatch(this.game,t,e,i)},audio:function(t,e,n,i){return this.game.sound.add(t,e,n,i)},sound:function(t,e,n,i){return this.game.sound.add(t,e,n,i)},tileSprite:function(t,e,i,r,o,a,s){return"undefined"==typeof s&&(s=this.world),s.add(new n.TileSprite(this.game,t,e,i,r,o,a))},text:function(t,e,i,r,o){return"undefined"==typeof o&&(o=this.world),o.add(new n.Text(this.game,t,e,i,r))},button:function(t,e,i,r,o,a,s,l,u,h){return"undefined"==typeof h&&(h=this.world),h.add(new n.Button(this.game,t,e,i,r,o,a,s,l,u))},graphics:function(t,e,i){return"undefined"==typeof i&&(i=this.world),i.add(new n.Graphics(this.game,t,e))},emitter:function(t,e,i){return this.game.particles.add(new n.Particles.Arcade.Emitter(this.game,t,e,i))},retroFont:function(t,e,i,r,o,a,s,l,u){return new n.RetroFont(this.game,t,e,i,r,o,a,s,l,u)},bitmapText:function(t,e,i,r,o,a){return"undefined"==typeof a&&(a=this.world),a.add(new n.BitmapText(this.game,t,e,i,r,o))},tilemap:function(t,e,i,r,o){return new n.Tilemap(this.game,t,e,i,r,o)},renderTexture:function(t,e,i,r){("undefined"==typeof i||""===i)&&(i=this.game.rnd.uuid()),"undefined"==typeof r&&(r=!1);var o=new n.RenderTexture(this.game,t,e,i);return r&&this.game.cache.addRenderTexture(i,o),o},bitmapData:function(t,e,i,r){"undefined"==typeof r&&(r=!1),("undefined"==typeof i||""===i)&&(i=this.game.rnd.uuid());var o=new n.BitmapData(this.game,i,t,e);return r&&this.game.cache.addBitmapData(i,o),o},filter:function(t){var e=Array.prototype.splice.call(arguments,1),t=new n.Filter[t](this.game);return t.init.apply(t,e),t}},n.GameObjectFactory.prototype.constructor=n.GameObjectFactory,n.GameObjectCreator=function(t){this.game=t,this.world=this.game.world},n.GameObjectCreator.prototype={image:function(t,e,i,r){return new n.Image(this.game,t,e,i,r)},sprite:function(t,e,i,r){return new n.Sprite(this.game,t,e,i,r)},tween:function(t){return new n.Tween(t,this.game)},group:function(t,e,i,r,o){return new n.Group(this.game,null,e,i,r,o)},spriteBatch:function(t,e,i){return"undefined"==typeof e&&(e="group"),"undefined"==typeof i&&(i=!1),new n.SpriteBatch(this.game,t,e,i)},audio:function(t,e,n,i){return this.game.sound.add(t,e,n,i)},sound:function(t,e,n,i){return this.game.sound.add(t,e,n,i)},tileSprite:function(t,e,i,r,o,a){return new n.TileSprite(this.game,t,e,i,r,o,a)},text:function(t,e,i,r){return new n.Text(this.game,t,e,i,r)},button:function(t,e,i,r,o,a,s,l,u){return new n.Button(this.game,t,e,i,r,o,a,s,l,u)},graphics:function(t,e){return new n.Graphics(this.game,t,e)},emitter:function(t,e,i){return new n.Particles.Arcade.Emitter(this.game,t,e,i)},retroFont:function(t,e,i,r,o,a,s,l,u){return new n.RetroFont(this.game,t,e,i,r,o,a,s,l,u)},bitmapText:function(t,e,i,r,o){return new n.BitmapText(this.game,t,e,i,r,o)},tilemap:function(t,e,i,r,o){return new n.Tilemap(this.game,t,e,i,r,o)},renderTexture:function(t,e,i,r){("undefined"==typeof i||""===i)&&(i=this.game.rnd.uuid()),"undefined"==typeof r&&(r=!1);var o=new n.RenderTexture(this.game,t,e,i);return r&&this.game.cache.addRenderTexture(i,o),o},bitmapData:function(t,e,i,r){"undefined"==typeof r&&(r=!1),("undefined"==typeof i||""===i)&&(i=this.game.rnd.uuid());var o=new n.BitmapData(this.game,i,t,e);return r&&this.game.cache.addBitmapData(i,o),o},filter:function(t){var e=Array.prototype.splice.call(arguments,1),t=new n.Filter[t](this.game);return t.init.apply(t,e),t}},n.GameObjectCreator.prototype.constructor=n.GameObjectCreator,n.BitmapData=function(t,e,i,r){"undefined"==typeof i&&(i=100),"undefined"==typeof r&&(r=100),this.game=t,this.key=e,this.width=i,this.height=r,this.canvas=n.Canvas.create(i,r,"",!0),this.context=this.canvas.getContext("2d"),this.ctx=this.context,this.imageData=this.context.getImageData(0,0,i,r),this.data=this.imageData.data,this.pixels=null,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data,this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new n.Frame(0,0,0,i,r,"bitmapData",t.rnd.uuid()),this.type=n.BITMAPDATA,this.disableTextureUpload=!1,this.dirty=!1,this.cls=this.clear,this.update=this.refreshBuffer,this._tempR=0,this._tempG=0,this._tempB=0},n.BitmapData.prototype={add:function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)t[e].loadTexture&&t[e].loadTexture(this);else t.loadTexture(this)},clear:function(){this.context.clearRect(0,0,this.width,this.height),this.dirty=!0},fill:function(t,e,n,i){"undefined"==typeof i&&(i=1),this.context.fillStyle="rgba("+t+","+e+","+n+","+i+")",this.context.fillRect(0,0,this.width,this.height),this.dirty=!0},resize:function(t,e){(t!==this.width||e!==this.height)&&(this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e,this.textureFrame.width=t,this.textureFrame.height=e,this.refreshBuffer()),this.dirty=!0},refreshBuffer:function(t,e,n,i){"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.width),"undefined"==typeof i&&(i=this.height),this.imageData=this.context.getImageData(t,e,n,i),this.data=this.imageData.data,this.imageData.data.buffer?(this.buffer=this.imageData.data.buffer,this.pixels=new Uint32Array(this.buffer)):window.ArrayBuffer?(this.buffer=new ArrayBuffer(this.imageData.data.length),this.pixels=new Uint32Array(this.buffer)):this.pixels=this.imageData.data},processPixelRGB:function(t,e,i,r,o,a){"undefined"==typeof i&&(i=0),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=this.width),"undefined"==typeof a&&(a=this.height);for(var s=i+o,l=r+a,u=n.Color.createColor(),h={r:0,g:0,b:0,a:0},c=!1,d=r;l>d;d++)for(var p=i;s>p;p++)n.Color.unpackPixel(this.getPixel32(p,d),u),h=t.call(e,u,p,d),h!==!1&&null!==h&&void 0!==h&&(this.setPixel32(p,d,h.r,h.g,h.b,h.a,!1),c=!0);c&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)},processPixel:function(t,e,n,i,r,o){"undefined"==typeof n&&(n=0),"undefined"==typeof i&&(i=0),"undefined"==typeof r&&(r=this.width),"undefined"==typeof o&&(o=this.height);for(var a=n+r,s=i+o,l=0,u=0,h=!1,c=i;s>c;c++)for(var d=n;a>d;d++)l=this.getPixel32(d,c),u=t.call(e,l,d,c),u!==l&&(this.pixels[c*this.width+d]=u,h=!0);h&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0)},replaceRGB:function(t,e,i,r,o,a,s,l,u){var h=0,c=0,d=this.width,p=this.height,f=n.Color.packPixel(t,e,i,r);void 0!==u&&u instanceof n.Rectangle&&(h=u.x,c=u.y,d=u.width,p=u.height);for(var m=0;p>m;m++)for(var g=0;d>g;g++)this.getPixel32(h+g,c+m)===f&&this.setPixel32(h+g,c+m,o,a,s,l,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0},setHSL:function(t,e,i,r){if(("undefined"==typeof t||null===t)&&(t=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof i||null===i)&&(i=!1),t||e||i){"undefined"==typeof r&&(r=new n.Rectangle(0,0,this.width,this.height));for(var o=n.Color.createColor(),a=r.y;a<r.bottom;a++)for(var s=r.x;s<r.right;s++)n.Color.unpackPixel(this.getPixel32(s,a),o,!0),t&&(o.h=t),e&&(o.s=e),i&&(o.l=i),n.Color.HSLtoRGB(o.h,o.s,o.l,o),this.setPixel32(s,a,o.r,o.g,o.b,o.a,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0}},shiftHSL:function(t,e,i,r){if(("undefined"==typeof t||null===t)&&(t=!1),("undefined"==typeof e||null===e)&&(e=!1),("undefined"==typeof i||null===i)&&(i=!1),t||e||i){"undefined"==typeof r&&(r=new n.Rectangle(0,0,this.width,this.height));for(var o=n.Color.createColor(),a=r.y;a<r.bottom;a++)for(var s=r.x;s<r.right;s++)n.Color.unpackPixel(this.getPixel32(s,a),o,!0),t&&(o.h=this.game.math.wrap(o.h+t,0,1)),e&&(o.s=this.game.math.limitValue(o.s+e,0,1)),i&&(o.l=this.game.math.limitValue(o.l+i,0,1)),n.Color.HSLtoRGB(o.h,o.s,o.l,o),this.setPixel32(s,a,o.r,o.g,o.b,o.a,!1);this.context.putImageData(this.imageData,0,0),this.dirty=!0}},setPixel32:function(t,e,i,r,o,a,s){"undefined"==typeof s&&(s=!0),t>=0&&t<=this.width&&e>=0&&e<=this.height&&(this.pixels[e*this.width+t]=n.Device.LITTLE_ENDIAN?a<<24|o<<16|r<<8|i:i<<24|r<<16|o<<8|a,s&&(this.context.putImageData(this.imageData,0,0),this.dirty=!0))},setPixel:function(t,e,n,i,r,o){this.setPixel32(t,e,n,i,r,255,o)},getPixel:function(t,e,i){i||(i=n.Color.createColor());var r=~~(t+e*this.width);return r*=4,this.data[r]&&(i.r=this.data[r],i.g=this.data[++r],i.b=this.data[++r],i.a=this.data[++r]),i},getPixel32:function(t,e){return t>=0&&t<=this.width&&e>=0&&e<=this.height?this.pixels[e*this.width+t]:void 0},getPixelRGB:function(t,e,i,r,o){return n.Color.unpackPixel(this.getPixel32(t,e),i,r,o)},getPixels:function(t){return this.context.getImageData(t.x,t.y,t.width,t.height)},copyPixels:function(t,e,n,i){"string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,e.x,e.y,e.width,e.height,n,i,e.width,e.height),this.dirty=!0},draw:function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0),"string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,0,0,t.width,t.height,e,n,t.width,t.height),this.dirty=!0},drawSprite:function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0);var i=t.texture.frame;this.context.drawImage(t.texture.baseTexture.source,i.x,i.y,i.width,i.height,e,n,i.width,i.height),this.dirty=!0},alphaMask:function(t,e){var n=this.context.globalCompositeOperation;"string"==typeof e&&(e=this.game.cache.getImage(e)),e&&this.context.drawImage(e,0,0),this.context.globalCompositeOperation="source-atop","string"==typeof t&&(t=this.game.cache.getImage(t)),t&&this.context.drawImage(t,0,0),this.context.globalCompositeOperation=n,this.dirty=!0},extract:function(t,e,n,i,r){return"undefined"==typeof r&&(r=255),this.processPixelRGB(function(o,a,s){return o.r===e&&o.g===n&&o.b===i&&t.setPixel32(a,s,e,n,i,r,!1),!1},this),t.context.putImageData(t.imageData,0,0),t.dirty=!0,t},rect:function(t,e,n,i,r){"undefined"!=typeof r&&(this.context.fillStyle=r),this.context.fillRect(t,e,n,i),this.context.fill()},circle:function(t,e,n,i){"undefined"!=typeof i&&(this.context.fillStyle=i),this.context.beginPath(),this.context.arc(t,e,n,0,2*Math.PI,!1),this.context.closePath(),this.context.fill()},render:function(){!this.disableTextureUpload&&this.game.renderType===n.WEBGL&&this.dirty&&(PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl),this.dirty=!1)}},n.BitmapData.prototype.constructor=n.BitmapData,n.Sprite=function(t,e,i,r,o){e=e||0,i=i||0,r=r||null,o=o||null,this.game=t,this.name="",this.type=n.SPRITE,this.z=0,this.events=new n.Events(this),this.animations=new n.AnimationManager(this),this.key=r,this._frame=0,this._frameName="",PIXI.Sprite.call(this,PIXI.TextureCache.__default),this.loadTexture(r,o),this.position.set(e,i),this.world=new n.Point(e,i),this.autoCull=!1,this.input=null,this.body=null,this.health=1,this.lifespan=0,this.checkWorldBounds=!1,this.outOfBoundsKill=!1,this.debug=!1,this.cameraOffset=new n.Point,this._cache=[0,0,0,0,1,0,1,0,0],this._bounds=new n.Rectangle},n.Sprite.prototype=Object.create(PIXI.Sprite.prototype),n.Sprite.prototype.constructor=n.Sprite,n.Sprite.prototype.preUpdate=function(){if(1===this._cache[4]&&this.exists)return this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.body&&this.body.preUpdate(),this._cache[4]=0,!1;if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;if(this.lifespan>0&&(this.lifespan-=this.game.time.elapsed,this.lifespan<=0))return this.kill(),!1;if((this.autoCull||this.checkWorldBounds)&&this._bounds.copyFrom(this.getBounds()),this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this._bounds)),this.checkWorldBounds)if(1===this._cache[5]&&this.game.world.bounds.intersects(this._bounds))this._cache[5]=0,this.events.onEnterBounds.dispatch(this);else if(0===this._cache[5]&&!this.game.world.bounds.intersects(this._bounds)&&(this._cache[5]=1,this.events.onOutOfBounds.dispatch(this),this.outOfBoundsKill))return this.kill(),!1;this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),this.animations.update(),this.body&&this.body.preUpdate();for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},n.Sprite.prototype.update=function(){},n.Sprite.prototype.postUpdate=function(){this.key instanceof n.BitmapData&&this.key.render(),this.exists&&this.body&&this.body.postUpdate(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},n.Sprite.prototype.loadTexture=function(t,e){return e=e||0,t instanceof n.RenderTexture?(this.key=t.key,void this.setTexture(t)):t instanceof n.BitmapData?(this.key=t,void this.setTexture(t.texture)):t instanceof PIXI.Texture?(this.key=t,void this.setTexture(t)):null===t||"undefined"==typeof t?(this.key="__default",void this.setTexture(PIXI.TextureCache[this.key])):"string"!=typeof t||this.game.cache.checkImageKey(t)?this.game.cache.isSpriteSheet(t)?(this.key=t,this.animations.loadFrameData(this.game.cache.getFrameData(t)),"string"==typeof e?this.frameName=e:this.frame=e,void 0):(this.key=t,void this.setTexture(PIXI.TextureCache[t])):(this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]))},n.Sprite.prototype.crop=function(t){if("undefined"==typeof t||null===t)this.texture.hasOwnProperty("sourceWidth")&&this.texture.setFrame(new n.Rectangle(0,0,this.texture.sourceWidth,this.texture.sourceHeight));else if(this.texture instanceof PIXI.Texture){var e={};n.Utils.extend(!0,e,this.texture),e.sourceWidth=e.width,e.sourceHeight=e.height,e.frame=t,e.width=t.width,e.height=t.height,this.texture=e,this.texture.updateFrame=!0,PIXI.Texture.frameUpdates.push(this.texture)}else this.texture.setFrame(t)},n.Sprite.prototype.revive=function(t){return"undefined"==typeof t&&(t=1),this.alive=!0,this.exists=!0,this.visible=!0,this.health=t,this.events&&this.events.onRevived.dispatch(this),this},n.Sprite.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled.dispatch(this),this},n.Sprite.prototype.destroy=function(t){if(null!==this.game&&1!==this._cache[8]){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this)),this.input&&this.input.destroy(),this.animations&&this.animations.destroy(),this.body&&this.body.destroy(),this.events&&this.events.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},n.Sprite.prototype.damage=function(t){return this.alive&&(this.health-=t,this.health<=0&&this.kill()),this},n.Sprite.prototype.reset=function(t,e,n){return"undefined"==typeof n&&(n=1),this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.health=n,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this},n.Sprite.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},n.Sprite.prototype.play=function(t,e,n,i){return this.animations?this.animations.play(t,e,n,i):void 0},n.Sprite.prototype.overlap=function(t){return n.Rectangle.intersects(this.getBounds(),t.getBounds())},Object.defineProperty(n.Sprite.prototype,"angle",{get:function(){return n.Math.wrapAngle(n.Math.radToDeg(this.rotation))},set:function(t){this.rotation=n.Math.degToRad(n.Math.wrapAngle(t))}}),Object.defineProperty(n.Sprite.prototype,"deltaX",{get:function(){return this.world.x-this._cache[0]}}),Object.defineProperty(n.Sprite.prototype,"deltaY",{get:function(){return this.world.y-this._cache[1]}}),Object.defineProperty(n.Sprite.prototype,"deltaZ",{get:function(){return this.rotation-this._cache[2]}}),Object.defineProperty(n.Sprite.prototype,"inWorld",{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}),Object.defineProperty(n.Sprite.prototype,"inCamera",{get:function(){return this.game.world.camera.screenView.intersects(this.getBounds())}}),Object.defineProperty(n.Sprite.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){this.animations.frame=t}}),Object.defineProperty(n.Sprite.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){this.animations.frameName=t}}),Object.defineProperty(n.Sprite.prototype,"renderOrderID",{get:function(){return this._cache[3]}}),Object.defineProperty(n.Sprite.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new n.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(n.Sprite.prototype,"exists",{get:function(){return!!this._cache[6]},set:function(t){t?(this._cache[6]=1,this.body&&this.body.type===n.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._cache[6]=0,this.body&&this.body.type===n.Physics.P2JS&&this.body.removeFromWorld(),this.visible=!1)}}),Object.defineProperty(n.Sprite.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.Sprite.prototype,"smoothed",{get:function(){return!this.texture.baseTexture.scaleMode},set:function(t){t?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}),Object.defineProperty(n.Sprite.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t,this.body&&this.body.type===n.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(n.Sprite.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t,this.body&&this.body.type===n.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(n.Sprite.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.Image=function(t,e,i,r,o){e=e||0,i=i||0,r=r||null,o=o||null,this.game=t,this.exists=!0,this.name="",this.type=n.IMAGE,this.z=0,this.events=new n.Events(this),this.key=r,this._frame=0,this._frameName="",PIXI.Sprite.call(this,PIXI.TextureCache.__default),this.loadTexture(r,o),this.position.set(e,i),this.world=new n.Point(e,i),this.autoCull=!1,this.input=null,this.cameraOffset=new n.Point,this._cache=[0,0,0,0,1,0,1,0,0]},n.Image.prototype=Object.create(PIXI.Sprite.prototype),n.Image.prototype.constructor=n.Image,n.Image.prototype.preUpdate=function(){if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++);for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},n.Image.prototype.update=function(){},n.Image.prototype.postUpdate=function(){this.key instanceof n.BitmapData&&this.key.render(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},n.Image.prototype.loadTexture=function(t,e){if(e=e||0,t instanceof n.RenderTexture)return this.key=t.key,void this.setTexture(t);if(t instanceof n.BitmapData)return this.key=t,void this.setTexture(t.texture);if(t instanceof PIXI.Texture)return this.key=t,void this.setTexture(t);if(null===t||"undefined"==typeof t)return this.key="__default",void this.setTexture(PIXI.TextureCache[this.key]);if("string"==typeof t&&!this.game.cache.checkImageKey(t))return this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]);if(this.game.cache.isSpriteSheet(t)){this.key=t;var i=this.game.cache.getFrameData(t);return"string"==typeof e?(this._frame=0,this._frameName=e,void this.setTexture(PIXI.TextureCache[i.getFrameByName(e).uuid])):(this._frame=e,this._frameName="",void this.setTexture(PIXI.TextureCache[i.getFrame(e).uuid]))}return this.key=t,void this.setTexture(PIXI.TextureCache[t])},n.Image.prototype.crop=function(t){if("undefined"==typeof t||null===t)this.texture.hasOwnProperty("sourceWidth")&&this.texture.setFrame(new n.Rectangle(0,0,this.texture.sourceWidth,this.texture.sourceHeight));else if(this.texture instanceof PIXI.Texture){var e={};n.Utils.extend(!0,e,this.texture),e.sourceWidth=e.width,e.sourceHeight=e.height,e.frame=t,e.width=t.width,e.height=t.height,this.texture=e,this.texture.updateFrame=!0,PIXI.Texture.frameUpdates.push(this.texture)}else this.texture.setFrame(t)},n.Image.prototype.revive=function(){return this.alive=!0,this.exists=!0,this.visible=!0,this.events&&this.events.onRevived.dispatch(this),this},n.Image.prototype.kill=function(){return this.alive=!1,this.exists=!1,this.visible=!1,this.events&&this.events.onKilled.dispatch(this),this},n.Image.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this)),this.events&&this.events.destroy(),this.input&&this.input.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.alive=!1,this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},n.Image.prototype.reset=function(t,e){return this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this},n.Image.prototype.bringToTop=function(){return this.parent&&this.parent.bringToTop(this),this},Object.defineProperty(n.Image.prototype,"angle",{get:function(){return n.Math.wrapAngle(n.Math.radToDeg(this.rotation))},set:function(t){this.rotation=n.Math.degToRad(n.Math.wrapAngle(t))}}),Object.defineProperty(n.Image.prototype,"deltaX",{get:function(){return this.world.x-this._cache[0]}}),Object.defineProperty(n.Image.prototype,"deltaY",{get:function(){return this.world.y-this._cache[1]}}),Object.defineProperty(n.Image.prototype,"deltaZ",{get:function(){return this.rotation-this._cache[2]}}),Object.defineProperty(n.Image.prototype,"inWorld",{get:function(){return this.game.world.bounds.intersects(this.getBounds())}}),Object.defineProperty(n.Image.prototype,"inCamera",{get:function(){return this.game.world.camera.screenView.intersects(this.getBounds())}}),Object.defineProperty(n.Image.prototype,"frame",{get:function(){return this._frame},set:function(t){if(t!==this.frame&&this.game.cache.isSpriteSheet(this.key)){var e=this.game.cache.getFrameData(this.key);e&&t<e.total&&e.getFrame(t)&&(this.setTexture(PIXI.TextureCache[e.getFrame(t).uuid]),this._frame=t)}}}),Object.defineProperty(n.Image.prototype,"frameName",{get:function(){return this._frameName},set:function(t){if(t!==this.frameName&&this.game.cache.isSpriteSheet(this.key)){var e=this.game.cache.getFrameData(this.key);
e&&e.getFrameByName(t)&&(this.setTexture(PIXI.TextureCache[e.getFrameByName(t).uuid]),this._frameName=t)}}}),Object.defineProperty(n.Image.prototype,"renderOrderID",{get:function(){return this._cache[3]}}),Object.defineProperty(n.Image.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new n.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(n.Image.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.Image.prototype,"smoothed",{get:function(){return!this.texture.baseTexture.scaleMode},set:function(t){t?this.texture&&(this.texture.baseTexture.scaleMode=0):this.texture&&(this.texture.baseTexture.scaleMode=1)}}),Object.defineProperty(n.Image.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.TileSprite=function(t,e,i,r,o,a,s){e=e||0,i=i||0,r=r||256,o=o||256,a=a||null,s=s||null,this.game=t,this.name="",this.type=n.TILESPRITE,this.z=0,this.events=new n.Events(this),this.animations=new n.AnimationManager(this),this.key=a,this._frame=0,this._frameName="",this._scroll=new n.Point,PIXI.TilingSprite.call(this,PIXI.TextureCache.__default,r,o),this.loadTexture(a,s),this.position.set(e,i),this.input=null,this.world=new n.Point(e,i),this.autoCull=!1,this.checkWorldBounds=!1,this.cameraOffset=new n.Point,this.body=null,this._cache=[0,0,0,0,1,0,1,0,0]},n.TileSprite.prototype=Object.create(PIXI.TilingSprite.prototype),n.TileSprite.prototype.constructor=n.TileSprite,n.TileSprite.prototype.preUpdate=function(){if(1===this._cache[4]&&this.exists)return this.world.setTo(this.parent.position.x+this.position.x,this.parent.position.y+this.position.y),this.worldTransform.tx=this.world.x,this.worldTransform.ty=this.world.y,this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.body&&this.body.preUpdate(),this._cache[4]=0,!1;if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this._cache[3]=-1,!1;(this.autoCull||this.checkWorldBounds)&&this._bounds.copyFrom(this.getBounds()),this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this._bounds)),this.checkWorldBounds&&(1===this._cache[5]&&this.game.world.bounds.intersects(this._bounds)?(this._cache[5]=0,this.events.onEnterBounds.dispatch(this)):0!==this._cache[5]||this.game.world.bounds.intersects(this._bounds)||(this._cache[5]=1,this.events.onOutOfBounds.dispatch(this))),this.world.setTo(this.game.camera.x+this.worldTransform.tx,this.game.camera.y+this.worldTransform.ty),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),this.animations.update(),0!==this._scroll.x&&(this.tilePosition.x+=this._scroll.x*this.game.time.physicsElapsed),0!==this._scroll.y&&(this.tilePosition.y+=this._scroll.y*this.game.time.physicsElapsed),this.body&&this.body.preUpdate();for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},n.TileSprite.prototype.update=function(){},n.TileSprite.prototype.postUpdate=function(){this.exists&&this.body&&this.body.postUpdate(),1===this._cache[7]&&(this.position.x=this.game.camera.view.x+this.cameraOffset.x,this.position.y=this.game.camera.view.y+this.cameraOffset.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},n.TileSprite.prototype.autoScroll=function(t,e){this._scroll.set(t,e)},n.TileSprite.prototype.stopScroll=function(){this._scroll.set(0,0)},n.TileSprite.prototype.loadTexture=function(t,e){return e=e||0,t instanceof n.RenderTexture?(this.key=t.key,void this.setTexture(t)):t instanceof n.BitmapData?(this.key=t,void this.setTexture(t.texture)):t instanceof PIXI.Texture?(this.key=t,void this.setTexture(t)):null===t||"undefined"==typeof t?(this.key="__default",void this.setTexture(PIXI.TextureCache[this.key])):"string"!=typeof t||this.game.cache.checkImageKey(t)?this.game.cache.isSpriteSheet(t)?(this.key=t,this.animations.loadFrameData(this.game.cache.getFrameData(t)),"string"==typeof e?this.frameName=e:this.frame=e,void 0):(this.key=t,void this.setTexture(PIXI.TextureCache[t])):(this.key="__missing",void this.setTexture(PIXI.TextureCache[this.key]))},n.TileSprite.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.filters&&(this.filters=null),this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this)),this.animations.destroy(),this.events.destroy();var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},n.TileSprite.prototype.play=function(t,e,n,i){return this.animations.play(t,e,n,i)},n.TileSprite.prototype.reset=function(t,e){return this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.tilePosition.x=0,this.tilePosition.y=0,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this},Object.defineProperty(n.TileSprite.prototype,"angle",{get:function(){return n.Math.wrapAngle(n.Math.radToDeg(this.rotation))},set:function(t){this.rotation=n.Math.degToRad(n.Math.wrapAngle(t))}}),Object.defineProperty(n.TileSprite.prototype,"frame",{get:function(){return this.animations.frame},set:function(t){t!==this.animations.frame&&(this.animations.frame=t)}}),Object.defineProperty(n.TileSprite.prototype,"frameName",{get:function(){return this.animations.frameName},set:function(t){t!==this.animations.frameName&&(this.animations.frameName=t)}}),Object.defineProperty(n.TileSprite.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.TileSprite.prototype,"exists",{get:function(){return!!this._cache[6]},set:function(t){t?(this._cache[6]=1,this.body&&this.body.type===n.Physics.P2JS&&this.body.addToWorld(),this.visible=!0):(this._cache[6]=0,this.body&&this.body.type===n.Physics.P2JS&&(this.body.safeRemove=!0),this.visible=!1)}}),Object.defineProperty(n.TileSprite.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new n.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(n.TileSprite.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t,this.body&&this.body.type===n.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(n.TileSprite.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t,this.body&&this.body.type===n.Physics.ARCADE&&2===this.body.phase&&(this.body._reset=1)}}),Object.defineProperty(n.TileSprite.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.Text=function(t,e,i,r,o){e=e||0,i=i||0,r=r||" ",o=o||{},r=0===r.length?" ":r.toString(),this.game=t,this.exists=!0,this.name="",this.type=n.TEXT,this.z=0,this.world=new n.Point(e,i),this._text=r,this._font="",this._fontSize=32,this._fontWeight="normal",this._lineSpacing=0,this.events=new n.Events(this),this.input=null,this.cameraOffset=new n.Point,this.setStyle(o),PIXI.Text.call(this,r,this.style),this.position.set(e,i),this._cache=[0,0,0,0,1,0,1,0,0]},n.Text.prototype=Object.create(PIXI.Text.prototype),n.Text.prototype.constructor=n.Text,n.Text.prototype.preUpdate=function(){if(this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,!this.exists||!this.parent.exists)return this.renderOrderID=-1,!1;this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++);for(var t=0,e=this.children.length;e>t;t++)this.children[t].preUpdate();return!0},n.Text.prototype.update=function(){},n.Text.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y);for(var t=0,e=this.children.length;e>t;t++)this.children[t].postUpdate()},n.Text.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this)),this.texture.destroy(),this.canvas.parentNode?this.canvas.parentNode.removeChild(this.canvas):(this.canvas=null,this.context=null);var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},n.Text.prototype.setShadow=function(t,e,n,i){this.style.shadowOffsetX=t||0,this.style.shadowOffsetY=e||0,this.style.shadowColor=n||"rgba(0,0,0,0)",this.style.shadowBlur=i||0,this.dirty=!0},n.Text.prototype.setStyle=function(t){t=t||{},t.font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.wordWrapWidth=t.wordWrapWidth||100,t.shadowOffsetX=t.shadowOffsetX||0,t.shadowOffsetY=t.shadowOffsetY||0,t.shadowColor=t.shadowColor||"rgba(0,0,0,0)",t.shadowBlur=t.shadowBlur||0,this.style=t,this.dirty=!0},n.Text.prototype.updateText=function(){this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.runWordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),n=[],i=0,r=0;r<e.length;r++){var o=this.context.measureText(e[r]).width;n[r]=o,i=Math.max(i,o)}this.canvas.width=i+this.style.strokeThickness;var a=this.determineFontHeight("font: "+this.style.font+";")+this.style.strokeThickness+this._lineSpacing+this.style.shadowOffsetY;for(this.canvas.height=a*e.length,navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.style.fill,this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.shadowOffsetX=this.style.shadowOffsetX,this.context.shadowOffsetY=this.style.shadowOffsetY,this.context.shadowColor=this.style.shadowColor,this.context.shadowBlur=this.style.shadowBlur,this.context.textBaseline="top",this.context.lineCap="round",this.context.lineJoin="round",r=0;r<e.length;r++){var s=new PIXI.Point(this.style.strokeThickness/2,this.style.strokeThickness/2+r*a);"right"===this.style.align?s.x+=i-n[r]:"center"===this.style.align&&(s.x+=(i-n[r])/2),s.y+=this._lineSpacing,this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[r],s.x,s.y),this.style.fill&&this.context.fillText(e[r],s.x,s.y)}this.updateTexture()},n.Text.prototype.runWordWrap=function(t){for(var e="",n=t.split("\n"),i=0;i<n.length;i++){for(var r=this.style.wordWrapWidth,o=n[i].split(" "),a=0;a<o.length;a++){var s=this.context.measureText(o[a]).width,l=s+this.context.measureText(" ").width;l>r?(a>0&&(e+="\n"),e+=o[a]+" ",r=this.style.wordWrapWidth-s):(r-=l,e+=o[a]+" ")}i<n.length-1&&(e+="\n")}return e},Object.defineProperty(n.Text.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.Text.prototype,"text",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t.toString()||" ",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(n.Text.prototype,"font",{get:function(){return this._font},set:function(t){t!==this._font&&(this._font=t.trim(),this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(n.Text.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t=parseInt(t,10),t!==this._fontSize&&(this._fontSize=t,this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(n.Text.prototype,"fontWeight",{get:function(){return this._fontWeight},set:function(t){t!==this._fontWeight&&(this._fontWeight=t,this.style.font=this._fontWeight+" "+this._fontSize+"px '"+this._font+"'",this.dirty=!0,this.updateTransform())}}),Object.defineProperty(n.Text.prototype,"fill",{get:function(){return this.style.fill},set:function(t){t!==this.style.fill&&(this.style.fill=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"align",{get:function(){return this.style.align},set:function(t){t!==this.style.align&&(this.style.align=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"stroke",{get:function(){return this.style.stroke},set:function(t){t!==this.style.stroke&&(this.style.stroke=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"strokeThickness",{get:function(){return this.style.strokeThickness},set:function(t){t!==this.style.strokeThickness&&(this.style.strokeThickness=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"wordWrap",{get:function(){return this.style.wordWrap},set:function(t){t!==this.style.wordWrap&&(this.style.wordWrap=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"wordWrapWidth",{get:function(){return this.style.wordWrapWidth},set:function(t){t!==this.style.wordWrapWidth&&(this.style.wordWrapWidth=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"lineSpacing",{get:function(){return this._lineSpacing},set:function(t){t!==this._lineSpacing&&(this._lineSpacing=parseFloat(t),this.dirty=!0,this.updateTransform())}}),Object.defineProperty(n.Text.prototype,"shadowOffsetX",{get:function(){return this.style.shadowOffsetX},set:function(t){t!==this.style.shadowOffsetX&&(this.style.shadowOffsetX=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"shadowOffsetY",{get:function(){return this.style.shadowOffsetY},set:function(t){t!==this.style.shadowOffsetY&&(this.style.shadowOffsetY=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"shadowColor",{get:function(){return this.style.shadowColor},set:function(t){t!==this.style.shadowColor&&(this.style.shadowColor=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"shadowBlur",{get:function(){return this.style.shadowBlur},set:function(t){t!==this.style.shadowBlur&&(this.style.shadowBlur=t,this.dirty=!0)}}),Object.defineProperty(n.Text.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new n.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(n.Text.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.Text.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.BitmapText=function(t,e,i,r,o,a){e=e||0,i=i||0,r=r||"",o=o||"",a=a||32,this.game=t,this.exists=!0,this.name="",this.type=n.BITMAPTEXT,this.z=0,this.world=new n.Point(e,i),this._text=o,this._font=r,this._fontSize=a,this._align="left",this._tint=16777215,this.events=new n.Events(this),this.input=null,this.cameraOffset=new n.Point,PIXI.BitmapText.call(this,o),this.position.set(e,i),this._cache=[0,0,0,0,1,0,1,0,0]},n.BitmapText.prototype=Object.create(PIXI.BitmapText.prototype),n.BitmapText.prototype.constructor=n.BitmapText,n.BitmapText.prototype.setStyle=function(){this.style={align:this._align},this.fontName=this._font,this.fontSize=this._fontSize,this.dirty=!0},n.BitmapText.prototype.preUpdate=function(){return this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.exists&&this.parent.exists?(this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),!0):(this.renderOrderID=-1,!1)},n.BitmapText.prototype.update=function(){},n.BitmapText.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},n.BitmapText.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this));var e=this.children.length;if(t)for(;e--;)this.children[e].destroy?this.children[e].destroy(t):this.removeChild(this.children[e]);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.filters=null,this.mask=null,this.game=null,this._cache[8]=0}},Object.defineProperty(n.BitmapText.prototype,"align",{get:function(){return this._align},set:function(t){t!==this._align&&(this._align=t,this.setStyle())}}),Object.defineProperty(n.BitmapText.prototype,"tint",{get:function(){return this._tint},set:function(t){t!==this._tint&&(this._tint=t,this.dirty=!0)}}),Object.defineProperty(n.BitmapText.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.BitmapText.prototype,"font",{get:function(){return this._font},set:function(t){t!==this._font&&(this._font=t.trim(),this.style.font=this._fontSize+"px '"+this._font+"'",this.dirty=!0)}}),Object.defineProperty(n.BitmapText.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){t=parseInt(t,10),t!==this._fontSize&&(this._fontSize=t,this.style.font=this._fontSize+"px '"+this._font+"'",this.dirty=!0)}}),Object.defineProperty(n.BitmapText.prototype,"text",{get:function(){return this._text},set:function(t){t!==this._text&&(this._text=t.toString()||" ",this.dirty=!0)}}),Object.defineProperty(n.BitmapText.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input=new n.InputHandler(this),this.input.start()):this.input&&!this.input.enabled&&this.input.start():this.input&&this.input.enabled&&this.input.stop()}}),Object.defineProperty(n.BitmapText.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.BitmapText.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.Button=function(t,e,i,r,o,a,s,l,u,h){e=e||0,i=i||0,r=r||null,o=o||null,a=a||this,n.Image.call(this,t,e,i,r,l),this.type=n.BUTTON,this._onOverFrameName=null,this._onOutFrameName=null,this._onDownFrameName=null,this._onUpFrameName=null,this._onOverFrameID=null,this._onOutFrameID=null,this._onDownFrameID=null,this._onUpFrameID=null,this.onOverMouseOnly=!1,this.onOverSound=null,this.onOutSound=null,this.onDownSound=null,this.onUpSound=null,this.onOverSoundMarker="",this.onOutSoundMarker="",this.onDownSoundMarker="",this.onUpSoundMarker="",this.onInputOver=new n.Signal,this.onInputOut=new n.Signal,this.onInputDown=new n.Signal,this.onInputUp=new n.Signal,this.freezeFrames=!1,this.forceOut=!1,this.inputEnabled=!0,this.input.start(0,!0),this.setFrames(s,l,u,h),null!==o&&this.onInputUp.add(o,a),this.events.onInputOver.add(this.onInputOverHandler,this),this.events.onInputOut.add(this.onInputOutHandler,this),this.events.onInputDown.add(this.onInputDownHandler,this),this.events.onInputUp.add(this.onInputUpHandler,this)},n.Button.prototype=Object.create(n.Image.prototype),n.Button.prototype.constructor=n.Button,n.Button.prototype.clearFrames=function(){this._onOverFrameName=null,this._onOverFrameID=null,this._onOutFrameName=null,this._onOutFrameID=null,this._onDownFrameName=null,this._onDownFrameID=null,this._onUpFrameName=null,this._onUpFrameID=null},n.Button.prototype.setFrames=function(t,e,n,i){this.clearFrames(),null!==t&&("string"==typeof t?(this._onOverFrameName=t,this.input.pointerOver()&&(this.frameName=t)):(this._onOverFrameID=t,this.input.pointerOver()&&(this.frame=t))),null!==e&&("string"==typeof e?(this._onOutFrameName=e,this.input.pointerOver()===!1&&(this.frameName=e)):(this._onOutFrameID=e,this.input.pointerOver()===!1&&(this.frame=e))),null!==n&&("string"==typeof n?(this._onDownFrameName=n,this.input.pointerDown()&&(this.frameName=n)):(this._onDownFrameID=n,this.input.pointerDown()&&(this.frame=n))),null!==i&&("string"==typeof i?(this._onUpFrameName=i,this.input.pointerUp()&&(this.frameName=i)):(this._onUpFrameID=i,this.input.pointerUp()&&(this.frame=i)))},n.Button.prototype.setSounds=function(t,e,n,i,r,o,a,s){this.setOverSound(t,e),this.setOutSound(r,o),this.setDownSound(n,i),this.setUpSound(a,s)},n.Button.prototype.setOverSound=function(t,e){this.onOverSound=null,this.onOverSoundMarker="",t instanceof n.Sound&&(this.onOverSound=t),"string"==typeof e&&(this.onOverSoundMarker=e)},n.Button.prototype.setOutSound=function(t,e){this.onOutSound=null,this.onOutSoundMarker="",t instanceof n.Sound&&(this.onOutSound=t),"string"==typeof e&&(this.onOutSoundMarker=e)},n.Button.prototype.setDownSound=function(t,e){this.onDownSound=null,this.onDownSoundMarker="",t instanceof n.Sound&&(this.onDownSound=t),"string"==typeof e&&(this.onDownSoundMarker=e)},n.Button.prototype.setUpSound=function(t,e){this.onUpSound=null,this.onUpSoundMarker="",t instanceof n.Sound&&(this.onUpSound=t),"string"==typeof e&&(this.onUpSoundMarker=e)},n.Button.prototype.onInputOverHandler=function(t,e){this.freezeFrames===!1&&this.setState(1),(!this.onOverMouseOnly||e.isMouse)&&(this.onOverSound&&this.onOverSound.play(this.onOverSoundMarker),this.onInputOver&&this.onInputOver.dispatch(this,e))},n.Button.prototype.onInputOutHandler=function(t,e){this.freezeFrames===!1&&this.setState(2),this.onOutSound&&this.onOutSound.play(this.onOutSoundMarker),this.onInputOut&&this.onInputOut.dispatch(this,e)},n.Button.prototype.onInputDownHandler=function(t,e){this.freezeFrames===!1&&this.setState(3),this.onDownSound&&this.onDownSound.play(this.onDownSoundMarker),this.onInputDown&&this.onInputDown.dispatch(this,e)},n.Button.prototype.onInputUpHandler=function(t,e,n){this.onUpSound&&this.onUpSound.play(this.onUpSoundMarker),this.onInputUp&&this.onInputUp.dispatch(this,e,n),this.freezeFrames||this.setState(this.forceOut?2:null!==this._onUpFrameName||null!==this._onUpFrameID?4:n?1:2)},n.Button.prototype.setState=function(t){1===t?null!=this._onOverFrameName?this.frameName=this._onOverFrameName:null!=this._onOverFrameID&&(this.frame=this._onOverFrameID):2===t?null!=this._onOutFrameName?this.frameName=this._onOutFrameName:null!=this._onOutFrameID&&(this.frame=this._onOutFrameID):3===t?null!=this._onDownFrameName?this.frameName=this._onDownFrameName:null!=this._onDownFrameID&&(this.frame=this._onDownFrameID):4===t&&(null!=this._onUpFrameName?this.frameName=this._onUpFrameName:null!=this._onUpFrameID&&(this.frame=this._onUpFrameID))},n.Graphics=function(t,e,i){e=e||0,i=i||0,this.game=t,this.exists=!0,this.name="",this.type=n.GRAPHICS,this.z=0,this.world=new n.Point(e,i),this.cameraOffset=new n.Point,PIXI.Graphics.call(this),this.position.set(e,i),this._cache=[0,0,0,0,1,0,1,0,0]},n.Graphics.prototype=Object.create(PIXI.Graphics.prototype),n.Graphics.prototype.constructor=n.Graphics,n.Graphics.prototype.preUpdate=function(){return this._cache[0]=this.world.x,this._cache[1]=this.world.y,this._cache[2]=this.rotation,this.exists&&this.parent.exists?(this.autoCull&&(this.renderable=this.game.world.camera.screenView.intersects(this.getBounds())),this.world.setTo(this.game.camera.x+this.worldTransform[2],this.game.camera.y+this.worldTransform[5]),this.visible&&(this._cache[3]=this.game.stage.currentRenderOrderID++),!0):(this.renderOrderID=-1,!1)},n.Graphics.prototype.update=function(){},n.Graphics.prototype.postUpdate=function(){1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},n.Graphics.prototype.destroy=function(t){if(null!==this.game&&!this.destroyPhase){"undefined"==typeof t&&(t=!0),this._cache[8]=1,this.clear(),this.parent&&(this.parent instanceof n.Group?this.parent.remove(this):this.parent.removeChild(this));var e=this.children.length;if(t)for(;e--;)this.children[e].destroy(t);else for(;e--;)this.removeChild(this.children[e]);this.exists=!1,this.visible=!1,this.game=null,this._cache[8]=0}},n.Graphics.prototype.drawPolygon=function(t){this.moveTo(t.points[0].x,t.points[0].y);for(var e=1;e<t.points.length;e+=1)this.lineTo(t.points[e].x,t.points[e].y);this.lineTo(t.points[0].x,t.points[0].y)},n.Graphics.prototype.drawTriangle=function(t,e){"undefined"==typeof e&&(e=!1);var i=new n.Polygon(t);if(e){var r=new n.Point(this.game.camera.x-t[0].x,this.game.camera.y-t[0].y),o=new n.Point(t[1].x-t[0].x,t[1].y-t[0].y),a=new n.Point(t[1].x-t[2].x,t[1].y-t[2].y),s=a.cross(o);r.dot(s)>0&&this.drawPolygon(i)}else this.drawPolygon(i)},n.Graphics.prototype.drawTriangles=function(t,e,i){"undefined"==typeof i&&(i=!1);var r,o=new n.Point,a=new n.Point,s=new n.Point,l=[];if(e)if(t[0]instanceof n.Point)for(r=0;r<e.length/3;r++)l.push(t[e[3*r]]),l.push(t[e[3*r+1]]),l.push(t[e[3*r+2]]),3===l.length&&(this.drawTriangle(l,i),l=[]);else for(r=0;r<e.length;r++)o.x=t[2*e[r]],o.y=t[2*e[r]+1],l.push(o.copyTo({})),3===l.length&&(this.drawTriangle(l,i),l=[]);else if(t[0]instanceof n.Point)for(r=0;r<t.length/3;r++)this.drawTriangle([t[3*r],t[3*r+1],t[3*r+2]],i);else for(r=0;r<t.length/6;r++)o.x=t[6*r+0],o.y=t[6*r+1],a.x=t[6*r+2],a.y=t[6*r+3],s.x=t[6*r+4],s.y=t[6*r+5],this.drawTriangle([o,a,s],i)},Object.defineProperty(n.Graphics.prototype,"angle",{get:function(){return n.Math.radToDeg(this.rotation)},set:function(t){this.rotation=n.Math.degToRad(t)}}),Object.defineProperty(n.Graphics.prototype,"fixedToCamera",{get:function(){return!!this._cache[7]},set:function(t){t?(this._cache[7]=1,this.cameraOffset.set(this.x,this.y)):this._cache[7]=0}}),Object.defineProperty(n.Graphics.prototype,"destroyPhase",{get:function(){return!!this._cache[8]}}),n.RenderTexture=function(t,e,i,r,o){"undefined"==typeof r&&(r=""),"undefined"==typeof o&&(o=n.scaleModes.DEFAULT),this.game=t,this.key=r,this.type=n.RENDERTEXTURE,this._temp=new n.Point,PIXI.RenderTexture.call(this,e,i,o)},n.RenderTexture.prototype=Object.create(PIXI.RenderTexture.prototype),n.RenderTexture.prototype.constructor=n.RenderTexture,n.RenderTexture.prototype.renderXY=function(t,e,n,i){this._temp.set(e,n),this.render(t,this._temp,i)},n.SpriteBatch=function(t,e,i,r){PIXI.SpriteBatch.call(this),n.Group.call(this,t,e,i,r),this.type=n.SPRITEBATCH},n.SpriteBatch.prototype=n.Utils.extend(!0,n.SpriteBatch.prototype,n.Group.prototype,PIXI.SpriteBatch.prototype),n.SpriteBatch.prototype.constructor=n.SpriteBatch,n.RetroFont=function(t,e,i,r,o,a,s,l,u,h){this.characterWidth=i,this.characterHeight=r,this.characterSpacingX=s||0,this.characterSpacingY=l||0,this.characterPerRow=a,this.offsetX=u||0,this.offsetY=h||0,this.align="left",this.multiLine=!1,this.autoUpperCase=!0,this.customSpacingX=0,this.customSpacingY=0,this.fixedWidth=0,this.fontSet=t.cache.getImage(e),this._text="",this.grabData=[];for(var c=this.offsetX,d=this.offsetY,p=0,f=new n.FrameData,m=0;m<o.length;m++){var g=t.rnd.uuid(),y=f.addFrame(new n.Frame(m,c,d,this.characterWidth,this.characterHeight,"",g));this.grabData[o.charCodeAt(m)]=y.index,PIXI.TextureCache[g]=new PIXI.Texture(PIXI.BaseTextureCache[e],{x:c,y:d,width:this.characterWidth,height:this.characterHeight}),p++,p==this.characterPerRow?(p=0,c=this.offsetX,d+=this.characterHeight+this.characterSpacingY):c+=this.characterWidth+this.characterSpacingX}t.cache.updateFrameData(e,f),this.stamp=new n.Image(t,0,0,e,0),n.RenderTexture.call(this,t),this.type=n.RETROFONT},n.RetroFont.prototype=Object.create(n.RenderTexture.prototype),n.RetroFont.prototype.constructor=n.RetroFont,n.RetroFont.ALIGN_LEFT="left",n.RetroFont.ALIGN_RIGHT="right",n.RetroFont.ALIGN_CENTER="center",n.RetroFont.TEXT_SET1=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",n.RetroFont.TEXT_SET2=" !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ",n.RetroFont.TEXT_SET3="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789 ",n.RetroFont.TEXT_SET4="ABCDEFGHIJKLMNOPQRSTUVWXYZ 0123456789",n.RetroFont.TEXT_SET5="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,/() '!?-*:0123456789",n.RetroFont.TEXT_SET6="ABCDEFGHIJKLMNOPQRSTUVWXYZ!?:;0123456789\"(),-.' ",n.RetroFont.TEXT_SET7="AGMSY+:4BHNTZ!;5CIOU.?06DJPV,(17EKQW\")28FLRX-'39",n.RetroFont.TEXT_SET8="0123456789 .ABCDEFGHIJKLMNOPQRSTUVWXYZ",n.RetroFont.TEXT_SET9="ABCDEFGHIJKLMNOPQRSTUVWXYZ()-0123456789.:,'\"?!",n.RetroFont.TEXT_SET10="ABCDEFGHIJKLMNOPQRSTUVWXYZ",n.RetroFont.TEXT_SET11="ABCDEFGHIJKLMNOPQRSTUVWXYZ.,\"-+!?()':;0123456789",n.RetroFont.prototype.setFixedWidth=function(t,e){"undefined"==typeof e&&(e="left"),this.fixedWidth=t,this.align=e},n.RetroFont.prototype.setText=function(t,e,n,i,r,o){this.multiLine=e||!1,this.customSpacingX=n||0,this.customSpacingY=i||0,this.align=r||"left",this.autoUpperCase=o?!1:!0,t.length>0&&(this.text=t)},n.RetroFont.prototype.buildRetroFontText=function(){var t=0,e=0;if(this.clear(),this.multiLine){var i=this._text.split("\n");this.fixedWidth>0?this.resize(this.fixedWidth,i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0):this.resize(this.getLongestLine()*(this.characterWidth+this.customSpacingX),i.length*(this.characterHeight+this.customSpacingY)-this.customSpacingY,!0);for(var r=0;r<i.length;r++){switch(this.align){case n.RetroFont.ALIGN_LEFT:t=0;break;case n.RetroFont.ALIGN_RIGHT:t=this.width-i[r].length*(this.characterWidth+this.customSpacingX);break;case n.RetroFont.ALIGN_CENTER:t=this.width/2-i[r].length*(this.characterWidth+this.customSpacingX)/2,t+=this.customSpacingX/2}0>t&&(t=0),this.pasteLine(i[r],t,e,this.customSpacingX),e+=this.characterHeight+this.customSpacingY}}else{switch(this.fixedWidth>0?this.resize(this.fixedWidth,this.characterHeight,!0):this.resize(this._text.length*(this.characterWidth+this.customSpacingX),this.characterHeight,!0),this.align){case n.RetroFont.ALIGN_LEFT:t=0;break;case n.RetroFont.ALIGN_RIGHT:t=this.width-this._text.length*(this.characterWidth+this.customSpacingX);break;case n.RetroFont.ALIGN_CENTER:t=this.width/2-this._text.length*(this.characterWidth+this.customSpacingX)/2,t+=this.customSpacingX/2}this.textureBuffer.clear(),this.pasteLine(this._text,t,0,this.customSpacingX)}},n.RetroFont.prototype.pasteLine=function(t,e,i,r){for(var o=new n.Point,a=0;a<t.length;a++)if(" "==t.charAt(a))e+=this.characterWidth+r;else if(this.grabData[t.charCodeAt(a)]>=0&&(this.stamp.frame=this.grabData[t.charCodeAt(a)],o.set(e,i),this.render(this.stamp,o,!1),e+=this.characterWidth+r,e>this.width))break},n.RetroFont.prototype.getLongestLine=function(){var t=0;if(this._text.length>0)for(var e=this._text.split("\n"),n=0;n<e.length;n++)e[n].length>t&&(t=e[n].length);return t},n.RetroFont.prototype.removeUnsupportedCharacters=function(t){for(var e="",n=0;n<this._text.length;n++){var i=this._text[n],r=i.charCodeAt(0);(this.grabData[r]>=0||!t&&"\n"===i)&&(e=e.concat(i))}return e},Object.defineProperty(n.RetroFont.prototype,"text",{get:function(){return this._text},set:function(t){var e;e=this.autoUpperCase?t.toUpperCase():t,e!==this._text&&(this._text=e,this.removeUnsupportedCharacters(this.multiLine),this.buildRetroFontText())
}}),n.Particle=function(t,e,i,r,o){n.Sprite.call(this,t,e,i,r,o),this.autoScale=!1,this.scaleData=null,this._s=0,this.autoAlpha=!1,this.alphaData=null,this._a=0},n.Particle.prototype=Object.create(n.Sprite.prototype),n.Particle.prototype.constructor=n.Particle,n.Particle.prototype.update=function(){this.autoScale&&(this._s--,this._s?this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y):this.autoScale=!1),this.autoAlpha&&(this._a--,this._a?this.alpha=this.alphaData[this._a].v:this.autoAlpha=!1)},n.Particle.prototype.onEmit=function(){},n.Particle.prototype.setAlphaData=function(t){this.alphaData=t,this._a=t.length-1,this.alpha=this.alphaData[this._a].v,this.autoAlpha=!0},n.Particle.prototype.setScaleData=function(t){this.scaleData=t,this._s=t.length-1,this.scale.set(this.scaleData[this._s].x,this.scaleData[this._s].y),this.autoScale=!0},n.Particle.prototype.reset=function(t,e,n){return"undefined"==typeof n&&(n=1),this.world.setTo(t,e),this.position.x=t,this.position.y=e,this.alive=!0,this.exists=!0,this.visible=!0,this.renderable=!0,this._outOfBoundsFired=!1,this.health=n,this.body&&this.body.reset(t,e,!1,!1),this._cache[4]=1,this.alpha=1,this.scale.set(1),this.autoScale=!1,this.autoAlpha=!1,this},n.Canvas={create:function(t,e,n,i){if("undefined"==typeof i&&(i=!1),t=t||256,e=e||256,i)var r=document.createElement("canvas");else var r=document.createElement(navigator.isCocoonJS?"screencanvas":"canvas");return"string"==typeof n&&""!==n&&(r.id=n),r.width=t,r.height=e,r.style.display="block",r},getOffset:function(t,e){e=e||new n.Point;var i=t.getBoundingClientRect(),r=t.clientTop||document.body.clientTop||0,o=t.clientLeft||document.body.clientLeft||0,a=0,s=0;return"CSS1Compat"===document.compatMode?(a=window.pageYOffset||document.documentElement.scrollTop||t.scrollTop||0,s=window.pageXOffset||document.documentElement.scrollLeft||t.scrollLeft||0):(a=window.pageYOffset||document.body.scrollTop||t.scrollTop||0,s=window.pageXOffset||document.body.scrollLeft||t.scrollLeft||0),e.x=i.left+s-o,e.y=i.top+a-r,e},getAspectRatio:function(t){return t.width/t.height},setBackgroundColor:function(t,e){return e=e||"rgb(0,0,0)",t.style.backgroundColor=e,t},setTouchAction:function(t,e){return e=e||"none",t.style.msTouchAction=e,t.style["ms-touch-action"]=e,t.style["touch-action"]=e,t},setUserSelect:function(t,e){return e=e||"none",t.style["-webkit-touch-callout"]=e,t.style["-webkit-user-select"]=e,t.style["-khtml-user-select"]=e,t.style["-moz-user-select"]=e,t.style["-ms-user-select"]=e,t.style["user-select"]=e,t.style["-webkit-tap-highlight-color"]="rgba(0, 0, 0, 0)",t},addToDOM:function(t,e,n){var i;return"undefined"==typeof n&&(n=!0),e&&("string"==typeof e?i=document.getElementById(e):"object"==typeof e&&1===e.nodeType&&(i=e)),i||(i=document.body),n&&i.style&&(i.style.overflow="hidden"),i.appendChild(t),t},setTransform:function(t,e,n,i,r,o,a){return t.setTransform(i,o,a,r,e,n),t},setSmoothingEnabled:function(t,e){return t.imageSmoothingEnabled=e,t.mozImageSmoothingEnabled=e,t.oImageSmoothingEnabled=e,t.webkitImageSmoothingEnabled=e,t.msImageSmoothingEnabled=e,t},setImageRenderingCrisp:function(t){return t.style["image-rendering"]="optimizeSpeed",t.style["image-rendering"]="crisp-edges",t.style["image-rendering"]="-moz-crisp-edges",t.style["image-rendering"]="-webkit-optimize-contrast",t.style["image-rendering"]="optimize-contrast",t.style.msInterpolationMode="nearest-neighbor",t},setImageRenderingBicubic:function(t){return t.style["image-rendering"]="auto",t.style.msInterpolationMode="bicubic",t}},n.Device=function(t){this.game=t,this.desktop=!1,this.iOS=!1,this.cocoonJS=!1,this.ejecta=!1,this.crosswalk=!1,this.android=!1,this.chromeOS=!1,this.linux=!1,this.macOS=!1,this.windows=!1,this.windowsPhone=!1,this.canvas=!1,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.webGL=!1,this.worker=!1,this.touch=!1,this.mspointer=!1,this.css3D=!1,this.pointerLock=!1,this.typedArray=!1,this.vibration=!1,this.getUserMedia=!1,this.quirksMode=!1,this.arora=!1,this.chrome=!1,this.epiphany=!1,this.firefox=!1,this.ie=!1,this.ieVersion=0,this.trident=!1,this.tridentVersion=0,this.mobileSafari=!1,this.midori=!1,this.opera=!1,this.safari=!1,this.webApp=!1,this.silk=!1,this.audioData=!1,this.webAudio=!1,this.ogg=!1,this.opus=!1,this.mp3=!1,this.wav=!1,this.m4a=!1,this.webm=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.littleEndian=!1,this.support32bit=!1,this.fullscreen=!1,this.requestFullscreen="",this.cancelFullscreen="",this.fullscreenKeyboard=!1,this._checkAudio(),this._checkBrowser(),this._checkCSS3D(),this._checkDevice(),this._checkFeatures(),this._checkOS()},n.Device.LITTLE_ENDIAN=!1,n.Device.prototype={_checkOS:function(){var t=navigator.userAgent;/Android/.test(t)?this.android=!0:/CrOS/.test(t)?this.chromeOS=!0:/iP[ao]d|iPhone/i.test(t)?this.iOS=!0:/Linux/.test(t)?this.linux=!0:/Mac OS/.test(t)?this.macOS=!0:/Windows/.test(t)&&(this.windows=!0,/Windows Phone/i.test(t)&&(this.windowsPhone=!0)),(this.windows||this.macOS||this.linux&&this.silk===!1)&&(this.desktop=!0),(this.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(this.desktop=!1)},_checkFeatures:function(){this.canvas=!!window.CanvasRenderingContext2D||this.cocoonJS;try{this.localStorage=!!localStorage.getItem}catch(t){this.localStorage=!1}this.file=!!(window.File&&window.FileReader&&window.FileList&&window.Blob),this.fileSystem=!!window.requestFileSystem,this.webGL=function(){try{var t=document.createElement("canvas");return!!window.WebGLRenderingContext&&(t.getContext("webgl")||t.getContext("experimental-webgl"))}catch(e){return!1}}(),this.webGL=null===this.webGL||this.webGL===!1?!1:!0,this.worker=!!window.Worker,("ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>1)&&(this.touch=!0),(window.navigator.msPointerEnabled||window.navigator.pointerEnabled)&&(this.mspointer=!0),this.pointerLock="pointerLockElement"in document||"mozPointerLockElement"in document||"webkitPointerLockElement"in document,this.quirksMode="CSS1Compat"===document.compatMode?!1:!0,this.getUserMedia=!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},checkFullScreenSupport:function(){for(var t=["requestFullscreen","requestFullScreen","webkitRequestFullscreen","webkitRequestFullScreen","msRequestFullscreen","msRequestFullScreen","mozRequestFullScreen","mozRequestFullscreen"],e=0;e<t.length;e++)this.game.canvas[t[e]]&&(this.fullscreen=!0,this.requestFullscreen=t[e]);var n=["cancelFullScreen","exitFullscreen","webkitCancelFullScreen","webkitExitFullscreen","msCancelFullScreen","msExitFullscreen","mozCancelFullScreen","mozExitFullscreen"];if(this.fullscreen)for(var e=0;e<n.length;e++)this.game.canvas[n[e]]&&(this.cancelFullscreen=n[e]);window.Element&&Element.ALLOW_KEYBOARD_INPUT&&(this.fullscreenKeyboard=!0)},_checkBrowser:function(){var t=navigator.userAgent;/Arora/.test(t)?this.arora=!0:/Chrome/.test(t)?this.chrome=!0:/Epiphany/.test(t)?this.epiphany=!0:/Firefox/.test(t)?this.firefox=!0:/Mobile Safari/.test(t)?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Midori/.test(t)?this.midori=!0:/Opera/.test(t)?this.opera=!0:/Safari/.test(t)?this.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(this.silk=!0),navigator.standalone&&(this.webApp=!0),navigator.isCocoonJS&&(this.cocoonJS=!0),"undefined"!=typeof window.ejecta&&(this.ejecta=!0),/Crosswalk/.test(t)&&(this.crosswalk=!0)},_checkAudio:function(){this.audioData=!!window.Audio,this.webAudio=!(!window.webkitAudioContext&&!window.AudioContext);var t=document.createElement("audio"),e=!1;try{(e=!!t.canPlayType)&&(t.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,"")&&(this.ogg=!0),t.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,"")&&(this.opus=!0),t.canPlayType("audio/mpeg;").replace(/^no$/,"")&&(this.mp3=!0),t.canPlayType('audio/wav; codecs="1"').replace(/^no$/,"")&&(this.wav=!0),(t.canPlayType("audio/x-m4a;")||t.canPlayType("audio/aac;").replace(/^no$/,""))&&(this.m4a=!0),t.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")&&(this.webm=!0))}catch(n){}},_checkDevice:function(){this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!=navigator.userAgent.toLowerCase().indexOf("iphone"),this.iPhone4=2==this.pixelRatio&&this.iPhone,this.iPad=-1!=navigator.userAgent.toLowerCase().indexOf("ipad"),this.typedArray="undefined"!=typeof Int8Array?!0:!1,"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint32Array&&(this.littleEndian=this._checkIsLittleEndian(),n.Device.LITTLE_ENDIAN=this.littleEndian),this.support32bit="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof Int32Array&&null!==this.littleEndian&&this._checkIsUint8ClampedImageData(),navigator.vibrate=navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate,navigator.vibrate&&(this.vibration=!0)},_checkIsLittleEndian:function(){var t=new ArrayBuffer(4),e=new Uint8Array(t),n=new Uint32Array(t);return e[0]=161,e[1]=178,e[2]=195,e[3]=212,3569595041==n[0]?!0:2712847316==n[0]?!1:null},_checkIsUint8ClampedImageData:function(){if("undefined"==typeof Uint8ClampedArray)return!1;var t=document.createElement("canvas"),e=t.getContext("2d");if(!e)return!1;var n=e.createImageData(1,1);return n.data instanceof Uint8ClampedArray},_checkCSS3D:function(){var t,e=document.createElement("p"),n={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(e,null);for(var i in n)void 0!==e.style[i]&&(e.style[i]="translate3d(1px,1px,1px)",t=window.getComputedStyle(e).getPropertyValue(n[i]));document.body.removeChild(e),this.css3D=void 0!==t&&t.length>0&&"none"!==t},canPlayAudio:function(t){return"mp3"==t&&this.mp3?!0:"ogg"==t&&(this.ogg||this.opus)?!0:"m4a"==t&&this.m4a?!0:"wav"==t&&this.wav?!0:"webm"==t&&this.webm?!0:!1},isConsoleOpen:function(){return window.console&&window.console.firebug?!0:window.console&&(console.profile(),console.profileEnd(),console.clear&&console.clear(),console.profiles)?console.profiles.length>0:!1}},n.Device.prototype.constructor=n.Device,n.RequestAnimationFrame=function(t,e){"undefined"==typeof e&&(e=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=e;for(var n=["ms","moz","webkit","o"],i=0;i<n.length&&!window.requestAnimationFrame;i++)window.requestAnimationFrame=window[n[i]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n[i]+"CancelAnimationFrame"];this._isSetTimeOut=!1,this._onLoop=null,this._timeOutID=null},n.RequestAnimationFrame.prototype={start:function(){this.isRunning=!0;var t=this;!window.requestAnimationFrame||this.forceSetTimeOut?(this._isSetTimeOut=!0,this._onLoop=function(){return t.updateSetTimeout()},this._timeOutID=window.setTimeout(this._onLoop,0)):(this._isSetTimeOut=!1,this._onLoop=function(e){return t.updateRAF(e)},this._timeOutID=window.requestAnimationFrame(this._onLoop))},updateRAF:function(){this.game.update(Date.now()),this._timeOutID=window.requestAnimationFrame(this._onLoop)},updateSetTimeout:function(){this.game.update(Date.now()),this._timeOutID=window.setTimeout(this._onLoop,this.game.time.timeToCall)},stop:function(){this._isSetTimeOut?clearTimeout(this._timeOutID):window.cancelAnimationFrame(this._timeOutID),this.isRunning=!1},isSetTimeOut:function(){return this._isSetTimeOut},isRAF:function(){return this._isSetTimeOut===!1}},n.RequestAnimationFrame.prototype.constructor=n.RequestAnimationFrame,n.Math={PI2:2*Math.PI,fuzzyEqual:function(t,e,n){return"undefined"==typeof n&&(n=1e-4),Math.abs(t-e)<n},fuzzyLessThan:function(t,e,n){return"undefined"==typeof n&&(n=1e-4),e+n>t},fuzzyGreaterThan:function(t,e,n){return"undefined"==typeof n&&(n=1e-4),t>e-n},fuzzyCeil:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.ceil(t-e)},fuzzyFloor:function(t,e){return"undefined"==typeof e&&(e=1e-4),Math.floor(t+e)},average:function(){for(var t=[],e=0;e<arguments.length-0;e++)t[e]=arguments[e+0];for(var n=0,i=0;i<t.length;i++)n+=t[i];return n/t.length},truncate:function(t){return t>0?Math.floor(t):Math.ceil(t)},shear:function(t){return t%1},snapTo:function(t,e,n){return"undefined"==typeof n&&(n=0),0===e?t:(t-=n,t=e*Math.round(t/e),n+t)},snapToFloor:function(t,e,n){return"undefined"==typeof n&&(n=0),0===e?t:(t-=n,t=e*Math.floor(t/e),n+t)},snapToCeil:function(t,e,n){return"undefined"==typeof n&&(n=0),0===e?t:(t-=n,t=e*Math.ceil(t/e),n+t)},snapToInArray:function(t,e,n){if("undefined"==typeof n&&(n=!0),n&&e.sort(),t<e[0])return e[0];for(var i=1;e[i]<t;)i++;var r=e[i-1],o=i<e.length?e[i]:Number.POSITIVE_INFINITY;return t-r>=o-t?o:r},roundTo:function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=10);var i=Math.pow(n,-e);return Math.round(t*i)/i},floorTo:function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=10);var i=Math.pow(n,-e);return Math.floor(t*i)/i},ceilTo:function(t,e,n){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=10);var i=Math.pow(n,-e);return Math.ceil(t*i)/i},interpolateFloat:function(t,e,n){return(e-t)*n+t},angleBetween:function(t,e,n,i){return Math.atan2(i-e,n-t)},angleBetweenPoints:function(t,e){return Math.atan2(e.y-t.y,e.x-t.x)},reverseAngle:function(t){return this.normalizeAngle(t+Math.PI,!0)},normalizeAngle:function(t){return t%=2*Math.PI,t>=0?t:t+2*Math.PI},normalizeLatitude:function(t){return Math.max(-90,Math.min(90,t))},normalizeLongitude:function(t){return t%360==180?180:(t%=360,-180>t?t+360:t>180?t-360:t)},chanceRoll:function(t){return"undefined"==typeof t&&(t=50),0>=t?!1:t>=100?!0:100*Math.random()>=t?!1:!0},numberArray:function(t,e){for(var n=[],i=t;e>=i;i++)n.push(i);return n},maxAdd:function(t,e,n){return t+=e,t>n&&(t=n),t},minSub:function(t,e,n){return t-=e,n>t&&(t=n),t},wrap:function(t,e,n){var i=n-e;if(0>=i)return 0;var r=(t-e)%i;return 0>r&&(r+=i),r+e},wrapValue:function(t,e,n){var i;return t=Math.abs(t),e=Math.abs(e),n=Math.abs(n),i=(t+e)%n},limitValue:function(t,e,n){return e>t?e:t>n?n:t},randomSign:function(){return Math.random()>.5?1:-1},isOdd:function(t){return 1&t},isEven:function(t){return 1&t?!1:!0},min:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else var t=arguments;for(var e=1,n=0,i=t.length;i>e;e++)t[e]<t[n]&&(n=e);return t[n]},max:function(){if(1===arguments.length&&"object"==typeof arguments[0])var t=arguments[0];else var t=arguments;for(var e=1,n=0,i=t.length;i>e;e++)t[e]>t[n]&&(n=e);return t[n]},minProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else var e=arguments.slice(1);for(var n=1,i=0,r=e.length;r>n;n++)e[n][t]<e[i][t]&&(i=n);return e[i][t]},maxProperty:function(t){if(2===arguments.length&&"object"==typeof arguments[1])var e=arguments[1];else var e=arguments.slice(1);for(var n=1,i=0,r=e.length;r>n;n++)e[n][t]>e[i][t]&&(i=n);return e[i][t]},wrapAngle:function(t,e){var n=e?Math.PI/180:1;return this.wrap(t,-180*n,180*n)},angleLimit:function(t,e,n){var i=t;return t>n?i=n:e>t&&(i=e),i},linearInterpolation:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i);return 0>e?this.linear(t[0],t[1],i):e>1?this.linear(t[n],t[n-1],n-i):this.linear(t[r],t[r+1>n?n:r+1],i-r)},bezierInterpolation:function(t,e){for(var n=0,i=t.length-1,r=0;i>=r;r++)n+=Math.pow(1-e,i-r)*Math.pow(e,r)*t[r]*this.bernstein(i,r);return n},catmullRomInterpolation:function(t,e){var n=t.length-1,i=n*e,r=Math.floor(i);return t[0]===t[n]?(0>e&&(r=Math.floor(i=n*(1+e))),this.catmullRom(t[(r-1+n)%n],t[r],t[(r+1)%n],t[(r+2)%n],i-r)):0>e?t[0]-(this.catmullRom(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(this.catmullRom(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):this.catmullRom(t[r?r-1:0],t[r],t[r+1>n?n:r+1],t[r+2>n?n:r+2],i-r)},linear:function(t,e,n){return(e-t)*n+t},bernstein:function(t,e){return this.factorial(t)/this.factorial(e)/this.factorial(t-e)},catmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r,l=r*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*r+e},difference:function(t,e){return Math.abs(t-e)},getRandom:function(t,e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0),null!=t){var i=n;if((0===i||i>t.length-e)&&(i=t.length-e),i>0)return t[e+Math.floor(Math.random()*i)]}return null},removeRandom:function(t,e,n){if("undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=0),null!=t){var i=n;if((0===i||i>t.length-e)&&(i=t.length-e),i>0){var r=e+Math.floor(Math.random()*i),o=t.splice(r,1);return o[0]}}return null},floor:function(t){var e=0|t;return t>0?e:e!=t?e-1:e},ceil:function(t){var e=0|t;return t>0&&e!=t?e+1:e},sinCosGenerator:function(t,e,n,i){"undefined"==typeof e&&(e=1),"undefined"==typeof n&&(n=1),"undefined"==typeof i&&(i=1);for(var r=e,o=n,a=i*Math.PI/t,s=[],l=[],u=0;t>u;u++)o-=r*a,r+=o*a,s[u]=o,l[u]=r;return{sin:l,cos:s,length:t}},shift:function(t){var e=t.shift();return t.push(e),e},shuffleArray:function(t){for(var e=t.length-1;e>0;e--){var n=Math.floor(Math.random()*(e+1)),i=t[e];t[e]=t[n],t[n]=i}return t},distance:function(t,e,n,i){var r=t-n,o=e-i;return Math.sqrt(r*r+o*o)},distancePow:function(t,e,n,i,r){return"undefined"==typeof r&&(r=2),Math.sqrt(Math.pow(n-t,r)+Math.pow(i-e,r))},distanceRounded:function(t,e,i,r){return Math.round(n.Math.distance(t,e,i,r))},clamp:function(t,e,n){return e>t?e:t>n?n:t},clampBottom:function(t,e){return e>t?e:t},within:function(t,e,n){return Math.abs(t-e)<=n},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},smoothstep:function(t,e,n){return t=Math.max(0,Math.min(1,(t-e)/(n-e))),t*t*(3-2*t)},smootherstep:function(t,e,n){return t=Math.max(0,Math.min(1,(t-e)/(n-e))),t*t*t*(t*(6*t-15)+10)},sign:function(t){return 0>t?-1:t>0?1:0},percent:function(t,e,n){return"undefined"==typeof n&&(n=0),t>e||n>e?1:n>t||n>t?0:(t-n)/e},degToRad:function(){var t=Math.PI/180;return function(e){return e*t}}(),radToDeg:function(){var t=180/Math.PI;return function(e){return e*t}}()},n.RandomDataGenerator=function(t){"undefined"==typeof t&&(t=[]),this.c=1,this.s0=0,this.s1=0,this.s2=0,this.sow(t)},n.RandomDataGenerator.prototype={rnd:function(){var t=2091639*this.s0+2.3283064365386963e-10*this.c;return this.c=0|t,this.s0=this.s1,this.s1=this.s2,this.s2=t-this.c,this.s2},sow:function(t){"undefined"==typeof t&&(t=[]),this.s0=this.hash(" "),this.s1=this.hash(this.s0),this.s2=this.hash(this.s1),this.c=1;for(var e,n=0;e=t[n++];)this.s0-=this.hash(e),this.s0+=~~(this.s0<0),this.s1-=this.hash(e),this.s1+=~~(this.s1<0),this.s2-=this.hash(e),this.s2+=~~(this.s2<0)},hash:function(t){var e,n,i;for(i=4022871197,t=t.toString(),n=0;n<t.length;n++)i+=t.charCodeAt(n),e=.02519603282416938*i,i=e>>>0,e-=i,e*=i,i=e>>>0,e-=i,i+=4294967296*e;return 2.3283064365386963e-10*(i>>>0)},integer:function(){return 4294967296*this.rnd.apply(this)},frac:function(){return this.rnd.apply(this)+1.1102230246251565e-16*(2097152*this.rnd.apply(this)|0)},real:function(){return this.integer()+this.frac()},integerInRange:function(t,e){return Math.floor(this.realInRange(0,e-t+1)+t)},realInRange:function(t,e){return this.frac()*(e-t)+t},normal:function(){return 1-2*this.frac()},uuid:function(){var t="",e="";for(e=t="";t++<36;e+=~t%5|3*t&4?(15^t?8^this.frac()*(20^t?16:4):4).toString(16):"-");return e},pick:function(t){return t[this.integerInRange(0,t.length-1)]},weightedPick:function(t){return t[~~(Math.pow(this.frac(),2)*(t.length-1))]},timestamp:function(t,e){return this.realInRange(t||9466848e5,e||1577862e6)},angle:function(){return this.integerInRange(-180,180)}},n.RandomDataGenerator.prototype.constructor=n.RandomDataGenerator,n.QuadTree=function(t,e,n,i,r,o,a){this.maxObjects=10,this.maxLevels=4,this.level=0,this.bounds={},this.objects=[],this.nodes=[],this._empty=[],this.reset(t,e,n,i,r,o,a)},n.QuadTree.prototype={reset:function(t,e,n,i,r,o,a){this.maxObjects=r||10,this.maxLevels=o||4,this.level=a||0,this.bounds={x:Math.round(t),y:Math.round(e),width:n,height:i,subWidth:Math.floor(n/2),subHeight:Math.floor(i/2),right:Math.round(t)+Math.floor(n/2),bottom:Math.round(e)+Math.floor(i/2)},this.objects.length=0,this.nodes.length=0},populate:function(t){t.forEach(this.populateHandler,this,!0)},populateHandler:function(t){t.body&&t.exists&&this.insert(t.body)},split:function(){this.level++,this.nodes[0]=new n.QuadTree(this.bounds.right,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[1]=new n.QuadTree(this.bounds.x,this.bounds.y,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[2]=new n.QuadTree(this.bounds.x,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level),this.nodes[3]=new n.QuadTree(this.bounds.right,this.bounds.bottom,this.bounds.subWidth,this.bounds.subHeight,this.maxObjects,this.maxLevels,this.level)},insert:function(t){var e,n=0;if(null!=this.nodes[0]&&(e=this.getIndex(t),-1!==e))return void this.nodes[e].insert(t);if(this.objects.push(t),this.objects.length>this.maxObjects&&this.level<this.maxLevels)for(null==this.nodes[0]&&this.split();n<this.objects.length;)e=this.getIndex(this.objects[n]),-1!==e?this.nodes[e].insert(this.objects.splice(n,1)[0]):n++},getIndex:function(t){var e=-1;return t.x<this.bounds.right&&t.right<this.bounds.right?t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=1:t.y>this.bounds.bottom&&(e=2):t.x>this.bounds.right&&(t.y<this.bounds.bottom&&t.bottom<this.bounds.bottom?e=0:t.y>this.bounds.bottom&&(e=3)),e},retrieve:function(t){if(t instanceof n.Rectangle)var e=this.objects,i=this.getIndex(t);else{if(!t.body)return this._empty;var e=this.objects,i=this.getIndex(t.body)}return this.nodes[0]&&(-1!==i?e=e.concat(this.nodes[i].retrieve(t)):(e=e.concat(this.nodes[0].retrieve(t)),e=e.concat(this.nodes[1].retrieve(t)),e=e.concat(this.nodes[2].retrieve(t)),e=e.concat(this.nodes[3].retrieve(t)))),e},clear:function(){this.objects.length=0;for(var t=this.nodes.length;t--;)this.nodes[t].clear(),this.nodes.splice(t,1);this.nodes.length=0}},n.QuadTree.prototype.constructor=n.QuadTree,n.Net=function(t){this.game=t},n.Net.prototype={getHostName:function(){return window.location&&window.location.hostname?window.location.hostname:null},checkDomainName:function(t){return-1!==window.location.hostname.indexOf(t)},updateQueryString:function(t,e,n,i){"undefined"==typeof n&&(n=!1),("undefined"==typeof i||""===i)&&(i=window.location.href);var r="",o=new RegExp("([?|&])"+t+"=.*?(&|#|$)(.*)","gi");if(o.test(i))r="undefined"!=typeof e&&null!==e?i.replace(o,"$1"+t+"="+e+"$2$3"):i.replace(o,"$1$3").replace(/(&|\?)$/,"");else if("undefined"!=typeof e&&null!==e){var a=-1!==i.indexOf("?")?"&":"?",s=i.split("#");i=s[0]+a+t+"="+e,s[1]&&(i+="#"+s[1]),r=i}else r=i;return n?void(window.location.href=r):r},getQueryString:function(t){"undefined"==typeof t&&(t="");var e={},n=location.search.substring(1).split("&");for(var i in n){var r=n[i].split("=");if(r.length>1){if(t&&t==this.decodeURI(r[0]))return this.decodeURI(r[1]);e[this.decodeURI(r[0])]=this.decodeURI(r[1])}}return e},decodeURI:function(t){return decodeURIComponent(t.replace(/\+/g," "))}},n.Net.prototype.constructor=n.Net,n.TweenManager=function(t){this.game=t,this._tweens=[],this._add=[],this.game.onPause.add(this._pauseAll,this),this.game.onResume.add(this._resumeAll,this)},n.TweenManager.prototype={getAll:function(){return this._tweens},removeAll:function(){for(var t=0;t<this._tweens.length;t++)this._tweens[t].pendingDelete=!0;this._add=[]},add:function(t){t._manager=this,this._add.push(t)},create:function(t){return new n.Tween(t,this.game,this)},remove:function(t){var e=this._tweens.indexOf(t);-1!==e&&(this._tweens[e].pendingDelete=!0)},update:function(){if(0===this._tweens.length&&0===this._add.length)return!1;for(var t=0,e=this._tweens.length;e>t;)this._tweens[t].update(this.game.time.now)?t++:(this._tweens.splice(t,1),e--);return this._add.length>0&&(this._tweens=this._tweens.concat(this._add),this._add.length=0),!0},isTweening:function(t){return this._tweens.some(function(e){return e._object===t})},_pauseAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t]._pause()},_resumeAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t]._resume()},pauseAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].pause()},resumeAll:function(){for(var t=this._tweens.length-1;t>=0;t--)this._tweens[t].resume(!0)}},n.TweenManager.prototype.constructor=n.TweenManager,n.Tween=function(t,e,i){this._object=t,this.game=e,this._manager=i,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._yoyo=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=n.Easing.Linear.None,this._interpolationFunction=n.Math.linearInterpolation,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onUpdateCallbackContext=null,this._paused=!1,this._pausedTime=0,this._codePaused=!1,this.pendingDelete=!1,this.onStart=new n.Signal,this.onLoop=new n.Signal,this.onComplete=new n.Signal,this.isRunning=!1},n.Tween.prototype={to:function(t,e,n,i,r,o,a){e=e||1e3,n=n||null,i=i||!1,r=r||0,o=o||0,a=a||!1,a&&0===o&&(o=1);var s;return this._parent?(s=this._manager.create(this._object),this._lastChild.chain(s),this._lastChild=s):(s=this,this._parent=this,this._lastChild=this),s._repeat=o,s._duration=e,s._valuesEnd=t,null!==n&&(s._easingFunction=n),r>0&&(s._delayTime=r),s._yoyo=a,i?this.start():this},from:function(t,e,n,i,r,o,a){var s={};for(var l in t)t.hasOwnProperty(l)&&(s[l]=this._object[l],this._object[l]=t[l]);this.to(s,e,n,i,r,o,a)},start:function(){if(null!==this.game&&null!==this._object){this._manager.add(this),this.isRunning=!0,this._onStartCallbackFired=!1,this._startTime=this.game.time.now+this._delayTime;for(var t in this._valuesEnd){if(Array.isArray(this._valuesEnd[t])){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}this._valuesStart[t]=this._object[t],Array.isArray(this._valuesStart[t])||(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0}return this}},generateData:function(t,e){if(null===this.game||null===this._object)return null;this._startTime=0;for(var n in this._valuesEnd){if(Array.isArray(this._valuesEnd[n])){if(0===this._valuesEnd[n].length)continue;this._valuesEnd[n]=[this._object[n]].concat(this._valuesEnd[n])}this._valuesStart[n]=this._object[n],Array.isArray(this._valuesStart[n])||(this._valuesStart[n]*=1),this._valuesStartRepeat[n]=this._valuesStart[n]||0}for(var i=0,r=Math.floor(t*(this._duration/1e3)),o=this._duration/r,a=[];r--;){var n,s=(i-this._startTime)/this._duration;s=s>1?1:s;var l=this._easingFunction(s),u={};for(n in this._valuesEnd){var h=this._valuesStart[n]||0,c=this._valuesEnd[n];c instanceof Array?u[n]=this._interpolationFunction(c,l):("string"==typeof c&&(c=h+parseFloat(c,10)),"number"==typeof c&&(u[n]=h+(c-h)*l))}a.push(u),i+=o}if(this._yoyo){var d=a.slice();d.reverse(),a=a.concat(d)}return"undefined"!=typeof e?e=e.concat(a):a},stop:function(){return this.isRunning=!1,this._onUpdateCallback=null,this._manager.remove(this),this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},yoyo:function(t){return this._yoyo=t,t&&0===this._repeat&&(this._repeat=1),this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},loop:function(){return this._lastChild.chain(this),this},onUpdateCallback:function(t,e){return this._onUpdateCallback=t,this._onUpdateCallbackContext=e,this},pause:function(){this._codePaused=!0,this._paused=!0,this._pausedTime=this.game.time.now},_pause:function(){this._codePaused||(this._paused=!0,this._pausedTime=this.game.time.now)},resume:function(){this._paused&&(this._paused=!1,this._codePaused=!1,this._startTime+=this.game.time.now-this._pausedTime)},_resume:function(){this._codePaused||(this._startTime+=this.game.time.pauseDuration,this._paused=!1)},update:function(t){if(this.pendingDelete)return!1;if(this._paused||t<this._startTime)return!0;var e;if(t<this._startTime)return!0;this._onStartCallbackFired===!1&&(this.onStart.dispatch(this._object),this._onStartCallbackFired=!0);var n=(t-this._startTime)/this._duration;n=n>1?1:n;var i=this._easingFunction(n);for(e in this._valuesEnd){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"==typeof o&&(o=r+parseFloat(o,10)),"number"==typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback.call(this._onUpdateCallbackContext,this,i),1==n){if(this._repeat>0){isFinite(this._repeat)&&this._repeat--;for(e in this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e],10)),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),this._startTime=t+this._delayTime,this.onLoop.dispatch(this._object),!0}this.isRunning=!1,this.onComplete.dispatch(this._object);for(var s=0,l=this._chainedTweens.length;l>s;s++)this._chainedTweens[s].start(t);return!1}return!0}},n.Tween.prototype.constructor=n.Tween,n.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(-Math.pow(2,-10*(t-1))+2)}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),-(n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)))},Out:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin(2*(t-e)*Math.PI/i)+1)},InOut:function(t){var e,n=.1,i=.4;return 0===t?0:1===t?1:(!n||1>n?(n=1,e=i/4):e=i*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?-.5*n*Math.pow(2,10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i):n*Math.pow(2,-10*(t-=1))*Math.sin(2*(t-e)*Math.PI/i)*.5+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?.5*t*t*((e+1)*t-e):.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-n.Easing.Bounce.Out(1-t)},Out:function(t){return 1/2.75>t?7.5625*t*t:2/2.75>t?7.5625*(t-=1.5/2.75)*t+.75:2.5/2.75>t?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return.5>t?.5*n.Easing.Bounce.In(2*t):.5*n.Easing.Bounce.Out(2*t-1)+.5}}},n.Time=function(t){this.game=t,this.time=0,this.now=0,this.elapsed=0,this.pausedTime=0,this.advancedTiming=!1,this.fps=0,this.fpsMin=1e3,this.fpsMax=0,this.msMin=1e3,this.msMax=0,this.physicsElapsed=0,this.deltaCap=0,this.timeCap=1e3,this.frames=0,this.pauseDuration=0,this.timeToCall=0,this.lastTime=0,this.events=new n.Timer(this.game,!1),this._started=0,this._timeLastSecond=0,this._pauseStarted=0,this._justResumed=!1,this._timers=[],this._len=0,this._i=0
},n.Time.prototype={boot:function(){this._started=Date.now(),this.events.start()},create:function(t){"undefined"==typeof t&&(t=!0);var e=new n.Timer(this.game,t);return this._timers.push(e),e},removeAll:function(){for(var t=0;t<this._timers.length;t++)this._timers[t].destroy();this._timers=[],this.events.removeAll()},update:function(t){if(this.now=t,this.timeToCall=this.game.math.max(0,16-(t-this.lastTime)),this.elapsed=this.now-this.time,this.elapsed>this.timeCap&&(this.elapsed=1/60),this.physicsElapsed=this.elapsed/1e3||1/60,this.deltaCap>0&&this.physicsElapsed>this.deltaCap&&(this.physicsElapsed=this.deltaCap),this.advancedTiming&&(this.msMin=this.game.math.min(this.msMin,this.elapsed),this.msMax=this.game.math.max(this.msMax,this.elapsed),this.frames++,this.now>this._timeLastSecond+1e3&&(this.fps=Math.round(1e3*this.frames/(this.now-this._timeLastSecond)),this.fpsMin=this.game.math.min(this.fpsMin,this.fps),this.fpsMax=this.game.math.max(this.fpsMax,this.fps),this._timeLastSecond=this.now,this.frames=0)),this.time=this.now,this.lastTime=t+this.timeToCall,!this.game.paused)for(this.events.update(this.now),this._i=0,this._len=this._timers.length;this._i<this._len;)this._timers[this._i].update(this.now)?this._i++:(this._timers.splice(this._i,1),this._len--)},gamePaused:function(){this._pauseStarted=this.now,this.events.pause();for(var t=this._timers.length;t--;)this._timers[t]._pause()},gameResumed:function(){this.time=this.now=Date.now(),this.pauseDuration=this.time-this._pauseStarted,this.events.resume();for(var t=this._timers.length;t--;)this._timers[t]._resume()},totalElapsedSeconds:function(){return.001*(this.now-this._started)},elapsedSince:function(t){return this.now-t},elapsedSecondsSince:function(t){return.001*(this.now-t)},reset:function(){this._started=this.now,this.removeAll()}},n.Time.prototype.constructor=n.Time,n.Timer=function(t,e){"undefined"==typeof e&&(e=!0),this.game=t,this.running=!1,this.autoDestroy=e,this.expired=!1,this.elapsed=0,this.events=[],this.onComplete=new n.Signal,this.nextTick=0,this.timeCap=1e3,this.paused=!1,this._codePaused=!1,this._started=0,this._pauseStarted=0,this._pauseTotal=0,this._now=Date.now(),this._len=0,this._marked=0,this._i=0,this._diff=0,this._newTick=0},n.Timer.MINUTE=6e4,n.Timer.SECOND=1e3,n.Timer.HALF=500,n.Timer.QUARTER=250,n.Timer.prototype={create:function(t,e,i,r,o,a){var s=t;s+=0===this._now?this.game.time.now:this._now;var l=new n.TimerEvent(this,t,s,i,e,r,o,a);return this.events.push(l),this.order(),this.expired=!1,l},add:function(t,e,n){return this.create(t,!1,0,e,n,Array.prototype.splice.call(arguments,3))},repeat:function(t,e,n,i){return this.create(t,!1,e,n,i,Array.prototype.splice.call(arguments,4))},loop:function(t,e,n){return this.create(t,!0,0,e,n,Array.prototype.splice.call(arguments,3))},start:function(t){if(!this.running){this._started=this.game.time.now+(t||0),this.running=!0;for(var e=0;e<this.events.length;e++)this.events[e].tick=this.events[e].delay+this._started}},stop:function(t){this.running=!1,"undefined"==typeof t&&(t=!0),t&&(this.events.length=0)},remove:function(t){for(var e=0;e<this.events.length;e++)if(this.events[e]===t)return this.events[e].pendingDelete=!0,!0;return!1},order:function(){this.events.length>0&&(this.events.sort(this.sortHandler),this.nextTick=this.events[0].tick)},sortHandler:function(t,e){return t.tick<e.tick?-1:t.tick>e.tick?1:0},clearPendingEvents:function(){for(this._i=this.events.length;this._i--;)this.events[this._i].pendingDelete&&this.events.splice(this._i,1);this._len=this.events.length,this._i=0},update:function(t){if(this.paused)return!0;if(this.elapsed=t-this._now,this._now=t,this.elapsed>this.timeCap&&this.adjustEvents(t-this.elapsed),this._marked=0,this.clearPendingEvents(),this.running&&this._now>=this.nextTick&&this._len>0){for(;this._i<this._len&&this.running&&this._now>=this.events[this._i].tick;)this._newTick=this._now+this.events[this._i].delay-(this._now-this.events[this._i].tick),this._newTick<0&&(this._newTick=this._now+this.events[this._i].delay),this.events[this._i].loop===!0?(this.events[this._i].tick=this._newTick,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)):this.events[this._i].repeatCount>0?(this.events[this._i].repeatCount--,this.events[this._i].tick=this._newTick,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)):(this._marked++,this.events[this._i].pendingDelete=!0,this.events[this._i].callback.apply(this.events[this._i].callbackContext,this.events[this._i].args)),this._i++;this.events.length>this._marked?this.order():(this.expired=!0,this.onComplete.dispatch(this))}return this.expired&&this.autoDestroy?!1:!0},pause:function(){this.running&&(this._codePaused=!0,this.paused||(this._pauseStarted=this.game.time.now,this.paused=!0))},_pause:function(){!this.paused&&this.running&&(this._pauseStarted=this.game.time.now,this.paused=!0)},adjustEvents:function(t){for(var e=0;e<this.events.length;e++)if(!this.events[e].pendingDelete){var n=this.events[e].tick-t;0>n&&(n=0),this.events[e].tick=this._now+n}var i=this.nextTick-t;this.nextTick=0>i?this._now:this._now+i},resume:function(){if(this.paused){var t=this.game.time.now;this._pauseTotal+=t-this._now,this._now=t,this.adjustEvents(this._pauseStarted),this.paused=!1,this._codePaused=!1}},_resume:function(){this._codePaused||this.resume()},removeAll:function(){this.onComplete.removeAll(),this.events.length=0,this._len=0,this._i=0},destroy:function(){this.onComplete.removeAll(),this.running=!1,this.events=[],this._len=0,this._i=0}},Object.defineProperty(n.Timer.prototype,"next",{get:function(){return this.nextTick}}),Object.defineProperty(n.Timer.prototype,"duration",{get:function(){return this.running&&this.nextTick>this._now?this.nextTick-this._now:0}}),Object.defineProperty(n.Timer.prototype,"length",{get:function(){return this.events.length}}),Object.defineProperty(n.Timer.prototype,"ms",{get:function(){return this._now-this._started-this._pauseTotal}}),Object.defineProperty(n.Timer.prototype,"seconds",{get:function(){return.001*this.ms}}),n.Timer.prototype.constructor=n.Timer,n.TimerEvent=function(t,e,n,i,r,o,a,s){this.timer=t,this.delay=e,this.tick=n,this.repeatCount=i-1,this.loop=r,this.callback=o,this.callbackContext=a,this.args=s,this.pendingDelete=!1},n.TimerEvent.prototype.constructor=n.TimerEvent,n.AnimationManager=function(t){this.sprite=t,this.game=t.game,this.currentFrame=null,this.currentAnim=null,this.updateIfVisible=!0,this.isLoaded=!1,this._frameData=null,this._anims={},this._outputFrames=[]},n.AnimationManager.prototype={loadFrameData:function(t){this._frameData=t,this.frame=0,this.isLoaded=!0},add:function(t,e,i,r,o){return null===this._frameData?void console.warn("No FrameData available for Phaser.Animation "+t):(e=e||[],i=i||60,"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=e&&"number"==typeof e[0]?!0:!1),null===this.sprite.events.onAnimationStart&&(this.sprite.events.onAnimationStart=new n.Signal,this.sprite.events.onAnimationComplete=new n.Signal,this.sprite.events.onAnimationLoop=new n.Signal),this._outputFrames.length=0,this._frameData.getFrameIndexes(e,o,this._outputFrames),this._anims[t]=new n.Animation(this.game,this.sprite,t,this._frameData,this._outputFrames,i,r),this.currentAnim=this._anims[t],this.currentFrame=this.currentAnim.currentFrame,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1),this._anims[t])},validateFrames:function(t,e){"undefined"==typeof e&&(e=!0);for(var n=0;n<t.length;n++)if(e===!0){if(t[n]>this._frameData.total)return!1}else if(this._frameData.checkFrameName(t[n])===!1)return!1;return!0},play:function(t,e,n,i){if(this._anims[t]){if(this.currentAnim!==this._anims[t])return this.currentAnim&&this.currentAnim.isPlaying&&this.currentAnim.stop(),this.currentAnim=this._anims[t],this.currentAnim.paused=!1,this.currentAnim.play(e,n,i);if(this.currentAnim.isPlaying===!1)return this.currentAnim.paused=!1,this.currentAnim.play(e,n,i)}},stop:function(t,e){"undefined"==typeof e&&(e=!1),"string"==typeof t?this._anims[t]&&(this.currentAnim=this._anims[t],this.currentAnim.stop(e)):this.currentAnim&&this.currentAnim.stop(e)},update:function(){return this.updateIfVisible&&!this.sprite.visible?!1:this.currentAnim&&this.currentAnim.update()===!0?(this.currentFrame=this.currentAnim.currentFrame,!0):!1},getAnimation:function(t){return"string"==typeof t&&this._anims[t]?this._anims[t]:null},refreshFrame:function(){this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1)},destroy:function(){var t=null;for(var t in this._anims)this._anims.hasOwnProperty(t)&&this._anims[t].destroy();this._anims={},this._frameData=null,this._frameIndex=0,this.currentAnim=null,this.currentFrame=null}},n.AnimationManager.prototype.constructor=n.AnimationManager,Object.defineProperty(n.AnimationManager.prototype,"frameData",{get:function(){return this._frameData}}),Object.defineProperty(n.AnimationManager.prototype,"frameTotal",{get:function(){return this._frameData?this._frameData.total:-1}}),Object.defineProperty(n.AnimationManager.prototype,"paused",{get:function(){return this.currentAnim.isPaused},set:function(t){this.currentAnim.paused=t}}),Object.defineProperty(n.AnimationManager.prototype,"frame",{get:function(){return this.currentFrame?this._frameIndex:void 0},set:function(t){"number"==typeof t&&this._frameData&&null!==this._frameData.getFrame(t)&&(this.currentFrame=this._frameData.getFrame(t),this.currentFrame&&(this._frameIndex=t,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1)))}}),Object.defineProperty(n.AnimationManager.prototype,"frameName",{get:function(){return this.currentFrame?this.currentFrame.name:void 0},set:function(t){"string"==typeof t&&this._frameData&&null!==this._frameData.getFrameByName(t)?(this.currentFrame=this._frameData.getFrameByName(t),this.currentFrame&&(this._frameIndex=this.currentFrame.index,this.sprite.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this.sprite.__tilePattern&&(this.__tilePattern=!1,this.tilingTexture=!1))):console.warn("Cannot set frameName: "+t)}}),n.Animation=function(t,e,i,r,o,a,s){this.game=t,this._parent=e,this._frameData=r,this.name=i,this._frames=[],this._frames=this._frames.concat(o),this.delay=1e3/a,this.loop=s,this.loopCount=0,this.killOnComplete=!1,this.isFinished=!1,this.isPlaying=!1,this.isPaused=!1,this._pauseStartTime=0,this._frameIndex=0,this._frameDiff=0,this._frameSkip=1,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart=new n.Signal,this.onComplete=new n.Signal,this.onLoop=new n.Signal,this.game.onPause.add(this.onPause,this),this.game.onResume.add(this.onResume,this)},n.Animation.prototype={play:function(t,e,n){return"number"==typeof t&&(this.delay=1e3/t),"boolean"==typeof e&&(this.loop=e),"undefined"!=typeof n&&(this.killOnComplete=n),this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1),this._parent.events.onAnimationStart.dispatch(this._parent,this),this.onStart.dispatch(this._parent,this),this},restart:function(){this.isPlaying=!0,this.isFinished=!1,this.paused=!1,this.loopCount=0,this._timeLastFrame=this.game.time.now,this._timeNextFrame=this.game.time.now+this.delay,this._frameIndex=0,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.onStart.dispatch(this._parent,this)},setFrame:function(t,e){var n;if("undefined"==typeof e&&(e=!1),"string"==typeof t)for(var i=0;i<this._frames.length;i++)this._frameData.getFrame(this._frames[i]).name===t&&(n=i);else if("number"==typeof t)if(e)n=t;else for(var i=0;i<this._frames.length;i++)this.frames[i]===n&&(n=i);n&&(this._frameIndex=n-1,this._timeNextFrame=this.game.time.now,this.update())},stop:function(t,e){"undefined"==typeof t&&(t=!1),"undefined"==typeof e&&(e=!1),this.isPlaying=!1,this.isFinished=!0,this.paused=!1,t&&(this.currentFrame=this._frameData.getFrame(this._frames[0])),e&&(this._parent.events.onAnimationComplete.dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this))},onPause:function(){this.isPlaying&&(this._frameDiff=this._timeNextFrame-this.game.time.now)},onResume:function(){this.isPlaying&&(this._timeNextFrame=this.game.time.now+this._frameDiff)},update:function(){return this.isPaused?!1:this.isPlaying===!0&&this.game.time.now>=this._timeNextFrame?(this._frameSkip=1,this._frameDiff=this.game.time.now-this._timeNextFrame,this._timeLastFrame=this.game.time.now,this._frameDiff>this.delay&&(this._frameSkip=Math.floor(this._frameDiff/this.delay),this._frameDiff-=this._frameSkip*this.delay),this._timeNextFrame=this.game.time.now+(this.delay-this._frameDiff),this._frameIndex+=this._frameSkip,this._frameIndex>=this._frames.length?this.loop?(this._frameIndex%=this._frames.length,this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1)),this.loopCount++,this._parent.events.onAnimationLoop.dispatch(this._parent,this),this.onLoop.dispatch(this._parent,this)):this.complete():(this.currentFrame=this._frameData.getFrame(this._frames[this._frameIndex]),this.currentFrame&&(this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]),this._parent.__tilePattern&&(this._parent.__tilePattern=!1,this._parent.tilingTexture=!1))),!0):!1},destroy:function(){this.game.onPause.remove(this.onPause,this),this.game.onResume.remove(this.onResume,this),this.game=null,this._parent=null,this._frames=null,this._frameData=null,this.currentFrame=null,this.isPlaying=!1,this.onStart.dispose(),this.onLoop.dispose(),this.onComplete.dispose()},complete:function(){this.isPlaying=!1,this.isFinished=!0,this.paused=!1,this._parent.events.onAnimationComplete.dispatch(this._parent,this),this.onComplete.dispatch(this._parent,this),this.killOnComplete&&this._parent.kill()}},n.Animation.prototype.constructor=n.Animation,Object.defineProperty(n.Animation.prototype,"paused",{get:function(){return this.isPaused},set:function(t){this.isPaused=t,t?this._pauseStartTime=this.game.time.now:this.isPlaying&&(this._timeNextFrame=this.game.time.now+this.delay)}}),Object.defineProperty(n.Animation.prototype,"frameTotal",{get:function(){return this._frames.length}}),Object.defineProperty(n.Animation.prototype,"frame",{get:function(){return null!==this.currentFrame?this.currentFrame.index:this._frameIndex},set:function(t){this.currentFrame=this._frameData.getFrame(this._frames[t]),null!==this.currentFrame&&(this._frameIndex=t,this._parent.setTexture(PIXI.TextureCache[this.currentFrame.uuid]))}}),Object.defineProperty(n.Animation.prototype,"speed",{get:function(){return Math.round(1e3/this.delay)},set:function(t){t>=1&&(this.delay=1e3/t)}}),n.Animation.generateFrameNames=function(t,e,i,r,o){"undefined"==typeof r&&(r="");var a=[],s="";if(i>e)for(var l=e;i>=l;l++)s="number"==typeof o?n.Utils.pad(l.toString(),o,"0",1):l.toString(),s=t+s+r,a.push(s);else for(var l=e;l>=i;l--)s="number"==typeof o?n.Utils.pad(l.toString(),o,"0",1):l.toString(),s=t+s+r,a.push(s);return a},n.Frame=function(t,e,i,r,o,a,s){this.index=t,this.x=e,this.y=i,this.width=r,this.height=o,this.name=a,this.uuid=s,this.centerX=Math.floor(r/2),this.centerY=Math.floor(o/2),this.distance=n.Math.distance(0,0,r,o),this.rotated=!1,this.rotationDirection="cw",this.trimmed=!1,this.sourceSizeW=r,this.sourceSizeH=o,this.spriteSourceSizeX=0,this.spriteSourceSizeY=0,this.spriteSourceSizeW=0,this.spriteSourceSizeH=0},n.Frame.prototype={setTrim:function(t,e,n,i,r,o,a){this.trimmed=t,t&&(this.width=e,this.height=n,this.sourceSizeW=e,this.sourceSizeH=n,this.centerX=Math.floor(e/2),this.centerY=Math.floor(n/2),this.spriteSourceSizeX=i,this.spriteSourceSizeY=r,this.spriteSourceSizeW=o,this.spriteSourceSizeH=a)},getRect:function(t){return"undefined"==typeof t?t=new n.Rectangle(this.x,this.y,this.width,this.height):t.setTo(this.x,this.y,this.width,this.height),t}},n.Frame.prototype.constructor=n.Frame,n.FrameData=function(){this._frames=[],this._frameNames=[]},n.FrameData.prototype={addFrame:function(t){return t.index=this._frames.length,this._frames.push(t),""!==t.name&&(this._frameNames[t.name]=t.index),t},getFrame:function(t){return t>this._frames.length&&(t=0),this._frames[t]},getFrameByName:function(t){return"number"==typeof this._frameNames[t]?this._frames[this._frameNames[t]]:null},checkFrameName:function(t){return null==this._frameNames[t]?!1:!0},getFrameRange:function(t,e,n){"undefined"==typeof n&&(n=[]);for(var i=t;e>=i;i++)n.push(this._frames[i]);return n},getFrames:function(t,e,n){if("undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=[]),"undefined"==typeof t||0===t.length)for(var i=0;i<this._frames.length;i++)n.push(this._frames[i]);else for(var i=0,r=t.length;r>i;i++)n.push(e?this.getFrame(t[i]):this.getFrameByName(t[i]));return n},getFrameIndexes:function(t,e,n){if("undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=[]),"undefined"==typeof t||0===t.length)for(var i=0,r=this._frames.length;r>i;i++)n.push(this._frames[i].index);else for(var i=0,r=t.length;r>i;i++)e?n.push(t[i]):this.getFrameByName(t[i])&&n.push(this.getFrameByName(t[i]).index);return n}},n.FrameData.prototype.constructor=n.FrameData,Object.defineProperty(n.FrameData.prototype,"total",{get:function(){return this._frames.length}}),n.AnimationParser={spriteSheet:function(t,e,i,r,o,a,s){var l=t.cache.getImage(e);if(null==l)return null;var u=l.width,h=l.height;0>=i&&(i=Math.floor(-u/Math.min(-1,i))),0>=r&&(r=Math.floor(-h/Math.min(-1,r)));var c=Math.floor((u-a)/(i+s)),d=Math.floor((h-a)/(r+s)),p=c*d;if(-1!==o&&(p=o),0===u||0===h||i>u||r>h||0===p)return console.warn("Phaser.AnimationParser.spriteSheet: width/height zero or width/height < given frameWidth/frameHeight"),null;for(var f=new n.FrameData,m=a,g=a,y=0;p>y;y++){var _=t.rnd.uuid();f.addFrame(new n.Frame(y,m,g,i,r,"",_)),PIXI.TextureCache[_]=new PIXI.Texture(PIXI.BaseTextureCache[e],{x:m,y:g,width:i,height:r}),m+=i+s,m+i>u&&(m=a,g+=r+s)}return f},JSONData:function(t,e,i){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONData: Invalid Texture Atlas JSON given, missing 'frames' array"),void console.log(e);for(var r,o=new n.FrameData,a=e.frames,s=0;s<a.length;s++){var l=t.rnd.uuid();r=o.addFrame(new n.Frame(s,a[s].frame.x,a[s].frame.y,a[s].frame.w,a[s].frame.h,a[s].filename,l)),PIXI.TextureCache[l]=new PIXI.Texture(PIXI.BaseTextureCache[i],{x:a[s].frame.x,y:a[s].frame.y,width:a[s].frame.w,height:a[s].frame.h}),a[s].trimmed&&(r.setTrim(a[s].trimmed,a[s].sourceSize.w,a[s].sourceSize.h,a[s].spriteSourceSize.x,a[s].spriteSourceSize.y,a[s].spriteSourceSize.w,a[s].spriteSourceSize.h),PIXI.TextureCache[l].trim=new n.Rectangle(a[s].spriteSourceSize.x,a[s].spriteSourceSize.y,a[s].sourceSize.w,a[s].sourceSize.h))}return o},JSONDataHash:function(t,e,i){if(!e.frames)return console.warn("Phaser.AnimationParser.JSONDataHash: Invalid Texture Atlas JSON given, missing 'frames' object"),void console.log(e);var r,o=new n.FrameData,a=e.frames,s=0;for(var l in a){var u=t.rnd.uuid();r=o.addFrame(new n.Frame(s,a[l].frame.x,a[l].frame.y,a[l].frame.w,a[l].frame.h,l,u)),PIXI.TextureCache[u]=new PIXI.Texture(PIXI.BaseTextureCache[i],{x:a[l].frame.x,y:a[l].frame.y,width:a[l].frame.w,height:a[l].frame.h}),a[l].trimmed&&(r.setTrim(a[l].trimmed,a[l].sourceSize.w,a[l].sourceSize.h,a[l].spriteSourceSize.x,a[l].spriteSourceSize.y,a[l].spriteSourceSize.w,a[l].spriteSourceSize.h),PIXI.TextureCache[u].trim=new n.Rectangle(a[l].spriteSourceSize.x,a[l].spriteSourceSize.y,a[l].sourceSize.w,a[l].sourceSize.h)),s++}return o},XMLData:function(t,e,i){if(!e.getElementsByTagName("TextureAtlas"))return void console.warn("Phaser.AnimationParser.XMLData: Invalid Texture Atlas XML given, missing <TextureAtlas> tag");for(var r,o,a,s,l,u,h,c,d,p,f,m,g=new n.FrameData,y=e.getElementsByTagName("SubTexture"),_=0;_<y.length;_++)o=t.rnd.uuid(),s=y[_].attributes,a=s.name.nodeValue,l=parseInt(s.x.nodeValue,10),u=parseInt(s.y.nodeValue,10),h=parseInt(s.width.nodeValue,10),c=parseInt(s.height.nodeValue,10),d=null,p=null,s.frameX&&(d=Math.abs(parseInt(s.frameX.nodeValue,10)),p=Math.abs(parseInt(s.frameY.nodeValue,10)),f=parseInt(s.frameWidth.nodeValue,10),m=parseInt(s.frameHeight.nodeValue,10)),r=g.addFrame(new n.Frame(_,l,u,h,c,a,o)),PIXI.TextureCache[o]=new PIXI.Texture(PIXI.BaseTextureCache[i],{x:l,y:u,width:h,height:c}),(null!==d||null!==p)&&(r.setTrim(!0,h,c,d,p,f,m),PIXI.TextureCache[o].trim=new n.Rectangle(d,p,h,c));return g}},n.Cache=function(t){this.game=t,this._canvases={},this._images={},this._textures={},this._sounds={},this._text={},this._json={},this._physics={},this._tilemaps={},this._binary={},this._bitmapDatas={},this._bitmapFont={},this.addDefaultImage(),this.addMissingImage(),this.onSoundUnlock=new n.Signal,this._cacheMap=[],this._cacheMap[n.Cache.CANVAS]=this._canvases,this._cacheMap[n.Cache.IMAGE]=this._images,this._cacheMap[n.Cache.TEXTURE]=this._textures,this._cacheMap[n.Cache.SOUND]=this._sounds,this._cacheMap[n.Cache.TEXT]=this._text,this._cacheMap[n.Cache.PHYSICS]=this._physics,this._cacheMap[n.Cache.TILEMAP]=this._tilemaps,this._cacheMap[n.Cache.BINARY]=this._binary,this._cacheMap[n.Cache.BITMAPDATA]=this._bitmapDatas,this._cacheMap[n.Cache.BITMAPFONT]=this._bitmapFont,this._cacheMap[n.Cache.JSON]=this._json},n.Cache.CANVAS=1,n.Cache.IMAGE=2,n.Cache.TEXTURE=3,n.Cache.SOUND=4,n.Cache.TEXT=5,n.Cache.PHYSICS=6,n.Cache.TILEMAP=7,n.Cache.BINARY=8,n.Cache.BITMAPDATA=9,n.Cache.BITMAPFONT=10,n.Cache.JSON=11,n.Cache.prototype={addCanvas:function(t,e,n){this._canvases[t]={canvas:e,context:n}},addBinary:function(t,e){this._binary[t]=e},addBitmapData:function(t,e){return this._bitmapDatas[t]=e,e},addRenderTexture:function(t,e){var i=new n.Frame(0,0,0,e.width,e.height,"","");this._textures[t]={texture:e,frame:i}},addSpriteSheet:function(t,e,i,r,o,a,s,l){this._images[t]={url:e,data:i,spriteSheet:!0,frameWidth:r,frameHeight:o,margin:s,spacing:l},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(i),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),this._images[t].frameData=n.AnimationParser.spriteSheet(this.game,t,r,o,a,s,l)},addTilemap:function(t,e,n,i){this._tilemaps[t]={url:e,data:n,format:i}},addTextureAtlas:function(t,e,i,r,o){this._images[t]={url:e,data:i,spriteSheet:!0},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(i),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),o==n.Loader.TEXTURE_ATLAS_JSON_ARRAY?this._images[t].frameData=n.AnimationParser.JSONData(this.game,r,t):o==n.Loader.TEXTURE_ATLAS_JSON_HASH?this._images[t].frameData=n.AnimationParser.JSONDataHash(this.game,r,t):o==n.Loader.TEXTURE_ATLAS_XML_STARLING&&(this._images[t].frameData=n.AnimationParser.XMLData(this.game,r,t))},addBitmapFont:function(t,e,i,r,o,a){this._images[t]={url:e,data:i,spriteSheet:!0},PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(i),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t]),n.LoaderParser.bitmapFont(this.game,r,t,o,a)},addPhysicsData:function(t,e,n,i){this._physics[t]={url:e,data:n,format:i}},addDefaultImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgAQMAAABJtOi3AAAAA1BMVEX///+nxBvIAAAAAXRSTlMAQObYZgAAABVJREFUeF7NwIEAAAAAgKD9qdeocAMAoAABm3DkcAAAAABJRU5ErkJggg==",this._images.__default={url:null,data:t,spriteSheet:!1},this._images.__default.frame=new n.Frame(0,0,0,32,32,"",""),PIXI.BaseTextureCache.__default=new PIXI.BaseTexture(t),PIXI.TextureCache.__default=new PIXI.Texture(PIXI.BaseTextureCache.__default)},addMissingImage:function(){var t=new Image;t.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAIAAAD8GO2jAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJ9JREFUeNq01ssOwyAMRFG46v//Mt1ESmgh+DFmE2GPOBARKb2NVjo+17PXLD8a1+pl5+A+wSgFygymWYHBb0FtsKhJDdZlncG2IzJ4ayoMDv20wTmSMzClEgbWYNTAkQ0Z+OJ+A/eWnAaR9+oxCF4Os0H8htsMUp+pwcgBBiMNnAwF8GqIgL2hAzaGFFgZauDPKABmowZ4GL369/0rwACp2yA/ttmvsQAAAABJRU5ErkJggg==",this._images.__missing={url:null,data:t,spriteSheet:!1},this._images.__missing.frame=new n.Frame(0,0,0,32,32,"",""),PIXI.BaseTextureCache.__missing=new PIXI.BaseTexture(t),PIXI.TextureCache.__missing=new PIXI.Texture(PIXI.BaseTextureCache.__missing)},addText:function(t,e,n){this._text[t]={url:e,data:n}},addJSON:function(t,e,n){this._json[t]={url:e,data:n}},addImage:function(t,e,i){this._images[t]={url:e,data:i,spriteSheet:!1},this._images[t].frame=new n.Frame(0,0,0,i.width,i.height,t,this.game.rnd.uuid()),PIXI.BaseTextureCache[t]=new PIXI.BaseTexture(i),PIXI.TextureCache[t]=new PIXI.Texture(PIXI.BaseTextureCache[t])},addSound:function(t,e,n,i,r){i=i||!0,r=r||!1;var o=!1;r&&(o=!0),this._sounds[t]={url:e,data:n,isDecoding:!1,decoded:o,webAudio:i,audioTag:r,locked:this.game.sound.touchLocked}},reloadSound:function(t){var e=this;this._sounds[t]&&(this._sounds[t].data.src=this._sounds[t].url,this._sounds[t].data.addEventListener("canplaythrough",function(){return e.reloadSoundComplete(t)},!1),this._sounds[t].data.load())},reloadSoundComplete:function(t){this._sounds[t]&&(this._sounds[t].locked=!1,this.onSoundUnlock.dispatch(t))},updateSound:function(t,e,n){this._sounds[t]&&(this._sounds[t][e]=n)},decodedSound:function(t,e){this._sounds[t].data=e,this._sounds[t].decoded=!0,this._sounds[t].isDecoding=!1},getCanvas:function(t){return this._canvases[t]?this._canvases[t].canvas:void console.warn('Phaser.Cache.getCanvas: Invalid key: "'+t+'"')},getBitmapData:function(t){return this._bitmapDatas[t]?this._bitmapDatas[t]:void console.warn('Phaser.Cache.getBitmapData: Invalid key: "'+t+'"')},getBitmapFont:function(t){return this._bitmapFont[t]?this._bitmapFont[t]:void console.warn('Phaser.Cache.getBitmapFont: Invalid key: "'+t+'"')},getPhysicsData:function(t,e,n){if("undefined"==typeof e||null===e){if(this._physics[t])return this._physics[t].data;console.warn('Phaser.Cache.getPhysicsData: Invalid key: "'+t+'"')}else if(this._physics[t]&&this._physics[t].data[e]){var i=this._physics[t].data[e];if(!i||!n)return i;for(var r in i)if(r=i[r],r.fixtureKey===n)return r;console.warn('Phaser.Cache.getPhysicsData: Could not find given fixtureKey: "'+n+" in "+t+'"')}else console.warn('Phaser.Cache.getPhysicsData: Invalid key/object: "'+t+" / "+e+'"');return null},checkKey:function(t,e){return this._cacheMap[t][e]?!0:!1},checkCanvasKey:function(t){return this.checkKey(n.Cache.CANVAS,t)},checkImageKey:function(t){return this.checkKey(n.Cache.IMAGE,t)},checkTextureKey:function(t){return this.checkKey(n.Cache.TEXTURE,t)},checkSoundKey:function(t){return this.checkKey(n.Cache.SOUND,t)},checkTextKey:function(t){return this.checkKey(n.Cache.TEXT,t)},checkPhysicsKey:function(t){return this.checkKey(n.Cache.PHYSICS,t)},checkTilemapKey:function(t){return this.checkKey(n.Cache.TILEMAP,t)},checkBinaryKey:function(t){return this.checkKey(n.Cache.BINARY,t)},checkBitmapDataKey:function(t){return this.checkKey(n.Cache.BITMAPDATA,t)},checkBitmapFontKey:function(t){return this.checkKey(n.Cache.BITMAPFONT,t)},checkJSONKey:function(t){return this.checkKey(n.Cache.JSON,t)},getImage:function(t){return this._images[t]?this._images[t].data:void console.warn('Phaser.Cache.getImage: Invalid key: "'+t+'"')},getTilemapData:function(t){return this._tilemaps[t]?this._tilemaps[t]:void console.warn('Phaser.Cache.getTilemapData: Invalid key: "'+t+'"')},getFrameData:function(t){return this._images[t]&&this._images[t].frameData?this._images[t].frameData:null},updateFrameData:function(t,e){this._images[t]&&(this._images[t].spriteSheet=!0,this._images[t].frameData=e)},getFrameByIndex:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrame(e):null},getFrameByName:function(t,e){return this._images[t]&&this._images[t].frameData?this._images[t].frameData.getFrameByName(e):null},getFrame:function(t){return this._images[t]&&this._images[t].spriteSheet===!1?this._images[t].frame:null},getTextureFrame:function(t){return this._textures[t]?this._textures[t].frame:null},getTexture:function(t){return this._textures[t]?this._textures[t]:void console.warn('Phaser.Cache.getTexture: Invalid key: "'+t+'"')},getSound:function(t){return this._sounds[t]?this._sounds[t]:void console.warn('Phaser.Cache.getSound: Invalid key: "'+t+'"')},getSoundData:function(t){return this._sounds[t]?this._sounds[t].data:void console.warn('Phaser.Cache.getSoundData: Invalid key: "'+t+'"')},isSoundDecoded:function(t){return this._sounds[t]?this._sounds[t].decoded:void 0},isSoundReady:function(t){return this._sounds[t]&&this._sounds[t].decoded&&this.game.sound.touchLocked===!1},isSpriteSheet:function(t){return this._images[t]?this._images[t].spriteSheet:!1},getText:function(t){return this._text[t]?this._text[t].data:void console.warn('Phaser.Cache.getText: Invalid key: "'+t+'"')},getJSON:function(t){return this._json[t]?this._json[t].data:void console.warn('Phaser.Cache.getJSON: Invalid key: "'+t+'"')},getBinary:function(t){return this._binary[t]?this._binary[t]:void console.warn('Phaser.Cache.getBinary: Invalid key: "'+t+'"')},getKeys:function(t){var e=null;switch(t){case n.Cache.CANVAS:e=this._canvases;break;case n.Cache.IMAGE:e=this._images;break;case n.Cache.TEXTURE:e=this._textures;break;case n.Cache.SOUND:e=this._sounds;break;case n.Cache.TEXT:e=this._text;break;case n.Cache.PHYSICS:e=this._physics;break;case n.Cache.TILEMAP:e=this._tilemaps;break;case n.Cache.BINARY:e=this._binary;break;case n.Cache.BITMAPDATA:e=this._bitmapDatas;break;case n.Cache.BITMAPFONT:e=this._bitmapFont;break;case n.Cache.JSON:e=this._json}if(e){var i=[];for(var r in e)"__default"!==r&&"__missing"!==r&&i.push(r);return i}},removeCanvas:function(t){delete this._canvases[t]},removeImage:function(t){delete this._images[t]},removeSound:function(t){delete this._sounds[t]},removeText:function(t){delete this._text[t]},removeJSON:function(t){delete this._json[t]},removePhysics:function(t){delete this._physics[t]},removeTilemap:function(t){delete this._tilemaps[t]},removeBinary:function(t){delete this._binary[t]},removeBitmapData:function(t){delete this._bitmapDatas[t]},removeBitmapFont:function(t){delete this._bitmapFont[t]},destroy:function(){for(var t in this._canvases)delete this._canvases[t];for(var t in this._images)"__default"!==t&&"__missing"!==t&&delete this._images[t];for(var t in this._sounds)delete this._sounds[t];for(var t in this._text)delete this._text[t];for(var t in this._json)delete this._json[t];for(var t in this._textures)delete this._textures[t];for(var t in this._physics)delete this._physics[t];for(var t in this._tilemaps)delete this._tilemaps[t];for(var t in this._binary)delete this._binary[t];for(var t in this._bitmapDatas)delete this._bitmapDatas[t];for(var t in this._bitmapFont)delete this._bitmapFont[t]}},n.Cache.prototype.constructor=n.Cache,n.Loader=function(t){this.game=t,this._fileList=[],this._fileIndex=0,this._progressChunk=0,this._xhr=new XMLHttpRequest,this._ajax=null,this.isLoading=!1,this.hasLoaded=!1,this.progress=0,this.progressFloat=0,this.preloadSprite=null,this.crossOrigin=!1,this.baseURL="",this.onLoadStart=new n.Signal,this.onFileStart=new n.Signal,this.onFileComplete=new n.Signal,this.onFileError=new n.Signal,this.onLoadComplete=new n.Signal},n.Loader.TEXTURE_ATLAS_JSON_ARRAY=0,n.Loader.TEXTURE_ATLAS_JSON_HASH=1,n.Loader.TEXTURE_ATLAS_XML_STARLING=2,n.Loader.PHYSICS_LIME_CORONA_JSON=3,n.Loader.PHYSICS_PHASER_JSON=4,n.Loader.prototype={setPreloadSprite:function(t,e){e=e||0,this.preloadSprite={sprite:t,direction:e,width:t.width,height:t.height,rect:null},this.preloadSprite.rect=0===e?new n.Rectangle(0,0,1,t.height):new n.Rectangle(0,0,t.width,1),t.crop(this.preloadSprite.rect),t.visible=!0
},checkKeyExists:function(t,e){if(this._fileList.length>0)for(var n=0;n<this._fileList.length;n++)if(this._fileList[n].type===t&&this._fileList[n].key===e)return!0;return!1},getAssetIndex:function(t,e){if(this._fileList.length>0)for(var n=0;n<this._fileList.length;n++)if(this._fileList[n].type===t&&this._fileList[n].key===e)return n;return-1},getAsset:function(t,e){if(this._fileList.length>0)for(var n=0;n<this._fileList.length;n++)if(this._fileList[n].type===t&&this._fileList[n].key===e)return{index:n,file:this._fileList[n]};return!1},reset:function(){this.preloadSprite=null,this.isLoading=!1,this._fileList.length=0,this._fileIndex=0},addToFileList:function(t,e,n,i){var r={type:t,key:e,url:n,data:null,error:!1,loaded:!1};if("undefined"!=typeof i)for(var o in i)r[o]=i[o];this.checkKeyExists(t,e)===!1&&this._fileList.push(r)},replaceInFileList:function(t,e,n,i){var r={type:t,key:e,url:n,data:null,error:!1,loaded:!1};if("undefined"!=typeof i)for(var o in i)r[o]=i[o];var a=this.getAssetIndex(t,e);-1===a?this._fileList.push(r):this._fileList[a]=r},image:function(t,e,n){return"undefined"==typeof n&&(n=!1),n?this.replaceInFileList("image",t,e):this.addToFileList("image",t,e),this},text:function(t,e,n){return"undefined"==typeof n&&(n=!1),n?this.replaceInFileList("text",t,e):this.addToFileList("text",t,e),this},json:function(t,e,n){return"undefined"==typeof n&&(n=!1),n?this.replaceInFileList("json",t,e):this.addToFileList("json",t,e),this},script:function(t,e,n,i){return"undefined"==typeof n&&(n=!1),n!==!1&&"undefined"==typeof i&&(i=n),this.addToFileList("script",t,e,{callback:n,callbackContext:i}),this},binary:function(t,e,n,i){return"undefined"==typeof n&&(n=!1),n!==!1&&"undefined"==typeof i&&(i=n),this.addToFileList("binary",t,e,{callback:n,callbackContext:i}),this},spritesheet:function(t,e,n,i,r,o,a){return"undefined"==typeof r&&(r=-1),"undefined"==typeof o&&(o=0),"undefined"==typeof a&&(a=0),this.addToFileList("spritesheet",t,e,{frameWidth:n,frameHeight:i,frameMax:r,margin:o,spacing:a}),this},audio:function(t,e,n){return"undefined"==typeof n&&(n=!0),this.addToFileList("audio",t,e,{buffer:null,autoDecode:n}),this},tilemap:function(t,e,i,r){if("undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=n.Tilemap.CSV),null==e&&null==i)return console.warn("Phaser.Loader.tilemap - Both mapDataURL and mapData are null. One must be set."),this;if(i){switch(r){case n.Tilemap.CSV:break;case n.Tilemap.TILED_JSON:"string"==typeof i&&(i=JSON.parse(i))}this.game.cache.addTilemap(t,null,i,r)}else this.addToFileList("tilemap",t,e,{format:r});return this},physics:function(t,e,i,r){return"undefined"==typeof e&&(e=null),"undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=n.Physics.LIME_CORONA_JSON),null==e&&null==i?(console.warn("Phaser.Loader.physics - Both dataURL and jsonData are null. One must be set."),this):(i?("string"==typeof i&&(i=JSON.parse(i)),this.game.cache.addPhysicsData(t,null,i,r)):this.addToFileList("physics",t,e,{format:r}),this)},bitmapFont:function(t,e,n,i,r,o){if("undefined"==typeof n&&(n=null),"undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),n)this.addToFileList("bitmapfont",t,e,{xmlURL:n,xSpacing:r,ySpacing:o});else if("string"==typeof i){var a;try{if(window.DOMParser){var s=new DOMParser;a=s.parseFromString(i,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(i)}catch(l){a=void 0}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Bitmap Font XML given");this.addToFileList("bitmapfont",t,e,{xmlURL:null,xmlData:a,xSpacing:r,ySpacing:o})}return this},atlasJSONArray:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_JSON_ARRAY)},atlasJSONHash:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_JSON_HASH)},atlasXML:function(t,e,i,r){return this.atlas(t,e,i,r,n.Loader.TEXTURE_ATLAS_XML_STARLING)},atlas:function(t,e,i,r,o){if("undefined"==typeof i&&(i=null),"undefined"==typeof r&&(r=null),"undefined"==typeof o&&(o=n.Loader.TEXTURE_ATLAS_JSON_ARRAY),i)this.addToFileList("textureatlas",t,e,{atlasURL:i,format:o});else{switch(o){case n.Loader.TEXTURE_ATLAS_JSON_ARRAY:"string"==typeof r&&(r=JSON.parse(r));break;case n.Loader.TEXTURE_ATLAS_XML_STARLING:if("string"==typeof r){var a;try{if(window.DOMParser){var s=new DOMParser;a=s.parseFromString(r,"text/xml")}else a=new ActiveXObject("Microsoft.XMLDOM"),a.async="false",a.loadXML(r)}catch(l){a=void 0}if(!a||!a.documentElement||a.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid Texture Atlas XML given");r=a}}this.addToFileList("textureatlas",t,e,{atlasURL:null,atlasData:r,format:o})}return this},removeFile:function(t,e){var n=this.getAsset(t,e);n!==!1&&this._fileList.splice(n.index,1)},removeAll:function(){this._fileList.length=0},start:function(){this.isLoading||(this.progress=0,this.progressFloat=0,this.hasLoaded=!1,this.isLoading=!0,this.onLoadStart.dispatch(this._fileList.length),this._fileList.length>0?(this._fileIndex=0,this._progressChunk=100/this._fileList.length,this.loadFile()):(this.progress=100,this.progressFloat=100,this.hasLoaded=!0,this.onLoadComplete.dispatch()))},loadFile:function(){if(!this._fileList[this._fileIndex])return void console.warn("Phaser.Loader loadFile invalid index "+this._fileIndex);var t=this._fileList[this._fileIndex],e=this;switch(this.onFileStart.dispatch(this.progress,t.key),t.type){case"image":case"spritesheet":case"textureatlas":case"bitmapfont":t.data=new Image,t.data.name=t.key,t.data.onload=function(){return e.fileComplete(e._fileIndex)},t.data.onerror=function(){return e.fileError(e._fileIndex)},this.crossOrigin&&(t.data.crossOrigin=this.crossOrigin),t.data.src=this.baseURL+t.url;break;case"audio":t.url=this.getAudioURL(t.url),null!==t.url?this.game.sound.usingWebAudio?(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()):this.game.sound.usingAudioTag&&(this.game.sound.touchLocked?(t.data=new Audio,t.data.name=t.key,t.data.preload="auto",t.data.src=this.baseURL+t.url,this.fileComplete(this._fileIndex)):(t.data=new Audio,t.data.name=t.key,t.data.onerror=function(){return e.fileError(e._fileIndex)},t.data.preload="auto",t.data.src=this.baseURL+t.url,t.data.addEventListener("canplaythrough",n.GAMES[this.game.id].load.fileComplete(this._fileIndex),!1),t.data.load())):this.fileError(this._fileIndex);break;case"json":window.XDomainRequest?(this._ajax=new window.XDomainRequest,this._ajax.timeout=3e3,this._ajax.onerror=function(){return e.dataLoadError(e._fileIndex)},this._ajax.ontimeout=function(){return e.dataLoadError(e._fileIndex)},this._ajax.onprogress=function(){},this._ajax.onload=function(){return e.jsonLoadComplete(e._fileIndex)},this._ajax.open("GET",this.baseURL+t.url,!0),this._ajax.send()):(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.jsonLoadComplete(e._fileIndex)},this._xhr.onerror=function(){return e.dataLoadError(e._fileIndex)},this._xhr.send());break;case"tilemap":if(this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",t.format===n.Tilemap.TILED_JSON)this._xhr.onload=function(){return e.jsonLoadComplete(e._fileIndex)};else{if(t.format!==n.Tilemap.CSV)throw new Error("Phaser.Loader. Invalid Tilemap format: "+t.format);this._xhr.onload=function(){return e.csvLoadComplete(e._fileIndex)}}this._xhr.onerror=function(){return e.dataLoadError(e._fileIndex)},this._xhr.send();break;case"text":case"script":case"physics":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="text",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send();break;case"binary":this._xhr.open("GET",this.baseURL+t.url,!0),this._xhr.responseType="arraybuffer",this._xhr.onload=function(){return e.fileComplete(e._fileIndex)},this._xhr.onerror=function(){return e.fileError(e._fileIndex)},this._xhr.send()}},getAudioURL:function(t){var e;"string"==typeof t&&(t=[t]);for(var n=0;n<t.length;n++)if(e=t[n].toLowerCase(),e=e.substr((Math.max(0,e.lastIndexOf("."))||1/0)+1),this.game.device.canPlayAudio(e))return t[n];return null},fileError:function(t){this._fileList[t].loaded=!0,this._fileList[t].error=!0,this.onFileError.dispatch(this._fileList[t].key,this._fileList[t]),console.warn("Phaser.Loader error loading file: "+this._fileList[t].key+" from URL "+this._fileList[t].url),this.nextFile(t,!1)},fileComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader fileComplete invalid index "+t);var e=this._fileList[t];e.loaded=!0;var i=!0,r=this;switch(e.type){case"image":this.game.cache.addImage(e.key,e.url,e.data);break;case"spritesheet":this.game.cache.addSpriteSheet(e.key,e.url,e.data,e.frameWidth,e.frameHeight,e.frameMax,e.margin,e.spacing);break;case"textureatlas":if(null==e.atlasURL)this.game.cache.addTextureAtlas(e.key,e.url,e.data,e.atlasData,e.format);else{if(i=!1,this._xhr.open("GET",this.baseURL+e.atlasURL,!0),this._xhr.responseType="text",e.format==n.Loader.TEXTURE_ATLAS_JSON_ARRAY||e.format==n.Loader.TEXTURE_ATLAS_JSON_HASH)this._xhr.onload=function(){return r.jsonLoadComplete(t)};else{if(e.format!=n.Loader.TEXTURE_ATLAS_XML_STARLING)throw new Error("Phaser.Loader. Invalid Texture Atlas format: "+e.format);this._xhr.onload=function(){return r.xmlLoadComplete(t)}}this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send()}break;case"bitmapfont":null==e.xmlURL?this.game.cache.addBitmapFont(e.key,e.url,e.data,e.xmlData,e.xSpacing,e.ySpacing):(i=!1,this._xhr.open("GET",this.baseURL+e.xmlURL,!0),this._xhr.responseType="text",this._xhr.onload=function(){return r.xmlLoadComplete(t)},this._xhr.onerror=function(){return r.dataLoadError(t)},this._xhr.send());break;case"audio":if(this.game.sound.usingWebAudio){if(e.data=this._xhr.response,this.game.cache.addSound(e.key,e.url,e.data,!0,!1),e.autoDecode){var o=this,a=e.key;this.game.cache.updateSound(a,"isDecoding",!0),this.game.sound.context.decodeAudioData(e.data,function(t){t&&(o.game.cache.decodedSound(a,t),o.game.sound.onSoundDecode.dispatch(a,o.game.cache.getSound(a)))})}}else e.data.removeEventListener("canplaythrough",n.GAMES[this.game.id].load.fileComplete),this.game.cache.addSound(e.key,e.url,e.data,!1,!0);break;case"text":e.data=this._xhr.responseText,this.game.cache.addText(e.key,e.url,e.data);break;case"physics":var s=JSON.parse(this._xhr.responseText);this.game.cache.addPhysicsData(e.key,e.url,s,e.format);break;case"script":e.data=document.createElement("script"),e.data.language="javascript",e.data.type="text/javascript",e.data.defer=!1,e.data.text=this._xhr.responseText,document.head.appendChild(e.data),e.callback&&(e.data=e.callback.call(e.callbackContext,e.key,this._xhr.responseText));break;case"binary":e.data=e.callback?e.callback.call(e.callbackContext,e.key,this._xhr.response):this._xhr.response,this.game.cache.addBinary(e.key,e.data)}i&&this.nextFile(t,!0)},jsonLoadComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader jsonLoadComplete invalid index "+t);var e=this._fileList[t],n=JSON.parse(this._xhr.responseText);e.loaded=!0,"tilemap"===e.type?this.game.cache.addTilemap(e.key,e.url,n,e.format):"json"===e.type?this.game.cache.addJSON(e.key,e.url,n):this.game.cache.addTextureAtlas(e.key,e.url,e.data,n,e.format),this.nextFile(t,!0)},csvLoadComplete:function(t){if(!this._fileList[t])return void console.warn("Phaser.Loader csvLoadComplete invalid index "+t);var e=this._fileList[t],n=this._xhr.responseText;e.loaded=!0,this.game.cache.addTilemap(e.key,e.url,n,e.format),this.nextFile(t,!0)},dataLoadError:function(t){var e=this._fileList[t];e.loaded=!0,e.error=!0,console.warn("Phaser.Loader dataLoadError: "+e.key),this.nextFile(t,!0)},xmlLoadComplete:function(t){var e,n=this._xhr.responseText;try{if(window.DOMParser){var i=new DOMParser;e=i.parseFromString(n,"text/xml")}else e=new ActiveXObject("Microsoft.XMLDOM"),e.async="false",e.loadXML(n)}catch(r){e=void 0}if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw new Error("Phaser.Loader. Invalid XML given");var o=this._fileList[t];o.loaded=!0,"bitmapfont"==o.type?this.game.cache.addBitmapFont(o.key,o.url,o.data,e,o.xSpacing,o.ySpacing):"textureatlas"==o.type&&this.game.cache.addTextureAtlas(o.key,o.url,o.data,e,o.format),this.nextFile(t,!0)},nextFile:function(t,e){this.progressFloat+=this._progressChunk,this.progress=Math.round(this.progressFloat),this.progress>100&&(this.progress=100),null!==this.preloadSprite&&(0===this.preloadSprite.direction?(this.preloadSprite.rect.width=Math.floor(this.preloadSprite.width/100*this.progress),this.preloadSprite.sprite.crop(this.preloadSprite.rect)):(this.preloadSprite.rect.height=Math.floor(this.preloadSprite.height/100*this.progress),this.preloadSprite.sprite.crop(this.preloadSprite.rect))),this.onFileComplete.dispatch(this.progress,this._fileList[t].key,e,this.totalLoadedFiles(),this._fileList.length),this.totalQueuedFiles()>0?(this._fileIndex++,this.loadFile()):(this.hasLoaded=!0,this.isLoading=!1,this.removeAll(),this.onLoadComplete.dispatch())},totalLoadedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded&&t++;return t},totalQueuedFiles:function(){for(var t=0,e=0;e<this._fileList.length;e++)this._fileList[e].loaded===!1&&t++;return t}},n.Loader.prototype.constructor=n.Loader,n.LoaderParser={bitmapFont:function(t,e,n,i,r){var o={},a=e.getElementsByTagName("info")[0],s=e.getElementsByTagName("common")[0];o.font=a.getAttribute("face"),o.size=parseInt(a.getAttribute("size"),10),o.lineHeight=parseInt(s.getAttribute("lineHeight"),10)+r,o.chars={};for(var l=e.getElementsByTagName("char"),u=PIXI.TextureCache[n],h=0;h<l.length;h++){var c=parseInt(l[h].getAttribute("id"),10),d=new PIXI.Rectangle(parseInt(l[h].getAttribute("x"),10),parseInt(l[h].getAttribute("y"),10),parseInt(l[h].getAttribute("width"),10),parseInt(l[h].getAttribute("height"),10));o.chars[c]={xOffset:parseInt(l[h].getAttribute("xoffset"),10),yOffset:parseInt(l[h].getAttribute("yoffset"),10),xAdvance:parseInt(l[h].getAttribute("xadvance"),10)+i,kerning:{},texture:PIXI.TextureCache[n]=new PIXI.Texture(u,d)}}var p=e.getElementsByTagName("kerning");for(h=0;h<p.length;h++){var f=parseInt(p[h].getAttribute("first"),10),m=parseInt(p[h].getAttribute("second"),10),g=parseInt(p[h].getAttribute("amount"),10);o.chars[m].kerning[f]=g}PIXI.BitmapText.fonts[n]=o}},n.Sound=function(t,e,i,r,o){"undefined"==typeof i&&(i=1),"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=t.sound.connectToMaster),this.game=t,this.name=e,this.key=e,this.loop=r,this.volume=i,this.markers={},this.context=null,this.autoplay=!1,this.totalDuration=0,this.startTime=0,this.currentTime=0,this.duration=0,this.durationMS=0,this.position=0,this.stopTime=0,this.paused=!1,this.pausedPosition=0,this.pausedTime=0,this.isPlaying=!1,this.currentMarker="",this.pendingPlayback=!1,this.override=!1,this.usingWebAudio=this.game.sound.usingWebAudio,this.usingAudioTag=this.game.sound.usingAudioTag,this.externalNode=null,this.masterGainNode=null,this.gainNode=null,this.usingWebAudio?(this.context=this.game.sound.context,this.masterGainNode=this.game.sound.masterGain,this.gainNode="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.gainNode.gain.value=i*this.game.sound.volume,o&&this.gainNode.connect(this.masterGainNode)):this.game.cache.getSound(e)&&this.game.cache.isSoundReady(e)?(this._sound=this.game.cache.getSoundData(e),this.totalDuration=0,this._sound.duration&&(this.totalDuration=this._sound.duration)):this.game.cache.onSoundUnlock.add(this.soundHasUnlocked,this),this.onDecoded=new n.Signal,this.onPlay=new n.Signal,this.onPause=new n.Signal,this.onResume=new n.Signal,this.onLoop=new n.Signal,this.onStop=new n.Signal,this.onMute=new n.Signal,this.onMarkerComplete=new n.Signal,this._volume=i,this._buffer=null,this._muted=!1,this._tempMarker=0,this._tempPosition=0,this._tempVolume=0,this._tempLoop=0,this._paused=!1},n.Sound.prototype={soundHasUnlocked:function(t){t==this.key&&(this._sound=this.game.cache.getSoundData(this.key),this.totalDuration=this._sound.duration)},addMarker:function(t,e,n,i,r){"undefined"==typeof i&&(i=1),"undefined"==typeof r&&(r=!1),this.markers[t]={name:t,start:e,stop:e+n,volume:i,duration:n,durationMS:1e3*n,loop:r}},removeMarker:function(t){delete this.markers[t]},update:function(){this.pendingPlayback&&this.game.cache.isSoundReady(this.key)&&(this.pendingPlayback=!1,this.play(this._tempMarker,this._tempPosition,this._tempVolume,this._tempLoop)),this.isPlaying&&(this.currentTime=this.game.time.now-this.startTime,this.currentTime>=this.durationMS&&(this.usingWebAudio?this.loop?(this.onLoop.dispatch(this),""===this.currentMarker?(this.currentTime=0,this.startTime=this.game.time.now):(this.onMarkerComplete.dispatch(this.currentMarker,this),this.play(this.currentMarker,0,this.volume,!0,!0))):this.stop():this.loop?(this.onLoop.dispatch(this),this.play(this.currentMarker,0,this.volume,!0,!0)):this.stop()))},play:function(t,e,n,i,r){if("undefined"==typeof t&&(t=""),"undefined"==typeof r&&(r=!0),this.isPlaying===!0&&r===!1&&this.override===!1)return this;if(this.isPlaying&&this.override&&(this.usingWebAudio?"undefined"==typeof this._sound.stop?this._sound.noteOff(0):this._sound.stop(0):this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0)),this.currentMarker=t,""!==t){if(!this.markers[t])return console.warn("Phaser.Sound.play: audio marker "+t+" doesn't exist"),this;this.position=this.markers[t].start,this.volume=this.markers[t].volume,this.loop=this.markers[t].loop,this.duration=this.markers[t].duration,this.durationMS=this.markers[t].durationMS,"undefined"!=typeof n&&(this.volume=n),"undefined"!=typeof i&&(this.loop=i),this._tempMarker=t,this._tempPosition=this.position,this._tempVolume=this.volume,this._tempLoop=this.loop}else e=e||0,"undefined"==typeof n&&(n=this._volume),"undefined"==typeof i&&(i=this.loop),this.position=e,this.volume=n,this.loop=i,this.duration=0,this.durationMS=0,this._tempMarker=t,this._tempPosition=e,this._tempVolume=n,this._tempLoop=i;return this.usingWebAudio?this.game.cache.isSoundDecoded(this.key)?(null==this._buffer&&(this._buffer=this.game.cache.getSoundData(this.key)),this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.externalNode?this.externalNode.input:this.gainNode),this.totalDuration=this._sound.buffer.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this.loop&&""===t&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,this.position,this.duration):this._sound.start(0,this.position,this.duration),this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):(this.pendingPlayback=!0,this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).isDecoding===!1&&this.game.sound.decode(this.key,this)):this.game.cache.getSound(this.key)&&this.game.cache.getSound(this.key).locked?(this.game.cache.reloadSound(this.key),this.pendingPlayback=!0):this._sound&&(this.game.device.cocoonJS||4===this._sound.readyState)?(this._sound.play(),this.totalDuration=this._sound.duration,0===this.duration&&(this.duration=this.totalDuration,this.durationMS=1e3*this.totalDuration),this._sound.currentTime=this.position,this._sound.muted=this._muted,this._sound.volume=this._muted?0:this._volume,this.isPlaying=!0,this.startTime=this.game.time.now,this.currentTime=0,this.stopTime=this.startTime+this.durationMS,this.onPlay.dispatch(this)):this.pendingPlayback=!0,this},restart:function(t,e,n,i){t=t||"",e=e||0,n=n||1,"undefined"==typeof i&&(i=!1),this.play(t,e,n,i,!0)},pause:function(){this.isPlaying&&this._sound&&(this.stop(),this.isPlaying=!1,this.paused=!0,this.pausedPosition=this.currentTime,this.pausedTime=this.game.time.now,this.onPause.dispatch(this))},resume:function(){if(this.paused&&this._sound){if(this.usingWebAudio){var t=this.position+this.pausedPosition/1e3;this._sound=this.context.createBufferSource(),this._sound.buffer=this._buffer,this._sound.connect(this.externalNode?this.externalNode.input:this.gainNode),this.loop&&(this._sound.loop=!0),"undefined"==typeof this._sound.start?this._sound.noteGrainOn(0,t,this.duration):this._sound.start(0,t,this.duration)}else this._sound.play();this.isPlaying=!0,this.paused=!1,this.startTime+=this.game.time.now-this.pausedTime,this.onResume.dispatch(this)}},stop:function(){if(this.isPlaying&&this._sound)if(this.usingWebAudio)if("undefined"==typeof this._sound.stop)this._sound.noteOff(0);else try{this._sound.stop(0)}catch(t){}else this.usingAudioTag&&(this._sound.pause(),this._sound.currentTime=0);this.isPlaying=!1;var e=this.currentMarker;""!==this.currentMarker&&this.onMarkerComplete.dispatch(this.currentMarker,this),this.currentMarker="",this.onStop.dispatch(this,e)},destroy:function(t){"undefined"==typeof t&&(t=!0),this.stop(),t&&this.game.sound.remove(this),this.markers={},this.context=null,this._buffer=null,this.externalNode=null,this.onDecoded.dispose(),this.onPlay.dispose(),this.onPause.dispose(),this.onResume.dispose(),this.onLoop.dispose(),this.onStop.dispose(),this.onMute.dispose(),this.onMarkerComplete.dispose()}},n.Sound.prototype.constructor=n.Sound,Object.defineProperty(n.Sound.prototype,"isDecoding",{get:function(){return this.game.cache.getSound(this.key).isDecoding}}),Object.defineProperty(n.Sound.prototype,"isDecoded",{get:function(){return this.game.cache.isSoundDecoded(this.key)}}),Object.defineProperty(n.Sound.prototype,"mute",{get:function(){return this._muted||this.game.sound.mute},set:function(t){t=t||null,t?(this._muted=!0,this.usingWebAudio?(this._muteVolume=this.gainNode.gain.value,this.gainNode.gain.value=0):this.usingAudioTag&&this._sound&&(this._muteVolume=this._sound.volume,this._sound.volume=0)):(this._muted=!1,this.usingWebAudio?this.gainNode.gain.value=this._muteVolume:this.usingAudioTag&&this._sound&&(this._sound.volume=this._muteVolume)),this.onMute.dispatch(this)}}),Object.defineProperty(n.Sound.prototype,"volume",{get:function(){return this._volume},set:function(t){this.usingWebAudio?(this._volume=t,this.gainNode.gain.value=t):this.usingAudioTag&&this._sound&&t>=0&&1>=t&&(this._volume=t,this._sound.volume=t)}}),n.SoundManager=function(t){this.game=t,this.onSoundDecode=new n.Signal,this._codeMuted=!1,this._muted=!1,this._unlockSource=null,this._volume=1,this._sounds=[],this.context=null,this.usingWebAudio=!0,this.usingAudioTag=!1,this.noAudio=!1,this.connectToMaster=!0,this.touchLocked=!1,this.channels=32},n.SoundManager.prototype={boot:function(){if(this.game.device.iOS&&this.game.device.webAudio===!1&&(this.channels=1),this.game.device.iOS||window.PhaserGlobal&&window.PhaserGlobal.fakeiOSTouchLock?(this.game.input.touch.callbackContext=this,this.game.input.touch.touchStartCallback=this.unlock,this.game.input.mouse.callbackContext=this,this.game.input.mouse.mouseDownCallback=this.unlock,this.touchLocked=!0):this.touchLocked=!1,window.PhaserGlobal){if(window.PhaserGlobal.disableAudio===!0)return this.usingWebAudio=!1,void(this.noAudio=!0);if(window.PhaserGlobal.disableWebAudio===!0)return this.usingWebAudio=!1,this.usingAudioTag=!0,void(this.noAudio=!1)}if(window.AudioContext)try{this.context=new window.AudioContext}catch(t){this.context=null,this.usingWebAudio=!1,this.noAudio=!0}else if(window.webkitAudioContext)try{this.context=new window.webkitAudioContext}catch(t){this.context=null,this.usingWebAudio=!1,this.noAudio=!0}window.Audio&&null===this.context&&(this.usingWebAudio=!1,this.usingAudioTag=!0,this.noAudio=!1),null!==this.context&&(this.masterGain="undefined"==typeof this.context.createGain?this.context.createGainNode():this.context.createGain(),this.masterGain.gain.value=1,this.masterGain.connect(this.context.destination))},unlock:function(){if(this.touchLocked!==!1)if(this.game.device.webAudio===!1||window.PhaserGlobal&&window.PhaserGlobal.disableWebAudio===!0)this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null,this.game.input.mouse.callbackContext=null,this.game.input.mouse.mouseDownCallback=null;else{var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),this._unlockSource.noteOn(0)}},stopAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].stop()},pauseAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].pause()},resumeAll:function(){for(var t=0;t<this._sounds.length;t++)this._sounds[t]&&this._sounds[t].resume()},decode:function(t,e){e=e||null;var n=this.game.cache.getSoundData(t);if(n&&this.game.cache.isSoundDecoded(t)===!1){this.game.cache.updateSound(t,"isDecoding",!0);var i=this;this.context.decodeAudioData(n,function(n){i.game.cache.decodedSound(t,n),e&&i.onSoundDecode.dispatch(t,e)})}},update:function(){this.touchLocked&&this.game.device.webAudio&&null!==this._unlockSource&&(this._unlockSource.playbackState===this._unlockSource.PLAYING_STATE||this._unlockSource.playbackState===this._unlockSource.FINISHED_STATE)&&(this.touchLocked=!1,this._unlockSource=null,this.game.input.touch.callbackContext=null,this.game.input.touch.touchStartCallback=null);for(var t=0;t<this._sounds.length;t++)this._sounds[t].update()},add:function(t,e,i,r){"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=this.connectToMaster);var o=new n.Sound(this.game,t,e,i,r);return this._sounds.push(o),o},remove:function(t){for(var e=this._sounds.length;e--;)if(this._sounds[e]===t)return this._sounds[e].destroy(!1),this._sounds.splice(e,1),!0;return!1},removeByKey:function(t){for(var e=this._sounds.length,n=0;e--;)this._sounds[e].key===t&&(this._sounds[e].destroy(!1),this._sounds.splice(e,1),n++);return n},play:function(t,e,n){var i=this.add(t,e,n);return i.play(),i},setMute:function(){if(!this._muted){this._muted=!0,this.usingWebAudio&&(this._muteVolume=this.masterGain.gain.value,this.masterGain.gain.value=0);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!0)}},unsetMute:function(){if(this._muted&&!this._codeMuted){this._muted=!1,this.usingWebAudio&&(this.masterGain.gain.value=this._muteVolume);for(var t=0;t<this._sounds.length;t++)this._sounds[t].usingAudioTag&&(this._sounds[t].mute=!1)}}},n.SoundManager.prototype.constructor=n.SoundManager,Object.defineProperty(n.SoundManager.prototype,"mute",{get:function(){return this._muted},set:function(t){if(t=t||null){if(this._muted)return;this._codeMuted=!0,this.setMute()}else{if(!this._muted)return;this._codeMuted=!1,this.unsetMute()}}}),Object.defineProperty(n.SoundManager.prototype,"volume",{get:function(){return this.usingWebAudio?this.masterGain.gain.value:this._volume},set:function(t){if(this._volume=t,this.usingWebAudio)this.masterGain.gain.value=t;else for(var e=0;e<this._sounds.length;e++)this._sounds[e].usingAudioTag&&(this._sounds[e].volume=this._sounds[e].volume*t)}}),n.Utils.Debug=function(t){this.game=t,this.sprite=null,this.canvas=null,this.baseTexture=null,this.texture=null,this.textureFrame=null,this.context=null,this.font="14px Courier",this.columnWidth=100,this.lineHeight=16,this.renderShadow=!0,this.currentX=0,this.currentY=0,this.currentAlpha=1,this.dirty=!1},n.Utils.Debug.prototype={boot:function(){this.game.renderType===n.CANVAS?this.context=this.game.context:(this.canvas=n.Canvas.create(this.game.width,this.game.height,"",!0),this.context=this.canvas.getContext("2d"),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new n.Frame(0,0,0,this.game.width,this.game.height,"debug",this.game.rnd.uuid()),this.sprite=this.game.make.image(0,0,this.texture,this.textureFrame),this.game.stage.addChild(this.sprite))},preUpdate:function(){this.dirty&&this.sprite&&(this.context.clearRect(0,0,this.game.width,this.game.height),this.dirty=!1)},start:function(t,e,n,i){"number"!=typeof t&&(t=0),"number"!=typeof e&&(e=0),n=n||"rgb(255,255,255)","undefined"==typeof i&&(i=0),this.currentX=t,this.currentY=e,this.currentColor=n,this.currentAlpha=this.context.globalAlpha,this.columnWidth=i,this.sprite&&(this.dirty=!0),this.context.save(),this.context.setTransform(1,0,0,1,0,0),this.context.strokeStyle=n,this.context.fillStyle=n,this.context.font=this.font,this.context.globalAlpha=1},stop:function(){this.context.restore(),this.context.globalAlpha=this.currentAlpha,this.sprite&&PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl)},line:function(){for(var t=this.currentX,e=0;e<arguments.length;e++)this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(arguments[e],t+1,this.currentY+1),this.context.fillStyle=this.currentColor),this.context.fillText(arguments[e],t,this.currentY),t+=this.columnWidth;this.currentY+=this.lineHeight},soundInfo:function(t,e,n,i){this.start(e,n,i),this.line("Sound: "+t.key+" Locked: "+t.game.sound.touchLocked),this.line("Is Ready?: "+this.game.cache.isSoundReady(t.key)+" Pending Playback: "+t.pendingPlayback),this.line("Decoded: "+t.isDecoded+" Decoding: "+t.isDecoding),this.line("Total Duration: "+t.totalDuration+" Playing: "+t.isPlaying),this.line("Time: "+t.currentTime),this.line("Volume: "+t.volume+" Muted: "+t.mute),this.line("WebAudio: "+t.usingWebAudio+" Audio: "+t.usingAudioTag),""!==t.currentMarker&&(this.line("Marker: "+t.currentMarker+" Duration: "+t.duration+" (ms: "+t.durationMS+")"),this.line("Start: "+t.markers[t.currentMarker].start+" Stop: "+t.markers[t.currentMarker].stop),this.line("Position: "+t.position)),this.stop()},cameraInfo:function(t,e,n,i){this.start(e,n,i),this.line("Camera ("+t.width+" x "+t.height+")"),this.line("X: "+t.x+" Y: "+t.y),this.line("Bounds x: "+t.bounds.x+" Y: "+t.bounds.y+" w: "+t.bounds.width+" h: "+t.bounds.height),this.line("View x: "+t.view.x+" Y: "+t.view.y+" w: "+t.view.width+" h: "+t.view.height),this.stop()},timer:function(t,e,n,i){this.start(e,n,i),this.line("Timer (running: "+t.running+" expired: "+t.expired+")"),this.line("Next Tick: "+t.next+" Duration: "+t.duration),this.line("Paused: "+t.paused+" Length: "+t.length),this.stop()},pointer:function(t,e,n,i,r){null!=t&&("undefined"==typeof e&&(e=!1),n=n||"rgba(0,255,0,0.5)",i=i||"rgba(255,0,0,0.5)",(e!==!0||t.isUp!==!0)&&(this.start(t.x,t.y-100,r),this.context.beginPath(),this.context.arc(t.x,t.y,t.circle.radius,0,2*Math.PI),this.context.fillStyle=t.active?n:i,this.context.fill(),this.context.closePath(),this.context.beginPath(),this.context.moveTo(t.positionDown.x,t.positionDown.y),this.context.lineTo(t.position.x,t.position.y),this.context.lineWidth=2,this.context.stroke(),this.context.closePath(),this.line("ID: "+t.id+" Active: "+t.active),this.line("World X: "+t.worldX+" World Y: "+t.worldY),this.line("Screen X: "+t.x+" Screen Y: "+t.y),this.line("Duration: "+t.duration+" ms"),this.line("is Down: "+t.isDown+" is Up: "+t.isUp),this.stop()))},spriteInputInfo:function(t,e,n,i){this.start(e,n,i),this.line("Sprite Input: ("+t.width+" x "+t.height+")"),this.line("x: "+t.input.pointerX().toFixed(1)+" y: "+t.input.pointerY().toFixed(1)),this.line("over: "+t.input.pointerOver()+" duration: "+t.input.overDuration().toFixed(0)),this.line("down: "+t.input.pointerDown()+" duration: "+t.input.downDuration().toFixed(0)),this.line("just over: "+t.input.justOver()+" just out: "+t.input.justOut()),this.stop()},key:function(t,e,n,i){this.start(e,n,i,150),this.line("Key:",t.keyCode,"isDown:",t.isDown),this.line("justPressed:",t.justPressed(),"justReleased:",t.justReleased()),this.line("Time Down:",t.timeDown.toFixed(0),"duration:",t.duration.toFixed(0)),this.stop()
},inputInfo:function(t,e,n){this.start(t,e,n),this.line("Input"),this.line("X: "+this.game.input.x+" Y: "+this.game.input.y),this.line("World X: "+this.game.input.worldX+" World Y: "+this.game.input.worldY),this.line("Scale X: "+this.game.input.scale.x.toFixed(1)+" Scale Y: "+this.game.input.scale.x.toFixed(1)),this.line("Screen X: "+this.game.input.activePointer.screenX+" Screen Y: "+this.game.input.activePointer.screenY),this.stop()},spriteBounds:function(t,e,n){var i=t.getBounds();i.x+=this.game.camera.x,i.y+=this.game.camera.y,this.rectangle(i,e,n)},spriteInfo:function(t,e,n,i){this.start(e,n,i),this.line("Sprite:  ("+t.width+" x "+t.height+") anchor: "+t.anchor.x+" x "+t.anchor.y),this.line("x: "+t.x.toFixed(1)+" y: "+t.y.toFixed(1)),this.line("angle: "+t.angle.toFixed(1)+" rotation: "+t.rotation.toFixed(1)),this.line("visible: "+t.visible+" in camera: "+t.inCamera),this.stop()},spriteCoords:function(t,e,n,i){this.start(e,n,i,100),t.name&&this.line(t.name),this.line("x:",t.x.toFixed(2),"y:",t.y.toFixed(2)),this.line("pos x:",t.position.x.toFixed(2),"pos y:",t.position.y.toFixed(2)),this.line("world x:",t.world.x.toFixed(2),"world y:",t.world.y.toFixed(2)),this.stop()},lineInfo:function(t,e,n,i){this.start(e,n,i,80),this.line("start.x:",t.start.x.toFixed(2),"start.y:",t.start.y.toFixed(2)),this.line("end.x:",t.end.x.toFixed(2),"end.y:",t.end.y.toFixed(2)),this.line("length:",t.length.toFixed(2),"angle:",t.angle),this.stop()},pixel:function(t,e,n,i){i=i||2,this.start(),this.context.fillStyle=n,this.context.fillRect(t,e,i,i),this.stop()},geom:function(t,e,i,r){"undefined"==typeof i&&(i=!0),"undefined"==typeof r&&(r=0),e=e||"rgba(0,255,0,0.4)",this.start(),this.context.fillStyle=e,this.context.strokeStyle=e,t instanceof n.Rectangle||1===r?i?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height):t instanceof n.Circle||2===r?(this.context.beginPath(),this.context.arc(t.x-this.game.camera.x,t.y-this.game.camera.y,t.radius,0,2*Math.PI,!1),this.context.closePath(),i?this.context.fill():this.context.stroke()):t instanceof n.Point||3===r?this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,4,4):(t instanceof n.Line||4===r)&&(this.context.lineWidth=1,this.context.beginPath(),this.context.moveTo(t.start.x+.5-this.game.camera.x,t.start.y+.5-this.game.camera.y),this.context.lineTo(t.end.x+.5-this.game.camera.x,t.end.y+.5-this.game.camera.y),this.context.closePath(),this.context.stroke()),this.stop()},rectangle:function(t,e,n){"undefined"==typeof n&&(n=!0),e=e||"rgba(0, 255, 0, 0.4)",this.start(),n?(this.context.fillStyle=e,this.context.fillRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)):(this.context.strokeStyle=e,this.context.strokeRect(t.x-this.game.camera.x,t.y-this.game.camera.y,t.width,t.height)),this.stop()},text:function(t,e,n,i,r){i=i||"rgb(255,255,255)",r=r||"16px Courier",this.start(),this.context.font=r,this.renderShadow&&(this.context.fillStyle="rgb(0,0,0)",this.context.fillText(t,e+1,n+1)),this.context.fillStyle=i,this.context.fillText(t,e,n),this.stop()},quadTree:function(t,e){e=e||"rgba(255,0,0,0.3)",this.start();var n=t.bounds;if(0===t.nodes.length){this.context.strokeStyle=e,this.context.strokeRect(n.x,n.y,n.width,n.height),this.text("size: "+t.objects.length,n.x+4,n.y+16,"rgb(0,200,0)","12px Courier"),this.context.strokeStyle="rgb(0,255,0)";for(var i=0;i<t.objects.length;i++)this.context.strokeRect(t.objects[i].x,t.objects[i].y,t.objects[i].width,t.objects[i].height)}else for(var i=0;i<t.nodes.length;i++)this.quadTree(t.nodes[i]);this.stop()},body:function(t,e,i){t.body&&t.body.type===n.Physics.ARCADE&&(this.start(),n.Physics.Arcade.Body.render(this.context,t.body,e,i),this.stop())},bodyInfo:function(t,e,i,r){t.body&&t.body.type===n.Physics.ARCADE&&(this.start(e,i,r,210),n.Physics.Arcade.Body.renderBodyInfo(this,t.body),this.stop())}},n.Utils.Debug.prototype.constructor=n.Utils.Debug,n.Color={packPixel:function(t,e,i,r){return n.Device.LITTLE_ENDIAN?r<<24|i<<16|e<<8|t:t<<24|e<<16|i<<8|r},unpackPixel:function(t,e,i,r){return("undefined"==typeof e||null===e)&&(e=n.Color.createColor()),("undefined"==typeof i||null===i)&&(i=!1),("undefined"==typeof r||null===r)&&(r=!1),n.Device.LITTLE_ENDIAN?(e.a=(4278190080&t)>>>24,e.b=(16711680&t)>>>16,e.g=(65280&t)>>>8,e.r=255&t):(e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t),e.color=t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a/255+")",i&&n.Color.RGBtoHSL(e.r,e.g,e.b,e),r&&n.Color.RGBtoHSV(e.r,e.g,e.b,e),e},fromRGBA:function(t,e){return e||(e=n.Color.createColor()),e.r=(4278190080&t)>>>24,e.g=(16711680&t)>>>16,e.b=(65280&t)>>>8,e.a=255&t,e.rgba="rgba("+e.r+","+e.g+","+e.b+","+e.a+")",e},toRGBA:function(t,e,n,i){return t<<24|e<<16|n<<8|i},RGBtoHSL:function(t,e,i,r){r||(r=n.Color.createColor(t,e,i,1)),t/=255,e/=255,i/=255;var o=Math.min(t,e,i),a=Math.max(t,e,i);if(r.h=0,r.s=0,r.l=(a+o)/2,a!==o){var s=a-o;r.s=r.l>.5?s/(2-a-o):s/(a+o),a===t?r.h=(e-i)/s+(i>e?6:0):a===e?r.h=(i-t)/s+2:a===i&&(r.h=(t-e)/s+4),r.h/=6}return r},HSLtoRGB:function(t,e,i,r){if(r?(r.r=i,r.g=i,r.b=i):r=n.Color.createColor(i,i,i),0!==e){var o=.5>i?i*(1+e):i+e-i*e,a=2*i-o;r.r=n.Color.hueToColor(a,o,t+1/3),r.g=n.Color.hueToColor(a,o,t),r.b=n.Color.hueToColor(a,o,t-1/3)}return r.r=Math.floor(255*r.r|0),r.g=Math.floor(255*r.g|0),r.b=Math.floor(255*r.b|0),n.Color.updateColor(r),r},RGBtoHSV:function(t,e,i,r){r||(r=n.Color.createColor(t,e,i,255)),t/=255,e/=255,i/=255;var o=Math.min(t,e,i),a=Math.max(t,e,i),s=a-o;return r.h=0,r.s=0===a?0:s/a,r.v=a,a!==o&&(a===t?r.h=(e-i)/s+(i>e?6:0):a===e?r.h=(i-t)/s+2:a===i&&(r.h=(t-e)/s+4),r.h/=6),r},HSVtoRGB:function(t,e,i,r){"undefined"==typeof r&&(r=n.Color.createColor(0,0,0,1,t,e,0,i));var o,a,s,l=Math.floor(6*t),u=6*t-l,h=i*(1-e),c=i*(1-u*e),d=i*(1-(1-u)*e);switch(l%6){case 0:o=i,a=d,s=h;break;case 1:o=c,a=i,s=h;break;case 2:o=h,a=i,s=d;break;case 3:o=h,a=c,s=i;break;case 4:o=d,a=h,s=i;break;case 5:o=i,a=h,s=c}return r.r=Math.floor(255*o),r.g=Math.floor(255*a),r.b=Math.floor(255*s),n.Color.updateColor(r),r},hueToColor:function(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t},createColor:function(t,e,n,i,r,o,a,s){var l={r:t||0,g:e||0,b:n||0,a:i||1,h:r||0,s:o||0,l:a||0,v:s||0,color:0};return l.rgba="rgba("+l.r+","+l.g+","+l.b+","+l.a+")",l},updateColor:function(t){return t.rgba="rgba("+t.r+","+t.g+","+t.b+","+t.a+")",t},getColor32:function(t,e,n,i){return t<<24|e<<16|n<<8|i},getColor:function(t,e,n){return t<<16|e<<8|n},RGBtoString:function(t,e,i,r,o){return"undefined"==typeof r&&(r=255),"undefined"==typeof o&&(o="#"),"#"===o?"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1):"0x"+n.Color.componentToHex(r)+n.Color.componentToHex(t)+n.Color.componentToHex(e)+n.Color.componentToHex(i)},hexToRGB:function(t){var e=n.Color.hexToColor(t);return e?n.Color.getColor32(e.a,e.r,e.g,e.b):void 0},hexToColor:function(t,e){e||(e=n.Color.createColor());var i=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;t=t.replace(i,function(t,e,n,i){return e+e+n+n+i+i});var r=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return r&&(e.r=parseInt(r[1],16),e.g=parseInt(r[2],16),e.b=parseInt(r[3],16)),e},componentToHex:function(t){var e=t.toString(16);return 1==e.length?"0"+e:e},HSVColorWheel:function(t,e){"undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1);for(var i=[],r=0;359>=r;r++)i.push(n.Color.HSVtoRGB(r/359,t,e));return i},HSLColorWheel:function(t,e){"undefined"==typeof t&&(t=.5),"undefined"==typeof e&&(e=.5);for(var i=[],r=0;359>=r;r++)i.push(n.Color.HSLtoRGB(r/359,t,e));return i},interpolateColor:function(t,e,i,r,o){"undefined"==typeof o&&(o=255);var a=n.Color.getRGB(t),s=n.Color.getRGB(e),l=(s.red-a.red)*r/i+a.red,u=(s.green-a.green)*r/i+a.green,h=(s.blue-a.blue)*r/i+a.blue;return n.Color.getColor32(o,l,u,h)},interpolateColorWithRGB:function(t,e,i,r,o,a){var s=n.Color.getRGB(t),l=(e-s.red)*a/o+s.red,u=(i-s.green)*a/o+s.green,h=(r-s.blue)*a/o+s.blue;return n.Color.getColor(l,u,h)},interpolateRGB:function(t,e,i,r,o,a,s,l){var u=(r-t)*l/s+t,h=(o-e)*l/s+e,c=(a-i)*l/s+i;return n.Color.getColor(u,h,c)},getRandomColor:function(t,e,i){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=255),"undefined"==typeof i&&(i=255),e>255||t>e)return n.Color.getColor(255,255,255);var r=t+Math.round(Math.random()*(e-t)),o=t+Math.round(Math.random()*(e-t)),a=t+Math.round(Math.random()*(e-t));return n.Color.getColor32(i,r,o,a)},getRGB:function(t){return t>16777215?{alpha:t>>>24,red:t>>16&255,green:t>>8&255,blue:255&t,a:t>>>24,r:t>>16&255,g:t>>8&255,b:255&t}:{alpha:255,red:t>>16&255,green:t>>8&255,blue:255&t,a:255,r:t>>16&255,g:t>>8&255,b:255&t}},getWebRGB:function(t){var e=n.Color.getRGB(t);return"rgba("+e.r.toString()+","+e.g.toString()+","+e.b.toString()+","+e.a.toString()+")"},getAlpha:function(t){return t>>>24},getAlphaFloat:function(t){return(t>>>24)/255},getRed:function(t){return t>>16&255},getGreen:function(t){return t>>8&255},getBlue:function(t){return 255&t},getColorInfo:function(t){var e=n.Color.getRGB(t),i=n.Color.RGBtoHexstring(t)+"\n";return i=i.concat("Alpha: "+e.alpha+" Red: "+e.red+" Green: "+e.green+" Blue: "+e.blue)+"\n"},RGBtoHexstring:function(t){var e=n.Color.getRGB(t);return"0x"+n.Color.colorToHexstring(e.alpha)+n.Color.colorToHexstring(e.red)+n.Color.colorToHexstring(e.green)+n.Color.colorToHexstring(e.blue)},RGBtoWebstring:function(t){var e=n.Color.getRGB(t);return"#"+n.Color.colorToHexstring(e.red)+n.Color.colorToHexstring(e.green)+n.Color.colorToHexstring(e.blue)},colorToHexstring:function(t){var e="0123456789ABCDEF",n=t%16,i=(t-n)/16,r=e.charAt(i)+e.charAt(n);return r}},n.Physics=function(t,e){e=e||{},this.game=t,this.config=e,this.arcade=null,this.p2=null,this.ninja=null,this.box2d=null,this.chipmunk=null,this.parseConfig()},n.Physics.ARCADE=0,n.Physics.P2JS=1,n.Physics.NINJA=2,n.Physics.BOX2D=3,n.Physics.CHIPMUNK=5,n.Physics.prototype={parseConfig:function(){this.config.hasOwnProperty("arcade")&&this.config.arcade!==!0||!n.Physics.hasOwnProperty("Arcade")||(this.arcade=new n.Physics.Arcade(this.game),this.game.time.deltaCap=.2),this.config.hasOwnProperty("ninja")&&this.config.ninja===!0&&n.Physics.hasOwnProperty("Ninja")&&(this.ninja=new n.Physics.Ninja(this.game)),this.config.hasOwnProperty("p2")&&this.config.p2===!0&&n.Physics.hasOwnProperty("P2")&&(this.p2=new n.Physics.P2(this.game,this.config))},startSystem:function(t){if(t===n.Physics.ARCADE?this.arcade=new n.Physics.Arcade(this.game):t===n.Physics.P2JS&&(this.p2=new n.Physics.P2(this.game,this.config)),t===n.Physics.NINJA)this.ninja=new n.Physics.Ninja(this.game);else{if(t===n.Physics.BOX2D&&null===this.box2d)throw new Error("The Box2D physics system has not been implemented yet.");if(t===n.Physics.CHIPMUNK&&null===this.chipmunk)throw new Error("The Chipmunk physics system has not been implemented yet.")}},enable:function(t,e,i){"undefined"==typeof e&&(e=n.Physics.ARCADE),"undefined"==typeof i&&(i=!1),e===n.Physics.ARCADE?this.arcade.enable(t):e===n.Physics.P2JS&&this.p2?this.p2.enable(t,i):e===n.Physics.NINJA&&this.ninja&&this.ninja.enableAABB(t)},preUpdate:function(){this.p2&&this.p2.preUpdate()},update:function(){this.p2&&this.p2.update()},setBoundsToWorld:function(){this.arcade&&this.arcade.setBoundsToWorld(),this.ninja&&this.ninja.setBoundsToWorld(),this.p2&&this.p2.setBoundsToWorld()},clear:function(){this.p2&&this.p2.clear()},destroy:function(){this.p2&&this.p2.destroy(),this.arcade=null,this.ninja=null,this.p2=null}},n.Physics.prototype.constructor=n.Physics,n.Physics.Arcade=function(t){this.game=t,this.gravity=new n.Point,this.bounds=new n.Rectangle(0,0,t.world.width,t.world.height),this.checkCollision={up:!0,down:!0,left:!0,right:!0},this.maxObjects=10,this.maxLevels=4,this.OVERLAP_BIAS=4,this.TILE_BIAS=16,this.forceX=!1,this.quadTree=new n.QuadTree(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this._overlap=0,this._maxOverlap=0,this._velocity1=0,this._velocity2=0,this._newVelocity1=0,this._newVelocity2=0,this._average=0,this._mapData=[],this._result=!1,this._total=0,this._angle=0,this._dx=0,this._dy=0},n.Physics.Arcade.prototype.constructor=n.Physics.Arcade,n.Physics.Arcade.prototype={setBounds:function(t,e,n,i){this.bounds.setTo(t,e,n,i)},setBoundsToWorld:function(){this.bounds.setTo(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height)},enable:function(t,e){"undefined"==typeof e&&(e=!0);var i=1;if(Array.isArray(t))for(i=t.length;i--;)t[i]instanceof n.Group?this.enable(t[i].children,e):(this.enableBody(t[i]),e&&t[i].hasOwnProperty("children")&&t[i].children.length>0&&this.enable(t[i],!0));else t instanceof n.Group?this.enable(t.children,e):(this.enableBody(t),e&&t.hasOwnProperty("children")&&t.children.length>0&&this.enable(t.children,!0))},enableBody:function(t){t.hasOwnProperty("body")&&null===t.body&&(t.body=new n.Physics.Arcade.Body(t))},updateMotion:function(t){this._velocityDelta=this.computeVelocity(0,t,t.angularVelocity,t.angularAcceleration,t.angularDrag,t.maxAngular)-t.angularVelocity,t.angularVelocity+=this._velocityDelta,t.rotation+=t.angularVelocity*this.game.time.physicsElapsed,t.velocity.x=this.computeVelocity(1,t,t.velocity.x,t.acceleration.x,t.drag.x,t.maxVelocity.x),t.velocity.y=this.computeVelocity(2,t,t.velocity.y,t.acceleration.y,t.drag.y,t.maxVelocity.y)},computeVelocity:function(t,e,n,i,r,o){return o=o||1e4,1==t&&e.allowGravity?n+=(this.gravity.x+e.gravity.x)*this.game.time.physicsElapsed:2==t&&e.allowGravity&&(n+=(this.gravity.y+e.gravity.y)*this.game.time.physicsElapsed),i?n+=i*this.game.time.physicsElapsed:r&&(this._drag=r*this.game.time.physicsElapsed,n-this._drag>0?n-=this._drag:n+this._drag<0?n+=this._drag:n=0),n>o?n=o:-o>n&&(n=-o),n},overlap:function(t,e,n,i,r){if(n=n||null,i=i||null,r=r||n,this._result=!1,this._total=0,Array.isArray(e))for(var o=0,a=e.length;a>o;o++)this.collideHandler(t,e[o],n,i,r,!0);else this.collideHandler(t,e,n,i,r,!0);return this._total>0},collide:function(t,e,n,i,r){if(n=n||null,i=i||null,r=r||n,this._result=!1,this._total=0,Array.isArray(e))for(var o=0,a=e.length;a>o;o++)this.collideHandler(t,e[o],n,i,r,!1);else this.collideHandler(t,e,n,i,r,!1);return this._total>0},collideHandler:function(t,e,i,r,o,a){return"undefined"!=typeof e||t.type!==n.GROUP&&t.type!==n.EMITTER?void(t&&e&&t.exists&&e.exists&&(t.type==n.SPRITE||t.type==n.TILESPRITE?e.type==n.SPRITE||e.type==n.TILESPRITE?this.collideSpriteVsSprite(t,e,i,r,o,a):e.type==n.GROUP||e.type==n.EMITTER?this.collideSpriteVsGroup(t,e,i,r,o,a):e.type==n.TILEMAPLAYER&&this.collideSpriteVsTilemapLayer(t,e,i,r,o):t.type==n.GROUP?e.type==n.SPRITE||e.type==n.TILESPRITE?this.collideSpriteVsGroup(e,t,i,r,o,a):e.type==n.GROUP||e.type==n.EMITTER?this.collideGroupVsGroup(t,e,i,r,o,a):e.type==n.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,i,r,o):t.type==n.TILEMAPLAYER?e.type==n.SPRITE||e.type==n.TILESPRITE?this.collideSpriteVsTilemapLayer(e,t,i,r,o):(e.type==n.GROUP||e.type==n.EMITTER)&&this.collideGroupVsTilemapLayer(e,t,i,r,o):t.type==n.EMITTER&&(e.type==n.SPRITE||e.type==n.TILESPRITE?this.collideSpriteVsGroup(e,t,i,r,o,a):e.type==n.GROUP||e.type==n.EMITTER?this.collideGroupVsGroup(t,e,i,r,o,a):e.type==n.TILEMAPLAYER&&this.collideGroupVsTilemapLayer(t,e,i,r,o)))):void this.collideGroupVsSelf(t,i,r,o,a)},collideSpriteVsSprite:function(t,e,n,i,r,o){return t.body&&e.body?(this.separate(t.body,e.body,i,r,o)&&(n&&n.call(r,t,e),this._total++),!0):!1},collideSpriteVsGroup:function(t,e,n,i,r,o){if(0!==e.length&&t.body){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(e),this._potentials=this.quadTree.retrieve(t);for(var a=0,s=this._potentials.length;s>a;a++)this.separate(t.body,this._potentials[a],i,r,o)&&(n&&n.call(r,t,this._potentials[a].sprite),this._total++)}},collideGroupVsSelf:function(t,e,n,i,r){if(0!==t.length)for(var o=t.children.length,a=0;o>a;a++)for(var s=a+1;o>=s;s++)t.children[a]&&t.children[s]&&t.children[a].exists&&t.children[s].exists&&this.collideSpriteVsSprite(t.children[a],t.children[s],e,n,i,r)},collideGroupVsGroup:function(t,e,n,i,r,o){if(0!==t.length&&0!==e.length)for(var a=0,s=t.children.length;s>a;a++)t.children[a].exists&&this.collideSpriteVsGroup(t.children[a],e,n,i,r,o)},collideSpriteVsTilemapLayer:function(t,e,n,i,r){if(t.body&&(this._mapData=e.getTiles(t.body.position.x-t.body.tilePadding.x,t.body.position.y-t.body.tilePadding.y,t.body.width+t.body.tilePadding.x,t.body.height+t.body.tilePadding.y,!1,!1),0!==this._mapData.length))for(var o=0;o<this._mapData.length;o++)this.separateTile(o,t.body,this._mapData[o])&&(i?i.call(r,t,this._mapData[o])&&(this._total++,n&&n.call(r,t,this._mapData[o])):(this._total++,n&&n.call(r,t,this._mapData[o])))},collideGroupVsTilemapLayer:function(t,e,n,i,r){if(0!==t.length)for(var o=0,a=t.children.length;a>o;o++)t.children[o].exists&&this.collideSpriteVsTilemapLayer(t.children[o],e,n,i,r)},separate:function(t,e,n,i,r){return this.intersects(t,e)?n&&n.call(i,t.sprite,e.sprite)===!1?!1:r?!0:(this._result=this.forceX||Math.abs(this.gravity.y+t.gravity.y)<Math.abs(this.gravity.x+t.gravity.x)?this.separateX(t,e,r)||this.separateY(t,e,r):this.separateY(t,e,r)||this.separateX(t,e,r),this._result):!1},intersects:function(t,e){return t.right<=e.position.x?!1:t.bottom<=e.position.y?!1:t.position.x>=e.right?!1:t.position.y>=e.bottom?!1:!0},separateX:function(t,e,n){return t.immovable&&e.immovable?!1:(this._overlap=0,this.intersects(t,e)&&(this._maxOverlap=t.deltaAbsX()+e.deltaAbsX()+this.OVERLAP_BIAS,0===t.deltaX()&&0===e.deltaX()?(t.embedded=!0,e.embedded=!0):t.deltaX()>e.deltaX()?(this._overlap=t.right-e.x,this._overlap>this._maxOverlap||t.checkCollision.right===!1||e.checkCollision.left===!1?this._overlap=0:(t.touching.none=!1,t.touching.right=!0,e.touching.none=!1,e.touching.left=!0)):t.deltaX()<e.deltaX()&&(this._overlap=t.x-e.width-e.x,-this._overlap>this._maxOverlap||t.checkCollision.left===!1||e.checkCollision.right===!1?this._overlap=0:(t.touching.none=!1,t.touching.left=!0,e.touching.none=!1,e.touching.right=!0)),0!==this._overlap)?(t.overlapX=this._overlap,e.overlapX=this._overlap,n||t.customSeparateX||e.customSeparateX?!0:(this._velocity1=t.velocity.x,this._velocity2=e.velocity.x,t.immovable||e.immovable?t.immovable?e.immovable||(e.x+=this._overlap,e.velocity.x=this._velocity1-this._velocity2*e.bounce.x):(t.x=t.x-this._overlap,t.velocity.x=this._velocity2-this._velocity1*t.bounce.x):(this._overlap*=.5,t.x=t.x-this._overlap,e.x+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.x=this._average+this._newVelocity1*t.bounce.x,e.velocity.x=this._average+this._newVelocity2*e.bounce.x),!0)):!1)},separateY:function(t,e,n){return t.immovable&&e.immovable?!1:(this._overlap=0,this.intersects(t,e)&&(this._maxOverlap=t.deltaAbsY()+e.deltaAbsY()+this.OVERLAP_BIAS,0===t.deltaY()&&0===e.deltaY()?(t.embedded=!0,e.embedded=!0):t.deltaY()>e.deltaY()?(this._overlap=t.bottom-e.y,this._overlap>this._maxOverlap||t.checkCollision.down===!1||e.checkCollision.up===!1?this._overlap=0:(t.touching.none=!1,t.touching.down=!0,e.touching.none=!1,e.touching.up=!0)):t.deltaY()<e.deltaY()&&(this._overlap=t.y-e.bottom,-this._overlap>this._maxOverlap||t.checkCollision.up===!1||e.checkCollision.down===!1?this._overlap=0:(t.touching.none=!1,t.touching.up=!0,e.touching.none=!1,e.touching.down=!0)),0!==this._overlap)?(t.overlapY=this._overlap,e.overlapY=this._overlap,n||t.customSeparateY||e.customSeparateY?!0:(this._velocity1=t.velocity.y,this._velocity2=e.velocity.y,t.immovable||e.immovable?t.immovable?e.immovable||(e.y+=this._overlap,e.velocity.y=this._velocity1-this._velocity2*e.bounce.y,t.moves&&(e.x+=t.x-t.prev.x)):(t.y=t.y-this._overlap,t.velocity.y=this._velocity2-this._velocity1*t.bounce.y,e.moves&&(t.x+=e.x-e.prev.x)):(this._overlap*=.5,t.y=t.y-this._overlap,e.y+=this._overlap,this._newVelocity1=Math.sqrt(this._velocity2*this._velocity2*e.mass/t.mass)*(this._velocity2>0?1:-1),this._newVelocity2=Math.sqrt(this._velocity1*this._velocity1*t.mass/e.mass)*(this._velocity1>0?1:-1),this._average=.5*(this._newVelocity1+this._newVelocity2),this._newVelocity1-=this._average,this._newVelocity2-=this._average,t.velocity.y=this._average+this._newVelocity1*t.bounce.y,e.velocity.y=this._average+this._newVelocity2*e.bounce.y),!0)):!1)},separateTile:function(t,e,n){if(!n.intersects(e.position.x,e.position.y,e.right,e.bottom))return!1;if(n.collisionCallback&&!n.collisionCallback.call(n.collisionCallbackContext,e.sprite,n))return!1;if(n.layer.callbacks[n.index]&&!n.layer.callbacks[n.index].callback.call(n.layer.callbacks[n.index].callbackContext,e.sprite,n))return!1;if(!(n.faceLeft||n.faceRight||n.faceTop||n.faceBottom))return!1;var i=0,r=0,o=0,a=1;if(e.deltaAbsX()>e.deltaAbsY()?o=-1:e.deltaAbsX()<e.deltaAbsY()&&(a=-1),0!==e.deltaX()&&0!==e.deltaY()&&(n.faceLeft||n.faceRight)&&(n.faceTop||n.faceBottom)&&(o=Math.min(Math.abs(e.position.x-n.right),Math.abs(e.right-n.left)),a=Math.min(Math.abs(e.position.y-n.bottom),Math.abs(e.bottom-n.top))),a>o){if((n.faceLeft||n.faceRight)&&(i=this.tileCheckX(e,n),0!==i&&!n.intersects(e.position.x,e.position.y,e.right,e.bottom)))return!0;(n.faceTop||n.faceBottom)&&(r=this.tileCheckY(e,n))}else{if((n.faceTop||n.faceBottom)&&(r=this.tileCheckY(e,n),0!==r&&!n.intersects(e.position.x,e.position.y,e.right,e.bottom)))return!0;(n.faceLeft||n.faceRight)&&(i=this.tileCheckX(e,n))}return 0!==i||0!==r},tileCheckX:function(t,e){var n=0;return t.deltaX()<0&&!t.blocked.left&&e.collideRight&&t.checkCollision.left?e.faceRight&&t.x<e.right&&(n=t.x-e.right,n<-this.TILE_BIAS&&(n=0)):t.deltaX()>0&&!t.blocked.right&&e.collideLeft&&t.checkCollision.right&&e.faceLeft&&t.right>e.left&&(n=t.right-e.left,n>this.TILE_BIAS&&(n=0)),0!==n&&this.processTileSeparationX(t,n),n},tileCheckY:function(t,e){var n=0;return t.deltaY()<0&&!t.blocked.up&&e.collideDown&&t.checkCollision.up?e.faceBottom&&t.y<e.bottom&&(n=t.y-e.bottom,n<-this.TILE_BIAS&&(n=0)):t.deltaY()>0&&!t.blocked.down&&e.collideUp&&t.checkCollision.down&&e.faceTop&&t.bottom>e.top&&(n=t.bottom-e.top,n>this.TILE_BIAS&&(n=0)),0!==n&&this.processTileSeparationY(t,n),n},processTileSeparationX:function(t,e){0>e?t.blocked.left=!0:e>0&&(t.blocked.right=!0),t.position.x-=e,t.velocity.x=0===t.bounce.x?0:-t.velocity.x*t.bounce.x},processTileSeparationY:function(t,e){0>e?t.blocked.up=!0:e>0&&(t.blocked.down=!0),t.position.y-=e,t.velocity.y=0===t.bounce.y?0:-t.velocity.y*t.bounce.y},getObjectsUnderPointer:function(t,e,i,r){if(0!==e.length&&t.exists){this.quadTree.clear(),this.quadTree.reset(this.game.world.bounds.x,this.game.world.bounds.y,this.game.world.bounds.width,this.game.world.bounds.height,this.maxObjects,this.maxLevels),this.quadTree.populate(e);var o=new n.Rectangle(t.x,t.y,1,1),a=[];this._potentials=this.quadTree.retrieve(o);for(var s=0,l=this._potentials.length;l>s;s++)this._potentials[s].hitTest(t.x,t.y)&&(i&&i.call(r,t,this._potentials[s].sprite),a.push(this._potentials[s].sprite));return a}},moveToObject:function(t,e,n,i){return"undefined"==typeof n&&(n=60),"undefined"==typeof i&&(i=0),this._angle=Math.atan2(e.y-t.y,e.x-t.x),i>0&&(n=this.distanceBetween(t,e)/(i/1e3)),t.body.velocity.x=Math.cos(this._angle)*n,t.body.velocity.y=Math.sin(this._angle)*n,this._angle},moveToPointer:function(t,e,n,i){return"undefined"==typeof e&&(e=60),n=n||this.game.input.activePointer,"undefined"==typeof i&&(i=0),this._angle=this.angleToPointer(t,n),i>0&&(e=this.distanceToPointer(t,n)/(i/1e3)),t.body.velocity.x=Math.cos(this._angle)*e,t.body.velocity.y=Math.sin(this._angle)*e,this._angle},moveToXY:function(t,e,n,i,r){return"undefined"==typeof i&&(i=60),"undefined"==typeof r&&(r=0),this._angle=Math.atan2(n-t.y,e-t.x),r>0&&(i=this.distanceToXY(t,e,n)/(r/1e3)),t.body.velocity.x=Math.cos(this._angle)*i,t.body.velocity.y=Math.sin(this._angle)*i,this._angle},velocityFromAngle:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(this.game.math.degToRad(t))*e,Math.sin(this.game.math.degToRad(t))*e)},velocityFromRotation:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerationFromRotation:function(t,e,i){return"undefined"==typeof e&&(e=60),i=i||new n.Point,i.setTo(Math.cos(t)*e,Math.sin(t)*e)},accelerateToObject:function(t,e,n,i,r){return"undefined"==typeof n&&(n=60),"undefined"==typeof i&&(i=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleBetween(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*n,Math.sin(this._angle)*n),t.body.maxVelocity.setTo(i,r),this._angle},accelerateToPointer:function(t,e,n,i,r){return"undefined"==typeof n&&(n=60),"undefined"==typeof e&&(e=this.game.input.activePointer),"undefined"==typeof i&&(i=1e3),"undefined"==typeof r&&(r=1e3),this._angle=this.angleToPointer(t,e),t.body.acceleration.setTo(Math.cos(this._angle)*n,Math.sin(this._angle)*n),t.body.maxVelocity.setTo(i,r),this._angle},accelerateToXY:function(t,e,n,i,r,o){return"undefined"==typeof i&&(i=60),"undefined"==typeof r&&(r=1e3),"undefined"==typeof o&&(o=1e3),this._angle=this.angleToXY(t,e,n),t.body.acceleration.setTo(Math.cos(this._angle)*i,Math.sin(this._angle)*i),t.body.maxVelocity.setTo(r,o),this._angle},distanceBetween:function(t,e){return this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToXY:function(t,e,n){return this._dx=t.x-e,this._dy=t.y-n,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},distanceToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=t.x-e.x,this._dy=t.y-e.y,Math.sqrt(this._dx*this._dx+this._dy*this._dy)},angleBetween:function(t,e){return this._dx=e.x-t.x,this._dy=e.y-t.y,Math.atan2(this._dy,this._dx)},angleToXY:function(t,e,n){return this._dx=e-t.x,this._dy=n-t.y,Math.atan2(this._dy,this._dx)},angleToPointer:function(t,e){return e=e||this.game.input.activePointer,this._dx=e.worldX-t.x,this._dy=e.worldY-t.y,Math.atan2(this._dy,this._dx)}},n.Physics.Arcade.Body=function(t){this.sprite=t,this.game=t.game,this.type=n.Physics.ARCADE,this.offset=new n.Point,this.position=new n.Point(t.x,t.y),this.prev=new n.Point(this.position.x,this.position.y),this.allowRotation=!0,this.rotation=t.rotation,this.preRotation=t.rotation,this.sourceWidth=t.texture.frame.width,this.sourceHeight=t.texture.frame.height,this.width=t.width,this.height=t.height,this.halfWidth=Math.abs(t.width/2),this.halfHeight=Math.abs(t.height/2),this.center=new n.Point(t.x+this.halfWidth,t.y+this.halfHeight),this.velocity=new n.Point,this.newVelocity=new n.Point(0,0),this.deltaMax=new n.Point(0,0),this.acceleration=new n.Point,this.drag=new n.Point,this.allowGravity=!0,this.gravity=new n.Point(0,0),this.bounce=new n.Point,this.maxVelocity=new n.Point(1e4,1e4),this.angularVelocity=0,this.angularAcceleration=0,this.angularDrag=0,this.maxAngular=1e3,this.mass=1,this.angle=0,this.speed=0,this.facing=n.NONE,this.immovable=!1,this.moves=!0,this.customSeparateX=!1,this.customSeparateY=!1,this.overlapX=0,this.overlapY=0,this.embedded=!1,this.collideWorldBounds=!1,this.checkCollision={none:!1,any:!0,up:!0,down:!0,left:!0,right:!0},this.touching={none:!0,up:!1,down:!1,left:!1,right:!1},this.wasTouching={none:!0,up:!1,down:!1,left:!1,right:!1},this.blocked={up:!1,down:!1,left:!1,right:!1},this.tilePadding=new n.Point,this.phase=0,this._reset=!0,this._sx=t.scale.x,this._sy=t.scale.y,this._dx=0,this._dy=0},n.Physics.Arcade.Body.prototype={updateBounds:function(){var t=Math.abs(this.sprite.scale.x),e=Math.abs(this.sprite.scale.y);(t!==this._sx||e!==this._sy)&&(this.width=this.sourceWidth*t,this.height=this.sourceHeight*e,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this._sx=t,this._sy=e,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this._reset=!0)},preUpdate:function(){this.phase=1,this.wasTouching.none=this.touching.none,this.wasTouching.up=this.touching.up,this.wasTouching.down=this.touching.down,this.wasTouching.left=this.touching.left,this.wasTouching.right=this.touching.right,this.touching.none=!0,this.touching.up=!1,this.touching.down=!1,this.touching.left=!1,this.touching.right=!1,this.blocked.up=!1,this.blocked.down=!1,this.blocked.left=!1,this.blocked.right=!1,this.embedded=!1,this.updateBounds(),this.position.x=this.sprite.world.x-this.sprite.anchor.x*this.width+this.offset.x,this.position.y=this.sprite.world.y-this.sprite.anchor.y*this.height+this.offset.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,(this._reset||1===this.sprite._cache[4])&&(this.prev.x=this.position.x,this.prev.y=this.position.y),this.moves&&(this.game.physics.arcade.updateMotion(this),this.newVelocity.set(this.velocity.x*this.game.time.physicsElapsed,this.velocity.y*this.game.time.physicsElapsed),this.position.x+=this.newVelocity.x,this.position.y+=this.newVelocity.y,(this.position.x!==this.prev.x||this.position.y!==this.prev.y)&&(this.speed=Math.sqrt(this.velocity.x*this.velocity.x+this.velocity.y*this.velocity.y),this.angle=Math.atan2(this.velocity.y,this.velocity.x)),this.collideWorldBounds&&this.checkWorldBounds()),this._dx=this.deltaX(),this._dy=this.deltaY(),this._reset=!1},postUpdate:function(){2!==this.phase&&(this.phase=2,this.deltaX()<0?this.facing=n.LEFT:this.deltaX()>0&&(this.facing=n.RIGHT),this.deltaY()<0?this.facing=n.UP:this.deltaY()>0&&(this.facing=n.DOWN),this.moves&&(this._dx=this.deltaX(),this._dy=this.deltaY(),0!==this.deltaMax.x&&0!==this._dx&&(this._dx<0&&this._dx<-this.deltaMax.x?this._dx=-this.deltaMax.x:this._dx>0&&this._dx>this.deltaMax.x&&(this._dx=this.deltaMax.x)),0!==this.deltaMax.y&&0!==this._dy&&(this._dy<0&&this._dy<-this.deltaMax.y?this._dy=-this.deltaMax.y:this._dy>0&&this._dy>this.deltaMax.y&&(this._dy=this.deltaMax.y)),this.sprite.x+=this._dx,this.sprite.y+=this._dy),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight),this.allowRotation&&(this.sprite.angle+=this.deltaZ()),this.prev.x=this.position.x,this.prev.y=this.position.y)},destroy:function(){this.sprite=null},checkWorldBounds:function(){this.position.x<this.game.physics.arcade.bounds.x&&this.game.physics.arcade.checkCollision.left?(this.position.x=this.game.physics.arcade.bounds.x,this.velocity.x*=-this.bounce.x,this.blocked.left=!0):this.right>this.game.physics.arcade.bounds.right&&this.game.physics.arcade.checkCollision.right&&(this.position.x=this.game.physics.arcade.bounds.right-this.width,this.velocity.x*=-this.bounce.x,this.blocked.right=!0),this.position.y<this.game.physics.arcade.bounds.y&&this.game.physics.arcade.checkCollision.up?(this.position.y=this.game.physics.arcade.bounds.y,this.velocity.y*=-this.bounce.y,this.blocked.up=!0):this.bottom>this.game.physics.arcade.bounds.bottom&&this.game.physics.arcade.checkCollision.down&&(this.position.y=this.game.physics.arcade.bounds.bottom-this.height,this.velocity.y*=-this.bounce.y,this.blocked.down=!0)},setSize:function(t,e,n,i){n=n||this.offset.x,i=i||this.offset.y,this.sourceWidth=t,this.sourceHeight=e,this.width=this.sourceWidth*this._sx,this.height=this.sourceHeight*this._sy,this.halfWidth=Math.floor(this.width/2),this.halfHeight=Math.floor(this.height/2),this.offset.setTo(n,i),this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)},reset:function(t,e){this.velocity.set(0),this.acceleration.set(0),this.angularVelocity=0,this.angularAcceleration=0,this.position.x=t-this.sprite.anchor.x*this.width+this.offset.x,this.position.y=e-this.sprite.anchor.y*this.height+this.offset.y,this.prev.x=this.position.x,this.prev.y=this.position.y,this.rotation=this.sprite.angle,this.preRotation=this.rotation,this._sx=this.sprite.scale.x,this._sy=this.sprite.scale.y,this.center.setTo(this.position.x+this.halfWidth,this.position.y+this.halfHeight)
},hitTest:function(t,e){return n.Rectangle.contains(this,t,e)},onFloor:function(){return this.blocked.down},onWall:function(){return this.blocked.left||this.blocked.right},deltaAbsX:function(){return this.deltaX()>0?this.deltaX():-this.deltaX()},deltaAbsY:function(){return this.deltaY()>0?this.deltaY():-this.deltaY()},deltaX:function(){return this.position.x-this.prev.x},deltaY:function(){return this.position.y-this.prev.y},deltaZ:function(){return this.rotation-this.preRotation}},Object.defineProperty(n.Physics.Arcade.Body.prototype,"bottom",{get:function(){return this.position.y+this.height}}),Object.defineProperty(n.Physics.Arcade.Body.prototype,"right",{get:function(){return this.position.x+this.width}}),Object.defineProperty(n.Physics.Arcade.Body.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(n.Physics.Arcade.Body.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),n.Physics.Arcade.Body.render=function(t,e,n,i){"undefined"==typeof n&&(n=!0),i=i||"rgba(0,255,0,0.4)",n?(t.fillStyle=i,t.fillRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height)):(t.strokeStyle=i,t.strokeRect(e.position.x-e.game.camera.x,e.position.y-e.game.camera.y,e.width,e.height))},n.Physics.Arcade.Body.renderBodyInfo=function(t,e){t.line("x: "+e.x.toFixed(2),"y: "+e.y.toFixed(2),"width: "+e.width,"height: "+e.height),t.line("velocity x: "+e.velocity.x.toFixed(2),"y: "+e.velocity.y.toFixed(2),"deltaX: "+e._dx.toFixed(2),"deltaY: "+e._dy.toFixed(2)),t.line("acceleration x: "+e.acceleration.x.toFixed(2),"y: "+e.acceleration.y.toFixed(2),"speed: "+e.speed.toFixed(2),"angle: "+e.angle.toFixed(2)),t.line("gravity x: "+e.gravity.x,"y: "+e.gravity.y,"bounce x: "+e.bounce.x.toFixed(2),"y: "+e.bounce.y.toFixed(2)),t.line("touching left: "+e.touching.left,"right: "+e.touching.right,"up: "+e.touching.up,"down: "+e.touching.down),t.line("blocked left: "+e.blocked.left,"right: "+e.blocked.right,"up: "+e.blocked.up,"down: "+e.blocked.down)},n.Physics.Arcade.Body.prototype.constructor=n.Physics.Arcade.Body,n.Particles=function(t){this.game=t,this.emitters={},this.ID=0},n.Particles.prototype={add:function(t){return this.emitters[t.name]=t,t},remove:function(t){delete this.emitters[t.name]},update:function(){for(var t in this.emitters)this.emitters[t].exists&&this.emitters[t].update()}},n.Particles.prototype.constructor=n.Particles,n.Particles.Arcade={},n.Particles.Arcade.Emitter=function(t,e,i,r){this.maxParticles=r||50,n.Group.call(this,t),this.name="emitter"+this.game.particles.ID++,this.type=n.EMITTER,this.width=1,this.height=1,this.minParticleSpeed=new n.Point(-100,-100),this.maxParticleSpeed=new n.Point(100,100),this.minParticleScale=1,this.maxParticleScale=1,this.scaleData=null,this.minRotation=-360,this.maxRotation=360,this.minParticleAlpha=1,this.maxParticleAlpha=1,this.alphaData=null,this.gravity=100,this.particleClass=n.Particle,this.particleDrag=new n.Point,this.angularDrag=0,this.frequency=100,this.lifespan=2e3,this.bounce=new n.Point,this.on=!1,this.particleAnchor=new n.Point(.5,.5),this.blendMode=n.blendModes.NORMAL,this.emitX=e,this.emitY=i,this.autoScale=!1,this.autoAlpha=!1,this.particleBringToTop=!1,this.particleSendToBack=!1,this._minParticleScale=new n.Point(1,1),this._maxParticleScale=new n.Point(1,1),this._quantity=0,this._timer=0,this._counter=0,this._explode=!0,this._frames=null},n.Particles.Arcade.Emitter.prototype=Object.create(n.Group.prototype),n.Particles.Arcade.Emitter.prototype.constructor=n.Particles.Arcade.Emitter,n.Particles.Arcade.Emitter.prototype.update=function(){if(this.on)if(this._explode){this._counter=0;do this.emitParticle(),this._counter++;while(this._counter<this._quantity);this.on=!1}else this.game.time.now>=this._timer&&(this.emitParticle(),this._counter++,this._quantity>0&&this._counter>=this._quantity&&(this.on=!1),this._timer=this.game.time.now+this.frequency);for(var t=this.children.length;t--;)this.children[t].exists&&this.children[t].update()},n.Particles.Arcade.Emitter.prototype.makeParticles=function(t,e,n,i,r){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.maxParticles),"undefined"==typeof i&&(i=!1),"undefined"==typeof r&&(r=!1);var o,a=0,s=t,l=e;for(this._frames=e;n>a;)Array.isArray(t)&&(s=this.game.rnd.pick(t)),Array.isArray(e)&&(l=this.game.rnd.pick(e)),o=new this.particleClass(this.game,0,0,s,l),this.game.physics.arcade.enable(o,!1),i?(o.body.checkCollision.any=!0,o.body.checkCollision.none=!1):o.body.checkCollision.none=!0,o.body.collideWorldBounds=r,o.exists=!1,o.visible=!1,o.anchor.copyFrom(this.particleAnchor),this.add(o),a++;return this},n.Particles.Arcade.Emitter.prototype.kill=function(){this.on=!1,this.alive=!1,this.exists=!1},n.Particles.Arcade.Emitter.prototype.revive=function(){this.alive=!0,this.exists=!0},n.Particles.Arcade.Emitter.prototype.start=function(t,e,n,i){"undefined"==typeof t&&(t=!0),"undefined"==typeof e&&(e=0),("undefined"==typeof n||null===n)&&(n=250),"undefined"==typeof i&&(i=0),this.revive(),this.visible=!0,this.on=!0,this._explode=t,this.lifespan=e,this.frequency=n,t?this._quantity=i:this._quantity+=i,this._counter=0,this._timer=this.game.time.now+n},n.Particles.Arcade.Emitter.prototype.emitParticle=function(){var t=this.getFirstExists(!1);null!==t&&(this.width>1||this.height>1?t.reset(this.game.rnd.integerInRange(this.left,this.right),this.game.rnd.integerInRange(this.top,this.bottom)):t.reset(this.emitX,this.emitY),t.angle=0,t.lifespan=this.lifespan,this.particleBringToTop?this.bringToTop(t):this.particleSendToBack&&this.sendToBack(t),this.autoScale?t.setScaleData(this.scaleData):1!==this.minParticleScale||1!==this.maxParticleScale?t.scale.set(this.game.rnd.realInRange(this.minParticleScale,this.maxParticleScale)):(this._minParticleScale.x!==this._maxParticleScale.x||this._minParticleScale.y!==this._maxParticleScale.y)&&t.scale.set(this.game.rnd.realInRange(this._minParticleScale.x,this._maxParticleScale.x),this.game.rnd.realInRange(this._minParticleScale.y,this._maxParticleScale.y)),t.frame=Array.isArray("object"===this._frames)?this.game.rnd.pick(this._frames):this._frames,this.autoAlpha?t.setAlphaData(this.alphaData):t.alpha=this.game.rnd.realInRange(this.minParticleAlpha,this.maxParticleAlpha),t.blendMode=this.blendMode,t.body.updateBounds(),t.body.bounce.setTo(this.bounce.x,this.bounce.y),t.body.velocity.x=this.game.rnd.integerInRange(this.minParticleSpeed.x,this.maxParticleSpeed.x),t.body.velocity.y=this.game.rnd.integerInRange(this.minParticleSpeed.y,this.maxParticleSpeed.y),t.body.angularVelocity=this.game.rnd.integerInRange(this.minRotation,this.maxRotation),t.body.gravity.y=this.gravity,t.body.drag.x=this.particleDrag.x,t.body.drag.y=this.particleDrag.y,t.body.angularDrag=this.angularDrag,t.onEmit())},n.Particles.Arcade.Emitter.prototype.setSize=function(t,e){this.width=t,this.height=e},n.Particles.Arcade.Emitter.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.x=t,this.maxParticleSpeed.x=e},n.Particles.Arcade.Emitter.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minParticleSpeed.y=t,this.maxParticleSpeed.y=e},n.Particles.Arcade.Emitter.prototype.setRotation=function(t,e){t=t||0,e=e||0,this.minRotation=t,this.maxRotation=e},n.Particles.Arcade.Emitter.prototype.setAlpha=function(t,e,i,r,o){if("undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=0),"undefined"==typeof r&&(r=n.Easing.Linear.None),"undefined"==typeof o&&(o=!1),this.minParticleAlpha=t,this.maxParticleAlpha=e,this.autoAlpha=!1,i>0&&t!==e){var a={v:t},s=this.game.make.tween(a).to({v:e},i,r);s.yoyo(o),this.alphaData=s.generateData(60),this.alphaData.reverse(),this.autoAlpha=!0}},n.Particles.Arcade.Emitter.prototype.setScale=function(t,e,i,r,o,a,s){if("undefined"==typeof t&&(t=1),"undefined"==typeof e&&(e=1),"undefined"==typeof i&&(i=1),"undefined"==typeof r&&(r=1),"undefined"==typeof o&&(o=0),"undefined"==typeof a&&(a=n.Easing.Linear.None),"undefined"==typeof s&&(s=!1),this.minParticleScale=1,this.maxParticleScale=1,this._minParticleScale.set(t,i),this._maxParticleScale.set(e,r),this.autoScale=!1,o>0&&t!==e||i!==r){var l={x:t,y:i},u=this.game.make.tween(l).to({x:e,y:r},o,a);u.yoyo(s),this.scaleData=u.generateData(60),this.scaleData.reverse(),this.autoScale=!0}},n.Particles.Arcade.Emitter.prototype.at=function(t){t.center?(this.emitX=t.center.x,this.emitY=t.center.y):(this.emitX=t.world.x+t.anchor.x*t.width,this.emitY=t.world.y+t.anchor.y*t.height)},Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"x",{get:function(){return this.emitX},set:function(t){this.emitX=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"y",{get:function(){return this.emitY},set:function(t){this.emitY=t}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"left",{get:function(){return Math.floor(this.x-this.width/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"right",{get:function(){return Math.floor(this.x+this.width/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"top",{get:function(){return Math.floor(this.y-this.height/2)}}),Object.defineProperty(n.Particles.Arcade.Emitter.prototype,"bottom",{get:function(){return Math.floor(this.y+this.height/2)}}),n.Tile=function(t,e,n,i,r,o){this.layer=t,this.index=e,this.x=n,this.y=i,this.worldX=n*r,this.worldY=i*o,this.width=r,this.height=o,this.centerX=Math.abs(r/2),this.centerY=Math.abs(o/2),this.alpha=1,this.properties={},this.scanned=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1,this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.collisionCallback=null,this.collisionCallbackContext=this},n.Tile.prototype={containsPoint:function(t,e){return!(t<this.worldX||e<this.worldY||t>this.right||e>this.bottom)},intersects:function(t,e,n,i){return n<=this.worldX?!1:i<=this.worldY?!1:t>=this.worldX+this.width?!1:e>=this.worldY+this.height?!1:!0},setCollisionCallback:function(t,e){this.collisionCallback=t,this.collisionCallbackContext=e},destroy:function(){this.collisionCallback=null,this.collisionCallbackContext=null,this.properties=null},setCollision:function(t,e,n,i){this.collideLeft=t,this.collideRight=e,this.collideUp=n,this.collideDown=i},resetCollision:function(){this.collideLeft=!1,this.collideRight=!1,this.collideUp=!1,this.collideDown=!1,this.faceTop=!1,this.faceBottom=!1,this.faceLeft=!1,this.faceRight=!1},isInteresting:function(t,e){return t&&e?this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.faceTop||this.faceBottom||this.faceLeft||this.faceRight||this.collisionCallback:t?this.collideLeft||this.collideRight||this.collideUp||this.collideDown:e?this.faceTop||this.faceBottom||this.faceLeft||this.faceRight:!1},copy:function(t){this.index=t.index,this.alpha=t.alpha,this.properties=t.properties,this.collideUp=t.collideUp,this.collideDown=t.collideDown,this.collideLeft=t.collideLeft,this.collideRight=t.collideRight,this.collisionCallback=t.collisionCallback,this.collisionCallbackContext=t.collisionCallbackContext}},n.Tile.prototype.constructor=n.Tile,Object.defineProperty(n.Tile.prototype,"collides",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown}}),Object.defineProperty(n.Tile.prototype,"canCollide",{get:function(){return this.collideLeft||this.collideRight||this.collideUp||this.collideDown||this.collisionCallback}}),Object.defineProperty(n.Tile.prototype,"left",{get:function(){return this.worldX}}),Object.defineProperty(n.Tile.prototype,"right",{get:function(){return this.worldX+this.width}}),Object.defineProperty(n.Tile.prototype,"top",{get:function(){return this.worldY}}),Object.defineProperty(n.Tile.prototype,"bottom",{get:function(){return this.worldY+this.height}}),n.Tilemap=function(t,e,i,r,o,a){this.game=t,this.key=e;var s=n.TilemapParser.parse(this.game,e,i,r,o,a);null!==s&&(this.width=s.width,this.height=s.height,this.tileWidth=s.tileWidth,this.tileHeight=s.tileHeight,this.orientation=s.orientation,this.format=s.format,this.version=s.version,this.properties=s.properties,this.widthInPixels=s.widthInPixels,this.heightInPixels=s.heightInPixels,this.layers=s.layers,this.tilesets=s.tilesets,this.tiles=s.tiles,this.objects=s.objects,this.collideIndexes=[],this.collision=s.collision,this.images=s.images,this.currentLayer=0,this.debugMap=[],this._results=[],this._tempA=0,this._tempB=0)},n.Tilemap.CSV=0,n.Tilemap.TILED_JSON=1,n.Tilemap.NORTH=0,n.Tilemap.EAST=1,n.Tilemap.SOUTH=2,n.Tilemap.WEST=3,n.Tilemap.prototype={create:function(t,e,n,i,r,o){return"undefined"==typeof o&&(o=this.game.world),this.width=e,this.height=n,this.setTileSize(i,r),this.layers.length=0,this.createBlankLayer(t,e,n,i,r,o)},setTileSize:function(t,e){this.tileWidth=t,this.tileHeight=e,this.widthInPixels=this.width*t,this.heightInPixels=this.height*e},addTilesetImage:function(t,e,i,r,o,a,s){if("undefined"==typeof i&&(i=this.tileWidth),"undefined"==typeof r&&(r=this.tileHeight),"undefined"==typeof o&&(o=0),"undefined"==typeof a&&(a=0),"undefined"==typeof s&&(s=0),0===i&&(i=32),0===r&&(r=32),"undefined"==typeof e){if("string"!=typeof t)return null;if(e=t,!this.game.cache.checkImageKey(e))return console.warn('Phaser.Tilemap.addTilesetImage: Invalid image key given: "'+e+'"'),null}if("string"==typeof t&&(t=this.getTilesetIndex(t),null===t&&this.format===n.Tilemap.TILED_JSON))return console.warn('Phaser.Tilemap.addTilesetImage: No data found in the JSON matching the tileset name: "'+e+'"'),null;if(this.tilesets[t])return this.tilesets[t].setImage(this.game.cache.getImage(e)),this.tilesets[t];var l=new n.Tileset(e,s,i,r,o,a,{});l.setImage(this.game.cache.getImage(e)),this.tilesets.push(l);for(var u=this.tilesets.length-1,h=o,c=o,d=0,p=0,f=0,m=s;m<s+l.total&&(this.tiles[m]=[h,c,u],h+=i+a,d++,d!==l.total)&&(p++,p!==l.columns||(h=o,c+=r+a,p=0,f++,f!==l.rows));m++);return l},createFromObjects:function(t,e,i,r,o,a,s,l,u){if("undefined"==typeof o&&(o=!0),"undefined"==typeof a&&(a=!1),"undefined"==typeof s&&(s=this.game.world),"undefined"==typeof l&&(l=n.Sprite),"undefined"==typeof u&&(u=!0),!this.objects[t])return void console.warn("Tilemap.createFromObjects: Invalid objectgroup name given: "+t);for(var h,c=0,d=this.objects[t].length;d>c;c++)if(this.objects[t][c].gid===e){h=new l(this.game,this.objects[t][c].x,this.objects[t][c].y,i,r),h.name=this.objects[t][c].name,h.visible=this.objects[t][c].visible,h.autoCull=a,h.exists=o,u&&(h.y-=h.height),s.add(h);for(var p in this.objects[t][c].properties)s.set(h,p,this.objects[t][c].properties[p],!1,!1,0,!0)}},createLayer:function(t,e,i,r){"undefined"==typeof e&&(e=this.game.width),"undefined"==typeof i&&(i=this.game.height),"undefined"==typeof r&&(r=this.game.world);var o=t;return"string"==typeof t&&(o=this.getLayerIndex(t)),null===o||o>this.layers.length?void console.warn("Tilemap.createLayer: Invalid layer ID given: "+o):r.add(new n.TilemapLayer(this.game,this,o,e,i))},createBlankLayer:function(t,e,i,r,o,a){if("undefined"==typeof a&&(a=this.game.world),null!==this.getLayerIndex(t))return void console.warn("Tilemap.createBlankLayer: Layer with matching name already exists");for(var s,l={name:t,x:0,y:0,width:e,height:i,widthInPixels:e*r,heightInPixels:i*o,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],bodies:[],data:null},u=[],h=0;i>h;h++){s=[];for(var c=0;e>c;c++)s.push(new n.Tile(l,-1,c,h,r,o));u.push(s)}l.data=u,this.layers.push(l),this.currentLayer=this.layers.length-1;var d=l.widthInPixels,p=l.heightInPixels;d>this.game.width&&(d=this.game.width),p>this.game.height&&(p=this.game.height);var u=new n.TilemapLayer(this.game,this,this.layers.length-1,d,p);return u.name=t,a.add(u)},getIndex:function(t,e){for(var n=0;n<t.length;n++)if(t[n].name===e)return n;return null},getLayerIndex:function(t){return this.getIndex(this.layers,t)},getTilesetIndex:function(t){return this.getIndex(this.tilesets,t)},getImageIndex:function(t){return this.getIndex(this.images,t)},getObjectIndex:function(t){return this.getIndex(this.objects,t)},setTileIndexCallback:function(t,e,n,i){if(i=this.getLayer(i),"number"==typeof t)this.layers[i].callbacks[t]={callback:e,callbackContext:n};else for(var r=0,o=t.length;o>r;r++)this.layers[i].callbacks[t[r]]={callback:e,callbackContext:n}},setTileLocationCallback:function(t,e,n,i,r,o,a){if(a=this.getLayer(a),this.copy(t,e,n,i,a),!(this._results.length<2))for(var s=1;s<this._results.length;s++)this._results[s].setCollisionCallback(r,o)},setCollision:function(t,e,n,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!0),n=this.getLayer(n),"number"==typeof t)return this.setCollisionByIndex(t,e,n,!0);for(var r=0,o=t.length;o>r;r++)this.setCollisionByIndex(t[r],e,n,!1);i&&this.calculateFaces(n)},setCollisionBetween:function(t,e,n,i,r){if("undefined"==typeof n&&(n=!0),"undefined"==typeof r&&(r=!0),i=this.getLayer(i),!(t>e)){for(var o=t;e>=o;o++)this.setCollisionByIndex(o,n,i,!1);r&&this.calculateFaces(i)}},setCollisionByExclusion:function(t,e,n,i){"undefined"==typeof e&&(e=!0),"undefined"==typeof i&&(i=!0),n=this.getLayer(n);for(var r=0,o=this.tiles.length;o>r;r++)-1===t.indexOf(r)&&this.setCollisionByIndex(r,e,n,!1);i&&this.calculateFaces(n)},setCollisionByIndex:function(t,e,n,i){if("undefined"==typeof e&&(e=!0),"undefined"==typeof n&&(n=this.currentLayer),"undefined"==typeof i&&(i=!0),e)this.collideIndexes.push(t);else{var r=this.collideIndexes.indexOf(t);r>-1&&this.collideIndexes.splice(r,1)}for(var o=0;o<this.layers[n].height;o++)for(var a=0;a<this.layers[n].width;a++){var s=this.layers[n].data[o][a];s&&s.index===t&&(e?s.setCollision(!0,!0,!0,!0):s.resetCollision(),s.faceTop=e,s.faceBottom=e,s.faceLeft=e,s.faceRight=e)}return i&&this.calculateFaces(n),n},getLayer:function(t){return"undefined"==typeof t?t=this.currentLayer:"string"==typeof t?t=this.getLayerIndex(t):t instanceof n.TilemapLayer&&(t=t.index),t},calculateFaces:function(t){for(var e=null,n=null,i=null,r=null,o=0,a=this.layers[t].height;a>o;o++)for(var s=0,l=this.layers[t].width;l>s;s++){var u=this.layers[t].data[o][s];u&&(e=this.getTileAbove(t,s,o),n=this.getTileBelow(t,s,o),i=this.getTileLeft(t,s,o),r=this.getTileRight(t,s,o),u.collides&&(u.faceTop=!0,u.faceBottom=!0,u.faceLeft=!0,u.faceRight=!0),e&&e.collides&&(u.faceTop=!1),n&&n.collides&&(u.faceBottom=!1),i&&i.collides&&(u.faceLeft=!1),r&&r.collides&&(u.faceRight=!1))}},getTileAbove:function(t,e,n){return n>0?this.layers[t].data[n-1][e]:null},getTileBelow:function(t,e,n){return n<this.layers[t].height-1?this.layers[t].data[n+1][e]:null},getTileLeft:function(t,e,n){return e>0?this.layers[t].data[n][e-1]:null},getTileRight:function(t,e,n){return e<this.layers[t].width-1?this.layers[t].data[n][e+1]:null},setLayer:function(t){t=this.getLayer(t),this.layers[t]&&(this.currentLayer=t)},hasTile:function(t,e,n){return n=this.getLayer(n),null!==this.layers[n].data[e]&&null!==this.layers[n].data[e][t]},removeTile:function(t,e,n){if(n=this.getLayer(n),t>=0&&t<this.layers[n].width&&e>=0&&e<this.layers[n].height&&this.hasTile(t,e,n)){var i=this.layers[n].data[e][t];return this.layers[n].data[e][t]=null,this.layers[n].dirty=!0,this.calculateFaces(n),i}},removeTileWorldXY:function(t,e,n,i,r){return r=this.getLayer(r),t=this.game.math.snapToFloor(t,n)/n,e=this.game.math.snapToFloor(e,i)/i,this.removeTile(t,e,r)},putTile:function(t,e,i,r){if(null===t)return this.removeTile(e,i,r);if(r=this.getLayer(r),e>=0&&e<this.layers[r].width&&i>=0&&i<this.layers[r].height){var o;return t instanceof n.Tile?(o=t.index,this.hasTile(e,i,r)?this.layers[r].data[i][e].copy(t):this.layers[r].data[i][e]=new n.Tile(r,o,e,i,t.width,t.height)):(o=t,this.hasTile(e,i,r)?this.layers[r].data[i][e].index=o:this.layers[r].data[i][e]=new n.Tile(this.layers[r],o,e,i,this.tileWidth,this.tileHeight)),this.collideIndexes.indexOf(o)>-1?this.layers[r].data[i][e].setCollision(!0,!0,!0,!0):this.layers[r].data[i][e].resetCollision(),this.layers[r].dirty=!0,this.calculateFaces(r),this.layers[r].data[i][e]}return null},putTileWorldXY:function(t,e,n,i,r,o){return o=this.getLayer(o),e=this.game.math.snapToFloor(e,i)/i,n=this.game.math.snapToFloor(n,r)/r,this.putTile(t,e,n,o)},searchTileIndex:function(t,e,n,i){"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=!1),i=this.getLayer(i);var r=0;if(n){for(var o=this.layers[i].height-1;o>=0;o--)for(var a=this.layers[i].width-1;a>=0;a--)if(this.layers[i].data[o][a].index===t){if(r===e)return this.layers[i].data[o][a];r++}}else for(var o=0;o<this.layers[i].height;o++)for(var a=0;a<this.layers[i].width;a++)if(this.layers[i].data[o][a].index===t){if(r===e)return this.layers[i].data[o][a];r++}return null},getTile:function(t,e,n,i){return"undefined"==typeof i&&(i=!1),n=this.getLayer(n),t>=0&&t<this.layers[n].width&&e>=0&&e<this.layers[n].height?-1===this.layers[n].data[e][t].index?i?this.layers[n].data[e][t]:null:this.layers[n].data[e][t]:null},getTileWorldXY:function(t,e,n,i,r){return"undefined"==typeof n&&(n=this.tileWidth),"undefined"==typeof i&&(i=this.tileHeight),r=this.getLayer(r),t=this.game.math.snapToFloor(t,n)/n,e=this.game.math.snapToFloor(e,i)/i,this.getTile(t,e,r)},copy:function(t,e,n,i,r){if(r=this.getLayer(r),!this.layers[r])return void(this._results.length=0);"undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),"undefined"==typeof n&&(n=this.layers[r].width),"undefined"==typeof i&&(i=this.layers[r].height),0>t&&(t=0),0>e&&(e=0),n>this.layers[r].width&&(n=this.layers[r].width),i>this.layers[r].height&&(i=this.layers[r].height),this._results.length=0,this._results.push({x:t,y:e,width:n,height:i,layer:r});for(var o=e;e+i>o;o++)for(var a=t;t+n>a;a++)this._results.push(this.layers[r].data[o][a]);return this._results},paste:function(t,e,n,i){if("undefined"==typeof t&&(t=0),"undefined"==typeof e&&(e=0),i=this.getLayer(i),n&&!(n.length<2)){for(var r=n[1].x-t,o=n[1].y-e,a=1;a<n.length;a++)this.layers[i].data[o+n[a].y][r+n[a].x].copy(n[a]);this.layers[i].dirty=!0,this.calculateFaces(i)}},swap:function(t,e,n,i,r,o,a){a=this.getLayer(a),this.copy(n,i,r,o,a),this._results.length<2||(this._tempA=t,this._tempB=e,this._results.forEach(this.swapHandler,this),this.paste(n,i,this._results,a))},swapHandler:function(t,e){t.index===this._tempA&&(this._results[e].index=this._tempB),t.index===this._tempB&&(this._results[e].index=this._tempA)},forEach:function(t,e,n,i,r,o,a){a=this.getLayer(a),this.copy(n,i,r,o,a),this._results.length<2||(this._results.forEach(t,e),this.paste(n,i,this._results,a))},replace:function(t,e,n,i,r,o,a){if(a=this.getLayer(a),this.copy(n,i,r,o,a),!(this._results.length<2)){for(var s=1;s<this._results.length;s++)this._results[s].index===t&&(this._results[s].index=e);this.paste(n,i,this._results,a)}},random:function(t,e,n,i,r){if(r=this.getLayer(r),this.copy(t,e,n,i,r),!(this._results.length<2)){for(var o=[],a=1;a<this._results.length;a++)if(this._results[a].index){var s=this._results[a].index;-1===o.indexOf(s)&&o.push(s)}for(var l=1;l<this._results.length;l++)this._results[l].index=this.game.rnd.pick(o);this.paste(t,e,this._results,r)}},shuffle:function(t,e,i,r,o){if(o=this.getLayer(o),this.copy(t,e,i,r,o),!(this._results.length<2)){for(var a=[],s=1;s<this._results.length;s++)this._results[s].index&&a.push(this._results[s].index);n.Utils.shuffle(a);for(var l=1;l<this._results.length;l++)this._results[l].index=a[l-1];this.paste(t,e,this._results,o)}},fill:function(t,e,n,i,r,o){if(o=this.getLayer(o),this.copy(e,n,i,r,o),!(this._results.length<2)){for(var a=1;a<this._results.length;a++)this._results[a].index=t;this.paste(e,n,this._results,o)}},removeAllLayers:function(){this.layers.length=0,this.currentLayer=0},dump:function(){for(var t="",e=[""],n=0;n<this.layers[this.currentLayer].height;n++){for(var i=0;i<this.layers[this.currentLayer].width;i++)t+="%c  ",e.push(this.layers[this.currentLayer].data[n][i]>1?this.debugMap[this.layers[this.currentLayer].data[n][i]]?"background: "+this.debugMap[this.layers[this.currentLayer].data[n][i]]:"background: #ffffff":"background: rgb(0, 0, 0)");t+="\n"}e[0]=t,console.log.apply(console,e)},destroy:function(){this.removeAllLayers(),this.data=[],this.game=null}},n.Tilemap.prototype.constructor=n.Tilemap,Object.defineProperty(n.Tilemap.prototype,"layer",{get:function(){return this.layers[this.currentLayer]},set:function(t){t!==this.currentLayer&&this.setLayer(t)}}),n.TilemapLayer=function(t,e,i,r,o){this.game=t,this.map=e,this.index=i,this.layer=e.layers[i],this.canvas=n.Canvas.create(r,o,"",!0),this.context=this.canvas.getContext("2d"),this.baseTexture=new PIXI.BaseTexture(this.canvas),this.texture=new PIXI.Texture(this.baseTexture),this.textureFrame=new n.Frame(0,0,0,r,o,"tilemapLayer",t.rnd.uuid()),n.Image.call(this,this.game,0,0,this.texture,this.textureFrame),this.name="",this.type=n.TILEMAPLAYER,this.fixedToCamera=!0,this.cameraOffset=new n.Point(0,0),this.tileColor="rgb(255, 255, 255)",this.debug=!1,this.debugAlpha=.5,this.debugColor="rgba(0, 255, 0, 1)",this.debugFill=!1,this.debugFillColor="rgba(0, 255, 0, 0.2)",this.debugCallbackColor="rgba(255, 0, 0, 1)",this.scrollFactorX=1,this.scrollFactorY=1,this.dirty=!0,this.rayStepRate=4,this._mc={cw:e.tileWidth,ch:e.tileHeight,ga:1,dx:0,dy:0,dw:0,dh:0,tx:0,ty:0,tw:0,th:0,tl:0,maxX:0,maxY:0,startX:0,startY:0,x:0,y:0,prevX:0,prevY:0},this._results=[],this.updateMax()},n.TilemapLayer.prototype=Object.create(n.Image.prototype),n.TilemapLayer.prototype.constructor=n.TilemapLayer,n.TilemapLayer.prototype.postUpdate=function(){n.Image.prototype.postUpdate.call(this),this.scrollX=this.game.camera.x*this.scrollFactorX,this.scrollY=this.game.camera.y*this.scrollFactorY,this.render(),1===this._cache[7]&&(this.position.x=(this.game.camera.view.x+this.cameraOffset.x)/this.game.camera.scale.x,this.position.y=(this.game.camera.view.y+this.cameraOffset.y)/this.game.camera.scale.y)},n.TilemapLayer.prototype.resizeWorld=function(){this.game.world.setBounds(0,0,this.layer.widthInPixels,this.layer.heightInPixels)},n.TilemapLayer.prototype._fixX=function(t){return 0>t&&(t=0),1===this.scrollFactorX?t:this._mc.x+(t-this._mc.x/this.scrollFactorX)},n.TilemapLayer.prototype._unfixX=function(t){return 1===this.scrollFactorX?t:this._mc.x/this.scrollFactorX+(t-this._mc.x)},n.TilemapLayer.prototype._fixY=function(t){return 0>t&&(t=0),1===this.scrollFactorY?t:this._mc.y+(t-this._mc.y/this.scrollFactorY)},n.TilemapLayer.prototype._unfixY=function(t){return 1===this.scrollFactorY?t:this._mc.y/this.scrollFactorY+(t-this._mc.y)},n.TilemapLayer.prototype.getTileX=function(t){return this.game.math.snapToFloor(this._fixX(t),this.map.tileWidth)/this.map.tileWidth},n.TilemapLayer.prototype.getTileY=function(t){return this.game.math.snapToFloor(this._fixY(t),this.map.tileHeight)/this.map.tileHeight},n.TilemapLayer.prototype.getTileXY=function(t,e,n){return n.x=this.getTileX(t),n.y=this.getTileY(e),n},n.TilemapLayer.prototype.getRayCastTiles=function(t,e,n,i){("undefined"==typeof e||null===e)&&(e=this.rayStepRate),"undefined"==typeof n&&(n=!1),"undefined"==typeof i&&(i=!1);var r=this.getTiles(t.x,t.y,t.width,t.height,n,i);if(0===r.length)return[];for(var o=t.coordinatesOnLine(e),a=o.length,s=[],l=0;l<r.length;l++)for(var u=0;a>u;u++)if(r[l].containsPoint(o[u][0],o[u][1])){s.push(r[l]);break}return s},n.TilemapLayer.prototype.getTiles=function(t,e,n,i,r,o){"undefined"==typeof r&&(r=!1),"undefined"==typeof o&&(o=!1),t=this._fixX(t),e=this._fixY(e),n>this.layer.widthInPixels&&(n=this.layer.widthInPixels),i>this.layer.heightInPixels&&(i=this.layer.heightInPixels),this._mc.tx=this.game.math.snapToFloor(t,this._mc.cw)/this._mc.cw,this._mc.ty=this.game.math.snapToFloor(e,this._mc.ch)/this._mc.ch,this._mc.tw=(this.game.math.snapToCeil(n,this._mc.cw)+this._mc.cw)/this._mc.cw,this._mc.th=(this.game.math.snapToCeil(i,this._mc.ch)+this._mc.ch)/this._mc.ch,this._results.length=0;for(var a=this._mc.ty;a<this._mc.ty+this._mc.th;a++)for(var s=this._mc.tx;s<this._mc.tx+this._mc.tw;s++)this.layer.data[a]&&this.layer.data[a][s]&&(!r&&!o||this.layer.data[a][s].isInteresting(r,o))&&this._results.push(this.layer.data[a][s]);return this._results},n.TilemapLayer.prototype.updateMax=function(){this._mc.maxX=this.game.math.ceil(this.canvas.width/this.map.tileWidth)+1,this._mc.maxY=this.game.math.ceil(this.canvas.height/this.map.tileHeight)+1,this.layer&&(this._mc.maxX>this.layer.width&&(this._mc.maxX=this.layer.width),this._mc.maxY>this.layer.height&&(this._mc.maxY=this.layer.height)),this.dirty=!0},n.TilemapLayer.prototype.render=function(){if(this.layer.dirty&&(this.dirty=!0),this.dirty&&this.visible){this._mc.prevX=this._mc.dx,this._mc.prevY=this._mc.dy,this._mc.dx=-(this._mc.x-this._mc.startX*this.map.tileWidth),this._mc.dy=-(this._mc.y-this._mc.startY*this.map.tileHeight),this._mc.tx=this._mc.dx,this._mc.ty=this._mc.dy,this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.fillStyle=this.tileColor;var t,e;this.debug&&(this.context.globalAlpha=this.debugAlpha);for(var i=this._mc.startY,r=this._mc.startY+this._mc.maxY;r>i;i++){this._column=this.layer.data[i];for(var o=this._mc.startX,a=this._mc.startX+this._mc.maxX;a>o;o++)this._column[o]&&(t=this._column[o],t.index>-1&&(e=this.map.tilesets[this.map.tiles[t.index][2]],this.debug===!1&&t.alpha!==this.context.globalAlpha&&(this.context.globalAlpha=t.alpha),e.draw(this.context,Math.floor(this._mc.tx),Math.floor(this._mc.ty),t.index),t.debug&&(this.context.fillStyle="rgba(0, 255, 0, 0.4)",this.context.fillRect(Math.floor(this._mc.tx),Math.floor(this._mc.ty),this.map.tileWidth,this.map.tileHeight)))),this._mc.tx+=this.map.tileWidth;this._mc.tx=this._mc.dx,this._mc.ty+=this.map.tileHeight}return this.debug&&(this.context.globalAlpha=1,this.renderDebug()),this.game.renderType===n.WEBGL&&PIXI.updateWebGLTexture(this.baseTexture,this.game.renderer.gl),this.dirty=!1,this.layer.dirty=!1,!0}},n.TilemapLayer.prototype.renderDebug=function(){this._mc.tx=this._mc.dx,this._mc.ty=this._mc.dy,this.context.strokeStyle=this.debugColor,this.context.fillStyle=this.debugFillColor;for(var t=this._mc.startY,e=this._mc.startY+this._mc.maxY;e>t;t++){this._column=this.layer.data[t];for(var n=this._mc.startX,i=this._mc.startX+this._mc.maxX;i>n;n++){var r=this._column[n];r&&(r.faceTop||r.faceBottom||r.faceLeft||r.faceRight)&&(this._mc.tx=Math.floor(this._mc.tx),this.debugFill&&this.context.fillRect(this._mc.tx,this._mc.ty,this._mc.cw,this._mc.ch),this.context.beginPath(),r.faceTop&&(this.context.moveTo(this._mc.tx,this._mc.ty),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty)),r.faceBottom&&(this.context.moveTo(this._mc.tx,this._mc.ty+this._mc.ch),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty+this._mc.ch)),r.faceLeft&&(this.context.moveTo(this._mc.tx,this._mc.ty),this.context.lineTo(this._mc.tx,this._mc.ty+this._mc.ch)),r.faceRight&&(this.context.moveTo(this._mc.tx+this._mc.cw,this._mc.ty),this.context.lineTo(this._mc.tx+this._mc.cw,this._mc.ty+this._mc.ch)),this.context.stroke()),this._mc.tx+=this.map.tileWidth}this._mc.tx=this._mc.dx,this._mc.ty+=this.map.tileHeight}},Object.defineProperty(n.TilemapLayer.prototype,"scrollX",{get:function(){return this._mc.x},set:function(t){t!==this._mc.x&&t>=0&&this.layer.widthInPixels>this.width&&(this._mc.x=t,this._mc.x>this.layer.widthInPixels-this.width&&(this._mc.x=this.layer.widthInPixels-this.width),this._mc.startX=this.game.math.floor(this._mc.x/this.map.tileWidth),this._mc.startX<0&&(this._mc.startX=0),this._mc.startX+this._mc.maxX>this.layer.width&&(this._mc.startX=this.layer.width-this._mc.maxX),this.dirty=!0)}}),Object.defineProperty(n.TilemapLayer.prototype,"scrollY",{get:function(){return this._mc.y},set:function(t){t!==this._mc.y&&t>=0&&this.layer.heightInPixels>this.height&&(this._mc.y=t,this._mc.y>this.layer.heightInPixels-this.height&&(this._mc.y=this.layer.heightInPixels-this.height),this._mc.startY=this.game.math.floor(this._mc.y/this.map.tileHeight),this._mc.startY<0&&(this._mc.startY=0),this._mc.startY+this._mc.maxY>this.layer.height&&(this._mc.startY=this.layer.height-this._mc.maxY),this.dirty=!0)
}}),Object.defineProperty(n.TilemapLayer.prototype,"collisionWidth",{get:function(){return this._mc.cw},set:function(t){this._mc.cw=t,this.dirty=!0}}),Object.defineProperty(n.TilemapLayer.prototype,"collisionHeight",{get:function(){return this._mc.ch},set:function(t){this._mc.ch=t,this.dirty=!0}}),n.TilemapParser={parse:function(t,e,i,r,o,a){if("undefined"==typeof i&&(i=32),"undefined"==typeof r&&(r=32),"undefined"==typeof o&&(o=10),"undefined"==typeof a&&(a=10),"undefined"==typeof e)return this.getEmptyData();if(null===e)return this.getEmptyData(i,r,o,a);var s=t.cache.getTilemapData(e);if(s){if(s.format===n.Tilemap.CSV)return this.parseCSV(e,s.data,i,r);if(!s.format||s.format===n.Tilemap.TILED_JSON)return this.parseTiledJSON(s.data)}else console.warn("Phaser.TilemapParser.parse - No map data found for key "+e)},parseCSV:function(t,e,i,r){var o=this.getEmptyData();e=e.trim();for(var a=[],s=e.split("\n"),l=s.length,u=0,h=0;h<s.length;h++){a[h]=[];for(var c=s[h].split(","),d=0;d<c.length;d++)a[h][d]=new n.Tile(o.layers[0],parseInt(c[d],10),d,h,i,r);0===u&&(u=c.length)}return o.format=n.Tilemap.CSV,o.name=t,o.width=u,o.height=l,o.tileWidth=i,o.tileHeight=r,o.widthInPixels=u*i,o.heightInPixels=l*r,o.layers[0].width=u,o.layers[0].height=l,o.layers[0].widthInPixels=o.widthInPixels,o.layers[0].heightInPixels=o.heightInPixels,o.layers[0].data=a,o},getEmptyData:function(t,e,n,i){var r={};r.width=0,r.height=0,r.tileWidth=0,r.tileHeight=0,"undefined"!=typeof t&&null!==t&&(r.tileWidth=t),"undefined"!=typeof e&&null!==e&&(r.tileHeight=e),"undefined"!=typeof n&&null!==n&&(r.width=n),"undefined"!=typeof i&&null!==i&&(r.height=i),r.orientation="orthogonal",r.version="1",r.properties={},r.widthInPixels=0,r.heightInPixels=0;var o=[],a={name:"layer",x:0,y:0,width:0,height:0,widthInPixels:0,heightInPixels:0,alpha:1,visible:!0,properties:{},indexes:[],callbacks:[],data:[]};return o.push(a),r.layers=o,r.images=[],r.objects={},r.collision={},r.tilesets=[],r.tiles=[],r},parseTiledJSON:function(t){function e(t,e){var n={};for(var i in e){var r=e[i];n[r]=t[r]}return n}if("orthogonal"!==t.orientation)return console.warn("TilemapParser.parseTiledJSON: Only orthogonal map types are supported in this version of Phaser"),null;var i={};i.width=t.width,i.height=t.height,i.tileWidth=t.tilewidth,i.tileHeight=t.tileheight,i.orientation=t.orientation,i.format=n.Tilemap.TILED_JSON,i.version=t.version,i.properties=t.properties,i.widthInPixels=i.width*i.tileWidth,i.heightInPixels=i.height*i.tileHeight;for(var r=[],o=0;o<t.layers.length;o++)if("tilelayer"===t.layers[o].type){var a={name:t.layers[o].name,x:t.layers[o].x,y:t.layers[o].y,width:t.layers[o].width,height:t.layers[o].height,widthInPixels:t.layers[o].width*t.tilewidth,heightInPixels:t.layers[o].height*t.tileheight,alpha:t.layers[o].opacity,visible:t.layers[o].visible,properties:{},indexes:[],callbacks:[],bodies:[]};t.layers[o].properties&&(a.properties=t.layers[o].properties);for(var s=0,l=[],u=[],h=0,c=t.layers[o].data.length;c>h;h++)l.push(t.layers[o].data[h]>0?new n.Tile(a,t.layers[o].data[h],s,u.length,t.tilewidth,t.tileheight):new n.Tile(a,-1,s,u.length,t.tilewidth,t.tileheight)),s++,s===t.layers[o].width&&(u.push(l),s=0,l=[]);a.data=u,r.push(a)}i.layers=r;for(var d=[],o=0;o<t.layers.length;o++)if("imagelayer"===t.layers[o].type){var p={name:t.layers[o].name,image:t.layers[o].image,x:t.layers[o].x,y:t.layers[o].y,alpha:t.layers[o].opacity,visible:t.layers[o].visible,properties:{}};t.layers[o].properties&&(p.properties=t.layers[o].properties),d.push(p)}i.images=d;for(var f=[],o=0;o<t.tilesets.length;o++){var m=t.tilesets[o],g=new n.Tileset(m.name,m.firstgid,m.tilewidth,m.tileheight,m.margin,m.spacing,m.properties);m.tileproperties&&(g.tileProperties=m.tileproperties),g.rows=Math.round((m.imageheight-m.margin)/(m.tileheight+m.spacing)),g.columns=Math.round((m.imagewidth-m.margin)/(m.tilewidth+m.spacing)),g.total=g.rows*g.columns,g.rows%1!==0||g.columns%1!==0?console.warn("TileSet image dimensions do not match expected dimensions. Tileset width/height must be evenly divisible by Tilemap tile width/height."):f.push(g)}i.tilesets=f;for(var y={},_={},o=0;o<t.layers.length;o++)if("objectgroup"===t.layers[o].type){y[t.layers[o].name]=[],_[t.layers[o].name]=[];for(var v=0,c=t.layers[o].objects.length;c>v;v++)if(t.layers[o].objects[v].gid){var b={gid:t.layers[o].objects[v].gid,name:t.layers[o].objects[v].name,x:t.layers[o].objects[v].x,y:t.layers[o].objects[v].y,visible:t.layers[o].objects[v].visible,properties:t.layers[o].objects[v].properties};y[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].polyline){var b={name:t.layers[o].objects[v].name,x:t.layers[o].objects[v].x,y:t.layers[o].objects[v].y,width:t.layers[o].objects[v].width,height:t.layers[o].objects[v].height,visible:t.layers[o].objects[v].visible,properties:t.layers[o].objects[v].properties};b.polyline=[];for(var w=0;w<t.layers[o].objects[v].polyline.length;w++)b.polyline.push([t.layers[o].objects[v].polyline[w].x,t.layers[o].objects[v].polyline[w].y]);_[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].polygon){var b=e(t.layers[o].objects[v],["name","x","y","visible","properties"]);b.polygon=[];for(var w=0;w<t.layers[o].objects[v].polygon.length;w++)b.polygon.push([t.layers[o].objects[v].polygon[w].x,t.layers[o].objects[v].polygon[w].y]);y[t.layers[o].name].push(b)}else if(t.layers[o].objects[v].ellipse){var b=e(t.layers[o].objects[v],["name","ellipse","x","y","width","height","visible","properties"]);y[t.layers[o].name].push(b)}else{var b=e(t.layers[o].objects[v],["name","x","y","width","height","visible","properties"]);b.rectangle=!0,y[t.layers[o].name].push(b)}}i.objects=y,i.collision=_,i.tiles=[];for(var o=0;o<i.tilesets.length;o++)for(var m=i.tilesets[o],s=m.tileMargin,x=m.tileMargin,T=0,M=0,k=0,h=m.firstgid;h<m.firstgid+m.total&&(i.tiles[h]=[s,x,o],s+=m.tileWidth+m.tileSpacing,T++,T!==m.total)&&(M++,M!==m.columns||(s=m.tileMargin,x+=m.tileHeight+m.tileSpacing,M=0,k++,k!==m.rows));h++);return i}},n.Tileset=function(t,e,n,i,r,o,a){("undefined"==typeof n||0>=n)&&(n=32),("undefined"==typeof i||0>=i)&&(i=32),"undefined"==typeof r&&(r=0),"undefined"==typeof o&&(o=0),this.name=t,this.firstgid=e,this.tileWidth=n,this.tileHeight=i,this.tileMargin=r,this.tileSpacing=o,this.properties=a,this.image=null,this.rows=0,this.columns=0,this.total=0,this.drawCoords=[]},n.Tileset.prototype={draw:function(t,e,n,i){this.image&&this.drawCoords[i]&&t.drawImage(this.image,this.drawCoords[i][0],this.drawCoords[i][1],this.tileWidth,this.tileHeight,e,n,this.tileWidth,this.tileHeight)},setImage:function(t){this.image=t,this.rows=Math.round((t.height-this.tileMargin)/(this.tileHeight+this.tileSpacing)),this.columns=Math.round((t.width-this.tileMargin)/(this.tileWidth+this.tileSpacing)),this.total=this.rows*this.columns,this.drawCoords.length=0;for(var e=this.tileMargin,n=this.tileMargin,i=this.firstgid,r=0;r<this.rows;r++){for(var o=0;o<this.columns;o++)this.drawCoords[i]=[e,n],e+=this.tileWidth+this.tileSpacing,i++;e=this.tileMargin,n+=this.tileHeight+this.tileSpacing}},setSpacing:function(t,e){this.tileMargin=t,this.tileSpacing=e,this.setImage(this.image)}},n.Tileset.prototype.constructor=n.Tileset,"undefined"!=typeof t?("undefined"!=typeof module&&module.exports&&(t=module.exports=n),t.Phaser=n):"undefined"!=typeof define&&define.amd?define("Phaser",function(){return e.Phaser=n}()):e.Phaser=n}.call(this)}.call(this),function(){!function(e,n){"use strict";"function"==typeof define&&define.amd?define(["jquery"],n):"object"==typeof t?module.exports=n(require("jquery")):e.bootbox=n(e.jQuery)}(this,function e(t,n){"use strict";function i(t){var e=g[f.locale];return e?e[t]:g.en[t]}function r(e,n,i){e.stopPropagation(),e.preventDefault();var r=t.isFunction(i)&&i(e)===!1;r||n.modal("hide")}function o(t){var e,n=0;for(e in t)n++;return n}function a(e,n){var i=0;t.each(e,function(t,e){n(t,e,i++)})}function s(e){var n,i;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return e=t.extend({},f,e),e.buttons||(e.buttons={}),e.backdrop=e.backdrop?"static":!1,n=e.buttons,i=o(n),a(n,function(e,r,o){if(t.isFunction(r)&&(r=n[e]={callback:r}),"object"!==t.type(r))throw new Error("button with key "+e+" must be an object");r.label||(r.label=e),r.className||(r.className=2>=i&&o===i-1?"btn-primary":"btn-default")}),e}function l(t,e){var n=t.length,i={};if(1>n||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof t[0]?(i[e[0]]=t[0],i[e[1]]=t[1]):i=t[0],i}function u(e,n,i){return t.extend(!0,{},e,l(n,i))}function h(t,e,n,i){var r={className:"bootbox-"+t,buttons:c.apply(null,e)};return d(u(r,i,n),e)}function c(){for(var t={},e=0,n=arguments.length;n>e;e++){var r=arguments[e],o=r.toLowerCase(),a=r.toUpperCase();t[o]={label:i(a)}}return t}function d(t,e){var i={};return a(e,function(t,e){i[e]=!0}),a(t.buttons,function(t){if(i[t]===n)throw new Error("button key "+t+" is not allowed (options are "+e.join("\n")+")")}),t}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},f={locale:"en",backdrop:!0,animate:!0,className:null,closeButton:!0,show:!0,container:"body"},m={};m.alert=function(){var e;if(e=h("alert",["ok"],["message","callback"],arguments),e.callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return t.isFunction(e.callback)?e.callback():!0},m.dialog(e)},m.confirm=function(){var e;if(e=h("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback(!1)},e.buttons.confirm.callback=function(){return e.callback(!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return m.dialog(e)},m.prompt=function(){var e,i,r,o,s,l,h;if(o=t(p.form),i={className:"bootbox-prompt",buttons:c("cancel","confirm"),value:"",inputType:"text"},e=d(u(i,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n?!0:e.show,e.message=o,e.buttons.cancel.callback=e.onEscape=function(){return e.callback(null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=s.val();break;case"checkbox":var i=s.find("input:checked");n=[],a(i,function(e,i){n.push(t(i).val())})}return e.callback(n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(s=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":s.val(e.value);break;case"select":var f={};if(h=e.inputOptions||[],!h.length)throw new Error("prompt with select requires options");a(h,function(e,i){var r=s;if(i.value===n||i.text===n)throw new Error("given options in wrong format");i.group&&(f[i.group]||(f[i.group]=t("<optgroup/>").attr("label",i.group)),r=f[i.group]),r.append("<option value='"+i.value+"'>"+i.text+"</option>")}),a(f,function(t,e){s.append(e)}),s.val(e.value);break;case"checkbox":var g=t.isArray(e.value)?e.value:[e.value];if(h=e.inputOptions||[],!h.length)throw new Error("prompt with checkbox requires options");if(!h[0].value||!h[0].text)throw new Error("given options in wrong format");s=t("<div/>"),a(h,function(n,i){var r=t(p.inputs[e.inputType]);r.find("input").attr("value",i.value),r.find("label").append(i.text),a(g,function(t,e){e===i.value&&r.find("input").prop("checked",!0)}),s.append(r)})}return e.placeholder&&s.attr("placeholder",e.placeholder),e.pattern&&s.attr("pattern",e.pattern),o.append(s),o.on("submit",function(t){t.preventDefault(),t.stopPropagation(),r.find(".btn-primary").click()}),r=m.dialog(e),r.off("shown.bs.modal"),r.on("shown.bs.modal",function(){s.focus()}),l===!0&&r.modal("show"),r},m.dialog=function(e){e=s(e);var n=t(p.dialog),i=n.find(".modal-dialog"),o=n.find(".modal-body"),l=e.buttons,u="",h={onEscape:e.onEscape};if(a(l,function(t,e){u+="<button data-bb-handler='"+t+"' type='button' class='btn "+e.className+"'>"+e.label+"</button>",h[t]=e.callback}),o.find(".bootbox-body").html(e.message),e.animate===!0&&n.addClass("fade"),e.className&&n.addClass(e.className),"large"===e.size&&i.addClass("modal-lg"),"small"===e.size&&i.addClass("modal-sm"),e.title&&o.before(p.header),e.closeButton){var c=t(p.closeButton);e.title?n.find(".modal-header").prepend(c):c.css("margin-top","-10px").prependTo(o)}return e.title&&n.find(".modal-title").html(e.title),u.length&&(o.after(p.footer),n.find(".modal-footer").html(u)),n.on("hidden.bs.modal",function(t){t.target===this&&n.remove()}),n.on("shown.bs.modal",function(){n.find(".btn-primary:first").focus()}),n.on("escape.close.bb",function(t){h.onEscape&&r(t,n,h.onEscape)}),n.on("click",".modal-footer button",function(e){var i=t(this).data("bb-handler");r(e,n,h[i])}),n.on("click",".bootbox-close-button",function(t){r(t,n,h.onEscape)}),n.on("keyup",function(t){27===t.which&&n.trigger("escape.close.bb")}),t(e.container).append(n),n.modal({backdrop:e.backdrop,keyboard:!1,show:!1}),e.show&&n.modal("show"),n},m.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(f,e)},m.hideAll=function(){return t(".bootbox").modal("hide"),m};var g={br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zruit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"",CANCEL:"",CONFIRM:""},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"",CANCEL:"",CONFIRM:""},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"",CONFIRM:""},lt:{OK:"Gerai",CANCEL:"Ataukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprint"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierd"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"",CONFIRM:""},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},tr:{OK:"Tamam",CANCEL:"ptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"",CONFIRM:""},zh_TW:{OK:"OK",CANCEL:"",CONFIRM:""}};return m.init=function(n){return e(n||t)},m})}.call(this),function(){!function(){var e={},n=null,i=!0,r=!1;try{"undefined"!=typeof AudioContext?n=new AudioContext:"undefined"!=typeof webkitAudioContext?n=new webkitAudioContext:i=!1}catch(o){i=!1}if(!i)if("undefined"!=typeof Audio)try{new Audio}catch(o){r=!0}else r=!0;if(i){var a="undefined"==typeof n.createGain?n.createGainNode():n.createGain();a.gain.value=1,a.connect(n.destination)}var s=function(t){this._volume=1,this._muted=!1,this.usingWebAudio=i,this.ctx=n,this.noAudio=r,this._howls=[],this._codecs=t,this.iOSAutoEnable=!0};s.prototype={volume:function(t){var e=this;if(t=parseFloat(t),t>=0&&1>=t){e._volume=t,i&&(a.gain.value=t);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var r=0;r<e._howls[n]._audioNode.length;r++)e._howls[n]._audioNode[r].volume=e._howls[n]._volume*e._volume;return e}return i?a.gain.value:e._volume},mute:function(){return this._setMuted(!0),this},unmute:function(){return this._setMuted(!1),this},_setMuted:function(t){var e=this;e._muted=t,i&&(a.gain.value=t?0:e._volume);for(var n in e._howls)if(e._howls.hasOwnProperty(n)&&e._howls[n]._webAudio===!1)for(var r=0;r<e._howls[n]._audioNode.length;r++)e._howls[n]._audioNode[r].muted=t},codecs:function(t){return this._codecs[t]},_enableiOSAudio:function(){var t=this;if(!n||!t._iOSEnabled&&/iPhone|iPad|iPod/i.test(navigator.userAgent)){t._iOSEnabled=!1;var e=function(){var i=n.createBuffer(1,1,22050),r=n.createBufferSource();r.buffer=i,r.connect(n.destination),"undefined"==typeof r.start?r.noteOn(0):r.start(0),setTimeout(function(){(r.playbackState===r.PLAYING_STATE||r.playbackState===r.FINISHED_STATE)&&(t._iOSEnabled=!0,t.iOSAutoEnable=!1,window.removeEventListener("touchstart",e,!1))},0)};return window.addEventListener("touchstart",e,!1),t}}};var l=null,u={};r||(l=new Audio,u={mp3:!!l.canPlayType("audio/mpeg;").replace(/^no$/,""),opus:!!l.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!l.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!l.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!l.canPlayType("audio/aac;").replace(/^no$/,""),m4a:!!(l.canPlayType("audio/x-m4a;")||l.canPlayType("audio/m4a;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(l.canPlayType("audio/x-mp4;")||l.canPlayType("audio/mp4;")||l.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!l.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")});var h=new s(u),c=function(t){var e=this;e._autoplay=t.autoplay||!1,e._buffer=t.buffer||!1,e._duration=t.duration||0,e._format=t.format||null,e._loop=t.loop||!1,e._loaded=!1,e._sprite=t.sprite||{},e._src=t.src||"",e._pos3d=t.pos3d||[0,0,-.5],e._volume=void 0!==t.volume?t.volume:1,e._urls=t.urls||[],e._rate=t.rate||1,e._model=t.model||null,e._onload=[t.onload||function(){}],e._onloaderror=[t.onloaderror||function(){}],e._onend=[t.onend||function(){}],e._onpause=[t.onpause||function(){}],e._onplay=[t.onplay||function(){}],e._onendTimer=[],e._webAudio=i&&!e._buffer,e._audioNode=[],e._webAudio&&e._setupAudioNode(),"undefined"!=typeof n&&n&&h.iOSAutoEnable&&h._enableiOSAudio(),h._howls.push(e),e.load()};if(c.prototype={load:function(){var t=this,e=null;if(r)return void t.on("loaderror");for(var n=0;n<t._urls.length;n++){var i,o;if(t._format)i=t._format;else{if(o=t._urls[n],i=/^data:audio\/([^;,]+);/i.exec(o),i||(i=/\.([^.]+)$/.exec(o.split("?",1)[0])),!i)return void t.on("loaderror");i=i[1].toLowerCase()}if(u[i]){e=t._urls[n];break}}if(!e)return void t.on("loaderror");if(t._src=e,t._webAudio)d(t,e);else{var a=new Audio;a.addEventListener("error",function(){a.error&&4===a.error.code&&(s.noAudio=!0),t.on("loaderror",{type:a.error?a.error.code:0})},!1),t._audioNode.push(a),a.src=e,a._pos=0,a.preload="auto",a.volume=h._muted?0:t._volume*h.volume();var l=function(){t._duration=Math.ceil(10*a.duration)/10,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play(),a.removeEventListener("canplaythrough",l,!1)};a.addEventListener("canplaythrough",l,!1),a.load()}return t},urls:function(t){var e=this;return t?(e.stop(),e._urls="string"==typeof t?[t]:t,e._loaded=!1,e.load(),e):e._urls},play:function(t,e){var i=this;return"function"==typeof t&&(e=t),t&&"function"!=typeof t||(t="_default"),i._loaded?i._sprite[t]?(i._inactiveNode(function(r){r._sprite=t;var o=r._pos>0?r._pos:i._sprite[t][0]/1e3,a=0;i._webAudio?(a=i._sprite[t][1]/1e3-r._pos,r._pos>0&&(o=i._sprite[t][0]/1e3+o)):a=i._sprite[t][1]/1e3-(o-i._sprite[t][0]/1e3);var s,l=!(!i._loop&&!i._sprite[t][2]),u="string"==typeof e?e:Math.round(Date.now()*Math.random())+"";if(function(){var e={id:u,sprite:t,loop:l};s=setTimeout(function(){!i._webAudio&&l&&i.stop(e.id).play(t,e.id),i._webAudio&&!l&&(i._nodeById(e.id).paused=!0,i._nodeById(e.id)._pos=0,i._clearEndTimer(e.id)),i._webAudio||l||i.stop(e.id),i.on("end",u)},1e3*a),i._onendTimer.push({timer:s,id:e.id})}(),i._webAudio){var c=i._sprite[t][0]/1e3,d=i._sprite[t][1]/1e3;r.id=u,r.paused=!1,m(i,[l,c,d],u),i._playStart=n.currentTime,r.gain.value=i._volume,"undefined"==typeof r.bufferSource.start?r.bufferSource.noteGrainOn(0,o,a):r.bufferSource.start(0,o,a)}else{if(4!==r.readyState&&(r.readyState||!navigator.isCocoonJS))return i._clearEndTimer(u),function(){var n=i,o=t,a=e,s=r,l=function(){n.play(o,a),s.removeEventListener("canplaythrough",l,!1)};s.addEventListener("canplaythrough",l,!1)}(),i;r.readyState=4,r.id=u,r.currentTime=o,r.muted=h._muted||r.muted,r.volume=i._volume*h.volume(),setTimeout(function(){r.play()},0)}return i.on("play"),"function"==typeof e&&e(u),i}),i):("function"==typeof e&&e(),i):(i.on("load",function(){i.play(t,e)}),i)},pause:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.pause(t)}),e;e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=e.pos(null,t),e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else n.pause();return e.on("pause"),e},stop:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.stop(t)}),e;e._clearEndTimer(t);var n=t?e._nodeById(t):e._activeNode();if(n)if(n._pos=0,e._webAudio){if(!n.bufferSource||n.paused)return e;n.paused=!0,"undefined"==typeof n.bufferSource.stop?n.bufferSource.noteOff(0):n.bufferSource.stop(0)}else isNaN(n.duration)||(n.pause(),n.currentTime=0);return e},mute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.mute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=0:n.muted=!0),e},unmute:function(t){var e=this;if(!e._loaded)return e.on("play",function(){e.unmute(t)}),e;var n=t?e._nodeById(t):e._activeNode();return n&&(e._webAudio?n.gain.value=e._volume:n.muted=!1),e},volume:function(t,e){var n=this;if(t=parseFloat(t),t>=0&&1>=t){if(n._volume=t,!n._loaded)return n.on("play",function(){n.volume(t,e)}),n;var i=e?n._nodeById(e):n._activeNode();return i&&(n._webAudio?i.gain.value=t:i.volume=t*h.volume()),n}return n._volume},loop:function(t){var e=this;return"boolean"==typeof t?(e._loop=t,e):e._loop},sprite:function(t){var e=this;return"object"==typeof t?(e._sprite=t,e):e._sprite},pos:function(t,e){var i=this;if(!i._loaded)return i.on("load",function(){i.pos(t)}),"number"==typeof t?i:i._pos||0;t=parseFloat(t);var r=e?i._nodeById(e):i._activeNode();if(r)return t>=0?(i.pause(e),r._pos=t,i.play(r._sprite,e),i):i._webAudio?r._pos+(n.currentTime-i._playStart):r.currentTime;if(t>=0)return i;for(var o=0;o<i._audioNode.length;o++)if(i._audioNode[o].paused&&4===i._audioNode[o].readyState)return i._webAudio?i._audioNode[o]._pos:i._audioNode[o].currentTime},pos3d:function(t,e,n,i){var r=this;if(e="undefined"!=typeof e&&e?e:0,n="undefined"!=typeof n&&n?n:-.5,!r._loaded)return r.on("play",function(){r.pos3d(t,e,n,i)}),r;if(!(t>=0||0>t))return r._pos3d;if(r._webAudio){var o=i?r._nodeById(i):r._activeNode();o&&(r._pos3d=[t,e,n],o.panner.setPosition(t,e,n),o.panner.panningModel=r._model||"HRTF")}return r},fade:function(t,e,n,i,r){var o=this,a=Math.abs(t-e),s=t>e?"down":"up",l=a/.01,u=n/l;if(!o._loaded)return o.on("load",function(){o.fade(t,e,n,i,r)}),o;o.volume(t,r);for(var h=1;l>=h;h++)!function(){var t=o._volume+("up"===s?.01:-.01)*h,n=Math.round(1e3*t)/1e3,a=e;setTimeout(function(){o.volume(n,r),n===a&&i&&i()},u*h)}()},fadeIn:function(t,e,n){return this.volume(0).play().fade(0,t,e,n)},fadeOut:function(t,e,n,i){var r=this;return r.fade(r._volume,t,e,function(){n&&n(),r.pause(i),r.on("end")},i)},_nodeById:function(t){for(var e=this,n=e._audioNode[0],i=0;i<e._audioNode.length;i++)if(e._audioNode[i].id===t){n=e._audioNode[i];break}return n},_activeNode:function(){for(var t=this,e=null,n=0;n<t._audioNode.length;n++)if(!t._audioNode[n].paused){e=t._audioNode[n];break}return t._drainPool(),e},_inactiveNode:function(t){for(var e=this,n=null,i=0;i<e._audioNode.length;i++)if(e._audioNode[i].paused&&4===e._audioNode[i].readyState){t(e._audioNode[i]),n=!0;break}if(e._drainPool(),!n){var r;if(e._webAudio)r=e._setupAudioNode(),t(r);else{e.load(),r=e._audioNode[e._audioNode.length-1];var o=navigator.isCocoonJS?"canplaythrough":"loadedmetadata",a=function(){r.removeEventListener(o,a,!1),t(r)};r.addEventListener(o,a,!1)}}},_drainPool:function(){var t,e=this,n=0;for(t=0;t<e._audioNode.length;t++)e._audioNode[t].paused&&n++;for(t=e._audioNode.length-1;t>=0&&!(5>=n);t--)e._audioNode[t].paused&&(e._webAudio&&e._audioNode[t].disconnect(0),n--,e._audioNode.splice(t,1))},_clearEndTimer:function(t){for(var e=this,n=0,i=0;i<e._onendTimer.length;i++)if(e._onendTimer[i].id===t){n=i;break}var r=e._onendTimer[n];r&&(clearTimeout(r.timer),e._onendTimer.splice(n,1))},_setupAudioNode:function(){var t=this,e=t._audioNode,i=t._audioNode.length;return e[i]="undefined"==typeof n.createGain?n.createGainNode():n.createGain(),e[i].gain.value=t._volume,e[i].paused=!0,e[i]._pos=0,e[i].readyState=4,e[i].connect(a),e[i].panner=n.createPanner(),e[i].panner.panningModel=t._model||"equalpower",e[i].panner.setPosition(t._pos3d[0],t._pos3d[1],t._pos3d[2]),e[i].panner.connect(e[i]),e[i]},on:function(t,e){var n=this,i=n["_on"+t];if("function"==typeof e)i.push(e);else for(var r=0;r<i.length;r++)e?i[r].call(n,e):i[r].call(n);return n},off:function(t,e){var n=this,i=n["_on"+t],r=e?e.toString():null;if(r){for(var o=0;o<i.length;o++)if(r===i[o].toString()){i.splice(o,1);break}}else n["_on"+t]=[];return n},unload:function(){for(var t=this,n=t._audioNode,i=0;i<t._audioNode.length;i++)n[i].paused||(t.stop(n[i].id),t.on("end",n[i].id)),t._webAudio?n[i].disconnect(0):n[i].src="";for(i=0;i<t._onendTimer.length;i++)clearTimeout(t._onendTimer[i].timer);var r=h._howls.indexOf(t);null!==r&&r>=0&&h._howls.splice(r,1),delete e[t._src],t=null}},i)var d=function(t,n){if(n in e)return t._duration=e[n].duration,void f(t);if(/^data:[^;]+;base64,/.test(n)){for(var i=atob(n.split(",")[1]),r=new Uint8Array(i.length),o=0;o<i.length;++o)r[o]=i.charCodeAt(o);p(r.buffer,t,n)}else{var a=new XMLHttpRequest;a.open("GET",n,!0),a.responseType="arraybuffer",a.onload=function(){p(a.response,t,n)},a.onerror=function(){t._webAudio&&(t._buffer=!0,t._webAudio=!1,t._audioNode=[],delete t._gainNode,delete e[n],t.load())};try{a.send()}catch(s){a.onerror()}}},p=function(t,i,r){n.decodeAudioData(t,function(t){t&&(e[r]=t,f(i,t))},function(){i.on("loaderror")})},f=function(t,e){t._duration=e?e.duration:t._duration,0===Object.getOwnPropertyNames(t._sprite).length&&(t._sprite={_default:[0,1e3*t._duration]}),t._loaded||(t._loaded=!0,t.on("load")),t._autoplay&&t.play()},m=function(t,i,r){var o=t._nodeById(r);o.bufferSource=n.createBufferSource(),o.bufferSource.buffer=e[t._src],o.bufferSource.connect(o.panner),o.bufferSource.loop=i[0],i[0]&&(o.bufferSource.loopStart=i[1],o.bufferSource.loopEnd=i[1]+i[2]),o.bufferSource.playbackRate.value=t._rate};"function"==typeof define&&define.amd&&define(function(){return{Howler:h,Howl:c}}),"undefined"!=typeof t&&(t.Howler=h,t.Howl=c),"undefined"!=typeof window&&(window.Howler=h,window.Howl=c)}()}.call(this),function(){!function(t,e){var n={type:"",text:"",top:0,left:0,angle:45,size:50,distance:50,template:'<div class="grumble" style="display:none;filter:progid:DXImageTransform.Microsoft.Matrix(sizingMethod=\'auto expand\')">&#160;</div>',textTemplate:'<div class="grumble-text" style="display:none;"><div class="outer"><div class="inner">{text}</div></div></div>',context:null};e.GrumbleBubble=function(e){this.options=t.extend({},n,e),this.context=t(this.options.context||t("body")),this.css={},this.create()},e.GrumbleBubble.prototype={create:function(){var n=e.GrumbleBubble.prototype.tmpl;this.bubble=t(n(this.options.template)),this.text=t(n(this.options.textTemplate,{text:this.options.text})),this.prepare()},setBubbleRotation:function(){this.rotateDeg=this.options.angle-45,this.rotateDeg<0&&(this.rotateDeg+=360)},prepare:function(){var t=this.bubble.get(0).parentNode;this.setBubbleRotation(),this.applyStyles(),t!==this.context&&this.append(),this.rotate()},applyStyles:function(){this.setPosition(),this.css.width=this.options.size,this.css.height=this.options.size,this.text.css(this.css).addClass("grumble-text"+this.options.size),this.bubble.css(this.css).addClass(this.options.type+"grumble"+this.options.size),this.realLeft=this.css.left,this.realTop=this.css.top},setPosition:function(){var t=this.options.angle/-360,e=Math.cos(2*t*Math.PI),n=Math.sin(2*t*Math.PI),i=this.options.size/2,r=this.options.size*this.options.size,o=Math.sqrt(r+r)/2,a=this.options.top+i-e*(this.options.distance+o),s=this.options.left-i-n*(this.options.distance+o);this.css.top=a-this.options.size,this.css.left=s},append:function(){var t=this.context;this.bubble.appendTo(t),this.text.appendTo(t)},rotate:function(){"Microsoft Internet Explorer"===navigator.appName&&e.document.documentMode<10?this.ieRotate():this.cssRotate()},cssRotate:function(){this.bubble.css({"-moz-transform":"rotate("+this.rotateDeg+"deg)","-webkit-transform":"rotate("+this.rotateDeg+"deg)","-o-transform":"rotate("+this.rotateDeg+"deg)",transform:"rotate("+this.rotateDeg+"deg)"})},ieRotate:function(){var t,e,n=this.rotateDeg,i=2*Math.PI/360,r=n*i,o=Math.cos(r),a=Math.sin(r),s=this.bubble.get(0);s.filters.item(0).M11=o,s.filters.item(0).M12=-a,s.filters.item(0).M21=a,s.filters.item(0).M22=o,t=this.bubble.width(),e=this.bubble.height(),this.bubble.css({left:this.css.left-(t-this.options.size)/2,top:this.css.top-(e-this.options.size)/2})},adjust:function(e){t.extend(this.options,e),this.prepare()},tmpl:function(t,e,n){for(var i in e)null===e[i]&&(e[i]=""),"object"==typeof e[i]&&e[i].length&&(e[i]=e[i].join(", ")),t=t.replace(new RegExp("{"+i+"}","g"),n?escape(e[i]):e[i]);return t}}}(i,window)}.call(this),function(){!function(t,e){function n(t,e){var n,i;return e?(i=Number(t.css("margin-top").replace("px",""))||0,n=t.position(),n.top+=i+e.scrollTop()+t.height(),n.left+=t.width()/2):(n=t.offset(),n.top+=t.height(),n.left+=t.width()/2),n}function i(e,n,r){var o=t('<div style="position:absolute;visibility:hidden;width:'+e+'px;">'+r+"</div>").appendTo(t(document.body)),a=2*o.outerHeight()+.2*e,s=t.inArray(e,n);return o.remove(),a>=e&&n[++s]?i(n[s],n,r):e}var r={text:"",angle:45,size:50,sizeRange:[50,100,150,200],distance:0,type:"",useRelativePositioning:!1,showAfter:0,hideAfter:!1,hideOnClick:!1,hasHideButton:!1,buttonTemplate:'<div class="grumble-button" style="display:none" title="{hideText}">x</div>',buttonHideText:"Hide",onHide:function(){},onShow:function(){},onBeginHide:function(){}},o=[],a="Microsoft Internet Explorer"===navigator.appName&&window.document.documentMode<10;t.fn.grumble=function(r,s){return"string"==typeof r?(this.trigger({type:r+".bubble",adjustments:s}),this):this.each(function(){var s,l,u,h,c,d=t(this),p=t.extend({},t.fn.grumble.defaults,r,d.data("grumble")||{}),f=i(p.size,p.sizeRange,p.text);return p.useRelativePositioning&&(c=d.offsetParent()),h=n(d,c),p.top=h.top,p.left=h.left,t.data(this,"hazGrumble")?(d.grumble("adjust",r),d.grumble("show"),!0):(t.data(this,"hazGrumble",!0),u={init:function(){s=new e({text:p.text,top:p.top,left:p.left,angle:p.angle,size:f,distance:p.distance,type:p.type,context:c}),p.hasHideButton&&this.addButton(),o.push({grumble:s,button:l,onHide:function(){u.isVisible=!1,t(document.body).unbind("click.bubble"),u.doOnBeginHideCallback(),u.doOnHideCallback()
}}),this.showBubble(),this.prepareEvents()},addButton:function(){var n=e.prototype.tmpl;l=t(n(p.buttonTemplate,{hideText:p.buttonHideText})).css({left:s.realLeft+f-10,top:s.realTop+f-10}).insertAfter(s.text)},rePositionButton:function(){l&&l.css({left:s.realLeft+f-10,top:s.realTop+f-10})},createFxQueue:function(){s.bubble.queue("fx"),s.text.queue("fx"),s.bubble.delay(p.showAfter),s.text.delay(p.showAfter),l&&l.delay(p.showAfter)},showBubble:function(){1!=u.isVisible&&(p.showAfter&&u.createFxQueue(),a?(s.bubble.queue("fx",function(t){s.bubble.show(),t()}),s.text.queue("fx",function(t){s.text.show(),t()}),l&&l.queue("fx",function(t){l.show(),t()})):(s.bubble.fadeTo("fast",1),s.text.fadeTo("fast",1),l&&l.fadeTo("fast",1)),s.bubble.queue("fx",function(t){u.isVisible=!0,(p.hideOnClick||p.hasHideButton)&&u.hideOnClick(),u.doOnShowCallback(),t()}),p.hideAfter&&u.hideBubble())},hideBubble:function(){s.bubble.delay(p.hideAfter),s.text.delay(p.hideAfter),s.bubble.queue("fx",function(t){u.doOnBeginHideCallback(),t()}),a?(s.bubble.queue("fx",function(t){s.bubble.hide(),t()}),s.bubble.queue("fx",function(t){s.text.hide(),t()}),l&&l.queue("fx",function(t){l.hide(),t()})):(s.bubble.fadeOut(),s.text.fadeOut(),l&&l.fadeOut()),s.bubble.queue("fx",function(t){u.isVisible=!1,u.doOnHideCallback(),t()})},doOnBeginHideCallback:function(){p.onBeginHide(s,l)},doOnHideCallback:function(){p.onHide(s,l)},doOnShowCallback:function(){p.onShow(s,l)},hideOnClick:function(){setTimeout(function(){var e=function(){u.hideBubble(s,l),t(document.body).unbind("click.bubble",e)};t(document.body).bind("click.bubble",e)},1e3)},prepareEvents:function(){t(window).bind("resize.bubble",function(){var t;t=n(d,c),s.adjust({top:t.top,left:t.left}),u.rePositionButton()}),d.bind("hide.bubble",function(){u.hideBubble(s,l)}),d.bind("adjust.bubble",function(t){t.adjustments&&"object"==typeof t.adjustments&&s.adjust(t.adjustments)}),d.bind("show.bubble",function(){u.showBubble(s,l)}),d.bind("delete.bubble",function(){s.bubble.hide().remove(),s.text.hide().remove(),l&&l.hide().remove();for(var t=o.length,e=0;t>e;e++)if(s===o[e].grumble){o.splice(e,1);break}d.removeData("hazGrumble")})}},void u.init())})},t.fn.grumble.defaults=r,t(document).bind("keyup.bubble",function(e){27===e.keyCode&&t.each(o,function(t,e){e.grumble.bubble.clearQueue().hide(),e.grumble.text.clearQueue().hide(),e.button&&e.button.clearQueue().hide(),e.onHide()})})}(r,GrumbleBubble)}.call(this),function(){!function(t){var e,n,i="0.4.2",r="hasOwnProperty",o=/[\.\/]/,a=/\s*,\s*/,s="*",l=function(t,e){return t-e},u={n:{}},h=function(){for(var t=0,e=this.length;e>t;t++)if("undefined"!=typeof this[t])return this[t]},c=function(){for(var t=this.length;--t;)if("undefined"!=typeof this[t])return this[t]},d=function(t,i){t=String(t);var r,o=n,a=Array.prototype.slice.call(arguments,2),s=d.listeners(t),u=0,p=[],f={},m=[],g=e;m.firstDefined=h,m.lastDefined=c,e=t,n=0;for(var y=0,_=s.length;_>y;y++)"zIndex"in s[y]&&(p.push(s[y].zIndex),s[y].zIndex<0&&(f[s[y].zIndex]=s[y]));for(p.sort(l);p[u]<0;)if(r=f[p[u++]],m.push(r.apply(i,a)),n)return n=o,m;for(y=0;_>y;y++)if(r=s[y],"zIndex"in r)if(r.zIndex==p[u]){if(m.push(r.apply(i,a)),n)break;do if(u++,r=f[p[u]],r&&m.push(r.apply(i,a)),n)break;while(r)}else f[r.zIndex]=r;else if(m.push(r.apply(i,a)),n)break;return n=o,e=g,m};d._events=u,d.listeners=function(t){var e,n,i,r,a,l,h,c,d=t.split(o),p=u,f=[p],m=[];for(r=0,a=d.length;a>r;r++){for(c=[],l=0,h=f.length;h>l;l++)for(p=f[l].n,n=[p[d[r]],p[s]],i=2;i--;)e=n[i],e&&(c.push(e),m=m.concat(e.f||[]));f=c}return m},d.on=function(t,e){if(t=String(t),"function"!=typeof e)return function(){};for(var n=t.split(a),i=0,r=n.length;r>i;i++)!function(t){for(var n,i=t.split(o),r=u,a=0,s=i.length;s>a;a++)r=r.n,r=r.hasOwnProperty(i[a])&&r[i[a]]||(r[i[a]]={n:{}});for(r.f=r.f||[],a=0,s=r.f.length;s>a;a++)if(r.f[a]==e){n=!0;break}!n&&r.f.push(e)}(n[i]);return function(t){+t==+t&&(e.zIndex=+t)}},d.f=function(t){var e=[].slice.call(arguments,1);return function(){d.apply(null,[t,null].concat(e).concat([].slice.call(arguments,0)))}},d.stop=function(){n=1},d.nt=function(t){return t?new RegExp("(?:\\.|\\/|^)"+t+"(?:\\.|\\/|$)").test(e):e},d.nts=function(){return e.split(o)},d.off=d.unbind=function(t,e){if(!t)return void(d._events=u={n:{}});var n=t.split(a);if(n.length>1)for(var i=0,l=n.length;l>i;i++)d.off(n[i],e);else{n=t.split(o);var h,c,p,i,l,f,m,g=[u];for(i=0,l=n.length;l>i;i++)for(f=0;f<g.length;f+=p.length-2){if(p=[f,1],h=g[f].n,n[i]!=s)h[n[i]]&&p.push(h[n[i]]);else for(c in h)h[r](c)&&p.push(h[c]);g.splice.apply(g,p)}for(i=0,l=g.length;l>i;i++)for(h=g[i];h.n;){if(e){if(h.f){for(f=0,m=h.f.length;m>f;f++)if(h.f[f]==e){h.f.splice(f,1);break}!h.f.length&&delete h.f}for(c in h.n)if(h.n[r](c)&&h.n[c].f){var y=h.n[c].f;for(f=0,m=y.length;m>f;f++)if(y[f]==e){y.splice(f,1);break}!y.length&&delete h.n[c].f}}else{delete h.f;for(c in h.n)h.n[r](c)&&h.n[c].f&&delete h.n[c].f}h=h.n}}},d.once=function(t,e){var n=function(){return d.unbind(t,n),e.apply(this,arguments)};return d.on(t,n)},d.version=i,d.toString=function(){return"You are running Eve "+i},"undefined"!=typeof module&&module.exports?module.exports=d:"function"==typeof define&&define.amd?define("eve",[],function(){return d}):t.eve=d}(this),function(t,e){"function"==typeof define&&define.amd?define(["eve"],function(n){return e(t,n)}):e(t,t.eve)}(this,function(t,n){var i=function(e){var n={},i=t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(t){setTimeout(t,16)},r=Array.isArray||function(t){return t instanceof Array||"[object Array]"==Object.prototype.toString.call(t)},o=0,a="M"+(+new Date).toString(36),s=function(){return a+(o++).toString(36)},l=Date.now||function(){return+new Date},u=function(t){var e=this;if(null==t)return e.s;var n=e.s-t;e.b+=e.dur*n,e.B+=e.dur*n,e.s=t},h=function(t){var e=this;return null==t?e.spd:void(e.spd=t)},c=function(t){var e=this;return null==t?e.dur:(e.s=e.s*t/e.dur,void(e.dur=t))},d=function(){var t=this;delete n[t.id],t.update(),e("mina.stop."+t.id,t)},p=function(){var t=this;t.pdif||(delete n[t.id],t.update(),t.pdif=t.get()-t.b)},f=function(){var t=this;t.pdif&&(t.b=t.get()-t.pdif,delete t.pdif,n[t.id]=t)},m=function(){var t,e=this;if(r(e.start)){t=[];for(var n=0,i=e.start.length;i>n;n++)t[n]=+e.start[n]+(e.end[n]-e.start[n])*e.easing(e.s)}else t=+e.start+(e.end-e.start)*e.easing(e.s);e.set(t)},g=function(){var t=0;for(var r in n)if(n.hasOwnProperty(r)){var o=n[r],a=o.get();t++,o.s=(a-o.b)/(o.dur/o.spd),o.s>=1&&(delete n[r],o.s=1,t--,function(t){setTimeout(function(){e("mina.finish."+t.id,t)})}(o)),o.update()}t&&i(g)},y=function(t,e,r,o,a,l,_){var v={id:s(),start:t,end:e,b:r,s:0,dur:o-r,spd:1,get:a,set:l,easing:_||y.linear,status:u,speed:h,duration:c,stop:d,pause:p,resume:f,update:m};n[v.id]=v;var b,w=0;for(b in n)if(n.hasOwnProperty(b)&&(w++,2==w))break;return 1==w&&i(g),v};return y.time=l,y.getById=function(t){return n[t]||null},y.linear=function(t){return t},y.easeout=function(t){return Math.pow(t,1.7)},y.easein=function(t){return Math.pow(t,.48)},y.easeinout=function(t){if(1==t)return 1;if(0==t)return 0;var e=.48-t/1.04,n=Math.sqrt(.1734+e*e),i=n-e,r=Math.pow(Math.abs(i),1/3)*(0>i?-1:1),o=-n-e,a=Math.pow(Math.abs(o),1/3)*(0>o?-1:1),s=r+a+.5;return 3*(1-s)*s*s+s*s*s},y.backin=function(t){if(1==t)return 1;var e=1.70158;return t*t*((e+1)*t-e)},y.backout=function(t){if(0==t)return 0;t-=1;var e=1.70158;return t*t*((e+1)*t+e)+1},y.elastic=function(t){return t==!!t?t:Math.pow(2,-10*t)*Math.sin(2*(t-.075)*Math.PI/.3)+1},y.bounce=function(t){var e,n=7.5625,i=2.75;return 1/i>t?e=n*t*t:2/i>t?(t-=1.5/i,e=n*t*t+.75):2.5/i>t?(t-=2.25/i,e=n*t*t+.9375):(t-=2.625/i,e=n*t*t+.984375),e},t.mina=y,y}("undefined"==typeof n?function(){}:n),r=function(){function e(t,n){if(t){if(t.tagName)return M(t);if(o(t,"array")&&e.set)return e.set.apply(e,t);if(t instanceof b)return t;if(null==n)return t=k.doc.querySelector(t),M(t)}return t=null==t?"100%":t,n=null==n?"100%":n,new T(t,n)}function r(t,e){if(e){if("#text"==t&&(t=k.doc.createTextNode(e.text||"")),"string"==typeof t&&(t=r(t)),"string"==typeof e)return"xlink:"==e.substring(0,6)?t.getAttributeNS(X,e.substring(6)):"xml:"==e.substring(0,4)?t.getAttributeNS(q,e.substring(4)):t.getAttribute(e);for(var n in e)if(e[S](n)){var i=C(e[n]);i?"xlink:"==n.substring(0,6)?t.setAttributeNS(X,n.substring(6),i):"xml:"==n.substring(0,4)?t.setAttributeNS(q,n.substring(4),i):t.setAttribute(n,i):t.removeAttribute(n)}}else t=k.doc.createElementNS(q,t);return t}function o(t,e){return e=C.prototype.toLowerCase.call(e),"finite"==e?isFinite(t):"array"==e&&(t instanceof Array||Array.isArray&&Array.isArray(t))?!0:"null"==e&&null===t||e==typeof t&&null!==t||"object"==e&&t===Object(t)||Y.call(t).slice(8,-1).toLowerCase()==e}function a(t){if("function"==typeof t||Object(t)!==t)return t;var e=new t.constructor;for(var n in t)t[S](n)&&(e[n]=a(t[n]));return e}function s(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return t.push(t.splice(n,1)[0])}function l(t,e,n){function i(){var r=Array.prototype.slice.call(arguments,0),o=r.join(""),a=i.cache=i.cache||{},l=i.count=i.count||[];return a[S](o)?(s(l,o),n?n(a[o]):a[o]):(l.length>=1e3&&delete a[l.shift()],l.push(o),a[o]=t.apply(e,r),n?n(a[o]):a[o])}return i}function u(t,e,n,i,r,o){if(null==r){var a=t-n,s=e-i;return a||s?(180+180*D.atan2(-s,-a)/I+360)%360:0}return u(t,e,r,o)-u(n,i,r,o)}function h(t){return t%360*I/180}function c(t){return 180*t/I%360}function d(t){var e=[];return t=t.replace(/(?:^|\s)(\w+)\(([^)]+)\)/g,function(t,n,i){return i=i.split(/\s*,\s*|\s+/),"rotate"==n&&1==i.length&&i.push(0,0),"scale"==n&&(i.length>2?i=i.slice(0,2):2==i.length&&i.push(0,0),1==i.length&&i.push(i[0],0,0)),e.push("skewX"==n?["m",1,0,D.tan(h(i[0])),1,0,0]:"skewY"==n?["m",1,D.tan(h(i[0])),0,1,0,0]:[n.charAt(0)].concat(i)),t}),e}function p(t,n){var i=re(t),r=new e.Matrix;if(i)for(var o=0,a=i.length;a>o;o++){var s,l,u,h,c,d=i[o],p=d.length,f=C(d[0]).toLowerCase(),m=d[0]!=f,g=m?r.invert():0;"t"==f&&2==p?r.translate(d[1],0):"t"==f&&3==p?m?(s=g.x(0,0),l=g.y(0,0),u=g.x(d[1],d[2]),h=g.y(d[1],d[2]),r.translate(u-s,h-l)):r.translate(d[1],d[2]):"r"==f?2==p?(c=c||n,r.rotate(d[1],c.x+c.width/2,c.y+c.height/2)):4==p&&(m?(u=g.x(d[2],d[3]),h=g.y(d[2],d[3]),r.rotate(d[1],u,h)):r.rotate(d[1],d[2],d[3])):"s"==f?2==p||3==p?(c=c||n,r.scale(d[1],d[p-1],c.x+c.width/2,c.y+c.height/2)):4==p?m?(u=g.x(d[2],d[3]),h=g.y(d[2],d[3]),r.scale(d[1],d[1],u,h)):r.scale(d[1],d[1],d[2],d[3]):5==p&&(m?(u=g.x(d[3],d[4]),h=g.y(d[3],d[4]),r.scale(d[1],d[2],u,h)):r.scale(d[1],d[2],d[3],d[4])):"m"==f&&7==p&&r.add(d[1],d[2],d[3],d[4],d[5],d[6])}return r}function f(t,n){if(null==n){var i=!0;if(n=t.node.getAttribute("linearGradient"==t.type||"radialGradient"==t.type?"gradientTransform":"pattern"==t.type?"patternTransform":"transform"),!n)return new e.Matrix;n=d(n)}else n=e._.rgTransform.test(n)?C(n).replace(/\.{3}|\u2026/g,t._.transform||R):d(n),o(n,"array")&&(n=e.path?e.path.toString.call(n):C(n)),t._.transform=n;var r=p(n,t.getBBox(1));return i?r:void(t.matrix=r)}function m(t){var n=t.node.ownerSVGElement&&M(t.node.ownerSVGElement)||t.node.parentNode&&M(t.node.parentNode)||e.select("svg")||e(0,0),i=n.select("defs"),r=null==i?!1:i.node;return r||(r=x("defs",n.node).node),r}function y(t){return t.node.ownerSVGElement&&M(t.node.ownerSVGElement)||e.select("svg")}function _(t,e,n){function i(t){if(null==t)return R;if(t==+t)return t;r(u,{width:t});try{return u.getBBox().width}catch(e){return 0}}function o(t){if(null==t)return R;if(t==+t)return t;r(u,{height:t});try{return u.getBBox().height}catch(e){return 0}}function a(i,r){null==e?l[i]=r(t.attr(i)||0):i==e&&(l=r(null==n?t.attr(i)||0:n))}var s=y(t).node,l={},u=s.querySelector(".svg---mgr");switch(u||(u=r("rect"),r(u,{x:-9e9,y:-9e9,width:10,height:10,"class":"svg---mgr",fill:"none"}),s.appendChild(u)),t.type){case"rect":a("rx",i),a("ry",o);case"image":a("width",i),a("height",o);case"text":a("x",i),a("y",o);break;case"circle":a("cx",i),a("cy",o),a("r",i);break;case"ellipse":a("cx",i),a("cy",o),a("rx",i),a("ry",o);break;case"line":a("x1",i),a("x2",i),a("y1",o),a("y2",o);break;case"marker":a("refX",i),a("markerWidth",i),a("refY",o),a("markerHeight",o);break;case"radialGradient":a("fx",i),a("fy",o);break;case"tspan":a("dx",i),a("dy",o);break;default:a(e,i)}return s.removeChild(u),l}function v(t){o(t,"array")||(t=Array.prototype.slice.call(arguments,0));for(var e=0,n=0,i=this.node;this[e];)delete this[e++];for(e=0;e<t.length;e++)"set"==t[e].type?t[e].forEach(function(t){i.appendChild(t.node)}):i.appendChild(t[e].node);var r=i.childNodes;for(e=0;e<r.length;e++)this[n++]=M(r[e]);return this}function b(t){if(t.snap in K)return K[t.snap];var e,n=this.id=$();try{e=t.ownerSVGElement}catch(i){}if(this.node=t,e&&(this.paper=new T(e)),this.type=t.tagName,this.anims={},this._={transform:[]},t.snap=n,K[n]=this,"g"==this.type&&(this.add=v),this.type in{g:1,mask:1,pattern:1})for(var r in T.prototype)T.prototype[S](r)&&(this[r]=T.prototype[r])}function w(t){this.node=t}function x(t,e){var n=r(t);e.appendChild(n);var i=M(n);return i}function T(t,e){var n,i,o,a=T.prototype;if(t&&"svg"==t.tagName){if(t.snap in K)return K[t.snap];var s=t.ownerDocument;n=new b(t),i=t.getElementsByTagName("desc")[0],o=t.getElementsByTagName("defs")[0],i||(i=r("desc"),i.appendChild(s.createTextNode("Created with Snap")),n.node.appendChild(i)),o||(o=r("defs"),n.node.appendChild(o)),n.defs=o;for(var l in a)a[S](l)&&(n[l]=a[l]);n.paper=n.root=n}else n=x("svg",k.doc.body),r(n.node,{height:e,version:1.1,width:t,xmlns:q});return n}function M(t){return t?t instanceof b||t instanceof w?t:t.tagName&&"svg"==t.tagName.toLowerCase()?new T(t):t.tagName&&"object"==t.tagName.toLowerCase()&&"image/svg+xml"==t.type?new T(t.contentDocument.getElementsByTagName("svg")[0]):new b(t):t}e.version="0.3.0",e.toString=function(){return"Snap v"+this.version},e._={};var k={win:t,doc:t.document};e._.glob=k;var S="hasOwnProperty",C=String,L=parseFloat,P=parseInt,D=Math,A=D.max,E=D.min,O=D.abs,I=(D.pow,D.PI),R=(D.round,""),N=" ",Y=Object.prototype.toString,F=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?%?)\s*\))\s*$/i,j="	\n\f\r \u2028\u2029",B=(e._.separator=new RegExp("[,"+j+"]+"),new RegExp("["+j+"]","g"),new RegExp("["+j+"]*,["+j+"]*")),U={hs:1,rg:1},H=new RegExp("([a-z])["+j+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+j+"]*,?["+j+"]*)+)","ig"),G=new RegExp("([rstm])["+j+",]*((-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?["+j+"]*,?["+j+"]*)+)","ig"),W=new RegExp("(-?\\d*\\.?\\d*(?:e[\\-+]?\\d+)?)["+j+"]*,?["+j+"]*","ig"),z=0,V="S"+(+new Date).toString(36),$=function(){return V+(z++).toString(36)},X="http://www.w3.org/1999/xlink",q="http://www.w3.org/2000/svg",K={},J=e.url=function(t){return"url('#"+t+"')"};e._.$=r,e._.id=$,e.format=function(){var t=/\{([^\}]+)\}/g,e=/(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g,n=function(t,n,i){var r=i;return n.replace(e,function(t,e,n,i,o){e=e||i,r&&(e in r&&(r=r[e]),"function"==typeof r&&o&&(r=r()))}),r=(null==r||r==i?t:r)+""};return function(e,i){return C(e).replace(t,function(t,e){return n(t,e,i)})}}(),e._.clone=a,e._.cacher=l,e.rad=h,e.deg=c,e.angle=u,e.is=o,e.snapTo=function(t,e,n){if(n=o(n,"finite")?n:10,o(t,"array")){for(var i=t.length;i--;)if(O(t[i]-e)<=n)return t[i]}else{t=+t;var r=e%t;if(n>r)return e-r;if(r>t-n)return e-r+t}return e},e.getRGB=l(function(t){if(!t||(t=C(t)).indexOf("-")+1)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee};if("none"==t)return{r:-1,g:-1,b:-1,hex:"none",toString:ee};if(!(U[S](t.toLowerCase().substring(0,2))||"#"==t.charAt())&&(t=Q(t)),!t)return{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee};var n,i,r,a,s,l,u=t.match(F);return u?(u[2]&&(r=P(u[2].substring(5),16),i=P(u[2].substring(3,5),16),n=P(u[2].substring(1,3),16)),u[3]&&(r=P((s=u[3].charAt(3))+s,16),i=P((s=u[3].charAt(2))+s,16),n=P((s=u[3].charAt(1))+s,16)),u[4]&&(l=u[4].split(B),n=L(l[0]),"%"==l[0].slice(-1)&&(n*=2.55),i=L(l[1]),"%"==l[1].slice(-1)&&(i*=2.55),r=L(l[2]),"%"==l[2].slice(-1)&&(r*=2.55),"rgba"==u[1].toLowerCase().slice(0,4)&&(a=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100)),u[5]?(l=u[5].split(B),n=L(l[0]),"%"==l[0].slice(-1)&&(n/=100),i=L(l[1]),"%"==l[1].slice(-1)&&(i/=100),r=L(l[2]),"%"==l[2].slice(-1)&&(r/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(n/=360),"hsba"==u[1].toLowerCase().slice(0,4)&&(a=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),e.hsb2rgb(n,i,r,a)):u[6]?(l=u[6].split(B),n=L(l[0]),"%"==l[0].slice(-1)&&(n/=100),i=L(l[1]),"%"==l[1].slice(-1)&&(i/=100),r=L(l[2]),"%"==l[2].slice(-1)&&(r/=100),("deg"==l[0].slice(-3)||""==l[0].slice(-1))&&(n/=360),"hsla"==u[1].toLowerCase().slice(0,4)&&(a=L(l[3])),l[3]&&"%"==l[3].slice(-1)&&(a/=100),e.hsl2rgb(n,i,r,a)):(n=E(D.round(n),255),i=E(D.round(i),255),r=E(D.round(r),255),a=E(A(a,0),1),u={r:n,g:i,b:r,toString:ee},u.hex="#"+(16777216|r|i<<8|n<<16).toString(16).slice(1),u.opacity=o(a,"finite")?a:1,u)):{r:-1,g:-1,b:-1,hex:"none",error:1,toString:ee}},e),e.hsb=l(function(t,n,i){return e.hsb2rgb(t,n,i).hex}),e.hsl=l(function(t,n,i){return e.hsl2rgb(t,n,i).hex}),e.rgb=l(function(t,e,n,i){if(o(i,"finite")){var r=D.round;return"rgba("+[r(t),r(e),r(n),+i.toFixed(2)]+")"}return"#"+(16777216|n|e<<8|t<<16).toString(16).slice(1)});var Q=function(t){var e=k.doc.getElementsByTagName("head")[0]||k.doc.getElementsByTagName("svg")[0],n="rgb(255, 0, 0)";return(Q=l(function(t){if("red"==t.toLowerCase())return n;e.style.color=n,e.style.color=t;var i=k.doc.defaultView.getComputedStyle(e,R).getPropertyValue("color");return i==n?null:i}))(t)},Z=function(){return"hsb("+[this.h,this.s,this.b]+")"},te=function(){return"hsl("+[this.h,this.s,this.l]+")"},ee=function(){return 1==this.opacity||null==this.opacity?this.hex:"rgba("+[this.r,this.g,this.b,this.opacity]+")"},ne=function(t,n,i){if(null==n&&o(t,"object")&&"r"in t&&"g"in t&&"b"in t&&(i=t.b,n=t.g,t=t.r),null==n&&o(t,string)){var r=e.getRGB(t);t=r.r,n=r.g,i=r.b}return(t>1||n>1||i>1)&&(t/=255,n/=255,i/=255),[t,n,i]},ie=function(t,n,i,r){t=D.round(255*t),n=D.round(255*n),i=D.round(255*i);var a={r:t,g:n,b:i,opacity:o(r,"finite")?r:1,hex:e.rgb(t,n,i),toString:ee};return o(r,"finite")&&(a.opacity=r),a};e.color=function(t){var n;return o(t,"object")&&"h"in t&&"s"in t&&"b"in t?(n=e.hsb2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):o(t,"object")&&"h"in t&&"s"in t&&"l"in t?(n=e.hsl2rgb(t),t.r=n.r,t.g=n.g,t.b=n.b,t.opacity=1,t.hex=n.hex):(o(t,"string")&&(t=e.getRGB(t)),o(t,"object")&&"r"in t&&"g"in t&&"b"in t&&!("error"in t)?(n=e.rgb2hsl(t),t.h=n.h,t.s=n.s,t.l=n.l,n=e.rgb2hsb(t),t.v=n.b):(t={hex:"none"},t.r=t.g=t.b=t.h=t.s=t.v=t.l=-1,t.error=1)),t.toString=ee,t},e.hsb2rgb=function(t,e,n,i){o(t,"object")&&"h"in t&&"s"in t&&"b"in t&&(n=t.b,e=t.s,t=t.h,i=t.o),t*=360;var r,a,s,l,u;return t=t%360/60,u=n*e,l=u*(1-O(t%2-1)),r=a=s=n-u,t=~~t,r+=[u,l,0,0,l,u][t],a+=[l,u,u,l,0,0][t],s+=[0,0,l,u,u,l][t],ie(r,a,s,i)},e.hsl2rgb=function(t,e,n,i){o(t,"object")&&"h"in t&&"s"in t&&"l"in t&&(n=t.l,e=t.s,t=t.h),(t>1||e>1||n>1)&&(t/=360,e/=100,n/=100),t*=360;var r,a,s,l,u;return t=t%360/60,u=2*e*(.5>n?n:1-n),l=u*(1-O(t%2-1)),r=a=s=n-u/2,t=~~t,r+=[u,l,0,0,l,u][t],a+=[l,u,u,l,0,0][t],s+=[0,0,l,u,u,l][t],ie(r,a,s,i)},e.rgb2hsb=function(t,e,n){n=ne(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,a;return o=A(t,e,n),a=o-E(t,e,n),i=0==a?null:o==t?(e-n)/a:o==e?(n-t)/a+2:(t-e)/a+4,i=(i+360)%6*60/360,r=0==a?0:a/o,{h:i,s:r,b:o,toString:Z}},e.rgb2hsl=function(t,e,n){n=ne(t,e,n),t=n[0],e=n[1],n=n[2];var i,r,o,a,s,l;return a=A(t,e,n),s=E(t,e,n),l=a-s,i=0==l?null:a==t?(e-n)/l:a==e?(n-t)/l+2:(t-e)/l+4,i=(i+360)%6*60/360,o=(a+s)/2,r=0==l?0:.5>o?l/(2*o):l/(2-2*o),{h:i,s:r,l:o,toString:te}},e.parsePathString=function(t){if(!t)return null;var n=e.path(t);if(n.arr)return e.path.clone(n.arr);var i={a:7,c:6,o:2,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,u:3,z:0},r=[];return o(t,"array")&&o(t[0],"array")&&(r=e.path.clone(t)),r.length||C(t).replace(H,function(t,e,n){var o=[],a=e.toLowerCase();if(n.replace(W,function(t,e){e&&o.push(+e)}),"m"==a&&o.length>2&&(r.push([e].concat(o.splice(0,2))),a="l",e="m"==e?"l":"L"),"o"==a&&1==o.length&&r.push([e,o[0]]),"r"==a)r.push([e].concat(o));else for(;o.length>=i[a]&&(r.push([e].concat(o.splice(0,i[a]))),i[a]););}),r.toString=e.path.toString,n.arr=e.path.clone(r),r};var re=e.parseTransformString=function(t){if(!t)return null;var n=[];return o(t,"array")&&o(t[0],"array")&&(n=e.path.clone(t)),n.length||C(t).replace(G,function(t,e,i){{var r=[];e.toLowerCase()}i.replace(W,function(t,e){e&&r.push(+e)}),n.push([e].concat(r))}),n.toString=e.path.toString,n};e._.svgTransform2string=d,e._.rgTransform=new RegExp("^[a-z]["+j+"]*-?\\.?\\d","i"),e._.transform2matrix=p,e._unit2px=_;k.doc.contains||k.doc.compareDocumentPosition?function(t,e){var n=9==t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t==i||!(!i||1!=i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e;)if(e=e.parentNode,e==t)return!0;return!1};e._.getSomeDefs=m,e._.getSomeSVG=y,e.select=function(t){return M(k.doc.querySelector(t))},e.selectAll=function(t){for(var n=k.doc.querySelectorAll(t),i=(e.set||Array)(),r=0;r<n.length;r++)i.push(M(n[r]));return i},setInterval(function(){for(var t in K)if(K[S](t)){var e=K[t],n=e.node;("svg"!=e.type&&!n.ownerSVGElement||"svg"==e.type&&(!n.parentNode||"ownerSVGElement"in n.parentNode&&!n.ownerSVGElement))&&delete K[t]}},1e4),function(t){function a(t){function e(t,e){var n=r(t.node,e);n=n&&n.match(a),n=n&&n[2],n&&"#"==n.charAt()&&(n=n.substring(1),n&&(l[n]=(l[n]||[]).concat(function(n){var i={};i[e]=J(n),r(t.node,i)})))}function n(t){var e=r(t.node,"xlink:href");e&&"#"==e.charAt()&&(e=e.substring(1),e&&(l[e]=(l[e]||[]).concat(function(e){t.attr("xlink:href","#"+e)})))}for(var i,o=t.selectAll("*"),a=/^\s*url\(("|'|)(.*)\1\)\s*$/,s=[],l={},u=0,h=o.length;h>u;u++){i=o[u],e(i,"fill"),e(i,"stroke"),e(i,"filter"),e(i,"mask"),e(i,"clip-path"),n(i);var c=r(i.node,"id");c&&(r(i.node,{id:i.id}),s.push({old:c,id:i.id}))}for(u=0,h=s.length;h>u;u++){var d=l[s[u].old];if(d)for(var p=0,f=d.length;f>p;p++)d[p](s[u].id)}}function s(t,e,n){return function(i){var r=i.slice(t,e);return 1==r.length&&(r=r[0]),n?n(r):r}}function l(t){return function(){var e=t?"<"+this.type:"",n=this.node.attributes,i=this.node.childNodes;if(t)for(var r=0,o=n.length;o>r;r++)e+=" "+n[r].name+'="'+n[r].value.replace(/"/g,'\\"')+'"';if(i.length){for(t&&(e+=">"),r=0,o=i.length;o>r;r++)3==i[r].nodeType?e+=i[r].nodeValue:1==i[r].nodeType&&(e+=M(i[r]).toString());t&&(e+="</"+this.type+">")}else t&&(e+="/>");return e}}t.attr=function(t,e){{var i=this;i.node}if(!t)return i;if(o(t,"string")){if(!(arguments.length>1))return n("snap.util.getattr."+t,i).firstDefined();var r={};r[t]=e,t=r}for(var a in t)t[S](a)&&n("snap.util.attr."+a,i,t[a]);return i},t.getBBox=function(t){if(!e.Matrix||!e.path)return this.node.getBBox();var n=this,i=new e.Matrix;if(n.removed)return e._.box();for(;"use"==n.type;)if(t||(i=i.add(n.transform().localMatrix.translate(n.attr("x")||0,n.attr("y")||0))),n.original)n=n.original;else{var r=n.attr("xlink:href");n=n.original=n.node.ownerDocument.getElementById(r.substring(r.indexOf("#")+1))}var o=n._,a=e.path.get[n.type]||e.path.get.deflt;try{return t?(o.bboxwt=a?e.path.getBBox(n.realPath=a(n)):e._.box(n.node.getBBox()),e._.box(o.bboxwt)):(n.realPath=a(n),n.matrix=n.transform().localMatrix,o.bbox=e.path.getBBox(e.path.map(n.realPath,i.add(n.matrix))),e._.box(o.bbox))}catch(s){return e._.box()}};var u=function(){return this.string};t.transform=function(t){var n=this._;if(null==t){for(var i,o=this,a=new e.Matrix(this.node.getCTM()),s=f(this),l=[s],h=new e.Matrix,c=s.toTransformString(),d=C(s)==C(this.matrix)?C(n.transform):c;"svg"!=o.type&&(o=o.parent());)l.push(f(o));for(i=l.length;i--;)h.add(l[i]);return{string:d,globalMatrix:a,totalMatrix:h,localMatrix:s,diffMatrix:a.clone().add(s.invert()),global:a.toTransformString(),total:h.toTransformString(),local:c,toString:u}}return t instanceof e.Matrix?this.matrix=t:f(this,t),this.node&&("linearGradient"==this.type||"radialGradient"==this.type?r(this.node,{gradientTransform:this.matrix}):"pattern"==this.type?r(this.node,{patternTransform:this.matrix}):r(this.node,{transform:this.matrix})),this},t.parent=function(){return M(this.node.parentNode)},t.append=t.add=function(t){if(t){if("set"==t.type){var e=this;return t.forEach(function(t){e.add(t)}),this}t=M(t),this.node.appendChild(t.node),t.paper=this.paper}return this},t.appendTo=function(t){return t&&(t=M(t),t.append(this)),this},t.prepend=function(t){if(t){if("set"==t.type){var e,n=this;return t.forEach(function(t){e?e.after(t):n.prepend(t),e=t}),this}t=M(t);var i=t.parent();this.node.insertBefore(t.node,this.node.firstChild),this.add&&this.add(),t.paper=this.paper,this.parent()&&this.parent().add(),i&&i.add()}return this},t.prependTo=function(t){return t=M(t),t.prepend(this),this},t.before=function(t){if("set"==t.type){var e=this;return t.forEach(function(t){var n=t.parent();e.node.parentNode.insertBefore(t.node,e.node),n&&n.add()}),this.parent().add(),this}t=M(t);var n=t.parent();return this.node.parentNode.insertBefore(t.node,this.node),this.parent()&&this.parent().add(),n&&n.add(),t.paper=this.paper,this},t.after=function(t){t=M(t);var e=t.parent();return this.node.nextSibling?this.node.parentNode.insertBefore(t.node,this.node.nextSibling):this.node.parentNode.appendChild(t.node),this.parent()&&this.parent().add(),e&&e.add(),t.paper=this.paper,this},t.insertBefore=function(t){t=M(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},t.insertAfter=function(t){t=M(t);var e=this.parent();return t.node.parentNode.insertBefore(this.node,t.node.nextSibling),this.paper=t.paper,e&&e.add(),t.parent()&&t.parent().add(),this},t.remove=function(){var t=this.parent();return this.node.parentNode&&this.node.parentNode.removeChild(this.node),delete this.paper,this.removed=!0,t&&t.add(),this},t.select=function(t){return M(this.node.querySelector(t))},t.selectAll=function(t){for(var n=this.node.querySelectorAll(t),i=(e.set||Array)(),r=0;r<n.length;r++)i.push(M(n[r]));return i},t.asPX=function(t,e){return null==e&&(e=this.attr(t)),+_(this,t,e)},t.use=function(){var t,e=this.node.id;return e||(e=this.id,r(this.node,{id:e})),t="linearGradient"==this.type||"radialGradient"==this.type||"pattern"==this.type?x(this.type,this.node.parentNode):x("use",this.node.parentNode),r(t.node,{"xlink:href":"#"+e}),t.original=this,t};var h=/\S+/g;t.addClass=function(t){var e,n,i,r,o=(t||"").match(h)||[],a=this.node,s=a.className.baseVal,l=s.match(h)||[];if(o.length){for(e=0;i=o[e++];)n=l.indexOf(i),~n||l.push(i);r=l.join(" "),s!=r&&(a.className.baseVal=r)}return this},t.removeClass=function(t){var e,n,i,r,o=(t||"").match(h)||[],a=this.node,s=a.className.baseVal,l=s.match(h)||[];if(l.length){for(e=0;i=o[e++];)n=l.indexOf(i),~n&&l.splice(n,1);r=l.join(" "),s!=r&&(a.className.baseVal=r)}return this},t.hasClass=function(t){var e=this.node,n=e.className.baseVal,i=n.match(h)||[];return!!~i.indexOf(t)},t.toggleClass=function(t,e){if(null!=e)return e?this.addClass(t):this.removeClass(t);var n,i,r,o,a=(t||"").match(h)||[],s=this.node,l=s.className.baseVal,u=l.match(h)||[];for(n=0;r=a[n++];)i=u.indexOf(r),~i?u.splice(i,1):u.push(r);return o=u.join(" "),l!=o&&(s.className.baseVal=o),this},t.clone=function(){var t=M(this.node.cloneNode(!0));return r(t.node,"id")&&r(t.node,{id:t.id}),a(t),t.insertAfter(this),t},t.toDefs=function(){var t=m(this);return t.appendChild(this.node),this},t.pattern=t.toPattern=function(t,e,n,i){var a=x("pattern",m(this));return null==t&&(t=this.getBBox()),o(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,t=t.x),r(a.node,{x:t,y:e,width:n,height:i,patternUnits:"userSpaceOnUse",id:a.id,viewBox:[t,e,n,i].join(" ")}),a.node.appendChild(this.node),a},t.marker=function(t,e,n,i,a,s){var l=x("marker",m(this));return null==t&&(t=this.getBBox()),o(t,"object")&&"x"in t&&(e=t.y,n=t.width,i=t.height,a=t.refX||t.cx,s=t.refY||t.cy,t=t.x),r(l.node,{viewBox:[t,e,n,i].join(N),markerWidth:n,markerHeight:i,orient:"auto",refX:a||0,refY:s||0,id:l.id}),l.node.appendChild(this.node),l};var c=function(t,e,n,r){"function"!=typeof n||n.length||(r=n,n=i.linear),this.attr=t,this.dur=e,n&&(this.easing=n),r&&(this.callback=r)};e._.Animation=c,e.animation=function(t,e,n,i){return new c(t,e,n,i)},t.inAnim=function(){var t=this,e=[];for(var n in t.anims)t.anims[S](n)&&!function(t){e.push({anim:new c(t._attrs,t.dur,t.easing,t._callback),mina:t,curStatus:t.status(),status:function(e){return t.status(e)},stop:function(){t.stop()}})}(t.anims[n]);return e},e.animate=function(t,e,r,o,a,s){"function"!=typeof a||a.length||(s=a,a=i.linear);var l=i.time(),u=i(t,e,l,l+o,i.time,r,a);return s&&n.once("mina.finish."+u.id,s),u},t.stop=function(){for(var t=this.inAnim(),e=0,n=t.length;n>e;e++)t[e].stop();return this},t.animate=function(t,e,r,a){"function"!=typeof r||r.length||(a=r,r=i.linear),t instanceof c&&(a=t.callback,r=t.easing,e=r.dur,t=t.attr);var l,u,h,d,p=[],f=[],m={},g=this;for(var y in t)if(t[S](y)){g.equal?(d=g.equal(y,C(t[y])),l=d.from,u=d.to,h=d.f):(l=+g.attr(y),u=+t[y]);var _=o(l,"array")?l.length:1;m[y]=s(p.length,p.length+_,h),p=p.concat(l),f=f.concat(u)}var v=i.time(),b=i(p,f,v,v+e,i.time,function(t){var e={};for(var n in m)m[S](n)&&(e[n]=m[n](t));g.attr(e)},r);return g.anims[b.id]=b,b._attrs=t,b._callback=a,n("snap.animcreated."+g.id,b),n.once("mina.finish."+b.id,function(){delete g.anims[b.id],a&&a.call(g)}),n.once("mina.stop."+b.id,function(){delete g.anims[b.id]}),g};var d={};t.data=function(t,i){var r=d[this.id]=d[this.id]||{};if(0==arguments.length)return n("snap.data.get."+this.id,this,r,null),r;if(1==arguments.length){if(e.is(t,"object")){for(var o in t)t[S](o)&&this.data(o,t[o]);return this}return n("snap.data.get."+this.id,this,r[t],t),r[t]}return r[t]=i,n("snap.data.set."+this.id,this,i,t),this},t.removeData=function(t){return null==t?d[this.id]={}:d[this.id]&&delete d[this.id][t],this},t.outerSVG=t.toString=l(1),t.innerSVG=l()}(b.prototype),e.parse=function(t){var e=k.doc.createDocumentFragment(),n=!0,i=k.doc.createElement("div");if(t=C(t),t.match(/^\s*<\s*svg(?:\s|>)/)||(t="<svg>"+t+"</svg>",n=!1),i.innerHTML=t,t=i.getElementsByTagName("svg")[0])if(n)e=t;else for(;t.firstChild;)e.appendChild(t.firstChild);return i.innerHTML=R,new w(e)},w.prototype.select=b.prototype.select,w.prototype.selectAll=b.prototype.selectAll,e.fragment=function(){for(var t=Array.prototype.slice.call(arguments,0),n=k.doc.createDocumentFragment(),i=0,r=t.length;r>i;i++){var o=t[i];o.node&&o.node.nodeType&&n.appendChild(o.node),o.nodeType&&n.appendChild(o),"string"==typeof o&&n.appendChild(e.parse(o).node)}return new w(n)},e._.make=x,e._.wrap=M,T.prototype.el=function(t,e){var n=x(t,this.node);return e&&n.attr(e),n},n.on("snap.util.getattr",function(){var t=n.nt();t=t.substring(t.lastIndexOf(".")+1);var e=t.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});return oe[S](e)?this.node.ownerDocument.defaultView.getComputedStyle(this.node,null).getPropertyValue(e):r(this.node,t)});var oe={"alignment-baseline":0,"baseline-shift":0,clip:0,"clip-path":0,"clip-rule":0,color:0,"color-interpolation":0,"color-interpolation-filters":0,"color-profile":0,"color-rendering":0,cursor:0,direction:0,display:0,"dominant-baseline":0,"enable-background":0,fill:0,"fill-opacity":0,"fill-rule":0,filter:0,"flood-color":0,"flood-opacity":0,font:0,"font-family":0,"font-size":0,"font-size-adjust":0,"font-stretch":0,"font-style":0,"font-variant":0,"font-weight":0,"glyph-orientation-horizontal":0,"glyph-orientation-vertical":0,"image-rendering":0,kerning:0,"letter-spacing":0,"lighting-color":0,marker:0,"marker-end":0,"marker-mid":0,"marker-start":0,mask:0,opacity:0,overflow:0,"pointer-events":0,"shape-rendering":0,"stop-color":0,"stop-opacity":0,stroke:0,"stroke-dasharray":0,"stroke-dashoffset":0,"stroke-linecap":0,"stroke-linejoin":0,"stroke-miterlimit":0,"stroke-opacity":0,"stroke-width":0,"text-anchor":0,"text-decoration":0,"text-rendering":0,"unicode-bidi":0,visibility:0,"word-spacing":0,"writing-mode":0};
n.on("snap.util.attr",function(t){var e=n.nt(),i={};e=e.substring(e.lastIndexOf(".")+1),i[e]=t;var o=e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()}),a=e.replace(/[A-Z]/g,function(t){return"-"+t.toLowerCase()});oe[S](a)?this.node.style[o]=null==t?R:t:r(this.node,i)}),function(){}(T.prototype),e.ajax=function(t,e,i,r){var a=new XMLHttpRequest,s=$();if(a){if(o(e,"function"))r=i,i=e,e=null;else if(o(e,"object")){var l=[];for(var u in e)e.hasOwnProperty(u)&&l.push(encodeURIComponent(u)+"="+encodeURIComponent(e[u]));e=l.join("&")}return a.open(e?"POST":"GET",t,!0),e&&(a.setRequestHeader("X-Requested-With","XMLHttpRequest"),a.setRequestHeader("Content-type","application/x-www-form-urlencoded")),i&&(n.once("snap.ajax."+s+".0",i),n.once("snap.ajax."+s+".200",i),n.once("snap.ajax."+s+".304",i)),a.onreadystatechange=function(){4==a.readyState&&n("snap.ajax."+s+"."+a.status,r,a)},4==a.readyState?a:(a.send(e),a)}},e.load=function(t,n,i){e.ajax(t,function(t){var r=e.parse(t.responseText);i?n.call(i,r):n(r)})};var ae=function(t){var e=t.getBoundingClientRect(),n=t.ownerDocument,i=n.body,r=n.documentElement,o=r.clientTop||i.clientTop||0,a=r.clientLeft||i.clientLeft||0,s=e.top+(g.win.pageYOffset||r.scrollTop||i.scrollTop)-o,l=e.left+(g.win.pageXOffset||r.scrollLeft||i.scrollLeft)-a;return{y:s,x:l}};return e.getElementByPoint=function(t,e){var n=this,i=(n.canvas,k.doc.elementFromPoint(t,e));if(k.win.opera&&"svg"==i.tagName){var r=ae(i),o=i.createSVGRect();o.x=t-r.x,o.y=e-r.y,o.width=o.height=1;var a=i.getIntersectionList(o,null);a.length&&(i=a[a.length-1])}return i?M(i):null},e.plugin=function(t){t(e,b,T,k,w)},k.win.Snap=e,e}();return r.plugin(function(t){function e(t,e,i,r,o,a){return null==e&&"[object SVGMatrix]"==n.call(t)?(this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.e=t.e,void(this.f=t.f)):void(null!=t?(this.a=+t,this.b=+e,this.c=+i,this.d=+r,this.e=+o,this.f=+a):(this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0))}var n=Object.prototype.toString,i=String,r=Math,o="";!function(n){function a(t){return t[0]*t[0]+t[1]*t[1]}function s(t){var e=r.sqrt(a(t));t[0]&&(t[0]/=e),t[1]&&(t[1]/=e)}n.add=function(t,n,i,r,o,a){var s,l,u,h,c=[[],[],[]],d=[[this.a,this.c,this.e],[this.b,this.d,this.f],[0,0,1]],p=[[t,i,o],[n,r,a],[0,0,1]];for(t&&t instanceof e&&(p=[[t.a,t.c,t.e],[t.b,t.d,t.f],[0,0,1]]),s=0;3>s;s++)for(l=0;3>l;l++){for(h=0,u=0;3>u;u++)h+=d[s][u]*p[u][l];c[s][l]=h}return this.a=c[0][0],this.b=c[1][0],this.c=c[0][1],this.d=c[1][1],this.e=c[0][2],this.f=c[1][2],this},n.invert=function(){var t=this,n=t.a*t.d-t.b*t.c;return new e(t.d/n,-t.b/n,-t.c/n,t.a/n,(t.c*t.f-t.d*t.e)/n,(t.b*t.e-t.a*t.f)/n)},n.clone=function(){return new e(this.a,this.b,this.c,this.d,this.e,this.f)},n.translate=function(t,e){return this.add(1,0,0,1,t,e)},n.scale=function(t,e,n,i){return null==e&&(e=t),(n||i)&&this.add(1,0,0,1,n,i),this.add(t,0,0,e,0,0),(n||i)&&this.add(1,0,0,1,-n,-i),this},n.rotate=function(e,n,i){e=t.rad(e),n=n||0,i=i||0;var o=+r.cos(e).toFixed(9),a=+r.sin(e).toFixed(9);return this.add(o,a,-a,o,n,i),this.add(1,0,0,1,-n,-i)},n.x=function(t,e){return t*this.a+e*this.c+this.e},n.y=function(t,e){return t*this.b+e*this.d+this.f},n.get=function(t){return+this[i.fromCharCode(97+t)].toFixed(4)},n.toString=function(){return"matrix("+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)].join()+")"},n.offset=function(){return[this.e.toFixed(4),this.f.toFixed(4)]},n.determinant=function(){return this.a*this.d-this.b*this.c},n.split=function(){var e={};e.dx=this.e,e.dy=this.f;var n=[[this.a,this.c],[this.b,this.d]];e.scalex=r.sqrt(a(n[0])),s(n[0]),e.shear=n[0][0]*n[1][0]+n[0][1]*n[1][1],n[1]=[n[1][0]-n[0][0]*e.shear,n[1][1]-n[0][1]*e.shear],e.scaley=r.sqrt(a(n[1])),s(n[1]),e.shear/=e.scaley,this.determinant()<0&&(e.scalex=-e.scalex);var i=-n[0][1],o=n[1][1];return 0>o?(e.rotate=t.deg(r.acos(o)),0>i&&(e.rotate=360-e.rotate)):e.rotate=t.deg(r.asin(i)),e.isSimple=!(+e.shear.toFixed(9)||e.scalex.toFixed(9)!=e.scaley.toFixed(9)&&e.rotate),e.isSuperSimple=!+e.shear.toFixed(9)&&e.scalex.toFixed(9)==e.scaley.toFixed(9)&&!e.rotate,e.noRotation=!+e.shear.toFixed(9)&&!e.rotate,e},n.toTransformString=function(t){var e=t||this.split();return+e.shear.toFixed(9)?"m"+[this.get(0),this.get(1),this.get(2),this.get(3),this.get(4),this.get(5)]:(e.scalex=+e.scalex.toFixed(4),e.scaley=+e.scaley.toFixed(4),e.rotate=+e.rotate.toFixed(4),(e.dx||e.dy?"t"+[+e.dx.toFixed(4),+e.dy.toFixed(4)]:o)+(1!=e.scalex||1!=e.scaley?"s"+[e.scalex,e.scaley,0,0]:o)+(e.rotate?"r"+[+e.rotate.toFixed(4),0,0]:o))}}(e.prototype),t.Matrix=e,t.matrix=function(t,n,i,r,o,a){return new e(t,n,i,r,o,a)}}),r.plugin(function(t,e,i,r,o){function a(i){return function(r){if(n.stop(),r instanceof o&&1==r.node.childNodes.length&&("radialGradient"==r.node.firstChild.tagName||"linearGradient"==r.node.firstChild.tagName||"pattern"==r.node.firstChild.tagName)&&(r=r.node.firstChild,p(this).appendChild(r),r=c(r)),r instanceof e)if("radialGradient"==r.type||"linearGradient"==r.type||"pattern"==r.type){r.node.id||m(r.node,{id:r.id});var a=g(r.node.id)}else a=r.attr(i);else if(a=t.color(r),a.error){var s=t(p(this).ownerSVGElement).gradient(r);s?(s.node.id||m(s.node,{id:s.id}),a=g(s.node.id)):a=r}else a=y(a);var l={};l[i]=a,m(this.node,l),this.node.style[i]=v}}function s(t){n.stop(),t==+t&&(t+="px"),this.node.style.fontSize=t}function l(t){for(var e=[],n=t.childNodes,i=0,r=n.length;r>i;i++){var o=n[i];3==o.nodeType&&e.push(o.nodeValue),"tspan"==o.tagName&&e.push(1==o.childNodes.length&&3==o.firstChild.nodeType?o.firstChild.nodeValue:l(o))}return e}function u(){return n.stop(),this.node.style.fontSize}var h=t._.make,c=t._.wrap,d=t.is,p=t._.getSomeDefs,f=/^url\(#?([^)]+)\)$/,m=t._.$,g=t.url,y=String,_=t._.separator,v="";n.on("snap.util.attr.mask",function(t){if(t instanceof e||t instanceof o){if(n.stop(),t instanceof o&&1==t.node.childNodes.length&&(t=t.node.firstChild,p(this).appendChild(t),t=c(t)),"mask"==t.type)var i=t;else i=h("mask",p(this)),i.node.appendChild(t.node);!i.node.id&&m(i.node,{id:i.id}),m(this.node,{mask:g(i.id)})}}),function(t){n.on("snap.util.attr.clip",t),n.on("snap.util.attr.clip-path",t),n.on("snap.util.attr.clipPath",t)}(function(t){if(t instanceof e||t instanceof o){if(n.stop(),"clipPath"==t.type)var i=t;else i=h("clipPath",p(this)),i.node.appendChild(t.node),!i.node.id&&m(i.node,{id:i.id});m(this.node,{"clip-path":g(i.id)})}}),n.on("snap.util.attr.fill",a("fill")),n.on("snap.util.attr.stroke",a("stroke"));var b=/^([lr])(?:\(([^)]*)\))?(.*)$/i;n.on("snap.util.grad.parse",function(t){t=y(t);var e=t.match(b);if(!e)return null;var n=e[1],i=e[2],r=e[3];return i=i.split(/\s*,\s*/).map(function(t){return+t==t?+t:t}),1==i.length&&0==i[0]&&(i=[]),r=r.split("-"),r=r.map(function(t){t=t.split(":");var e={color:t[0]};return t[1]&&(e.offset=parseFloat(t[1])),e}),{type:n,params:i,stops:r}}),n.on("snap.util.attr.d",function(e){n.stop(),d(e,"array")&&d(e[0],"array")&&(e=t.path.toString.call(e)),e=y(e),e.match(/[ruo]/i)&&(e=t.path.toAbsolute(e)),m(this.node,{d:e})})(-1),n.on("snap.util.attr.#text",function(t){n.stop(),t=y(t);for(var e=r.doc.createTextNode(t);this.node.firstChild;)this.node.removeChild(this.node.firstChild);this.node.appendChild(e)})(-1),n.on("snap.util.attr.path",function(t){n.stop(),this.attr({d:t})})(-1),n.on("snap.util.attr.class",function(t){n.stop(),this.node.className.baseVal=t})(-1),n.on("snap.util.attr.viewBox",function(t){var e;e=d(t,"object")&&"x"in t?[t.x,t.y,t.width,t.height].join(" "):d(t,"array")?t.join(" "):t,m(this.node,{viewBox:e}),n.stop()})(-1),n.on("snap.util.attr.transform",function(t){this.transform(t),n.stop()})(-1),n.on("snap.util.attr.r",function(t){"rect"==this.type&&(n.stop(),m(this.node,{rx:t,ry:t}))})(-1),n.on("snap.util.attr.textpath",function(t){if(n.stop(),"text"==this.type){var i,r,o;if(!t&&this.textPath){for(r=this.textPath;r.node.firstChild;)this.node.appendChild(r.node.firstChild);return r.remove(),void delete this.textPath}if(d(t,"string")){var a=p(this),s=c(a.parentNode).path(t);a.appendChild(s.node),i=s.id,s.attr({id:i})}else t=c(t),t instanceof e&&(i=t.attr("id"),i||(i=t.id,t.attr({id:i})));if(i)if(r=this.textPath,o=this.node,r)r.attr({"xlink:href":"#"+i});else{for(r=m("textPath",{"xlink:href":"#"+i});o.firstChild;)r.appendChild(o.firstChild);o.appendChild(r),this.textPath=c(r)}}})(-1),n.on("snap.util.attr.text",function(t){if("text"==this.type){for(var e=this.node,i=function(t){var e=m("tspan");if(d(t,"array"))for(var n=0;n<t.length;n++)e.appendChild(i(t[n]));else e.appendChild(r.doc.createTextNode(t));return e.normalize&&e.normalize(),e};e.firstChild;)e.removeChild(e.firstChild);for(var o=i(t);o.firstChild;)e.appendChild(o.firstChild)}n.stop()})(-1),n.on("snap.util.attr.fontSize",s)(-1),n.on("snap.util.attr.font-size",s)(-1),n.on("snap.util.getattr.transform",function(){return n.stop(),this.transform()})(-1),n.on("snap.util.getattr.textpath",function(){return n.stop(),this.textPath})(-1),function(){function e(e){return function(){n.stop();var i=r.doc.defaultView.getComputedStyle(this.node,null).getPropertyValue("marker-"+e);return"none"==i?i:t(r.doc.getElementById(i.match(f)[1]))}}function i(t){return function(e){n.stop();var i="marker"+t.charAt(0).toUpperCase()+t.substring(1);if(""==e||!e)return void(this.node.style[i]="none");if("marker"==e.type){var r=e.node.id;return r||m(e.node,{id:e.id}),void(this.node.style[i]=g(r))}}}n.on("snap.util.getattr.marker-end",e("end"))(-1),n.on("snap.util.getattr.markerEnd",e("end"))(-1),n.on("snap.util.getattr.marker-start",e("start"))(-1),n.on("snap.util.getattr.markerStart",e("start"))(-1),n.on("snap.util.getattr.marker-mid",e("mid"))(-1),n.on("snap.util.getattr.markerMid",e("mid"))(-1),n.on("snap.util.attr.marker-end",i("end"))(-1),n.on("snap.util.attr.markerEnd",i("end"))(-1),n.on("snap.util.attr.marker-start",i("start"))(-1),n.on("snap.util.attr.markerStart",i("start"))(-1),n.on("snap.util.attr.marker-mid",i("mid"))(-1),n.on("snap.util.attr.markerMid",i("mid"))(-1)}(),n.on("snap.util.getattr.r",function(){return"rect"==this.type&&m(this.node,"rx")==m(this.node,"ry")?(n.stop(),m(this.node,"rx")):void 0})(-1),n.on("snap.util.getattr.text",function(){if("text"==this.type||"tspan"==this.type){n.stop();var t=l(this.node);return 1==t.length?t[0]:t}})(-1),n.on("snap.util.getattr.#text",function(){return this.node.textContent})(-1),n.on("snap.util.getattr.viewBox",function(){n.stop();var e=m(this.node,"viewBox");return e?(e=e.split(_),t._.box(+e[0],+e[1],+e[2],+e[3])):void 0})(-1),n.on("snap.util.getattr.points",function(){var t=m(this.node,"points");return n.stop(),t?t.split(_):void 0})(-1),n.on("snap.util.getattr.path",function(){var t=m(this.node,"d");return n.stop(),t})(-1),n.on("snap.util.getattr.class",function(){return this.node.className.baseVal})(-1),n.on("snap.util.getattr.fontSize",u)(-1),n.on("snap.util.getattr.font-size",u)(-1)}),r.plugin(function(){function t(t){return t}function e(t){return function(e){return+e.toFixed(3)+t}}var i={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"/":function(t,e){return t/e},"*":function(t,e){return t*e}},r=String,o=/[a-z]+$/i,a=/^\s*([+\-\/*])\s*=\s*([\d.eE+\-]+)\s*([^\d\s]+)?\s*$/;n.on("snap.util.attr",function(t){var e=r(t).match(a);if(e){var s=n.nt(),l=s.substring(s.lastIndexOf(".")+1),u=this.attr(l),h={};n.stop();var c=e[3]||"",d=u.match(o),p=i[e[1]];if(d&&d==c?t=p(parseFloat(u),+e[2]):(u=this.asPX(l),t=p(this.asPX(l),this.asPX(l,e[2]+c))),isNaN(u)||isNaN(t))return;h[l]=t,this.attr(h)}})(-10),n.on("snap.util.equal",function(s,l){var u=r(this.attr(s)||""),h=r(l).match(a);if(h){n.stop();var c=h[3]||"",d=u.match(o),p=i[h[1]];return d&&d==c?{from:parseFloat(u),to:p(parseFloat(u),+h[2]),f:e(d)}:(u=this.asPX(s),{from:u,to:p(u,this.asPX(s,h[2]+c)),f:t})}})(-10)}),r.plugin(function(t,e,i,r){var o=i.prototype,a=t.is;o.rect=function(t,e,n,i,r,o){var s;return null==o&&(o=r),a(t,"object")&&"[object Object]"==t?s=t:null!=t&&(s={x:t,y:e,width:n,height:i},null!=r&&(s.rx=r,s.ry=o)),this.el("rect",s)},o.circle=function(t,e,n){var i;return a(t,"object")&&"[object Object]"==t?i=t:null!=t&&(i={cx:t,cy:e,r:n}),this.el("circle",i)};var s=function(){function t(){this.parentNode.removeChild(this)}return function(e,n){var i=r.doc.createElement("img"),o=r.doc.body;i.style.cssText="position:absolute;left:-9999em;top:-9999em",i.onload=function(){n.call(i),i.onload=i.onerror=null,o.removeChild(i)},i.onerror=t,o.appendChild(i),i.src=e}}();o.image=function(e,n,i,r,o){var l=this.el("image");if(a(e,"object")&&"src"in e)l.attr(e);else if(null!=e){var u={"xlink:href":e,preserveAspectRatio:"none"};null!=n&&null!=i&&(u.x=n,u.y=i),null!=r&&null!=o?(u.width=r,u.height=o):s(e,function(){t._.$(l.node,{width:this.offsetWidth,height:this.offsetHeight})}),t._.$(l.node,u)}return l},o.ellipse=function(t,e,n,i){var r;return a(t,"object")&&"[object Object]"==t?r=t:null!=t&&(r={cx:t,cy:e,rx:n,ry:i}),this.el("ellipse",r)},o.path=function(t){var e;return a(t,"object")&&!a(t,"array")?e=t:t&&(e={d:t}),this.el("path",e)},o.group=o.g=function(t){var e=this.el("g");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.svg=function(t,e,n,i,r,o,s,l){var u={};return a(t,"object")&&null==e?u=t:(null!=t&&(u.x=t),null!=e&&(u.y=e),null!=n&&(u.width=n),null!=i&&(u.height=i),null!=r&&null!=o&&null!=s&&null!=l&&(u.viewBox=[r,o,s,l])),this.el("svg",u)},o.mask=function(t){var e=this.el("mask");return 1==arguments.length&&t&&!t.type?e.attr(t):arguments.length&&e.add(Array.prototype.slice.call(arguments,0)),e},o.ptrn=function(t,e,n,i,r,o,s,l){if(a(t,"object"))var u=t;else arguments.length?(u={},null!=t&&(u.x=t),null!=e&&(u.y=e),null!=n&&(u.width=n),null!=i&&(u.height=i),null!=r&&null!=o&&null!=s&&null!=l&&(u.viewBox=[r,o,s,l])):u={patternUnits:"userSpaceOnUse"};return this.el("pattern",u)},o.use=function(t){if(null!=t){{make("use",this.node)}return t instanceof e&&(t.attr("id")||t.attr({id:ID()}),t=t.attr("id")),this.el("use",{"xlink:href":t})}return e.prototype.use.call(this)},o.text=function(t,e,n){var i={};return a(t,"object")?i=t:null!=t&&(i={x:t,y:e,text:n||""}),this.el("text",i)},o.line=function(t,e,n,i){var r={};return a(t,"object")?r=t:null!=t&&(r={x1:t,x2:n,y1:e,y2:i}),this.el("line",r)},o.polyline=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return a(t,"object")&&!a(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polyline",e)},o.polygon=function(t){arguments.length>1&&(t=Array.prototype.slice.call(arguments,0));var e={};return a(t,"object")&&!a(t,"array")?e=t:null!=t&&(e={points:t}),this.el("polygon",e)},function(){function e(){return this.selectAll("stop")}function i(e,n){var i=u("stop"),r={offset:+n+"%"};return e=t.color(e),r["stop-color"]=e.hex,e.opacity<1&&(r["stop-opacity"]=e.opacity),u(i,r),this.node.appendChild(i),this}function r(){if("linearGradient"==this.type){var e=u(this.node,"x1")||0,n=u(this.node,"x2")||1,i=u(this.node,"y1")||0,r=u(this.node,"y2")||0;return t._.box(e,i,math.abs(n-e),math.abs(r-i))}var o=this.node.cx||.5,a=this.node.cy||.5,s=this.node.r||0;return t._.box(o-s,a-s,2*s,2*s)}function a(t,e){function i(t,e){for(var n=(e-c)/(t-d),i=d;t>i;i++)a[i].offset=+(+c+n*(i-d)).toFixed(2);d=t,c=e}var r,o=n("snap.util.grad.parse",null,e).firstDefined();if(!o)return null;o.params.unshift(t),r="l"==o.type.toLowerCase()?s.apply(0,o.params):l.apply(0,o.params),o.type!=o.type.toLowerCase()&&u(r.node,{gradientUnits:"userSpaceOnUse"});var a=o.stops,h=a.length,c=0,d=0;h--;for(var p=0;h>p;p++)"offset"in a[p]&&i(p,a[p].offset);for(a[h].offset=a[h].offset||100,i(h,a[h].offset),p=0;h>=p;p++){var f=a[p];r.addStop(f.color,f.offset)}return r}function s(n,o,a,s,l){var h=t._.make("linearGradient",n);return h.stops=e,h.addStop=i,h.getBBox=r,null!=o&&u(h.node,{x1:o,y1:a,x2:s,y2:l}),h}function l(n,o,a,s,l,h){var c=t._.make("radialGradient",n);return c.stops=e,c.addStop=i,c.getBBox=r,null!=o&&u(c.node,{cx:o,cy:a,r:s}),null!=l&&null!=h&&u(c.node,{fx:l,fy:h}),c}var u=t._.$;o.gradient=function(t){return a(this.defs,t)},o.gradientLinear=function(t,e,n,i){return s(this.defs,t,e,n,i)},o.gradientRadial=function(t,e,n,i,r){return l(this.defs,t,e,n,i,r)},o.toString=function(){var e,n=this.node.ownerDocument,i=n.createDocumentFragment(),r=n.createElement("div"),o=this.node.cloneNode(!0);return i.appendChild(r),r.appendChild(o),t._.$(o,{xmlns:"http://www.w3.org/2000/svg"}),e=r.innerHTML,i.removeChild(i.firstChild),e},o.clear=function(){for(var t,e=this.node.firstChild;e;)t=e.nextSibling,"defs"!=e.tagName?e.parentNode.removeChild(e):o.clear.call({node:e}),e=t}}()}),r.plugin(function(t,e){function n(t){var e=n.ps=n.ps||{};return e[t]?e[t].sleep=100:e[t]={sleep:100},setTimeout(function(){for(var n in e)e[N](n)&&n!=t&&(e[n].sleep--,!e[n].sleep&&delete e[n])}),e[t]}function i(t,e,n,i){return null==t&&(t=e=n=i=0),null==e&&(e=t.y,n=t.width,i=t.height,t=t.x),{x:t,y:e,width:n,w:n,height:i,h:i,x2:t+n,y2:e+i,cx:t+n/2,cy:e+i/2,r1:j.min(n,i)/2,r2:j.max(n,i)/2,r0:j.sqrt(n*n+i*i)/2,path:x(t,e,n,i),vb:[t,e,n,i].join(" ")}}function r(){return this.join(",").replace(Y,"$1")}function o(t){var e=R(t);return e.toString=r,e}function a(t,e,n,i,r,o,a,s,u){return null==u?p(t,e,n,i,r,o,a,s):l(t,e,n,i,r,o,a,s,f(t,e,n,i,r,o,a,s,u))}function s(n,i){function r(t){return+(+t).toFixed(3)}return t._.cacher(function(t,o,s){t instanceof e&&(t=t.attr("d")),t=D(t);for(var u,h,c,d,p,f="",m={},g=0,y=0,_=t.length;_>y;y++){if(c=t[y],"M"==c[0])u=+c[1],h=+c[2];else{if(d=a(u,h,c[1],c[2],c[3],c[4],c[5],c[6]),g+d>o){if(i&&!m.start){if(p=a(u,h,c[1],c[2],c[3],c[4],c[5],c[6],o-g),f+=["C"+r(p.start.x),r(p.start.y),r(p.m.x),r(p.m.y),r(p.x),r(p.y)],s)return f;m.start=f,f=["M"+r(p.x),r(p.y)+"C"+r(p.n.x),r(p.n.y),r(p.end.x),r(p.end.y),r(c[5]),r(c[6])].join(),g+=d,u=+c[5],h=+c[6];continue}if(!n&&!i)return p=a(u,h,c[1],c[2],c[3],c[4],c[5],c[6],o-g)}g+=d,u=+c[5],h=+c[6]}f+=c.shift()+c}return m.end=f,p=n?g:i?m:l(u,h,c[0],c[1],c[2],c[3],c[4],c[5],1)},null,t._.clone)}function l(t,e,n,i,r,o,a,s,l){var u=1-l,h=G(u,3),c=G(u,2),d=l*l,p=d*l,f=h*t+3*c*l*n+3*u*l*l*r+p*a,m=h*e+3*c*l*i+3*u*l*l*o+p*s,g=t+2*l*(n-t)+d*(r-2*n+t),y=e+2*l*(i-e)+d*(o-2*i+e),_=n+2*l*(r-n)+d*(a-2*r+n),v=i+2*l*(o-i)+d*(s-2*o+i),b=u*t+l*n,w=u*e+l*i,x=u*r+l*a,T=u*o+l*s,M=90-180*j.atan2(g-_,y-v)/B;return{x:f,y:m,m:{x:g,y:y},n:{x:_,y:v},start:{x:b,y:w},end:{x:x,y:T},alpha:M}}function u(e,n,r,o,a,s,l,u){t.is(e,"array")||(e=[e,n,r,o,a,s,l,u]);var h=P.apply(null,e);return i(h.min.x,h.min.y,h.max.x-h.min.x,h.max.y-h.min.y)}function h(t,e,n){return e>=t.x&&e<=t.x+t.width&&n>=t.y&&n<=t.y+t.height}function c(t,e){return t=i(t),e=i(e),h(e,t.x,t.y)||h(e,t.x2,t.y)||h(e,t.x,t.y2)||h(e,t.x2,t.y2)||h(t,e.x,e.y)||h(t,e.x2,e.y)||h(t,e.x,e.y2)||h(t,e.x2,e.y2)||(t.x<e.x2&&t.x>e.x||e.x<t.x2&&e.x>t.x)&&(t.y<e.y2&&t.y>e.y||e.y<t.y2&&e.y>t.y)}function d(t,e,n,i,r){var o=-3*e+9*n-9*i+3*r,a=t*o+6*e-12*n+6*i;return t*a-3*e+3*n}function p(t,e,n,i,r,o,a,s,l){null==l&&(l=1),l=l>1?1:0>l?0:l;for(var u=l/2,h=12,c=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],p=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472],f=0,m=0;h>m;m++){var g=u*c[m]+u,y=d(g,t,n,r,a),_=d(g,e,i,o,s),v=y*y+_*_;f+=p[m]*j.sqrt(v)}return u*f}function f(t,e,n,i,r,o,a,s,l){if(!(0>l||p(t,e,n,i,r,o,a,s)<l)){var u,h=1,c=h/2,d=h-c,f=.01;for(u=p(t,e,n,i,r,o,a,s,d);W(u-l)>f;)c/=2,d+=(l>u?1:-1)*c,u=p(t,e,n,i,r,o,a,s,d);return d}}function m(t,e,n,i,r,o,a,s){if(!(H(t,n)<U(r,a)||U(t,n)>H(r,a)||H(e,i)<U(o,s)||U(e,i)>H(o,s))){var l=(t*i-e*n)*(r-a)-(t-n)*(r*s-o*a),u=(t*i-e*n)*(o-s)-(e-i)*(r*s-o*a),h=(t-n)*(o-s)-(e-i)*(r-a);if(h){var c=l/h,d=u/h,p=+c.toFixed(2),f=+d.toFixed(2);if(!(p<+U(t,n).toFixed(2)||p>+H(t,n).toFixed(2)||p<+U(r,a).toFixed(2)||p>+H(r,a).toFixed(2)||f<+U(e,i).toFixed(2)||f>+H(e,i).toFixed(2)||f<+U(o,s).toFixed(2)||f>+H(o,s).toFixed(2)))return{x:c,y:d}}}}function g(t,e,n){var i=u(t),r=u(e);if(!c(i,r))return n?0:[];for(var o=p.apply(0,t),a=p.apply(0,e),s=~~(o/8),h=~~(a/8),d=[],f=[],g={},y=n?0:[],_=0;s+1>_;_++){var v=l.apply(0,t.concat(_/s));d.push({x:v.x,y:v.y,t:_/s})}for(_=0;h+1>_;_++)v=l.apply(0,e.concat(_/h)),f.push({x:v.x,y:v.y,t:_/h});for(_=0;s>_;_++)for(var b=0;h>b;b++){var w=d[_],x=d[_+1],T=f[b],M=f[b+1],k=W(x.x-w.x)<.001?"y":"x",S=W(M.x-T.x)<.001?"y":"x",C=m(w.x,w.y,x.x,x.y,T.x,T.y,M.x,M.y);if(C){if(g[C.x.toFixed(4)]==C.y.toFixed(4))continue;g[C.x.toFixed(4)]=C.y.toFixed(4);var L=w.t+W((C[k]-w[k])/(x[k]-w[k]))*(x.t-w.t),P=T.t+W((C[S]-T[S])/(M[S]-T[S]))*(M.t-T.t);L>=0&&1>=L&&P>=0&&1>=P&&(n?y++:y.push({x:C.x,y:C.y,t1:L,t2:P}))}}return y}function y(t,e){return v(t,e)}function _(t,e){return v(t,e,1)}function v(t,e,n){t=D(t),e=D(e);for(var i,r,o,a,s,l,u,h,c,d,p=n?0:[],f=0,m=t.length;m>f;f++){var y=t[f];if("M"==y[0])i=s=y[1],r=l=y[2];else{"C"==y[0]?(c=[i,r].concat(y.slice(1)),i=c[6],r=c[7]):(c=[i,r,i,r,s,l,s,l],i=s,r=l);for(var _=0,v=e.length;v>_;_++){var b=e[_];if("M"==b[0])o=u=b[1],a=h=b[2];else{"C"==b[0]?(d=[o,a].concat(b.slice(1)),o=d[6],a=d[7]):(d=[o,a,o,a,u,h,u,h],o=u,a=h);var w=g(c,d,n);if(n)p+=w;else{for(var x=0,T=w.length;T>x;x++)w[x].segment1=f,w[x].segment2=_,w[x].bez1=c,w[x].bez2=d;p=p.concat(w)}}}}}return p}function b(t,e,n){var i=w(t);return h(i,e,n)&&v(t,[["M",e,n],["H",i.x2+10]],1)%2==1}function w(t){var e=n(t);if(e.bbox)return R(e.bbox);if(!t)return i();t=D(t);for(var r,o=0,a=0,s=[],l=[],u=0,h=t.length;h>u;u++)if(r=t[u],"M"==r[0])o=r[1],a=r[2],s.push(o),l.push(a);else{var c=P(o,a,r[1],r[2],r[3],r[4],r[5],r[6]);s=s.concat(c.min.x,c.max.x),l=l.concat(c.min.y,c.max.y),o=r[5],a=r[6]}var d=U.apply(0,s),p=U.apply(0,l),f=H.apply(0,s),m=H.apply(0,l),g=i(d,p,f-d,m-p);return e.bbox=R(g),g}function x(t,e,n,i,o){if(o)return[["M",+t+ +o,e],["l",n-2*o,0],["a",o,o,0,0,1,o,o],["l",0,i-2*o],["a",o,o,0,0,1,-o,o],["l",2*o-n,0],["a",o,o,0,0,1,-o,-o],["l",0,2*o-i],["a",o,o,0,0,1,o,-o],["z"]];var a=[["M",t,e],["l",n,0],["l",0,i],["l",-n,0],["z"]];return a.toString=r,a}function T(t,e,n,i,o){if(null==o&&null==i&&(i=n),t=+t,e=+e,n=+n,i=+i,null!=o)var a=Math.PI/180,s=t+n*Math.cos(-i*a),l=t+n*Math.cos(-o*a),u=e+n*Math.sin(-i*a),h=e+n*Math.sin(-o*a),c=[["M",s,u],["A",n,n,0,+(o-i>180),0,l,h]];else c=[["M",t,e],["m",0,-i],["a",n,i,0,1,1,0,2*i],["a",n,i,0,1,1,0,-2*i],["z"]];return c.toString=r,c}function M(e){var i=n(e),a=String.prototype.toLowerCase;if(i.rel)return o(i.rel);t.is(e,"array")&&t.is(e&&e[0],"array")||(e=t.parsePathString(e));var s=[],l=0,u=0,h=0,c=0,d=0;"M"==e[0][0]&&(l=e[0][1],u=e[0][2],h=l,c=u,d++,s.push(["M",l,u]));for(var p=d,f=e.length;f>p;p++){var m=s[p]=[],g=e[p];if(g[0]!=a.call(g[0]))switch(m[0]=a.call(g[0]),m[0]){case"a":m[1]=g[1],m[2]=g[2],m[3]=g[3],m[4]=g[4],m[5]=g[5],m[6]=+(g[6]-l).toFixed(3),m[7]=+(g[7]-u).toFixed(3);break;case"v":m[1]=+(g[1]-u).toFixed(3);break;case"m":h=g[1],c=g[2];default:for(var y=1,_=g.length;_>y;y++)m[y]=+(g[y]-(y%2?l:u)).toFixed(3)}else{m=s[p]=[],"m"==g[0]&&(h=g[1]+l,c=g[2]+u);for(var v=0,b=g.length;b>v;v++)s[p][v]=g[v]}var w=s[p].length;switch(s[p][0]){case"z":l=h,u=c;break;case"h":l+=+s[p][w-1];break;case"v":u+=+s[p][w-1];break;default:l+=+s[p][w-2],u+=+s[p][w-1]}}return s.toString=r,i.rel=o(s),s}function k(e){var i=n(e);if(i.abs)return o(i.abs);if(I(e,"array")&&I(e&&e[0],"array")||(e=t.parsePathString(e)),!e||!e.length)return[["M",0,0]];var a,s=[],l=0,u=0,h=0,c=0,d=0;"M"==e[0][0]&&(l=+e[0][1],u=+e[0][2],h=l,c=u,d++,s[0]=["M",l,u]);for(var p,f,m=3==e.length&&"M"==e[0][0]&&"R"==e[1][0].toUpperCase()&&"Z"==e[2][0].toUpperCase(),g=d,y=e.length;y>g;g++){if(s.push(p=[]),f=e[g],a=f[0],a!=a.toUpperCase())switch(p[0]=a.toUpperCase(),p[0]){case"A":p[1]=f[1],p[2]=f[2],p[3]=f[3],p[4]=f[4],p[5]=f[5],p[6]=+f[6]+l,p[7]=+f[7]+u;break;case"V":p[1]=+f[1]+u;break;case"H":p[1]=+f[1]+l;break;case"R":for(var _=[l,u].concat(f.slice(1)),v=2,b=_.length;b>v;v++)_[v]=+_[v]+l,_[++v]=+_[v]+u;s.pop(),s=s.concat(E(_,m));break;case"O":s.pop(),_=T(l,u,f[1],f[2]),_.push(_[0]),s=s.concat(_);break;case"U":s.pop(),s=s.concat(T(l,u,f[1],f[2],f[3])),p=["U"].concat(s[s.length-1].slice(-2));break;case"M":h=+f[1]+l,c=+f[2]+u;default:for(v=1,b=f.length;b>v;v++)p[v]=+f[v]+(v%2?l:u)}else if("R"==a)_=[l,u].concat(f.slice(1)),s.pop(),s=s.concat(E(_,m)),p=["R"].concat(f.slice(-2));else if("O"==a)s.pop(),_=T(l,u,f[1],f[2]),_.push(_[0]),s=s.concat(_);else if("U"==a)s.pop(),s=s.concat(T(l,u,f[1],f[2],f[3])),p=["U"].concat(s[s.length-1].slice(-2));else for(var w=0,x=f.length;x>w;w++)p[w]=f[w];if(a=a.toUpperCase(),"O"!=a)switch(p[0]){case"Z":l=+h,u=+c;break;case"H":l=p[1];break;case"V":u=p[1];break;case"M":h=p[p.length-2],c=p[p.length-1];default:l=p[p.length-2],u=p[p.length-1]}}return s.toString=r,i.abs=o(s),s}function S(t,e,n,i){return[t,e,n,i,n,i]}function C(t,e,n,i,r,o){var a=1/3,s=2/3;return[a*t+s*n,a*e+s*i,a*r+s*n,a*o+s*i,r,o]}function L(e,n,i,r,o,a,s,l,u,h){var c,d=120*B/180,p=B/180*(+o||0),f=[],m=t._.cacher(function(t,e,n){var i=t*j.cos(n)-e*j.sin(n),r=t*j.sin(n)+e*j.cos(n);return{x:i,y:r}});if(h)M=h[0],k=h[1],x=h[2],T=h[3];else{c=m(e,n,-p),e=c.x,n=c.y,c=m(l,u,-p),l=c.x,u=c.y;var g=(j.cos(B/180*o),j.sin(B/180*o),(e-l)/2),y=(n-u)/2,_=g*g/(i*i)+y*y/(r*r);_>1&&(_=j.sqrt(_),i=_*i,r=_*r);var v=i*i,b=r*r,w=(a==s?-1:1)*j.sqrt(W((v*b-v*y*y-b*g*g)/(v*y*y+b*g*g))),x=w*i*y/r+(e+l)/2,T=w*-r*g/i+(n+u)/2,M=j.asin(((n-T)/r).toFixed(9)),k=j.asin(((u-T)/r).toFixed(9));M=x>e?B-M:M,k=x>l?B-k:k,0>M&&(M=2*B+M),0>k&&(k=2*B+k),s&&M>k&&(M-=2*B),!s&&k>M&&(k-=2*B)}var S=k-M;if(W(S)>d){var C=k,P=l,D=u;k=M+d*(s&&k>M?1:-1),l=x+i*j.cos(k),u=T+r*j.sin(k),f=L(l,u,i,r,o,0,s,P,D,[k,C,x,T])}S=k-M;var A=j.cos(M),E=j.sin(M),O=j.cos(k),I=j.sin(k),R=j.tan(S/4),N=4/3*i*R,Y=4/3*r*R,F=[e,n],U=[e+N*E,n-Y*A],H=[l+N*I,u-Y*O],G=[l,u];if(U[0]=2*F[0]-U[0],U[1]=2*F[1]-U[1],h)return[U,H,G].concat(f);f=[U,H,G].concat(f).join().split(",");for(var z=[],V=0,$=f.length;$>V;V++)z[V]=V%2?m(f[V-1],f[V],p).y:m(f[V],f[V+1],p).x;return z}function P(t,e,n,i,r,o,a,s){for(var l,u,h,c,d,p,f,m,g=[],y=[[],[]],_=0;2>_;++_)if(0==_?(u=6*t-12*n+6*r,l=-3*t+9*n-9*r+3*a,h=3*n-3*t):(u=6*e-12*i+6*o,l=-3*e+9*i-9*o+3*s,h=3*i-3*e),W(l)<1e-12){if(W(u)<1e-12)continue;c=-h/u,c>0&&1>c&&g.push(c)}else f=u*u-4*h*l,m=j.sqrt(f),0>f||(d=(-u+m)/(2*l),d>0&&1>d&&g.push(d),p=(-u-m)/(2*l),p>0&&1>p&&g.push(p));for(var v,b=g.length,w=b;b--;)c=g[b],v=1-c,y[0][b]=v*v*v*t+3*v*v*c*n+3*v*c*c*r+c*c*c*a,y[1][b]=v*v*v*e+3*v*v*c*i+3*v*c*c*o+c*c*c*s;return y[0][w]=t,y[1][w]=e,y[0][w+1]=a,y[1][w+1]=s,y[0].length=y[1].length=w+2,{min:{x:U.apply(0,y[0]),y:U.apply(0,y[1])},max:{x:H.apply(0,y[0]),y:H.apply(0,y[1])}}}function D(t,e){var i=!e&&n(t);if(!e&&i.curve)return o(i.curve);for(var r=k(t),a=e&&k(e),s={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},l={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},u=(function(t,e,n){var i,r;if(!t)return["C",e.x,e.y,e.x,e.y,e.x,e.y];switch(!(t[0]in{T:1,Q:1})&&(e.qx=e.qy=null),t[0]){case"M":e.X=t[1],e.Y=t[2];break;case"A":t=["C"].concat(L.apply(0,[e.x,e.y].concat(t.slice(1))));break;case"S":"C"==n||"S"==n?(i=2*e.x-e.bx,r=2*e.y-e.by):(i=e.x,r=e.y),t=["C",i,r].concat(t.slice(1));break;case"T":"Q"==n||"T"==n?(e.qx=2*e.x-e.qx,e.qy=2*e.y-e.qy):(e.qx=e.x,e.qy=e.y),t=["C"].concat(C(e.x,e.y,e.qx,e.qy,t[1],t[2]));break;case"Q":e.qx=t[1],e.qy=t[2],t=["C"].concat(C(e.x,e.y,t[1],t[2],t[3],t[4]));break;case"L":t=["C"].concat(S(e.x,e.y,t[1],t[2]));break;case"H":t=["C"].concat(S(e.x,e.y,t[1],e.y));break;case"V":t=["C"].concat(S(e.x,e.y,e.x,t[1]));break;case"Z":t=["C"].concat(S(e.x,e.y,e.X,e.Y))}return t}),h=function(t,e){if(t[e].length>7){t[e].shift();for(var n=t[e];n.length;)d[e]="A",a&&(p[e]="A"),t.splice(e++,0,["C"].concat(n.splice(0,6)));t.splice(e,1),y=H(r.length,a&&a.length||0)}},c=function(t,e,n,i,o){t&&e&&"M"==t[o][0]&&"M"!=e[o][0]&&(e.splice(o,0,["M",i.x,i.y]),n.bx=0,n.by=0,n.x=t[o][1],n.y=t[o][2],y=H(r.length,a&&a.length||0))},d=[],p=[],f="",m="",g=0,y=H(r.length,a&&a.length||0);y>g;g++){r[g]&&(f=r[g][0]),"C"!=f&&(d[g]=f,g&&(m=d[g-1])),r[g]=u(r[g],s,m),"A"!=d[g]&&"C"==f&&(d[g]="C"),h(r,g),a&&(a[g]&&(f=a[g][0]),"C"!=f&&(p[g]=f,g&&(m=p[g-1])),a[g]=u(a[g],l,m),"A"!=p[g]&&"C"==f&&(p[g]="C"),h(a,g)),c(r,a,s,l,g),c(a,r,l,s,g);var _=r[g],v=a&&a[g],b=_.length,w=a&&v.length;s.x=_[b-2],s.y=_[b-1],s.bx=F(_[b-4])||s.x,s.by=F(_[b-3])||s.y,l.bx=a&&(F(v[w-4])||l.x),l.by=a&&(F(v[w-3])||l.y),l.x=a&&v[w-2],l.y=a&&v[w-1]}return a||(i.curve=o(r)),a?[r,a]:r}function A(t,e){if(!e)return t;var n,i,r,o,a,s,l;for(t=D(t),r=0,a=t.length;a>r;r++)for(l=t[r],o=1,s=l.length;s>o;o+=2)n=e.x(l[o],l[o+1]),i=e.y(l[o],l[o+1]),l[o]=n,l[o+1]=i;return t}function E(t,e){for(var n=[],i=0,r=t.length;r-2*!e>i;i+=2){var o=[{x:+t[i-2],y:+t[i-1]},{x:+t[i],y:+t[i+1]},{x:+t[i+2],y:+t[i+3]},{x:+t[i+4],y:+t[i+5]}];e?i?r-4==i?o[3]={x:+t[0],y:+t[1]}:r-2==i&&(o[2]={x:+t[0],y:+t[1]},o[3]={x:+t[2],y:+t[3]}):o[0]={x:+t[r-2],y:+t[r-1]}:r-4==i?o[3]=o[2]:i||(o[0]={x:+t[i],y:+t[i+1]}),n.push(["C",(-o[0].x+6*o[1].x+o[2].x)/6,(-o[0].y+6*o[1].y+o[2].y)/6,(o[1].x+6*o[2].x-o[3].x)/6,(o[1].y+6*o[2].y-o[3].y)/6,o[2].x,o[2].y])}return n}var O=e.prototype,I=t.is,R=t._.clone,N="hasOwnProperty",Y=/,?([a-z]),?/gi,F=parseFloat,j=Math,B=j.PI,U=j.min,H=j.max,G=j.pow,W=j.abs,z=s(1),V=s(),$=s(0,1),X=t._unit2px,q={path:function(t){return t.attr("path")},circle:function(t){var e=X(t);return T(e.cx,e.cy,e.r)},ellipse:function(t){var e=X(t);return T(e.cx||0,e.cy||0,e.rx,e.ry)},rect:function(t){var e=X(t);return x(e.x||0,e.y||0,e.width,e.height,e.rx,e.ry)},image:function(t){var e=X(t);return x(e.x||0,e.y||0,e.width,e.height)},line:function(t){return"M"+[t.attr("x1")||0,t.attr("y1")||0,t.attr("x2"),t.attr("y2")]},polyline:function(t){return"M"+t.attr("points")},polygon:function(t){return"M"+t.attr("points")+"z"},deflt:function(t){var e=t.node.getBBox();return x(e.x,e.y,e.width,e.height)}};t.path=n,t.path.getTotalLength=z,t.path.getPointAtLength=V,t.path.getSubpath=function(t,e,n){if(this.getTotalLength(t)-n<1e-6)return $(t,e).end;var i=$(t,n,1);return e?$(i,e).end:i},O.getTotalLength=function(){return this.node.getTotalLength?this.node.getTotalLength():void 0},O.getPointAtLength=function(t){return V(this.attr("d"),t)},O.getSubpath=function(e,n){return t.path.getSubpath(this.attr("d"),e,n)},t._.box=i,t.path.findDotsAtSegment=l,t.path.bezierBBox=u,t.path.isPointInsideBBox=h,t.path.isBBoxIntersect=c,t.path.intersection=y,t.path.intersectionNumber=_,t.path.isPointInside=b,t.path.getBBox=w,t.path.get=q,t.path.toRelative=M,t.path.toAbsolute=k,t.path.toCubic=D,t.path.map=A,t.path.toString=r,t.path.clone=o}),r.plugin(function(t){var e=Math.max,r=Math.min,o=function(t){if(this.items=[],this.bindings={},this.length=0,this.type="set",t)for(var e=0,n=t.length;n>e;e++)t[e]&&(this[this.items.length]=this.items[this.items.length]=t[e],this.length++)},a=o.prototype;a.push=function(){for(var t,e,n=0,i=arguments.length;i>n;n++)t=arguments[n],t&&(e=this.items.length,this[e]=this.items[e]=t,this.length++);return this},a.pop=function(){return this.length&&delete this[this.length--],this.items.pop()},a.forEach=function(t,e){for(var n=0,i=this.items.length;i>n;n++)if(t.call(e,this.items[n],n)===!1)return this;return this},a.animate=function(e,r,o,a){"function"!=typeof o||o.length||(a=o,o=i.linear),e instanceof t._.Animation&&(a=e.callback,o=e.easing,r=o.dur,e=e.attr);var s=arguments;if(t.is(e,"array")&&t.is(s[s.length-1],"array"))var l=!0;var u,h=function(){u?this.b=u:u=this.b},c=0,d=a&&function(){c++==this.length&&a.call(this)};return this.forEach(function(t,i){n.once("snap.animcreated."+t.id,h),l?s[i]&&t.animate.apply(t,s[i]):t.animate(e,r,o,d)})},a.remove=function(){for(;this.length;)this.pop().remove();return this},a.bind=function(t,e,n){var i={};if("function"==typeof e)this.bindings[t]=e;else{var r=n||t;this.bindings[t]=function(t){i[r]=t,e.attr(i)}}return this},a.attr=function(t){var e={};for(var n in t)this.bindings[n]?this.bindings[n](t[n]):e[n]=t[n];for(var i=0,r=this.items.length;r>i;i++)this.items[i].attr(e);return this},a.clear=function(){for(;this.length;)this.pop()},a.splice=function(t,n){t=0>t?e(this.length+t,0):t,n=e(0,r(this.length-t,n));var i,a=[],s=[],l=[];for(i=2;i<arguments.length;i++)l.push(arguments[i]);for(i=0;n>i;i++)s.push(this[t+i]);for(;i<this.length-t;i++)a.push(this[t+i]);
var u=l.length;for(i=0;i<u+a.length;i++)this.items[t+i]=this[t+i]=u>i?l[i]:a[i-u];for(i=this.items.length=this.length-=n-u;this[i];)delete this[i++];return new o(s)},a.exclude=function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]==t)return this.splice(e,1),!0;return!1},a.insertAfter=function(t){for(var e=this.items.length;e--;)this.items[e].insertAfter(t);return this},a.getBBox=function(){for(var t=[],n=[],i=[],o=[],a=this.items.length;a--;)if(!this.items[a].removed){var s=this.items[a].getBBox();t.push(s.x),n.push(s.y),i.push(s.x+s.width),o.push(s.y+s.height)}return t=r.apply(0,t),n=r.apply(0,n),i=e.apply(0,i),o=e.apply(0,o),{x:t,y:n,x2:i,y2:o,width:i-t,height:o-n,cx:t+(i-t)/2,cy:n+(o-n)/2}},a.clone=function(t){t=new o;for(var e=0,n=this.items.length;n>e;e++)t.push(this.items[e].clone());return t},a.toString=function(){return"Snaps set"},a.type="set",t.set=function(){var t=new o;return arguments.length&&t.push.apply(t,Array.prototype.slice.call(arguments,0)),t}}),r.plugin(function(t,i){function r(t){var e=t[0];switch(e.toLowerCase()){case"t":return[e,0,0];case"m":return[e,1,0,0,1,0,0];case"r":return 4==t.length?[e,0,t[2],t[3]]:[e,0];case"s":return 5==t.length?[e,1,1,t[3],t[4]]:3==t.length?[e,1,1]:[e,1]}}function o(e,n,i){n=p(n).replace(/\.{3}|\u2026/g,e),e=t.parseTransformString(e)||[],n=t.parseTransformString(n)||[];for(var o,a,s,l,c=Math.max(e.length,n.length),d=[],f=[],m=0;c>m;m++){if(s=e[m]||r(n[m]),l=n[m]||r(s),s[0]!=l[0]||"r"==s[0].toLowerCase()&&(s[2]!=l[2]||s[3]!=l[3])||"s"==s[0].toLowerCase()&&(s[3]!=l[3]||s[4]!=l[4])){e=t._.transform2matrix(e,i()),n=t._.transform2matrix(n,i()),d=[["m",e.a,e.b,e.c,e.d,e.e,e.f]],f=[["m",n.a,n.b,n.c,n.d,n.e,n.f]];break}for(d[m]=[],f[m]=[],o=0,a=Math.max(s.length,l.length);a>o;o++)o in s&&(d[m][o]=s[o]),o in l&&(f[m][o]=l[o])}return{from:h(d),to:h(f),f:u(d)}}function a(t){return t}function s(t){return function(e){return+e.toFixed(3)+t}}function l(e){return t.rgb(e[0],e[1],e[2])}function u(t){var e,n,i,r,o,a,s=0,l=[];for(e=0,n=t.length;n>e;e++){for(o="[",a=['"'+t[e][0]+'"'],i=1,r=t[e].length;r>i;i++)a[i]="val["+s++ +"]";o+=a+"]",l[e]=o}return Function("val","return Snap.path.toString.call(["+l+"])")}function h(t){for(var e=[],n=0,i=t.length;i>n;n++)for(var r=1,o=t[n].length;o>r;r++)e.push(t[n][r]);return e}var c={},d=/[a-z]+$/i,p=String;c.stroke=c.fill="colour",i.prototype.equal=function(t,e){return n("snap.util.equal",this,t,e).firstDefined()},n.on("snap.util.equal",function(n,i){var r,f,m=p(this.attr(n)||""),g=this;if(m==+m&&i==+i)return{from:+m,to:+i,f:a};if("colour"==c[n])return r=t.color(m),f=t.color(i),{from:[r.r,r.g,r.b,r.opacity],to:[f.r,f.g,f.b,f.opacity],f:l};if("transform"==n||"gradientTransform"==n||"patternTransform"==n)return i instanceof t.Matrix&&(i=i.toTransformString()),t._.rgTransform.test(i)||(i=t._.svgTransform2string(i)),o(m,i,function(){return g.getBBox(1)});if("d"==n||"path"==n)return r=t.path.toCubic(m,i),{from:h(r[0]),to:h(r[1]),f:u(r[0])};if("points"==n)return r=p(m).split(t._.separator),f=p(i).split(t._.separator),{from:r,to:f,f:function(t){return t}};e=m.match(d);var y=p(i).match(d);return e&&e==y?{from:parseFloat(m),to:parseFloat(i),f:s(e)}:{from:this.asPX(n),to:this.asPX(n,i),f:a}})}),r.plugin(function(t,e,i,r){for(var o=e.prototype,a="hasOwnProperty",s=("createTouch"in r.doc),l=["click","dblclick","mousedown","mousemove","mouseout","mouseover","mouseup","touchstart","touchmove","touchend","touchcancel"],u={mousedown:"touchstart",mousemove:"touchmove",mouseup:"touchend"},h=(function(t,e){var n="y"==t?"scrollTop":"scrollLeft",i=e&&e.node?e.node.ownerDocument:r.doc;return i[n in i.documentElement?"documentElement":"body"][n]}),c=function(){this.returnValue=!1},d=function(){return this.originalEvent.preventDefault()},p=function(){this.cancelBubble=!0},f=function(){return this.originalEvent.stopPropagation()},m=function(){return r.doc.addEventListener?function(t,e,n,i){var r=s&&u[e]?u[e]:e,o=function(r){var o=h("y",i),l=h("x",i);if(s&&u[a](e))for(var c=0,p=r.targetTouches&&r.targetTouches.length;p>c;c++)if(r.targetTouches[c].target==t||t.contains(r.targetTouches[c].target)){var m=r;r=r.targetTouches[c],r.originalEvent=m,r.preventDefault=d,r.stopPropagation=f;break}var g=r.clientX+l,y=r.clientY+o;return n.call(i,r,g,y)};return e!==r&&t.addEventListener(e,o,!1),t.addEventListener(r,o,!1),function(){return e!==r&&t.removeEventListener(e,o,!1),t.removeEventListener(r,o,!1),!0}}:r.doc.attachEvent?function(t,e,n,i){var r=function(t){t=t||i.node.ownerDocument.window.event;var e=h("y",i),r=h("x",i),o=t.clientX+r,a=t.clientY+e;return t.preventDefault=t.preventDefault||c,t.stopPropagation=t.stopPropagation||p,n.call(i,t,o,a)};t.attachEvent("on"+e,r);var o=function(){return t.detachEvent("on"+e,r),!0};return o}:void 0}(),g=[],y=function(t){for(var e,i=t.clientX,r=t.clientY,o=h("y"),a=h("x"),l=g.length;l--;){if(e=g[l],s){for(var u,c=t.touches&&t.touches.length;c--;)if(u=t.touches[c],u.identifier==e.el._drag.id||e.el.node.contains(u.target)){i=u.clientX,r=u.clientY,(t.originalEvent?t.originalEvent:t).preventDefault();break}}else t.preventDefault();{var d=e.el.node;d.nextSibling,d.parentNode,d.style.display}i+=a,r+=o,n("snap.drag.move."+e.el.id,e.move_scope||e.el,i-e.el._drag.x,r-e.el._drag.y,i,r,t)}},_=function(e){t.unmousemove(y).unmouseup(_);for(var i,r=g.length;r--;)i=g[r],i.el._drag={},n("snap.drag.end."+i.el.id,i.end_scope||i.start_scope||i.move_scope||i.el,e);g=[]},v=l.length;v--;)!function(e){t[e]=o[e]=function(n,i){return t.is(n,"function")&&(this.events=this.events||[],this.events.push({name:e,f:n,unbind:m(this.node||document,e,n,i||this)})),this},t["un"+e]=o["un"+e]=function(t){for(var n=this.events||[],i=n.length;i--;)if(n[i].name==e&&(n[i].f==t||!t))return n[i].unbind(),n.splice(i,1),!n.length&&delete this.events,this;return this}}(l[v]);o.hover=function(t,e,n,i){return this.mouseover(t,n).mouseout(e,i||n)},o.unhover=function(t,e){return this.unmouseover(t).unmouseout(e)};var b=[];o.drag=function(e,i,r,o,a,s){function l(l,u,h){(l.originalEvent||l).preventDefault(),this._drag.x=u,this._drag.y=h,this._drag.id=l.identifier,!g.length&&t.mousemove(y).mouseup(_),g.push({el:this,move_scope:o,start_scope:a,end_scope:s}),i&&n.on("snap.drag.start."+this.id,i),e&&n.on("snap.drag.move."+this.id,e),r&&n.on("snap.drag.end."+this.id,r),n("snap.drag.start."+this.id,a||o||this,u,h,l)}if(!arguments.length){var u;return this.drag(function(t,e){this.attr({transform:u+(u?"T":"t")+[t,e]})},function(){u=this.transform().local})}return this._drag={},b.push({el:this,start:l}),this.mousedown(l),this},o.undrag=function(){for(var e=b.length;e--;)b[e].el==this&&(this.unmousedown(b[e].start),b.splice(e,1),n.unbind("snap.drag.*."+this.id));return!b.length&&t.unmousemove(y).unmouseup(_),this}}),r.plugin(function(t,e,i){var r=(e.prototype,i.prototype),o=/^\s*url\((.+)\)/,a=String,s=t._.$;t.filter={},r.filter=function(n){var i=this;"svg"!=i.type&&(i=i.paper);var r=t.parse(a(n)),o=t._.id(),l=(i.node.offsetWidth,i.node.offsetHeight,s("filter"));return s(l,{id:o,filterUnits:"userSpaceOnUse"}),l.appendChild(r.node),i.defs.appendChild(l),new e(l)},n.on("snap.util.getattr.filter",function(){n.stop();var e=s(this.node,"filter");if(e){var i=a(e).match(o);return i&&t.select(i[1])}}),n.on("snap.util.attr.filter",function(i){if(i instanceof e&&"filter"==i.type){n.stop();var r=i.node.id;r||(s(i.node,{id:i.id}),r=i.id),s(this.node,{filter:t.url(r)})}i&&"none"!=i||(n.stop(),this.node.removeAttribute("filter"))}),t.filter.blur=function(e,n){null==e&&(e=2);var i=null==n?e:[e,n];return t.format('<feGaussianBlur stdDeviation="{def}"/>',{def:i})},t.filter.blur.toString=function(){return this()},t.filter.shadow=function(e,n,i,r,o){return"string"==typeof i&&(r=i,o=r,i=4),"string"!=typeof r&&(o=r,r="#000"),r=r||"#000",null==i&&(i=4),null==o&&(o=1),null==e&&(e=0,n=2),null==n&&(n=e),r=t.color(r),t.format('<feGaussianBlur in="SourceAlpha" stdDeviation="{blur}"/><feOffset dx="{dx}" dy="{dy}" result="offsetblur"/><feFlood flood-color="{color}"/><feComposite in2="offsetblur" operator="in"/><feComponentTransfer><feFuncA type="linear" slope="{opacity}"/></feComponentTransfer><feMerge><feMergeNode/><feMergeNode in="SourceGraphic"/></feMerge>',{color:r,dx:e,dy:n,blur:i,opacity:o})},t.filter.shadow.toString=function(){return this()},t.filter.grayscale=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {b} {h} 0 0 0 0 0 1 0"/>',{a:.2126+.7874*(1-e),b:.7152-.7152*(1-e),c:.0722-.0722*(1-e),d:.2126-.2126*(1-e),e:.7152+.2848*(1-e),f:.0722-.0722*(1-e),g:.2126-.2126*(1-e),h:.0722+.9278*(1-e)})},t.filter.grayscale.toString=function(){return this()},t.filter.sepia=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="matrix" values="{a} {b} {c} 0 0 {d} {e} {f} 0 0 {g} {h} {i} 0 0 0 0 0 1 0"/>',{a:.393+.607*(1-e),b:.769-.769*(1-e),c:.189-.189*(1-e),d:.349-.349*(1-e),e:.686+.314*(1-e),f:.168-.168*(1-e),g:.272-.272*(1-e),h:.534-.534*(1-e),i:.131+.869*(1-e)})},t.filter.sepia.toString=function(){return this()},t.filter.saturate=function(e){return null==e&&(e=1),t.format('<feColorMatrix type="saturate" values="{amount}"/>',{amount:1-e})},t.filter.saturate.toString=function(){return this()},t.filter.hueRotate=function(e){return e=e||0,t.format('<feColorMatrix type="hueRotate" values="{angle}"/>',{angle:e})},t.filter.hueRotate.toString=function(){return this()},t.filter.invert=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="table" tableValues="{amount} {amount2}"/><feFuncG type="table" tableValues="{amount} {amount2}"/><feFuncB type="table" tableValues="{amount} {amount2}"/></feComponentTransfer>',{amount:e,amount2:1-e})},t.filter.invert.toString=function(){return this()},t.filter.brightness=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}"/><feFuncG type="linear" slope="{amount}"/><feFuncB type="linear" slope="{amount}"/></feComponentTransfer>',{amount:e})},t.filter.brightness.toString=function(){return this()},t.filter.contrast=function(e){return null==e&&(e=1),t.format('<feComponentTransfer><feFuncR type="linear" slope="{amount}" intercept="{amount2}"/><feFuncG type="linear" slope="{amount}" intercept="{amount2}"/><feFuncB type="linear" slope="{amount}" intercept="{amount2}"/></feComponentTransfer>',{amount:e,amount2:.5-e/2})},t.filter.contrast.toString=function(){return this()}}),r})}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-libs"]={}}(),function(){Package.meteor.Meteor;"undefined"==typeof Package&&(Package={}),Package.coffeescript={}}(),function(){{var t;Package.meteor.Meteor}(function(){t={extensions:{}};var e=(t.forEach=function(t,e){if("function"==typeof t.forEach)t.forEach(e);else{var n,i=t.length;for(n=0;i>n;n++)e(t[n],n,t)}},function(t){return t.replace(/[_-]||\s/g,"").toLowerCase()});t.converter=function(n){var i,r,o,a=0,s=[],l=[];if("undefind"!=typeof module&&"undefined"!=typeof exports&&"undefind"!=typeof require){var u=require("fs");if(u){var h=u.readdirSync((__dirname||".")+"/extensions").filter(function(t){return~t.indexOf(".js")}).map(function(t){return t.replace(/\.js$/,"")});t.forEach(h,function(n){var i=e(n);t.extensions[i]=require("./extensions/"+n)})}}if(this.makeHtml=function(e){return i={},r={},o=[],e=e.replace(/~/g,"~T"),e=e.replace(/\$/g,"~D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e="\n\n"+e+"\n\n",e=B(e),e=e.replace(/^[ \t]+$/gm,""),t.forEach(s,function(t){e=p(t,e)}),e=C(e),e=m(e),e=f(e),e=y(e),e=F(e),e=e.replace(/~D/g,"$$"),e=e.replace(/~T/g,"~"),t.forEach(l,function(t){e=p(t,e)}),e},n&&n.extensions){var c=this;t.forEach(n.extensions,function(n){if("string"==typeof n&&(n=t.extensions[e(n)]),"function"!=typeof n)throw"Extension '"+n+"' could not be loaded.  It was either not found or is not a valid extension.";t.forEach(n(c),function(t){t.type?"language"===t.type||"lang"===t.type?s.push(t):("output"===t.type||"html"===t.type)&&l.push(t):l.push(t)})})}var d,p=function(t,e){if(t.regex){var n=new RegExp(t.regex,"g");return e.replace(n,t.replace)}return t.filter?t.filter(e):void 0},f=function(t){return t+="~0",t=t.replace(/^[ ]{0,3}\[(.+)\]:[ \t]*\n?[ \t]*<?(\S+?)>?[ \t]*\n?[ \t]*(?:(\n*)["(](.+?)[")][ \t]*)?(?:\n+|(?=~0))/gm,function(t,e,n,o,a){return e=e.toLowerCase(),i[e]=I(n),o?o+a:(a&&(r[e]=a.replace(/"/g,"&quot;")),"")}),t=t.replace(/~0/,"")},m=function(t){t=t.replace(/\n/g,"\n\n");return t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|ins|del)\b[^\r]*?\n<\/\2>[ \t]*(?=\n+))/gm,g),t=t.replace(/^(<(p|div|h[1-6]|blockquote|pre|table|dl|ol|ul|script|noscript|form|fieldset|iframe|math|style|section|header|footer|nav|article|aside)\b[^\r]*?<\/\2>[ \t]*(?=\n+)\n)/gm,g),t=t.replace(/(\n[ ]{0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,g),t=t.replace(/(\n\n[ ]{0,3}<!(--[^\r]*?--\s*)+>[ \t]*(?=\n{2,}))/g,g),t=t.replace(/(?:\n\n)([ ]{0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,g),t=t.replace(/\n\n/g,"\n")},g=function(t,e){var n=e;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(o.push(n)-1)+"K\n\n"},y=function(t){t=M(t);var e=L("<hr />");return t=t.replace(/^[ ]{0,2}([ ]?\*[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\-[ ]?){3,}[ \t]*$/gm,e),t=t.replace(/^[ ]{0,2}([ ]?\_[ ]?){3,}[ \t]*$/gm,e),t=k(t),t=S(t),t=E(t),t=m(t),t=O(t)},_=function(t){return t=P(t),t=v(t),t=R(t),t=x(t),t=b(t),t=N(t),t=I(t),t=A(t),t=t.replace(/  +\n/g," <br />\n")},v=function(t){var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=U(e,"\\`*_")})},b=function(t){return t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,w),t=t.replace(/(\[((?:\[[^\]]*\]|[^\[\]])*)\]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,w),t=t.replace(/(\[([^\[\]]+)\])()()()()()/g,w)},w=function(t,e,n,o,a,s,l,u){void 0==u&&(u="");var h=e,c=n,d=o.toLowerCase(),p=a,f=u;if(""==p)if(""==d&&(d=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+d,void 0!=i[d])p=i[d],void 0!=r[d]&&(f=r[d]);else{if(!(h.search(/\(\s*\)$/m)>-1))return h;p=""}p=U(p,"*_");var m='<a href="'+p+'"';return""!=f&&(f=f.replace(/"/g,"&quot;"),f=U(f,"*_"),m+=' title="'+f+'"'),m+=">"+c+"</a>"},x=function(t){return t=t.replace(/(!\[(.*?)\][ ]?(?:\n[ ]*)?\[(.*?)\])()()()()/g,T),t=t.replace(/(!\[(.*?)\]\s?\([ \t]*()<?(\S+?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,T)},T=function(t,e,n,o,a,s,l,u){var h=e,c=n,d=o.toLowerCase(),p=a,f=u;if(f||(f=""),""==p){if(""==d&&(d=c.toLowerCase().replace(/ ?\n/g," ")),p="#"+d,void 0==i[d])return h;p=i[d],void 0!=r[d]&&(f=r[d])}c=c.replace(/"/g,"&quot;"),p=U(p,"*_");var m='<img src="'+p+'" alt="'+c+'"';return f=f.replace(/"/g,"&quot;"),f=U(f,"*_"),m+=' title="'+f+'"',m+=" />"},M=function(t){function e(t){return t.replace(/[^\w]/g,"").toLowerCase()}return t=t.replace(/^(.+)[ \t]*\n=+[ \t]*\n+/gm,function(t,n){return L('<h1 id="'+e(n)+'">'+_(n)+"</h1>")}),t=t.replace(/^(.+)[ \t]*\n-+[ \t]*\n+/gm,function(t,n){return L('<h2 id="'+e(n)+'">'+_(n)+"</h2>")}),t=t.replace(/^(\#{1,6})[ \t]*(.+?)[ \t]*\#*\n+/gm,function(t,n,i){var r=n.length;return L("<h"+r+' id="'+e(i)+'">'+_(i)+"</h"+r+">")})},k=function(t){t+="~0";var e=/^(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm;return a?t=t.replace(e,function(t,e,n){var i=e,r=n.search(/[*+-]/g)>-1?"ul":"ol";i=i.replace(/\n{2,}/g,"\n\n\n");var o=d(i);return o=o.replace(/\s+$/,""),o="<"+r+">"+o+"</"+r+">\n"}):(e=/(\n\n|^\n?)(([ ]{0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/g,t=t.replace(e,function(t,e,n,i){var r=e,o=n,a=i.search(/[*+-]/g)>-1?"ul":"ol",o=o.replace(/\n{2,}/g,"\n\n\n"),s=d(o);return s=r+"<"+a+">\n"+s+"</"+a+">\n"})),t=t.replace(/~0/,"")};d=function(t){return a++,t=t.replace(/\n{2,}$/,"\n"),t+="~0",t=t.replace(/(\n)?(^[ \t]*)([*+-]|\d+[.])[ \t]+([^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm,function(t,e,n,i,r){var o=r,a=e;return a||o.search(/\n{2,}/)>-1?o=y(j(o)):(o=k(j(o)),o=o.replace(/\n$/,""),o=_(o)),"<li>"+o+"</li>\n"}),t=t.replace(/~0/g,""),a--,t};var S=function(t){return t+="~0",t=t.replace(/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g,function(t,e,n){var i=e,r=n;return i=D(j(i)),i=B(i),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code>"+i+"\n</code></pre>",L(i)+r}),t=t.replace(/~0/,"")},C=function(t){return t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,e,n){var i=e,r=n;return r=D(r),r=B(r),r=r.replace(/^\n+/g,""),r=r.replace(/\n+$/g,""),r="<pre><code"+(i?' class="'+i+'"':"")+">"+r+"\n</code></pre>",L(r)}),t=t.replace(/~0/,"")},L=function(t){return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(o.push(t)-1)+"K\n\n"},P=function(t){return t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,n,i){var r=i;return r=r.replace(/^([ \t]*)/g,""),r=r.replace(/[ \t]*$/g,""),r=D(r),e+"<code>"+r+"</code>"})},D=function(t){return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=U(t,"*_{}[]\\",!1)},A=function(t){return t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")},E=function(t){return t=t.replace(/((^[ \t]*>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,e){var n=e;return n=n.replace(/^[ \t]*>[ \t]?/gm,"~0"),n=n.replace(/~0/g,""),n=n.replace(/^[ \t]+$/gm,""),n=y(n),n=n.replace(/(^|\n)/g,"$1  "),n=n.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var n=e;return n=n.replace(/^  /gm,"~0"),n=n.replace(/~0/g,"")}),L("<blockquote>\n"+n+"\n</blockquote>")})},O=function(t){t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var e=t.split(/\n{2,}/g),n=[],i=e.length,r=0;i>r;r++){var a=e[r];a.search(/~K(\d+)K/g)>=0?n.push(a):a.search(/\S/)>=0&&(a=_(a),a=a.replace(/^([ \t]*)/g,"<p>"),a+="</p>",n.push(a))}i=n.length;for(var r=0;i>r;r++)for(;n[r].search(/~K(\d+)K/)>=0;){var s=o[RegExp.$1];s=s.replace(/\$/g,"$$$$"),n[r]=n[r].replace(/~K\d+K/,s)}return n.join("\n\n")},I=function(t){return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")},R=function(t){return t=t.replace(/\\(\\)/g,H),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,H)},N=function(t){return t=t.replace(/<((https?|ftp|dict):[^'">\s]+)>/gi,'<a href="$1">$1</a>'),t=t.replace(/<(?:mailto:)?([-.\w]+\@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,function(t,e){return Y(F(e))})},Y=function(t){var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,function(t){if("@"==t)t=e[Math.floor(2*Math.random())](t);else if(":"!=t){var n=Math.random();t=n>.9?e[2](t):n>.45?e[1](t):e[0](t)}return t}),t='<a href="'+t+'">'+t+"</a>",t=t.replace(/">.+:/g,'">')},F=function(t){return t=t.replace(/~E(\d+)E/g,function(t,e){var n=parseInt(e);return String.fromCharCode(n)})},j=function(t){return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")},B=function(t){return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,function(t,e){for(var n=e,i=4-n.length%4,r=0;i>r;r++)n+=" ";return n}),t=t.replace(/~A/g,"    "),t=t.replace(/~B/g,"")},U=function(t,e,n){var i="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(i="\\\\"+i);var r=new RegExp(i,"g");return t=t.replace(r,H)},H=function(t,e){var n=e.charCodeAt(0);return"~E"+n+"E"}},"undefined"!=typeof module&&(module.exports=t),"function"==typeof define&&define.amd&&define("showdown",function(){return t})}).call(this),function(){if(Package.templating){var e=Package.templating.Template,n=Package.ui.UI,i=Package.htmljs.HTML,r=Package.blaze.Blaze;n.registerHelper("markdown",e.__create__("markdown",function(){var e=this,n="";e.templateContentBlock&&(n=r.toText(e.templateContentBlock,i.TEXTMODE.STRING));var o=new t.converter;return i.Raw(o.makeHtml(n))}))}}.call(this),"undefined"==typeof Package&&(Package={}),Package.showdown={Showdown:t}}(),function(){var t,e,n,i,r,o,a,s=Package.meteor.Meteor,l=Package.deps.Deps,u=Package.underscore._,h=(Package.check.check,Package.check.Match),c=Package.random.Random;(function(){!function(){"use strict";function t(t){this.s=null!==t&&void 0!==t?"string"==typeof t?t:t.toString():t,this.orig=t,null!==t&&void 0!==t?this.__defineGetter__?this.__defineGetter__("length",function(){return this.s.length}):this.length=t.length:this.length=-1}function e(){for(var t in h)!function(t){var e=h[t];u.hasOwnProperty(t)||(c.push(t),u[t]=function(){return String.prototype.s=this,e.apply(this,arguments)})}(t)}function n(){for(var t=0;t<c.length;++t)delete String.prototype[c[t]];c.length=0}function i(){for(var t=r(),e={},n=0;n<t.length;++n){var i=t[n],o=u[i];try{var a=typeof o.apply("teststring",[]);e[i]=a}catch(s){}}return e}function r(){var t=[];if(Object.getOwnPropertyNames)return t=Object.getOwnPropertyNames(u),t.splice(t.indexOf("valueOf"),1),t.splice(t.indexOf("toString"),1),t;var e={};for(var n in String.prototype)e[n]=n;for(var n in Object.prototype)delete e[n];for(var n in e)t.push(n);return t}function o(e){return new t(e)}function a(t,e){var n,i=[];for(n=0;n<t.length;n++)i.push(t[n]),e&&e.call(t,t[n],n);return i}var s="1.5.0",l={},u=String.prototype,h=t.prototype={between:function(e,n){var i=this.s,r=i.indexOf(e),o=i.indexOf(n),a=r+e.length;return new t(o>r?i.slice(a,o):"")},camelize:function(){var e=this.trim().s.replace(/(\-|_|\s)+(.)?/g,function(t,e,n){return n?n.toUpperCase():""});return new t(e)},capitalize:function(){return new t(this.s.substr(0,1).toUpperCase()+this.s.substring(1).toLowerCase())},charAt:function(t){return this.s.charAt(t)},chompLeft:function(e){var n=this.s;return 0===n.indexOf(e)?(n=n.slice(e.length),new t(n)):this},chompRight:function(e){if(this.endsWith(e)){var n=this.s;return n=n.slice(0,n.length-e.length),new t(n)}return this},collapseWhitespace:function(){var e=this.s.replace(/[\s\xa0]+/g," ").replace(/^\s+|\s+$/g,"");return new t(e)},contains:function(t){return this.s.indexOf(t)>=0},count:function(t){for(var e=0,n=this.s.indexOf(t);n>=0;)e+=1,n=this.s.indexOf(t,n+1);return e},dasherize:function(){var e=this.trim().s.replace(/[_\s]+/g,"-").replace(/([A-Z])/g,"-$1").replace(/-+/g,"-").toLowerCase();return new t(e)},decodeHtmlEntities:function(){var e=this.s;return e=e.replace(/&#(\d+);?/g,function(t,e){return String.fromCharCode(e)}).replace(/&#[xX]([A-Fa-f0-9]+);?/g,function(t,e){return String.fromCharCode(parseInt(e,16))}).replace(/&([^;\W]+;?)/g,function(t,e){var n=e.replace(/;$/,""),i=l[e]||e.match(/;$/)&&l[n];return"number"==typeof i?String.fromCharCode(i):"string"==typeof i?i:t}),new t(e)},endsWith:function(t){var e=this.s.length-t.length;return e>=0&&this.s.indexOf(t,e)===e},escapeHTML:function(){return new t(this.s.replace(/[&<>"']/g,function(t){return"&"+m[t]+";"}))},ensureLeft:function(e){var n=this.s;return 0===n.indexOf(e)?this:new t(e+n)},ensureRight:function(e){var n=this.s;return this.endsWith(e)?this:new t(n+e)},humanize:function(){if(null===this.s||void 0===this.s)return new t("");var e=this.underscore().replace(/_id$/,"").replace(/_/g," ").trim().capitalize();return new t(e)},isAlpha:function(){return!/[^a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isAlphaNumeric:function(){return!/[^0-9a-z\xC0-\xFF]/.test(this.s.toLowerCase())},isEmpty:function(){return null===this.s||void 0===this.s?!0:/^[\s\xa0]*$/.test(this.s)},isLower:function(){return this.isAlpha()&&this.s.toLowerCase()===this.s},isNumeric:function(){return!/[^0-9]/.test(this.s)},isUpper:function(){return this.isAlpha()&&this.s.toUpperCase()===this.s},left:function(e){if(e>=0){var n=this.s.substr(0,e);return new t(n)}return this.right(-e)},lines:function(){return this.replaceAll("\r\n","\n").s.split("\n")},pad:function(e,n){if(n=n||" ",this.s.length>=e)return new t(this.s);e-=this.s.length;var i=Array(Math.ceil(e/2)+1).join(n),r=Array(Math.floor(e/2)+1).join(n);return new t(i+this.s+r)},padLeft:function(e,n){return n=n||" ",new t(this.s.length>=e?this.s:Array(e-this.s.length+1).join(n)+this.s)},padRight:function(e,n){return n=n||" ",new t(this.s.length>=e?this.s:this.s+Array(e-this.s.length+1).join(n))},parseCSV:function(t,e,n,i){t=t||",",n=n||"\\","undefined"==typeof e&&(e='"');var r=0,o=[],a=[],s=this.s.length,l=!1,u=this,h=function(t){return u.s.charAt(t)};if("undefined"!=typeof i)var c=[];for(e||(l=!0);s>r;){var d=h(r);switch(d){case n:if(l&&(n!==e||h(r+1)===e)){r+=1,o.push(h(r));break}if(n!==e)break;case e:l=!l;break;case t:l&&e?o.push(d):(a.push(o.join("")),o.length=0);break;case i:l?o.push(d):c&&(a.push(o.join("")),c.push(a),a=[],o.length=0);break;default:l&&o.push(d)}r+=1}return a.push(o.join("")),c?(c.push(a),c):a},replaceAll:function(e,n){var i=this.s.split(e).join(n);return new t(i)},right:function(e){if(e>=0){var n=this.s.substr(this.s.length-e,e);return new t(n)}return this.left(-e)},slugify:function(){var e=new t(this.s.replace(/[^\w\s-]/g,"").toLowerCase()).dasherize().s;return"-"===e.charAt(0)&&(e=e.substr(1)),new t(e)},startsWith:function(t){return 0===this.s.lastIndexOf(t,0)},stripPunctuation:function(){return new t(this.s.replace(/[^\w\s]|_/g,"").replace(/\s+/g," "))},stripTags:function(){var e=this.s,n=arguments.length>0?arguments:[""];return a(n,function(t){e=e.replace(RegExp("</?"+t+"[^<>]*>","gi"),"")}),new t(e)},template:function(e,n,i){var r=this.s,n=n||o.TMPL_OPEN,i=i||o.TMPL_CLOSE,a=new RegExp(n+"(.+?)"+i,"g"),s=r.match(a)||[];return s.forEach(function(t){var o=t.substring(n.length,t.length-i.length);e[o]&&(r=r.replace(t,e[o]))}),new t(r)},times:function(e){return new t(new Array(e+1).join(this.s))},toBoolean:function(){if("string"==typeof this.orig){var t=this.s.toLowerCase();return"true"===t||"yes"===t||"on"===t}return this.orig===!0||1===this.orig},toFloat:function(t){var e=parseFloat(this.s);return t?parseFloat(e.toFixed(t)):e},toInt:function(){return/^\s*-?0x/i.test(this.s)?parseInt(this.s,16):parseInt(this.s,10)},trim:function(){var e;return e="undefined"==typeof u.trim?this.s.replace(/(^\s*|\s*$)/g,""):this.s.trim(),new t(e)},trimLeft:function(){var e;return e=u.trimLeft?this.s.trimLeft():this.s.replace(/(^\s*)/g,""),new t(e)},trimRight:function(){var e;return e=u.trimRight?this.s.trimRight():this.s.replace(/\s+$/,""),new t(e)},truncate:function(e,n){var i=this.s;if(e=~~e,n=n||"...",i.length<=e)return new t(i);var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=i.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):new t(o.slice(0,o.length-1)).trimRight().s,new t((o+n).length>i.length?i:i.slice(0,o.length)+n)},toCSV:function(){function e(t){return null!==t&&""!==t}var n=",",i='"',r="\\",o=!0,a=!1,s=[];if("object"==typeof arguments[0]?(n=arguments[0].delimiter||n,n=arguments[0].separator||n,i=arguments[0].qualifier||i,o=!!arguments[0].encloseNumbers,r=arguments[0].escape||r,a=!!arguments[0].keys):"string"==typeof arguments[0]&&(n=arguments[0]),"string"==typeof arguments[1]&&(i=arguments[1]),null===arguments[1]&&(i=null),this.orig instanceof Array)s=this.orig;else for(var l in this.orig)this.orig.hasOwnProperty(l)&&s.push(a?l:this.orig[l]);for(var u=r+i,h=[],c=0;c<s.length;++c){var d=e(i);if("number"==typeof s[c]&&(d&=o),d&&h.push(i),null!==s[c]&&void 0!==s[c]){var p=new t(s[c]).replaceAll(i,u).s;h.push(p)}else h.push("");d&&h.push(i),n&&h.push(n)}return h.length=h.length-1,new t(h.join(""))},toString:function(){return this.s},underscore:function(){var e=this.trim().s.replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase();return new t(this.s.charAt(0)).isUpper()&&(e="_"+e),new t(e)},unescapeHTML:function(){return new t(this.s.replace(/\&([^;]+);/g,function(t,e){var n;return e in f?f[e]:(n=e.match(/^#x([\da-fA-F]+)$/))?String.fromCharCode(parseInt(n[1],16)):(n=e.match(/^#(\d+)$/))?String.fromCharCode(~~n[1]):t}))},valueOf:function(){return this.s.valueOf()}},c=[],d=i();for(var p in d)!function(e){var n=u[e];"function"==typeof n&&(h[e]||(h[e]="string"===d[e]?function(){return new t(n.apply(this,arguments))}:n))}(p);h.repeat=h.times,h.include=h.contains,h.toInteger=h.toInt,h.toBool=h.toBoolean,h.decodeHTMLEntities=h.decodeHtmlEntities,o.extendPrototype=e,o.restorePrototype=n,o.VERSION=s,o.TMPL_OPEN="{{",o.TMPL_CLOSE="}}",o.ENTITIES=l,"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=o:"function"==typeof define&&define.amd?define([],function(){return o}):window.S=o;var f={lt:"<",gt:">",quot:'"',apos:"'",amp:"&"},m={};for(var g in f)m[f[g]]=g;l={amp:"&",gt:">",lt:"<",quot:'"',apos:"'",AElig:198,Aacute:193,Acirc:194,Agrave:192,Aring:197,Atilde:195,Auml:196,Ccedil:199,ETH:208,Eacute:201,Ecirc:202,Egrave:200,Euml:203,Iacute:205,Icirc:206,Igrave:204,Iuml:207,Ntilde:209,Oacute:211,Ocirc:212,Ograve:210,Oslash:216,Otilde:213,Ouml:214,THORN:222,Uacute:218,Ucirc:219,Ugrave:217,Uuml:220,Yacute:221,aacute:225,acirc:226,aelig:230,agrave:224,aring:229,atilde:227,auml:228,ccedil:231,eacute:233,ecirc:234,egrave:232,eth:240,euml:235,iacute:237,icirc:238,igrave:236,iuml:239,ntilde:241,oacute:243,ocirc:244,ograve:242,oslash:248,otilde:245,ouml:246,szlig:223,thorn:254,uacute:250,ucirc:251,ugrave:249,uuml:252,yacute:253,yuml:255,copy:169,reg:174,nbsp:160,iexcl:161,cent:162,pound:163,curren:164,yen:165,brvbar:166,sect:167,uml:168,ordf:170,laquo:171,not:172,shy:173,macr:175,deg:176,plusmn:177,sup1:185,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,ordm:186,raquo:187,frac14:188,frac12:189,frac34:190,iquest:191,times:215,divide:247,"OElig;":338,"oelig;":339,"Scaron;":352,"scaron;":353,"Yuml;":376,"fnof;":402,"circ;":710,"tilde;":732,"Alpha;":913,"Beta;":914,"Gamma;":915,"Delta;":916,"Epsilon;":917,"Zeta;":918,"Eta;":919,"Theta;":920,"Iota;":921,"Kappa;":922,"Lambda;":923,"Mu;":924,"Nu;":925,"Xi;":926,"Omicron;":927,"Pi;":928,"Rho;":929,"Sigma;":931,"Tau;":932,"Upsilon;":933,"Phi;":934,"Chi;":935,"Psi;":936,"Omega;":937,"alpha;":945,"beta;":946,"gamma;":947,"delta;":948,"epsilon;":949,"zeta;":950,"eta;":951,"theta;":952,"iota;":953,"kappa;":954,"lambda;":955,"mu;":956,"nu;":957,"xi;":958,"omicron;":959,"pi;":960,"rho;":961,"sigmaf;":962,"sigma;":963,"tau;":964,"upsilon;":965,"phi;":966,"chi;":967,"psi;":968,"omega;":969,"thetasym;":977,"upsih;":978,"piv;":982,"ensp;":8194,"emsp;":8195,"thinsp;":8201,"zwnj;":8204,"zwj;":8205,"lrm;":8206,"rlm;":8207,"ndash;":8211,"mdash;":8212,"lsquo;":8216,"rsquo;":8217,"sbquo;":8218,"ldquo;":8220,"rdquo;":8221,"bdquo;":8222,"dagger;":8224,"Dagger;":8225,"bull;":8226,"hellip;":8230,"permil;":8240,"prime;":8242,"Prime;":8243,"lsaquo;":8249,"rsaquo;":8250,"oline;":8254,"frasl;":8260,"euro;":8364,"image;":8465,"weierp;":8472,"real;":8476,"trade;":8482,"alefsym;":8501,"larr;":8592,"uarr;":8593,"rarr;":8594,"darr;":8595,"harr;":8596,"crarr;":8629,"lArr;":8656,"uArr;":8657,"rArr;":8658,"dArr;":8659,"hArr;":8660,"forall;":8704,"part;":8706,"exist;":8707,"empty;":8709,"nabla;":8711,"isin;":8712,"notin;":8713,"ni;":8715,"prod;":8719,"sum;":8721,"minus;":8722,"lowast;":8727,"radic;":8730,"prop;":8733,"infin;":8734,"ang;":8736,"and;":8743,"or;":8744,"cap;":8745,"cup;":8746,"int;":8747,"there4;":8756,"sim;":8764,"cong;":8773,"asymp;":8776,"ne;":8800,"equiv;":8801,"le;":8804,"ge;":8805,"sub;":8834,"sup;":8835,"nsub;":8836,"sube;":8838,"supe;":8839,"oplus;":8853,"otimes;":8855,"perp;":8869,"sdot;":8901,"lceil;":8968,"rceil;":8969,"lfloor;":8970,"rfloor;":8971,"lang;":9001,"rang;":9002,"loz;":9674,"spades;":9824,"clubs;":9827,"hearts;":9829,"diams;":9830}}.call(this)}).call(this),function(){e=function(t,a){function s(t,e,o,l,c,d){!l&&o&&"$"===o.substring(0,1)&&(l=o,o=null);var p,f=!1,m=!1;o&&(c||("$push"===l||"$addToSet"===l||"$pop"===l?(n(t)&&"$each"in t?(t=t.$each,e+="[$each]"):o+=".0",c=!0):"$pull"===l&&(o+=".0",n(t)&&(m=!0),c=!0)),p=i(o),f=u.contains(a,p),e&&(h._affectedKeys[e]=o,h._genericAffectedKeys[e]=p,d&&h._positionsInsideArrays.push(e))),m||(u.isArray(t)&&!u.isEmpty(t)?(e&&h._parentPositions.push(e),u.each(t,function(t,n){s(t,e?e+"["+n+"]":n,o+"."+n,l,c,!0)
})):(n(t)&&!f||!e)&&(e&&!u.isEmpty(t)&&(h._parentPositions.push(e),h._objectPositions.push(e)),u.each(t,function(n,i){void 0===n?delete t[i]:"$slice"!==i&&s(n,e?e+"["+i+"]":i,r(o,i),l,c,d)})))}function l(){h._affectedKeys={},h._genericAffectedKeys={},h._parentPositions=[],h._positionsInsideArrays=[],h._objectPositions=[],s(h._obj)}var h=this;h._obj=t,h._affectedKeys={},h._genericAffectedKeys={},h._parentPositions=[],h._positionsInsideArrays=[],h._objectPositions=[],s(h._obj),h.forEachNode=function(t,e){if("function"!=typeof t)throw new Error("filter requires a loop function");e=u.extend({endPointsOnly:!0},e);var n={};u.each(h._affectedKeys,function(i,r){e.endPointsOnly&&u.contains(h._parentPositions,r)||t.call({value:h.getValueForPosition(r),operator:o(r),position:r,key:i,genericKey:h._genericAffectedKeys[r],updateValue:function(t){n[r]=t},remove:function(){n[r]=void 0}})}),u.each(n,function(t,e){h.setValueForPosition(e,t)})},h.getValueForPosition=function(t){for(var e,i=t.split("["),r=h._obj,o=0,a=i.length;a>o;o++)if(e=i[o],"]"===e.slice(-1)&&(e=e.slice(0,-1)),r=r[e],!u.isArray(r)&&!n(r)&&a-1>o)return;return r},h.setValueForPosition=function(t,e){for(var i,r,o=t.split("["),a=h._obj,s=0,c=o.length;c>s;s++)if(r=o[s],"]"===r.slice(-1)&&(r=r.slice(0,-1)),s===c-1)a[r]=e,void 0===e&&delete a[r];else if(void 0===a[r]&&void 0!==e&&(i=o[s+1],i=parseInt(i,10),a[r]=isNaN(i)?{}:[]),a=a[r],!u.isArray(a)&&!n(a)&&c-1>s)return;l()},h.removeValueForPosition=function(t){h.setValueForPosition(t,void 0)},h.getKeyForPosition=function(t){return h._affectedKeys[t]},h.getGenericKeyForPosition=function(t){return h._genericAffectedKeys[t]},h.getInfoForKey=function(t){var e=h.getPositionForKey(t);if(e)return{value:h.getValueForPosition(e),operator:o(e)};for(var n,i,r=h.getPositionsForGenericKey(t+".$"),a=0,s=r.length;s>a;a++)if(n=r[a],i=h.getValueForPosition(n)||h.getValueForPosition(n.slice(0,n.lastIndexOf("["))))return{value:i,operator:o(n)}},h.getPositionForKey=function(t){for(var e in h._affectedKeys)if(h._affectedKeys.hasOwnProperty(e)&&h._affectedKeys[e]===t)return e},h.getPositionsForGenericKey=function(t){var e=[];for(var n in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(n)&&h._genericAffectedKeys[n]===t&&e.push(n);return e},h.getValueForKey=function(t){var e=h.getPositionForKey(t);return e?h.getValueForPosition(e):void 0},h.addKey=function(t,n,i){var r=i?i+"["+t+"]":e._keyToPosition(t);h.setValueForPosition(r,n)},h.removeGenericKeys=function(t){for(var e in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(e)&&u.contains(t,h._genericAffectedKeys[e])&&h.removeValueForPosition(e)},h.removeGenericKey=function(t){for(var e in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(e)&&h._genericAffectedKeys[e]===t&&h.removeValueForPosition(e)},h.removeKey=function(t){for(var e in h._affectedKeys)h._affectedKeys.hasOwnProperty(e)&&h._affectedKeys[e]===t&&h.removeValueForPosition(e)},h.removeKeys=function(t){for(var e=0,n=t.length;n>e;e++)h.removeKey(t[e])},h.filterGenericKeys=function(t){var e,n=[],i=[];for(var r in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(r)&&(e=h._genericAffectedKeys[r],u.contains(n,e)||(n.push(e),e&&!t(e)&&i.push(e)));u.each(i,function(t){h.removeGenericKey(t)})},h.setValueForKey=function(t,e){for(var n in h._affectedKeys)h._affectedKeys.hasOwnProperty(n)&&h._affectedKeys[n]===t&&h.setValueForPosition(n,e)},h.setValueForGenericKey=function(t,e){for(var n in h._genericAffectedKeys)h._genericAffectedKeys.hasOwnProperty(n)&&h._genericAffectedKeys[n]===t&&h.setValueForPosition(n,e)},h.getObject=function(){return h._obj},h.getFlatObject=function(t){t=t||{};var e={};return u.each(h._affectedKeys,function(n,i){("string"==typeof n&&t.keepArrays===!0&&!u.contains(h._positionsInsideArrays,i)&&!u.contains(h._objectPositions,i)||!t.keepArrays&&!u.contains(h._parentPositions,i))&&(e[n]=h.getValueForPosition(i))}),e},h.affectsKey=function(t){return!!h.getPositionForKey(t)},h.affectsGenericKey=function(t){for(var e in h._genericAffectedKeys)if(h._genericAffectedKeys.hasOwnProperty(e)&&h._genericAffectedKeys[e]===t)return!0;return!1},h.affectsGenericKeyImplicit=function(t){for(var e in h._genericAffectedKeys)if(h._genericAffectedKeys.hasOwnProperty(e)){var n=h._genericAffectedKeys[e];if(n===t)return!0;if(n.substring(0,t.length+1)===t+".")return!0;var i=t.slice(-2);if(".$"===i&&t.slice(0,-2)===n)return!0}return!1}},e.expandKey=function(t,e,n){for(var i,r,o=e.split("["),a=n,s=0,l=o.length;l>s;s++)r=o[s],"]"===r.slice(-1)&&(r=r.slice(0,-1)),s===l-1?(a[r]=t,void 0===t&&delete a[r]):(i=o[s+1],i=parseInt(i,10),a[r]||(a[r]=isNaN(i)?{}:[])),a=a[r]},e._keyToPosition=function(t,e){var n="";return u.each(t.split("."),function(t,i){n+=0!==i||e?"["+t+"]":t}),n},e._positionToKey=function(t){var n=new e({});n.setValueForPosition(t,1);var i=n.getKeyForPosition(t);return n=null,i};var t=(u.isArray,function(t){return t===Object(t)});"function"!=typeof Object.getPrototypeOf&&(Object.getPrototypeOf="object"==typeof"".__proto__?function(t){return t.__proto__}:function(t){return t.constructor.prototype});var n=function(e){return t(e)&&Object.getPrototypeOf(e)===Object.prototype},i=function(t){return"string"!=typeof t?null:t.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},r=function(t,e){return"$each"===e?t:t?t+"."+e:e},o=function(t){var e=t.slice(0,t.indexOf("["));return"$"===e.substring(0,1)?e:null}}.call(this),function(){n={appendAffectedKey:function(t,e){return"$each"===e?t:t?t+"."+e:e},shouldCheck:function(t){if("$pushAll"===t)throw new Error("$pushAll is not supported; use $push + $each");return!u.contains(["$pull","$pullAll","$pop","$slice"],t)},isBlank:function(t){return"string"!=typeof t?!1:/^\s*$/.test(t)},isBlankNullOrUndefined:function(t){return void 0===t||null===t||n.isBlank(t)},isBlankOrNull:function(t){return null===t||n.isBlank(t)},errorObject:function(t,e,n){return{name:e,type:t,value:n}},isBasicObject:function(t){return u.isObject(t)&&Object.getPrototypeOf(t)===Object.prototype},safariBugFix:function(t){return"undefined"!=typeof Uint8Array&&t===Uint8Array||"undefined"!=typeof Uint16Array&&t===Uint16Array||"undefined"!=typeof Uint32Array&&t===Uint32Array||"undefined"!=typeof Uint8ClampedArray&&t===Uint8ClampedArray},isNotNullOrUndefined:function(t){return void 0!==t&&null!==t},extractOp:function(t){var e=t.slice(0,t.indexOf("["));return"$"===e.substring(0,1)?e:null},deleteIfPresent:function(t,e){e in t&&delete t[e]},looksLikeModifier:function(t){for(var e in t)if(t.hasOwnProperty(e)&&"$"===e.substring(0,1))return!0;return!1},dateToDateString:function(t){var e=t.getUTCMonth()+1;10>e&&(e="0"+e);var n=t.getUTCDate();return 10>n&&(n="0"+n),t.getUTCFullYear()+"-"+e+"-"+n}}}.call(this),function(){function r(t,e){s.startup(function(){l.autorun(function(){t.isValid()||console.log('SimpleSchema invalid keys for "'+e+'" context:',t.invalidKeys())})})}function o(t,i,r){function o(e){var n=this.key;if(!u.contains(l,n)){var o=n.lastIndexOf("."),a=-1===o?"":n.slice(0,o+1),s=!1,h=e.call(u.extend({isSet:void 0!==this.value,unset:function(){s=!0},value:this.value,operator:this.operator,field:function(e){var n=t.getInfoForKey(e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}},siblingField:function(e){var n=t.getInfoForKey(a+e)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator||null}}},r||{}),t.getObject());if(l.push(n),void 0===h)return void(s&&t.removeValueForPosition(this.position));var c,d;if(u.isObject(h))for(var p in h)if(h.hasOwnProperty(p)&&"$"===p.substring(0,1)){c=p,d=h[p];break}!c&&i&&"$"!==this.position.slice(0,1)&&(c="$set",d=h),c?(t.removeValueForPosition(this.position),t.setValueForPosition(c+"["+n+"]",d)):t.setValueForPosition(this.position,h)}}var a=this,l=[];s.isClient&&void 0===r.userId&&(r.userId=s.userId&&s.userId()||null),u.each(a._autoValues,function(r,a){var s,l,h,c;if(-1!==a.indexOf("$")){var d=a.slice(0,a.lastIndexOf("$")+1);h=a.slice(d.length+1),s=e._keyToPosition(h,!0),h="."+h,c=t.getPositionsForGenericKey(d)}else c=t.getPositionsForGenericKey(a),c.length?(l=a,h="",s=""):(l=a,h="",s="",c=i?["$set["+a+"]"]:[e._keyToPosition(a)]);u.each(c,function(i){o.call({key:(l||e._positionToKey(i))+h,value:t.getValueForPosition(i+s),operator:n.extractOp(i),position:i+s},r)})})}s.isServer&&(i=Npm.require("string")),s.isClient&&(i=window.S);var c={type:h.Any,label:h.Optional(h.OneOf(String,Function)),optional:h.Optional(h.OneOf(Boolean,Function)),min:h.Optional(h.OneOf(Number,Date,Function)),max:h.Optional(h.OneOf(Number,Date,Function)),minCount:h.Optional(h.OneOf(Number,Function)),maxCount:h.Optional(h.OneOf(Number,Function)),allowedValues:h.Optional(h.OneOf([h.Any],Function)),decimal:h.Optional(Boolean),regEx:h.Optional(h.OneOf(RegExp,[RegExp])),custom:h.Optional(Function),blackbox:h.Optional(Boolean),autoValue:h.Optional(Function),defaultValue:h.Optional(h.Any)};t=function(t,e){var n,i=this,r=[],o=[],a=[],s=[],d=[];e=e||{},t=t||{},u.isArray(t)||(t=[t]),i._schema=v(t),i._schemaKeys=[],i._autoValues={},i._blackboxKeys=[],i._validators=[],i._messages={},i._depsMessages=new l.Dependency,i._depsLabels={},u.each(i._schema,function(t,e){if(!h.test(t,c))throw new Error("Invalid definition for "+e+" field.");if(n=e.split(".")[0],i._schemaKeys.push(e),"defaultValue"in t)if("autoValue"in t)console.warn('SimpleSchema: Found both autoValue and defaultValue options for "'+e+'". Ignoring defaultValue.');else{if(".$"===e.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have defaultValue.');i._autoValues[e]=function(t){return function(){return null!==this.operator||this.isSet?void 0:t}}(t.defaultValue)}if("autoValue"in t){if(".$"===e.slice(-2))throw new Error('An array item field (one that ends with ".$") cannot have autoValue.');i._autoValues[e]=t.autoValue}i._depsLabels[e]=new l.Dependency,t.blackbox===!0&&i._blackboxKeys.push(e),u.contains(r,n)||(r.push(n),t.optional||a.push(n),t.custom&&d.push(n)),t.optional||o.push(e),t.custom&&s.push(e)}),i._firstLevelSchemaKeys=r,i._requiredSchemaKeys=o,i._firstLevelRequiredSchemaKeys=a,i._requiredObjectKeys=T(i._schema,o),i._customSchemaKeys=s,i._firstLevelCustomSchemaKeys=d,i._customObjectKeys=T(i._schema,s),i._validationContexts={}},t.extendOptions=function(t){u.extend(c,t)};var d="[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+\\/=?^_`{|}~-]+)*",p="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z](?:[a-z-]*[a-z])?",f="(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?(?:\\.|$))+",m="(?:(?:[0-1]?\\d{1,2}|2[0-4]\\d|25[0-5])(?:\\.|$)){4}",g="(?:(?:[\\dA-Fa-f]{1,4}(?::|$)){8}|(?=(?:[^:\\s]|:[^:\\s])*::(?:[^:\\s]|:[^:\\s])*$)[\\dA-Fa-f]{0,4}(?:::?(?:[\\dA-Fa-f]{1,4}|$)){1,6})",y="(?:"+[f,m,g].join("|")+")";t.RegEx={Email:new RegExp("^"+d+"@"+p+"$"),WeakEmail:new RegExp("^"+d+"@"+y+"$"),Domain:new RegExp("^"+p+"$"),WeakDomain:new RegExp("^"+y+"$"),IP:new RegExp("^(?:"+m+"|"+g+")$"),IPv4:new RegExp("^"+m+"$"),IPv6:new RegExp("^"+g+"$"),Url:/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i,Id:/^[23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz]{17}$/},t._makeGeneric=function(t){return"string"!=typeof t?null:t.replace(/\.[0-9]+\./g,".$.").replace(/\.[0-9]+/g,".$")},t._depsGlobalMessages=new l.Dependency,t.prototype=new h.Where,t.prototype.condition=function(t){var e,n,i=this;if(u.each(t,function(t,i){"$"===i.substring(0,1)?e=!0:n=!0}),e&&n)throw new h.Error("Object cannot contain modifier operators alongside other keys");if(!i.newContext().validate(t,{modifier:e,filter:!1,autoConvert:!1}))throw new h.Error("One or more properties do not match the schema.");return!0},t.prototype.namedContext=function(e){var n=this;return"string"!=typeof e&&(e="default"),n._validationContexts[e]||(n._validationContexts[e]=new a(n),t.debug&&s.isClient&&l.nonreactive(function(){r(n._validationContexts[e],e)})),n._validationContexts[e]},t._validators=[],t.addValidator=function(e){t._validators.push(e)},t.prototype.addValidator=t.prototype.validator=function(t){this._validators.push(t)},t.prototype.clean=function(n,i){var r=this;if(i=u.extend({filter:!0,autoConvert:!0,removeEmptyStrings:!0,getAutoValues:!0,isModifier:!1,extendAutoValueContext:{}},i||{}),"$pushAll"in n){console.warn("SimpleSchema.clean: $pushAll is deprecated; converting to $push with $each"),n.$push=n.$push||{};for(var a in n.$pushAll){n.$push[a]=n.$push[a]||{},n.$push[a].$each=n.$push[a].$each||[];for(var s=0,l=n.$pushAll[a].length;l>s;s++)n.$push[a].$each.push(n.$pushAll[a][s]);delete n.$pushAll}}var h=new e(n,r._blackboxKeys);return i.filter&&h.filterGenericKeys(function(e){var n=r.allowsKey(e);return!n&&t.debug&&console.info('SimpleSchema.clean: filtered out value that would have affected key "'+e+'", which is not allowed by the schema'),n}),(i.autoConvert||i.removeEmptyStrings)&&h.forEachNode(function(){if(this.genericKey){var e=r._schema[this.genericKey],n=this.value;if(e&&void 0!==n){var o=!1;if(i.autoConvert){var a=_(n,e.type);void 0!==a&&a!==n&&(t.debug&&console.info("SimpleSchema.clean: autoconverted value "+n+" from "+typeof n+" to "+typeof a+" for "+this.genericKey),this.updateValue(a),o=!0,!i.removeEmptyStrings||this.operator&&"$set"!==this.operator||"string"!=typeof a||a.length||this.remove())}if(!(!i.removeEmptyStrings||o||this.operator&&"$set"!==this.operator||"string"!=typeof n||n.length)&&(this.remove(),"$set"===this.operator)){var s=this.position.replace("$set","$unset");h.setValueForPosition(s,"")}}}},{endPointsOnly:!1}),i.getAutoValues&&o.call(r,h,i.isModifier,i.extendAutoValueContext),n},t.prototype.schema=function(e){var n=this;return null!=e?n._schema[t._makeGeneric(e)]:n._schema},t.prototype.getDefinition=function(t,e,n){var i=this,r=i.schema(t);return r?(r=u.isArray(e)?u.pick(r,e):u.clone(r),u.each(["min","max","minCount","maxCount","allowedValues","optional","label"],function(t){u.isFunction(r[t])&&(r[t]=r[t].call(n||{}))}),r.label=r.label||M(t),r):void 0},t.prototype.keyIsInBlackBox=function(e){var n,i,r=this,o=t._makeGeneric(e);do n=o.lastIndexOf("."),-1!==n&&(o=o.slice(0,n),i=r.getDefinition(o));while(-1!==n&&!i);return!(!i||!i.blackbox)},t.prototype.labels=function(t){var e=this;u.each(t,function(t,n){(u.isString(t)||u.isFunction(t))&&n in e._schema&&(e._schema[n].label=t,e._depsLabels[n]&&e._depsLabels[n].changed())})},t.prototype.label=function(t){var e=this;if(null==t){var n={};return u.each(e.schema(),function(t,i){n[i]=e.label(i)}),n}var i=e.getDefinition(t);return i?(e._depsLabels[t]&&e._depsLabels[t].depend(),i.label):null},t._globalMessages={required:"[label] is required",minString:"[label] must be at least [min] characters",maxString:"[label] cannot exceed [max] characters",minNumber:"[label] must be at least [min]",maxNumber:"[label] cannot exceed [max]",minDate:"[label] must be on or before [min]",maxDate:"[label] cannot be after [max]",minCount:"You must specify at least [minCount] values",maxCount:"You cannot specify more than [maxCount] values",noDecimal:"[label] must be an integer",notAllowed:"[value] is not an allowed value",expectedString:"[label] must be a string",expectedNumber:"[label] must be a number",expectedBoolean:"[label] must be a boolean",expectedArray:"[label] must be an array",expectedObject:"[label] must be an object",expectedConstructor:"[label] must be a [type]",regEx:[{msg:"[label] failed regular expression validation"},{exp:t.RegEx.Email,msg:"[label] must be a valid e-mail address"},{exp:t.RegEx.WeakEmail,msg:"[label] must be a valid e-mail address"},{exp:t.RegEx.Domain,msg:"[label] must be a valid domain"},{exp:t.RegEx.WeakDomain,msg:"[label] must be a valid domain"},{exp:t.RegEx.IP,msg:"[label] must be a valid IPv4 or IPv6 address"},{exp:t.RegEx.IPv4,msg:"[label] must be a valid IPv4 address"},{exp:t.RegEx.IPv6,msg:"[label] must be a valid IPv6 address"},{exp:t.RegEx.Url,msg:"[label] must be a valid URL"},{exp:t.RegEx.Id,msg:"[label] must be a valid alphanumeric ID"}],keyNotInSchema:"[label] is not allowed by the schema"},t.messages=function(e){u.extend(t._globalMessages,e),t._depsGlobalMessages.changed()},t.prototype.messages=function(t){var e=this;u.extend(e._messages,t),e._depsMessages.changed()},t.prototype.messageForError=function(e,i,r,o){function a(t){if("regEx"!==e||!u.isArray(t))return t;var n;return c&&(n=u.find(t,function(t){return t.exp&&t.exp.toString()===c})),n||(n=u.findWhere(t,{exp:null}),n||(n=u.findWhere(t,{exp:void 0}))),n?n.msg:null}var s=this;r=r||s.schema(i)||{};var l=e.indexOf("."),h=null;-1!==l&&(h=e.substring(l+1),h=parseInt(h,10),e=e.substring(0,l));var c;"regEx"===e&&(c=null==h||isNaN(h)?r.regEx:r.regEx[h],c&&(c=c.toString()));var d=e+" "+i,p=t._makeGeneric(i),f=e+" "+p;t._depsGlobalMessages.depend(),s._depsMessages.depend(),s._depsLabels[i]&&s._depsLabels[i].depend();var m=s._messages[d]||s._messages[f]||s._messages[e];if(m=a(m),m||(m=t._globalMessages[d]||t._globalMessages[f]||t._globalMessages[e],m=a(m)),!m)return"Unknown validation error";m=m.replace("[label]",s.label(i)),"undefined"!=typeof r.minCount&&(m=m.replace("[minCount]",r.minCount)),"undefined"!=typeof r.maxCount&&(m=m.replace("[maxCount]",r.maxCount)),void 0!==o&&null!==o&&(m=m.replace("[value]",o.toString()));var g=r.min,y=r.max;return"function"==typeof g&&(g=g()),"function"==typeof y&&(y=y()),r.type===Date||r.type===[Date]?("undefined"!=typeof g&&(m=m.replace("[min]",n.dateToDateString(g))),"undefined"!=typeof y&&(m=m.replace("[max]",n.dateToDateString(y)))):("undefined"!=typeof g&&(m=m.replace("[min]",g)),"undefined"!=typeof y&&(m=m.replace("[max]",y))),r.type instanceof Function&&(m=m.replace("[type]",r.type.name)),m},t.prototype.allowsKey=function(t){var e=this;return u.any(e._schemaKeys,function(n){if(n===t)return!0;if(e.schema(n).blackbox===!0){var i=n.length,r=t.slice(0,i+2),o=r.slice(0,-1);if(r===n+".$")return!1;if(o===n+".")return!0}return!1})},t.prototype.newContext=function(){return new a(this)},t.prototype.requiredObjectKeys=function(t){var e=this;return t?e._requiredObjectKeys[t+"."]||[]:e._firstLevelRequiredSchemaKeys},t.prototype.requiredSchemaKeys=function(){return this._requiredSchemaKeys},t.prototype.firstLevelSchemaKeys=function(){return this._firstLevelSchemaKeys},t.prototype.customObjectKeys=function(t){var e=this;return t?e._customObjectKeys[t+"."]||[]:e._firstLevelCustomSchemaKeys},t.prototype.customSchemaKeys=function(){return this._customSchemaKeys};var _=function(t,e){if(u.isArray(t)||u.isObject(t)&&!(t instanceof Date))return t;if(e===String)return"undefined"!=typeof t&&null!==t&&"string"!=typeof t?t.toString():t;if(e===Number){if("string"==typeof t&&!i(t).isEmpty()){var n=Number(t);return isNaN(n)?t:n}return t}return t},v=function(e){var n={};return u.each(e,function(e){e=h.test(e,t)?e._schema:x(b(e)),u.each(e,function(t,e){n[e]=n[e]||{},u.extend(n[e],t)})}),e.length&&w(n),n},b=function(e){return u.each(e,function(n,i){var r,o;if(n){if(h.test(n.type,t))r=".",o=n.type,n.type=Object;else{if(!h.test(n.type,[t]))return;r=".$.",o=n.type[0],n.type=[Object]}u.each(o._schema,function(t,n){var o=i+r+n;o in e||(e[o]=t)})}}),e},w=function(t){u.each(t,function(e,i){if(u.isArray(e.type)||e.type===Array){var r=i+".$";r in t||(t[r]={}),u.isArray(e.type)&&(t[r].type=e.type[0]),e.label&&(t[r].label=e.label),t[r].optional=!0,"undefined"!=typeof e.min&&(t[r].min=e.min),"undefined"!=typeof e.max&&(t[r].max=e.max),"undefined"!=typeof e.allowedValues&&(t[r].allowedValues=e.allowedValues),"undefined"!=typeof e.decimal&&(t[r].decimal=e.decimal),"undefined"!=typeof e.regEx&&(t[r].regEx=e.regEx),e.type=Array,u.each(["min","max","allowedValues","decimal","regEx"],function(t){n.deleteIfPresent(e,t)})}})},x=function(t){var e,n,i=[],r=[];u.each(t,function(t,n){for(var o=n.indexOf(".");-1!==o;)e=n.substring(0,o),".$"===e.substring(e.length-2)?o=-1:".$."===n.substring(o,o+3)?(i.push(e),o=n.indexOf(".",o+3)):(r.push(e),o=n.indexOf(".",o+1))});for(var o=0,a=i.length;a>o;o++)n=i[o],n in t||(t[n]={type:[Object],optional:!0});for(var o=0,a=r.length;a>o;o++)n=r[o],n in t||(t[n]={type:Object,optional:!0});return w(t),t},T=function(t,e){var n,r,o,a={};return u.each(t,function(t,s){t.type===Object&&(n=s+".",o=[],u.each(e,function(t){i(t).startsWith(n)&&(r=t.substring(n.length),-1===r.indexOf(".")&&o.push(r))}),a[n]=o)}),a},M=function(t){var e=t,n=e.lastIndexOf(".");if(-1!==n&&(e=e.substring(n+1),"$"===e)){var r=t.split(".");e=r[r.length-2]}return"_id"===e?"ID":i(e).humanize().s}}.call(this),function(){function i(t,e,i){var r=t.type;if(r===String){if("string"!=typeof e)return"expectedString";if(null!==t.max&&t.max<e.length)return"maxString";if(null!==t.min&&t.min>e.length)return"minString";if(t.regEx instanceof RegExp&&!t.regEx.test(e))return"regEx";if(u.isArray(t.regEx)){var o;if(u.every(t.regEx,function(t,n){return t.test(e)?!0:(o="regEx."+n,!1)}),o)return o}}else if(r===Number){if("number"!=typeof e||isNaN(e))return"expectedNumber";if("$inc"!==i&&null!==t.max&&t.max<e)return"maxNumber";if("$inc"!==i&&null!==t.min&&t.min>e)return"minNumber";if(!t.decimal&&e.toString().indexOf(".")>-1)return"noDecimal"}else if(r===Boolean){if("boolean"!=typeof e)return"expectedBoolean"}else if(r===Object){if(!n.isBasicObject(e))return"expectedObject"}else if(r===Array){if(!u.isArray(e))return"expectedArray";if(null!==t.minCount&&e.length<t.minCount)return"minCount";if(null!==t.maxCount&&e.length>t.maxCount)return"maxCount"}else if(r instanceof Function||n.safariBugFix(r)){if(!(e instanceof r))return"expectedConstructor";if(r===Date){if(u.isDate(t.min)&&t.min.getTime()>e.getTime())return"minDate";if(u.isDate(t.max)&&t.max.getTime()<e.getTime())return"maxDate"}}}r=function(r,o,a,s,l,h){function c(o,s,c,d,p,f,y){if(!d)return void g.push(n.errorObject("keyNotInSchema",s,o,d,l));if(!f&&!d.optional&&("$unset"===p||"$rename"===p||(!p||"$set"===p&&a||y)&&n.isBlankNullOrUndefined(o)||p&&n.isBlankOrNull(o)))return void g.push(n.errorObject("required",s,null,d,l));if("$rename"===p&&"string"==typeof o&&!l.allowsKey(o))return void g.push(n.errorObject("keyNotInSchema",o,null,null,l));if(!u.contains(["$unset","$rename"],p)){if(n.isNotNullOrUndefined(o)){var _=i(d,o,p);if(_)return void g.push(n.errorObject(_,s,o,d,l));if(d.allowedValues&&!u.contains(d.allowedValues,o))return void g.push(n.errorObject("notAllowed",s,o,d,l))}var v=s.lastIndexOf("."),b=-1===v?"":s.slice(0,v+1),w=d.custom?[d.custom]:[];w=w.concat(l._validators).concat(t._validators),u.every(w,function(t){var i=t.call(u.extend({key:s,genericKey:c,definition:d,isSet:void 0!==o,value:o,operator:p,field:function(t){m=m||new e(r,l._blackboxKeys);var n=m.getInfoForKey(t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}},siblingField:function(t){m=m||new e(r,l._blackboxKeys);var n=m.getInfoForKey(b+t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}}},h||{}));return"string"==typeof i?(g.push(n.errorObject(i,s,o,d,l)),!1):!0})}}function d(e,i,r,a,h,f){var m,g,y=!1;if(!r&&i&&"$"===i.substring(0,1)&&(r=i,i=null),i){if(a||"$push"!==r&&"$addToSet"!==r||(n.isBasicObject(e)&&"$each"in e?e=e.$each:i+=".0",y=a=!0),l.keyIsInBlackBox(i))return;m=t._makeGeneric(i),g=l.getDefinition(i),s&&s!==i&&s!==m||c(e,i,m,g,r,h,f)}if(void 0!==e&&null!==e||g&&(g.type!==Object||g.optional)||(e={}),u.isArray(e))u.each(e,function(t,e){d(t,i+"."+e,r,a)});else if(n.isBasicObject(e)&&(!g||!g.blackbox)){var _,v,b;_=u.keys(e),(!o||"$set"===r||y)&&(v=l.requiredObjectKeys(m),b=l.customObjectKeys(m));var w=u.union(_,v||[],b||[]),f=m&&".$"===m.slice(-2);u.each(w,function(t){n.shouldCheck(t)&&(h=u.some(p,function(e){return e.slice(0,t.length+1)===t+"."}),d(e[t],n.appendAffectedKey(i,t),r,a,h,f))})}}var p=[];if(!u.isObject(r))throw new Error("The first argument of validate() or validateOne() must be an object");if(o){if(u.isEmpty(r))throw new Error("When the modifier option is true, validation object must have at least one operator");var f=u.every(r,function(t,e){return"$"===e.substring(0,1)});if(!f)throw new Error("When the modifier option is true, all validation object keys must be operators. Did you forget `$set`?");p=p.concat(u.keys(r.$set||{})).concat(u.keys(r.$setOnInsert||{}))}else if(n.looksLikeModifier(r))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");"$setOnInsert"in r&&(a&&(r.$set=r.$set||{},r.$set=u.extend(r.$set,r.$setOnInsert)),delete r.$setOnInsert);var m,g=[];d(r);var y=[];return g=u.filter(g,function(t){return u.contains(y,t.name)?!1:(y.push(t.name),!0)})}}.call(this),function(){function i(t,e,n){var i,r=new s.Collection(null);if(n)i=c.id(),r.upsert({_id:i},t);else{var o={};i=r.insert(o),r.update(i,t)}var a=r.findOne(i);return r.remove(i),e._id||delete a._id,a}function r(t,e,i){var r=t.type;if(r===String){if("string"!=typeof e)return"expectedString";if(null!==t.max&&t.max<e.length)return"maxString";if(null!==t.min&&t.min>e.length)return"minString";if(t.regEx instanceof RegExp&&!t.regEx.test(e))return"regEx";if(u.isArray(t.regEx)){var o;if(u.every(t.regEx,function(t,n){return t.test(e)?!0:(o="regEx."+n,!1)}),o)return o}}else if(r===Number){if("number"!=typeof e||isNaN(e))return"expectedNumber";if("$inc"!==i&&null!==t.max&&t.max<e)return"maxNumber";if("$inc"!==i&&null!==t.min&&t.min>e)return"minNumber";if(!t.decimal&&e.toString().indexOf(".")>-1)return"noDecimal"}else if(r===Boolean){if("boolean"!=typeof e)return"expectedBoolean"}else if(r===Object){if(!n.isBasicObject(e))return"expectedObject"}else if(r===Array){if(!u.isArray(e))return"expectedArray";if(null!==t.minCount&&e.length<t.minCount)return"minCount";if(null!==t.maxCount&&e.length>t.maxCount)return"maxCount"}else if(r instanceof Function||n.safariBugFix(r)){if(!(e instanceof r))return"expectedConstructor";if(r===Date){if(u.isDate(t.min)&&t.min.getTime()>e.getTime())return"minDate";if(u.isDate(t.max)&&t.max.getTime()<e.getTime())return"maxDate"}}}o=function(o,a,s,l,h,c){function d(i,a,l,d,p,f,m){if(!d)return void y.push(n.errorObject("keyNotInSchema",a,i,d,h));if(!f&&!d.optional&&("$unset"===p||"$rename"===p||(!p||"$set"===p&&s||m)&&n.isBlankNullOrUndefined(i)||p&&n.isBlankOrNull(i)))return void y.push(n.errorObject("required",a,null,d,h));if("$rename"===p&&"string"==typeof i&&!h.allowsKey(i))return void y.push(n.errorObject("keyNotInSchema",i,null,null,h));if(!u.contains(["$unset","$rename"],p)){if(n.isNotNullOrUndefined(i)){var _=r(d,i,p);if(_)return void y.push(n.errorObject(_,a,i,d,h));if(d.allowedValues&&!u.contains(d.allowedValues,i))return void y.push(n.errorObject("notAllowed",a,i,d,h))}var v=a.lastIndexOf("."),b=-1===v?"":a.slice(0,v+1),w=d.custom?[d.custom]:[];w=w.concat(h._validators).concat(t._validators),u.every(w,function(t){var r=t.call(u.extend({key:a,genericKey:l,definition:d,isSet:void 0!==i,value:i,operator:p,field:function(t){g=g||new e(o,h._blackboxKeys);var n=g.getInfoForKey(t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}},siblingField:function(t){g=g||new e(o,h._blackboxKeys);var n=g.getInfoForKey(b+t)||{};return{isSet:void 0!==n.value,value:n.value,operator:n.operator}}},c||{}));return"string"==typeof r?(y.push(n.errorObject(r,a,i,d,h)),!1):!0})}}function p(e,i,r,o,s,c){var m,g,y=!1;if(!r&&i&&"$"===i.substring(0,1)&&(r=i,i=null),i){if(o||"$push"!==r&&"$addToSet"!==r||(n.isBasicObject(e)&&"$each"in e?e=e.$each:i+=".0",y=o=!0),h.keyIsInBlackBox(i))return;m=t._makeGeneric(i),g=h.getDefinition(i),l&&l!==i&&l!==m||d(e,i,m,g,r,s,c)}if(void 0!==e&&null!==e||g&&(g.type!==Object||g.optional)||(e={}),u.isArray(e))u.each(e,function(t,e){p(t,i+"."+e,r,o)});else if(n.isBasicObject(e)&&(!g||!g.blackbox)){var _,v,b;_=u.keys(e),(!a||"$set"===r||y)&&(v=h.requiredObjectKeys(m),b=h.customObjectKeys(m));var w=u.union(_,v||[],b||[]),c=m&&".$"===m.slice(-2);u.each(w,function(t){n.shouldCheck(t)&&(s=u.some(f,function(e){return e.slice(0,t.length+1)===t+"."}),p(e[t],n.appendAffectedKey(i,t),r,o,s,c))})}}var f=[];if(!u.isObject(o))throw new Error("The first argument of validate() or validateOne() must be an object");if(a){if(u.isEmpty(o))throw new Error("When the modifier option is true, validation object must have at least one operator");var m=u.every(o,function(t,e){return"$"===e.substring(0,1)});if(!m)throw new Error("When the modifier option is true, all validation object keys must be operators");f=f.concat(u.keys(o.$set||{})).concat(u.keys(o.$setOnInsert||{})),console.log("BEFORE",o),o=i(o,h.schema(),s),console.log("AFTER",o)}else if(n.looksLikeModifier(o))throw new Error("When the validation object contains mongo operators, you must set the modifier option to true");"$setOnInsert"in o&&(s&&(o.$set=o.$set||{},o.$set=u.extend(o.$set,o.$setOnInsert)),delete o.$setOnInsert);var g,y=[];p(o);var _=[];return y=u.filter(y,function(t){return u.contains(_,t.name)?!1:(_.push(t.name),!0)})}}.call(this),function(){function e(t,e,n,i,a,s){var l=!0,u=l?r:o;return u(t,e,n,i,a,s)}a=function(t){var e=this;e._simpleSchema=t,e._schema=t.schema(),e._schemaKeys=u.keys(e._schema),e._invalidKeys=[],e._deps={},e._depsAny=new l.Dependency,u.each(e._schemaKeys,function(t){e._deps[t]=new l.Dependency})},a.prototype.validate=function(t,n){var i=this;n=u.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},n||{}),s.isClient&&void 0===n.extendedCustomContext.userId&&(n.extendedCustomContext.userId=s.userId&&s.userId()||null);var r=e(t,n.modifier,n.upsert,null,i._simpleSchema,n.extendedCustomContext),o=u.pluck(i._invalidKeys,"name");i._invalidKeys=r;var a=u.pluck(i._invalidKeys,"name"),l=u.union(a,o);return i._markKeysChanged(l),0===i._invalidKeys.length},a.prototype.validateOne=function(t,n,i){var r=this;i=u.extend({modifier:!1,upsert:!1,extendedCustomContext:{}},i||{}),s.isClient&&void 0===i.extendedCustomContext.userId&&(i.extendedCustomContext.userId=s.userId&&s.userId()||null);for(var o,a=e(t,i.modifier,i.upsert,n,r._simpleSchema,i.extendedCustomContext),l=[],h=0,c=r._invalidKeys.length;c>h;h++)o=r._invalidKeys[h],o.name!==n&&l.push(o);r._invalidKeys=l;for(var o,h=0,c=a.length;c>h;h++)o=a[h],r._invalidKeys.push(o);return r._markKeysChanged([n]),!r._keyIsInvalid(n)},a.prototype.resetValidation=function(){var t=this,e=u.pluck(t._invalidKeys,"name");t._invalidKeys=[],t._markKeysChanged(e)},a.prototype.isValid=function(){var t=this;return t._depsAny.depend(),!t._invalidKeys.length},a.prototype.invalidKeys=function(){var t=this;return t._depsAny.depend(),t._invalidKeys},a.prototype.addInvalidKeys=function(t){var e=this;if(t&&t.length){var n=[];u.each(t,function(t){n.push(t.name),e._invalidKeys.push(t)}),e._markKeysChanged(n)}},a.prototype._markKeysChanged=function(e){var n=this;e&&e.length&&(u.each(e,function(e){var i=t._makeGeneric(e);i in n._deps&&n._deps[i].changed()}),n._depsAny.changed())},a.prototype._keyIsInvalid=function(e,n){var i=this;n=n||t._makeGeneric(e);var r=!!u.findWhere(i._invalidKeys,{name:e}),o=n!==e?!!u.findWhere(i._invalidKeys,{name:n}):!1;return r||o},a.prototype.keyIsInvalid=function(e){var n=this,i=t._makeGeneric(e);return n._deps[i].depend(),n._keyIsInvalid(e,i)},a.prototype.keyErrorMessage=function(e){var n=this,i=t._makeGeneric(e),r=n._simpleSchema;n._deps[i].depend();var o=u.findWhere(n._invalidKeys,{name:e});if(!o&&(o=u.findWhere(n._invalidKeys,{name:i}),!o))return"";var a=r.schema(i);return a?r.messageForError(o.type,o.name,a,o.value):""}}.call(this),"undefined"==typeof Package&&(Package={}),Package["simple-schema"]={SimpleSchema:t,MongoObject:e}}(),function(){var t=Package.meteor.Meteor,e=Package["simple-schema"].SimpleSchema,n=(Package["simple-schema"].MongoObject,Package.underscore._),i=(Package.deps.Deps,Package.check.check,Package.check.Match),r=Package.ejson.EJSON;
(function(){function o(e,i,r,o,s){function h(t,n,i,r,a){_.clean(t,{filter:i,autoConvert:r,getAutoValues:n,isModifier:"insert"!==e,removeEmptyStrings:a,extendAutoValueContext:{isInsert:"insert"===e,isUpdate:"update"===e&&f.upsert!==!0,isUpsert:m,userId:o,isFromTrustedCode:s}})}var c,d,p,f,m,g,y=this,_=y._c2._simpleSchema;if(!i.length)throw new Error(e+" requires an argument");if("insert"===e)c=i[0],f=i[1],d=i[2],i="function"==typeof f?[c,f]:"function"==typeof d?[c,d]:[c];else{if("update"!==e&&"upsert"!==e)throw new Error("invalid type argument");g=i[0],c=i[1],f=i[2],d=i[3]}if(d||"function"!=typeof f||(d=f,f={}),f=f||{},m="upsert"===e||"update"===e&&f.upsert===!0,t.isClient&&!d&&(d=function(n){n&&t._debug(e+" failed: "+(n.reason||n.stack))}),t.isClient){var v=i.length-1;"function"==typeof i[v]&&(d=i[v]=u(y,f.validationContext,d))}if(f.validate===!1)return i;var b;t.isServer&&c._id&&!_.allowsKey("_id")&&(b=c._id,delete c._id),h(c,t.isServer&&!r,!0,!0,f.removeEmptyStrings!==!1);var w={};for(var x in c)c.hasOwnProperty(x)&&(w[x]=c[x]);if(t.isServer&&m&&n.isObject(g)){var T=w.$set||{};w.$set=n.clone(g),n.extend(w.$set,T)}t.isClient&&h(w,!0,!1,!1,!1);var M=_.namedContext(f.validationContext),k=M.validate(w,{modifier:"update"===e||"upsert"===e,upsert:m,extendedCustomContext:{isInsert:"insert"===e,isUpdate:"update"===e&&f.upsert!==!0,isUpsert:m,userId:o,isFromTrustedCode:s}});if(k){if(b&&(c._id=b),"insert"===e?i[0]=c:i[1]=c,t.isServer){var v=i.length-1;"function"==typeof i[v]&&(i[v]=l(y,c,f.validationContext,i[v]))}return i}if(p=a(M),!d)throw p;d(p,!1)}function a(e){var n,i=e.invalidKeys();n=i.length?e.keyErrorMessage(i[0].name):"Failed validation";var r=new Error(n);return r.invalidKeys=i,t.isServer&&(r.sanitizedError=new t.Error(400,n)),r}function s(t,e){var n=e.split("c2_")[1].split(" ")[0],i=e.split("dup key:")[1].split('"')[1];t.addInvalidKeys([{name:n,type:"notUnique",value:i}])}function l(t,e,n,i){return function(e){if(e&&("MongoError"===e.name&&11001===e.code||e.message.indexOf(!0))&&-1!==e.message.indexOf("c2_")){var r=t.simpleSchema().namedContext(n);s(r,e.message),arguments[0]=a(r)}return i.apply(this,arguments)}}function u(e,n,i){return function(o){var l=e.simpleSchema().namedContext(n);if(o instanceof t.Error&&400===o.error&&"INVALID"===o.reason&&"string"==typeof o.details){var u=r.parse(o.details);l.addInvalidKeys(u),arguments[0]=a(l)}else o instanceof t.Error&&409===o.error&&o.reason&&-1!==o.reason.indexOf("E11000")&&-1!==o.reason.indexOf("c2_")&&(s(l,o.reason),arguments[0]=a(l));return i.apply(this,arguments)}}e.extendOptions({index:i.Optional(i.OneOf(Number,String,Boolean)),unique:i.Optional(Boolean),denyInsert:i.Optional(Boolean),denyUpdate:i.Optional(Boolean)}),e.messages({notUnique:"[label] must be unique",insertNotAllowed:"[label] cannot be set during an insert",updateNotAllowed:"[label] cannot be set during an update"});var h=t.Collection;t.Collection=function(t,e){var n,i=this;if(e=e||{},e.schema&&(n=e.schema,delete e.schema),e.virtualFields)throw new Error("Collection2: Sorry, the virtualFields option is no longer supported.");h.call(i,t,e),n&&i.attachSchema(n)},t.Collection.prototype=h.prototype;for(var c in h)h.hasOwnProperty(c)&&(t.Collection[c]=h[c]);if(t.isServer){var d=!1;t.startup(function(){d=!0})}t.Collection.prototype.attachSchema=function(i){var a=this;i instanceof e||(i=new e(i)),a._c2={},a._c2._simpleSchema=i,n.each(i.schema(),function(e,n){function i(){var t,i={};"index"in e?(t=e.index,t===!0&&(t=1)):t=1;var r="c2_"+n,o=n.replace(/\.\$\./g,".");i[o]=t;var s=!!e.unique&&(1===t||-1===t),l=!!e.optional&&s;if(t!==!1)a._collection._ensureIndex(i,{background:!0,name:r,unique:s,sparse:l});else try{a._collection._dropIndex(r)}catch(u){console.warn("Collection2: Tried to drop mongo index "+r+", but there is no index with that name")}}t.isServer&&("index"in e||e.unique===!0)&&(d?i():t.startup(i))}),i.validator(function(){{var t=this.definition,e=this.value,n=this.operator;this.key}return t.denyInsert&&void 0!==e&&!n?"insertNotAllowed":t.denyUpdate&&n&&("$set"!==n||"$set"===n&&void 0!==e)?"updateNotAllowed":!0}),a.deny({insert:function(e,n){var r;return t.isServer&&n._id&&!i.allowsKey("_id")&&(r=n._id,delete n._id),i.clean(n,{isModifier:!1,removeEmptyStrings:!1,extendAutoValueContext:{isInsert:!0,isUpdate:!1,isUpsert:!1,userId:e,isFromTrustedCode:!1}}),r&&(n._id=r),!1},update:function(t,e,n,r){return i.clean(r,{isModifier:!0,removeEmptyStrings:!1,extendAutoValueContext:{isInsert:!1,isUpdate:!0,isUpsert:!1,userId:t,isFromTrustedCode:!1}}),!1},fetch:[],transform:null}),a.deny({insert:function(e,n){return o.call(a,"insert",[n,{removeEmptyStrings:!1},function(e){if(e)throw new t.Error(400,"INVALID",r.stringify(e.invalidKeys))}],!0,e,!1),!1},update:function(e,n,i,s){return o.call(a,"update",[null,s,{removeEmptyStrings:!1},function(e){if(e)throw new t.Error(400,"INVALID",r.stringify(e.invalidKeys))}],!0,e,!1),!1},fetch:[]}),Package&&Package.insecure&&a.allow({insert:function(){return!0},update:function(){return!0},remove:function(){return!0},fetch:[],transform:null})},t.Collection.prototype.simpleSchema=function(){var t=this;return t._c2?t._c2._simpleSchema:null},n.each(["insert","update","upsert"],function(e){var i=t.Collection.prototype[e];t.Collection.prototype[e]=function(){var r=this,a=n.toArray(arguments);return r._c2&&(a=o.call(r,e,a,!1,t.isClient&&t.userId&&t.userId()||null,t.isServer),!a)?"insert"===e?r._makeNewID():void 0:i.apply(r,a)}}),t.Collection2=function(){throw new Error("Collection2: Doing `new Meteor.Collection` no longer works. Just use a normal `new Meteor.Collection` call.")}}).call(this),"undefined"==typeof Package&&(Package={}),Package.collection2={}}(),function(){var t,e,n,i,r,o,a,s,l,u,h,c=Package.meteor.Meteor,d=Package.deps.Deps,p=Package.session.Session,f=Package.underscore._,m=Package.templating.Template,g=Package.spacebars.Spacebars,y=(Package.showdown.Showdown,Package.ui.UI),_=(Package.ui.Handlebars,Package["simple-schema"].SimpleSchema),v=(Package["simple-schema"].MongoObject,Package.htmljs.HTML),b=Package.blaze.Blaze;(function(){n="object"==typeof n?n:{};var t,i;i=[{nombre:"Ofrenda",titulo:"**Agosto**:\nInicio del ciclo agrcola.",descripcion:'En el inicio del ciclo agrcola, el campesino muestra \nsu respeto a la *Pachamama* (Madre Tierra) y a los \n*apus* (espritus guardianes de las montaas) \nalcanzndoles una ofrenda en un ritual simblico.\n\nLes piden permiso para trabajar la tierra, fuerza en \nel trabajo y proteccin a las semillas que darn vida \na nuevas papitas. \n\n#### Cmo se realiza la ofrenda?\n\nSe ofrece el "kintu" de coca (tro de hojas) y se \nbrinda por lo general con "chicha"; el primer vaso \nsiempre es para la Pachamama. Otros tambin \nacostumbran ofrecerle flores de colores, grasa de \nllama o caramelos.\n\nDurante el ritual se invoca a los apus y se dan \nsoplidos largos sobre la ofrenda para que el viento\nles lleve su sabor. Finalmente, esta ofrenda se \nentierra o se quema cerca a la *chacra*. ',pregunta:{texto:"Con la ofrenda a la *Pachamama* y a los\n*apus* se inicia el ciclo agrcola de la papa?",respuesta:{correcta:"si",si:"Correcto!",no:"Incorrecto!\n\nLa ofrenda es un ritual para empezar el ciclo agrcola."}},numero:1},{nombre:"Siembra",titulo:"**Agosto, Septiembre y Octubre**:\nSiembra",descripcion:"La siembra es la actividad ms importante en el ciclo \nagrcola de la papa. Los preparativos se realizan \nincluso una semana antes de la siembra. \n\n#### Cundo se realiza la siembra?\n\nCuando la Pachamama muestra sus seales:\nAparicin de ciertas flores, aullido del zorro cerca a\nla comunidad o llegada de las primeras lluvias. \nLa siembra se extiende de agosto a octubre de \nacuerdo al ciclo de crecimiento de las papas que \nproduce la comunidad. \n\n#### Cmo se realiza la siembra? \n\nSe forman grupos de tres personas; los varones \nmanejan las herramientas, un grupo de mujeres se \nencarga de poner la semilla y otro se encarga de \nabonar la tierra. ",pregunta:{texto:"El campesino observa las seas de la naturaleza para sembrar? ",respuesta:{correcta:"si",si:"Correcto!",no:"Incorrecto!\n\nLos campesinos se guan por seales de la naturaleza para iniciar la siembra."}},numero:2},{nombre:"Aporque",titulo:"De **Noviembre** a **Enero**:\nEl aporque.",descripcion:"El aporque es una actividad que realizan los varones \nhaciendo uso de la lampa para ayudar al buen \ncrecimiento de las plantas de papa.\n\n#### Cundo se realiza? \n\nA partir de noviembre hasta enero, se realiza los \nprimeros aporques, aprovechando el agua de la \nlluvia. Si se observa que los tallos de la papa no \nestn gruesos y las hojas no estn firmes, entonces\nse aporca nuevamente.\n\n#### Cmo se realiza? \n- Se rectifican los surcos. \n- Se quita la mala hierba. \n- Se alimenta con ms tierra el tallo de la planta de papa. ",pregunta:{texto:"Las plantas de papa sin aporque crecen sanas? ",respuesta:{correcta:"no",si:"Incorrecto!\n\nEl aporque ayuda al sano crecimiento de las plantas de papa. ",no:"Correcto!"}},numero:3},{nombre:"Aporque",titulo:"Criando la papa en la chacra desde \nla siembra hasta la cosecha.",descripcion:'El cuidado de las papas en su ciclo de produccin es \ncomo criar a un hijo, los campesinos del Ande nos \ndicen: *"La papa nos cra toda la vida porque nos \nalimenta, por eso nosotros tambin debemos criar a \nla papa en la chacra"*.\n\n#### Cmo criamos a la papa? \n\nLos criadores de la papita estn siempre al cuidado\nde su parcela, le llevan guano, otros le echan ceniza \nde sus fogones para evitar plagas y enfermedades, \ncuidan que la mala hierba no invada el terreno o que \nel agua no inunde los surcos. ',pregunta:{texto:"Para los agricultores del Ande, cultivar papas es como criar a un hijo? ",respuesta:{correcta:"si",si:"Correcto!",no:"Incorrecto!\n\nLos agricultores del Ande consideran el cultivo de la papa\ncomo la crianza de un hijo. "}},numero:4},{nombre:"Roturado",titulo:"**Febrero y Marzo**: Preparacin\nde la tierra para la nueva siembra.",descripcion:'Mientras las plantas de papa estn creciendo en la \nparcela, los agricultores preparan nuevos terrenos \npara la prxima siembra.\n\n#### Cmo se realiza? \n\nPrimero se rotura la tierra. Esta actividad requiere \nmucha coordinacin, destreza y fuerza de los grupos\nparticipantes; en cada grupo encontramos dos \nvarones que abren la tierra con sus "chakitaqllas" \n(instrumentos de labranza) y una mujer que voltea \nlos terrores con sus manos, formando los surcos.\n\nDespus del roturado se deja en reposo a la\nPachamama hasta la siembra para que est suave y \nlista para acoger a las semillas de papa. ',pregunta:{texto:"El roturado prepara el terreno para la cosecha? ",respuesta:{correcta:"no",si:"Incorrecto!\n\nEl roturado prepara el terreno para la nueva siembra. ",no:"Correcto!"}},numero:5},{nombre:"Cosecha",titulo:"**Abril y Mayo**:\nCosecha",descripcion:"La cosecha consiste en extraer de la tierra y \ndescubrir al sol del da las papitas multicolores que \nson el fruto del trabajo de familias enteras. \n\n#### Cundo se realiza? \n\nSe realiza en los meses de abril y mayo cuando el \nciclo de la planta ha culminado. Los agricultores \nobservan que las flores y hojas de la papa empiezan\na marchitarse; adems la Pachamama enva muchas \nseales a travs de las flores, del comportamiento \nde algunos animales o cuando las nubes de lluvia se\nalejan. ",pregunta:{texto:"La naturaleza puede darnos seales para empezar la cosecha de papas? ",respuesta:{correcta:"si",si:"Correcto!",no:"Incorrecto!\n\nLa naturaleza da seales a los agricultores por medio de plantas, animales y \nel clima para que empiecen la cosecha. "}},numero:6},{nombre:"Cosecha",titulo:"**Abril y Mayo**:\nEl da de la cosecha.",descripcion:'Durante la cosecha se pueden ver muchas \nvariedades de papa en colores y formas, ese da se \nprepara la watias.\n\n#### Qu es la watia? \n\nEs la comida favorita del da de cosecha, se prepara \nen hornos hechos con terrones donde se asan las \npapas; se acompaan con una crema de rocoto \nllamada "uchukuta" o sencillamente con queso \nelaborado por los propios comuneros, tambin se\npuede acompaar con cuy asado en fogn. Toda la \nfamilia forma un crculo y comparten la comida.\n\n#### Cmo finaliza la cosecha? \n\nCon el traslado de la papa en costales a lomo de \ncaballos o llamas hasta el lugar de almacenamiento.',pregunta:{texto:"El da de la cosecha se lleva papa a la chacra en caballos para \npreparar la watia? ",respuesta:{correcta:"no",si:"Incorrecto!\n\nSe prepara la watia con la papa recin cosechada en la chacra.",no:"Correcto!"}},numero:7},{nombre:"Seleccin",titulo:"**Junio y Julio**:\nSeleccin de papas.",descripcion:"Es una actividad que se realiza en familia, los padres \nensean a sus hijos los nombres, colores y formas \nde las variedades de papa.\n\nEn una sola cosecha puede haber hasta 80 \nvariedades de papa; algunas son buenas para \nsancochar, otras para elaborar *chuo* o *moraya*\n(papas deshidratadas para su conservacin) y otras \nson de tipo comercial.\n\nEn esta etapa tambin se hace la seleccin de la \nsemilla de cada variedad de papa.\n\n#### Cul es el criterio de seleccin de las semillas de \npapa?\n\nLos criterios ms importantes son tener ojos \nbonitos, color uniforme, regular tamao y no \npresentar enfermedades.\n",pregunta:{texto:"La semilla de papa con ojos bonitos es una caracterstica \napreciada por los agricultores del Ande? ",respuesta:{correcta:"si",si:"Correcto!",no:"Incorrecto!\n\nLos agricultores consideran como buena semilla a las \npapas que tiene ojos bonitos. "}},numero:8},{nombre:"Almacenamiento",titulo:"**Julio**:\nAlmacenamiento de papas.",descripcion:'#### Cmo se almacenan las papas? \n\nLas semillas de papa se guardan en montones \ncubiertos con paja en forma de conos que se \ncolocan a la intemperie cerca de la casa, en espera\nhasta la prxima siembra.\n\n Las papas para el consumo se guardan en el \nalmacn familiar y se disponen de a pocos para la \nalimentacin diaria, calculado que dure hasta la \nprxima cosecha. \n\nOtras son destinadas para elaborar *"chuo"* y la \n*"moraya"* (papas deshidratadas) con procedimientos \ntradicionales. \n\nLo que sobra se vende. ',pregunta:{texto:"La semilla de papa se guarda en el almacn \nfamiliar? ",respuesta:{correcta:"no",si:"Incorrecto!\n\nLa semilla de papa se guarda a la intemperie cerca a la casa. ",no:"Correcto!"}},numero:9},{nombre:"Alimentacin",titulo:"La papa est presente\nen la alimentacin familiar.",descripcion:'#### Qu comidas preparamos con papa?\n- Variedad de sopas donde la papa se acompaa por otros ingredientes. \n- Asados para los banquetes de las fiestas familiares y comunales. \n- Watias. \n- Papas sancochadas. \n\nCon el tiempo las papita se arrugan y reciben el \nnombre de "paya papa" (papa vieja), stas son muy \ndulces por eso continan sirviendo de alimento \nhasta la llegada de la papa nueva. ',pregunta:{texto:"Las papas viejas y arrugadas se desechan? ",respuesta:{correcta:"no",si:"Incorrecto!\n\nLas papas viejas continan alimentando a las familias porque son muy dulces. ",no:"Correcto!"}},numero:10}],t=t||{},t.Etapa=new _({nombre:{type:String,label:"Ttulo",max:140},numero:{type:Number,label:"Nmero",unique:!0,min:1,max:10},slug:{type:String,label:"Slug",max:140},titulo:{type:String,label:"Ttulo",max:200},descripcion:{type:String,label:"Descripcin"},pregunta:{type:new _({texto:{type:String,label:"Texto",max:255},respuesta:{type:new _({correcta:{type:String,label:"Respuesta correcta",allowedValues:["si","no"]},si:{type:String,label:"Texto si",max:1e3},no:{type:String,label:"Texto no",max:1e3}})}})}}),e=new c.Collection("etapas",{connection:null}),e.attachSchema(t.Etapa),c.startup(function(){var t,n,r,o;for(o=[],n=0,r=i.length;r>n;n++)t=i[n],t.slug=""+("0"+t.numero).slice(-2)+"-"+f.slugify(t.nombre),o.push(e.insert(t));return o})}).call(this),function(){i=function(e){Phaser.Group.call(this,t.game),this.h=0,this.isFinal=!1,this.isSolvable=!1,this.moves=0,this.totalCost=0,this.position0=0,e?this.arrNumbs=e:e=[]},i.prototype=Object.create(Phaser.Group.prototype),i.prototype.constructor=i,i.prototype.genFinal=function(){this.moves=0,this.arrNumbs=[1,2,3,4,5,6,7,8,0]},i.prototype.genRandom=function(){this.arrNumbs=[],this.moves=0,this.clearBoard();var t=[1,2,3,4,5,6,7,8,0];this.arrNumbs=Phaser.Utils.shuffle(t),this.checkSolvable(this.arrNumbs)?(this.isSolvable=!0,this.logBoard()):this.genRandom()},i.prototype.genTest=function(){this.arrNumbs=[],this.moves=0,this.clearBoard(),this.arrNumbs=[1,2,3,4,5,6,0,7,8],console.log("Solvable: "+this.checkSolvable(this.arrNumbs)),this.logBoard()},i.prototype.checkSolvable=function(t){var e=0,n=0,i=0;for(n=t.length-1;n>=0;n--)for(i=n-1;i>=0;i--)t[i]>t[n]&&0!==t[n]&&0!==t[i]&&e++;return e%2===0?(console.log("Solvable - "+t+" - "+e),!0):(console.log("Unsulvable - "+t+" - "+e),!1)},i.prototype.equals=function(t){if(!t)return!1;if(!t.arrNumbs)return!1;if(this.arrNumbs.length!==t.arrNumbs.length)return!1;var e=0;for(e=this.arrNumbs.length-1;e>=0;e--)if(this.arrNumbs[e]!=t.arrNumbs[e])return!1;return!0},i.prototype.logBoard=function(){console.log("Board: "+this.arrNumbs)},i.prototype.checkPosition=function(t){var e=0;for(e=this.arrNumbs.length-1;e>=0;e--)if(this.arrNumbs[e]===t)return e},i.prototype.draw=function(){var e=t.blockDimension;this.clearBoard(this);var n=0,i=0,o=0,a={};for(i=3;i>0;i--)for(o=3;o>0;o--)0!==this.arrNumbs[n]&&(a=new r((o-3)*-e,(i-3)*-e,this.arrNumbs[n],this),this.add(a)),n++},i.prototype.clearBoard=function(){this.forEach(this.clearTxt,this,!0),this.removeAll()},i.prototype.calcHueristic=function(){var t=0,e=0;for(e=this.arrNumbs.length-1;e>=0;e--)0!==this.arrNumbs[e]&&(t+=Math.abs(e-(this.arrNumbs[e]-1)));this.h=t},i.prototype.calcTotalCost=function(){this.totalCost=this.moves+this.h},i.prototype.clearTxt=function(t){t.txt.destroy()},i.prototype.move=function(e){function n(t,e){if(!e)return!1;if(t.length!=e.length)return!1;for(var n=0,i=t.length;i>n;n++)if(t[n]instanceof Array&&e[n]instanceof Array){if(!t[n].compare(e[n]))return!1}else if(t[n]!=e[n])return!1;return!0}if(t.isMoving)return!1;t.isMoving=!0,this.position0=this.checkPosition(0);var i={};if("up"===e){if(this.position0>=6&&this.position0<=8)return t.isMoving=!1,!1;i=this.getAt(this.position0+2),i.move(e),this.remove(i),this.addAt(i,this.position0),this.arrNumbs[this.position0]=this.arrNumbs[this.position0+3],this.arrNumbs[this.position0+3]=0}else if("down"==e){if(this.position0>=0&&this.position0<=2)return t.isMoving=!1,!1;i=this.getAt(this.position0-3),i.move(e),this.remove(i),this.addAt(i,this.position0-1),this.arrNumbs[this.position0]=this.arrNumbs[this.position0-3],this.arrNumbs[this.position0-3]=0}else if("right"==e){if(0===this.position0||3===this.position0||6===this.position0)return t.isMoving=!1,!1;i=this.getAt(this.position0-1),i.move(e),this.remove(i),this.addAt(i,this.position0-1),this.arrNumbs[this.position0]=this.arrNumbs[this.position0-1],this.arrNumbs[this.position0-1]=0}else if("left"==e){if(2===this.position0||5===this.position0||8===this.position0)return t.isMoving=!1,!1;i=this.getAt(this.position0),i.move(e),this.remove(i),this.addAt(i,this.position0),this.arrNumbs[this.position0]=this.arrNumbs[this.position0+1],this.arrNumbs[this.position0+1]=0}t.isMoving=!1,this.moves++;var r=[1,2,3,4,5,6,7,8,0];return n(this.arrNumbs,r)&&(this.isFinal=!0,t.resuelto()),!0}}.call(this),function(){r=function(e,n,i){var r=t.game;console.log("Inicia NumberBlock"),this.number=i,this.position=0,this.position0=1,Phaser.Sprite.call(this,r,e,n,"bloques","bloque"+i),this.txt=r.add.text(e+100,n+30,i,{font:"250px Source Code Pro",fill:"#000000",align:"center",weight:"bold"});var o=this.txt;d.autorun(function(){o.fontSize=p.get("rompecabezasHelpOn")?250:1})},r.prototype=Object.create(Phaser.Sprite.prototype),r.prototype.constructor=r,r.prototype.update=function(){this.txt.x=this.x+100,this.txt.y=this.y+30},r.prototype.move=function(e){var n=t.game,i=t.blockDimension,r=n.add.tween(this),o=n.add.tween(this.txt);switch(r.onStart.add(function(){t.isMoving=!0}),r.onComplete.add(function(){t.isMoving=!1}),e){case"left":r.to({x:this.x-i},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({x:this.txt.x-i},250,null),o.start(),r.start();break;case"up":r.to({y:this.y-i},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({y:this.txt.y-i},250,null),o.start(),r.start();break;case"right":r.to({x:this.x+i},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({x:this.txt.x+i},250,null),o.start(),r.start();break;case"down":r.to({y:this.y+i},250,Phaser.Easing.Linear.None,!1,0,0,!1),o.to({y:this.txt.y+i},250,null),o.start(),r.start()}},r.prototype.onDown=function(){if(console.log(this.parent.arrNumbs),this.position=this.parent.checkPosition(this.number),this.position0=this.parent.checkPosition(0),this.position-this.position0!==0)switch(this.position){case 0:switch(this.position0){case 1:this.move(3);break;case 3:this.move(2);break;default:return}break;case 1:switch(this.position0){case 0:this.move(1);break;case 2:this.move(3);break;case 4:this.move(4);break;default:return}break;case 2:switch(this.position0){case 1:this.move(1);break;case 5:this.move(4);break;default:return}break;case 3:switch(this.position0){case 0:this.move(2);break;case 4:this.move(3);break;case 6:this.move(4);break;default:return}break;case 4:break;case 5:break;case 6:break;case 7:break;case 8:}console.log("Numbs: "+this.parent.arrNumbs),console.log(this.parent.arrNumbs)}}.call(this),function(){function e(){}e.prototype={preload:function(){this.load.audio("cortina","assets/audio/cortina.ogg",!0),this.load.onFileComplete.add(function(e,n){if("cortina"==n){var i=t.sonidos.cortinaDeFondo=t.game.add.audio("cortina",1,!0);i.play()}else if("efectos"==n){var r=t.sonidos.efectosDeSonido=t.game.add.audio("efectos");r.addMarker("movimiento",.16,.232)}else"finalEtapa"==n&&(t.sonidos.finalEtapa=t.game.add.audio("finalEtapa",8))}),this.load.image("loadingBG","assets/images/LoadingBG.png"),this.load.image("loading","assets/images/Loading.png"),this.load.audio("efectos","assets/audio/efectos.ogg",!0),this.load.audio("finalEtapa","assets/audio/final-etapa.ogg",!0)},create:function(){t.game.input.maxPointers=1}},o=e}.call(this),function(){function e(){}e.prototype={create:function(){function e(e,i){if(i.isDown&&!t.isDragging)t.isDragging=!0;else if(i.isUp&&t.isDragging){var r=i.position,o=i.positionDown;Math.abs(r.x-o.x)>Math.abs(r.y-o.y)?r.x<o.x?n(e,"left"):n(e,"right"):r.y<o.y?n(e,"up"):n(e,"down"),t.isDragging=!1}}function n(t,e){t.board.move(e)&&t.efectosDeSonido.play("movimiento")}var r=t.game;r.stage.backgroundColor="#000",r.add.sprite(0,0,"fondo"),this.efectosDeSonido=t.sonidos.efectosDeSonido;var o=p.get("rompecabezasEtapaElegida").numero;t.sonidos.etapas[o]={},f.each(["es","que"],function(e){var n="assets/audio/etapas/"+("0"+o).slice(-2)+"-"+e,i=f.collect(["mp3","ogg"],function(t){return n+"."+t});t.sonidos.etapas[o][e]=new Howl({urls:i,volume:4,onplay:function(){t.sonidos.cortinaDeFondo.pause()},onend:function(){t.sonidos.cortinaDeFondo.play()}})}),this.upKey=r.input.keyboard.addKey(Phaser.Keyboard.UP),this.downKey=r.input.keyboard.addKey(Phaser.Keyboard.DOWN),this.leftKey=r.input.keyboard.addKey(Phaser.Keyboard.LEFT),this.rightKey=r.input.keyboard.addKey(Phaser.Keyboard.RIGHT),this.spaceKey=r.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);var a=this;r.input.addMoveCallback(function(t){e(a,t)}),this.upKey.onDown.add(function(){n(this,"up")},this),this.downKey.onDown.add(function(){n(this,"down")},this),this.leftKey.onDown.add(function(){n(this,"left")},this),this.rightKey.onDown.add(function(){n(this,"right")},this),this.spaceKey.onDown.add(function(){this.solveBoard()},this),this.board=new i,this.board.genRandom(),this.board.draw()},update:function(){var e=this;d.nonreactive(function(){e.board&&(p.set("rompecabezasMovimientos",e.board.moves),e.board.isFinal&&(e.quitGame(),t.resuelto()))})},quitGame:function(){this.board.clearBoard(),this.board.destroy(),this.board=null,this.upKey.onDown.removeAll(),this.downKey.onDown.removeAll(),this.leftKey.onDown.removeAll(),this.rightKey.onDown.removeAll(),this.spaceKey.onDown.removeAll(),this.upKey=null,this.downKey=null,this.leftKey=null,this.rightKey=null,this.spaceKey=null,t.isMoving=!1},shuffleBoard:function(){console.clear(),this.board.genRandom(),this.board.draw()},solveBoard:function(){var t=new i;t.genFinal();var e=new l(this.board,t);e.solve()}},a=e}.call(this),function(){function e(){this.preloadBarBg=null,this.preloadBar=null}function n(){if(!p.get("rompecabezasJuegoPausado")){var t=p.get("rompecabezasTiempo")||0;t++,p.set("rompecabezasTiempo",t)}}e.prototype={preload:function(){var e=t.game;e.stage.backgroundColor="#000";var n=p.get("rompecabezasEtapaElegida");this.load.image("fondo","assets/images/etapas/"+n.slug+"-bn.jpg"),this.preloadBarBg=this.add.sprite(300,400,"loadingBG"),this.preloadBar=this.add.sprite(304,405,"loading"),this.load.atlasJSONHash("bloques","assets/images/etapas/"+n.slug+".jpg","assets/spritesheets/bloques.json"),this.load.setPreloadSprite(this.preloadBar)},create:function(){this.preloadBar.cropEnabled=!1,t.game.state.start("play"),t.timer=c.setInterval(n,1e3)}},s=e}.call(this),function(){function e(){p.set("rompecabezasMovimientos",0),p.set("rompecabezasTiempo",0),t.timer&&c.clearInterval(t.timer)}t={isMoving:!1,blockDimension:300,sonidos:{etapas:{}},init:function(){t.isMoving=!1,t.game&&t.game.destroy();var e=t.game=new Phaser.Game(900,900,Phaser.AUTO,"rompecabezas-container");e.state.add("boot",o),e.state.add("preloader",s),e.state.add("play",a),e.state.start("boot")},restart:function(){t.game.state.states.play.shuffleBoard(),e()},resuelto:function(){p.set("rompecabezasStep","fin"),t.timer&&c.clearInterval(t.timer),t.sonidos.finalEtapa.play()}},d.autorun(function(){p.get("rompecabezasEtapaElegida"),e()});var n;n={google:{families:["Source+Code+Pro::latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}.call(this),function(){l=function(t,e){this.open=[],this.close=[],this.moves=0,this.boardI=t,this.boardF=e,this.open.push(Phaser.Utils.extend(!0,{},t))},l.prototype.solve=function(){for(var e=0;!this.open[this.open.length-1].equals(this.boardF)&&this.open.length>0;){var n=this.open.pop(),i=0;switch(this.close.push(Phaser.Utils.extend(!0,{},n)),i=n.checkPosition(0)){case 0:this.swap(n,3,i),this.swap(n,4,i);break;case 1:this.swap(n,1,i),this.swap(n,3,i),this.swap(n,4,i);break;case 2:this.swap(n,1,i),this.swap(n,4,i);break;case 3:this.swap(n,2,i),this.swap(n,3,i),this.swap(n,4,i);break;case 4:this.swap(n,1,i),this.swap(n,2,i),this.swap(n,3,i),this.swap(n,4,i);break;case 5:this.swap(n,1,i),this.swap(n,2,i),this.swap(n,4,i);break;case 6:this.swap(n,2,i),this.swap(n,3,i);break;case 7:this.swap(n,1,i),this.swap(n,2,i),this.swap(n,3,i);break;case 8:this.swap(n,1,i),this.swap(n,2,i)}this.open.sort(this.compare),0!==this.open.length&&(this.boardI.arrNumbs=this.open[this.open.length-1].arrNumbs,e++,console.log("solving - count: "+e+" - board: "+this.open[0].arrNumbs+" - closed-size: "+this.close.length+" - position: "+i))}this.boardI.draw(),t.resuelto(),console.log("Solved: "+this.open[this.open.length-1].arrNumbs)},l.prototype.swap=function(t,e,n){this.position=n;var r=Phaser.Utils.extend(!0,{},t),o=[];switch(e){case 1:r.arrNumbs[this.position]=r.arrNumbs[this.position-1],r.arrNumbs[this.position-1]=0;break;case 2:switch(this.position){case 3:r.arrNumbs[3]=r.arrNumbs[0],r.arrNumbs[0]=0;break;case 4:r.arrNumbs[4]=r.arrNumbs[1],r.arrNumbs[1]=0;break;case 5:r.arrNumbs[5]=r.arrNumbs[2],r.arrNumbs[2]=0;break;case 6:r.arrNumbs[6]=r.arrNumbs[3],r.arrNumbs[3]=0;break;case 7:r.arrNumbs[7]=r.arrNumbs[4],r.arrNumbs[4]=0;break;case 8:r.arrNumbs[8]=r.arrNumbs[5],r.arrNumbs[5]=0}break;case 3:r.arrNumbs[this.position]=r.arrNumbs[this.position+1],r.arrNumbs[this.position+1]=0;break;case 4:switch(this.position){case 0:r.arrNumbs[0]=r.arrNumbs[3],r.arrNumbs[3]=0;break;case 1:r.arrNumbs[1]=r.arrNumbs[4],r.arrNumbs[4]=0;break;case 2:r.arrNumbs[2]=r.arrNumbs[5],r.arrNumbs[5]=0;break;case 3:r.arrNumbs[3]=r.arrNumbs[6],r.arrNumbs[6]=0;break;case 4:r.arrNumbs[4]=r.arrNumbs[7],r.arrNumbs[7]=0;break;case 5:r.arrNumbs[5]=r.arrNumbs[8],r.arrNumbs[8]=0}}o=r.arrNumbs,r=new i(o,t),r.moves=t.moves+1,r.calcHueristic(),r.calcTotalCost(),this.checkClosed(r)||this.open.push(r)},l.prototype.checkClosed=function(t){var e=0;for(e=this.close.length-1;e>=0;e--)if(this.close[e].equals(t))return!0;return!1},l.prototype.compare=function(t,e){return t.totalCost>e.totalCost?-1:t.totalCost<e.totalCost?1:0}}.call(this),function(){function t(t){this.compare=t,this.pq=[],this.N=0}function e(t){for(var n=t.slice(0),i=n.length;i--;)n[i]instanceof Array&&(n[i]=e(n[i]));return n}function n(t,e,n){this.board=t,this.prev=e,this.steps=n||0}t.prototype={constructor:t,isEmpty:function(){return 0===this.N},insert:function(t){this.pq[++this.N]=t,this.swim(this.N)},delMin:function(){if(!this.isEmpty()){this.exch(1,this.N);var t=this.pq[this.N--];return this.sink(1),this.pq[this.N+1]=null,t}},greater:function(t,e){return this.pq[t].compareTo(this.pq[e])>0},exch:function(t,e){var n=this.pq[t];this.pq[t]=this.pq[e],this.pq[e]=n},swim:function(t){for(;t>1&&this.greater(Math.floor(t/2),t);)this.exch(t,Math.floor(t/2)),t=Math.floor(t/2)},sink:function(t){for(;2*t<=this.N;){var e=2*t;if(e<this.N&&this.greater(e,e+1)&&e++,!this.greater(t,e))break;this.exch(t,e),t=e}}},u=function(t){this.blocks=t,this.N=t[0].length,this.move,this.blankR=0,this.blankC=0,this.blank,this.hammingScore=0,this.manhattanScore=0,this.contructGoalBoardAS()},u.prototype.dimension=function(){return this.N},u.prototype.contructGoalBoardAS=function(){for(var t=0,e=0,n=1,i=0;i<this.N;i++){for(var r=0;r<this.N;r++){if(0===this.blocks[i][r]&&(this.blankR=i,this.blankC=r,this.blank=[i,r]),0!==this.blocks[i][r]&&this.blocks[i][r]!==n){t+=1;var o=i,a=r,s=this.blocks[i][r];0!==s&&(s-=1);var l=Math.floor(s/this.N),u=Math.floor(s%this.N);e+=Math.abs(o-l),e+=Math.abs(a,u)}n+=1}this.hammingScore=t,this.manhattanScore=e}},u.prototype.hamming=function(){return this.hammingScore},u.prototype.manhattan=function(){return this.manhattanScore},u.prototype.getNeighbours=function(){var t=this.blank,e=[],n=this.N-1;e.push([t[0]+1,t[1]]),e.push([t[0]-1,t[1]]),e.push([t[0],t[1]+1]),e.push([t[0],t[1]-1]),e=e.filter(function(t){return t[0]<=n&&t[0]>=0&&t[1]<=n&&t[1]>=0});for(var i=[],r=0;r<e.length;r++){var o=this.createNewBlocks(e[r]),a=new u(o);a.move=o.move,a.prevBlank={from:t,to:e[r]},a.steps=this.steps+1,a.prevNode=this,i.push(a)}return i},u.prototype.twin=function(){var t=this.blocks[0][0]*this.blocks[0][1],n=e(this.blocks);if(0!==t){this._tiles_swapped={tile_1:{x:0,y:0},tile_2:{x:0,y:1}},n=this.swap(n,0,0,0,1);var i=new u(n);return i}this._tiles_swapped={tile_1:{x:1,y:0},tile_2:{x:1,y:1}},n=this.swap(n,1,0,1,1);var i=new u(n);return i},u.prototype.tiles_swapped=function(){return this._tiles_swapped},u.prototype.swap=function(t,e,n,i,r){var o=t[e][n];return t[e][n]=t[i][r],t[i][r]=o,t},u.prototype.createNewBlocks=function(t){function e(t){for(var n=t.slice(0),i=n.length;i--;)n[i]instanceof Array&&(n[i]=e(n[i]));return n}var n=this.blank,i=e(this.blocks),r=t[0],o=t[1];return i[n[0]][n[1]]=this.blocks[t[0]][t[1]],i[t[0]][t[1]]=0,i.move=[r,o],i},u.prototype.isGoal=function(){for(var t=this.N*this.N,e=0,n=0;n<this.N;n++)for(var i=0;i<this.N;i++){if(e+=1,e===t)return!0;if(this.blocks[n][i]!==e)return!1}return!0},u.prototype.equals=function(t){if(this.N!==t.blocks[0].length)return!1;for(var e=0;e<this.N;e++)for(var n=0;n<this.N;n++)if(this.blocks[e][n]!==t.blocks[e][n])return!1;return!0},u.prototype.printBoardAS=function(){for(var t="",e=0;3>e;e++){for(var n=0;3>n;n++)t+=this.blocks[e][n]+", ";
t+="\n"}t+=this.move},n.prototype.score=function(t){return void 0===t?this.board.manhattan()+this.steps:"hamming"==t?this.board.hamming()+this.steps:void 0},n.prototype.compareTo=function(t){return this.score()<t.score()?-1:this.score()>t.score()?1:this.score("hamming")<t.score("hamming")?-1:this.score("hamming")>t.score("hamming")?1:0},h=function(){function e(e){a=e;var o=new n(e,void 0,0),s=new n(e.twin(),void 0,0),l=new t,u=new t;for(l.insert(o),u.insert(s);;){var h=l.delMin(),c=u.delMin();if(h.board.isGoal()){this.isSolvable=!0,this.steps=h.steps;break}if(c.board.isGoal()){this.isSolvable=!1,a=a.twin();break}r(l,h),r(u,c)}i.call(this,h)}function i(t){if(this.isSolvable){var e=[];for(e.push(t.board);void 0!==t.prev;)t=t.prev,e.push(t.board);o=e.reverse()}else o=[]}function r(t,e){var i=e.board.getNeighbours();i.forEach(function(i){var r=new n(i,e,e.steps+1);void 0!==e.prev?i.equals(e.prev.board)||t.insert(r):t.insert(r)})}var o,a,s={solve:e,steps:0,init:function(t){this.solve(t)},getSolution:function(){return o},getWinningBlocks:function(){return a.blocks},isSolvable:!1};return{create:function(t){var e=Object.create(s);return e.init(t),e}}}()}.call(this),function(){m.__define__("rompecabezas",function(){var t=this;return[v.A({id:"actionToggleSound","class":"btn btn-primary","data-action":"toggle-sound"},"\n    ",v.SPAN({"class":function(){return["\n      ",b.If(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasIsMuted")},function(){return"\n        glyphicon glyphicon-volume-off\n      "},function(){return"\n        glyphicon glyphicon-volume-up\n      "}),"\n      "]}}),"\n  "),"\n\n  ",g.include(t.lookupTemplate("step")),"\n\n  ",v.DIV({"class":function(){return b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"equals"),"rompecabezasStep","juego")},function(){return"hidden"})}},"\n    ",v.Raw('<div class="col-lg-2">\n    </div>'),"\n\n    ",v.DIV({"class":"col-lg-8"},"\n      ",v.DIV({"class":"row"},"\n        ",v.DIV({"class":"col-lg-offset-1 col-lg-10"},"\n          ",v.H3({"class":"pull-left text-left"},"\n            Movimientos: ",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasMovimientos")}),"\n          "),"\n          ",v.H3({"class":"pull-right text-right"},"\n            ",b.View(function(){return g.mustache(t.lookup("timer"),t.lookup("rompecabezasTiempo"))}),"\n          "),"\n        "),"\n      "),"\n      ",v.Raw('<div class="row">\n        <div id="rompecabezas-container"></div>\n      </div>'),"\n      ",v.Raw('<div class="row"></div>'),"\n      ",v.Raw('<div class="row">\n        <div class="col-lg-offset-2 col-lg-8">\n          <div class="pull-left text-left">\n            <button class="btn btn-primary" data-action="reiniciar">\n              <span class="glyphicon glyphicon-repeat"></span> Reiniciar\n            </button>\n            <input type="checkbox" data-action="toggle-help"> Ayuda\n          </div>\n          <div class="pull-right text-right">\n            <button class="btn btn-danger" data-action="volver-al-comienzo">\n              <span class="glyphicon glyphicon-arrow-left"></span> Volver\n            </button>\n          </div>\n        </div>\n      </div>'),"\n    "),"\n\n    ",v.Raw('<div class="col-lg-2meru">\n    </div>'),"\n  ")]}),m.__define__("rompecabezasIntro",function(){var t=this;return[v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-6 col-lg-offset-3 col-md-6 col-md-offset-2"},"\n    ",g.include(t.lookupTemplate("markdown"),function(){return"\n# Rompecabezas\n\nHola!\n\nSabas que? Los agricultores andinos realizan muchas actividades\nagrcolas durante el ao para producir las papas que comemos.\n\nDescubre el ciclo agrcola de la papa armando los rompecabezas.\n\n    "}),"\n    "),"\n  "),v.Raw('\n\n  <br>\n\n  <div class="row text-center">\n    <a class="btn btn-primary" href="#" data-action="comenzar">Comenzar!</a>\n  </div>')]}),m.__define__("rompecabezasElegirEtapa",function(){var t=this;return[v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-8 col-lg-offset-2"},"\n      ",g.include(t.lookupTemplate("markdown"),function(){return"\n### Conoce el ciclo agrcola de la papa.\n\nElije la figura que quieres armar en un rompecabezas.\n      "}),"\n    "),"\n  "),v.Raw("\n\n  <br>\n\n  "),b.Each(function(){return g.call(t.lookup("etapas"))},function(){return["\n    ",v.DIV({"class":"col-xs-6 col-md-3 text-center"},"\n      ",v.DIV({"class":"etapa-titulo"},g.include(t.lookupTemplate("markdown"),function(){return b.View(function(){return g.mustache(t.lookup("titulo"))})})),"\n      ",v.A({href:"#","class":"thumbnail","data-action":"etapa-elegida"},"\n        ",v.IMG({src:function(){return["assets/images/etapas/",g.mustache(t.lookup("slug")),"-thumb.jpg"]},alt:"..."}),"\n      "),"\n    "),"\n  "]})]}),m.__define__("rompecabezasJuego",function(){return""}),m.__define__("rompecabezasFin",function(){var t=this;return[v.DIV({"class":"row no-print"},"\n    ",v.Raw('<div class="col-lg-3 col-lg-offset-1"> \n      <h1>Muy bien!</h1>\n    </div>'),"\n    ",v.DIV({"class":"col-lg-6"}," \n      ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"audio-es"},"\n        Espaol\n        ",b.Unless(function(){return g.call(t.lookup("audioEnQuechua"))},function(){return["\n          ",g.include(t.lookupTemplate("langSoundGlyph")),"\n        "]}),"\n      "),"\n      ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"audio-que"},"\n        Quechua\n        ",b.If(function(){return g.call(t.lookup("audioEnQuechua"))},function(){return["\n          ",g.include(t.lookupTemplate("langSoundGlyph")),"\n        "]}),"\n      "),"\n      ",v.Raw('<button type="button" class="btn btn-primary" data-action="audio-pause">\n        <span class="glyphicon glyphicon-pause"></span>\n      </button>'),"\n      ",v.Raw('<button type="button" class="btn btn-primary" data-action="audio-restart">\n        <span class="glyphicon glyphicon-repeat"></span>\n      </button>'),"\n    "),"\n  "),"\n\n  ",v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-10 col-lg-offset-1"},"\n      ",v.H3({"class":"fin-etapa-titulo"},g.include(t.lookupTemplate("markdown"),function(){return b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"titulo"))})})),"\n      ",v.H3(v.Raw("<strong>Movimientos:</strong>")," ",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasMovimientos")})),"\n      ",v.H3(v.Raw("<strong>Tiempo:</strong>")," ",b.View(function(){return g.mustache(t.lookup("timer"),t.lookup("rompecabezasTiempo"))})),"\n    "),"\n  "),"\n\n  ",v.DIV({"class":"row"},"\n    ",v.DIV({"class":"col-lg-4 col-lg-offset-1"},"\n      ",v.IMG({src:function(){return["assets/images/etapas/",g.mustache(g.dot(t.lookup("etapaCompletada"),"slug")),".jpg"]},"class":"img-responsive",alt:"..."}),"\n    "),"\n\n    ",v.DIV({"class":"col-lg-5"},"\n      ",g.include(t.lookupTemplate("markdown"),function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"descripcion"))}),"\n      "]}),"\n\n      ",v.Raw('<button class="btn btn-success" href="#" data-toggle="modal" data-target="#preguntaModal">\n        <span class="glyphicon glyphicon-arrow-right"></span> Continuar\n      </button>'),"\n      ",v.Raw('<button class="btn btn-primary" href="#" data-action="imprimir">\n        <span class="glyphicon glyphicon-print"></span> Imprimir\n      </button>'),"\n    "),"\n  "),"\n\n  ",v.DIV({id:"preguntaModal","class":"modal fade","data-keyboard":"false"},"\n    ",v.DIV({"class":"modal-dialog"},"\n      ",v.DIV({"class":"modal-content"},"\n        ",v.Raw('<div class="modal-header">\n          <h4 class="modal-title">Para continuar, responde:</h4>\n        </div>'),"\n        ",v.DIV({"class":"modal-body text-center"},"\n          ",g.include(t.lookupTemplate("markdown"),function(){return["\n            ",b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")},function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("etapaCompletada"),"pregunta","texto"))}),"\n            "]},function(){return["\n",b.View(function(){return g.mustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")}),"\n            "]}),"\n          "]}),"\n        "),"\n        ",v.DIV({"class":"modal-footer text-center"},"\n          ",b.Unless(function(){return g.dataMustache(g.dot(t.lookup("Session"),"get"),"rompecabezasRespuesta")},function(){return["\n            ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"respuesta","data-respuesta":"si"},"S"),"\n            ",v.BUTTON({type:"button","class":"btn btn-primary","data-action":"respuesta","data-respuesta":"no"},"No"),"\n          "]},function(){return["\n            ",v.BUTTON({"class":"btn btn-success",href:"#","data-action":"volver-a-jugar"},"\n              ",v.SPAN({"class":"glyphicon glyphicon-repeat"})," Volver a jugar\n            "),"\n          "]}),"\n        "),"\n      "),"\n    "),"\n  ")]}),m.__define__("langSoundGlyph",function(){var t=this;return b.If(function(){return g.call(t.lookup("audioPaused"))},function(){return["\n    ",v.SPAN({"class":"glyphicon glyphicon-volume-off"}),"\n  "]},function(){return["\n    ",v.SPAN({"class":"glyphicon glyphicon-volume-up"}),"\n  "]})})}.call(this),function(){function n(t){return t.preventDefault(),$("#preguntaModal").hide(),p.set("rompecabezasEtapaElegida",void 0),p.set("rompecabezasRespuesta",void 0),p.set("rompecabezasStep","elegirEtapa"),!1}function i(e){var n=p.get("rompecabezasEtapaElegida").numero,i=p.get("rompecabezasFinAudio");e?t.sonidos.etapas[n][i].pause():t.sonidos.etapas[n][i].play(),p.set("rompecabezasFinAudioPaused",e)}var r={'click [data-action="comenzar"]':function(t,e){return n(t,e)},'click [data-action="etapa-elegida"]':function(t){t.preventDefault();var n=e.findOne({numero:this.numero});return p.set("rompecabezasEtapaElegida",n),p.set("rompecabezasStep","juego"),!1},'click [data-action="volver-al-comienzo"]':function(t){return t.preventDefault(),bootbox.confirm("Ests segur@ de que quieres abandonar el juego?",function(t){t&&(p.set("rompecabezasEtapaElegida",void 0),p.set("rompecabezasStep","elegirEtapa"))}),!1},'click [data-action="toggle-sound"]':function(){var e=!t.game.sound.mute;t.game.sound.mute=e,p.set("rompecabezasIsMuted",e)},'change [data-action="toggle-help"]':function(){var t=!p.get("rompecabezasHelpOn");p.set("rompecabezasHelpOn",t)},'click [data-action="reiniciar"]':function(e){return e.preventDefault(),bootbox.confirm("Ests segur@ de que quieres abandonar el juego?",function(e){e&&t.restart()}),!1},'click [data-action="imprimir"]':function(t){return t.preventDefault(),window.print(),!1},'click [data-action="respuesta"]':function(t){t.preventDefault();var e=$(t.currentTarget).data("respuesta"),n=p.get("rompecabezasEtapaElegida");return p.set("rompecabezasRespuesta",n.pregunta.respuesta[e]),!1},'click [data-action="volver-a-jugar"]':function(e,i){var r=$("#preguntaModal");return r.on("hidden.bs.modal",function(){var r=p.get("rompecabezasEtapaElegida").numero;t.sonidos.etapas[r].es.unload(),t.sonidos.etapas[r].que.unload(),n(e,i)}),r.modal("hide"),!1},'click [data-toggle="modal"][data-target="#preguntaModal"]':function(){},'click [data-action="audio-que"]':function(t){t.preventDefault(),p.set("rompecabezasFinAudio","que"),p.set("rompecabezasFinAudioPaused",!1)},'click [data-action="audio-es"]':function(t){t.preventDefault(),p.set("rompecabezasFinAudio","es"),p.set("rompecabezasFinAudioPaused",!1)},'click [data-action="audio-pause"]':function(t){t.preventDefault();var e=!p.get("rompecabezasFinAudioPaused");i(e)},'click [data-action="audio-restart"]':function(e){e.preventDefault();var n=p.get("rompecabezasFinAudio");if(n){var i=p.get("rompecabezasEtapaElegida").numero,r=t.sonidos.etapas[i][n];r.pos()>0&&p.get("rompecabezasFinAudioPaused")&&r.play(),r.stop(),setTimeout(function(){r.play(),p.set("rompecabezasFinAudioPaused",!1)},250)}}};y.registerHelper("rompecabezasTiempo",function(){return p.get("rompecabezasTiempo")}),m.rompecabezas.rendered=function(){t.init()},m.rompecabezas.step=function(){var t=p.get("rompecabezasStep")||"intro";return m["rompecabezas"+f.capitalize(t)]},m.rompecabezas.events(r),m.rompecabezasIntro.events(r),m.rompecabezasElegirEtapa.etapas=function(){return e.find()},m.rompecabezasElegirEtapa.events(r),m.rompecabezasJuego.rendered=function(){t.game.state.start("preloader")},m.rompecabezasJuego.events(r),m.rompecabezasFin.rendered=function(){p.set("rompecabezasFinAudio","es");var t=$("#preguntaModal");t.on("shown.bs.modal",function(){i(!0)}),t.on("hidden.bs.modal",function(){i(!1)})},m.rompecabezasFin.audioEnQuechua=function(){return"que"===p.get("rompecabezasFinAudio")},m.rompecabezasFin.etapaCompletada=function(){return p.get("rompecabezasEtapaElegida")},m.langSoundGlyph.audioPaused=function(){return p.get("rompecabezasFinAudioPaused")},d.autorun(function(){var e=p.get("rompecabezasFinAudio");if(e){var n=p.get("rompecabezasEtapaElegida").numero;"que"===e?t.sonidos.etapas[n].es.pause():t.sonidos.etapas[n].que.pause(),t.sonidos.etapas[n][e].play()}})}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-rompecabezas"]={Rompecabezas:t,Etapas:e}}(),function(){var t,e,n=Package.underscore._;(function(){e={}}).call(this),function(){!function(t,n){"use strict";function i(t,e){var n,i,r=t.toLowerCase();for(e=[].concat(e),n=0;n<e.length;n+=1)if(i=e[n]){if(i.test&&i.test(t))return!0;if(i.toLowerCase()===r)return!0}}var r=n.prototype.trim,o=n.prototype.trimRight,a=n.prototype.trimLeft,s=function(t){return 1*t||0},l=function(t,e){if(1>e)return"";for(var n="";e>0;)1&e&&(n+=t),e>>=1,t+=t;return n},u=[].slice,h=function(t){return null==t?"\\s":t.source?t.source:"["+m.escapeRegExp(t)+"]"},c={lt:"<",gt:">",quot:'"',amp:"&",apos:"'"},d={};for(var p in c)d[c[p]]=p;d["'"]="#39";var f=function(){function t(t){return Object.prototype.toString.call(t).slice(8,-1).toLowerCase()}var e=l,i=function(){return i.cache.hasOwnProperty(arguments[0])||(i.cache[arguments[0]]=i.parse(arguments[0])),i.format.call(null,i.cache[arguments[0]],arguments)};return i.format=function(i,r){var o,a,s,l,u,h,c,d=1,p=i.length,m="",g=[];for(a=0;p>a;a++)if(m=t(i[a]),"string"===m)g.push(i[a]);else if("array"===m){if(l=i[a],l[2])for(o=r[d],s=0;s<l[2].length;s++){if(!o.hasOwnProperty(l[2][s]))throw new Error(f('[_.sprintf] property "%s" does not exist',l[2][s]));o=o[l[2][s]]}else o=l[1]?r[l[1]]:r[d++];if(/[^s]/.test(l[8])&&"number"!=t(o))throw new Error(f("[_.sprintf] expecting number but found %s",t(o)));switch(l[8]){case"b":o=o.toString(2);break;case"c":o=n.fromCharCode(o);break;case"d":o=parseInt(o,10);break;case"e":o=l[7]?o.toExponential(l[7]):o.toExponential();break;case"f":o=l[7]?parseFloat(o).toFixed(l[7]):parseFloat(o);break;case"o":o=o.toString(8);break;case"s":o=(o=n(o))&&l[7]?o.substring(0,l[7]):o;break;case"u":o=Math.abs(o);break;case"x":o=o.toString(16);break;case"X":o=o.toString(16).toUpperCase()}o=/[def]/.test(l[8])&&l[3]&&o>=0?"+"+o:o,h=l[4]?"0"==l[4]?"0":l[4].charAt(1):" ",c=l[6]-n(o).length,u=l[6]?e(h,c):"",g.push(l[5]?o+u:u+o)}return g.join("")},i.cache={},i.parse=function(t){for(var e=t,n=[],i=[],r=0;e;){if(null!==(n=/^[^\x25]+/.exec(e)))i.push(n[0]);else if(null!==(n=/^\x25{2}/.exec(e)))i.push("%");else{if(null===(n=/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(e)))throw new Error("[_.sprintf] huh?");if(n[2]){r|=1;var o=[],a=n[2],s=[];if(null===(s=/^([a-z_][a-z_\d]*)/i.exec(a)))throw new Error("[_.sprintf] huh?");for(o.push(s[1]);""!==(a=a.substring(s[0].length));)if(null!==(s=/^\.([a-z_][a-z_\d]*)/i.exec(a)))o.push(s[1]);else{if(null===(s=/^\[(\d+)\]/.exec(a)))throw new Error("[_.sprintf] huh?");o.push(s[1])}n[2]=o}else r|=2;if(3===r)throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");i.push(n)}e=e.substring(n[0].length)}return i},i}(),m={VERSION:"2.3.0",isBlank:function(t){return null==t&&(t=""),/^\s*$/.test(t)},stripTags:function(t){return null==t?"":n(t).replace(/<\/?[^>]+>/g,"")},capitalize:function(t){return t=null==t?"":n(t),t.charAt(0).toUpperCase()+t.slice(1)},chop:function(t,e){return null==t?[]:(t=n(t),e=~~e,e>0?t.match(new RegExp(".{1,"+e+"}","g")):[t])},clean:function(t){return m.strip(t).replace(/\s+/g," ")},count:function(t,e){if(null==t||null==e)return 0;t=n(t),e=n(e);for(var i=0,r=0,o=e.length;;){if(r=t.indexOf(e,r),-1===r)break;i++,r+=o}return i},chars:function(t){return null==t?[]:n(t).split("")},swapCase:function(t){return null==t?"":n(t).replace(/\S/g,function(t){return t===t.toUpperCase()?t.toLowerCase():t.toUpperCase()})},escapeHTML:function(t){return null==t?"":n(t).replace(/[&<>"']/g,function(t){return"&"+d[t]+";"})},unescapeHTML:function(t){return null==t?"":n(t).replace(/\&([^;]+);/g,function(t,e){var i;return e in c?c[e]:(i=e.match(/^#x([\da-fA-F]+)$/))?n.fromCharCode(parseInt(i[1],16)):(i=e.match(/^#(\d+)$/))?n.fromCharCode(~~i[1]):t})},escapeRegExp:function(t){return null==t?"":n(t).replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")},splice:function(t,e,n,i){var r=m.chars(t);return r.splice(~~e,~~n,i),r.join("")},insert:function(t,e,n){return m.splice(t,e,0,n)},include:function(t,e){return""===e?!0:null==t?!1:-1!==n(t).indexOf(e)},join:function(){var t=u.call(arguments),e=t.shift();return null==e&&(e=""),t.join(e)},lines:function(t){return null==t?[]:n(t).split("\n")},reverse:function(t){return m.chars(t).reverse().join("")},startsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=n(t),e=n(e),t.length>=e.length&&t.slice(0,e.length)===e)},endsWith:function(t,e){return""===e?!0:null==t||null==e?!1:(t=n(t),e=n(e),t.length>=e.length&&t.slice(t.length-e.length)===e)},succ:function(t){return null==t?"":(t=n(t),t.slice(0,-1)+n.fromCharCode(t.charCodeAt(t.length-1)+1))},titleize:function(t){return null==t?"":(t=n(t).toLowerCase(),t.replace(/(?:^|\s|-)\S/g,function(t){return t.toUpperCase()}))},camelize:function(t){return m.trim(t).replace(/[-_\s]+(.)?/g,function(t,e){return e?e.toUpperCase():""})},underscored:function(t){return m.trim(t).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},dasherize:function(t){return m.trim(t).replace(/([A-Z])/g,"-$1").replace(/[-_\s]+/g,"-").toLowerCase()},classify:function(t){return m.titleize(n(t).replace(/[\W_]/g," ")).replace(/\s/g,"")},humanize:function(t){return m.capitalize(m.underscored(t).replace(/_id$/,"").replace(/_/g," "))},trim:function(t,e){return null==t?"":!e&&r?r.call(t):(e=h(e),n(t).replace(new RegExp("^"+e+"+|"+e+"+$","g"),""))},ltrim:function(t,e){return null==t?"":!e&&a?a.call(t):(e=h(e),n(t).replace(new RegExp("^"+e+"+"),""))},rtrim:function(t,e){return null==t?"":!e&&o?o.call(t):(e=h(e),n(t).replace(new RegExp(e+"+$"),""))},truncate:function(t,e,i){return null==t?"":(t=n(t),i=i||"...",e=~~e,t.length>e?t.slice(0,e)+i:t)},prune:function(t,e,i){if(null==t)return"";if(t=n(t),e=~~e,i=null!=i?n(i):"...",t.length<=e)return t;var r=function(t){return t.toUpperCase()!==t.toLowerCase()?"A":" "},o=t.slice(0,e+1).replace(/.(?=\W*\w*$)/g,r);return o=o.slice(o.length-2).match(/\w\w/)?o.replace(/\s*\S+$/,""):m.rtrim(o.slice(0,o.length-1)),(o+i).length>t.length?t:t.slice(0,o.length)+i},words:function(t,e){return m.isBlank(t)?[]:m.trim(t,e).split(e||/\s+/)},pad:function(t,e,i,r){t=null==t?"":n(t),e=~~e;var o=0;switch(i?i.length>1&&(i=i.charAt(0)):i=" ",r){case"right":return o=e-t.length,t+l(i,o);case"both":return o=e-t.length,l(i,Math.ceil(o/2))+t+l(i,Math.floor(o/2));default:return o=e-t.length,l(i,o)+t}},lpad:function(t,e,n){return m.pad(t,e,n)},rpad:function(t,e,n){return m.pad(t,e,n,"right")},lrpad:function(t,e,n){return m.pad(t,e,n,"both")},sprintf:f,vsprintf:function(t,e){return e.unshift(t),f.apply(null,e)},toNumber:function(t,e){return t?(t=m.trim(t),t.match(/^-?\d+(?:\.\d+)?$/)?s(s(t).toFixed(~~e)):0/0):0},numberFormat:function(t,e,n,i){if(isNaN(t)||null==t)return"";t=t.toFixed(~~e),i="string"==typeof i?i:",";var r=t.split("."),o=r[0],a=r[1]?(n||".")+r[1]:"";return o.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+i)+a},strRight:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var i=e?t.indexOf(e):-1;return~i?t.slice(i+e.length,t.length):t},strRightBack:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var i=e?t.lastIndexOf(e):-1;return~i?t.slice(i+e.length,t.length):t},strLeft:function(t,e){if(null==t)return"";t=n(t),e=null!=e?n(e):e;var i=e?t.indexOf(e):-1;return~i?t.slice(0,i):t},strLeftBack:function(t,e){if(null==t)return"";t+="",e=null!=e?""+e:e;var n=t.lastIndexOf(e);return~n?t.slice(0,n):t},toSentence:function(t,e,n,i){e=e||", ",n=n||" and ";var r=t.slice(),o=r.pop();return t.length>2&&i&&(n=m.rtrim(e)+n),r.length?r.join(e)+n+o:o},toSentenceSerial:function(){var t=u.call(arguments);return t[3]=!0,m.toSentence.apply(m,t)},slugify:function(t){if(null==t)return"";var e="",i="aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz",r=new RegExp(h(e),"g");return t=n(t).toLowerCase().replace(r,function(t){var n=e.indexOf(t);return i.charAt(n)||"-"}),m.dasherize(t.replace(/[^\w\s-]/g,""))},surround:function(t,e){return[e,t,e].join("")},quote:function(t,e){return m.surround(t,e||'"')},unquote:function(t,e){return e=e||'"',t[0]===e&&t[t.length-1]===e?t.slice(1,t.length-1):t},exports:function(){var t={};for(var e in this)this.hasOwnProperty(e)&&!e.match(/^(?:include|contains|reverse)$/)&&(t[e]=this[e]);return t},repeat:function(t,e,i){if(null==t)return"";if(e=~~e,null==i)return l(n(t),e);for(var r=[];e>0;r[--e]=t);return r.join(i)},naturalCmp:function(t,e){if(t==e)return 0;if(!t)return-1;if(!e)return 1;for(var i=/(\.\d+)|(\d+)|(\D+)/g,r=n(t).toLowerCase().match(i),o=n(e).toLowerCase().match(i),a=Math.min(r.length,o.length),s=0;a>s;s++){var l=r[s],u=o[s];if(l!==u){var h=parseInt(l,10);if(!isNaN(h)){var c=parseInt(u,10);if(!isNaN(c)&&h-c)return h-c}return u>l?-1:1}}return r.length===o.length?r.length-o.length:e>t?-1:1},levenshtein:function(t,e){if(null==t&&null==e)return 0;if(null==t)return n(e).length;if(null==e)return n(t).length;t=n(t),e=n(e);for(var i,r,o=[],a=0;a<=e.length;a++)for(var s=0;s<=t.length;s++)r=a&&s?t.charAt(s-1)===e.charAt(a-1)?i:Math.min(o[s],o[s-1],i)+1:a+s,i=o[s],o[s]=r;return o.pop()},toBoolean:function(t,e,n){return"number"==typeof t&&(t=""+t),"string"!=typeof t?!!t:(t=m.trim(t),i(t,e||["true","1"])?!0:i(t,n||["false","0"])?!1:void 0)}};m.strip=m.trim,m.lstrip=m.ltrim,m.rstrip=m.rtrim,m.center=m.lrpad,m.rjust=m.lpad,m.ljust=m.rpad,m.contains=m.include,m.q=m.quote,m.toBool=m.toBoolean,"undefined"!=typeof e&&("undefined"!=typeof module&&module.exports&&(module.exports=m),e._s=m),"function"==typeof define&&define.amd&&define("underscore.string",[],function(){return m}),t._=t._||{},t._.string=t._.str=m}(this,String)}.call(this),function(){t=e._s,n.str=t,n.mixin(n.str.exports()),n.str.include("Underscore.string","string")}.call(this),"undefined"==typeof Package&&(Package={}),Package["underscore-string-latest"]={_s:t}}(),function(){{var t,e,n,i,r=Package.meteor.Meteor;Package.underscore._}(function(){i="object"==typeof i?i:{};var t,e,o,a=[].slice;o=null!=("undefined"!=typeof process&&null!==process?process.nextTick:void 0)?process.nextTick:function(t){return setTimeout(t,0)},n=function(){function t(){}return t.prototype.on=function(t,e){var n;return this._events||(this._events={}),(n=this._events)[t]||(n[t]=[]),this._events[t].push(e),this},t.prototype.removeListener=function(t,e){var n,i,r;for(this._events||(this._events={}),i=(r=this._events)[t]||(r[t]=[]),n=0;n<i.length;)i[n]===e&&(i[n]=void 0),n++;return o(function(e){return function(){var n;return e._events[t]=function(){var e,i,r,o;for(r=this._events[t],o=[],e=0,i=r.length;i>e;e++)n=r[e],n&&o.push(n);return o}.call(e)}}(this)),this},t.prototype.emit=function(){var t,e,n,i,r,o,s;if(e=arguments[0],t=2<=arguments.length?a.call(arguments,1):[],!(null!=(o=this._events)?o[e]:void 0))return this;for(s=this._events[e],i=0,r=s.length;r>i;i++)n=s[i],n&&n.apply(this,t);return this},t}(),n.mixin=function(t){var e;return e=t.prototype||t,e.on=n.prototype.on,e.removeListener=n.prototype.removeListener,e.emit=n.prototype.emit,t},t="undefined"!=typeof window,e="undefined"!=typeof r,t||e?this.MicroEvent=n:module.exports=n}).call(this),function(){i="object"==typeof i?i:{};var e,n;e="undefined"!=typeof window,n="undefined"!=typeof r,t={},t._browserOut=function(){var t;if(null!=("undefined"!=typeof console&&null!==console?console.log:void 0))return 0===arguments.length?console.log(""):"function"==typeof console.log.apply?console.log.apply(console,arguments):"function"==typeof Function.prototype.bind?(t=Function.prototype.bind.call(console.log,console),t.apply(console,arguments)):Function.prototype.call.call(console.log,console,Array.prototype.slice.call(arguments))},t._browserErr=function(){var t;if(null!=("undefined"!=typeof console&&null!==console?console.error:void 0))return 0===arguments.length?console.error(""):"function"==typeof console.error.apply?console.error.apply(console,arguments):"function"==typeof Function.prototype.bind?(t=Function.prototype.bind.call(console.error,console),t.apply(console,arguments)):Function.prototype.call.call(console.error,console,Array.prototype.slice.call(arguments))},t.out=function(n){return e?t._browserOut.apply(this,n):console.log.apply(console,n)},t.err=function(n){return e?t._browserOut.apply(this,n):console.error.apply(console,n)},e||n?this.Pince=t:module.exports=t}.call(this),function(){i="object"==typeof i?i:{};var o,a,s,l,u,h,c,d,p,f,m,g,y,_,v,b,w,x=[].slice,T={}.hasOwnProperty,M=function(t,e){function n(){this.constructor=t}for(var i in e)T.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};c="undefined"!=typeof r,h="undefined"!=typeof window,h?(p=function(){return p},p.format=function(){return""},o=n):c?(p=Npm.require("moment"),o=Npm.require("events").EventEmitter):(p=require("moment"),o=require("events").EventEmitter,t=require("./console.coffee")),y={error:0,warn:1,info:2,debug:3,trace:4},f=function(t){return t},h?u={error:f,warn:f,info:f,debug:f,trace:f}:(l=c?Npm.require("cli-color"):require("cli-color"),u={error:l.red.bold,warn:l.yellow,info:l.bold,debug:l.blue,trace:l.blackBright}),a="MADEYE_LOGLEVEL",m=function(){var t,e,n;return t=h?c?null!=(e=r.settings)&&null!=(n=e["public"])?n.logLevel:void 0:null:process.env[a]},g=function(){var t,e,n,i,o,s,l,u;if(h)return c&&null!=(o=null!=(s=r.settings)&&null!=(l=s["public"])?l.specificLogLevels:void 0)?o:{};n={},u=process.env;for(t in u)i=u[t],0===t.indexOf(""+a+"_")&&t!==a&&(e=t.substr((""+a+"_").length),e=e.split("_").join(":"),n[e]=i);return n},_=null!=(w=m())?w:"info",b=g(),v=null,s=function(){function e(t){var e,n;null==t&&(t={}),"string"==typeof t&&(t={logLevel:t}),this.logLevel=null!=(e=t.logLevel)?e:_,this.logLevels=null!=(n=t.logLevels)?n:b,this.loggers={},this.listenFns={}}return e.prototype._reattachLoggers=function(){var t,e,n,i;n=this.loggers,i=[];for(e in n)t=n[e],this.detach(e),i.push(this.listen(t,e));return i},e.prototype.setLevel=function(t,e){var n;if(e){if(!t)throw new Error("Must supply a name");return n={},n[t]=e,void this.setLevels(n)}if(e=t,!e)throw new Error("Must supply a level");this.logLevel!==e&&(this.logLevel=e,this._reattachLoggers())},e.prototype.setLevels=function(t){var e,n;for(n in t)e=t[n],this.logLevels[n]=e;return this._reattachLoggers()},e.prototype.findLevelFor=function(t){var e,n,i,r;for(n=this.logLevels[t],r=t;r.indexOf(":")>-1&&!n&&(e=r.lastIndexOf(":"),r=r.substr(0,e),i=this.logLevels[r],null==n&&(n=i),!n););return null==n&&(n=this.logLevel),n},e.prototype.listen=function(t,e){var n,i;if(!t)throw Error("An object is required for logging!");if(!e)throw Error("Name is required for logging!");this.loggers[e]=t,i&&(this.logLevels[e]=i),i=this.findLevelFor(e),this.listenFns[e]={},n=function(t){return function(){var n,i;return n=1<=arguments.length?x.call(arguments,0):[],i="function"==typeof v?v(n):void 0,i!==!1?t.handleLog({timestamp:new Date,level:"error",name:e,message:n}):void 0}}(this),t.on("error",n),this.listenFns[e].error=n,["warn","info","debug","trace"].forEach(function(n){return function(r){var o;if(!(y[r]>y[i]))return o=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],n.handleLog({timestamp:new Date,level:r,name:e,message:t})},t.on(r,o),n.listenFns[e][r]=o}}(this))},e.prototype.detach=function(t){var e,n,i,r;if(i=this.loggers[t]){r=this.listenFns[t];for(e in r)n=r[e],i.removeListener(e,n);delete this.listenFns[t],delete this.loggers[t]}},e.prototype.handleLog=function(e){var n,i,r,o;return o=p(e.timestamp).format("YYYY-MM-DD HH:mm:ss.SSS"),n=u[e.level],r=""+o+" "+n(e.level+": ")+" ",e.name&&(r+="["+e.name+"] "),i="string"==typeof e.message?[e.message]:e.message,i.unshift(r),y[e.level]<=y.warn?t.err(i):t.out(i)},e}(),d=new s,e=function(t){function e(t){null==t&&(t={}),"string"==typeof t&&(t={name:t}),this.name=t.name,d.listen(this,t.name,t.logLevel)}return M(e,t),e.setLevel=function(){return d.setLevel.apply(d,arguments)},e.setLevels=function(){return d.setLevels.apply(d,arguments)},e.onError=function(t){return v=t},e.listen=function(t,e,n){return d.listen(t,e,n)},e.prototype._log=function(t,e){return e.unshift(t),this.emit.apply(this,e)},e.prototype.log=function(){var t,e;return t=arguments[0],e=2<=arguments.length?x.call(arguments,1):[],this._log(t,e)},e.prototype.trace=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("trace",t)},e.prototype.debug=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("debug",t)},e.prototype.info=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("info",t)},e.prototype.warn=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("warn",t)},e.prototype.error=function(){var t;return t=1<=arguments.length?x.call(arguments,0):[],this._log("error",t)},e}(o),this.Logger=e,e.listener=d,"undefined"!=typeof exports&&(module.exports=e)}.call(this),"undefined"==typeof Package&&(Package={}),Package.pince={Pince:t,Logger:e,MicroEvent:n}}(),function(){var t=(Package.meteor.Meteor,Package.jquery.$,Package.jquery.jQuery);(function(){if("undefined"==typeof t)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof e&&r[e].call(n)})}var n='[data-dismiss="alert"]',i=function(e){t(e).on("click",n,this.close)};i.VERSION="3.2.0",i.prototype.close=function(e){function n(){o.detach().trigger("closed.bs.alert").remove()}var i=t(this),r=i.attr("data-target");r||(r=i.attr("href"),r=r&&r.replace(/.*(?=#[^\s]*$)/,""));var o=t(r);e&&e.preventDefault(),o.length||(o=i.hasClass("alert")?i:i.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",n).emulateTransitionEnd(150):n())};var r=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=i,t.fn.alert.noConflict=function(){return t.fn.alert=r,this},t(document).on("click.bs.alert.data-api",n,i.prototype.close)
}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.button"),o="object"==typeof e&&e;r||i.data("bs.button",r=new n(this,o)),"toggle"==e?r.toggle():e&&r.setState(e)})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.2.0",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(e){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();e+="Text",null==o.resetText&&i.data("resetText",i[r]()),i[r](null==o[e]?this.options[e]:o[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var n=this.$element.find("input");"radio"==n.prop("type")&&(n.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&n.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var i=t.fn.button;t.fn.button=e,t.fn.button.Constructor=n,t.fn.button.noConflict=function(){return t.fn.button=i,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=t(n.target);i.hasClass("btn")||(i=i.closest(".btn")),e.call(i,"toggle"),n.preventDefault()})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.carousel"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e),a="string"==typeof e?e:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof e?r.to(e):a?r[a]():o.interval&&r.pause().cycle()})}var n=function(e,n){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};n.VERSION="3.2.0",n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},n.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},n.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},n.prototype.to=function(e){var n=this,i=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){n.to(e)}):i==e?this.pause().cycle():this.slide(e>i?"next":"prev",t(this.$items[e]))},n.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(e,n){var i=this.$element.find(".item.active"),r=n||i[e](),o=this.interval,a="next"==e?"left":"right",s="next"==e?"first":"last",l=this;if(!r.length){if(!this.options.wrap)return;r=this.$element.find(".item")[s]()}if(r.hasClass("active"))return this.sliding=!1;var u=r[0],h=t.Event("slide.bs.carousel",{relatedTarget:u,direction:a});if(this.$element.trigger(h),!h.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var c=t(this.$indicators.children()[this.getItemIndex(r)]);c&&c.addClass("active")}var d=t.Event("slid.bs.carousel",{relatedTarget:u,direction:a});return t.support.transition&&this.$element.hasClass("slide")?(r.addClass(e),r[0].offsetWidth,i.addClass(a),r.addClass(a),i.one("bsTransitionEnd",function(){r.removeClass([e,a].join(" ")).addClass("active"),i.removeClass(["active",a].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(d)},0)}).emulateTransitionEnd(1e3*i.css("transition-duration").slice(0,-1))):(i.removeClass("active"),r.addClass("active"),this.sliding=!1,this.$element.trigger(d)),o&&this.cycle(),this}};var i=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=n,t.fn.carousel.noConflict=function(){return t.fn.carousel=i,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(n){var i,r=t(this),o=t(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=t.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),e.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var n=t(this);e.call(n,n.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.collapse"),o=t.extend({},n.DEFAULTS,i.data(),"object"==typeof e&&e);!r&&o.toggle&&"show"==e&&(e=!e),r||i.data("bs.collapse",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.$element=t(e),this.options=t.extend({},n.DEFAULTS,i),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};n.VERSION="3.2.0",n.DEFAULTS={toggle:!0},n.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},n.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var n=t.Event("show.bs.collapse");if(this.$element.trigger(n),!n.isDefaultPrevented()){var i=this.$parent&&this.$parent.find("> .panel > .in");if(i&&i.length){var r=i.data("bs.collapse");if(r&&r.transitioning)return;e.call(i,"hide"),r||i.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var a=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return a.call(this);var s=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(a,this)).emulateTransitionEnd(350)[o](this.$element[0][s])}}},n.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var i=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[n](0).one("bsTransitionEnd",t.proxy(i,this)).emulateTransitionEnd(350):i.call(this)}}},n.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var i=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=n,t.fn.collapse.noConflict=function(){return t.fn.collapse=i,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(n){var i,r=t(this),o=r.attr("data-target")||n.preventDefault()||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""),a=t(o),s=a.data("bs.collapse"),l=s?"toggle":r.data(),u=r.attr("data-parent"),h=u&&t(u);s&&s.transitioning||(h&&h.find('[data-toggle="collapse"][data-parent="'+u+'"]').not(r).addClass("collapsed"),r[a.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(a,l)})}(t),+function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(o).each(function(){var i=n(t(this)),r={relatedTarget:this};i.hasClass("open")&&(i.trigger(e=t.Event("hide.bs.dropdown",r)),e.isDefaultPrevented()||i.removeClass("open").trigger("hidden.bs.dropdown",r))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.2.0",a.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=n(r),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(o.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),a=r.hasClass("open");if(!a||a&&27==e.keyCode)return 27==e.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.divider):visible a",l=r.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var u=l.index(l.filter(":focus"));38==e.keyCode&&u>0&&u--,40==e.keyCode&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',a.prototype.keydown)}(t),+function(t){"use strict";function e(e,i){return this.each(function(){var r=t(this),o=r.data("bs.modal"),a=t.extend({},n.DEFAULTS,r.data(),"object"==typeof e&&e);o||r.data("bs.modal",o=new n(this,a)),"string"==typeof e?o[e](i):a.show&&o.show(i)})}var n=function(e,n){this.options=n,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.2.0",n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},n.prototype.show=function(e){var n=this,i=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(i),this.isShown||i.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var i=t.support.transition&&n.$element.hasClass("fade");n.$element.parent().length||n.$element.appendTo(n.$body),n.$element.show().scrollTop(0),i&&n.$element[0].offsetWidth,n.$element.addClass("in").attr("aria-hidden",!1),n.enforceFocus();var r=t.Event("shown.bs.modal",{relatedTarget:e});i?n.$element.find(".modal-dialog").one("bsTransitionEnd",function(){n.$element.trigger("focus").trigger(r)}).emulateTransitionEnd(300):n.$element.trigger("focus").trigger(r)}))},n.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},n.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},n.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(e){var n=this,i=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var r=t.support.transition&&i;if(this.$backdrop=t('<div class="modal-backdrop '+i+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),r&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;r?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){n.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},n.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},n.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},n.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var i=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=n,t.fn.modal.noConflict=function(){return t.fn.modal=i,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=t(this),r=i.attr("href"),o=t(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),e.call(o,a,this)})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.2.0",n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show()},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var n=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!n)return;var i=this,r=this.tip(),o=this.getUID(this.type);this.setContent(),r.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&r.addClass("fade");var a="function"==typeof this.options.placement?this.options.placement.call(this,r[0],this.$element[0]):this.options.placement,s=/\s?auto?\s?/i,l=s.test(a);l&&(a=a.replace(s,"")||"top"),r.detach().css({top:0,left:0,display:"block"}).addClass(a).data("bs."+this.type,this),this.options.container?r.appendTo(this.options.container):r.insertAfter(this.$element);var u=this.getPosition(),h=r[0].offsetWidth,c=r[0].offsetHeight;if(l){var d=a,p=this.$element.parent(),f=this.getPosition(p);a="bottom"==a&&u.top+u.height+c-f.scroll>f.height?"top":"top"==a&&u.top-f.scroll-c<0?"bottom":"right"==a&&u.right+h>f.width?"left":"left"==a&&u.left-h<f.left?"right":a,r.removeClass(d).addClass(a)}var m=this.getCalculatedOffset(a,u,h,c);this.applyPlacement(m,a);var g=function(){i.$element.trigger("shown.bs."+i.type),i.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?r.one("bsTransitionEnd",g).emulateTransitionEnd(150):g()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(e.top=e.top+o-u);var h=this.getViewportAdjustedDelta(n,e,l,u);h.left?e.left+=h.left:e.top+=h.top;var c=h.left?2*h.left-r+l:2*h.top-o+u,d=h.left?"left":"top",p=h.left?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(c,i[0][p],d)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n,t?50*(1-t/e)+"%":"")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(){function e(){"in"!=n.hoverState&&i.detach(),n.$element.trigger("hidden.bs."+n.type)}var n=this,i=this.tip(),r=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(r),r.isDefaultPrevented()?void 0:(i.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?i.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName;return t.extend({},"function"==typeof n.getBoundingClientRect?n.getBoundingClientRect():null,{scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:i?t(window).width():e.outerWidth(),height:i?t(window).height():e.outerHeight()},i?{top:0,left:0}:e.offset())},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=e.left-o,h=e.left+o+n;u<a.left?r.left=a.left-u:h>a.width&&(r.left=a.left+a.width-h)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.popover"),o="object"==typeof e&&e;(r||"destroy"!=e)&&(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.2.0",n.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),n=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof n?"html":"append":"text"](n),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},n.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var i=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=n,t.fn.popover.noConflict=function(){return t.fn.popover=i,this}}(t),+function(t){"use strict";function e(n,i){var r=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(n).is("body")?window:n),this.options=t.extend({},e.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",r),this.refresh(),this.process()}function n(n){return this.each(function(){var i=t(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new e(this,o)),"string"==typeof n&&r[n]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",n=0;t.isWindow(this.$scrollElement[0])||(e="position",n=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var i=this;this.$body.find(this.selector).map(function(){var i=t(this),r=i.data("target")||i.attr("href"),o=/^#./.test(r)&&t(r);return o&&o.length&&o.is(":visible")&&[[o[e]().top+n,r]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){i.offsets.push(this[0]),i.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),e>=i)return a!=(t=o[o.length-1])&&this.activate(t);if(a&&e<=r[0])return a!=(t=o[0])&&this.activate(t);for(t=r.length;t--;)a!=o[t]&&e>=r[t]&&(!r[t+1]||e<=r[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var n=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',i=t(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")};var i=t.fn.scrollspy;t.fn.scrollspy=n,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=i,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);n.call(e,e.data())})})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof e&&r[e]()})}var n=function(e){this.element=t(e)};n.VERSION="3.2.0",n.prototype.show=function(){var e=this.element,n=e.closest("ul:not(.dropdown-menu)"),i=e.data("target");if(i||(i=e.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var r=n.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:r});if(e.trigger(o),!o.isDefaultPrevented()){var a=t(i);this.activate(e.closest("li"),n),this.activate(a,a.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:r})})}}},n.prototype.activate=function(e,n,i){function r(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),a?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),i&&i()}var o=n.find("> .active"),a=i&&t.support.transition&&o.hasClass("fade");a?o.one("bsTransitionEnd",r).emulateTransitionEnd(150):r(),o.removeClass("in")};var i=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=n,t.fn.tab.noConflict=function(){return t.fn.tab=i,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(n){n.preventDefault(),e.call(t(this),"show")})}(t),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.affix"),o="object"==typeof e&&e;r||i.data("bs.affix",r=new n(this,o)),"string"==typeof e&&r[e]()})}var n=function(e,i){this.options=t.extend({},n.DEFAULTS,i),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.2.0",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},n.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),i=this.$target.scrollTop(),r=this.$element.offset(),o=this.options.offset,a=o.top,s=o.bottom;"object"!=typeof o&&(s=a=o),"function"==typeof a&&(a=o.top(this.$element)),"function"==typeof s&&(s=o.bottom(this.$element));var l=null!=this.unpin&&i+this.unpin<=r.top?!1:null!=s&&r.top+this.$element.height()>=e-s?"bottom":null!=a&&a>=i?"top":!1;if(this.affixed!==l){null!=this.unpin&&this.$element.css("top","");var u="affix"+(l?"-"+l:""),h=t.Event(u+".bs.affix");this.$element.trigger(h),h.isDefaultPrevented()||(this.affixed=l,this.unpin="bottom"==l?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(u).trigger(t.Event(u.replace("affix","affixed"))),"bottom"==l&&this.$element.offset({top:e-this.$element.height()-s}))}}};var i=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=n,t.fn.affix.noConflict=function(){return t.fn.affix=i,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var n=t(this),i=n.data();i.offset=i.offset||{},i.offsetBottom&&(i.offset.bottom=i.offsetBottom),i.offsetTop&&(i.offset.top=i.offsetTop),e.call(n,i)})})}(t)}).call(this),"undefined"==typeof Package&&(Package={}),Package["bootstrap-3"]={}}(),function(){{var t;Package.meteor.Meteor,Package.underscore._}(function(){(function(t){function e(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function n(t,e){function n(){le.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var i=!0;return l(function(){return i&&(n(),i=!1),e.apply(this,arguments)},e)}function i(t,e){return function(n){return c(t.call(this,n),e)}}function r(t,e){return function(n){return this.lang().ordinal(t.call(this,n),e)}}function o(){}function a(t){M(t),l(this,t)}function s(t){var e=y(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,u=e.second||0,h=e.millisecond||0;this._milliseconds=+h+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,this._data={},this._bubble()}function l(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function u(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&xe.hasOwnProperty(e)&&(n[e]=t[e]);return n}function h(t){return 0>t?Math.ceil(t):Math.floor(t)}function c(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function d(t,e,n,i){var r=e._milliseconds,o=e._days,a=e._months;i=null==i?!0:i,r&&t._d.setTime(+t._d+r*n),o&&ie(t,"Date",ne(t,"Date")+o*n),a&&ee(t,ne(t,"Month")+a*n),i&&le.updateOffset(t,o||a)}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function f(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function m(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&v(t[i])!==v(e[i]))&&a++;return a+o}function g(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=Je[t]||Qe[e]||e}return t}function y(t){var e,n,i={};for(n in t)t.hasOwnProperty(n)&&(e=g(n),e&&(i[e]=t[n]));return i}function _(e){var n,i;
if(0===e.indexOf("week"))n=7,i="day";else{if(0!==e.indexOf("month"))return;n=12,i="month"}le[e]=function(r,o){var a,s,l=le.fn._lang[e],u=[];if("number"==typeof r&&(o=r,r=t),s=function(t){var e=le().utc().set(i,t);return l.call(le.fn._lang,e,r||"")},null!=o)return s(o);for(a=0;n>a;a++)u.push(s(a));return u}}function v(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function b(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function w(t,e,n){return Q(le([t,11,31+e-n]),e,n).week}function x(t){return T(t)?366:365}function T(t){return t%4===0&&t%100!==0||t%400===0}function M(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[me]<0||t._a[me]>11?me:t._a[ge]<1||t._a[ge]>b(t._a[fe],t._a[me])?ge:t._a[ye]<0||t._a[ye]>23?ye:t._a[_e]<0||t._a[_e]>59?_e:t._a[ve]<0||t._a[ve]>59?ve:t._a[be]<0||t._a[be]>999?be:-1,t._pf._overflowDayOfYear&&(fe>e||e>ge)&&(e=ge),t._pf.overflow=e)}function k(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function S(t){return t?t.toLowerCase().replace("_","-"):t}function C(t,e){return e._isUTC?le(t).zone(e._offset||0):le(t).local()}function L(t,e){return e.abbr=t,we[t]||(we[t]=new o),we[t].set(e),we[t]}function P(t){delete we[t]}function D(t){var e,n,i,r,o=0,a=function(t){if(!we[t]&&Te)try{require("./lang/"+t)}catch(e){}return we[t]};if(!t)return le.fn._lang;if(!p(t)){if(n=a(t))return n;t=[t]}for(;o<t.length;){for(r=S(t[o]).split("-"),e=r.length,i=S(t[o+1]),i=i?i.split("-"):null;e>0;){if(n=a(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&m(r,i,!0)>=e-1)break;e--}o++}return le.fn._lang}function A(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function E(t){var e,n,i=t.match(Ce);for(e=0,n=i.length;n>e;e++)i[e]=nn[i[e]]?nn[i[e]]:A(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}function O(t,e){return t.isValid()?(e=I(e,t.lang()),Ze[e]||(Ze[e]=E(e)),Ze[e](t)):t.lang().invalidDate()}function I(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Le.lastIndex=0;i>=0&&Le.test(t);)t=t.replace(Le,n),Le.lastIndex=0,i-=1;return t}function R(t,e){var n,i=e._strict;switch(t){case"Q":return je;case"DDDD":return Ue;case"YYYY":case"GGGG":case"gggg":return i?He:Ae;case"Y":case"G":case"g":return We;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return i?Ge:Ee;case"S":if(i)return je;case"SS":if(i)return Be;case"SSS":if(i)return Ue;case"DDD":return De;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ie;case"a":case"A":return D(e._l)._meridiemParse;case"X":return Ye;case"Z":case"ZZ":return Re;case"T":return Ne;case"SSSS":return Oe;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return i?Be:Pe;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pe;case"Do":return Fe;default:return n=new RegExp(G(H(t.replace("\\","")),"i"))}}function N(t){t=t||"";var e=t.match(Re)||[],n=e[e.length-1]||[],i=(n+"").match(qe)||["-",0,0],r=+(60*i[1])+v(i[2]);return"+"===i[0]?-r:r}function Y(t,e,n){var i,r=n._a;switch(t){case"Q":null!=e&&(r[me]=3*(v(e)-1));break;case"M":case"MM":null!=e&&(r[me]=v(e)-1);break;case"MMM":case"MMMM":i=D(n._l).monthsParse(e),null!=i?r[me]=i:n._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(r[ge]=v(e));break;case"Do":null!=e&&(r[ge]=v(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(n._dayOfYear=v(e));break;case"YY":r[fe]=le.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":r[fe]=v(e);break;case"a":case"A":n._isPm=D(n._l).isPM(e);break;case"H":case"HH":case"h":case"hh":r[ye]=v(e);break;case"m":case"mm":r[_e]=v(e);break;case"s":case"ss":r[ve]=v(e);break;case"S":case"SS":case"SSS":case"SSSS":r[be]=v(1e3*("0."+e));break;case"X":n._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=N(e);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":t=t.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(n._w=n._w||{},n._w[t]=e)}}function F(t){var e,n,i,r,o,a,s,l,u,h,c=[];if(!t._d){for(i=B(t),t._w&&null==t._a[ge]&&null==t._a[me]&&(o=function(e){var n=parseInt(e,10);return e?e.length<3?n>68?1900+n:2e3+n:n:null==t._a[fe]?le().weekYear():t._a[fe]},a=t._w,null!=a.GG||null!=a.W||null!=a.E?s=Z(o(a.GG),a.W||1,a.E,4,1):(l=D(t._l),u=null!=a.d?q(a.d,l):null!=a.e?parseInt(a.e,10)+l._week.dow:0,h=parseInt(a.w,10)||1,null!=a.d&&u<l._week.dow&&h++,s=Z(o(a.gg),h,u,l._week.doy,l._week.dow)),t._a[fe]=s.year,t._dayOfYear=s.dayOfYear),t._dayOfYear&&(r=null==t._a[fe]?i[fe]:t._a[fe],t._dayOfYear>x(r)&&(t._pf._overflowDayOfYear=!0),n=X(r,0,t._dayOfYear),t._a[me]=n.getUTCMonth(),t._a[ge]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=c[e]=i[e];for(;7>e;e++)t._a[e]=c[e]=null==t._a[e]?2===e?1:0:t._a[e];c[ye]+=v((t._tzm||0)/60),c[_e]+=v((t._tzm||0)%60),t._d=(t._useUTC?X:$).apply(null,c)}}function j(t){var e;t._d||(e=y(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],F(t))}function B(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function U(t){t._a=[],t._pf.empty=!0;var e,n,i,r,o,a=D(t._l),s=""+t._i,l=s.length,u=0;for(i=I(t._f,a).match(Ce)||[],e=0;e<i.length;e++)r=i[e],n=(s.match(R(r,t))||[])[0],n&&(o=s.substr(0,s.indexOf(n)),o.length>0&&t._pf.unusedInput.push(o),s=s.slice(s.indexOf(n)+n.length),u+=n.length),nn[r]?(n?t._pf.empty=!1:t._pf.unusedTokens.push(r),Y(r,n,t)):t._strict&&!n&&t._pf.unusedTokens.push(r);t._pf.charsLeftOver=l-u,s.length>0&&t._pf.unusedInput.push(s),t._isPm&&t._a[ye]<12&&(t._a[ye]+=12),t._isPm===!1&&12===t._a[ye]&&(t._a[ye]=0),F(t),M(t)}function H(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r})}function G(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function W(t){var n,i,r,o,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)a=0,n=l({},t),n._pf=e(),n._f=t._f[o],U(n),k(n)&&(a+=n._pf.charsLeftOver,a+=10*n._pf.unusedTokens.length,n._pf.score=a,(null==r||r>a)&&(r=a,i=n));l(t,i||n)}function z(t){var e,n,i=t._i,r=ze.exec(i);if(r){for(t._pf.iso=!0,e=0,n=$e.length;n>e;e++)if($e[e][1].exec(i)){t._f=$e[e][0]+(r[6]||" ");break}for(e=0,n=Xe.length;n>e;e++)if(Xe[e][1].exec(i)){t._f+=Xe[e][0];break}i.match(Re)&&(t._f+="Z"),U(t)}else le.createFromInputFallback(t)}function V(e){var n=e._i,i=Me.exec(n);n===t?e._d=new Date:i?e._d=new Date(+i[1]):"string"==typeof n?z(e):p(n)?(e._a=n.slice(0),F(e)):f(n)?e._d=new Date(+n):"object"==typeof n?j(e):"number"==typeof n?e._d=new Date(n):le.createFromInputFallback(e)}function $(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return 1970>t&&s.setFullYear(t),s}function X(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function q(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function K(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function J(t,e,n){var i=pe(Math.abs(t)/1e3),r=pe(i/60),o=pe(r/60),a=pe(o/24),s=pe(a/365),l=45>i&&["s",i]||1===r&&["m"]||45>r&&["mm",r]||1===o&&["h"]||22>o&&["hh",o]||1===a&&["d"]||25>=a&&["dd",a]||45>=a&&["M"]||345>a&&["MM",pe(a/30)]||1===s&&["y"]||["yy",s];return l[2]=e,l[3]=t>0,l[4]=n,K.apply({},l)}function Q(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=le(t).add("d",o),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function Z(t,e,n,i,r){var o,a,s=X(t,0,1).getUTCDay();return n=null!=n?n:r,o=r-s+(s>i?7:0)-(r>s?7:0),a=7*(e-1)+(n-r)+o+1,{year:a>0?t:t-1,dayOfYear:a>0?a:x(t-1)+a}}function te(e){var n=e._i,i=e._f;return null===n||i===t&&""===n?le.invalid({nullInput:!0}):("string"==typeof n&&(e._i=n=D().preparse(n)),le.isMoment(n)?(e=u(n),e._d=new Date(+n._d)):i?p(i)?W(e):U(e):V(e),new a(e))}function ee(t,e){var n;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),b(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function ne(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ie(t,e,n){return"Month"===e?ee(t,n):t._d["set"+(t._isUTC?"UTC":"")+e](n)}function re(t,e){return function(n){return null!=n?(ie(this,t,n),le.updateOffset(this,e),this):ne(this,t)}}function oe(t){le.duration.fn[t]=function(){return this._data[t]}}function ae(t,e){le.duration.fn["as"+t]=function(){return+this/e}}function se(t){"undefined"==typeof ender&&(ue=de.moment,de.moment=t?n("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",le):le)}for(var le,ue,he,ce="2.6.0",de="undefined"!=typeof global?global:this,pe=Math.round,fe=0,me=1,ge=2,ye=3,_e=4,ve=5,be=6,we={},xe={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Te="undefined"!=typeof module&&module.exports,Me=/^\/?Date\((\-?\d+)/i,ke=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Se=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ce=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Le=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pe=/\d\d?/,De=/\d{1,3}/,Ae=/\d{1,4}/,Ee=/[+\-]?\d{1,6}/,Oe=/\d+/,Ie=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Re=/Z|[\+\-]\d\d:?\d\d/gi,Ne=/T/i,Ye=/[\+\-]?\d+(\.\d{1,3})?/,Fe=/\d{1,2}/,je=/\d/,Be=/\d\d/,Ue=/\d{3}/,He=/\d{4}/,Ge=/[+-]?\d{6}/,We=/[+-]?\d+/,ze=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ve="YYYY-MM-DDTHH:mm:ssZ",$e=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Xe=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],qe=/([\+\-]|\d\d)/gi,Ke=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Je={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Qe={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},Ze={},tn="DDD w W M D d".split(" "),en="M D H h m s w W".split(" "),nn={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return c(this.year()%100,2)},YYYY:function(){return c(this.year(),4)},YYYYY:function(){return c(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+c(Math.abs(t),6)},gg:function(){return c(this.weekYear()%100,2)},gggg:function(){return c(this.weekYear(),4)},ggggg:function(){return c(this.weekYear(),5)},GG:function(){return c(this.isoWeekYear()%100,2)},GGGG:function(){return c(this.isoWeekYear(),4)},GGGGG:function(){return c(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return v(this.milliseconds()/100)},SS:function(){return c(v(this.milliseconds()/10),2)},SSS:function(){return c(this.milliseconds(),3)},SSSS:function(){return c(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(v(t/60),2)+":"+c(v(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+c(v(t/60),2)+c(v(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},rn=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];tn.length;)he=tn.pop(),nn[he+"o"]=r(nn[he],he);for(;en.length;)he=en.pop(),nn[he+he]=i(nn[he],2);for(nn.DDDD=i(nn.DDD,3),l(o.prototype,{set:function(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,n,i;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(n=le.utc([2e3,e]),i="^"+this.months(n,"")+"|^"+this.monthsShort(n,""),this._monthsParse[e]=new RegExp(i.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=le([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendar[t];return"function"==typeof n?n.apply(e):n},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)},pastFuture:function(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return Q(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),le=function(n,i,r,o){var a;return"boolean"==typeof r&&(o=r,r=t),a={},a._isAMomentObject=!0,a._i=n,a._f=i,a._l=r,a._strict=o,a._isUTC=!1,a._pf=e(),te(a)},le.suppressDeprecationWarnings=!1,le.createFromInputFallback=n("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),le.utc=function(n,i,r,o){var a;return"boolean"==typeof r&&(o=r,r=t),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=r,a._i=n,a._f=i,a._strict=o,a._pf=e(),te(a).utc()},le.unix=function(t){return le(1e3*t)},le.duration=function(t,e){var n,i,r,o=t,a=null;return le.isDuration(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(a=ke.exec(t))?(n="-"===a[1]?-1:1,o={y:0,d:v(a[ge])*n,h:v(a[ye])*n,m:v(a[_e])*n,s:v(a[ve])*n,ms:v(a[be])*n}):(a=Se.exec(t))&&(n="-"===a[1]?-1:1,r=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*n},o={y:r(a[2]),M:r(a[3]),d:r(a[4]),h:r(a[5]),m:r(a[6]),s:r(a[7]),w:r(a[8])}),i=new s(o),le.isDuration(t)&&t.hasOwnProperty("_lang")&&(i._lang=t._lang),i},le.version=ce,le.defaultFormat=Ve,le.momentProperties=xe,le.updateOffset=function(){},le.lang=function(t,e){var n;return t?(e?L(S(t),e):null===e?(P(t),t="en"):we[t]||D(t),n=le.duration.fn._lang=le.fn._lang=D(t),n._abbr):le.fn._lang._abbr},le.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),D(t)},le.isMoment=function(t){return t instanceof a||null!=t&&t.hasOwnProperty("_isAMomentObject")},le.isDuration=function(t){return t instanceof s},he=rn.length-1;he>=0;--he)_(rn[he]);le.normalizeUnits=function(t){return g(t)},le.invalid=function(t){var e=le.utc(0/0);return null!=t?l(e._pf,t):e._pf.userInvalidated=!0,e},le.parseZone=function(){return le.apply(null,arguments).parseZone()},le.parseTwoDigitYear=function(t){return v(t)+(v(t)>68?1900:2e3)},l(le.fn=a.prototype,{clone:function(){return le(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=le(this).utc();return 0<t.year()&&t.year()<=9999?O(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):O(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return k(this)},isDSTShifted:function(){return this._a?this.isValid()&&m(this._a,(this._isUTC?le.utc(this._a):le(this._a)).toArray())>0:!1},parsingFlags:function(){return l({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=O(this,t||le.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var n;return n="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,n,1),this},subtract:function(t,e){var n;return n="string"==typeof t?le.duration(+e,t):le.duration(t,e),d(this,n,-1),this},diff:function(t,e,n){var i,r,o=C(t,this),a=6e4*(this.zone()-o.zone());return e=g(e),"year"===e||"month"===e?(i=432e5*(this.daysInMonth()+o.daysInMonth()),r=12*(this.year()-o.year())+(this.month()-o.month()),r+=(this-le(this).startOf("month")-(o-le(o).startOf("month")))/i,r-=6e4*(this.zone()-le(this).startOf("month").zone()-(o.zone()-le(o).startOf("month").zone()))/i,"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:h(r)},from:function(t,e){return le.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(le(),t)},calendar:function(){var t=C(le(),this).startOf("day"),e=this.diff(t,"days",!0),n=-6>e?"sameElse":-1>e?"lastWeek":0>e?"lastDay":1>e?"sameDay":2>e?"nextDay":7>e?"nextWeek":"sameElse";return this.format(this.lang().calendar(n,this))},isLeapYear:function(){return T(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=q(t,this.lang()),this.add({d:t-e})):e},month:re("Month",!0),startOf:function(t){switch(t=g(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=g(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+le(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+le(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+C(t,this).startOf(e)},min:function(t){return t=le.apply(null,arguments),this>t?this:t},max:function(t){return t=le.apply(null,arguments),t>this?this:t},zone:function(t,e){var n=this._offset||0;return null==t?this._isUTC?n:this._d.getTimezoneOffset():("string"==typeof t&&(t=N(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,n!==t&&(!e||this._changeInProgress?d(this,le.duration(n-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,le.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?le(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return b(this.year(),this.month())},dayOfYear:function(t){var e=pe((le(this).startOf("day")-le(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=Q(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=Q(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=Q(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return w(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return w(this.year(),t.dow,t.doy)},get:function(t){return t=g(t),this[t]()},set:function(t,e){return t=g(t),"function"==typeof this[t]&&this[t](e),this},lang:function(e){return e===t?this._lang:(this._lang=D(e),this)}}),le.fn.millisecond=le.fn.milliseconds=re("Milliseconds",!1),le.fn.second=le.fn.seconds=re("Seconds",!1),le.fn.minute=le.fn.minutes=re("Minutes",!1),le.fn.hour=le.fn.hours=re("Hours",!0),le.fn.date=re("Date",!0),le.fn.dates=n("dates accessor is deprecated. Use date instead.",re("Date",!0)),le.fn.year=re("FullYear",!0),le.fn.years=n("years accessor is deprecated. Use year instead.",re("FullYear",!0)),le.fn.days=le.fn.day,le.fn.months=le.fn.month,le.fn.weeks=le.fn.week,le.fn.isoWeeks=le.fn.isoWeek,le.fn.quarters=le.fn.quarter,le.fn.toJSON=le.fn.toISOString,l(le.duration.fn=s.prototype,{_bubble:function(){var t,e,n,i,r=this._milliseconds,o=this._days,a=this._months,s=this._data;s.milliseconds=r%1e3,t=h(r/1e3),s.seconds=t%60,e=h(t/60),s.minutes=e%60,n=h(e/60),s.hours=n%24,o+=h(n/24),s.days=o%30,a+=h(o/30),s.months=a%12,i=h(a/12),s.years=i},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*v(this._months/12)},humanize:function(t){var e=+this,n=J(e,!t,this.lang());return t&&(n=this.lang().pastFuture(e,n)),this.lang().postformat(n)},add:function(t,e){var n=le.duration(t,e);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(t,e){var n=le.duration(t,e);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(t){return t=g(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=g(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:le.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),n=Math.abs(this.days()),i=Math.abs(this.hours()),r=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"}});for(he in Ke)Ke.hasOwnProperty(he)&&(ae(he,Ke[he]),oe(he.toLowerCase()));ae("Weeks",6048e5),le.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},le.lang("en",{ordinal:function(t){var e=t%10,n=1===v(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),function(t){t(le)}(function(t){return t.lang("ar-ma",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("ar",{months:"/  _/ _/ _/ _/ _/ _/ _/ _/ _/  _/  _/  ".split("_"),monthsShort:"/  _/ _/ _/ _/ _/ _/ _/ _/ _/  _/  _/  ".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[  ] LT",nextDay:"[  ] LT",nextWeek:"dddd [ ] LT",lastDay:"[  ] LT",lastWeek:"dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("bg",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&20>n?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(e){function n(t,e,n){var i={mm:"munutenn",MM:"miz",dd:"devezh"};return t+" "+o(i[n],t)}function i(t){switch(r(t)){case 1:case 3:case 4:case 5:case 9:return t+" bloaz";default:return t+" vloaz"}}function r(t){return t>9?r(t%10):t}function o(t,e){return 2===e?a(t):t}function a(e){var n={m:"v",b:"v",d:"z"};return n[e.charAt(0)]===t?e:n[e.charAt(0)]+e.substring(1)}return e.lang("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondenno",m:"ur vunutenn",mm:n,h:"un eur",hh:"%d eur",d:"un devezh",dd:n,M:"ur miz",MM:n,y:"ur bloaz",yy:i},ordinal:function(t){var e=1===t?"a":"vet";return t+e},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("bs",{months:"januar_februar_mart_april_maj_juni_juli_avgust_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("ca",{months:"gener_febrer_mar_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[dem a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"
},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinal:"%d",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t){return t>1&&5>t&&1!==~~(t/10)}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"pr sekund":"pr sekundami";case"m":return n?"minuta":r?"minutu":"minutou";case"mm":return n||r?o+(e(t)?"minuty":"minut"):o+"minutami";case"h":return n?"hodina":r?"hodinu":"hodinou";case"hh":return n||r?o+(e(t)?"hodiny":"hodin"):o+"hodinami";case"d":return n||r?"den":"dnem";case"dd":return n||r?o+(e(t)?"dny":"dn"):o+"dny";case"M":return n||r?"msc":"mscem";case"MM":return n||r?o+(e(t)?"msce":"msc"):o+"msci";case"y":return n||r?"rok":"rokem";case"yy":return n||r?o+(e(t)?"roky":"let"):o+"lety"}}var i="leden_nor_bezen_duben_kvten_erven_ervenec_srpen_z_jen_listopad_prosinec".split("_"),r="led_no_be_dub_kv_vn_vc_srp_z_j_lis_pro".split("_");return t.lang("cs",{months:i,monthsShort:r,monthsParse:function(t,e){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+t[n]+"$|^"+e[n]+"$","i");return i}(i,r),weekdays:"nedle_pondl_ter_steda_tvrtek_ptek_sobota".split("_"),weekdaysShort:"ne_po_t_st_t_p_so".split("_"),weekdaysMin:"ne_po_t_st_t_p_so".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[ztra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve stedu v] LT";case 4:return"[ve tvrtek v] LT";case 5:return"[v ptek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[vera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou nedli v] LT";case 1:case 2:return"[minul] dddd [v] LT";case 3:return"[minulou stedu v] LT";case 4:case 5:return"[minul] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"ped %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("cv",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"YYYY [] MMMM [] D[-]",LLL:"YYYY [] MMMM [] D[-], LT",LLLL:"dddd, YYYY [] MMMM [] D[-], LT"},calendar:{sameDay:"[] LT []",nextDay:"[] LT []",lastDay:"[] LT []",nextWeek:"[] dddd LT []",lastWeek:"[] dddd LT []",sameElse:"L"},relativeTime:{future:function(t){var e=/$/i.exec(t)?"":/$/i.exec(t)?"":"";return t+e},past:"%s ",s:"- ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:"%d-",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn l",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinal:function(t){var e=t,n="",i=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return e>20?n=40===e||50===e||60===e||80===e||100===e?"fed":"ain":e>0&&(n=i[e]),t+n},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_man_tir_ons_tor_fre_lr".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I gr kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"f sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en mned",MM:"%d mneder",y:"et r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[t+" Tage",t+" Tagen"],M:["ein Monat","einem Monat"],MM:[t+" Monate",t+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[t+" Jahre",t+" Jahren"]};return e?i[n][0]:i[n][1]}return t.lang("de",{months:"Januar_Februar_Mrz_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm [Uhr]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT",sameElse:"L",nextDay:"[Morgen um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gestern um] LT",lastWeek:"[letzten] dddd [um] LT"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:e,mm:"%d Minuten",h:e,hh:"%d Stunden",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("el",{monthsNominativeEl:"___________".split("_"),monthsGenitiveEl:"___________".split("_"),months:function(t,e){return/D/.test(e.substring(0,e.indexOf("MMMM")))?this._monthsGenitiveEl[t.month()]:this._monthsNominativeEl[t.month()]},monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),meridiem:function(t,e,n){return t>11?n?"":"":n?"":""},longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[ {}] LT",nextDay:"[ {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[ {}] LT",lastWeek:"[ ] dddd [{}] LT",sameElse:"L"},calendar:function(t,e){var n=this._calendarEl[t],i=e&&e.hours();return n.replace("{}",i%12===1?"":"")},relativeTime:{future:" %s",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(t){return t+""},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}})}),function(t){t(le)}(function(t){return t.lang("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_agusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_ag_sep_okt_nov_dec".split("_"),weekdays:"Dimano_Lundo_Mardo_Merkredo_ado_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_a_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_a_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiem:function(t,e,n){return t>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodia je] LT",nextDay:"[Morga je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hiera je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"anta %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinal:"%da",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");return t.lang("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},weekdays:"domingo_lunes_martes_mircoles_jueves_viernes_sbado".split("_"),weekdaysShort:"dom._lun._mar._mi._jue._vie._sb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [del] YYYY",LLL:"D [de] MMMM [del] YYYY LT",LLLL:"dddd, D [de] MMMM [del] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[maana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ao",yy:"%d aos"},ordinal:"%d",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n,i){var r={s:["mne sekundi","mni sekund","paar sekundit"],m:["he minuti","ks minut"],mm:[t+" minuti",t+" minutit"],h:["he tunni","tund aega","ks tund"],hh:[t+" tunni",t+" tundi"],d:["he peva","ks pev"],M:["kuu aja","kuu aega","ks kuu"],MM:[t+" kuu",t+" kuud"],y:["he aasta","aasta","ks aasta"],yy:[t+" aasta",t+" aastat"]};return e?r[n][2]?r[n][2]:r[n][1]:i?r[n][0]:r[n][1]}return t.lang("et",{months:"jaanuar_veebruar_mrts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_mrts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"phapev_esmaspev_teisipev_kolmapev_neljapev_reede_laupev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Tna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Jrgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s prast",past:"%s tagasi",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:"%d peva",M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return t.lang("fa",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiem:function(t){return 12>t?"  ":"  "},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[-]/g,function(t){return n[t]}).replace(//g,",")},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]}).replace(/,/g,"")},ordinal:"%d",week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){function e(t,e,i,r){var o="";switch(i){case"s":return r?"muutaman sekunnin":"muutama sekunti";case"m":return r?"minuutin":"minuutti";case"mm":o=r?"minuutin":"minuuttia";break;case"h":return r?"tunnin":"tunti";case"hh":o=r?"tunnin":"tuntia";break;case"d":return r?"pivn":"piv";case"dd":o=r?"pivn":"piv";break;case"M":return r?"kuukauden":"kuukausi";case"MM":o=r?"kuukauden":"kuukautta";break;case"y":return r?"vuoden":"vuosi";case"yy":o=r?"vuoden":"vuotta"}return o=n(t,r)+" "+o}function n(t,e){return 10>t?e?r[t]:i[t]:t}var i="nolla yksi kaksi kolme nelj viisi kuusi seitsemn kahdeksan yhdeksn".split(" "),r=["nolla","yhden","kahden","kolmen","neljn","viiden","kuuden",i[7],i[8],i[9]];return t.lang("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_keskuu_heinkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kes_hein_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tnn] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s pst",past:"%s sitten",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("fo",{months:"januar_februar_mars_aprl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mnadagur_tsdagur_mikudagur_hsdagur_frggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mn_ts_mik_hs_fr_ley".split("_"),weekdaysMin:"su_m_t_mi_h_fr_le".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gjr kl.] LT",lastWeek:"[sstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s sani",s:"f sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tmi",hh:"%d tmar",d:"ein dagur",dd:"%d dagar",M:"ein mnai",MM:"%d mnair",y:"eitt r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("fr-ca",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")}})}),function(t){t(le)}(function(t){return t.lang("fr",{months:"janvier_fvrier_mars_avril_mai_juin_juillet_aot_septembre_octobre_novembre_dcembre".split("_"),monthsShort:"janv._fvr._mars_avr._mai_juin_juil._aot_sept._oct._nov._dc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui ] LT",nextDay:"[Demain ] LT",nextWeek:"dddd [] LT",lastDay:"[Hier ] LT",lastWeek:"dddd [dernier ] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinal:function(t){return t+(1===t?"er":"")},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuo_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xu._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mrcores_Xoves_Venres_Sbado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mr._Xov._Ven._Sb.".split("_"),weekdaysMin:"Do_Lu_Ma_M_Xo_Ve_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[ma "+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"s":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"s":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(t){return"uns segundos"===t?"nuns segundos":"en "+t},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un da",dd:"%d das",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinal:"%d",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("he",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D []MMMM YYYY",LLL:"D []MMMM YYYY LT",LLLL:"dddd, D []MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[ ]LT",nextDay:"[ ]LT",nextWeek:"dddd [] LT",lastDay:"[ ]LT",lastWeek:"[] dddd [ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:function(t){return 2===t?"":t+" "},d:"",dd:function(t){return 2===t?"":t+" "},M:"",MM:function(t){return 2===t?"":t+" "},y:"",yy:function(t){return 2===t?"":t+" "}}})}),function(t){t(le)}(function(t){var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return t.lang("hi",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 4>t?"":10>t?"":17>t?"":20>t?"":""},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"jedna minuta":"jedne minute";case"mm":return i+=1===t?"minuta":2===t||3===t||4===t?"minute":"minuta";case"h":return e?"jedan sat":"jednog sata";case"hh":return i+=1===t?"sat":2===t||3===t||4===t?"sata":"sati";case"dd":return i+=1===t?"dan":"dana";case"MM":return i+=1===t?"mjesec":2===t||3===t||4===t?"mjeseca":"mjeseci";case"yy":return i+=1===t?"godina":2===t||3===t||4===t?"godine":"godina"}}return t.lang("hr",{months:"sjeanj_veljaa_oujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ou._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_etvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._et._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_e_pe_su".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prolu] dddd [u] LT";case 6:return"[prole] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[proli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:e,mm:e,h:e,hh:e,d:"dan",dd:e,M:"mjesec",MM:e,y:"godinu",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e,n,i){var r=t;switch(n){case"s":return i||e?"nhny msodperc":"nhny msodperce";case"m":return"egy"+(i||e?" perc":" perce");case"mm":return r+(i||e?" perc":" perce");case"h":return"egy"+(i||e?" ra":" rja");case"hh":return r+(i||e?" ra":" rja");case"d":return"egy"+(i||e?" nap":" napja");case"dd":return r+(i||e?" nap":" napja");case"M":return"egy"+(i||e?" hnap":" hnapja");case"MM":return r+(i||e?" hnap":" hnapja");case"y":return"egy"+(i||e?" v":" ve");case"yy":return r+(i||e?" v":" ve")}return""}function n(t){return(t?"":"[mlt] ")+"["+i[this.day()]+"] LT[-kor]"}var i="vasrnap htfn kedden szerdn cstrtkn pnteken szombaton".split(" ");return t.lang("hu",{months:"janur_februr_mrcius_prilis_mjus_jnius_jlius_augusztus_szeptember_oktber_november_december".split("_"),monthsShort:"jan_feb_mrc_pr_mj_jn_jl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasrnap_htf_kedd_szerda_cstrtk_pntek_szombat".split("_"),weekdaysShort:"vas_ht_kedd_sze_cst_pn_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiem:function(t,e,n){return 12>t?n===!0?"de":"DE":n===!0?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s mlva",past:"%s",s:e,m:e,mm:e,h:e,hh:e,d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function n(t){var e="___________".split("_");return e[t.month()]}function i(t){var e="______".split("_");return e[t.day()]}return t.lang("hy-am",{months:e,monthsShort:n,weekdays:i,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",lastDay:"[] LT",nextWeek:function(){return"dddd [ ] LT"},lastWeek:function(){return"[] dddd [ ] LT"},sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},meridiem:function(t){return 4>t?"":12>t?"":17>t?"":""},ordinal:function(t,e){switch(e){case"DDD":case"w":case"W":case"DDDo":return 1===t?t+"-":t+"-";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"siang":19>t?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t){return t%100===11?!0:t%10===1?!1:!0}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"nokkrar sekndur":"nokkrum sekndum";case"m":return n?"mnta":"mntu";case"mm":return e(t)?o+(n||r?"mntur":"mntum"):n?o+"mnta":o+"mntu";case"hh":return e(t)?o+(n||r?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":r?"dag":"degi";case"dd":return e(t)?n?o+"dagar":o+(r?"daga":"dgum"):n?o+"dagur":o+(r?"dag":"degi");case"M":return n?"mnuur":r?"mnu":"mnui";case"MM":return e(t)?n?o+"mnuir":o+(r?"mnui":"mnuum"):n?o+"mnuur":o+(r?"mnu":"mnui");case"y":return n||r?"r":"ri";case"yy":return e(t)?o+(n||r?"r":"rum"):o+(n||r?"r":"ri")}}return t.lang("is",{months:"janar_febrar_mars_aprl_ma_jn_jl_gst_september_oktber_nvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_ma_jn_jl_g_sep_okt_nv_des".split("_"),weekdays:"sunnudagur_mnudagur_rijudagur_mivikudagur_fimmtudagur_fstudagur_laugardagur".split("_"),weekdaysShort:"sun_mn_ri_mi_fim_fs_lau".split("_"),weekdaysMin:"Su_M_r_Mi_Fi_F_La".split("_"),longDateFormat:{LT:"H:mm",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[ dag kl.] LT",nextDay:"[ morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[ gr kl.] LT",lastWeek:"[sasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s san",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})
}),function(t){t(le)}(function(t){return t.lang("it",{months:"Gennaio_Febbraio_Marzo_Aprile_Maggio_Giugno_Luglio_Agosto_Settembre_Ottobre_Novembre_Dicembre".split("_"),monthsShort:"Gen_Feb_Mar_Apr_Mag_Giu_Lug_Ago_Set_Ott_Nov_Dic".split("_"),weekdays:"Domenica_Luned_Marted_Mercoled_Gioved_Venerd_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:"[lo scorso] dddd [alle] LT",sameElse:"L"},relativeTime:{future:function(t){return(/^[0-9].+$/.test(t)?"tra":"in")+" "+t},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinal:"%d",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ja",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahm",L:"YYYY/MM/DD",LL:"YYYYMD",LLL:"YYYYMDLT",LLLL:"YYYYMDLT dddd"},meridiem:function(t){return 12>t?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[]dddd LT",lastDay:"[] LT",lastWeek:"[]dddd LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"}})}),function(t){t(le)}(function(t){function e(t,e){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD] *MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function n(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_")},i=/(|)/.test(e)?"accusative":"nominative";return n[i][t.day()]}return t.lang("ka",{months:e,monthsShort:"___________".split("_"),weekdays:n,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"h:mm A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[] LT[-]",nextDay:"[] LT[-]",lastDay:"[] LT[-]",nextWeek:"[] dddd LT[-]",lastWeek:"[] dddd LT-",sameElse:"L"},relativeTime:{future:function(t){return/(|||)/.test(t)?t.replace(/$/,""):t+""},past:function(t){return/(||||)/.test(t)?t.replace(/(|)$/," ")://.test(t)?t.replace(/$/," "):void 0},s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(t){return 0===t?t:1===t?t+"-":20>t||100>=t&&t%20===0||t%100===0?"-"+t:t+"-"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("km",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] [] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ko",{months:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h mm",L:"YYYY.MM.DD",LL:"YYYY MMMM D",LLL:"YYYY MMMM D LT",LLLL:"YYYY MMMM D dddd LT"},meridiem:function(t){return 12>t?"":""},calendar:{sameDay:" LT",nextDay:" LT",nextWeek:"dddd LT",lastDay:" LT",lastWeek:" dddd LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",ss:"%d",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"},ordinal:"%d",meridiemParse:/(|)/,isPM:function(t){return""===t}})}),function(t){t(le)}(function(t){function e(t,e,n){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],dd:[t+" Deeg",t+" Deeg"],M:["ee Mount","engem Mount"],MM:[t+" Mint",t+" Mint"],y:["ee Joer","engem Joer"],yy:[t+" Joer",t+" Joer"]};return e?i[n][0]:i[n][1]}function n(t){var e=t.substr(0,t.indexOf(" "));return a(e)?"a "+t:"an "+t}function i(t){var e=t.substr(0,t.indexOf(" "));return a(e)?"viru "+t:"virun "+t}function r(){var t=this.format("d");return o(t)?"[Leschte] dddd [um] LT":"[Leschten] dddd [um] LT"}function o(t){switch(t=parseInt(t,10)){case 0:case 1:case 3:case 5:case 6:return!0;default:return!1}}function a(t){if(t=parseInt(t,10),isNaN(t))return!1;if(0>t)return!0;if(10>t)return t>=4&&7>=t?!0:!1;if(100>t){var e=t%10,n=t/10;return a(0===e?n:e)}if(1e4>t){for(;t>=10;)t/=10;return a(t)}return t/=1e3,a(t)}return t.lang("lb",{months:"Januar_Februar_Merz_Abrll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Mindeg_Dnschdeg_Mttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._M._D._M._Do._Fr._Sa.".split("_"),weekdaysMin:"So_M_D_M_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gschter um] LT",lastWeek:r},relativeTime:{future:n,past:i,s:"e puer Sekonnen",m:e,mm:"%d Minutten",h:e,hh:"%d Stonnen",d:e,dd:e,M:e,MM:e,y:e,yy:e},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n,i){return e?"kelios sekunds":i?"keli sekundi":"kelias sekundes"}function n(t,e,n,i){return e?r(n)[0]:i?r(n)[1]:r(n)[2]}function i(t){return t%10===0||t>10&&20>t}function r(t){return s[t].split("_")}function o(t,e,o,a){var s=t+" ";return 1===t?s+n(t,e,o[0],a):e?s+(i(t)?r(o)[1]:r(o)[0]):a?s+r(o)[1]:s+(i(t)?r(o)[1]:r(o)[2])}function a(t,e){var n=-1===e.indexOf("dddd HH:mm"),i=l[t.weekday()];return n?i:i.substring(0,i.length-2)+""}var s={m:"minut_minuts_minut",mm:"minuts_minui_minutes",h:"valanda_valandos_valand",hh:"valandos_valand_valandas",d:"diena_dienos_dien",dd:"dienos_dien_dienas",M:"mnuo_mnesio_mnes",MM:"mnesiai_mnesi_mnesius",y:"metai_met_metus",yy:"metai_met_metus"},l="pirmadienis_antradienis_treiadienis_ketvirtadienis_penktadienis_etadienis_sekmadienis".split("_");return t.lang("lt",{months:"sausio_vasario_kovo_balandio_gegus_birlio_liepos_rugpjio_rugsjo_spalio_lapkriio_gruodio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:a,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_e".split("_"),weekdaysMin:"S_P_A_T_K_Pn_".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[iandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Prajus] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prie %s",s:e,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},ordinal:function(t){return t+"-oji"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n){var i=t.split("_");return n?e%10===1&&11!==e?i[2]:i[3]:e%10===1&&11!==e?i[0]:i[1]}function n(t,n,r){return t+" "+e(i[r],t,n)}var i={mm:"minti_mintes_minte_mintes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mnesi_mneus_mnesis_mnei",yy:"gadu_gadus_gads_gadi"};return t.lang("lv",{months:"janvris_februris_marts_aprlis_maijs_jnijs_jlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jn_jl_aug_sep_okt_nov_dec".split("_"),weekdays:"svtdiena_pirmdiena_otrdiena_trediena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[odien pulksten] LT",nextDay:"[Rt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagju] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vlk",past:"%s agrk",s:"daas sekundes",m:"minti",mm:n,h:"stundu",hh:n,d:"dienu",dd:n,M:"mnesi",MM:n,y:"gadu",yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("mk",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"e_o_____a".split("_"),longDateFormat:{LT:"H:mm",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[ ] dddd [] LT";case 1:case 2:case 4:case 5:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d ",M:"",MM:"%d ",y:"",yy:"%d "},ordinal:function(t){var e=t%10,n=t%100;return 0===t?t+"-":0===n?t+"-":n>10&&20>n?t+"-":1===e?t+"-":2===e?t+"-":7===e||8===e?t+"-":t+"-"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("ml",{months:"___________".split("_"),monthsShort:"._._._.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm -",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},meridiem:function(t){return 4>t?"":12>t?"":17>t?" ":20>t?"":""}})}),function(t){t(le)}(function(t){var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return t.lang("mr",{months:"___________".split("_"),monthsShort:"._._._._._._._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 4>t?"":10>t?"":17>t?"":20>t?"":""},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){return t.lang("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiem:function(t){return 11>t?"pagi":15>t?"tengahari":19>t?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan._feb._mars_april_mai_juni_juli_aug._sep._okt._nov._des.".split("_"),weekdays:"sndag_mandag_tirsdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"s._ma._ti._on._to._fr._l.".split("_"),weekdaysMin:"s_ma_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"H.mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i gr kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en mned",MM:"%d mneder",y:"ett r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={1:"",2:"",3:"",4:"",5:"",6:"",7:"",8:"",9:"",0:""},n={"":"1","":"2","":"3","":"4","":"5","":"6","":"7","":"8","":"9","":"0"};return t.lang("ne",{months:"___________".split("_"),monthsShort:"._.__.___._._._._._.".split("_"),weekdays:"______".split("_"),weekdaysShort:"._._._._._._.".split("_"),weekdaysMin:"._.__._._._.".split("_"),longDateFormat:{LT:"A h:mm ",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(t){return t.replace(/[]/g,function(t){return n[t]})},postformat:function(t){return t.replace(/\d/g,function(t){return e[t]})},meridiem:function(t){return 3>t?"":10>t?"":15>t?"":18>t?"":20>t?"":""},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"[] dddd[,] LT",lastDay:"[] LT",lastWeek:"[] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%s",past:"%s ",s:" ",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");return t.lang("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(t,i){return/-MMM-/.test(i)?n[t.month()]:e[t.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"n minuut",mm:"%d minuten",h:"n uur",hh:"%d uur",d:"n dag",dd:"%d dagen",M:"n maand",MM:"%d maanden",y:"n jaar",yy:"%d jaar"},ordinal:function(t){return t+(1===t||8===t||t>=20?"ste":"de")},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_mndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mn_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_m_ty_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I gr klokka] LT",lastWeek:"[Fregande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein mnad",MM:"%d mnader",y:"eit r",yy:"%d r"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t){return 5>t%10&&t%10>1&&~~(t/10)%10!==1}function n(t,n,i){var r=t+" ";switch(i){case"m":return n?"minuta":"minut";case"mm":return r+(e(t)?"minuty":"minut");case"h":return n?"godzina":"godzin";case"hh":return r+(e(t)?"godziny":"godzin");case"MM":return r+(e(t)?"miesice":"miesicy");case"yy":return r+(e(t)?"lata":"lat")}}var i="stycze_luty_marzec_kwiecie_maj_czerwiec_lipiec_sierpie_wrzesie_padziernik_listopad_grudzie".split("_"),r="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_wrzenia_padziernika_listopada_grudnia".split("_");return t.lang("pl",{months:function(t,e){return/D MMMM/.test(e)?r[t.month()]:i[t.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_pa_lis_gru".split("_"),weekdays:"niedziela_poniedziaek_wtorek_roda_czwartek_pitek_sobota".split("_"),weekdaysShort:"nie_pon_wt_r_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_r_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dzi o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zesz niedziel o] LT";case 3:return"[W zesz rod o] LT";case 6:return"[W zesz sobot o] LT";default:return"[W zeszy] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzie",dd:"%d dni",M:"miesic",MM:n,y:"rok",yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("pt-br",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [s] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [s] LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%d"})}),function(t){t(le)}(function(t){return t.lang("pt",{months:"janeiro_fevereiro_maro_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_tera-feira_quarta-feira_quinta-feira_sexta-feira_sbado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sb".split("_"),weekdaysMin:"dom_2_3_4_5_6_sb".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje s] LT",nextDay:"[Amanh s] LT",nextWeek:"dddd [s] LT",lastDay:"[Ontem s] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[ltimo] dddd [s] LT":"[ltima] dddd [s] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrs",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um ms",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinal:"%d",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n){var i={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},r=" ";return(t%100>=20||t>=100&&t%100===0)&&(r=" de "),t+r+i[n]}return t.lang("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminic_luni_mari_miercuri_joi_vineri_smbt".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_S".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s n urm",s:"cteva secunde",m:"un minut",mm:e,h:"o or",hh:e,d:"o zi",dd:e,M:"o lun",MM:e,y:"un an",yy:e},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t,e){var n=t.split("_");return e%10===1&&e%100!==11?n[0]:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?n[1]:n[2]}function n(t,n,i){var r={mm:n?"__":"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===i?n?"":"":t+" "+e(r[i],+t)}function i(t,e){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function r(t,e){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function o(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_")},i=/\[ ?[] ?(?:|)? ?\] ?dddd/.test(e)?"accusative":"nominative";return n[i][t.day()]}return t.lang("ru",{months:i,monthsShort:r,weekdays:o,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),monthsParse:[/^/i,/^/i,/^/i,/^/i,/^[|]/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i,/^/i],longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",lastDay:"[ ] LT",nextWeek:function(){return 2===this.day()?"[] dddd [] LT":"[] dddd [] LT"},lastWeek:function(){switch(this.day()){case 0:return"[ ] dddd [] LT";case 1:case 2:case 4:return"[ ] dddd [] LT";case 3:case 5:case 6:return"[ ] dddd [] LT"}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiem:function(t){return 4>t?"":12>t?"":17>t?"":""},ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":return t+"-";case"D":return t+"-";case"w":case"W":return t+"-";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){function e(t){return t>1&&5>t}function n(t,n,i,r){var o=t+" ";switch(i){case"s":return n||r?"pr seknd":"pr sekundami";case"m":return n?"minta":r?"mintu":"mintou";case"mm":return n||r?o+(e(t)?"minty":"mint"):o+"mintami";case"h":return n?"hodina":r?"hodinu":"hodinou";case"hh":return n||r?o+(e(t)?"hodiny":"hodn"):o+"hodinami";case"d":return n||r?"de":"dom";case"dd":return n||r?o+(e(t)?"dni":"dn"):o+"dami";case"M":return n||r?"mesiac":"mesiacom";case"MM":return n||r?o+(e(t)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return n||r?"rok":"rokom";case"yy":return n||r?o+(e(t)?"roky":"rokov"):o+"rokmi"}}var i="janur_februr_marec_aprl_mj_jn_jl_august_september_oktber_november_december".split("_"),r="jan_feb_mar_apr_mj_jn_jl_aug_sep_okt_nov_dec".split("_");return t.lang("sk",{months:i,monthsShort:r,monthsParse:function(t,e){var n,i=[];for(n=0;12>n;n++)i[n]=new RegExp("^"+t[n]+"$|^"+e[n]+"$","i");return i}(i,r),weekdays:"nedea_pondelok_utorok_streda_tvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_t_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_t_pi_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo tvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[vera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minul nedeu o] LT";case 1:case 2:return"[minul] dddd [o] LT";case 3:return"[minul stredu o] LT";case 4:case 5:return"[minul] dddd [o] LT";case 6:return"[minul sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){function e(t,e,n){var i=t+" ";switch(n){case"m":return e?"ena minuta":"eno minuto";case"mm":return i+=1===t?"minuta":2===t?"minuti":3===t||4===t?"minute":"minut";case"h":return e?"ena ura":"eno uro";case"hh":return i+=1===t?"ura":2===t?"uri":3===t||4===t?"ure":"ur";case"dd":return i+=1===t?"dan":"dni";case"MM":return i+=1===t?"mesec":2===t?"meseca":3===t||4===t?"mesece":"mesecev";case"yy":return i+=1===t?"leto":2===t?"leti":3===t||4===t?"leta":"let"}}return t.lang("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_etrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._et._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_e_pe_so".split("_"),longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[veraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"ez %s",past:"%s nazaj",s:"nekaj sekund",m:e,mm:e,h:e,hh:e,d:"en dan",dd:e,M:"en mesec",MM:e,y:"eno leto",yy:e},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nn_Dhj".split("_"),weekdays:"E Diel_E Hn_E Mart_E Mrkur_E Enjte_E Premte_E Shtun".split("_"),weekdaysShort:"Die_Hn_Mar_Mr_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_M_E_P_Sh".split("_"),meridiem:function(t){return 12>t?"PD":"MD"},longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot n] LT",nextDay:"[Nesr n] LT",nextWeek:"dddd [n] LT",lastDay:"[Dje n] LT",lastWeek:"dddd [e kaluar n] LT",sameElse:"L"},relativeTime:{future:"n %s",past:"%s m par",s:"disa sekonda",m:"nj minut",mm:"%d minuta",h:"nj or",hh:"%d or",d:"nj dit",dd:"%d dit",M:"nj muaj",MM:"%d muaj",y:"nj vit",yy:"%d vite"},ordinal:"%d.",week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={words:{m:[" "," "],mm:["","",""],h:[" "," "],hh:["","",""],dd:["","",""],MM:["","",""],yy:["","",""]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&4>=t?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.lang("sr-cyr",{months:["","","","","","","","","","","",""],monthsShort:[".",".",".",".","","","",".",".",".",".","."],weekdays:["","","","","","",""],weekdaysShort:[".",".",".",".",".",".","."],weekdaysMin:["","","","","","",""],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:function(){switch(this.day()){case 0:return"[] [] [] LT";case 3:return"[] [] [] LT";case 6:return"[] [] [] LT";case 1:case 2:case 4:case 5:return"[] dddd [] LT"}},lastDay:"[ ] LT",lastWeek:function(){var t=["[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT","[] [] [] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:" %s",past:" %s",s:" ",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"",dd:e.translate,M:"",MM:e.translate,y:"",yy:e.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){var e={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(t,e){return 1===t?e[0]:t>=2&&4>=t?e[1]:e[2]},translate:function(t,n,i){var r=e.words[i];
return 1===i.length?n?r[0]:r[1]:t+" "+e.correctGrammaticalCase(t,r)}};return t.lang("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","etvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","et.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","e","pe","su"],longDateFormat:{LT:"H:mm",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jue u] LT",lastWeek:function(){var t=["[prole] [nedelje] [u] LT","[prolog] [ponedeljka] [u] LT","[prolog] [utorka] [u] LT","[prole] [srede] [u] LT","[prolog] [etvrtka] [u] LT","[prolog] [petka] [u] LT","[prole] [subote] [u] LT"];return t[this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:e.translate,mm:e.translate,h:e.translate,hh:e.translate,d:"dan",dd:e.translate,M:"mesec",MM:e.translate,y:"godinu",yy:e.translate},ordinal:"%d.",week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"sndag_mndag_tisdag_onsdag_torsdag_fredag_lrdag".split("_"),weekdaysShort:"sn_mn_tis_ons_tor_fre_lr".split("_"),weekdaysMin:"s_m_ti_on_to_fr_l".split("_"),longDateFormat:{LT:"HH:mm",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igr] LT",nextWeek:"dddd LT",lastWeek:"[Frra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"fr %s sedan",s:"ngra sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en mnad",MM:"%d mnader",y:"ett r",yy:"%d r"},ordinal:function(t){var e=t%10,n=1===~~(t%100/10)?"e":1===e?"a":2===e?"a":3===e?"e":"e";return t+n},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("ta",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[] LT",nextDay:"[] LT",nextWeek:"dddd, LT",lastDay:"[] LT",lastWeek:"[ ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ",past:"%s ",s:"  ",m:" ",mm:"%d ",h:"  ",hh:"%d  ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},ordinal:function(t){return t+""},meridiem:function(t){return t>=6&&10>=t?" ":t>=10&&14>=t?" ":t>=14&&18>=t?" ":t>=18&&20>=t?" ":t>=20&&24>=t?" ":t>=0&&6>=t?" ":void 0},week:{dow:0,doy:6}})}),function(t){t(le)}(function(t){return t.lang("th",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"._._._._._._.".split("_"),longDateFormat:{LT:"H  m ",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY  LT",LLLL:"dddd D MMMM YYYY  LT"},meridiem:function(t){return 12>t?"":""},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd[ ] LT",lastDay:"[ ] LT",lastWeek:"[]dddd[ ] LT",sameElse:"L"},relativeTime:{future:" %s",past:"%s",s:"",m:"1 ",mm:"%d ",h:"1 ",hh:"%d ",d:"1 ",dd:"%d ",M:"1 ",MM:"%d ",y:"1 ",yy:"%d "}})}),function(t){t(le)}(function(t){return t.lang("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){var e={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'nc",4:"'nc",100:"'nc",6:"'nc",9:"'uncu",10:"'uncu",30:"'uncu",60:"'nc",90:"'nc"};return t.lang("tr",{months:"Ocak_ubat_Mart_Nisan_Mays_Haziran_Temmuz_Austos_Eyll_Ekim_Kasm_Aralk".split("_"),monthsShort:"Oca_ub_Mar_Nis_May_Haz_Tem_Au_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Sal_aramba_Perembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_ar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_a_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugn saat] LT",nextDay:"[yarn saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dn] LT",lastWeek:"[geen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s nce",s:"birka saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gn",dd:"%d gn",M:"bir ay",MM:"%d ay",y:"bir yl",yy:"%d yl"},ordinal:function(t){if(0===t)return t+"'nc";var n=t%10,i=t%100-n,r=t>=100?100:null;return t+(e[n]||e[i]||e[r])},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("tzm-la",{months:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brayr_mars_ibrir_mayyw_ywnyw_ywlywz_wt_wtanbir_ktwbr_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiyas".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minu",mm:"%d minu",h:"saa",hh:"%d tassain",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){return t.lang("tzm",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ ] LT",nextDay:"[ ] LT",nextWeek:"dddd [] LT",lastDay:"[ ] LT",lastWeek:"dddd [] LT",sameElse:"L"},relativeTime:{future:"   %s",past:" %s",s:"",m:"",mm:"%d ",h:"",hh:"%d ",d:"",dd:"%d o",M:"o",MM:"%d ",y:"",yy:"%d "},week:{dow:6,doy:12}})}),function(t){t(le)}(function(t){function e(t,e){var n=t.split("_");return e%10===1&&e%100!==11?n[0]:e%10>=2&&4>=e%10&&(10>e%100||e%100>=20)?n[1]:n[2]}function n(t,n,i){var r={mm:"__",hh:"__",dd:"__",MM:"__",yy:"__"};return"m"===i?n?"":"":"h"===i?n?"":"":t+" "+e(r[i],+t)}function i(t,e){var n={nominative:"___________".split("_"),accusative:"___________".split("_")},i=/D[oD]? *MMMM?/.test(e)?"accusative":"nominative";return n[i][t.month()]}function r(t,e){var n={nominative:"______".split("_"),accusative:"______".split("_"),genitive:"______".split("_")},i=/(\[[]\]) ?dddd/.test(e)?"accusative":/\[?(?:|)? ?\] ?dddd/.test(e)?"genitive":"nominative";return n[i][t.day()]}function o(t){return function(){return t+""+(11===this.hours()?"":"")+"] LT"}}return t.lang("uk",{months:i,monthsShort:"___________".split("_"),weekdays:r,weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD.MM.YYYY",LL:"D MMMM YYYY .",LLL:"D MMMM YYYY ., LT",LLLL:"dddd, D MMMM YYYY ., LT"},calendar:{sameDay:o("[ "),nextDay:o("[ "),lastDay:o("[ "),nextWeek:o("[] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[] dddd [").call(this);case 1:case 2:case 4:return o("[] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:" %s",past:"%s ",s:" ",m:n,mm:n,h:"",hh:n,d:"",dd:n,M:"",MM:n,y:"",yy:n},meridiem:function(t){return 4>t?"":12>t?"":17>t?"":""},ordinal:function(t,e){switch(e){case"M":case"d":case"DDD":case"w":case"W":return t+"-";case"D":return t+"-";default:return t}},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("uz",{months:"___________".split("_"),monthsShort:"___________".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[ ] LT []",nextDay:"[] LT []",nextWeek:"dddd [ ] LT []",lastDay:"[ ] LT []",lastWeek:"[] dddd [ ] LT []",sameElse:"L"},relativeTime:{future:" %s ",past:"  %s ",s:"",m:" ",mm:"%d ",h:" ",hh:"%d ",d:" ",dd:"%d ",M:" ",MM:"%d ",y:" ",yy:"%d "},week:{dow:1,doy:7}})}),function(t){t(le)}(function(t){return t.lang("vi",{months:"thng 1_thng 2_thng 3_thng 4_thng 5_thng 6_thng 7_thng 8_thng 9_thng 10_thng 11_thng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"ch nht_th hai_th ba_th t_th nm_th su_th by".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",L:"DD/MM/YYYY",LL:"D MMMM [nm] YYYY",LLL:"D MMMM [nm] YYYY LT",LLLL:"dddd, D MMMM [nm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hm nay lc] LT",nextDay:"[Ngy mai lc] LT",nextWeek:"dddd [tun ti lc] LT",lastDay:"[Hm qua lc] LT",lastWeek:"dddd [tun ri lc] LT",sameElse:"L"},relativeTime:{future:"%s ti",past:"%s trc",s:"vi giy",m:"mt pht",mm:"%d pht",h:"mt gi",hh:"%d gi",d:"mt ngy",dd:"%d ngy",M:"mt thng",MM:"%d thng",y:"mt nm",yy:"%d nm"},ordinal:function(t){return t},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("zh-cn",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",L:"YYYY-MM-DD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYY-MM-DD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(t,e){var n=100*t+e;return 600>n?"":900>n?"":1130>n?"":1230>n?"":1800>n?"":""},calendar:{sameDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},lastDay:function(){return 0===this.minutes()?"[]Ah[]":"[]LT"},nextWeek:function(){var e,n;return e=t().startOf("week"),n=this.unix()-e.unix()>=604800?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},lastWeek:function(){var e,n;return e=t().startOf("week"),n=this.unix()<e.unix()?"[]":"[]",0===this.minutes()?n+"dddAh":n+"dddAhmm"},sameElse:"LL"},ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",m:"1",mm:"%d",h:"1",hh:"%d",d:"1",dd:"%d",M:"1",MM:"%d",y:"1",yy:"%d"},week:{dow:1,doy:4}})}),function(t){t(le)}(function(t){return t.lang("zh-tw",{months:"___________".split("_"),monthsShort:"1_2_3_4_5_6_7_8_9_10_11_12".split("_"),weekdays:"______".split("_"),weekdaysShort:"______".split("_"),weekdaysMin:"______".split("_"),longDateFormat:{LT:"Ahmm",L:"YYYYMMMD",LL:"YYYYMMMD",LLL:"YYYYMMMDLT",LLLL:"YYYYMMMDddddLT",l:"YYYYMMMD",ll:"YYYYMMMD",lll:"YYYYMMMDLT",llll:"YYYYMMMDddddLT"},meridiem:function(t,e){var n=100*t+e;return 900>n?"":1130>n?"":1230>n?"":1800>n?"":""},calendar:{sameDay:"[]LT",nextDay:"[]LT",nextWeek:"[]ddddLT",lastDay:"[]LT",lastWeek:"[]ddddLT",sameElse:"L"},ordinal:function(t,e){switch(e){case"d":case"D":case"DDD":return t+"";case"M":return t+"";case"w":case"W":return t+"";default:return t}},relativeTime:{future:"%s",past:"%s",s:"",m:"",mm:"%d",h:"",hh:"%d",d:"",dd:"%d",M:"",MM:"%d",y:"",yy:"%d"}})}),le.lang("en"),Te?module.exports=le:"function"==typeof define&&define.amd?(define("moment",function(t,e,n){return n.config&&n.config()&&n.config().noGlobal===!0&&(de.moment=ue),le}),se(!0)):se()}).call(this)}).call(this),function(){"undefined"!=typeof Package&&(t=this.moment)}.call(this),"undefined"==typeof Package&&(Package={}),Package["moment-with-langs"]={moment:t}}(),function(){var t,e,n,i,r,o,a=Package.meteor.Meteor,s=Package.deps.Deps,l=Package.session.Session,u=Package.underscore._,h=Package.templating.Template,c=Package.spacebars.Spacebars,d=(Package.showdown.Showdown,Package.ui.UI),p=(Package.ui.Handlebars,Package["simple-schema"].SimpleSchema),f=(Package["simple-schema"].MongoObject,Package.htmljs.HTML),m=Package.blaze.Blaze;(function(){n=[{numero:1,nombre:"ALLQA COMPIS",nombreAlternativo:"Alqa Imilla",significadoNombre:"Papa de 2 colores rosado y blanco",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:2,nombre:"ALLQA PALTA",nombreAlternativo:"Wanka Lliqlla",significadoNombre:"Aplanado bicolor- Manta de wanka",colorFlor:"Lila a morada",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco a crema",formaRara:"Aplanado",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido y sopa",lugar:"Huancavelica"},{numero:3,nombre:"ALLQA WALASH",nombreAlternativo:"Walash",significadoNombre:"Joven bicolor",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:4,nombre:"AMPAIRAS",nombreAlternativo:"No tiene",significadoNombre:"Ampairas, Amparaes (pueblo)",colorFlor:"Blanco",toleranciaGranizada:"Dbil",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Dbil",usoCocina:"Hervido, sopas",lugar:"Cusco"},{numero:5,nombre:"AQU SUYTU",nombreAlternativo:"Yuraq Suytu",significadoNombre:"Arenoso Largo",colorFlor:"Rosado a rojo",toleranciaGranizada:"Dbil",colorPulpa:"Blanco o crema",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:6,nombre:"AZUL AWI PASA",nombreAlternativo:"Yana Chusa",significadoNombre:"Muchacha con ojos azules",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"Ojos azules",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:7,nombre:"CAMOTILLO",nombreAlternativo:"No tiene",significadoNombre:"Camote pequeo",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:8,nombre:"CARAMELO SUYTU",nombreAlternativo:"No tiene",significadoNombre:"Caramelo largo",colorFlor:"Blanco",toleranciaGranizada:"Intermedio",colorPulpa:"Combinado",formaRara:"Oblongo alargado",toleranciaHelada:"Fuerte",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:9,nombre:"CHIQCHI PASA",nombreAlternativo:"Yuraq Chiqchi Pasa",significadoNombre:"Seorita chispeada",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Comprimida",toleranciaHelada:"Dbil",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:10,nombre:"COMPIS",nombreAlternativo:"Puka Imilla",significadoNombre:"(No definido)",colorFlor:"Blanco",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:11,nombre:"CNDOR RUNTU",nombreAlternativo:"No tiene",significadoNombre:"Huevo de cndor",colorFlor:"Morado oscuro con acmenes blancos",toleranciaGranizada:"Dbil",colorPulpa:"Blanco",formaRara:"Ovalado",toleranciaHelada:"Intermedio",usoCocina:"Hervido y bonda",lugar:"Cusco"},{numero:12,nombre:"CORDOVINA",nombreAlternativo:"Clavelina",significadoNombre:"Cordovina",colorFlor:"Rojo a Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"Comprimida",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:13,nombre:"DUSIS",nombreAlternativo:"No tiene",significadoNombre:"(No definido)",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Combinado",formaRara:"Oblongo",toleranciaHelada:"Dbil",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:14,nombre:"HUAMAN UMA",nombreAlternativo:"No tiene",significadoNombre:"Cabeza del guila huamancha",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo claro",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:15,nombre:"HUAMANTANGA",nombreAlternativo:"Puka Aqu Suytu",significadoNombre:"Roja arenosa larga - Huamantanga (es un pueblo)",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:16,nombre:"KICHKA MATANKA",nombreAlternativo:"No tiene",significadoNombre:"Espina en la espalda",colorFlor:"Lila a morada",toleranciaGranizada:"Intermedio",colorPulpa:"Combinado",formaRara:"Comprimida",toleranciaHelada:"Fuerte",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:17,nombre:"KUCHIPA AKAN",nombreAlternativo:"No tiene",significadoNombre:"Excremento de chancho",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:18,nombre:"LINLIN",nombreAlternativo:"Yana Linli y Moro",significadoNombre:"(No definido)",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:19,nombre:"LLAMA SENQA",nombreAlternativo:"No tiene",significadoNombre:"Nariz de llama",colorFlor:"Violeta",toleranciaGranizada:"Dbil",colorPulpa:"Blanco",formaRara:"Oblondo Alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido y watia",lugar:"Cusco"},{numero:20,nombre:"LUNTUS (RUNTUS)",nombreAlternativo:"Luntus",significadoNombre:"Yema de huevo",colorFlor:"Blanco",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo intenso",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:21,nombre:"MAQA SONQO",nombreAlternativo:"No tiene",significadoNombre:"Corazn sin sabor",colorFlor:"Rosado a rojo",toleranciaGranizada:"Dbil",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Dbil",usoCocina:"Watia, hervido y chuo",lugar:"Cusco"},{numero:22,nombre:"MARKINA",nombreAlternativo:"No tiene",significadoNombre:"Markina",colorFlor:"Lila a morada",toleranciaGranizada:"Intermedio",colorPulpa:"Combinado",formaRara:"Oblongo",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:23,nombre:"MURU HUARILLO",nombreAlternativo:"Muru Wakrillo",significadoNombre:"Asta negra y blanca",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"Enroscado",toleranciaHelada:"Intermedio",usoCocina:"Chuo",lugar:"Apurmac"},{numero:24,nombre:"MURU LINLIN",nombreAlternativo:"No tiene",significadoNombre:"Linli de blanco y negro",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:25,nombre:"MURU LLUMCHUY WAQACHI",nombreAlternativo:"No tiene",significadoNombre:"Bicolor hace llorar a la nuera",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Tuberosado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:26,nombre:"MURU PHUQUYA",nombreAlternativo:"Moro Phocoya",significadoNombre:"",colorFlor:"Rosado",toleranciaGranizada:"Fuerte",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Fuerte",usoCocina:"",lugar:"Apurmac"},{numero:27,nombre:"MURU WAYRU",nombreAlternativo:"No tiene",significadoNombre:"Wayru bicolor",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:28,nombre:"PALTA SUSO",nombreAlternativo:"Paltea",significadoNombre:"Roja plana",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo claro",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Mondar, pelar y sopas",lugar:"Apurmac"},{numero:29,nombre:"PAQUS",nombreAlternativo:"Pacos",significadoNombre:"(No definido)",colorFlor:"Morado",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo claro",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Pelar, sopas",lugar:"Apurmac"},{numero:30,nombre:"PARIWANA",nombreAlternativo:"No tiene",significadoNombre:"Flamenco (ave)",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"Obovado",toleranciaHelada:"Intermedio",usoCocina:"Hervido, sopas, al horno",lugar:"Cusco"},{numero:31,nombre:"PAYAPA ANKUN",nombreAlternativo:"No tiene",significadoNombre:"Talon de Anciana",colorFlor:"Lila a morada",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco a crema",formaRara:"Oblongo",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido y chuo",lugar:"Huancavelica"},{numero:32,nombre:"PERUANITA",nombreAlternativo:"No tiene",significadoNombre:"Color de la bandera peruana (pequea)",colorFlor:"Rojo Morado",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo",toleranciaHelada:"Dbil",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:33,nombre:"PRESCOS",nombreAlternativo:"Bayo Botas, Qompis",significadoNombre:"(No definido)",colorFlor:"Blanco",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Redondo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:34,nombre:"PUKA BOTIJUELA",nombreAlternativo:"No tiene",significadoNombre:"Botijuela roja",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco o crema",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:35,nombre:"PUKA CHIMAKU",nombreAlternativo:"No tiene",significadoNombre:"Chiwako (zorzal, tordo) rojo",colorFlor:"Lila",toleranciaGranizada:"Dbil",colorPulpa:"Crema",formaRara:"Fusiforme",toleranciaHelada:"Intermedio",usoCocina:"Hervido y chuo",lugar:"Cusco"},{numero:36,nombre:"PUKA CHIQCHI PASA",nombreAlternativo:"Puka Pasa",significadoNombre:"Seorita roja chispeada",colorFlor:"Lila a Morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a Crema",formaRara:"Comprimida",toleranciaHelada:"Dbil",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:37,nombre:"PUKA CHURUSPE",nombreAlternativo:"Puka Churuspi",significadoNombre:"Churuspi rojo",colorFlor:"Rojo-morado plido con blanco en el acumen (Envs)",toleranciaGranizada:"Intermedio",colorPulpa:"Crema y anillo vascular y medula roja",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido, sopas y chuo",lugar:"Cusco"},{numero:38,nombre:"PUKA INKACHU",nombreAlternativo:"",significadoNombre:"De los inkas, rojo",colorFlor:"Rosado a rojo",toleranciaGranizada:"Dbil",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Dbil",usoCocina:"Hervido y watias",lugar:"Cusco"},{numero:39,nombre:"PUKA AWI SUYTO",nombreAlternativo:"Yurac Huachala",significadoNombre:"Blanco que produce bastante. Con ojos rojos",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:40,nombre:"PUKA QHACHUN WAQACHI",nombreAlternativo:"No tiene",significadoNombre:"La que hace llorar a la nuera, rojo",colorFlor:"Rojo Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"Oblongo alargado concertinada y ojos profundos.",toleranciaHelada:"Intermedio",usoCocina:"Hervido, papa seca, al horno, watias",lugar:"Cusco"},{numero:41,nombre:"PUKA QULLUNA",nombreAlternativo:"No tiene",significadoNombre:"(No definido)",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Crema/rojo (anillo angosto)",formaRara:"Bastantes ojos",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:42,nombre:"PUKA RUMPHU KUSI",nombreAlternativo:"No tiene",significadoNombre:"Calabacn ovalado y rojo",colorFlor:"Morado sin botones",toleranciaGranizada:"Intermedio",colorPulpa:"Crema con pigmentos morados",formaRara:"Ovalado aplanado",toleranciaHelada:"Intermedio",usoCocina:"Chuo, hervido, watia, chuo",lugar:"Cusco"},{numero:43,nombre:"PUKA SHUALLULLA",nombreAlternativo:"Huancucho Rojo",significadoNombre:"Rojo ratero mentiroso",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:44,nombre:"PUKA WAYRU",nombreAlternativo:"No tiene",significadoNombre:"Wayru rojo",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo alargado",toleranciaHelada:"Dbil",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:45,nombre:"PUMA MAKI",nombreAlternativo:"Pumaq Makin",significadoNombre:"Mano del puma",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"mano u garra del puma",toleranciaHelada:"Intermedio",usoCocina:"Chuo",lugar:"Apurmac"},{numero:46,nombre:"PUQYA",nombreAlternativo:"No tiene",significadoNombre:"Puqya",colorFlor:"Blanco",toleranciaGranizada:"Fuerte",colorPulpa:"Blanco a crema",formaRara:"Oblongo",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:47,nombre:"QELLO RUNTHUS",nombreAlternativo:"No tiene",significadoNombre:"Huevo amarillo",colorFlor:"Blanco Intermedio",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo intenso",formaRara:"Comprimida",toleranciaHelada:"Intermedio",usoCocina:"Watia, purs y hervido",lugar:"Cusco"},{numero:48,nombre:"QEWILLO",nombreAlternativo:"Alka Charka",significadoNombre:"Serpenteante",colorFlor:"Azul morado",toleranciaGranizada:"Dbil",colorPulpa:"Crema con pigmentos morados",formaRara:"Alargada",toleranciaHelada:"Dbil",usoCocina:"Moraya, chuo",lugar:"Cusco"},{numero:49,nombre:"QALAPA WARAN",nombreAlternativo:"Waripa Tacllan",significadoNombre:"Ropa vieja- Arado de pie de joven",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:50,nombre:"QHACHUM WAQACHI",nombreAlternativo:"Chocllos",significadoNombre:"Hace llorar a la yerna",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo",formaRara:"Ojos profundos",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:51,nombre:"QULLQI TUPU",nombreAlternativo:"Yuraq Peruanita",significadoNombre:"Tupu (prendedor) de plata",colorFlor:"Rojo a morado",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:52,nombre:"RISCO",nombreAlternativo:"No tiene",significadoNombre:"(No definido)",colorFlor:"Blanco",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:53,nombre:"RUNTUS",nombreAlternativo:"No tiene",significadoNombre:"Huevo",colorFlor:"Blanco",toleranciaGranizada:"Dbil",colorPulpa:"Amarillo",formaRara:"Redondo",toleranciaHelada:"Intermedio",usoCocina:"Causa, hervido",lugar:"Huancavelica"},{numero:54,nombre:"SALAMANCA",nombreAlternativo:"No tiene",significadoNombre:"(No definido)",colorFlor:"Azul celeste",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:55,nombre:"SANGRE DE TORO",nombreAlternativo:"Turupa Yawar",significadoNombre:"Sangre de toro",colorFlor:"Rosado",toleranciaGranizada:"Dbil",colorPulpa:"Rojo",formaRara:"Redondo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:56,nombre:"SIMPA WAA",nombreAlternativo:"",significadoNombre:"Papa amarga trenzada",colorFlor:"Azul",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Fuerte",usoCocina:"Moraya y chuo",lugar:"Apurmac"},{numero:57,nombre:"SUNCHU PAPA",nombreAlternativo:"Paspa Sunchu",significadoNombre:"Papa aspera",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:58,nombre:"SUSO",nombreAlternativo:"Puka Suso",significadoNombre:"Papa sin sabor",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Mondar o pelar",lugar:"Apurmac"},{numero:59,nombre:"SUYTU",nombreAlternativo:"Yuraq Suytu",significadoNombre:"Alargado",colorFlor:"Rojo morado oscuro",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco violeta con anillo vascular",formaRara:"Elptica",toleranciaHelada:"Intermedio",usoCocina:"Hervido y bonda",lugar:"Cusco"},{numero:60,nombre:"TANTAS",nombreAlternativo:"Riplan",significadoNombre:"Panes",colorFlor:"Azul morado",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido, sopas y guisos",lugar:"Huancavelica"},{numero:61,nombre:"TRAJIN WAQACHI",nombreAlternativo:"No tiene",significadoNombre:"El que hace llorar al arriero",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Comprimida",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:62,nombre:"UQI SUYTO",nombreAlternativo:"No tiene",significadoNombre:"Perro negro",colorFlor:"Azul morado",toleranciaGranizada:"Dbil",colorPulpa:"Crema",formaRara:"Fusiforme alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido y sopas",lugar:"Cusco"},{numero:63,nombre:"WAKAPA QALLUN",nombreAlternativo:"No tiene",significadoNombre:"Lengua de vaca",colorFlor:"Rojo Morado",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Aplanado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:64,nombre:"WITQIS",nombreAlternativo:"Sirina",significadoNombre:"Wiqtis -Sirena",colorFlor:"Celeste a Azul",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Oblongo",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:65,nombre:"YANA CHARKA",nombreAlternativo:"No tiene",significadoNombre:"Lugar negro",colorFlor:"Morado oscuro",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"Oblondo Alargado",toleranciaHelada:"Intermedio",usoCocina:"Chuo",lugar:"Cusco"},{numero:66,nombre:"YANA CHIQCHI PASA",nombreAlternativo:"No tiene",significadoNombre:"Seorita negra chispeada",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Comprimida",toleranciaHelada:"Dbil",usoCocina:"Watia, hervido",lugar:"Huancavelica"},{numero:67,nombre:"YANA CHURUSPE",nombreAlternativo:"Yana Churuspi",significadoNombre:"Churuspi negro",colorFlor:"Morado oscuro",toleranciaGranizada:"Dbil",colorPulpa:"Blanco-violeta con anillo vascular y mdula",formaRara:"Oblongo alargado",toleranciaHelada:"Intermedio",usoCocina:"Hervido y watias",lugar:"Cusco"},{numero:68,nombre:"YANA GASPAR",nombreAlternativo:"Yana ata",significadoNombre:"Gaspar Negro",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Tuberosado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:69,nombre:"YANA IMILIA",nombreAlternativo:"No tiene",significadoNombre:"Muchacha juvenil",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo claro",formaRara:"Comprimida",toleranciaHelada:"Intermedio",usoCocina:"Hervido, chuo, watia y sopas",lugar:"Cusco"},{numero:70,nombre:"YANA LINLIN",nombreAlternativo:"Papa negra",significadoNombre:"(No definido)",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Fuerte",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:71,nombre:"YANA LLUMCHUY WAQACHI",nombreAlternativo:"No tiene",significadoNombre:"Negra hace llorar a la nuera",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a crema",formaRara:"Tuberosado",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:72,nombre:"YANA MANWA",nombreAlternativo:"Manua",significadoNombre:"Manwa negra",colorFlor:"Lila a morada",toleranciaGranizada:"Fuerte",colorPulpa:"Combinado",formaRara:"Oblongo",toleranciaHelada:"Fuerte",usoCocina:"Chuo y sopa",lugar:"Huancavelica"},{numero:73,nombre:"YANA ATA",nombreAlternativo:"ata",significadoNombre:"Achatado Negro",colorFlor:"Lila a Morada",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco a Crema",formaRara:"Comprimida",toleranciaHelada:"Fuerte",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:74,nombre:"YANA AWI PASA",nombreAlternativo:"Yana Chusa",significadoNombre:"Muchacha de ojos negros o azules",colorFlor:"Rojo morado o morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:75,nombre:"YANA PUTIS",nombreAlternativo:"No tiene",significadoNombre:"(No definido)",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema/rojo. Anillo angosto",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:76,nombre:"YANA RUMPHU KUSI",nombreAlternativo:"No tiene",significadoNombre:"Calabacn ovalado y negro",colorFlor:"Lila plido",toleranciaGranizada:"Dbil",colorPulpa:"Crema con anillo vascular morado",formaRara:"Ovalado aplanado",toleranciaHelada:"Dbil",usoCocina:"Chuo, hervido, watia, chuo",lugar:"Cusco"},{numero:77,nombre:"YANA SHUALLULLA",nombreAlternativo:"Huancucho Negro",significadoNombre:"Negro Ratero mentiroso",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco/Morado. Anillo vascular y medalla",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:78,nombre:"YANA SUSO",nombreAlternativo:"No tiene",significadoNombre:"Papa sin sabor",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Crema/morado. Anillo angosto",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Mondar, pelar y sopas",lugar:"Apurmac"},{numero:79,nombre:"YANA WAKCHILLA",nombreAlternativo:"No tiene",significadoNombre:"Garza negra",colorFlor:"",toleranciaGranizada:"",colorPulpa:"",formaRara:"",toleranciaHelada:"",usoCocina:"",lugar:"Apurmac"},{numero:80,nombre:"YANA WILLKAS",nombreAlternativo:"No tiene",significadoNombre:"Sagrado negro",colorFlor:"Morado",toleranciaGranizada:"Intermedio",colorPulpa:"Morado",formaRara:"Oblondo Alargado",toleranciaHelada:"Intermedio",usoCocina:"Chuo, moraya",lugar:"Cusco"},{numero:81,nombre:"YANA WINQU",nombreAlternativo:"Winqu",significadoNombre:"Negro torcido",colorFlor:"Lila a morada",toleranciaGranizada:"Dbil",colorPulpa:"Combinado",formaRara:"Alargada",toleranciaHelada:"Intermedio",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:82,nombre:"YURAQ INKACHU",nombreAlternativo:"No tiene",significadoNombre:"De los inkas, blanco",colorFlor:"Blanco plido",toleranciaGranizada:"Dbil",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Dbil",usoCocina:"Hervido y watias",lugar:"Cusco"},{numero:83,nombre:"YURAQ IPILLU",nombreAlternativo:"Yuraq Culebrina",significadoNombre:"Ipillu blanco",colorFlor:"Rojo Morado",toleranciaGranizada:"Dbil",colorPulpa:"Blanco a Crema",formaRara:"Alargada",toleranciaHelada:"Intermedio",usoCocina:"Chuo",lugar:"Huancavelica"},{numero:84,nombre:"YURAQ MAKO",nombreAlternativo:"Maco",significadoNombre:"Maco blanco",colorFlor:"Lila a morada",toleranciaGranizada:"Intermedio",colorPulpa:"Blanco a crema",formaRara:"Oblongo",toleranciaHelada:"Fuerte",usoCocina:"Hervido",lugar:"Huancavelica"},{numero:85,nombre:"YURAQ SOLE",nombreAlternativo:"No tiene",significadoNombre:"Sole blanco",colorFlor:"Lila oscura",toleranciaGranizada:"Intermedio",colorPulpa:"Rojo con corteza blanca",formaRara:"Oblondo Obovado",toleranciaHelada:"Intermedio",usoCocina:"Hervido y chuo",lugar:"Cusco"},{numero:86,nombre:"YURAQ SUNCHUS",nombreAlternativo:"Paspa Sunchu",significadoNombre:"Papa spera",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Mondar, pelar y sopas",lugar:"Apurmac"},{numero:87,nombre:"YURAQ SUYTO",nombreAlternativo:"No tiene",significadoNombre:"Blanco alargado",colorFlor:"Lila",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:88,nombre:"YURAQ WACHALLA",nombreAlternativo:"Puka awi Wachala",significadoNombre:"Blanco que produce bastante",colorFlor:"Violeta",toleranciaGranizada:"Intermedio",colorPulpa:"Crema",formaRara:"No tiene",toleranciaHelada:"Intermedio",usoCocina:"Watia, hervido",lugar:"Apurmac"},{numero:89,nombre:"YURAQ WAA",nombreAlternativo:"No tiene",significadoNombre:"Papa amarga",colorFlor:"Morado",toleranciaGranizada:"Fuerte",colorPulpa:"Blanco",formaRara:"No tiene",toleranciaHelada:"Fuerte",usoCocina:"Chuo y moraya",lugar:"Apurmac"},{numero:90,nombre:"YURAQ WILLKAS",nombreAlternativo:"No tiene",significadoNombre:"Sagrado blanco",colorFlor:"Lila oscura",toleranciaGranizada:"Intermedio",colorPulpa:"Amarillo",formaRara:"Obovado",toleranciaHelada:"Intermedio",usoCocina:"Hervido, chuo, bonda y sopas",lugar:"Cusco"}]
}).call(this),function(){i="object"==typeof i?i:{};var t;t=t||{},t.Papa=new p({nombre:{type:String,label:"Nombre",max:140},numero:{type:Number,label:"Nmero",unique:!0,min:1,max:90},nombreAlternativo:{type:String,label:"Nombre alternativo",optional:!0},significadoNombre:{type:String,label:"Significado del nombre",optional:!0},colorFlor:{type:String,label:"Color principal de la flor",optional:!0},toleranciaGranizada:{type:String,label:"Tolerancia a la granizada",optional:!0},colorPulpa:{type:String,label:"Color principal de la pulpa del tubrculo",optional:!0},formaRara:{type:String,label:"Forma rara",optional:!0},toleranciaHelada:{type:String,label:"Tolerancia a la helada",optional:!0},usoCocina:{type:String,label:"Uso en la cocina",optional:!0},audio:{type:new p({ini:{type:Number,label:"Audio marker ini"},dur:{type:Number,label:"Audio duration"}})},slug:{type:String,label:"Slug",max:140},imageFileNameScreen:{type:String,label:"Image file name (screen)",max:140},imageFileNamePrint:{type:String,label:"Image file name (print)",max:140}}),e=new a.Collection("papas",{connection:null}),e.attachSchema(t.Papa),a.startup(function(){var t,i,r,o,a,s;for(t=500,s=[],o=0,a=n.length;a>o;o++)r=n[o],i=("00"+r.numero).slice(-3),r.slug=""+i+"-"+u.slugify(r.nombre),r.audio={ini:(r.numero-1)*t,dur:t},r.imageFileNameScreen=""+i+".png",r.imageFileNamePrint=""+i+"-print.png",s.push(e.insert(r));return s})}.call(this),function(){!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,i){var r,o,a,s=e.nodeName.toLowerCase();return"area"===s?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(a=t("img[usemap=#"+o+"]")[0],!!a&&n(a)):!1):(/input|select|textarea|button|object/.test(s)?!e.disabled:"a"===s?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(){var e=this.css("position"),n="absolute"===e,i=this.parents().filter(function(){var e=t(this);return n&&"static"===e.css("position")?!1:/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==e&&i.length?i:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var i=t.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&e(n,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function i(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,i(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,i(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,i,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;o.length>r;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}};var i=0,r=Array.prototype.slice;t.cleanData=function(e){return function(n){for(var i,r=0;null!=(i=n[r]);r++)try{t(i).triggerHandler("remove")}catch(o){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var r,o,a,s,l={},u=e.split(".")[0];return e=e.split(".")[1],r=u+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[u]=t[u]||{},o=t[u][e],a=t[u][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:u,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;s>a;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(e[n]=t.isPlainObject(i)?t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=r.call(arguments,1),l=this;return o=!a&&s.length?t.widget.extend.apply(null,[o].concat(s)):o,this.each(a?function(){var n,r=t.data(this,i);return"instance"===o?(l=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}:function(){var e=t.data(this,i);e?(e.option(o||{}),e._init&&e._init()):t.data(this,i,new n(o,this))}),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;i.length-1>o;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),u=l[1]+o.eventNamespace,h=l[2];h?r.delegate(h,u,s):n.bind(u,s)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}}),t.widget;var o=!1;t(document).mouseup(function(){o=!1}),t.widget("ui.mouse",{version:"1.11.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return i&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,!0)):!0}},_mouseMove:function(e){return t.ui.ie&&(!document.documentMode||9>document.documentMode)&&!e.button?this._mouseUp(e):e.which?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}}),function(){function e(t,e,n){return[parseFloat(t[0])*(p.test(t[0])?e/100:1),parseFloat(t[1])*(p.test(t[1])?n/100:1)]}function n(e,n){return parseInt(t.css(e,n),10)||0}function i(e){var n=e[0];return 9===n.nodeType?{width:e.width(),height:e.height(),offset:{top:0,left:0}}:t.isWindow(n)?{width:e.width(),height:e.height(),offset:{top:e.scrollTop(),left:e.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:e.outerWidth(),height:e.outerHeight(),offset:e.offset()}}t.ui=t.ui||{};var r,o,a=Math.max,s=Math.abs,l=Math.round,u=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+(\.[\d]+)?%?/,d=/^\w+/,p=/%$/,f=t.fn.position;t.position={scrollbarWidth:function(){if(void 0!==r)return r;var e,n,i=t("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=i.children()[0];return t("body").append(i),e=o.offsetWidth,i.css("overflow","scroll"),n=o.offsetWidth,e===n&&(n=i[0].clientWidth),i.remove(),r=e-n},getScrollInfo:function(e){var n=e.isWindow||e.isDocument?"":e.element.css("overflow-x"),i=e.isWindow||e.isDocument?"":e.element.css("overflow-y"),r="scroll"===n||"auto"===n&&e.width<e.element[0].scrollWidth,o="scroll"===i||"auto"===i&&e.height<e.element[0].scrollHeight;return{width:o?t.position.scrollbarWidth():0,height:r?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var n=t(e||window),i=t.isWindow(n[0]),r=!!n[0]&&9===n[0].nodeType;return{element:n,isWindow:i,isDocument:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:i?n.width():n.outerWidth(),height:i?n.height():n.outerHeight()}}},t.fn.position=function(r){if(!r||!r.of)return f.apply(this,arguments);r=t.extend({},r);var p,m,g,y,_,v,b=t(r.of),w=t.position.getWithinInfo(r.within),x=t.position.getScrollInfo(w),T=(r.collision||"flip").split(" "),M={};return v=i(b),b[0].preventDefault&&(r.at="left top"),m=v.width,g=v.height,y=v.offset,_=t.extend({},y),t.each(["my","at"],function(){var t,e,n=(r[this]||"").split(" ");1===n.length&&(n=u.test(n[0])?n.concat(["center"]):h.test(n[0])?["center"].concat(n):["center","center"]),n[0]=u.test(n[0])?n[0]:"center",n[1]=h.test(n[1])?n[1]:"center",t=c.exec(n[0]),e=c.exec(n[1]),M[this]=[t?t[0]:0,e?e[0]:0],r[this]=[d.exec(n[0])[0],d.exec(n[1])[0]]}),1===T.length&&(T[1]=T[0]),"right"===r.at[0]?_.left+=m:"center"===r.at[0]&&(_.left+=m/2),"bottom"===r.at[1]?_.top+=g:"center"===r.at[1]&&(_.top+=g/2),p=e(M.at,m,g),_.left+=p[0],_.top+=p[1],this.each(function(){var i,u,h=t(this),c=h.outerWidth(),d=h.outerHeight(),f=n(this,"marginLeft"),v=n(this,"marginTop"),k=c+f+n(this,"marginRight")+x.width,S=d+v+n(this,"marginBottom")+x.height,C=t.extend({},_),L=e(M.my,h.outerWidth(),h.outerHeight());"right"===r.my[0]?C.left-=c:"center"===r.my[0]&&(C.left-=c/2),"bottom"===r.my[1]?C.top-=d:"center"===r.my[1]&&(C.top-=d/2),C.left+=L[0],C.top+=L[1],o||(C.left=l(C.left),C.top=l(C.top)),i={marginLeft:f,marginTop:v},t.each(["left","top"],function(e,n){t.ui.position[T[e]]&&t.ui.position[T[e]][n](C,{targetWidth:m,targetHeight:g,elemWidth:c,elemHeight:d,collisionPosition:i,collisionWidth:k,collisionHeight:S,offset:[p[0]+L[0],p[1]+L[1]],my:r.my,at:r.at,within:w,elem:h})}),r.using&&(u=function(t){var e=y.left-C.left,n=e+m-c,i=y.top-C.top,o=i+g-d,l={target:{element:b,left:y.left,top:y.top,width:m,height:g},element:{element:h,left:C.left,top:C.top,width:c,height:d},horizontal:0>n?"left":e>0?"right":"center",vertical:0>o?"top":i>0?"bottom":"middle"};c>m&&m>s(e+n)&&(l.horizontal="center"),d>g&&g>s(i+o)&&(l.vertical="middle"),l.important=a(s(e),s(n))>a(s(i),s(o))?"horizontal":"vertical",r.using.call(this,t,l)}),h.offset(t.extend(C,{using:u}))})},t.ui.position={fit:{left:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollLeft:i.offset.left,o=i.width,s=t.left-e.collisionPosition.marginLeft,l=r-s,u=s+e.collisionWidth-o-r;e.collisionWidth>o?l>0&&0>=u?(n=t.left+l+e.collisionWidth-o-r,t.left+=l-n):t.left=u>0&&0>=l?r:l>u?r+o-e.collisionWidth:r:l>0?t.left+=l:u>0?t.left-=u:t.left=a(t.left-s,t.left)},top:function(t,e){var n,i=e.within,r=i.isWindow?i.scrollTop:i.offset.top,o=e.within.height,s=t.top-e.collisionPosition.marginTop,l=r-s,u=s+e.collisionHeight-o-r;e.collisionHeight>o?l>0&&0>=u?(n=t.top+l+e.collisionHeight-o-r,t.top+=l-n):t.top=u>0&&0>=l?r:l>u?r+o-e.collisionHeight:r:l>0?t.top+=l:u>0?t.top-=u:t.top=a(t.top-s,t.top)}},flip:{left:function(t,e){var n,i,r=e.within,o=r.offset.left+r.scrollLeft,a=r.width,l=r.isWindow?r.scrollLeft:r.offset.left,u=t.left-e.collisionPosition.marginLeft,h=u-l,c=u+e.collisionWidth-a-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];0>h?(n=t.left+d+p+f+e.collisionWidth-a-o,(0>n||s(h)>n)&&(t.left+=d+p+f)):c>0&&(i=t.left-e.collisionPosition.marginLeft+d+p+f-l,(i>0||c>s(i))&&(t.left+=d+p+f))},top:function(t,e){var n,i,r=e.within,o=r.offset.top+r.scrollTop,a=r.height,l=r.isWindow?r.scrollTop:r.offset.top,u=t.top-e.collisionPosition.marginTop,h=u-l,c=u+e.collisionHeight-a-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,m=-2*e.offset[1];0>h?(i=t.top+p+f+m+e.collisionHeight-a-o,t.top+p+f+m>h&&(0>i||s(h)>i)&&(t.top+=p+f+m)):c>0&&(n=t.top-e.collisionPosition.marginTop+p+f+m-l,t.top+p+f+m>c&&(n>0||c>s(n))&&(t.top+=p+f+m))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,n,i,r,a,s=document.getElementsByTagName("body")[0],l=document.createElement("div");e=document.createElement(s?"div":"body"),i={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},s&&t.extend(i,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in i)e.style[a]=i[a];e.appendChild(l),n=s||document.documentElement,n.insertBefore(e,n.firstChild),l.style.cssText="position: absolute; left: 10.7432222px;",r=t(l).offset().left,o=r>10&&11>r,e.innerHTML="",n.removeChild(e)}()}(),t.ui.position,t.widget("ui.draggable",t.ui.mouse,{version:"1.11.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"!==this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var n=this.document[0],i=this.options;try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&t(n.activeElement).blur()}catch(r){}return this.helper||i.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(t(i.iframeFix===!0?"iframe":i.iframeFix).each(function(){t("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offsetParent=this.helper.offsetParent(),this.offsetParentCssPosition=this.offsetParent.css("position"),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},this.offset.scroll=!1,t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,n){if("fixed"===this.offsetParentCssPosition&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this._removeHandleClassName(),t(this.options.handle||this.element).addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.element.find(".ui-draggable-handle").addBack().removeClass("ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return i.parents("body").length||i.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i[0]===this.element[0]||/(fixed|absolute)/.test(i.css("position"))||i.css("position","absolute"),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,o=this.document[0];return this.relative_container=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],void(i&&(e="hidden"!==n.css("overflow"),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,u=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relative_container?(i=this.relative_container.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(u=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(u=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((u-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,u=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(u=this.originalPageY)),{top:u-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),"drag"===e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=i.options,o=t.extend({},n,{item:i.element});i.sortables=[],t(r.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",e,o))})},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});t.each(i.sortables,function(){this.instance.isOver?(this.instance.isOver=0,i.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=this.shouldRevert),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"===i.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,r))
})},drag:function(e,n,i){var r=this;t.each(i.sortables,function(){var o=!1,a=this;this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,t.each(i.sortables,function(){return this.instance.positionAbs=i.positionAbs,this.instance.helperProportions=i.helperProportions,this.instance.offset.click=i.offset.click,this!==a&&this.instance._intersectsWith(this.instance.containerCache)&&t.contains(a.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(r).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=i.offset.click.top,this.instance.offset.click.left=i.offset.click.left,this.instance.offset.parent.left-=i.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=i.offset.parent.top-this.instance.offset.parent.top,i._trigger("toSortable",e),i.dropped=this.instance.element,i.currentItem=i.element,this.instance.fromOutside=i),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),i._trigger("fromSortable",e),i.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParent[0]!==n.document[0]&&"HTML"!==n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(e,n,i){var r=i.options,o=!1,a=i.document[0];i.scrollParent[0]!==a&&"HTML"!==i.scrollParent[0].tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<r.scrollSensitivity?i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(i.scrollParent[0].scrollTop=o=i.scrollParent[0].scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<r.scrollSensitivity?i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(i.scrollParent[0].scrollLeft=o=i.scrollParent[0].scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(a).scrollTop()<r.scrollSensitivity?o=t(a).scrollTop(t(a).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(a).scrollTop())<r.scrollSensitivity&&(o=t(a).scrollTop(t(a).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(a).scrollLeft()<r.scrollSensitivity?o=t(a).scrollLeft(t(a).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(a).scrollLeft())<r.scrollSensitivity&&(o=t(a).scrollLeft(t(a).scrollLeft()+r.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var r,o,a,s,l,u,h,c,d,p,f=i.options,m=f.snapTolerance,g=n.offset.left,y=g+i.helperProportions.width,_=n.offset.top,v=_+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left,u=l+i.snapElements[d].width,h=i.snapElements[d].top,c=h+i.snapElements[d].height,l-m>y||g>u+m||h-m>v||_>c+m||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==f.snapMode&&(r=m>=Math.abs(h-v),o=m>=Math.abs(c-_),a=m>=Math.abs(l-y),s=m>=Math.abs(u-g),r&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top-i.margins.top),o&&(n.position.top=i._convertPositionTo("relative",{top:c,left:0}).top-i.margins.top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width}).left-i.margins.left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u}).left-i.margins.left)),p=r||o||a||s,"outer"!==f.snapMode&&(r=m>=Math.abs(h-_),o=m>=Math.abs(c-v),a=m>=Math.abs(l-g),s=m>=Math.abs(u-y),r&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top-i.margins.top),o&&(n.position.top=i._convertPositionTo("relative",{top:c-i.helperProportions.height,left:0}).top-i.margins.top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left-i.margins.left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:u-i.helperProportions.width}).left-i.margins.left)),!i.snapElements[d].snapping&&(r||o||a||s||p)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=r||o||a||s||p)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,o=i.options,a=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}}),t.ui.draggable,t.widget("ui.droppable",{version:"1.11.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;t.length>e;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var e=t(this).droppable("instance");return e.options.greedy&&!e.options.disabled&&e.options.scope===i.options.scope&&e.accept.call(e.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(e,{offset:e.element.offset()}),e.options.tolerance)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,n){return t>=e&&e+n>t}return function(e,n,i){if(!n.offset)return!1;var r,o,a=(e.positionAbs||e.position.absolute).left,s=(e.positionAbs||e.position.absolute).top,l=a+e.helperProportions.width,u=s+e.helperProportions.height,h=n.offset.left,c=n.offset.top,d=h+n.proportions().width,p=c+n.proportions().height;switch(i){case"fit":return a>=h&&d>=l&&s>=c&&p>=u;case"intersect":return a+e.helperProportions.width/2>h&&d>l-e.helperProportions.width/2&&s+e.helperProportions.height/2>c&&p>u-e.helperProportions.height/2;case"pointer":return r=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,o=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,t(o,c,n.proportions().height)&&t(r,h,n.proportions().width);case"touch":return(s>=c&&p>=s||u>=c&&p>=u||c>s&&u>p)&&(a>=h&&d>=a||l>=h&&d>=l||h>a&&l>d);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,r,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;o.length>i;i++)if(!(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))){for(r=0;s.length>r;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=t.ui.intersect(e,this,this.options.tolerance),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r}),o.length&&(i=t(o[0]).droppable("instance"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}},t.ui.droppable})}.call(this),function(){r=function(t,e){var n=this;n._init(t,e)},r.prototype._init=function(t,e){var n=this;t?n._containerId=t:t=n._containerId,n.snapContainer=Snap(t),n.ready=!1,Snap.load("assets/images/camion.svg",function(t){n.snapElement=t.select("svg"),n.camion=n.snapElement.select("#camion"),n.camion.drag(),n.camion.attr({opacity:0,transform:"matrix(1,0,0,1,-290,0)"}),n.snapContainer.append(n.snapElement),n.ready=!0,e&&e(n)}),n.sonidos={arranque:new Howl({urls:["assets/audio/camion/arranque.mp3","assets/audio/camion/arranque.ogg"],volume:7,onend:function(){n.sonidos.marcha.play()}}),marcha:new Howl({urls:["assets/audio/camion/marcha.mp3","assets/audio/camion/marcha.ogg"],volume:7,loop:!0})}},r.prototype._destroy=function(){var t=this;t.snapElement.clear(),$(t._containerId).empty(),t.sonidos.arranque.unload(),t.sonidos.marcha.unload()},r.prototype.go=function(t){var e=this,n=e.snapElement,i=n.select("#carroceria"),r=n.select("#rueda-delantera"),o=n.select("#rueda-trasera");e.camion.animate({opacity:100},1500,mina.linear,function(){e.sonidos.arranque.play(),e.vibrar(i),setTimeout(function(){e.girar(o),e.girar(r),e.camion.animate({transform:"translate(2000, 0)"},7e3,mina.easeout,function(){t&&t(),e._destroy(),e._init()}),setTimeout(function(){e.sonidos.marcha.fadeOut(0,6e3)},1e3)},1370)})},r.prototype.stop=function(){this.sonidos.marcha.stop()},r.prototype.vibrar=function(t){var e=this,n=40,i=2,r=-1*i,o=2*i,a=2*i;t.animate({transform:"translate("+r+", "+r+")"},n,null,function(){t.animate({transform:"translate("+o+", 0)"},n,null,function(){t.animate({transform:"translate(0, "+a+")"},n,null,function(){t.animate({transform:"translate("+a+", 0)"},n,null,function(){e.vibrar(t)})})})})},r.prototype.girar=function(t){function e(){var r=t.getBBox();t.animate({transform:"rotate("+360*i+","+r.cx+","+r.cy+")"},n,null,function(){e()}),i++}var n=1e3,i=1;e()}}.call(this),function(){t={sonidos:{manager:Howler},init:function(){t.sonidos.cortina=new Howl({urls:["assets/audio/cortina.mp3","assets/audio/cortina.ogg"],autoplay:!0,loop:!0});var n={};e.find().forEach(function(t){n[t.numero]=[t.audio.ini,t.audio.dur]}),t.sonidos.papas=new Howl({urls:["assets/audio/papas.mp3","assets/audio/papas.ogg"],sprite:n,volume:10}),t.sonidos.final=new Howl({urls:["assets/audio/final-etapa.mp3","assets/audio/final-etapa.ogg"],volume:7}),t.sonidos.correcto=new Howl({urls:["assets/audio/correcto.mp3","assets/audio/correcto.ogg"],volume:5}),t.sonidos.incorrecto=new Howl({urls:["assets/audio/incorrecto.mp3","assets/audio/incorrecto.ogg"],volume:3}),t.camion=new r("#camion-container")},restart:function(){},resuelto:function(){l.set("expertoStep","fin"),t.sonidos.finalEtapa.play()}};var n;n={google:{families:["Source+Code+Pro::latin"]}},function(){var t=document.createElement("script");t.src=("https:"==document.location.protocol?"https":"http")+"://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js",t.type="text/javascript",t.async="true";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()}.call(this),function(){h.__define__("experto",function(){var t=this;return[f.A({id:"actionToggleSound","class":"btn btn-primary","data-action":"toggle-sound"},"\n    ",f.SPAN({"class":function(){return["\n      ",m.If(function(){return c.dataMustache(c.dot(t.lookup("Session"),"get"),"expertoIsMuted")},function(){return"\n        glyphicon glyphicon-volume-off\n      "},function(){return"\n        glyphicon glyphicon-volume-up\n      "}),"\n      "]}}),"\n  "),f.Raw('\n\n  <div id="camion-container" class="col-lg-12 col-md-12 col-sm-12 col-xs-12">\n  </div>\n\n  '),c.include(t.lookupTemplate("step")),f.Raw('\n\n  <div class="hidden">\n    <div id="experto-container"></div>\n  </div>')]}),h.__define__("expertoIntro",function(){var t=this;return[f.DIV({"class":"col-lg-5 col-lg-offset-2"},"\n    ",c.include(t.lookupTemplate("markdown"),function(){return"\n# Ttulo Experto\n\nTexto introduccin\n\n    "}),"\n  "),f.Raw('\n\n  <div class="col-lg-3">\n    <a class="btn btn-primary" href="#" data-action="comenzar">Comenzar!</a>\n  </div>')]}),h.__define__("expertoJuego",function(){var t=this;return[f.DIV({"class":"row"},"\n    ",f.DIV({"class":"pull-left"},"\n      ",f.H2("Fallos: ",m.View(function(){return c.mustache(c.dot(t.lookup("Session"),"get"),"expertoFallos")})),"\n    "),"\n  "),"\n\n  ",f.DIV({"class":"row col-xs-offset-1 col-sm-offset-1 col-md-offset-1 col-lg-offset-1"},"\n    ",f.DIV({"class":"row"},"\n      ",m.Each(function(){return c.call(t.lookup("papas1"))},function(){return["\n        ",c.include(t.lookupTemplate("expertoJuegoOption")),"\n      "]}),"\n    "),"\n\n    ",f.DIV({"class":"row experto-incognitas"},"\n      ",m.Each(function(){return c.call(t.lookup("papasAAdivinar"))},function(){return["\n        ",c.include(t.lookupTemplate("expertoJuegoIncognita")),"\n      "]}),"\n    "),"\n\n    ",f.DIV({"class":"row"},"\n      ",m.Each(function(){return c.call(t.lookup("papas2"))},function(){return["\n        ",c.include(t.lookupTemplate("expertoJuegoOption")),"\n      "]}),"\n    "),"\n  ")]}),h.__define__("expertoJuegoOption",function(){var t=this;return f.DIV({"class":"col-xs-2 col-sm-2 col-md-2 col-lg-2"},"\n    ",f.DIV({"class":"experto-papa","data-papanumero":function(){return c.mustache(t.lookup("numero"))},style:function(){return['background-image: url("assets/images/papas/',c.mustache(t.lookup("imageFileNameScreen")),'")']}},"\n    "),"\n  ")}),h.__define__("expertoJuegoIncognita",function(){var t=this;return f.DIV({"class":"col-xs-2 col-sm-2 col-md-2 col-lg-2"},"\n    ",f.DIV({"class":"experto-incognita","data-papanumero":function(){return c.mustache(t.lookup("numero"))}},"\n      ",f.Raw('<div class="chakana">&nbsp;</div>'),"\n      ",f.DIV({"class":"papa-nombre"},m.View(function(){return c.mustache(t.lookup("nombre"))})),"\n    "),"\n  ")}),h.__define__("expertoPapaMuestra",function(){var t=this;return f.DIV({"class":"col-xs-6 col-md-2 col-lg-2 col-md-2 col-lg-2"},"\n    ",f.DIV({"class":"experto-papa","data-action":"presentarse","data-papanumero":function(){return c.mustache(t.lookup("numero"))},style:function(){return['background-image: url("assets/images/papas/',c.mustache(t.lookup("imageFileNameScreen")),'")']}},"\n      ",f.Raw('<div class="centro">&nbsp;</div>'),"\n    "),"\n  ")}),h.__define__("expertoIdentificarPapas",function(){var t=this;return[f.DIV({"class":"row text-center"},"\n    ",m.Each(function(){return c.call(t.lookup("papas1"))},function(){return["\n      ",c.include(t.lookupTemplate("expertoPapaMuestra")),"\n    "]}),"\n  "),"\n\n  ",f.DIV({"class":"row text-center"},"\n    ",m.Each(function(){return c.call(t.lookup("papas2"))},function(){return["\n      ",c.include(t.lookupTemplate("expertoPapaMuestra")),"\n    "]}),"\n  "),f.Raw('\n\n  <div class="row text-center">\n    <a class="btn btn-primary" href="#" data-action="papas-identificadas">Comenzar!</a>\n  </div>')]}),h.__define__("expertoFin",function(){var t=this;return[f.DIV({"class":"row no-print hidden-print"},"\n    ",f.Raw('<div class="col-lg-4 col-md-4">\n      <h1>Muy bien!</h1>\n    </div>'),"\n    ",f.DIV({"class":"col-lg-6 col-md-6"},"\n      ",f.H3(f.Raw("<strong>Fallos:</strong>")," ",m.View(function(){return c.mustache(c.dot(t.lookup("Session"),"get"),"expertoFallos")})),"\n    "),"\n  "),"\n\n  ",f.DIV({"class":"row hidden-print"},"\n    ",f.DIV({"class":"col-lg-4 col-md-4"},"\n      ",m.Each(function(){return c.call(t.lookup("papasAdivinadas"))},function(){return["\n        ",c.include(t.lookupTemplate("expertoPapaAdivinada")),"\n      "]}),"\n    "),"\n    ",f.DIV({"class":"col-lg-8 col-md-8"},"\n      ",f.DIV({"class":"row experto-papa-detalles"},"\n        ",m.Each(function(){return c.call(t.lookup("papasCamposExtra"))},function(){return["\n          ",m.Unless(function(){return c.call(c.dot(t.lookup("."),"printOnly"))},function(){return["\n            ",f.DIV({"class":"row"},"\n              ",f.DIV({"class":"col-lg-4 col-md-4 col-sm-5 col-xs-5"},"\n                ",f.H4(f.STRONG(m.View(function(){return c.mustache(c.dot(t.lookup("."),"label"))}),":")),"\n              "),"\n              ",f.DIV({"class":"col-lg-8 col-md-8 col-sm-7 col-xs-7"},"\n                ",m.If(function(){return c.call(c.dot(t.lookup("."),"mainField"))},function(){return["\n                  ",f.H3(m.View(function(){return c.mustache(t.lookup("papaConsultada"),c.dot(t.lookup("."),"field"))})),"\n                "]},function(){return["\n                  ",f.H4(m.View(function(){return c.mustache(t.lookup("papaConsultada"),c.dot(t.lookup("."),"field"))})),"\n                "]}),"\n              "),"\n            "),"\n          "]}),"\n        "]}),"\n      "),"\n    "),"\n  "),"\n\n  ",f.DIV({"class":"row visible-print-inline-block"},"\n    ",m.Each(function(){return c.call(t.lookup("papasAdivinadas"))},function(){return["\n      ",f.DIV({"class":"col-lg-12 col-md-12 col-sm-12 col-xs-12"},"\n        ",f.DIV({"class":"row experto-papa-detalles"},"\n          ",m.Each(function(){return c.call(t.lookup("papasCamposExtra"))},function(){return["\n            ",f.DIV({"class":"row"},"\n              ",f.DIV({"class":"col-lg-4 col-md-4 col-sm-5 col-xs-5"},"\n                ",f.H5(f.STRONG(m.View(function(){return c.mustache(c.dot(t.lookup("."),"label"))}),":")),"\n              "),"\n              ",f.DIV({"class":"col-lg-8 col-md-8 col-sm-7 col-xs-7"},"\n                ",m.Unless(function(){return c.call(c.dot(t.lookup("."),"printOnly"))},function(){return["\n                  ",f.H4(m.View(function(){return c.mustache(t.lookup("papaConsultadaPrint"),t.lookup(".."),c.dot(t.lookup("."),"field"))})),"\n                "]},function(){return["\n                  ",f.IMG({"class":"img-responsive",src:function(){return["assets/images/papas/",c.mustache(t.lookup("papaConsultadaPrint"),t.lookup(".."),"imageFileNamePrint")]}}),"\n                "]}),"\n              "),"\n            "),"\n          "]}),"\n        "),"\n      "),"  \n    "]}),"\n  "),f.Raw('\n\n  <div class="row">\n    <br>\n    <button class="btn btn-primary" href="#" data-action="comenzar">\n      <span class="glyphicon glyphicon-repeat"></span> Volver a jugar\n    </button>\n    <button class="btn btn-primary" href="#" data-action="imprimir">\n      <span class="glyphicon glyphicon-print"></span> Imprimir\n    </button>\n  </div>')]}),h.__define__("expertoPapaAdivinada",function(){var t=this;return f.DIV({"class":"col-xs-12 col-sm-12 col-md-6 col-lg-6 text-center"},"\n    ",f.DIV({"class":"experto-papa","data-action":"set-papa-actual",style:function(){return['background-image: url("assets/images/papas/',c.mustache(t.lookup("imageFileNameScreen")),'");\n      ',c.mustache(t.lookup("papaActualBgStyle"))]}},"\n    "),"\n  ")})}.call(this),function(){function n(t,e,n){var i;do i=Math.floor(Math.random()*(e-t+1))+t;while(n.indexOf(i)>-1);return i}function i(){var t=l.get("expertoPapasActuales");if(!t){t=[];for(var i=0;m>i;i++)t.push(n(1,e.find().count(),t));l.set("expertoPapasActuales",t)}return p(t)}function r(t,e){var n=l.get("expertoPapasActuales");return p(n.slice(t,e))}function a(){return r(0,m/2)}function c(){return r(m/2,m)}function p(t){return t?e.find({numero:{$in:t}}):void 0}function f(){return p(l.get("expertoPapasAdivinadas"))}var m=10,g=5,y={'click [data-action="comenzar"]':function(t){return t.preventDefault(),l.set("expertoStep","identificarPapas"),u(["expertoTiempo","expertoPapasActuales","expertoFallos","expertoPapasAAdivinar","expertoPapasAdivinadas"]).each(function(t){l.set(t,void 0)}),!1},'click [data-action="papas-identificadas"]':function(t){return t.preventDefault(),l.set("expertoStep","juego"),!1},'click [data-action="volver-al-comienzo"]':function(t){return t.preventDefault(),bootbox.confirm("Ests segur@ de que quieres abandonar el juego?",function(t){t&&l.set("expertoStep","identificarPapas")}),!1},'click [data-action="toggle-sound"]':function(){var e=!t.sonidos.manager._muted;e?t.sonidos.manager.mute():t.sonidos.manager.unmute(),l.set("expertoIsMuted",e)},'click [data-action="reiniciar"]':function(e){return e.preventDefault(),bootbox.confirm("Ests segur@ de que quieres abandonar el juego?",function(e){e&&t.restart()}),!1},'click [data-action="set-papa-actual"]':function(t){t.preventDefault(),l.set("expertoPapaConsultada",this.numero)},'click [data-action="presentarse"]':function(n,i){n.preventDefault();var r=i.$(n.currentTarget),o=r.data("papanumero"),a=e.findOne({numero:o});return r.find(".centro").grumble({text:a.nombre,angle:85,distance:0,hideAfter:1e3}),t.sonidos.papas.play(a.numero),!1}};d.registerHelper("expertoTiempo",function(){return l.get("expertoTiempo")}),h.experto.rendered=function(){t.init()},h.experto.step=function(){var t=l.get("expertoStep")||"intro";return h["experto"+u.capitalize(t)]},h.experto.events(y),h.expertoIntro.events(y),h.expertoIdentificarPapas.rendered=function(){},h.expertoIdentificarPapas.papas1=function(){return i(),a()},h.expertoIdentificarPapas.papas2=function(){return i(),c()},h.expertoJuego.rendered=function(){l.set("expertoFallos",0);for(var t=[],e=[],i=0;g>i;i++){var r=l.get("expertoPapasActuales"),o=n(0,r.length-1,e);t.push(r[o]),e.push(o)}l.set("expertoPapasAAdivinar",t)},h.expertoJuegoOption.rendered=function(){var e=this;e.$(".experto-papa").draggable({revert:function(e){return e||(l.set("expertoFallos",l.get("expertoFallos")+1),t.sonidos.incorrecto.play()),!e}})},s.autorun(function(){var e=l.get("expertoPapasAdivinadas"),n=l.get("expertoPapasAAdivinar");e&&n&&e.length==n.length&&u(u(n).difference(e)).isEmpty()&&t.camion.go(function(){l.set("expertoStep","fin")})}),h.expertoJuegoIncognita.rendered=function(){var e=this;e.$(".experto-incognita").droppable({accept:function(t){return $(t).hasClass("experto-papa")&&$(this).data("papanumero")==$(t).data("papanumero")},drop:function(n,i){i.draggable.draggable("destroy"),e.$(this).addClass("resuelta");var r=parseInt($(this).data("papanumero")),o=l.get("expertoPapasAdivinadas")||[];o.indexOf(r)<0&&(o.push(r),l.set("expertoPapasAdivinadas",o)),t.sonidos.correcto.play()}})},h.expertoJuego.papas1=function(){return a()},h.expertoJuego.papas2=function(){return c()},h.expertoJuego.papasAAdivinar=function(){return p(l.get("expertoPapasAAdivinar"))},h.expertoJuego.events(y),h.expertoFin.rendered=function(){t.sonidos.final.play()},h.expertoFin.papasAdivinadas=function(){return f()},h.expertoFin.papasCamposExtra=function(){return[{field:"nombre",label:"Nombre",mainField:!0},{printOnly:!0,label:"Colorea"},{field:"significadoNombre",label:"Significado del nombre"},{field:"nombreAlternativo",label:"Nombre alternativo"},{field:"colorFlor",label:"Color principal de la flor"},{field:"toleranciaGranizada",label:"Tolerancia a la granizada"},{field:"colorPulpa",label:"Color principal de la pulpa del tubrculo"},{field:"formaRara",label:"Forma rara"},{field:"toleranciaHelada",label:"Tolerancia a la helada"},{field:"usoCocina",label:"Uso en la cocina"}]},h.expertoFin.papaConsultada=function(t){var n=l.get("expertoPapaConsultada");return n?o=e.findOne({numero:n}):(o=f().fetch()[0],l.set("expertoPapaConsultada",o.numero)),o[t]},h.expertoFin.papaConsultadaPrint=function(t,e){return t[e]},h.expertoFin.events(y),h.expertoFin.events({'click [data-action="imprimir"]':function(t){return t.preventDefault(),window.print(),!1}}),h.expertoPapaAdivinada.papaActualBgStyle=function(){return this.numero==l.get("expertoPapaConsultada")?"background-position: -160px":void 0},h.expertoPapaAdivinada.events(y)}.call(this),"undefined"==typeof Package&&(Package={}),Package["papitas-experto"]={Experto:t,Papas:e}}(),Meteor=Package.meteor.Meteor,Log=Package.logging.Log,Deps=Package.deps.Deps,Session=Package.session.Session,UI=Package.ui.UI,Handlebars=Package.ui.Handlebars,Spacebars=Package.spacebars.Spacebars,Template=Package.templating.Template,check=Package.check.check,Match=Package.check.Match,_=Package.underscore._,$=Package.jquery.$,jQuery=Package.jquery.jQuery,Random=Package.random.Random,EJSON=Package.ejson.EJSON,GroundDB=Package.grounddb.GroundDB,Rompecabezas=Package["papitas-rompecabezas"].Rompecabezas,Etapas=Package["papitas-rompecabezas"].Etapas,_s=Package["underscore-string-latest"]._s,Pince=Package.pince.Pince,Logger=Package.pince.Logger,MicroEvent=Package.pince.MicroEvent,moment=Package["moment-with-langs"].moment,Experto=Package["papitas-experto"].Experto,Papas=Package["papitas-experto"].Papas,HTML=Package.htmljs.HTML,Blaze=Package.blaze.Blaze,SimpleSchema=Package["simple-schema"].SimpleSchema,MongoObject=Package["simple-schema"].MongoObject,function(){Template.__body__.__contentParts.push(Blaze.View("body_content_"+Template.__body__.__contentParts.length,function(){var t=this;return Spacebars.include(t.lookupTemplate("rompecabezas"))})),Meteor.startup(Template.__body__.__instantiate)}();